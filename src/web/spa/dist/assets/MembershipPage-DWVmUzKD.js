import{u as at,d as nt,a as rt,r,h as ot,j as e,L as lt,c as x}from"./index-CqR0r56c.js";import{F as it}from"./ArrowLeftIcon-NR7umhpe.js";const _={admin:"SuperAdmin",manager:"Manager",user:"User"},ze=["admin","manager","user"],ae=[{value:-8,label:"UTC-8"},{value:-5,label:"UTC-5"},{value:0,label:"UTC+0/GMT"}];function p(){if(typeof window>"u")return null;const c=window.API_BASE_URL;return c?c.replace(/\/$/,""):null}function dt(c,h,m){if(!c&&!m)return"—";if(!c)return m?`from ${m}`:"—";try{const N=new Date(c);if(isNaN(N.getTime()))return c+(m?` from ${m}`:"");const b=N.getTime()+(h||0)*36e5,f=new Date(b),d=j=>j<10?"0"+j:""+j,g=f.getUTCFullYear(),y=d(f.getUTCMonth()+1),w=d(f.getUTCDate()),z=d(f.getUTCHours()),R=d(f.getUTCMinutes()),v=ae.find(j=>j.value===h),G=v?v.label:h<0?"UTC"+h:"UTC+"+h;let C=`${g}-${y}-${w} ${z}:${R} ${G}`;return m&&(C+=` from ${m}`),C}catch{return c+(m?` from ${m}`:"")}}const xt=()=>{const{user:c}=at(),h=nt(),[m,N]=rt(),b=m.get("tab"),f=b==="groups"?"groups":b==="roles"?"roles":"users",[d,g]=r.useState(f);r.useEffect(()=>{g(b==="groups"?"groups":b==="roles"?"roles":"users")},[b]);const y=t=>{g(t);const s=new URLSearchParams(m);t==="groups"?s.set("tab","groups"):t==="roles"?s.set("tab","roles"):s.delete("tab"),N(s)},[w,z]=r.useState([]),[R,v]=r.useState(!0),[G,C]=r.useState(null),[j,qe]=r.useState(""),[ne,re]=r.useState(-8),[E,q]=r.useState([]),[Je,D]=r.useState(!0),[oe,S]=r.useState(null),[J,le]=r.useState(""),[ie,de]=r.useState(""),[ce,me]=r.useState(""),[ue,xe]=r.useState(!1),[pe,he]=r.useState(null),[U,be]=r.useState(null),[Y,K]=r.useState(""),[fe,W]=r.useState(""),[ge,ye]=r.useState(!1),[je,L]=r.useState(null),[P,Ne]=r.useState(null),[we,Z]=r.useState([]),[Ye,A]=r.useState(!0),[ve,k]=r.useState(null),[Q,Ce]=r.useState(""),[V,Se]=r.useState([]),[X,ke]=r.useState([]),[Re,Ee]=r.useState(!1),[Ue,Te]=r.useState(null),[T,$e]=r.useState(null),[I,H]=r.useState([]),[F,ee]=r.useState([]),[Ge,De]=r.useState(!1),[Le,B]=r.useState(null),[M,Pe]=r.useState(null),$=ot(c??null,"manager"),O=(c==null?void 0:c.role)==="superadmin",Ae=async t=>{var a;const s=p();if(!s){C("API URL not set."),v(!1);return}if(!((a=window.auth)!=null&&a.getAccessToken)){C("Sign in required."),v(!1);return}v(!0),C(null);try{let o=`${s}/admin/users`;t&&(o+=`?paginationToken=${encodeURIComponent(t)}`);const n=await x(o);if(!n.ok){const u=await n.json().catch(()=>({}));throw new Error(u.error||"Failed to load users")}const l=await n.json();z(u=>t?[...u,...l.users??[]]:l.users??[]),qe(l.paginationToken??"")}catch(o){C((o==null?void 0:o.message)??"Failed to load users")}finally{v(!1)}},Ke=async t=>{const s=p();if(!s)return{cognitoGroups:[],customGroups:[]};try{const i=await x(`${s}/admin/users/${encodeURIComponent(t.username)}/groups`);if(!i.ok)return{cognitoGroups:[],customGroups:[]};const a=await i.json();return{cognitoGroups:a.cognitoGroups??[],customGroups:a.customGroups??[]}}catch{return{cognitoGroups:[],customGroups:[]}}},Ie=async()=>{var i;const t=p();if(!t){S("API URL not set."),D(!1);return}if(!((i=window.auth)!=null&&i.getAccessToken)){S("Sign in required."),D(!1);return}D(!0),S(null);try{const a=await x(`${t}/admin/groups`);if(!a.ok)throw new Error(await a.text());const n=((await a.json()).groups??[]).map(l=>({name:l.name??(l.PK??"").replace("GROUP#",""),description:l.description,permissions:Array.isArray(l.permissions)?l.permissions:[]}));n.sort((l,u)=>l.name.toLowerCase().localeCompare(u.name.toLowerCase())),q(n)}catch(a){S((a==null?void 0:a.message)??"Failed to load groups")}finally{D(!1)}};r.useEffect(()=>{const t=parseInt(sessionStorage.getItem("funkedupshift_lastlogin_tz")??"-8",10);!isNaN(t)&&ae.some(s=>s.value===t)&&re(t)},[]),r.useEffect(()=>{$&&d==="users"&&Ae()},[$,d]),r.useEffect(()=>{$&&(d==="groups"||d==="roles")&&Ie()},[$,d]);const Fe=async()=>{var i;const t=p();if(!t){k("API URL not set."),A(!1);return}if(!((i=window.auth)!=null&&i.getAccessToken)){k("Sign in required."),A(!1);return}A(!0),k(null);try{const a=await x(`${t}/admin/roles`);if(!a.ok){const n=await a.json().catch(()=>({}));throw new Error(n.error||"Failed to load roles")}const o=await a.json();Z(o.roles??[])}catch(a){k((a==null?void 0:a.message)??"Failed to load roles")}finally{A(!1)}};r.useEffect(()=>{O&&d==="roles"&&Fe()},[O,d]);const We=t=>{h(`/admin/users/edit?username=${encodeURIComponent(t.username)}&email=${encodeURIComponent(t.email??"")}&status=${encodeURIComponent(t.status??"")}`)},Ze=(t,s)=>{const i=[];return(t||[]).forEach(a=>{const o=_[a]||a,n=a==="admin"?"bg-amber-500/20 text-amber-200":a==="manager"?"bg-blue-500/20 text-blue-200":"bg-slate-600/30 text-slate-300";i.push(e.jsx("span",{className:`inline-block px-2 py-0.5 rounded text-xs mr-1 ${n}`,children:o},`c-${a}`))}),(s||[]).forEach(a=>{i.push(e.jsx("span",{className:"inline-block px-2 py-0.5 rounded text-xs mr-1 bg-emerald-500/20 text-emerald-200",children:a},`x-${a}`))}),i.length?i:e.jsx("span",{className:"text-slate-500",children:"—"})},Qe=t=>{be(t.name),K(t.description??""),W((t.permissions??[]).join(", ")),L(null)},te=()=>{be(null),K(""),W(""),L(null)},Ve=async t=>{var n;t.preventDefault();const s=J.trim();if(!s)return;const i=p();if(!i||!((n=window.auth)!=null&&n.getAccessToken))return;const o=ce.split(",").map(l=>l.trim()).filter(Boolean);xe(!0),he(null),S(null);try{const l=await x(`${i}/admin/groups`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s,description:ie.trim(),permissions:o})});if(!l.ok){const u=await l.json().catch(()=>({}));throw new Error(u.error||"Failed to create group")}le(""),de(""),me(""),he("Group created."),Ie()}catch(l){S((l==null?void 0:l.message)??"Failed to create group")}finally{xe(!1)}},Xe=async t=>{var o;if(t.preventDefault(),!U)return;const s=p();if(!s||!((o=window.auth)!=null&&o.getAccessToken))return;const a=fe.split(",").map(n=>n.trim()).filter(Boolean);ye(!0),L(null);try{const n=await x(`${s}/admin/groups/${encodeURIComponent(U)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:Y,permissions:a})});if(!n.ok){const l=await n.json().catch(()=>({}));throw new Error(l.error||"Failed to update group")}q(l=>l.map(u=>u.name===U?{...u,description:Y,permissions:a}:u)),te()}catch(n){L((n==null?void 0:n.message)??"Failed to update group")}finally{ye(!1)}},Be=async t=>{var a;if(!window.confirm(`Delete group "${t}"? Members will lose access.`))return;const s=p();if(!(!s||!((a=window.auth)!=null&&a.getAccessToken))){Ne(t);try{const o=await x(`${s}/admin/groups/${encodeURIComponent(t)}`,{method:"DELETE"});if(!o.ok){const n=await o.json().catch(()=>({}));throw new Error(n.error||"Failed to delete group")}q(n=>n.filter(l=>l.name!==t)),U===t&&te()}catch(o){S((o==null?void 0:o.message)??"Failed to delete group")}finally{Ne(null)}}},He=t=>{const s=parseInt(t.target.value,10);re(s),sessionStorage.setItem("funkedupshift_lastlogin_tz",String(s))},Me=(t,s,i)=>{s.includes(t)?i(s.filter(a=>a!==t)):i([...s,t])},Oe=(t,s,i)=>{s.includes(t)?i(s.filter(a=>a!==t)):i([...s,t])},et=async t=>{var o;t.preventDefault();const s=Q.trim();if(!s)return;const i=p();if(!(!i||!((o=window.auth)!=null&&o.getAccessToken))){Ee(!0),Te(null),k(null);try{const n=await x(`${i}/admin/roles`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s,cognitoGroups:V,customGroups:X})});if(!n.ok){const l=await n.json().catch(()=>({}));throw new Error(l.error||"Failed to create role")}Ce(""),Se([]),ke([]),Te("Role created."),Fe()}catch(n){k((n==null?void 0:n.message)??"Failed to create role")}finally{Ee(!1)}}},tt=t=>{$e(t.name),H(t.cognitoGroups??[]),ee(t.customGroups??[]),B(null)},se=()=>{$e(null),H([]),ee([]),B(null)},st=async t=>{var a;if(t.preventDefault(),!T)return;const s=p();if(!(!s||!((a=window.auth)!=null&&a.getAccessToken))){De(!0),B(null);try{const o=await x(`${s}/admin/roles/${encodeURIComponent(T)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({cognitoGroups:I,customGroups:F})});if(!o.ok){const n=await o.json().catch(()=>({}));throw new Error(n.error||"Failed to update role")}Z(n=>n.map(l=>l.name===T?{...l,cognitoGroups:I,customGroups:F}:l)),se()}catch(o){B((o==null?void 0:o.message)??"Failed to update role")}finally{De(!1)}}},_e=async t=>{var a;if(!window.confirm(`Delete role "${t}"?`))return;const s=p();if(!(!s||!((a=window.auth)!=null&&a.getAccessToken))){Pe(t);try{const o=await x(`${s}/admin/roles/${encodeURIComponent(t)}`,{method:"DELETE"});if(!o.ok){const n=await o.json().catch(()=>({}));throw new Error(n.error||"Failed to delete role")}Z(n=>n.filter(l=>l.name!==t)),T===t&&se()}catch(o){k((o==null?void 0:o.message)??"Failed to delete role")}finally{Pe(null)}}};return $?e.jsxs("div",{className:"space-y-6",children:[e.jsxs(lt,{to:"/",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[e.jsx(it,{className:"h-4 w-4"}),"Back to Home"]}),e.jsxs("header",{className:"space-y-2",children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Membership"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Manage users and groups."})]}),e.jsxs("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:[e.jsx("button",{type:"button",onClick:()=>y("users"),className:`px-4 py-2 rounded-md text-sm font-medium ${d==="users"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Users"}),e.jsx("button",{type:"button",onClick:()=>y("groups"),className:`px-4 py-2 rounded-md text-sm font-medium ${d==="groups"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Groups"}),O&&e.jsx("button",{type:"button",onClick:()=>y("roles"),className:`px-4 py-2 rounded-md text-sm font-medium ${d==="roles"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Roles"})]}),d==="users"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("label",{htmlFor:"tz-select",className:"text-slate-500",children:"Last login timezone:"}),e.jsx("select",{id:"tz-select",value:ne,onChange:He,className:"rounded border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 text-sm",children:ae.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),G&&e.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:G}),e.jsx("div",{className:"overflow-x-auto rounded-lg border border-slate-800",children:e.jsxs("table",{className:"min-w-full divide-y divide-slate-800",children:[e.jsx("thead",{className:"bg-slate-900/80",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Last login"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"System Roles"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Custom Groups"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-800",children:R&&w.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-slate-500",children:"Loading…"})}):w.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-slate-500",children:"No users found."})}):w.map(t=>e.jsx(ct,{user:t,tzOffset:ne,formatLastLogin:dt,renderGroupBadges:Ze,loadUserGroups:Ke,onClick:()=>We(t)},t.username))})]})}),j&&e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{type:"button",onClick:()=>Ae(j),disabled:R,className:"rounded-md border border-slate-700 px-4 py-2 text-sm font-medium text-slate-200 hover:bg-slate-800 disabled:opacity-50",children:R?"Loading…":"Load more"})})]}),d==="groups"&&e.jsxs(e.Fragment,{children:[e.jsxs("form",{className:"space-y-3 max-w-md",onSubmit:Ve,children:[e.jsx("h2",{className:"text-sm font-medium text-slate-300",children:"Create group"}),e.jsx("input",{type:"text",value:J,onChange:t=>le(t.target.value),placeholder:"Name (alphanumeric, underscore, hyphen)",required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),e.jsx("input",{type:"text",value:ie,onChange:t=>de(t.target.value),placeholder:"Description (optional)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),e.jsx("input",{type:"text",value:ce,onChange:t=>me(t.target.value),placeholder:"Permissions (comma-separated, e.g. media:edit, sites:add)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),e.jsx("button",{type:"submit",disabled:ue||!J.trim(),className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:ue?"Creating…":"Create"}),pe&&e.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:pe}),oe&&e.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:oe})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-sm font-medium text-slate-300 mb-2",children:"Custom groups"}),Je?e.jsx("p",{className:"text-sm text-slate-500",children:"Loading…"}):E.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No custom groups yet. Create one above."}):e.jsx("ul",{className:"space-y-2",children:E.map(t=>e.jsx("li",{className:"rounded-lg border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm",children:U===t.name?e.jsxs("form",{onSubmit:Xe,className:"space-y-2",children:[e.jsx("span",{className:"font-medium text-slate-200",children:t.name}),e.jsx("input",{type:"text",value:Y,onChange:s=>K(s.target.value),placeholder:"Description (optional)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),e.jsx("input",{type:"text",value:fe,onChange:s=>W(s.target.value),placeholder:"Permissions (comma-separated)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx("button",{type:"submit",disabled:ge,className:"rounded-md bg-brand-orange px-3 py-1.5 text-xs font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:ge?"Saving…":"Save"}),e.jsx("button",{type:"button",onClick:te,className:"rounded-md border border-slate-700 px-3 py-1.5 text-xs font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"}),e.jsx("button",{type:"button",onClick:()=>Be(t.name),disabled:P===t.name,className:"rounded-md border border-red-500/60 px-3 py-1.5 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:P===t.name?"Deleting…":"Delete"})]}),je&&e.jsx("p",{className:"text-xs text-red-400",children:je})]}):e.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"font-medium text-slate-200",children:t.name}),t.description&&e.jsx("span",{className:"text-slate-500 ml-2",children:t.description}),t.permissions&&t.permissions.length>0&&e.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Permissions: ",t.permissions.join(", ")]})]}),e.jsxs("div",{className:"flex gap-2 shrink-0",children:[e.jsx("button",{type:"button",onClick:()=>Qe(t),className:"rounded-md border border-slate-700 px-2 py-1 text-xs font-medium text-slate-300 hover:bg-slate-800",children:"Edit"}),e.jsx("button",{type:"button",onClick:()=>Be(t.name),disabled:P===t.name,className:"rounded-md border border-red-500/60 px-2 py-1 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:P===t.name?"Deleting…":"Delete"})]})]})},t.name))})]})]}),d==="roles"&&O&&e.jsxs(e.Fragment,{children:[e.jsxs("form",{className:"space-y-3 max-w-md",onSubmit:et,children:[e.jsx("h2",{className:"text-sm font-medium text-slate-300",children:"Create role"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Define a named role by selecting Cognito groups and custom groups. Use for impersonation."}),e.jsx("input",{type:"text",value:Q,onChange:t=>Ce(t.target.value),placeholder:"Role name (e.g. Squash Manager)",required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Cognito groups"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ze.map(t=>e.jsx("button",{type:"button",onClick:()=>Me(t,V,Se),className:`rounded-md px-2 py-1 text-xs font-medium ${V.includes(t)?"bg-blue-500/30 text-blue-200":"border border-slate-600 text-slate-400 hover:bg-slate-800"}`,children:_[t]||t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Custom groups"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[E.map(t=>e.jsx("button",{type:"button",onClick:()=>Oe(t.name,X,ke),className:`rounded-md px-2 py-1 text-xs font-medium ${X.includes(t.name)?"bg-emerald-500/30 text-emerald-200":"border border-slate-600 text-slate-400 hover:bg-slate-800"}`,children:t.name},t.name)),E.length===0&&e.jsx("span",{className:"text-xs text-slate-500",children:"Create groups first."})]})]}),e.jsx("button",{type:"submit",disabled:Re||!Q.trim(),className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:Re?"Creating…":"Create"}),Ue&&e.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:Ue}),ve&&e.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:ve})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-sm font-medium text-slate-300 mb-2",children:"Defined roles"}),Ye?e.jsx("p",{className:"text-sm text-slate-500",children:"Loading…"}):we.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No roles yet. Create one above."}):e.jsx("ul",{className:"space-y-2",children:we.map(t=>e.jsx("li",{className:"rounded-lg border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm",children:T===t.name?e.jsxs("form",{onSubmit:st,className:"space-y-2",children:[e.jsx("span",{className:"font-medium text-slate-200",children:t.name}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Cognito groups"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ze.map(s=>e.jsx("button",{type:"button",onClick:()=>Me(s,I,H),className:`rounded-md px-2 py-1 text-xs ${I.includes(s)?"bg-blue-500/30 text-blue-200":"border border-slate-600 text-slate-400"}`,children:_[s]||s},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Custom groups"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:E.map(s=>e.jsx("button",{type:"button",onClick:()=>Oe(s.name,F,ee),className:`rounded-md px-2 py-1 text-xs ${F.includes(s.name)?"bg-emerald-500/30 text-emerald-200":"border border-slate-600 text-slate-400"}`,children:s.name},s.name))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",disabled:Ge,className:"rounded-md bg-brand-orange px-3 py-1.5 text-xs font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:Ge?"Saving…":"Save"}),e.jsx("button",{type:"button",onClick:se,className:"rounded-md border border-slate-700 px-3 py-1.5 text-xs text-slate-300 hover:bg-slate-800",children:"Cancel"}),e.jsx("button",{type:"button",onClick:()=>_e(t.name),disabled:M===t.name,className:"rounded-md border border-red-500/60 px-3 py-1.5 text-xs text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:M===t.name?"Deleting…":"Delete"})]}),Le&&e.jsx("p",{className:"text-xs text-red-400",children:Le})]}):e.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"font-medium text-slate-200",children:t.name}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[(t.cognitoGroups??[]).map(s=>e.jsx("span",{className:"inline-block px-2 py-0.5 rounded text-xs bg-blue-500/20 text-blue-200",children:_[s]||s},`c-${s}`)),(t.customGroups??[]).map(s=>e.jsx("span",{className:"inline-block px-2 py-0.5 rounded text-xs bg-emerald-500/20 text-emerald-200",children:s},`x-${s}`))]})]}),e.jsxs("div",{className:"flex gap-2 shrink-0",children:[e.jsx("button",{type:"button",onClick:()=>tt(t),className:"rounded-md border border-slate-700 px-2 py-1 text-xs text-slate-300 hover:bg-slate-800",children:"Edit"}),e.jsx("button",{type:"button",onClick:()=>_e(t.name),disabled:M===t.name,className:"rounded-md border border-red-500/60 px-2 py-1 text-xs text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:M===t.name?"Deleting…":"Delete"})]})]})},t.name))})]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Membership"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})},ct=({user:c,tzOffset:h,formatLastLogin:m,renderGroupBadges:N,loadUserGroups:b,onClick:f})=>{const[d,g]=r.useState(null);return r.useEffect(()=>{let y=!1;return b(c).then(w=>{y||g(w)}),()=>{y=!0}},[c.username]),e.jsxs("tr",{className:"cursor-pointer hover:bg-slate-800/50 transition-colors",onClick:f,children:[e.jsx("td",{className:"px-4 py-3 text-sm text-slate-200",children:c.email||c.username||"—"}),e.jsx("td",{className:"px-4 py-3 text-sm text-slate-400",children:c.status||"—"}),e.jsx("td",{className:"px-4 py-3 text-sm text-slate-400",children:m(c.lastLoginAt??"",h,c.lastLoginIp)}),e.jsx("td",{className:"px-4 py-3 text-sm",children:d?N(d.cognitoGroups,[]):e.jsx("span",{className:"text-slate-500",children:"…"})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:d?N([],d.customGroups):e.jsx("span",{className:"text-slate-500",children:"…"})})]})};export{xt as default};

function Pp(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const l=Object.getOwnPropertyDescriptor(r,a);l&&Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function Tp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Cd={exports:{}},bl={},Ed={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xs=Symbol.for("react.element"),Ap=Symbol.for("react.portal"),Rp=Symbol.for("react.fragment"),Lp=Symbol.for("react.strict_mode"),$p=Symbol.for("react.profiler"),Ip=Symbol.for("react.provider"),Up=Symbol.for("react.context"),Dp=Symbol.for("react.forward_ref"),Mp=Symbol.for("react.suspense"),Op=Symbol.for("react.memo"),Fp=Symbol.for("react.lazy"),Bc=Symbol.iterator;function _p(e){return e===null||typeof e!="object"?null:(e=Bc&&e[Bc]||e["@@iterator"],typeof e=="function"?e:null)}var Pd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Td=Object.assign,Ad={};function es(e,t,n){this.props=e,this.context=t,this.refs=Ad,this.updater=n||Pd}es.prototype.isReactComponent={};es.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};es.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Rd(){}Rd.prototype=es.prototype;function Bi(e,t,n){this.props=e,this.context=t,this.refs=Ad,this.updater=n||Pd}var zi=Bi.prototype=new Rd;zi.constructor=Bi;Td(zi,es.prototype);zi.isPureReactComponent=!0;var zc=Array.isArray,Ld=Object.prototype.hasOwnProperty,Wi={current:null},$d={key:!0,ref:!0,__self:!0,__source:!0};function Id(e,t,n){var r,a={},l=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(l=""+t.key),t)Ld.call(t,r)&&!$d.hasOwnProperty(r)&&(a[r]=t[r]);var i=arguments.length-2;if(i===1)a.children=n;else if(1<i){for(var u=Array(i),d=0;d<i;d++)u[d]=arguments[d+2];a.children=u}if(e&&e.defaultProps)for(r in i=e.defaultProps,i)a[r]===void 0&&(a[r]=i[r]);return{$$typeof:Xs,type:e,key:l,ref:o,props:a,_owner:Wi.current}}function Bp(e,t){return{$$typeof:Xs,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Gi(e){return typeof e=="object"&&e!==null&&e.$$typeof===Xs}function zp(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Wc=/\/+/g;function Gl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?zp(""+e.key):t.toString(36)}function Aa(e,t,n,r,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Xs:case Ap:o=!0}}if(o)return o=e,a=a(o),e=r===""?"."+Gl(o,0):r,zc(a)?(n="",e!=null&&(n=e.replace(Wc,"$&/")+"/"),Aa(a,t,n,"",function(d){return d})):a!=null&&(Gi(a)&&(a=Bp(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(Wc,"$&/")+"/")+e)),t.push(a)),1;if(o=0,r=r===""?".":r+":",zc(e))for(var i=0;i<e.length;i++){l=e[i];var u=r+Gl(l,i);o+=Aa(l,t,n,u,a)}else if(u=_p(e),typeof u=="function")for(e=u.call(e),i=0;!(l=e.next()).done;)l=l.value,u=r+Gl(l,i++),o+=Aa(l,t,n,u,a);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function ia(e,t,n){if(e==null)return e;var r=[],a=0;return Aa(e,r,"","",function(l){return t.call(n,l,a++)}),r}function Wp(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var jt={current:null},Ra={transition:null},Gp={ReactCurrentDispatcher:jt,ReactCurrentBatchConfig:Ra,ReactCurrentOwner:Wi};function Ud(){throw Error("act(...) is not supported in production builds of React.")}ke.Children={map:ia,forEach:function(e,t,n){ia(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ia(e,function(){t++}),t},toArray:function(e){return ia(e,function(t){return t})||[]},only:function(e){if(!Gi(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ke.Component=es;ke.Fragment=Rp;ke.Profiler=$p;ke.PureComponent=Bi;ke.StrictMode=Lp;ke.Suspense=Mp;ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gp;ke.act=Ud;ke.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Td({},e.props),a=e.key,l=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,o=Wi.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(u in t)Ld.call(t,u)&&!$d.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&i!==void 0?i[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){i=Array(u);for(var d=0;d<u;d++)i[d]=arguments[d+2];r.children=i}return{$$typeof:Xs,type:e.type,key:a,ref:l,props:r,_owner:o}};ke.createContext=function(e){return e={$$typeof:Up,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Ip,_context:e},e.Consumer=e};ke.createElement=Id;ke.createFactory=function(e){var t=Id.bind(null,e);return t.type=e,t};ke.createRef=function(){return{current:null}};ke.forwardRef=function(e){return{$$typeof:Dp,render:e}};ke.isValidElement=Gi;ke.lazy=function(e){return{$$typeof:Fp,_payload:{_status:-1,_result:e},_init:Wp}};ke.memo=function(e,t){return{$$typeof:Op,type:e,compare:t===void 0?null:t}};ke.startTransition=function(e){var t=Ra.transition;Ra.transition={};try{e()}finally{Ra.transition=t}};ke.unstable_act=Ud;ke.useCallback=function(e,t){return jt.current.useCallback(e,t)};ke.useContext=function(e){return jt.current.useContext(e)};ke.useDebugValue=function(){};ke.useDeferredValue=function(e){return jt.current.useDeferredValue(e)};ke.useEffect=function(e,t){return jt.current.useEffect(e,t)};ke.useId=function(){return jt.current.useId()};ke.useImperativeHandle=function(e,t,n){return jt.current.useImperativeHandle(e,t,n)};ke.useInsertionEffect=function(e,t){return jt.current.useInsertionEffect(e,t)};ke.useLayoutEffect=function(e,t){return jt.current.useLayoutEffect(e,t)};ke.useMemo=function(e,t){return jt.current.useMemo(e,t)};ke.useReducer=function(e,t,n){return jt.current.useReducer(e,t,n)};ke.useRef=function(e){return jt.current.useRef(e)};ke.useState=function(e){return jt.current.useState(e)};ke.useSyncExternalStore=function(e,t,n){return jt.current.useSyncExternalStore(e,t,n)};ke.useTransition=function(){return jt.current.useTransition()};ke.version="18.3.1";Ed.exports=ke;var c=Ed.exports;const Re=Tp(c),Hr=Pp({__proto__:null,default:Re},[c]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hp=c,Kp=Symbol.for("react.element"),Vp=Symbol.for("react.fragment"),qp=Object.prototype.hasOwnProperty,Jp=Hp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Qp={key:!0,ref:!0,__self:!0,__source:!0};function Dd(e,t,n){var r,a={},l=null,o=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)qp.call(t,r)&&!Qp.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:Kp,type:e,key:l,ref:o,props:a,_owner:Jp.current}}bl.Fragment=Vp;bl.jsx=Dd;bl.jsxs=Dd;Cd.exports=bl;var s=Cd.exports,Io={},Md={exports:{}},$t={},Od={exports:{}},Fd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(N,S){var R=N.length;N.push(S);e:for(;0<R;){var C=R-1>>>1,P=N[C];if(0<a(P,S))N[C]=S,N[R]=P,R=C;else break e}}function n(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var S=N[0],R=N.pop();if(R!==S){N[0]=R;e:for(var C=0,P=N.length,Y=P>>>1;C<Y;){var V=2*(C+1)-1,M=N[V],J=V+1,T=N[J];if(0>a(M,R))J<P&&0>a(T,M)?(N[C]=T,N[J]=R,C=J):(N[C]=M,N[V]=R,C=V);else if(J<P&&0>a(T,R))N[C]=T,N[J]=R,C=J;else break e}}return S}function a(N,S){var R=N.sortIndex-S.sortIndex;return R!==0?R:N.id-S.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var o=Date,i=o.now();e.unstable_now=function(){return o.now()-i}}var u=[],d=[],x=1,p=null,g=3,v=!1,b=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(N){for(var S=n(d);S!==null;){if(S.callback===null)r(d);else if(S.startTime<=N)r(d),S.sortIndex=S.expirationTime,t(u,S);else break;S=n(d)}}function j(N){if(y=!1,m(N),!b)if(n(u)!==null)b=!0,K(k);else{var S=n(d);S!==null&&re(j,S.startTime-N)}}function k(N,S){b=!1,y&&(y=!1,h(I),I=-1),v=!0;var R=g;try{for(m(S),p=n(u);p!==null&&(!(p.expirationTime>S)||N&&!B());){var C=p.callback;if(typeof C=="function"){p.callback=null,g=p.priorityLevel;var P=C(p.expirationTime<=S);S=e.unstable_now(),typeof P=="function"?p.callback=P:p===n(u)&&r(u),m(S)}else r(u);p=n(u)}if(p!==null)var Y=!0;else{var V=n(d);V!==null&&re(j,V.startTime-S),Y=!1}return Y}finally{p=null,g=R,v=!1}}var E=!1,$=null,I=-1,Q=5,q=-1;function B(){return!(e.unstable_now()-q<Q)}function ee(){if($!==null){var N=e.unstable_now();q=N;var S=!0;try{S=$(!0,N)}finally{S?_():(E=!1,$=null)}}else E=!1}var _;if(typeof f=="function")_=function(){f(ee)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,U=D.port2;D.port1.onmessage=ee,_=function(){U.postMessage(null)}}else _=function(){w(ee,0)};function K(N){$=N,E||(E=!0,_())}function re(N,S){I=w(function(){N(e.unstable_now())},S)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(N){N.callback=null},e.unstable_continueExecution=function(){b||v||(b=!0,K(k))},e.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<N?Math.floor(1e3/N):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(N){switch(g){case 1:case 2:case 3:var S=3;break;default:S=g}var R=g;g=S;try{return N()}finally{g=R}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(N,S){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var R=g;g=N;try{return S()}finally{g=R}},e.unstable_scheduleCallback=function(N,S,R){var C=e.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?C+R:C):R=C,N){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=R+P,N={id:x++,callback:S,priorityLevel:N,startTime:R,expirationTime:P,sortIndex:-1},R>C?(N.sortIndex=R,t(d,N),n(u)===null&&N===n(d)&&(y?(h(I),I=-1):y=!0,re(j,R-C))):(N.sortIndex=P,t(u,N),b||v||(b=!0,K(k))),N},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(N){var S=g;return function(){var R=g;g=S;try{return N.apply(this,arguments)}finally{g=R}}}})(Fd);Od.exports=Fd;var Yp=Od.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zp=c,Lt=Yp;function te(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _d=new Set,Is={};function gr(e,t){Kr(e,t),Kr(e+"Capture",t)}function Kr(e,t){for(Is[e]=t,e=0;e<t.length;e++)_d.add(t[e])}var pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Uo=Object.prototype.hasOwnProperty,Xp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gc={},Hc={};function eh(e){return Uo.call(Hc,e)?!0:Uo.call(Gc,e)?!1:Xp.test(e)?Hc[e]=!0:(Gc[e]=!0,!1)}function th(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function nh(e,t,n,r){if(t===null||typeof t>"u"||th(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Nt(e,t,n,r,a,l,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=o}var mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){mt[e]=new Nt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];mt[t]=new Nt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){mt[e]=new Nt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){mt[e]=new Nt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){mt[e]=new Nt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){mt[e]=new Nt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){mt[e]=new Nt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){mt[e]=new Nt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){mt[e]=new Nt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Hi=/[\-:]([a-z])/g;function Ki(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Hi,Ki);mt[t]=new Nt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Hi,Ki);mt[t]=new Nt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Hi,Ki);mt[t]=new Nt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){mt[e]=new Nt(e,1,!1,e.toLowerCase(),null,!1,!1)});mt.xlinkHref=new Nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){mt[e]=new Nt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Vi(e,t,n,r){var a=mt.hasOwnProperty(t)?mt[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(nh(t,n,a,r)&&(n=null),r||a===null?eh(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var vn=Zp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ca=Symbol.for("react.element"),Er=Symbol.for("react.portal"),Pr=Symbol.for("react.fragment"),qi=Symbol.for("react.strict_mode"),Do=Symbol.for("react.profiler"),Bd=Symbol.for("react.provider"),zd=Symbol.for("react.context"),Ji=Symbol.for("react.forward_ref"),Mo=Symbol.for("react.suspense"),Oo=Symbol.for("react.suspense_list"),Qi=Symbol.for("react.memo"),Sn=Symbol.for("react.lazy"),Wd=Symbol.for("react.offscreen"),Kc=Symbol.iterator;function os(e){return e===null||typeof e!="object"?null:(e=Kc&&e[Kc]||e["@@iterator"],typeof e=="function"?e:null)}var Ye=Object.assign,Hl;function vs(e){if(Hl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Hl=t&&t[1]||""}return`
`+Hl+e}var Kl=!1;function Vl(e,t){if(!e||Kl)return"";Kl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),l=r.stack.split(`
`),o=a.length-1,i=l.length-1;1<=o&&0<=i&&a[o]!==l[i];)i--;for(;1<=o&&0<=i;o--,i--)if(a[o]!==l[i]){if(o!==1||i!==1)do if(o--,i--,0>i||a[o]!==l[i]){var u=`
`+a[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=i);break}}}finally{Kl=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?vs(e):""}function rh(e){switch(e.tag){case 5:return vs(e.type);case 16:return vs("Lazy");case 13:return vs("Suspense");case 19:return vs("SuspenseList");case 0:case 2:case 15:return e=Vl(e.type,!1),e;case 11:return e=Vl(e.type.render,!1),e;case 1:return e=Vl(e.type,!0),e;default:return""}}function Fo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Pr:return"Fragment";case Er:return"Portal";case Do:return"Profiler";case qi:return"StrictMode";case Mo:return"Suspense";case Oo:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case zd:return(e.displayName||"Context")+".Consumer";case Bd:return(e._context.displayName||"Context")+".Provider";case Ji:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Qi:return t=e.displayName||null,t!==null?t:Fo(e.type)||"Memo";case Sn:t=e._payload,e=e._init;try{return Fo(e(t))}catch{}}return null}function sh(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fo(t);case 8:return t===qi?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Bn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Gd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ah(e){var t=Gd(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,l.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ua(e){e._valueTracker||(e._valueTracker=ah(e))}function Hd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Gd(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Wa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function _o(e,t){var n=t.checked;return Ye({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Vc(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Bn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Kd(e,t){t=t.checked,t!=null&&Vi(e,"checked",t,!1)}function Bo(e,t){Kd(e,t);var n=Bn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?zo(e,t.type,n):t.hasOwnProperty("defaultValue")&&zo(e,t.type,Bn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function qc(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function zo(e,t,n){(t!=="number"||Wa(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var bs=Array.isArray;function Fr(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Bn(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Wo(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(te(91));return Ye({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Jc(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(te(92));if(bs(n)){if(1<n.length)throw Error(te(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Bn(n)}}function Vd(e,t){var n=Bn(t.value),r=Bn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Qc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function qd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Go(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?qd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var da,Jd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(da=da||document.createElement("div"),da.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=da.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Us(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ks={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lh=["Webkit","ms","Moz","O"];Object.keys(ks).forEach(function(e){lh.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ks[t]=ks[e]})});function Qd(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ks.hasOwnProperty(e)&&ks[e]?(""+t).trim():t+"px"}function Yd(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=Qd(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var oh=Ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ho(e,t){if(t){if(oh[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(te(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(te(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(te(61))}if(t.style!=null&&typeof t.style!="object")throw Error(te(62))}}function Ko(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vo=null;function Yi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var qo=null,_r=null,Br=null;function Yc(e){if(e=na(e)){if(typeof qo!="function")throw Error(te(280));var t=e.stateNode;t&&(t=kl(t),qo(e.stateNode,e.type,t))}}function Zd(e){_r?Br?Br.push(e):Br=[e]:_r=e}function Xd(){if(_r){var e=_r,t=Br;if(Br=_r=null,Yc(e),t)for(e=0;e<t.length;e++)Yc(t[e])}}function em(e,t){return e(t)}function tm(){}var ql=!1;function nm(e,t,n){if(ql)return e(t,n);ql=!0;try{return em(e,t,n)}finally{ql=!1,(_r!==null||Br!==null)&&(tm(),Xd())}}function Ds(e,t){var n=e.stateNode;if(n===null)return null;var r=kl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(te(231,t,typeof n));return n}var Jo=!1;if(pn)try{var is={};Object.defineProperty(is,"passive",{get:function(){Jo=!0}}),window.addEventListener("test",is,is),window.removeEventListener("test",is,is)}catch{Jo=!1}function ih(e,t,n,r,a,l,o,i,u){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(x){this.onError(x)}}var Cs=!1,Ga=null,Ha=!1,Qo=null,ch={onError:function(e){Cs=!0,Ga=e}};function uh(e,t,n,r,a,l,o,i,u){Cs=!1,Ga=null,ih.apply(ch,arguments)}function dh(e,t,n,r,a,l,o,i,u){if(uh.apply(this,arguments),Cs){if(Cs){var d=Ga;Cs=!1,Ga=null}else throw Error(te(198));Ha||(Ha=!0,Qo=d)}}function yr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function rm(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Zc(e){if(yr(e)!==e)throw Error(te(188))}function mh(e){var t=e.alternate;if(!t){if(t=yr(e),t===null)throw Error(te(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var l=a.alternate;if(l===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===n)return Zc(a),e;if(l===r)return Zc(a),t;l=l.sibling}throw Error(te(188))}if(n.return!==r.return)n=a,r=l;else{for(var o=!1,i=a.child;i;){if(i===n){o=!0,n=a,r=l;break}if(i===r){o=!0,r=a,n=l;break}i=i.sibling}if(!o){for(i=l.child;i;){if(i===n){o=!0,n=l,r=a;break}if(i===r){o=!0,r=l,n=a;break}i=i.sibling}if(!o)throw Error(te(189))}}if(n.alternate!==r)throw Error(te(190))}if(n.tag!==3)throw Error(te(188));return n.stateNode.current===n?e:t}function sm(e){return e=mh(e),e!==null?am(e):null}function am(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=am(e);if(t!==null)return t;e=e.sibling}return null}var lm=Lt.unstable_scheduleCallback,Xc=Lt.unstable_cancelCallback,fh=Lt.unstable_shouldYield,ph=Lt.unstable_requestPaint,nt=Lt.unstable_now,hh=Lt.unstable_getCurrentPriorityLevel,Zi=Lt.unstable_ImmediatePriority,om=Lt.unstable_UserBlockingPriority,Ka=Lt.unstable_NormalPriority,xh=Lt.unstable_LowPriority,im=Lt.unstable_IdlePriority,wl=null,nn=null;function gh(e){if(nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(wl,e,void 0,(e.current.flags&128)===128)}catch{}}var Jt=Math.clz32?Math.clz32:bh,yh=Math.log,vh=Math.LN2;function bh(e){return e>>>=0,e===0?32:31-(yh(e)/vh|0)|0}var ma=64,fa=4194304;function ws(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Va(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,l=e.pingedLanes,o=n&268435455;if(o!==0){var i=o&~a;i!==0?r=ws(i):(l&=o,l!==0&&(r=ws(l)))}else o=n&~a,o!==0?r=ws(o):l!==0&&(r=ws(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,l=t&-t,a>=l||a===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Jt(t),a=1<<n,r|=e[n],t&=~a;return r}function wh(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jh(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var o=31-Jt(l),i=1<<o,u=a[o];u===-1?(!(i&n)||i&r)&&(a[o]=wh(i,t)):u<=t&&(e.expiredLanes|=i),l&=~i}}function Yo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function cm(){var e=ma;return ma<<=1,!(ma&4194240)&&(ma=64),e}function Jl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ea(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Jt(t),e[t]=n}function Nh(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Jt(n),l=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~l}}function Xi(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Jt(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var Fe=0;function um(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var dm,ec,mm,fm,pm,Zo=!1,pa=[],Ln=null,$n=null,In=null,Ms=new Map,Os=new Map,Cn=[],Sh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function eu(e,t){switch(e){case"focusin":case"focusout":Ln=null;break;case"dragenter":case"dragleave":$n=null;break;case"mouseover":case"mouseout":In=null;break;case"pointerover":case"pointerout":Ms.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Os.delete(t.pointerId)}}function cs(e,t,n,r,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[a]},t!==null&&(t=na(t),t!==null&&ec(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function kh(e,t,n,r,a){switch(t){case"focusin":return Ln=cs(Ln,e,t,n,r,a),!0;case"dragenter":return $n=cs($n,e,t,n,r,a),!0;case"mouseover":return In=cs(In,e,t,n,r,a),!0;case"pointerover":var l=a.pointerId;return Ms.set(l,cs(Ms.get(l)||null,e,t,n,r,a)),!0;case"gotpointercapture":return l=a.pointerId,Os.set(l,cs(Os.get(l)||null,e,t,n,r,a)),!0}return!1}function hm(e){var t=nr(e.target);if(t!==null){var n=yr(t);if(n!==null){if(t=n.tag,t===13){if(t=rm(n),t!==null){e.blockedOn=t,pm(e.priority,function(){mm(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function La(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Vo=r,n.target.dispatchEvent(r),Vo=null}else return t=na(n),t!==null&&ec(t),e.blockedOn=n,!1;t.shift()}return!0}function tu(e,t,n){La(e)&&n.delete(t)}function Ch(){Zo=!1,Ln!==null&&La(Ln)&&(Ln=null),$n!==null&&La($n)&&($n=null),In!==null&&La(In)&&(In=null),Ms.forEach(tu),Os.forEach(tu)}function us(e,t){e.blockedOn===t&&(e.blockedOn=null,Zo||(Zo=!0,Lt.unstable_scheduleCallback(Lt.unstable_NormalPriority,Ch)))}function Fs(e){function t(a){return us(a,e)}if(0<pa.length){us(pa[0],e);for(var n=1;n<pa.length;n++){var r=pa[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Ln!==null&&us(Ln,e),$n!==null&&us($n,e),In!==null&&us(In,e),Ms.forEach(t),Os.forEach(t),n=0;n<Cn.length;n++)r=Cn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Cn.length&&(n=Cn[0],n.blockedOn===null);)hm(n),n.blockedOn===null&&Cn.shift()}var zr=vn.ReactCurrentBatchConfig,qa=!0;function Eh(e,t,n,r){var a=Fe,l=zr.transition;zr.transition=null;try{Fe=1,tc(e,t,n,r)}finally{Fe=a,zr.transition=l}}function Ph(e,t,n,r){var a=Fe,l=zr.transition;zr.transition=null;try{Fe=4,tc(e,t,n,r)}finally{Fe=a,zr.transition=l}}function tc(e,t,n,r){if(qa){var a=Xo(e,t,n,r);if(a===null)ao(e,t,r,Ja,n),eu(e,r);else if(kh(a,e,t,n,r))r.stopPropagation();else if(eu(e,r),t&4&&-1<Sh.indexOf(e)){for(;a!==null;){var l=na(a);if(l!==null&&dm(l),l=Xo(e,t,n,r),l===null&&ao(e,t,r,Ja,n),l===a)break;a=l}a!==null&&r.stopPropagation()}else ao(e,t,r,null,n)}}var Ja=null;function Xo(e,t,n,r){if(Ja=null,e=Yi(r),e=nr(e),e!==null)if(t=yr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=rm(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ja=e,null}function xm(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hh()){case Zi:return 1;case om:return 4;case Ka:case xh:return 16;case im:return 536870912;default:return 16}default:return 16}}var Tn=null,nc=null,$a=null;function gm(){if($a)return $a;var e,t=nc,n=t.length,r,a="value"in Tn?Tn.value:Tn.textContent,l=a.length;for(e=0;e<n&&t[e]===a[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===a[l-r];r++);return $a=a.slice(e,1<r?1-r:void 0)}function Ia(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ha(){return!0}function nu(){return!1}function It(e){function t(n,r,a,l,o){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],this[i]=n?n(l):l[i]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?ha:nu,this.isPropagationStopped=nu,this}return Ye(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ha)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ha)},persist:function(){},isPersistent:ha}),t}var ts={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rc=It(ts),ta=Ye({},ts,{view:0,detail:0}),Th=It(ta),Ql,Yl,ds,jl=Ye({},ta,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ds&&(ds&&e.type==="mousemove"?(Ql=e.screenX-ds.screenX,Yl=e.screenY-ds.screenY):Yl=Ql=0,ds=e),Ql)},movementY:function(e){return"movementY"in e?e.movementY:Yl}}),ru=It(jl),Ah=Ye({},jl,{dataTransfer:0}),Rh=It(Ah),Lh=Ye({},ta,{relatedTarget:0}),Zl=It(Lh),$h=Ye({},ts,{animationName:0,elapsedTime:0,pseudoElement:0}),Ih=It($h),Uh=Ye({},ts,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Dh=It(Uh),Mh=Ye({},ts,{data:0}),su=It(Mh),Oh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_h={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=_h[e])?!!t[e]:!1}function sc(){return Bh}var zh=Ye({},ta,{key:function(e){if(e.key){var t=Oh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ia(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Fh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sc,charCode:function(e){return e.type==="keypress"?Ia(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ia(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Wh=It(zh),Gh=Ye({},jl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),au=It(Gh),Hh=Ye({},ta,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sc}),Kh=It(Hh),Vh=Ye({},ts,{propertyName:0,elapsedTime:0,pseudoElement:0}),qh=It(Vh),Jh=Ye({},jl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Qh=It(Jh),Yh=[9,13,27,32],ac=pn&&"CompositionEvent"in window,Es=null;pn&&"documentMode"in document&&(Es=document.documentMode);var Zh=pn&&"TextEvent"in window&&!Es,ym=pn&&(!ac||Es&&8<Es&&11>=Es),lu=" ",ou=!1;function vm(e,t){switch(e){case"keyup":return Yh.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Tr=!1;function Xh(e,t){switch(e){case"compositionend":return bm(t);case"keypress":return t.which!==32?null:(ou=!0,lu);case"textInput":return e=t.data,e===lu&&ou?null:e;default:return null}}function e0(e,t){if(Tr)return e==="compositionend"||!ac&&vm(e,t)?(e=gm(),$a=nc=Tn=null,Tr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ym&&t.locale!=="ko"?null:t.data;default:return null}}var t0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!t0[e.type]:t==="textarea"}function wm(e,t,n,r){Zd(r),t=Qa(t,"onChange"),0<t.length&&(n=new rc("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ps=null,_s=null;function n0(e){Lm(e,0)}function Nl(e){var t=Lr(e);if(Hd(t))return e}function r0(e,t){if(e==="change")return t}var jm=!1;if(pn){var Xl;if(pn){var eo="oninput"in document;if(!eo){var cu=document.createElement("div");cu.setAttribute("oninput","return;"),eo=typeof cu.oninput=="function"}Xl=eo}else Xl=!1;jm=Xl&&(!document.documentMode||9<document.documentMode)}function uu(){Ps&&(Ps.detachEvent("onpropertychange",Nm),_s=Ps=null)}function Nm(e){if(e.propertyName==="value"&&Nl(_s)){var t=[];wm(t,_s,e,Yi(e)),nm(n0,t)}}function s0(e,t,n){e==="focusin"?(uu(),Ps=t,_s=n,Ps.attachEvent("onpropertychange",Nm)):e==="focusout"&&uu()}function a0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Nl(_s)}function l0(e,t){if(e==="click")return Nl(t)}function o0(e,t){if(e==="input"||e==="change")return Nl(t)}function i0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Yt=typeof Object.is=="function"?Object.is:i0;function Bs(e,t){if(Yt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Uo.call(t,a)||!Yt(e[a],t[a]))return!1}return!0}function du(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function mu(e,t){var n=du(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=du(n)}}function Sm(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Sm(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function km(){for(var e=window,t=Wa();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Wa(e.document)}return t}function lc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function c0(e){var t=km(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Sm(n.ownerDocument.documentElement,n)){if(r!==null&&lc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,l=Math.min(r.start,a);r=r.end===void 0?l:Math.min(r.end,a),!e.extend&&l>r&&(a=r,r=l,l=a),a=mu(n,l);var o=mu(n,r);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var u0=pn&&"documentMode"in document&&11>=document.documentMode,Ar=null,ei=null,Ts=null,ti=!1;function fu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ti||Ar==null||Ar!==Wa(r)||(r=Ar,"selectionStart"in r&&lc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ts&&Bs(Ts,r)||(Ts=r,r=Qa(ei,"onSelect"),0<r.length&&(t=new rc("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ar)))}function xa(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Rr={animationend:xa("Animation","AnimationEnd"),animationiteration:xa("Animation","AnimationIteration"),animationstart:xa("Animation","AnimationStart"),transitionend:xa("Transition","TransitionEnd")},to={},Cm={};pn&&(Cm=document.createElement("div").style,"AnimationEvent"in window||(delete Rr.animationend.animation,delete Rr.animationiteration.animation,delete Rr.animationstart.animation),"TransitionEvent"in window||delete Rr.transitionend.transition);function Sl(e){if(to[e])return to[e];if(!Rr[e])return e;var t=Rr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Cm)return to[e]=t[n];return e}var Em=Sl("animationend"),Pm=Sl("animationiteration"),Tm=Sl("animationstart"),Am=Sl("transitionend"),Rm=new Map,pu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gn(e,t){Rm.set(e,t),gr(t,[e])}for(var no=0;no<pu.length;no++){var ro=pu[no],d0=ro.toLowerCase(),m0=ro[0].toUpperCase()+ro.slice(1);Gn(d0,"on"+m0)}Gn(Em,"onAnimationEnd");Gn(Pm,"onAnimationIteration");Gn(Tm,"onAnimationStart");Gn("dblclick","onDoubleClick");Gn("focusin","onFocus");Gn("focusout","onBlur");Gn(Am,"onTransitionEnd");Kr("onMouseEnter",["mouseout","mouseover"]);Kr("onMouseLeave",["mouseout","mouseover"]);Kr("onPointerEnter",["pointerout","pointerover"]);Kr("onPointerLeave",["pointerout","pointerover"]);gr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));gr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));gr("onBeforeInput",["compositionend","keypress","textInput","paste"]);gr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));gr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));gr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var js="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),f0=new Set("cancel close invalid load scroll toggle".split(" ").concat(js));function hu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,dh(r,t,void 0,e),e.currentTarget=null}function Lm(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var o=r.length-1;0<=o;o--){var i=r[o],u=i.instance,d=i.currentTarget;if(i=i.listener,u!==l&&a.isPropagationStopped())break e;hu(a,i,d),l=u}else for(o=0;o<r.length;o++){if(i=r[o],u=i.instance,d=i.currentTarget,i=i.listener,u!==l&&a.isPropagationStopped())break e;hu(a,i,d),l=u}}}if(Ha)throw e=Qo,Ha=!1,Qo=null,e}function Ge(e,t){var n=t[li];n===void 0&&(n=t[li]=new Set);var r=e+"__bubble";n.has(r)||($m(t,e,2,!1),n.add(r))}function so(e,t,n){var r=0;t&&(r|=4),$m(n,e,r,t)}var ga="_reactListening"+Math.random().toString(36).slice(2);function zs(e){if(!e[ga]){e[ga]=!0,_d.forEach(function(n){n!=="selectionchange"&&(f0.has(n)||so(n,!1,e),so(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ga]||(t[ga]=!0,so("selectionchange",!1,t))}}function $m(e,t,n,r){switch(xm(t)){case 1:var a=Eh;break;case 4:a=Ph;break;default:a=tc}n=a.bind(null,t,n,e),a=void 0,!Jo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function ao(e,t,n,r,a){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var i=r.stateNode.containerInfo;if(i===a||i.nodeType===8&&i.parentNode===a)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===a||u.nodeType===8&&u.parentNode===a))return;o=o.return}for(;i!==null;){if(o=nr(i),o===null)return;if(u=o.tag,u===5||u===6){r=l=o;continue e}i=i.parentNode}}r=r.return}nm(function(){var d=l,x=Yi(n),p=[];e:{var g=Rm.get(e);if(g!==void 0){var v=rc,b=e;switch(e){case"keypress":if(Ia(n)===0)break e;case"keydown":case"keyup":v=Wh;break;case"focusin":b="focus",v=Zl;break;case"focusout":b="blur",v=Zl;break;case"beforeblur":case"afterblur":v=Zl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=ru;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=Rh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=Kh;break;case Em:case Pm:case Tm:v=Ih;break;case Am:v=qh;break;case"scroll":v=Th;break;case"wheel":v=Qh;break;case"copy":case"cut":case"paste":v=Dh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=au}var y=(t&4)!==0,w=!y&&e==="scroll",h=y?g!==null?g+"Capture":null:g;y=[];for(var f=d,m;f!==null;){m=f;var j=m.stateNode;if(m.tag===5&&j!==null&&(m=j,h!==null&&(j=Ds(f,h),j!=null&&y.push(Ws(f,j,m)))),w)break;f=f.return}0<y.length&&(g=new v(g,b,null,n,x),p.push({event:g,listeners:y}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",g&&n!==Vo&&(b=n.relatedTarget||n.fromElement)&&(nr(b)||b[hn]))break e;if((v||g)&&(g=x.window===x?x:(g=x.ownerDocument)?g.defaultView||g.parentWindow:window,v?(b=n.relatedTarget||n.toElement,v=d,b=b?nr(b):null,b!==null&&(w=yr(b),b!==w||b.tag!==5&&b.tag!==6)&&(b=null)):(v=null,b=d),v!==b)){if(y=ru,j="onMouseLeave",h="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(y=au,j="onPointerLeave",h="onPointerEnter",f="pointer"),w=v==null?g:Lr(v),m=b==null?g:Lr(b),g=new y(j,f+"leave",v,n,x),g.target=w,g.relatedTarget=m,j=null,nr(x)===d&&(y=new y(h,f+"enter",b,n,x),y.target=m,y.relatedTarget=w,j=y),w=j,v&&b)t:{for(y=v,h=b,f=0,m=y;m;m=Nr(m))f++;for(m=0,j=h;j;j=Nr(j))m++;for(;0<f-m;)y=Nr(y),f--;for(;0<m-f;)h=Nr(h),m--;for(;f--;){if(y===h||h!==null&&y===h.alternate)break t;y=Nr(y),h=Nr(h)}y=null}else y=null;v!==null&&xu(p,g,v,y,!1),b!==null&&w!==null&&xu(p,w,b,y,!0)}}e:{if(g=d?Lr(d):window,v=g.nodeName&&g.nodeName.toLowerCase(),v==="select"||v==="input"&&g.type==="file")var k=r0;else if(iu(g))if(jm)k=o0;else{k=a0;var E=s0}else(v=g.nodeName)&&v.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(k=l0);if(k&&(k=k(e,d))){wm(p,k,n,x);break e}E&&E(e,g,d),e==="focusout"&&(E=g._wrapperState)&&E.controlled&&g.type==="number"&&zo(g,"number",g.value)}switch(E=d?Lr(d):window,e){case"focusin":(iu(E)||E.contentEditable==="true")&&(Ar=E,ei=d,Ts=null);break;case"focusout":Ts=ei=Ar=null;break;case"mousedown":ti=!0;break;case"contextmenu":case"mouseup":case"dragend":ti=!1,fu(p,n,x);break;case"selectionchange":if(u0)break;case"keydown":case"keyup":fu(p,n,x)}var $;if(ac)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Tr?vm(e,n)&&(I="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(ym&&n.locale!=="ko"&&(Tr||I!=="onCompositionStart"?I==="onCompositionEnd"&&Tr&&($=gm()):(Tn=x,nc="value"in Tn?Tn.value:Tn.textContent,Tr=!0)),E=Qa(d,I),0<E.length&&(I=new su(I,e,null,n,x),p.push({event:I,listeners:E}),$?I.data=$:($=bm(n),$!==null&&(I.data=$)))),($=Zh?Xh(e,n):e0(e,n))&&(d=Qa(d,"onBeforeInput"),0<d.length&&(x=new su("onBeforeInput","beforeinput",null,n,x),p.push({event:x,listeners:d}),x.data=$))}Lm(p,t)})}function Ws(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Qa(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=Ds(e,n),l!=null&&r.unshift(Ws(e,l,a)),l=Ds(e,t),l!=null&&r.push(Ws(e,l,a))),e=e.return}return r}function Nr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function xu(e,t,n,r,a){for(var l=t._reactName,o=[];n!==null&&n!==r;){var i=n,u=i.alternate,d=i.stateNode;if(u!==null&&u===r)break;i.tag===5&&d!==null&&(i=d,a?(u=Ds(n,l),u!=null&&o.unshift(Ws(n,u,i))):a||(u=Ds(n,l),u!=null&&o.push(Ws(n,u,i)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var p0=/\r\n?/g,h0=/\u0000|\uFFFD/g;function gu(e){return(typeof e=="string"?e:""+e).replace(p0,`
`).replace(h0,"")}function ya(e,t,n){if(t=gu(t),gu(e)!==t&&n)throw Error(te(425))}function Ya(){}var ni=null,ri=null;function si(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ai=typeof setTimeout=="function"?setTimeout:void 0,x0=typeof clearTimeout=="function"?clearTimeout:void 0,yu=typeof Promise=="function"?Promise:void 0,g0=typeof queueMicrotask=="function"?queueMicrotask:typeof yu<"u"?function(e){return yu.resolve(null).then(e).catch(y0)}:ai;function y0(e){setTimeout(function(){throw e})}function lo(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),Fs(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);Fs(t)}function Un(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function vu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ns=Math.random().toString(36).slice(2),tn="__reactFiber$"+ns,Gs="__reactProps$"+ns,hn="__reactContainer$"+ns,li="__reactEvents$"+ns,v0="__reactListeners$"+ns,b0="__reactHandles$"+ns;function nr(e){var t=e[tn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[hn]||n[tn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=vu(e);e!==null;){if(n=e[tn])return n;e=vu(e)}return t}e=n,n=e.parentNode}return null}function na(e){return e=e[tn]||e[hn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Lr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(te(33))}function kl(e){return e[Gs]||null}var oi=[],$r=-1;function Hn(e){return{current:e}}function He(e){0>$r||(e.current=oi[$r],oi[$r]=null,$r--)}function We(e,t){$r++,oi[$r]=e.current,e.current=t}var zn={},yt=Hn(zn),Ct=Hn(!1),dr=zn;function Vr(e,t){var n=e.type.contextTypes;if(!n)return zn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in n)a[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Et(e){return e=e.childContextTypes,e!=null}function Za(){He(Ct),He(yt)}function bu(e,t,n){if(yt.current!==zn)throw Error(te(168));We(yt,t),We(Ct,n)}function Im(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(te(108,sh(e)||"Unknown",a));return Ye({},n,r)}function Xa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||zn,dr=yt.current,We(yt,e),We(Ct,Ct.current),!0}function wu(e,t,n){var r=e.stateNode;if(!r)throw Error(te(169));n?(e=Im(e,t,dr),r.__reactInternalMemoizedMergedChildContext=e,He(Ct),He(yt),We(yt,e)):He(Ct),We(Ct,n)}var cn=null,Cl=!1,oo=!1;function Um(e){cn===null?cn=[e]:cn.push(e)}function w0(e){Cl=!0,Um(e)}function Kn(){if(!oo&&cn!==null){oo=!0;var e=0,t=Fe;try{var n=cn;for(Fe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}cn=null,Cl=!1}catch(a){throw cn!==null&&(cn=cn.slice(e+1)),lm(Zi,Kn),a}finally{Fe=t,oo=!1}}return null}var Ir=[],Ur=0,el=null,tl=0,Ut=[],Dt=0,mr=null,un=1,dn="";function Xn(e,t){Ir[Ur++]=tl,Ir[Ur++]=el,el=e,tl=t}function Dm(e,t,n){Ut[Dt++]=un,Ut[Dt++]=dn,Ut[Dt++]=mr,mr=e;var r=un;e=dn;var a=32-Jt(r)-1;r&=~(1<<a),n+=1;var l=32-Jt(t)+a;if(30<l){var o=a-a%5;l=(r&(1<<o)-1).toString(32),r>>=o,a-=o,un=1<<32-Jt(t)+a|n<<a|r,dn=l+e}else un=1<<l|n<<a|r,dn=e}function oc(e){e.return!==null&&(Xn(e,1),Dm(e,1,0))}function ic(e){for(;e===el;)el=Ir[--Ur],Ir[Ur]=null,tl=Ir[--Ur],Ir[Ur]=null;for(;e===mr;)mr=Ut[--Dt],Ut[Dt]=null,dn=Ut[--Dt],Ut[Dt]=null,un=Ut[--Dt],Ut[Dt]=null}var Rt=null,At=null,Ve=!1,qt=null;function Mm(e,t){var n=Mt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function ju(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Rt=e,At=Un(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Rt=e,At=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=mr!==null?{id:un,overflow:dn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Mt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Rt=e,At=null,!0):!1;default:return!1}}function ii(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ci(e){if(Ve){var t=At;if(t){var n=t;if(!ju(e,t)){if(ii(e))throw Error(te(418));t=Un(n.nextSibling);var r=Rt;t&&ju(e,t)?Mm(r,n):(e.flags=e.flags&-4097|2,Ve=!1,Rt=e)}}else{if(ii(e))throw Error(te(418));e.flags=e.flags&-4097|2,Ve=!1,Rt=e}}}function Nu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Rt=e}function va(e){if(e!==Rt)return!1;if(!Ve)return Nu(e),Ve=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!si(e.type,e.memoizedProps)),t&&(t=At)){if(ii(e))throw Om(),Error(te(418));for(;t;)Mm(e,t),t=Un(t.nextSibling)}if(Nu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(te(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){At=Un(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}At=null}}else At=Rt?Un(e.stateNode.nextSibling):null;return!0}function Om(){for(var e=At;e;)e=Un(e.nextSibling)}function qr(){At=Rt=null,Ve=!1}function cc(e){qt===null?qt=[e]:qt.push(e)}var j0=vn.ReactCurrentBatchConfig;function ms(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(te(309));var r=n.stateNode}if(!r)throw Error(te(147,e));var a=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(o){var i=a.refs;o===null?delete i[l]:i[l]=o},t._stringRef=l,t)}if(typeof e!="string")throw Error(te(284));if(!n._owner)throw Error(te(290,e))}return e}function ba(e,t){throw e=Object.prototype.toString.call(t),Error(te(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Su(e){var t=e._init;return t(e._payload)}function Fm(e){function t(h,f){if(e){var m=h.deletions;m===null?(h.deletions=[f],h.flags|=16):m.push(f)}}function n(h,f){if(!e)return null;for(;f!==null;)t(h,f),f=f.sibling;return null}function r(h,f){for(h=new Map;f!==null;)f.key!==null?h.set(f.key,f):h.set(f.index,f),f=f.sibling;return h}function a(h,f){return h=Fn(h,f),h.index=0,h.sibling=null,h}function l(h,f,m){return h.index=m,e?(m=h.alternate,m!==null?(m=m.index,m<f?(h.flags|=2,f):m):(h.flags|=2,f)):(h.flags|=1048576,f)}function o(h){return e&&h.alternate===null&&(h.flags|=2),h}function i(h,f,m,j){return f===null||f.tag!==6?(f=ho(m,h.mode,j),f.return=h,f):(f=a(f,m),f.return=h,f)}function u(h,f,m,j){var k=m.type;return k===Pr?x(h,f,m.props.children,j,m.key):f!==null&&(f.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Sn&&Su(k)===f.type)?(j=a(f,m.props),j.ref=ms(h,f,m),j.return=h,j):(j=Ba(m.type,m.key,m.props,null,h.mode,j),j.ref=ms(h,f,m),j.return=h,j)}function d(h,f,m,j){return f===null||f.tag!==4||f.stateNode.containerInfo!==m.containerInfo||f.stateNode.implementation!==m.implementation?(f=xo(m,h.mode,j),f.return=h,f):(f=a(f,m.children||[]),f.return=h,f)}function x(h,f,m,j,k){return f===null||f.tag!==7?(f=ir(m,h.mode,j,k),f.return=h,f):(f=a(f,m),f.return=h,f)}function p(h,f,m){if(typeof f=="string"&&f!==""||typeof f=="number")return f=ho(""+f,h.mode,m),f.return=h,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case ca:return m=Ba(f.type,f.key,f.props,null,h.mode,m),m.ref=ms(h,null,f),m.return=h,m;case Er:return f=xo(f,h.mode,m),f.return=h,f;case Sn:var j=f._init;return p(h,j(f._payload),m)}if(bs(f)||os(f))return f=ir(f,h.mode,m,null),f.return=h,f;ba(h,f)}return null}function g(h,f,m,j){var k=f!==null?f.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return k!==null?null:i(h,f,""+m,j);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case ca:return m.key===k?u(h,f,m,j):null;case Er:return m.key===k?d(h,f,m,j):null;case Sn:return k=m._init,g(h,f,k(m._payload),j)}if(bs(m)||os(m))return k!==null?null:x(h,f,m,j,null);ba(h,m)}return null}function v(h,f,m,j,k){if(typeof j=="string"&&j!==""||typeof j=="number")return h=h.get(m)||null,i(f,h,""+j,k);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case ca:return h=h.get(j.key===null?m:j.key)||null,u(f,h,j,k);case Er:return h=h.get(j.key===null?m:j.key)||null,d(f,h,j,k);case Sn:var E=j._init;return v(h,f,m,E(j._payload),k)}if(bs(j)||os(j))return h=h.get(m)||null,x(f,h,j,k,null);ba(f,j)}return null}function b(h,f,m,j){for(var k=null,E=null,$=f,I=f=0,Q=null;$!==null&&I<m.length;I++){$.index>I?(Q=$,$=null):Q=$.sibling;var q=g(h,$,m[I],j);if(q===null){$===null&&($=Q);break}e&&$&&q.alternate===null&&t(h,$),f=l(q,f,I),E===null?k=q:E.sibling=q,E=q,$=Q}if(I===m.length)return n(h,$),Ve&&Xn(h,I),k;if($===null){for(;I<m.length;I++)$=p(h,m[I],j),$!==null&&(f=l($,f,I),E===null?k=$:E.sibling=$,E=$);return Ve&&Xn(h,I),k}for($=r(h,$);I<m.length;I++)Q=v($,h,I,m[I],j),Q!==null&&(e&&Q.alternate!==null&&$.delete(Q.key===null?I:Q.key),f=l(Q,f,I),E===null?k=Q:E.sibling=Q,E=Q);return e&&$.forEach(function(B){return t(h,B)}),Ve&&Xn(h,I),k}function y(h,f,m,j){var k=os(m);if(typeof k!="function")throw Error(te(150));if(m=k.call(m),m==null)throw Error(te(151));for(var E=k=null,$=f,I=f=0,Q=null,q=m.next();$!==null&&!q.done;I++,q=m.next()){$.index>I?(Q=$,$=null):Q=$.sibling;var B=g(h,$,q.value,j);if(B===null){$===null&&($=Q);break}e&&$&&B.alternate===null&&t(h,$),f=l(B,f,I),E===null?k=B:E.sibling=B,E=B,$=Q}if(q.done)return n(h,$),Ve&&Xn(h,I),k;if($===null){for(;!q.done;I++,q=m.next())q=p(h,q.value,j),q!==null&&(f=l(q,f,I),E===null?k=q:E.sibling=q,E=q);return Ve&&Xn(h,I),k}for($=r(h,$);!q.done;I++,q=m.next())q=v($,h,I,q.value,j),q!==null&&(e&&q.alternate!==null&&$.delete(q.key===null?I:q.key),f=l(q,f,I),E===null?k=q:E.sibling=q,E=q);return e&&$.forEach(function(ee){return t(h,ee)}),Ve&&Xn(h,I),k}function w(h,f,m,j){if(typeof m=="object"&&m!==null&&m.type===Pr&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case ca:e:{for(var k=m.key,E=f;E!==null;){if(E.key===k){if(k=m.type,k===Pr){if(E.tag===7){n(h,E.sibling),f=a(E,m.props.children),f.return=h,h=f;break e}}else if(E.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Sn&&Su(k)===E.type){n(h,E.sibling),f=a(E,m.props),f.ref=ms(h,E,m),f.return=h,h=f;break e}n(h,E);break}else t(h,E);E=E.sibling}m.type===Pr?(f=ir(m.props.children,h.mode,j,m.key),f.return=h,h=f):(j=Ba(m.type,m.key,m.props,null,h.mode,j),j.ref=ms(h,f,m),j.return=h,h=j)}return o(h);case Er:e:{for(E=m.key;f!==null;){if(f.key===E)if(f.tag===4&&f.stateNode.containerInfo===m.containerInfo&&f.stateNode.implementation===m.implementation){n(h,f.sibling),f=a(f,m.children||[]),f.return=h,h=f;break e}else{n(h,f);break}else t(h,f);f=f.sibling}f=xo(m,h.mode,j),f.return=h,h=f}return o(h);case Sn:return E=m._init,w(h,f,E(m._payload),j)}if(bs(m))return b(h,f,m,j);if(os(m))return y(h,f,m,j);ba(h,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,f!==null&&f.tag===6?(n(h,f.sibling),f=a(f,m),f.return=h,h=f):(n(h,f),f=ho(m,h.mode,j),f.return=h,h=f),o(h)):n(h,f)}return w}var Jr=Fm(!0),_m=Fm(!1),nl=Hn(null),rl=null,Dr=null,uc=null;function dc(){uc=Dr=rl=null}function mc(e){var t=nl.current;He(nl),e._currentValue=t}function ui(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Wr(e,t){rl=e,uc=Dr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(kt=!0),e.firstContext=null)}function Ft(e){var t=e._currentValue;if(uc!==e)if(e={context:e,memoizedValue:t,next:null},Dr===null){if(rl===null)throw Error(te(308));Dr=e,rl.dependencies={lanes:0,firstContext:e}}else Dr=Dr.next=e;return t}var rr=null;function fc(e){rr===null?rr=[e]:rr.push(e)}function Bm(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,fc(t)):(n.next=a.next,a.next=n),t.interleaved=n,xn(e,r)}function xn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var kn=!1;function pc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zm(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function mn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Dn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Te&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,xn(e,n)}return a=r.interleaved,a===null?(t.next=t,fc(r)):(t.next=a.next,a.next=t),r.interleaved=t,xn(e,n)}function Ua(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Xi(e,n)}}function ku(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?a=l=o:l=l.next=o,n=n.next}while(n!==null);l===null?a=l=t:l=l.next=t}else a=l=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function sl(e,t,n,r){var a=e.updateQueue;kn=!1;var l=a.firstBaseUpdate,o=a.lastBaseUpdate,i=a.shared.pending;if(i!==null){a.shared.pending=null;var u=i,d=u.next;u.next=null,o===null?l=d:o.next=d,o=u;var x=e.alternate;x!==null&&(x=x.updateQueue,i=x.lastBaseUpdate,i!==o&&(i===null?x.firstBaseUpdate=d:i.next=d,x.lastBaseUpdate=u))}if(l!==null){var p=a.baseState;o=0,x=d=u=null,i=l;do{var g=i.lane,v=i.eventTime;if((r&g)===g){x!==null&&(x=x.next={eventTime:v,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var b=e,y=i;switch(g=t,v=n,y.tag){case 1:if(b=y.payload,typeof b=="function"){p=b.call(v,p,g);break e}p=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=y.payload,g=typeof b=="function"?b.call(v,p,g):b,g==null)break e;p=Ye({},p,g);break e;case 2:kn=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,g=a.effects,g===null?a.effects=[i]:g.push(i))}else v={eventTime:v,lane:g,tag:i.tag,payload:i.payload,callback:i.callback,next:null},x===null?(d=x=v,u=p):x=x.next=v,o|=g;if(i=i.next,i===null){if(i=a.shared.pending,i===null)break;g=i,i=g.next,g.next=null,a.lastBaseUpdate=g,a.shared.pending=null}}while(!0);if(x===null&&(u=p),a.baseState=u,a.firstBaseUpdate=d,a.lastBaseUpdate=x,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else l===null&&(a.shared.lanes=0);pr|=o,e.lanes=o,e.memoizedState=p}}function Cu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(te(191,a));a.call(r)}}}var ra={},rn=Hn(ra),Hs=Hn(ra),Ks=Hn(ra);function sr(e){if(e===ra)throw Error(te(174));return e}function hc(e,t){switch(We(Ks,t),We(Hs,e),We(rn,ra),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Go(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Go(t,e)}He(rn),We(rn,t)}function Qr(){He(rn),He(Hs),He(Ks)}function Wm(e){sr(Ks.current);var t=sr(rn.current),n=Go(t,e.type);t!==n&&(We(Hs,e),We(rn,n))}function xc(e){Hs.current===e&&(He(rn),He(Hs))}var Je=Hn(0);function al(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var io=[];function gc(){for(var e=0;e<io.length;e++)io[e]._workInProgressVersionPrimary=null;io.length=0}var Da=vn.ReactCurrentDispatcher,co=vn.ReactCurrentBatchConfig,fr=0,Qe=null,lt=null,it=null,ll=!1,As=!1,Vs=0,N0=0;function pt(){throw Error(te(321))}function yc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Yt(e[n],t[n]))return!1;return!0}function vc(e,t,n,r,a,l){if(fr=l,Qe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Da.current=e===null||e.memoizedState===null?E0:P0,e=n(r,a),As){l=0;do{if(As=!1,Vs=0,25<=l)throw Error(te(301));l+=1,it=lt=null,t.updateQueue=null,Da.current=T0,e=n(r,a)}while(As)}if(Da.current=ol,t=lt!==null&&lt.next!==null,fr=0,it=lt=Qe=null,ll=!1,t)throw Error(te(300));return e}function bc(){var e=Vs!==0;return Vs=0,e}function en(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?Qe.memoizedState=it=e:it=it.next=e,it}function _t(){if(lt===null){var e=Qe.alternate;e=e!==null?e.memoizedState:null}else e=lt.next;var t=it===null?Qe.memoizedState:it.next;if(t!==null)it=t,lt=e;else{if(e===null)throw Error(te(310));lt=e,e={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},it===null?Qe.memoizedState=it=e:it=it.next=e}return it}function qs(e,t){return typeof t=="function"?t(e):t}function uo(e){var t=_t(),n=t.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=e;var r=lt,a=r.baseQueue,l=n.pending;if(l!==null){if(a!==null){var o=a.next;a.next=l.next,l.next=o}r.baseQueue=a=l,n.pending=null}if(a!==null){l=a.next,r=r.baseState;var i=o=null,u=null,d=l;do{var x=d.lane;if((fr&x)===x)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var p={lane:x,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(i=u=p,o=r):u=u.next=p,Qe.lanes|=x,pr|=x}d=d.next}while(d!==null&&d!==l);u===null?o=r:u.next=i,Yt(r,t.memoizedState)||(kt=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do l=a.lane,Qe.lanes|=l,pr|=l,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function mo(e){var t=_t(),n=t.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,l=t.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do l=e(l,o.action),o=o.next;while(o!==a);Yt(l,t.memoizedState)||(kt=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function Gm(){}function Hm(e,t){var n=Qe,r=_t(),a=t(),l=!Yt(r.memoizedState,a);if(l&&(r.memoizedState=a,kt=!0),r=r.queue,wc(qm.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||it!==null&&it.memoizedState.tag&1){if(n.flags|=2048,Js(9,Vm.bind(null,n,r,a,t),void 0,null),ct===null)throw Error(te(349));fr&30||Km(n,t,a)}return a}function Km(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Qe.updateQueue,t===null?(t={lastEffect:null,stores:null},Qe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Vm(e,t,n,r){t.value=n,t.getSnapshot=r,Jm(t)&&Qm(e)}function qm(e,t,n){return n(function(){Jm(t)&&Qm(e)})}function Jm(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Yt(e,n)}catch{return!0}}function Qm(e){var t=xn(e,1);t!==null&&Qt(t,e,1,-1)}function Eu(e){var t=en();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qs,lastRenderedState:e},t.queue=e,e=e.dispatch=C0.bind(null,Qe,e),[t.memoizedState,e]}function Js(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Qe.updateQueue,t===null?(t={lastEffect:null,stores:null},Qe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Ym(){return _t().memoizedState}function Ma(e,t,n,r){var a=en();Qe.flags|=e,a.memoizedState=Js(1|t,n,void 0,r===void 0?null:r)}function El(e,t,n,r){var a=_t();r=r===void 0?null:r;var l=void 0;if(lt!==null){var o=lt.memoizedState;if(l=o.destroy,r!==null&&yc(r,o.deps)){a.memoizedState=Js(t,n,l,r);return}}Qe.flags|=e,a.memoizedState=Js(1|t,n,l,r)}function Pu(e,t){return Ma(8390656,8,e,t)}function wc(e,t){return El(2048,8,e,t)}function Zm(e,t){return El(4,2,e,t)}function Xm(e,t){return El(4,4,e,t)}function ef(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function tf(e,t,n){return n=n!=null?n.concat([e]):null,El(4,4,ef.bind(null,t,e),n)}function jc(){}function nf(e,t){var n=_t();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&yc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function rf(e,t){var n=_t();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&yc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function sf(e,t,n){return fr&21?(Yt(n,t)||(n=cm(),Qe.lanes|=n,pr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,kt=!0),e.memoizedState=n)}function S0(e,t){var n=Fe;Fe=n!==0&&4>n?n:4,e(!0);var r=co.transition;co.transition={};try{e(!1),t()}finally{Fe=n,co.transition=r}}function af(){return _t().memoizedState}function k0(e,t,n){var r=On(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},lf(e))of(t,n);else if(n=Bm(e,t,n,r),n!==null){var a=wt();Qt(n,e,r,a),cf(n,t,r)}}function C0(e,t,n){var r=On(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(lf(e))of(t,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var o=t.lastRenderedState,i=l(o,n);if(a.hasEagerState=!0,a.eagerState=i,Yt(i,o)){var u=t.interleaved;u===null?(a.next=a,fc(t)):(a.next=u.next,u.next=a),t.interleaved=a;return}}catch{}finally{}n=Bm(e,t,a,r),n!==null&&(a=wt(),Qt(n,e,r,a),cf(n,t,r))}}function lf(e){var t=e.alternate;return e===Qe||t!==null&&t===Qe}function of(e,t){As=ll=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function cf(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Xi(e,n)}}var ol={readContext:Ft,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useInsertionEffect:pt,useLayoutEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useMutableSource:pt,useSyncExternalStore:pt,useId:pt,unstable_isNewReconciler:!1},E0={readContext:Ft,useCallback:function(e,t){return en().memoizedState=[e,t===void 0?null:t],e},useContext:Ft,useEffect:Pu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ma(4194308,4,ef.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ma(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ma(4,2,e,t)},useMemo:function(e,t){var n=en();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=en();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=k0.bind(null,Qe,e),[r.memoizedState,e]},useRef:function(e){var t=en();return e={current:e},t.memoizedState=e},useState:Eu,useDebugValue:jc,useDeferredValue:function(e){return en().memoizedState=e},useTransition:function(){var e=Eu(!1),t=e[0];return e=S0.bind(null,e[1]),en().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Qe,a=en();if(Ve){if(n===void 0)throw Error(te(407));n=n()}else{if(n=t(),ct===null)throw Error(te(349));fr&30||Km(r,t,n)}a.memoizedState=n;var l={value:n,getSnapshot:t};return a.queue=l,Pu(qm.bind(null,r,l,e),[e]),r.flags|=2048,Js(9,Vm.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=en(),t=ct.identifierPrefix;if(Ve){var n=dn,r=un;n=(r&~(1<<32-Jt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Vs++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=N0++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},P0={readContext:Ft,useCallback:nf,useContext:Ft,useEffect:wc,useImperativeHandle:tf,useInsertionEffect:Zm,useLayoutEffect:Xm,useMemo:rf,useReducer:uo,useRef:Ym,useState:function(){return uo(qs)},useDebugValue:jc,useDeferredValue:function(e){var t=_t();return sf(t,lt.memoizedState,e)},useTransition:function(){var e=uo(qs)[0],t=_t().memoizedState;return[e,t]},useMutableSource:Gm,useSyncExternalStore:Hm,useId:af,unstable_isNewReconciler:!1},T0={readContext:Ft,useCallback:nf,useContext:Ft,useEffect:wc,useImperativeHandle:tf,useInsertionEffect:Zm,useLayoutEffect:Xm,useMemo:rf,useReducer:mo,useRef:Ym,useState:function(){return mo(qs)},useDebugValue:jc,useDeferredValue:function(e){var t=_t();return lt===null?t.memoizedState=e:sf(t,lt.memoizedState,e)},useTransition:function(){var e=mo(qs)[0],t=_t().memoizedState;return[e,t]},useMutableSource:Gm,useSyncExternalStore:Hm,useId:af,unstable_isNewReconciler:!1};function Kt(e,t){if(e&&e.defaultProps){t=Ye({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function di(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ye({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Pl={isMounted:function(e){return(e=e._reactInternals)?yr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=wt(),a=On(e),l=mn(r,a);l.payload=t,n!=null&&(l.callback=n),t=Dn(e,l,a),t!==null&&(Qt(t,e,a,r),Ua(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=wt(),a=On(e),l=mn(r,a);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=Dn(e,l,a),t!==null&&(Qt(t,e,a,r),Ua(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=wt(),r=On(e),a=mn(n,r);a.tag=2,t!=null&&(a.callback=t),t=Dn(e,a,r),t!==null&&(Qt(t,e,r,n),Ua(t,e,r))}};function Tu(e,t,n,r,a,l,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,o):t.prototype&&t.prototype.isPureReactComponent?!Bs(n,r)||!Bs(a,l):!0}function uf(e,t,n){var r=!1,a=zn,l=t.contextType;return typeof l=="object"&&l!==null?l=Ft(l):(a=Et(t)?dr:yt.current,r=t.contextTypes,l=(r=r!=null)?Vr(e,a):zn),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Pl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),t}function Au(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Pl.enqueueReplaceState(t,t.state,null)}function mi(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},pc(e);var l=t.contextType;typeof l=="object"&&l!==null?a.context=Ft(l):(l=Et(t)?dr:yt.current,a.context=Vr(e,l)),a.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(di(e,t,l,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Pl.enqueueReplaceState(a,a.state,null),sl(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Yr(e,t){try{var n="",r=t;do n+=rh(r),r=r.return;while(r);var a=n}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:a,digest:null}}function fo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function fi(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var A0=typeof WeakMap=="function"?WeakMap:Map;function df(e,t,n){n=mn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){cl||(cl=!0,Ni=r),fi(e,t)},n}function mf(e,t,n){n=mn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){fi(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){fi(e,t),typeof r!="function"&&(Mn===null?Mn=new Set([this]):Mn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Ru(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new A0;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=G0.bind(null,e,t,n),t.then(e,e))}function Lu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function $u(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=mn(-1,1),t.tag=2,Dn(n,t,1))),n.lanes|=1),e)}var R0=vn.ReactCurrentOwner,kt=!1;function bt(e,t,n,r){t.child=e===null?_m(t,null,n,r):Jr(t,e.child,n,r)}function Iu(e,t,n,r,a){n=n.render;var l=t.ref;return Wr(t,a),r=vc(e,t,n,r,l,a),n=bc(),e!==null&&!kt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,gn(e,t,a)):(Ve&&n&&oc(t),t.flags|=1,bt(e,t,r,a),t.child)}function Uu(e,t,n,r,a){if(e===null){var l=n.type;return typeof l=="function"&&!Ac(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,ff(e,t,l,r,a)):(e=Ba(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&a)){var o=l.memoizedProps;if(n=n.compare,n=n!==null?n:Bs,n(o,r)&&e.ref===t.ref)return gn(e,t,a)}return t.flags|=1,e=Fn(l,r),e.ref=t.ref,e.return=t,t.child=e}function ff(e,t,n,r,a){if(e!==null){var l=e.memoizedProps;if(Bs(l,r)&&e.ref===t.ref)if(kt=!1,t.pendingProps=r=l,(e.lanes&a)!==0)e.flags&131072&&(kt=!0);else return t.lanes=e.lanes,gn(e,t,a)}return pi(e,t,n,r,a)}function pf(e,t,n){var r=t.pendingProps,a=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(Or,Tt),Tt|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,We(Or,Tt),Tt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,We(Or,Tt),Tt|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,We(Or,Tt),Tt|=r;return bt(e,t,a,n),t.child}function hf(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function pi(e,t,n,r,a){var l=Et(n)?dr:yt.current;return l=Vr(t,l),Wr(t,a),n=vc(e,t,n,r,l,a),r=bc(),e!==null&&!kt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,gn(e,t,a)):(Ve&&r&&oc(t),t.flags|=1,bt(e,t,n,a),t.child)}function Du(e,t,n,r,a){if(Et(n)){var l=!0;Xa(t)}else l=!1;if(Wr(t,a),t.stateNode===null)Oa(e,t),uf(t,n,r),mi(t,n,r,a),r=!0;else if(e===null){var o=t.stateNode,i=t.memoizedProps;o.props=i;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Ft(d):(d=Et(n)?dr:yt.current,d=Vr(t,d));var x=n.getDerivedStateFromProps,p=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==r||u!==d)&&Au(t,o,r,d),kn=!1;var g=t.memoizedState;o.state=g,sl(t,r,o,a),u=t.memoizedState,i!==r||g!==u||Ct.current||kn?(typeof x=="function"&&(di(t,n,x,r),u=t.memoizedState),(i=kn||Tu(t,n,i,r,g,u,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=d,r=i):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,zm(e,t),i=t.memoizedProps,d=t.type===t.elementType?i:Kt(t.type,i),o.props=d,p=t.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Ft(u):(u=Et(n)?dr:yt.current,u=Vr(t,u));var v=n.getDerivedStateFromProps;(x=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==p||g!==u)&&Au(t,o,r,u),kn=!1,g=t.memoizedState,o.state=g,sl(t,r,o,a);var b=t.memoizedState;i!==p||g!==b||Ct.current||kn?(typeof v=="function"&&(di(t,n,v,r),b=t.memoizedState),(d=kn||Tu(t,n,d,r,g,b,u)||!1)?(x||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=b),o.props=r,o.state=b,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return hi(e,t,n,r,l,a)}function hi(e,t,n,r,a,l){hf(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return a&&wu(t,n,!1),gn(e,t,l);r=t.stateNode,R0.current=t;var i=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Jr(t,e.child,null,l),t.child=Jr(t,null,i,l)):bt(e,t,i,l),t.memoizedState=r.state,a&&wu(t,n,!0),t.child}function xf(e){var t=e.stateNode;t.pendingContext?bu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&bu(e,t.context,!1),hc(e,t.containerInfo)}function Mu(e,t,n,r,a){return qr(),cc(a),t.flags|=256,bt(e,t,n,r),t.child}var xi={dehydrated:null,treeContext:null,retryLane:0};function gi(e){return{baseLanes:e,cachePool:null,transitions:null}}function gf(e,t,n){var r=t.pendingProps,a=Je.current,l=!1,o=(t.flags&128)!==0,i;if((i=o)||(i=e!==null&&e.memoizedState===null?!1:(a&2)!==0),i?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),We(Je,a&1),e===null)return ci(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,l?(r=t.mode,l=t.child,o={mode:"hidden",children:o},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=o):l=Rl(o,r,0,null),e=ir(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=gi(n),t.memoizedState=xi,e):Nc(t,o));if(a=e.memoizedState,a!==null&&(i=a.dehydrated,i!==null))return L0(e,t,o,r,i,a,n);if(l){l=r.fallback,o=t.mode,a=e.child,i=a.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=Fn(a,u),r.subtreeFlags=a.subtreeFlags&14680064),i!==null?l=Fn(i,l):(l=ir(l,o,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,o=e.child.memoizedState,o=o===null?gi(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=e.childLanes&~n,t.memoizedState=xi,r}return l=e.child,e=l.sibling,r=Fn(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Nc(e,t){return t=Rl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function wa(e,t,n,r){return r!==null&&cc(r),Jr(t,e.child,null,n),e=Nc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function L0(e,t,n,r,a,l,o){if(n)return t.flags&256?(t.flags&=-257,r=fo(Error(te(422))),wa(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,a=t.mode,r=Rl({mode:"visible",children:r.children},a,0,null),l=ir(l,a,o,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&Jr(t,e.child,null,o),t.child.memoizedState=gi(o),t.memoizedState=xi,l);if(!(t.mode&1))return wa(e,t,o,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var i=r.dgst;return r=i,l=Error(te(419)),r=fo(l,r,void 0),wa(e,t,o,r)}if(i=(o&e.childLanes)!==0,kt||i){if(r=ct,r!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|o)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,xn(e,a),Qt(r,e,a,-1))}return Tc(),r=fo(Error(te(421))),wa(e,t,o,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=H0.bind(null,e),a._reactRetry=t,null):(e=l.treeContext,At=Un(a.nextSibling),Rt=t,Ve=!0,qt=null,e!==null&&(Ut[Dt++]=un,Ut[Dt++]=dn,Ut[Dt++]=mr,un=e.id,dn=e.overflow,mr=t),t=Nc(t,r.children),t.flags|=4096,t)}function Ou(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ui(e.return,t,n)}function po(e,t,n,r,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=a)}function yf(e,t,n){var r=t.pendingProps,a=r.revealOrder,l=r.tail;if(bt(e,t,r.children,n),r=Je.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ou(e,n,t);else if(e.tag===19)Ou(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(We(Je,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&al(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),po(t,!1,a,n,l);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&al(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}po(t,!0,n,null,l);break;case"together":po(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Oa(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function gn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),pr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(te(153));if(t.child!==null){for(e=t.child,n=Fn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Fn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function $0(e,t,n){switch(t.tag){case 3:xf(t),qr();break;case 5:Wm(t);break;case 1:Et(t.type)&&Xa(t);break;case 4:hc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;We(nl,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(We(Je,Je.current&1),t.flags|=128,null):n&t.child.childLanes?gf(e,t,n):(We(Je,Je.current&1),e=gn(e,t,n),e!==null?e.sibling:null);We(Je,Je.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return yf(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),We(Je,Je.current),r)break;return null;case 22:case 23:return t.lanes=0,pf(e,t,n)}return gn(e,t,n)}var vf,yi,bf,wf;vf=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};yi=function(){};bf=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,sr(rn.current);var l=null;switch(n){case"input":a=_o(e,a),r=_o(e,r),l=[];break;case"select":a=Ye({},a,{value:void 0}),r=Ye({},r,{value:void 0}),l=[];break;case"textarea":a=Wo(e,a),r=Wo(e,r),l=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ya)}Ho(n,r);var o;n=null;for(d in a)if(!r.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var i=a[d];for(o in i)i.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Is.hasOwnProperty(d)?l||(l=[]):(l=l||[]).push(d,null));for(d in r){var u=r[d];if(i=a!=null?a[d]:void 0,r.hasOwnProperty(d)&&u!==i&&(u!=null||i!=null))if(d==="style")if(i){for(o in i)!i.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&i[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(l||(l=[]),l.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,i=i?i.__html:void 0,u!=null&&i!==u&&(l=l||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(l=l||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Is.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Ge("scroll",e),l||i===u||(l=[])):(l=l||[]).push(d,u))}n&&(l=l||[]).push("style",n);var d=l;(t.updateQueue=d)&&(t.flags|=4)}};wf=function(e,t,n,r){n!==r&&(t.flags|=4)};function fs(e,t){if(!Ve)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ht(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function I0(e,t,n){var r=t.pendingProps;switch(ic(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(t),null;case 1:return Et(t.type)&&Za(),ht(t),null;case 3:return r=t.stateNode,Qr(),He(Ct),He(yt),gc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(va(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,qt!==null&&(Ci(qt),qt=null))),yi(e,t),ht(t),null;case 5:xc(t);var a=sr(Ks.current);if(n=t.type,e!==null&&t.stateNode!=null)bf(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(te(166));return ht(t),null}if(e=sr(rn.current),va(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[tn]=t,r[Gs]=l,e=(t.mode&1)!==0,n){case"dialog":Ge("cancel",r),Ge("close",r);break;case"iframe":case"object":case"embed":Ge("load",r);break;case"video":case"audio":for(a=0;a<js.length;a++)Ge(js[a],r);break;case"source":Ge("error",r);break;case"img":case"image":case"link":Ge("error",r),Ge("load",r);break;case"details":Ge("toggle",r);break;case"input":Vc(r,l),Ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},Ge("invalid",r);break;case"textarea":Jc(r,l),Ge("invalid",r)}Ho(n,l),a=null;for(var o in l)if(l.hasOwnProperty(o)){var i=l[o];o==="children"?typeof i=="string"?r.textContent!==i&&(l.suppressHydrationWarning!==!0&&ya(r.textContent,i,e),a=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(l.suppressHydrationWarning!==!0&&ya(r.textContent,i,e),a=["children",""+i]):Is.hasOwnProperty(o)&&i!=null&&o==="onScroll"&&Ge("scroll",r)}switch(n){case"input":ua(r),qc(r,l,!0);break;case"textarea":ua(r),Qc(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=Ya)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=qd(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[tn]=t,e[Gs]=r,vf(e,t,!1,!1),t.stateNode=e;e:{switch(o=Ko(n,r),n){case"dialog":Ge("cancel",e),Ge("close",e),a=r;break;case"iframe":case"object":case"embed":Ge("load",e),a=r;break;case"video":case"audio":for(a=0;a<js.length;a++)Ge(js[a],e);a=r;break;case"source":Ge("error",e),a=r;break;case"img":case"image":case"link":Ge("error",e),Ge("load",e),a=r;break;case"details":Ge("toggle",e),a=r;break;case"input":Vc(e,r),a=_o(e,r),Ge("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=Ye({},r,{value:void 0}),Ge("invalid",e);break;case"textarea":Jc(e,r),a=Wo(e,r),Ge("invalid",e);break;default:a=r}Ho(n,a),i=a;for(l in i)if(i.hasOwnProperty(l)){var u=i[l];l==="style"?Yd(e,u):l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Jd(e,u)):l==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Us(e,u):typeof u=="number"&&Us(e,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Is.hasOwnProperty(l)?u!=null&&l==="onScroll"&&Ge("scroll",e):u!=null&&Vi(e,l,u,o))}switch(n){case"input":ua(e),qc(e,r,!1);break;case"textarea":ua(e),Qc(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Bn(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?Fr(e,!!r.multiple,l,!1):r.defaultValue!=null&&Fr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Ya)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ht(t),null;case 6:if(e&&t.stateNode!=null)wf(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(te(166));if(n=sr(Ks.current),sr(rn.current),va(t)){if(r=t.stateNode,n=t.memoizedProps,r[tn]=t,(l=r.nodeValue!==n)&&(e=Rt,e!==null))switch(e.tag){case 3:ya(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ya(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[tn]=t,t.stateNode=r}return ht(t),null;case 13:if(He(Je),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ve&&At!==null&&t.mode&1&&!(t.flags&128))Om(),qr(),t.flags|=98560,l=!1;else if(l=va(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(te(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(te(317));l[tn]=t}else qr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ht(t),l=!1}else qt!==null&&(Ci(qt),qt=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Je.current&1?ot===0&&(ot=3):Tc())),t.updateQueue!==null&&(t.flags|=4),ht(t),null);case 4:return Qr(),yi(e,t),e===null&&zs(t.stateNode.containerInfo),ht(t),null;case 10:return mc(t.type._context),ht(t),null;case 17:return Et(t.type)&&Za(),ht(t),null;case 19:if(He(Je),l=t.memoizedState,l===null)return ht(t),null;if(r=(t.flags&128)!==0,o=l.rendering,o===null)if(r)fs(l,!1);else{if(ot!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=al(e),o!==null){for(t.flags|=128,fs(l,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,o=l.alternate,o===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,e=o.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return We(Je,Je.current&1|2),t.child}e=e.sibling}l.tail!==null&&nt()>Zr&&(t.flags|=128,r=!0,fs(l,!1),t.lanes=4194304)}else{if(!r)if(e=al(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),fs(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!Ve)return ht(t),null}else 2*nt()-l.renderingStartTime>Zr&&n!==1073741824&&(t.flags|=128,r=!0,fs(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(n=l.last,n!==null?n.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=nt(),t.sibling=null,n=Je.current,We(Je,r?n&1|2:n&1),t):(ht(t),null);case 22:case 23:return Pc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Tt&1073741824&&(ht(t),t.subtreeFlags&6&&(t.flags|=8192)):ht(t),null;case 24:return null;case 25:return null}throw Error(te(156,t.tag))}function U0(e,t){switch(ic(t),t.tag){case 1:return Et(t.type)&&Za(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Qr(),He(Ct),He(yt),gc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return xc(t),null;case 13:if(He(Je),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(te(340));qr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return He(Je),null;case 4:return Qr(),null;case 10:return mc(t.type._context),null;case 22:case 23:return Pc(),null;case 24:return null;default:return null}}var ja=!1,xt=!1,D0=typeof WeakSet=="function"?WeakSet:Set,ue=null;function Mr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Xe(e,t,r)}else n.current=null}function vi(e,t,n){try{n()}catch(r){Xe(e,t,r)}}var Fu=!1;function M0(e,t){if(ni=qa,e=km(),lc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var o=0,i=-1,u=-1,d=0,x=0,p=e,g=null;t:for(;;){for(var v;p!==n||a!==0&&p.nodeType!==3||(i=o+a),p!==l||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(v=p.firstChild)!==null;)g=p,p=v;for(;;){if(p===e)break t;if(g===n&&++d===a&&(i=o),g===l&&++x===r&&(u=o),(v=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=v}n=i===-1||u===-1?null:{start:i,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ri={focusedElem:e,selectionRange:n},qa=!1,ue=t;ue!==null;)if(t=ue,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ue=e;else for(;ue!==null;){t=ue;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var y=b.memoizedProps,w=b.memoizedState,h=t.stateNode,f=h.getSnapshotBeforeUpdate(t.elementType===t.type?y:Kt(t.type,y),w);h.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var m=t.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(te(163))}}catch(j){Xe(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,ue=e;break}ue=t.return}return b=Fu,Fu=!1,b}function Rs(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&vi(t,n,l)}a=a.next}while(a!==r)}}function Tl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function bi(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function jf(e){var t=e.alternate;t!==null&&(e.alternate=null,jf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[tn],delete t[Gs],delete t[li],delete t[v0],delete t[b0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Nf(e){return e.tag===5||e.tag===3||e.tag===4}function _u(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Nf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function wi(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ya));else if(r!==4&&(e=e.child,e!==null))for(wi(e,t,n),e=e.sibling;e!==null;)wi(e,t,n),e=e.sibling}function ji(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ji(e,t,n),e=e.sibling;e!==null;)ji(e,t,n),e=e.sibling}var ut=null,Vt=!1;function Nn(e,t,n){for(n=n.child;n!==null;)Sf(e,t,n),n=n.sibling}function Sf(e,t,n){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(wl,n)}catch{}switch(n.tag){case 5:xt||Mr(n,t);case 6:var r=ut,a=Vt;ut=null,Nn(e,t,n),ut=r,Vt=a,ut!==null&&(Vt?(e=ut,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ut.removeChild(n.stateNode));break;case 18:ut!==null&&(Vt?(e=ut,n=n.stateNode,e.nodeType===8?lo(e.parentNode,n):e.nodeType===1&&lo(e,n),Fs(e)):lo(ut,n.stateNode));break;case 4:r=ut,a=Vt,ut=n.stateNode.containerInfo,Vt=!0,Nn(e,t,n),ut=r,Vt=a;break;case 0:case 11:case 14:case 15:if(!xt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var l=a,o=l.destroy;l=l.tag,o!==void 0&&(l&2||l&4)&&vi(n,t,o),a=a.next}while(a!==r)}Nn(e,t,n);break;case 1:if(!xt&&(Mr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(i){Xe(n,t,i)}Nn(e,t,n);break;case 21:Nn(e,t,n);break;case 22:n.mode&1?(xt=(r=xt)||n.memoizedState!==null,Nn(e,t,n),xt=r):Nn(e,t,n);break;default:Nn(e,t,n)}}function Bu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new D0),t.forEach(function(r){var a=K0.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function zt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var l=e,o=t,i=o;e:for(;i!==null;){switch(i.tag){case 5:ut=i.stateNode,Vt=!1;break e;case 3:ut=i.stateNode.containerInfo,Vt=!0;break e;case 4:ut=i.stateNode.containerInfo,Vt=!0;break e}i=i.return}if(ut===null)throw Error(te(160));Sf(l,o,a),ut=null,Vt=!1;var u=a.alternate;u!==null&&(u.return=null),a.return=null}catch(d){Xe(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)kf(t,e),t=t.sibling}function kf(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(zt(t,e),Xt(e),r&4){try{Rs(3,e,e.return),Tl(3,e)}catch(y){Xe(e,e.return,y)}try{Rs(5,e,e.return)}catch(y){Xe(e,e.return,y)}}break;case 1:zt(t,e),Xt(e),r&512&&n!==null&&Mr(n,n.return);break;case 5:if(zt(t,e),Xt(e),r&512&&n!==null&&Mr(n,n.return),e.flags&32){var a=e.stateNode;try{Us(a,"")}catch(y){Xe(e,e.return,y)}}if(r&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,o=n!==null?n.memoizedProps:l,i=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{i==="input"&&l.type==="radio"&&l.name!=null&&Kd(a,l),Ko(i,o);var d=Ko(i,l);for(o=0;o<u.length;o+=2){var x=u[o],p=u[o+1];x==="style"?Yd(a,p):x==="dangerouslySetInnerHTML"?Jd(a,p):x==="children"?Us(a,p):Vi(a,x,p,d)}switch(i){case"input":Bo(a,l);break;case"textarea":Vd(a,l);break;case"select":var g=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var v=l.value;v!=null?Fr(a,!!l.multiple,v,!1):g!==!!l.multiple&&(l.defaultValue!=null?Fr(a,!!l.multiple,l.defaultValue,!0):Fr(a,!!l.multiple,l.multiple?[]:"",!1))}a[Gs]=l}catch(y){Xe(e,e.return,y)}}break;case 6:if(zt(t,e),Xt(e),r&4){if(e.stateNode===null)throw Error(te(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(y){Xe(e,e.return,y)}}break;case 3:if(zt(t,e),Xt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fs(t.containerInfo)}catch(y){Xe(e,e.return,y)}break;case 4:zt(t,e),Xt(e);break;case 13:zt(t,e),Xt(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(Cc=nt())),r&4&&Bu(e);break;case 22:if(x=n!==null&&n.memoizedState!==null,e.mode&1?(xt=(d=xt)||x,zt(t,e),xt=d):zt(t,e),Xt(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!x&&e.mode&1)for(ue=e,x=e.child;x!==null;){for(p=ue=x;ue!==null;){switch(g=ue,v=g.child,g.tag){case 0:case 11:case 14:case 15:Rs(4,g,g.return);break;case 1:Mr(g,g.return);var b=g.stateNode;if(typeof b.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(y){Xe(r,n,y)}}break;case 5:Mr(g,g.return);break;case 22:if(g.memoizedState!==null){Wu(p);continue}}v!==null?(v.return=g,ue=v):Wu(p)}x=x.sibling}e:for(x=null,p=e;;){if(p.tag===5){if(x===null){x=p;try{a=p.stateNode,d?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(i=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,i.style.display=Qd("display",o))}catch(y){Xe(e,e.return,y)}}}else if(p.tag===6){if(x===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(y){Xe(e,e.return,y)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;x===p&&(x=null),p=p.return}x===p&&(x=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:zt(t,e),Xt(e),r&4&&Bu(e);break;case 21:break;default:zt(t,e),Xt(e)}}function Xt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Nf(n)){var r=n;break e}n=n.return}throw Error(te(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Us(a,""),r.flags&=-33);var l=_u(e);ji(e,l,a);break;case 3:case 4:var o=r.stateNode.containerInfo,i=_u(e);wi(e,i,o);break;default:throw Error(te(161))}}catch(u){Xe(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function O0(e,t,n){ue=e,Cf(e)}function Cf(e,t,n){for(var r=(e.mode&1)!==0;ue!==null;){var a=ue,l=a.child;if(a.tag===22&&r){var o=a.memoizedState!==null||ja;if(!o){var i=a.alternate,u=i!==null&&i.memoizedState!==null||xt;i=ja;var d=xt;if(ja=o,(xt=u)&&!d)for(ue=a;ue!==null;)o=ue,u=o.child,o.tag===22&&o.memoizedState!==null?Gu(a):u!==null?(u.return=o,ue=u):Gu(a);for(;l!==null;)ue=l,Cf(l),l=l.sibling;ue=a,ja=i,xt=d}zu(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,ue=l):zu(e)}}function zu(e){for(;ue!==null;){var t=ue;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:xt||Tl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!xt)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Kt(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Cu(t,l,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Cu(t,o,n)}break;case 5:var i=t.stateNode;if(n===null&&t.flags&4){n=i;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var x=d.memoizedState;if(x!==null){var p=x.dehydrated;p!==null&&Fs(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(te(163))}xt||t.flags&512&&bi(t)}catch(g){Xe(t,t.return,g)}}if(t===e){ue=null;break}if(n=t.sibling,n!==null){n.return=t.return,ue=n;break}ue=t.return}}function Wu(e){for(;ue!==null;){var t=ue;if(t===e){ue=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ue=n;break}ue=t.return}}function Gu(e){for(;ue!==null;){var t=ue;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Tl(4,t)}catch(u){Xe(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(u){Xe(t,a,u)}}var l=t.return;try{bi(t)}catch(u){Xe(t,l,u)}break;case 5:var o=t.return;try{bi(t)}catch(u){Xe(t,o,u)}}}catch(u){Xe(t,t.return,u)}if(t===e){ue=null;break}var i=t.sibling;if(i!==null){i.return=t.return,ue=i;break}ue=t.return}}var F0=Math.ceil,il=vn.ReactCurrentDispatcher,Sc=vn.ReactCurrentOwner,Ot=vn.ReactCurrentBatchConfig,Te=0,ct=null,at=null,dt=0,Tt=0,Or=Hn(0),ot=0,Qs=null,pr=0,Al=0,kc=0,Ls=null,St=null,Cc=0,Zr=1/0,on=null,cl=!1,Ni=null,Mn=null,Na=!1,An=null,ul=0,$s=0,Si=null,Fa=-1,_a=0;function wt(){return Te&6?nt():Fa!==-1?Fa:Fa=nt()}function On(e){return e.mode&1?Te&2&&dt!==0?dt&-dt:j0.transition!==null?(_a===0&&(_a=cm()),_a):(e=Fe,e!==0||(e=window.event,e=e===void 0?16:xm(e.type)),e):1}function Qt(e,t,n,r){if(50<$s)throw $s=0,Si=null,Error(te(185));ea(e,n,r),(!(Te&2)||e!==ct)&&(e===ct&&(!(Te&2)&&(Al|=n),ot===4&&En(e,dt)),Pt(e,r),n===1&&Te===0&&!(t.mode&1)&&(Zr=nt()+500,Cl&&Kn()))}function Pt(e,t){var n=e.callbackNode;jh(e,t);var r=Va(e,e===ct?dt:0);if(r===0)n!==null&&Xc(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Xc(n),t===1)e.tag===0?w0(Hu.bind(null,e)):Um(Hu.bind(null,e)),g0(function(){!(Te&6)&&Kn()}),n=null;else{switch(um(r)){case 1:n=Zi;break;case 4:n=om;break;case 16:n=Ka;break;case 536870912:n=im;break;default:n=Ka}n=If(n,Ef.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ef(e,t){if(Fa=-1,_a=0,Te&6)throw Error(te(327));var n=e.callbackNode;if(Gr()&&e.callbackNode!==n)return null;var r=Va(e,e===ct?dt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=dl(e,r);else{t=r;var a=Te;Te|=2;var l=Tf();(ct!==e||dt!==t)&&(on=null,Zr=nt()+500,or(e,t));do try{z0();break}catch(i){Pf(e,i)}while(!0);dc(),il.current=l,Te=a,at!==null?t=0:(ct=null,dt=0,t=ot)}if(t!==0){if(t===2&&(a=Yo(e),a!==0&&(r=a,t=ki(e,a))),t===1)throw n=Qs,or(e,0),En(e,r),Pt(e,nt()),n;if(t===6)En(e,r);else{if(a=e.current.alternate,!(r&30)&&!_0(a)&&(t=dl(e,r),t===2&&(l=Yo(e),l!==0&&(r=l,t=ki(e,l))),t===1))throw n=Qs,or(e,0),En(e,r),Pt(e,nt()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(te(345));case 2:er(e,St,on);break;case 3:if(En(e,r),(r&130023424)===r&&(t=Cc+500-nt(),10<t)){if(Va(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){wt(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ai(er.bind(null,e,St,on),t);break}er(e,St,on);break;case 4:if(En(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-Jt(r);l=1<<o,o=t[o],o>a&&(a=o),r&=~l}if(r=a,r=nt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*F0(r/1960))-r,10<r){e.timeoutHandle=ai(er.bind(null,e,St,on),r);break}er(e,St,on);break;case 5:er(e,St,on);break;default:throw Error(te(329))}}}return Pt(e,nt()),e.callbackNode===n?Ef.bind(null,e):null}function ki(e,t){var n=Ls;return e.current.memoizedState.isDehydrated&&(or(e,t).flags|=256),e=dl(e,t),e!==2&&(t=St,St=n,t!==null&&Ci(t)),e}function Ci(e){St===null?St=e:St.push.apply(St,e)}function _0(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],l=a.getSnapshot;a=a.value;try{if(!Yt(l(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function En(e,t){for(t&=~kc,t&=~Al,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Jt(t),r=1<<n;e[n]=-1,t&=~r}}function Hu(e){if(Te&6)throw Error(te(327));Gr();var t=Va(e,0);if(!(t&1))return Pt(e,nt()),null;var n=dl(e,t);if(e.tag!==0&&n===2){var r=Yo(e);r!==0&&(t=r,n=ki(e,r))}if(n===1)throw n=Qs,or(e,0),En(e,t),Pt(e,nt()),n;if(n===6)throw Error(te(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,er(e,St,on),Pt(e,nt()),null}function Ec(e,t){var n=Te;Te|=1;try{return e(t)}finally{Te=n,Te===0&&(Zr=nt()+500,Cl&&Kn())}}function hr(e){An!==null&&An.tag===0&&!(Te&6)&&Gr();var t=Te;Te|=1;var n=Ot.transition,r=Fe;try{if(Ot.transition=null,Fe=1,e)return e()}finally{Fe=r,Ot.transition=n,Te=t,!(Te&6)&&Kn()}}function Pc(){Tt=Or.current,He(Or)}function or(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,x0(n)),at!==null)for(n=at.return;n!==null;){var r=n;switch(ic(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Za();break;case 3:Qr(),He(Ct),He(yt),gc();break;case 5:xc(r);break;case 4:Qr();break;case 13:He(Je);break;case 19:He(Je);break;case 10:mc(r.type._context);break;case 22:case 23:Pc()}n=n.return}if(ct=e,at=e=Fn(e.current,null),dt=Tt=t,ot=0,Qs=null,kc=Al=pr=0,St=Ls=null,rr!==null){for(t=0;t<rr.length;t++)if(n=rr[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,l=n.pending;if(l!==null){var o=l.next;l.next=a,r.next=o}n.pending=r}rr=null}return e}function Pf(e,t){do{var n=at;try{if(dc(),Da.current=ol,ll){for(var r=Qe.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}ll=!1}if(fr=0,it=lt=Qe=null,As=!1,Vs=0,Sc.current=null,n===null||n.return===null){ot=1,Qs=t,at=null;break}e:{var l=e,o=n.return,i=n,u=t;if(t=dt,i.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,x=i,p=x.tag;if(!(x.mode&1)&&(p===0||p===11||p===15)){var g=x.alternate;g?(x.updateQueue=g.updateQueue,x.memoizedState=g.memoizedState,x.lanes=g.lanes):(x.updateQueue=null,x.memoizedState=null)}var v=Lu(o);if(v!==null){v.flags&=-257,$u(v,o,i,l,t),v.mode&1&&Ru(l,d,t),t=v,u=d;var b=t.updateQueue;if(b===null){var y=new Set;y.add(u),t.updateQueue=y}else b.add(u);break e}else{if(!(t&1)){Ru(l,d,t),Tc();break e}u=Error(te(426))}}else if(Ve&&i.mode&1){var w=Lu(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),$u(w,o,i,l,t),cc(Yr(u,i));break e}}l=u=Yr(u,i),ot!==4&&(ot=2),Ls===null?Ls=[l]:Ls.push(l),l=o;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var h=df(l,u,t);ku(l,h);break e;case 1:i=u;var f=l.type,m=l.stateNode;if(!(l.flags&128)&&(typeof f.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Mn===null||!Mn.has(m)))){l.flags|=65536,t&=-t,l.lanes|=t;var j=mf(l,i,t);ku(l,j);break e}}l=l.return}while(l!==null)}Rf(n)}catch(k){t=k,at===n&&n!==null&&(at=n=n.return);continue}break}while(!0)}function Tf(){var e=il.current;return il.current=ol,e===null?ol:e}function Tc(){(ot===0||ot===3||ot===2)&&(ot=4),ct===null||!(pr&268435455)&&!(Al&268435455)||En(ct,dt)}function dl(e,t){var n=Te;Te|=2;var r=Tf();(ct!==e||dt!==t)&&(on=null,or(e,t));do try{B0();break}catch(a){Pf(e,a)}while(!0);if(dc(),Te=n,il.current=r,at!==null)throw Error(te(261));return ct=null,dt=0,ot}function B0(){for(;at!==null;)Af(at)}function z0(){for(;at!==null&&!fh();)Af(at)}function Af(e){var t=$f(e.alternate,e,Tt);e.memoizedProps=e.pendingProps,t===null?Rf(e):at=t,Sc.current=null}function Rf(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=U0(n,t),n!==null){n.flags&=32767,at=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ot=6,at=null;return}}else if(n=I0(n,t,Tt),n!==null){at=n;return}if(t=t.sibling,t!==null){at=t;return}at=t=e}while(t!==null);ot===0&&(ot=5)}function er(e,t,n){var r=Fe,a=Ot.transition;try{Ot.transition=null,Fe=1,W0(e,t,n,r)}finally{Ot.transition=a,Fe=r}return null}function W0(e,t,n,r){do Gr();while(An!==null);if(Te&6)throw Error(te(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(te(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(Nh(e,l),e===ct&&(at=ct=null,dt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Na||(Na=!0,If(Ka,function(){return Gr(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Ot.transition,Ot.transition=null;var o=Fe;Fe=1;var i=Te;Te|=4,Sc.current=null,M0(e,n),kf(n,e),c0(ri),qa=!!ni,ri=ni=null,e.current=n,O0(n),ph(),Te=i,Fe=o,Ot.transition=l}else e.current=n;if(Na&&(Na=!1,An=e,ul=a),l=e.pendingLanes,l===0&&(Mn=null),gh(n.stateNode),Pt(e,nt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(cl)throw cl=!1,e=Ni,Ni=null,e;return ul&1&&e.tag!==0&&Gr(),l=e.pendingLanes,l&1?e===Si?$s++:($s=0,Si=e):$s=0,Kn(),null}function Gr(){if(An!==null){var e=um(ul),t=Ot.transition,n=Fe;try{if(Ot.transition=null,Fe=16>e?16:e,An===null)var r=!1;else{if(e=An,An=null,ul=0,Te&6)throw Error(te(331));var a=Te;for(Te|=4,ue=e.current;ue!==null;){var l=ue,o=l.child;if(ue.flags&16){var i=l.deletions;if(i!==null){for(var u=0;u<i.length;u++){var d=i[u];for(ue=d;ue!==null;){var x=ue;switch(x.tag){case 0:case 11:case 15:Rs(8,x,l)}var p=x.child;if(p!==null)p.return=x,ue=p;else for(;ue!==null;){x=ue;var g=x.sibling,v=x.return;if(jf(x),x===d){ue=null;break}if(g!==null){g.return=v,ue=g;break}ue=v}}}var b=l.alternate;if(b!==null){var y=b.child;if(y!==null){b.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}ue=l}}if(l.subtreeFlags&2064&&o!==null)o.return=l,ue=o;else e:for(;ue!==null;){if(l=ue,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Rs(9,l,l.return)}var h=l.sibling;if(h!==null){h.return=l.return,ue=h;break e}ue=l.return}}var f=e.current;for(ue=f;ue!==null;){o=ue;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,ue=m;else e:for(o=f;ue!==null;){if(i=ue,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:Tl(9,i)}}catch(k){Xe(i,i.return,k)}if(i===o){ue=null;break e}var j=i.sibling;if(j!==null){j.return=i.return,ue=j;break e}ue=i.return}}if(Te=a,Kn(),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(wl,e)}catch{}r=!0}return r}finally{Fe=n,Ot.transition=t}}return!1}function Ku(e,t,n){t=Yr(n,t),t=df(e,t,1),e=Dn(e,t,1),t=wt(),e!==null&&(ea(e,1,t),Pt(e,t))}function Xe(e,t,n){if(e.tag===3)Ku(e,e,n);else for(;t!==null;){if(t.tag===3){Ku(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Mn===null||!Mn.has(r))){e=Yr(n,e),e=mf(t,e,1),t=Dn(t,e,1),e=wt(),t!==null&&(ea(t,1,e),Pt(t,e));break}}t=t.return}}function G0(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=wt(),e.pingedLanes|=e.suspendedLanes&n,ct===e&&(dt&n)===n&&(ot===4||ot===3&&(dt&130023424)===dt&&500>nt()-Cc?or(e,0):kc|=n),Pt(e,t)}function Lf(e,t){t===0&&(e.mode&1?(t=fa,fa<<=1,!(fa&130023424)&&(fa=4194304)):t=1);var n=wt();e=xn(e,t),e!==null&&(ea(e,t,n),Pt(e,n))}function H0(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Lf(e,n)}function K0(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(te(314))}r!==null&&r.delete(t),Lf(e,n)}var $f;$f=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ct.current)kt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return kt=!1,$0(e,t,n);kt=!!(e.flags&131072)}else kt=!1,Ve&&t.flags&1048576&&Dm(t,tl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Oa(e,t),e=t.pendingProps;var a=Vr(t,yt.current);Wr(t,n),a=vc(null,t,r,e,a,n);var l=bc();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Et(r)?(l=!0,Xa(t)):l=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,pc(t),a.updater=Pl,t.stateNode=a,a._reactInternals=t,mi(t,r,e,n),t=hi(null,t,r,!0,l,n)):(t.tag=0,Ve&&l&&oc(t),bt(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Oa(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=q0(r),e=Kt(r,e),a){case 0:t=pi(null,t,r,e,n);break e;case 1:t=Du(null,t,r,e,n);break e;case 11:t=Iu(null,t,r,e,n);break e;case 14:t=Uu(null,t,r,Kt(r.type,e),n);break e}throw Error(te(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Kt(r,a),pi(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Kt(r,a),Du(e,t,r,a,n);case 3:e:{if(xf(t),e===null)throw Error(te(387));r=t.pendingProps,l=t.memoizedState,a=l.element,zm(e,t),sl(t,r,null,n);var o=t.memoizedState;if(r=o.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){a=Yr(Error(te(423)),t),t=Mu(e,t,r,n,a);break e}else if(r!==a){a=Yr(Error(te(424)),t),t=Mu(e,t,r,n,a);break e}else for(At=Un(t.stateNode.containerInfo.firstChild),Rt=t,Ve=!0,qt=null,n=_m(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(qr(),r===a){t=gn(e,t,n);break e}bt(e,t,r,n)}t=t.child}return t;case 5:return Wm(t),e===null&&ci(t),r=t.type,a=t.pendingProps,l=e!==null?e.memoizedProps:null,o=a.children,si(r,a)?o=null:l!==null&&si(r,l)&&(t.flags|=32),hf(e,t),bt(e,t,o,n),t.child;case 6:return e===null&&ci(t),null;case 13:return gf(e,t,n);case 4:return hc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Jr(t,null,r,n):bt(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Kt(r,a),Iu(e,t,r,a,n);case 7:return bt(e,t,t.pendingProps,n),t.child;case 8:return bt(e,t,t.pendingProps.children,n),t.child;case 12:return bt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,l=t.memoizedProps,o=a.value,We(nl,r._currentValue),r._currentValue=o,l!==null)if(Yt(l.value,o)){if(l.children===a.children&&!Ct.current){t=gn(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var i=l.dependencies;if(i!==null){o=l.child;for(var u=i.firstContext;u!==null;){if(u.context===r){if(l.tag===1){u=mn(-1,n&-n),u.tag=2;var d=l.updateQueue;if(d!==null){d=d.shared;var x=d.pending;x===null?u.next=u:(u.next=x.next,x.next=u),d.pending=u}}l.lanes|=n,u=l.alternate,u!==null&&(u.lanes|=n),ui(l.return,n,t),i.lanes|=n;break}u=u.next}}else if(l.tag===10)o=l.type===t.type?null:l.child;else if(l.tag===18){if(o=l.return,o===null)throw Error(te(341));o.lanes|=n,i=o.alternate,i!==null&&(i.lanes|=n),ui(o,n,t),o=l.sibling}else o=l.child;if(o!==null)o.return=l;else for(o=l;o!==null;){if(o===t){o=null;break}if(l=o.sibling,l!==null){l.return=o.return,o=l;break}o=o.return}l=o}bt(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Wr(t,n),a=Ft(a),r=r(a),t.flags|=1,bt(e,t,r,n),t.child;case 14:return r=t.type,a=Kt(r,t.pendingProps),a=Kt(r.type,a),Uu(e,t,r,a,n);case 15:return ff(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Kt(r,a),Oa(e,t),t.tag=1,Et(r)?(e=!0,Xa(t)):e=!1,Wr(t,n),uf(t,r,a),mi(t,r,a,n),hi(null,t,r,!0,e,n);case 19:return yf(e,t,n);case 22:return pf(e,t,n)}throw Error(te(156,t.tag))};function If(e,t){return lm(e,t)}function V0(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mt(e,t,n,r){return new V0(e,t,n,r)}function Ac(e){return e=e.prototype,!(!e||!e.isReactComponent)}function q0(e){if(typeof e=="function")return Ac(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ji)return 11;if(e===Qi)return 14}return 2}function Fn(e,t){var n=e.alternate;return n===null?(n=Mt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ba(e,t,n,r,a,l){var o=2;if(r=e,typeof e=="function")Ac(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Pr:return ir(n.children,a,l,t);case qi:o=8,a|=8;break;case Do:return e=Mt(12,n,t,a|2),e.elementType=Do,e.lanes=l,e;case Mo:return e=Mt(13,n,t,a),e.elementType=Mo,e.lanes=l,e;case Oo:return e=Mt(19,n,t,a),e.elementType=Oo,e.lanes=l,e;case Wd:return Rl(n,a,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Bd:o=10;break e;case zd:o=9;break e;case Ji:o=11;break e;case Qi:o=14;break e;case Sn:o=16,r=null;break e}throw Error(te(130,e==null?e:typeof e,""))}return t=Mt(o,n,t,a),t.elementType=e,t.type=r,t.lanes=l,t}function ir(e,t,n,r){return e=Mt(7,e,r,t),e.lanes=n,e}function Rl(e,t,n,r){return e=Mt(22,e,r,t),e.elementType=Wd,e.lanes=n,e.stateNode={isHidden:!1},e}function ho(e,t,n){return e=Mt(6,e,null,t),e.lanes=n,e}function xo(e,t,n){return t=Mt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function J0(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jl(0),this.expirationTimes=Jl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jl(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Rc(e,t,n,r,a,l,o,i,u){return e=new J0(e,t,n,i,u),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Mt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},pc(l),e}function Q0(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Er,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Uf(e){if(!e)return zn;e=e._reactInternals;e:{if(yr(e)!==e||e.tag!==1)throw Error(te(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Et(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(te(171))}if(e.tag===1){var n=e.type;if(Et(n))return Im(e,n,t)}return t}function Df(e,t,n,r,a,l,o,i,u){return e=Rc(n,r,!0,e,a,l,o,i,u),e.context=Uf(null),n=e.current,r=wt(),a=On(n),l=mn(r,a),l.callback=t??null,Dn(n,l,a),e.current.lanes=a,ea(e,a,r),Pt(e,r),e}function Ll(e,t,n,r){var a=t.current,l=wt(),o=On(a);return n=Uf(n),t.context===null?t.context=n:t.pendingContext=n,t=mn(l,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Dn(a,t,o),e!==null&&(Qt(e,a,o,l),Ua(e,a,o)),o}function ml(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Vu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Lc(e,t){Vu(e,t),(e=e.alternate)&&Vu(e,t)}function Y0(){return null}var Mf=typeof reportError=="function"?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}$l.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(te(409));Ll(e,t,null,null)};$l.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;hr(function(){Ll(null,e,null,null)}),t[hn]=null}};function $l(e){this._internalRoot=e}$l.prototype.unstable_scheduleHydration=function(e){if(e){var t=fm();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Cn.length&&t!==0&&t<Cn[n].priority;n++);Cn.splice(n,0,e),n===0&&hm(e)}};function Ic(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Il(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function qu(){}function Z0(e,t,n,r,a){if(a){if(typeof r=="function"){var l=r;r=function(){var d=ml(o);l.call(d)}}var o=Df(t,r,e,0,null,!1,!1,"",qu);return e._reactRootContainer=o,e[hn]=o.current,zs(e.nodeType===8?e.parentNode:e),hr(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var i=r;r=function(){var d=ml(u);i.call(d)}}var u=Rc(e,0,!1,null,null,!1,!1,"",qu);return e._reactRootContainer=u,e[hn]=u.current,zs(e.nodeType===8?e.parentNode:e),hr(function(){Ll(t,u,n,r)}),u}function Ul(e,t,n,r,a){var l=n._reactRootContainer;if(l){var o=l;if(typeof a=="function"){var i=a;a=function(){var u=ml(o);i.call(u)}}Ll(t,o,e,a)}else o=Z0(n,t,e,a,r);return ml(o)}dm=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ws(t.pendingLanes);n!==0&&(Xi(t,n|1),Pt(t,nt()),!(Te&6)&&(Zr=nt()+500,Kn()))}break;case 13:hr(function(){var r=xn(e,1);if(r!==null){var a=wt();Qt(r,e,1,a)}}),Lc(e,1)}};ec=function(e){if(e.tag===13){var t=xn(e,134217728);if(t!==null){var n=wt();Qt(t,e,134217728,n)}Lc(e,134217728)}};mm=function(e){if(e.tag===13){var t=On(e),n=xn(e,t);if(n!==null){var r=wt();Qt(n,e,t,r)}Lc(e,t)}};fm=function(){return Fe};pm=function(e,t){var n=Fe;try{return Fe=e,t()}finally{Fe=n}};qo=function(e,t,n){switch(t){case"input":if(Bo(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=kl(r);if(!a)throw Error(te(90));Hd(r),Bo(r,a)}}}break;case"textarea":Vd(e,n);break;case"select":t=n.value,t!=null&&Fr(e,!!n.multiple,t,!1)}};em=Ec;tm=hr;var X0={usingClientEntryPoint:!1,Events:[na,Lr,kl,Zd,Xd,Ec]},ps={findFiberByHostInstance:nr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ex={bundleType:ps.bundleType,version:ps.version,rendererPackageName:ps.rendererPackageName,rendererConfig:ps.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=sm(e),e===null?null:e.stateNode},findFiberByHostInstance:ps.findFiberByHostInstance||Y0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sa.isDisabled&&Sa.supportsFiber)try{wl=Sa.inject(ex),nn=Sa}catch{}}$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X0;$t.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ic(t))throw Error(te(200));return Q0(e,t,null,n)};$t.createRoot=function(e,t){if(!Ic(e))throw Error(te(299));var n=!1,r="",a=Mf;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Rc(e,1,!1,null,null,n,!1,r,a),e[hn]=t.current,zs(e.nodeType===8?e.parentNode:e),new $c(t)};$t.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(te(188)):(e=Object.keys(e).join(","),Error(te(268,e)));return e=sm(t),e=e===null?null:e.stateNode,e};$t.flushSync=function(e){return hr(e)};$t.hydrate=function(e,t,n){if(!Il(t))throw Error(te(200));return Ul(null,e,t,!0,n)};$t.hydrateRoot=function(e,t,n){if(!Ic(e))throw Error(te(405));var r=n!=null&&n.hydratedSources||null,a=!1,l="",o=Mf;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Df(t,null,e,1,n??null,a,!1,l,o),e[hn]=t.current,zs(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new $l(t)};$t.render=function(e,t,n){if(!Il(t))throw Error(te(200));return Ul(null,e,t,!1,n)};$t.unmountComponentAtNode=function(e){if(!Il(e))throw Error(te(40));return e._reactRootContainer?(hr(function(){Ul(null,null,e,!1,function(){e._reactRootContainer=null,e[hn]=null})}),!0):!1};$t.unstable_batchedUpdates=Ec;$t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Il(n))throw Error(te(200));if(e==null||e._reactInternals===void 0)throw Error(te(38));return Ul(e,t,n,!1,r)};$t.version="18.3.1-next-f1338f8080-20240426";function Of(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Of)}catch(e){console.error(e)}}Of(),Md.exports=$t;var Ff=Md.exports,Ju=Ff;Io.createRoot=Ju.createRoot,Io.hydrateRoot=Ju.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ys(){return Ys=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ys.apply(this,arguments)}var Rn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Rn||(Rn={}));const Qu="popstate";function tx(e){e===void 0&&(e={});function t(r,a){let{pathname:l,search:o,hash:i}=r.location;return Ei("",{pathname:l,search:o,hash:i},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:fl(a)}return rx(t,n,null,e)}function et(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Uc(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function nx(){return Math.random().toString(36).substr(2,8)}function Yu(e,t){return{usr:e.state,key:e.key,idx:t}}function Ei(e,t,n,r){return n===void 0&&(n=null),Ys({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?rs(t):t,{state:n,key:t&&t.key||r||nx()})}function fl(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function rs(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function rx(e,t,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:l=!1}=r,o=a.history,i=Rn.Pop,u=null,d=x();d==null&&(d=0,o.replaceState(Ys({},o.state,{idx:d}),""));function x(){return(o.state||{idx:null}).idx}function p(){i=Rn.Pop;let w=x(),h=w==null?null:w-d;d=w,u&&u({action:i,location:y.location,delta:h})}function g(w,h){i=Rn.Push;let f=Ei(y.location,w,h);d=x()+1;let m=Yu(f,d),j=y.createHref(f);try{o.pushState(m,"",j)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;a.location.assign(j)}l&&u&&u({action:i,location:y.location,delta:1})}function v(w,h){i=Rn.Replace;let f=Ei(y.location,w,h);d=x();let m=Yu(f,d),j=y.createHref(f);o.replaceState(m,"",j),l&&u&&u({action:i,location:y.location,delta:0})}function b(w){let h=a.location.origin!=="null"?a.location.origin:a.location.href,f=typeof w=="string"?w:fl(w);return f=f.replace(/ $/,"%20"),et(h,"No window.location.(origin|href) available to create URL for href: "+f),new URL(f,h)}let y={get action(){return i},get location(){return e(a,o)},listen(w){if(u)throw new Error("A history only accepts one active listener");return a.addEventListener(Qu,p),u=w,()=>{a.removeEventListener(Qu,p),u=null}},createHref(w){return t(a,w)},createURL:b,encodeLocation(w){let h=b(w);return{pathname:h.pathname,search:h.search,hash:h.hash}},push:g,replace:v,go(w){return o.go(w)}};return y}var Zu;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Zu||(Zu={}));function sx(e,t,n){return n===void 0&&(n="/"),ax(e,t,n)}function ax(e,t,n,r){let a=typeof t=="string"?rs(t):t,l=Xr(a.pathname||"/",n);if(l==null)return null;let o=_f(e);lx(o);let i=null;for(let u=0;i==null&&u<o.length;++u){let d=gx(l);i=hx(o[u],d)}return i}function _f(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(l,o,i)=>{let u={relativePath:i===void 0?l.path||"":i,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};u.relativePath.startsWith("/")&&(et(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=_n([r,u.relativePath]),x=n.concat(u);l.children&&l.children.length>0&&(et(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),_f(l.children,t,x,d)),!(l.path==null&&!l.index)&&t.push({path:d,score:fx(d,l.index),routesMeta:x})};return e.forEach((l,o)=>{var i;if(l.path===""||!((i=l.path)!=null&&i.includes("?")))a(l,o);else for(let u of Bf(l.path))a(l,o,u)}),t}function Bf(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,a=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let o=Bf(r.join("/")),i=[];return i.push(...o.map(u=>u===""?l:[l,u].join("/"))),a&&i.push(...o),i.map(u=>e.startsWith("/")&&u===""?"/":u)}function lx(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:px(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const ox=/^:[\w-]+$/,ix=3,cx=2,ux=1,dx=10,mx=-2,Xu=e=>e==="*";function fx(e,t){let n=e.split("/"),r=n.length;return n.some(Xu)&&(r+=mx),t&&(r+=cx),n.filter(a=>!Xu(a)).reduce((a,l)=>a+(ox.test(l)?ix:l===""?ux:dx),r)}function px(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function hx(e,t,n){let{routesMeta:r}=e,a={},l="/",o=[];for(let i=0;i<r.length;++i){let u=r[i],d=i===r.length-1,x=l==="/"?t:t.slice(l.length)||"/",p=Pi({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},x),g=u.route;if(!p)return null;Object.assign(a,p.params),o.push({params:a,pathname:_n([l,p.pathname]),pathnameBase:jx(_n([l,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(l=_n([l,p.pathnameBase]))}return o}function Pi(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=xx(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let l=a[0],o=l.replace(/(.)\/+$/,"$1"),i=a.slice(1);return{params:r.reduce((d,x,p)=>{let{paramName:g,isOptional:v}=x;if(g==="*"){let y=i[p]||"";o=l.slice(0,l.length-y.length).replace(/(.)\/+$/,"$1")}const b=i[p];return v&&!b?d[g]=void 0:d[g]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:l,pathnameBase:o,pattern:e}}function xx(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Uc(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,i,u)=>(r.push({paramName:i,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function gx(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Uc(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Xr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const yx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vx=e=>yx.test(e);function bx(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?rs(e):e,l;if(n)if(vx(n))l=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Uc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?l=ed(n.substring(1),"/"):l=ed(n,t)}else l=t;return{pathname:l,search:Nx(r),hash:Sx(a)}}function ed(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function go(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function wx(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function zf(e,t){let n=wx(e);return t?n.map((r,a)=>a===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Wf(e,t,n,r){r===void 0&&(r=!1);let a;typeof e=="string"?a=rs(e):(a=Ys({},e),et(!a.pathname||!a.pathname.includes("?"),go("?","pathname","search",a)),et(!a.pathname||!a.pathname.includes("#"),go("#","pathname","hash",a)),et(!a.search||!a.search.includes("#"),go("#","search","hash",a)));let l=e===""||a.pathname==="",o=l?"/":a.pathname,i;if(o==null)i=n;else{let p=t.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;a.pathname=g.join("/")}i=p>=0?t[p]:"/"}let u=bx(a,i),d=o&&o!=="/"&&o.endsWith("/"),x=(l||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||x)&&(u.pathname+="/"),u}const _n=e=>e.join("/").replace(/\/\/+/g,"/"),jx=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Nx=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Sx=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function kx(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Gf=["post","put","patch","delete"];new Set(Gf);const Cx=["get",...Gf];new Set(Cx);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zs(){return Zs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zs.apply(this,arguments)}const Dl=c.createContext(null),Hf=c.createContext(null),Vn=c.createContext(null),Ml=c.createContext(null),qn=c.createContext({outlet:null,matches:[],isDataRoute:!1}),Kf=c.createContext(null);function Ex(e,t){let{relative:n}=t===void 0?{}:t;sa()||et(!1);let{basename:r,navigator:a}=c.useContext(Vn),{hash:l,pathname:o,search:i}=Ol(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:_n([r,o])),a.createHref({pathname:u,search:i,hash:l})}function sa(){return c.useContext(Ml)!=null}function ss(){return sa()||et(!1),c.useContext(Ml).location}function Vf(e){c.useContext(Vn).static||c.useLayoutEffect(e)}function Bt(){let{isDataRoute:e}=c.useContext(qn);return e?_x():Px()}function Px(){sa()||et(!1);let e=c.useContext(Dl),{basename:t,future:n,navigator:r}=c.useContext(Vn),{matches:a}=c.useContext(qn),{pathname:l}=ss(),o=JSON.stringify(zf(a,n.v7_relativeSplatPath)),i=c.useRef(!1);return Vf(()=>{i.current=!0}),c.useCallback(function(d,x){if(x===void 0&&(x={}),!i.current)return;if(typeof d=="number"){r.go(d);return}let p=Wf(d,JSON.parse(o),l,x.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:_n([t,p.pathname])),(x.replace?r.replace:r.push)(p,x.state,x)},[t,r,o,l,e])}function as(){let{matches:e}=c.useContext(qn),t=e[e.length-1];return t?t.params:{}}function Ol(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=c.useContext(Vn),{matches:a}=c.useContext(qn),{pathname:l}=ss(),o=JSON.stringify(zf(a,r.v7_relativeSplatPath));return c.useMemo(()=>Wf(e,JSON.parse(o),l,n==="path"),[e,o,l,n])}function Tx(e,t){return Ax(e,t)}function Ax(e,t,n,r){sa()||et(!1);let{navigator:a}=c.useContext(Vn),{matches:l}=c.useContext(qn),o=l[l.length-1],i=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=ss(),x;if(t){var p;let w=typeof t=="string"?rs(t):t;u==="/"||(p=w.pathname)!=null&&p.startsWith(u)||et(!1),x=w}else x=d;let g=x.pathname||"/",v=g;if(u!=="/"){let w=u.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(w.length).join("/")}let b=sx(e,{pathname:v}),y=Ux(b&&b.map(w=>Object.assign({},w,{params:Object.assign({},i,w.params),pathname:_n([u,a.encodeLocation?a.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?u:_n([u,a.encodeLocation?a.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),l,n,r);return t&&y?c.createElement(Ml.Provider,{value:{location:Zs({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:Rn.Pop}},y):y}function Rx(){let e=Fx(),t=kx(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return c.createElement(c.Fragment,null,c.createElement("h2",null,"Unexpected Application Error!"),c.createElement("h3",{style:{fontStyle:"italic"}},t),n?c.createElement("pre",{style:a},n):null,null)}const Lx=c.createElement(Rx,null);class $x extends c.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?c.createElement(qn.Provider,{value:this.props.routeContext},c.createElement(Kf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ix(e){let{routeContext:t,match:n,children:r}=e,a=c.useContext(Dl);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),c.createElement(qn.Provider,{value:t},r)}function Ux(e,t,n,r){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var l;if(!n)return null;if(n.errors)e=n.matches;else if((l=r)!=null&&l.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,i=(a=n)==null?void 0:a.errors;if(i!=null){let x=o.findIndex(p=>p.route.id&&(i==null?void 0:i[p.route.id])!==void 0);x>=0||et(!1),o=o.slice(0,Math.min(o.length,x+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let x=0;x<o.length;x++){let p=o[x];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=x),p.route.id){let{loaderData:g,errors:v}=n,b=p.route.loader&&g[p.route.id]===void 0&&(!v||v[p.route.id]===void 0);if(p.route.lazy||b){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((x,p,g)=>{let v,b=!1,y=null,w=null;n&&(v=i&&p.route.id?i[p.route.id]:void 0,y=p.route.errorElement||Lx,u&&(d<0&&g===0?(Bx("route-fallback"),b=!0,w=null):d===g&&(b=!0,w=p.route.hydrateFallbackElement||null)));let h=t.concat(o.slice(0,g+1)),f=()=>{let m;return v?m=y:b?m=w:p.route.Component?m=c.createElement(p.route.Component,null):p.route.element?m=p.route.element:m=x,c.createElement(Ix,{match:p,routeContext:{outlet:x,matches:h,isDataRoute:n!=null},children:m})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?c.createElement($x,{location:n.location,revalidation:n.revalidation,component:y,error:v,children:f(),routeContext:{outlet:null,matches:h,isDataRoute:!0}}):f()},null)}var qf=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(qf||{}),Jf=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Jf||{});function Dx(e){let t=c.useContext(Dl);return t||et(!1),t}function Mx(e){let t=c.useContext(Hf);return t||et(!1),t}function Ox(e){let t=c.useContext(qn);return t||et(!1),t}function Qf(e){let t=Ox(),n=t.matches[t.matches.length-1];return n.route.id||et(!1),n.route.id}function Fx(){var e;let t=c.useContext(Kf),n=Mx(),r=Qf();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function _x(){let{router:e}=Dx(qf.UseNavigateStable),t=Qf(Jf.UseNavigateStable),n=c.useRef(!1);return Vf(()=>{n.current=!0}),c.useCallback(function(a,l){l===void 0&&(l={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Zs({fromRouteId:t},l)))},[e,t])}const td={};function Bx(e,t,n){td[e]||(td[e]=!0)}function zx(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function De(e){et(!1)}function Wx(e){let{basename:t="/",children:n=null,location:r,navigationType:a=Rn.Pop,navigator:l,static:o=!1,future:i}=e;sa()&&et(!1);let u=t.replace(/^\/*/,"/"),d=c.useMemo(()=>({basename:u,navigator:l,static:o,future:Zs({v7_relativeSplatPath:!1},i)}),[u,i,l,o]);typeof r=="string"&&(r=rs(r));let{pathname:x="/",search:p="",hash:g="",state:v=null,key:b="default"}=r,y=c.useMemo(()=>{let w=Xr(x,u);return w==null?null:{location:{pathname:w,search:p,hash:g,state:v,key:b},navigationType:a}},[u,x,p,g,v,b,a]);return y==null?null:c.createElement(Vn.Provider,{value:d},c.createElement(Ml.Provider,{children:n,value:y}))}function Gx(e){let{children:t,location:n}=e;return Tx(Ti(t),n)}new Promise(()=>{});function Ti(e,t){t===void 0&&(t=[]);let n=[];return c.Children.forEach(e,(r,a)=>{if(!c.isValidElement(r))return;let l=[...t,a];if(r.type===c.Fragment){n.push.apply(n,Ti(r.props.children,l));return}r.type!==De&&et(!1),!r.props.index||!r.props.children||et(!1);let o={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Ti(r.props.children,l)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pl(){return pl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pl.apply(this,arguments)}function Yf(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,l;for(l=0;l<r.length;l++)a=r[l],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function Hx(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Kx(e,t){return e.button===0&&(!t||t==="_self")&&!Hx(e)}function Ai(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(a=>[n,a]):[[n,r]])},[]))}function Vx(e,t){let n=Ai(e);return t&&t.forEach((r,a)=>{n.has(a)||t.getAll(a).forEach(l=>{n.append(a,l)})}),n}const qx=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Jx=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Qx="6";try{window.__reactRouterVersion=Qx}catch{}const Yx=c.createContext({isTransitioning:!1}),Zx="startTransition",nd=Hr[Zx];function Xx(e){let{basename:t,children:n,future:r,window:a}=e,l=c.useRef();l.current==null&&(l.current=tx({window:a,v5Compat:!0}));let o=l.current,[i,u]=c.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},x=c.useCallback(p=>{d&&nd?nd(()=>u(p)):u(p)},[u,d]);return c.useLayoutEffect(()=>o.listen(x),[o,x]),c.useEffect(()=>zx(r),[r]),c.createElement(Wx,{basename:t,children:n,location:i.location,navigationType:i.action,navigator:o,future:r})}const eg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,oe=c.forwardRef(function(t,n){let{onClick:r,relative:a,reloadDocument:l,replace:o,state:i,target:u,to:d,preventScrollReset:x,viewTransition:p}=t,g=Yf(t,qx),{basename:v}=c.useContext(Vn),b,y=!1;if(typeof d=="string"&&tg.test(d)&&(b=d,eg))try{let m=new URL(window.location.href),j=d.startsWith("//")?new URL(m.protocol+d):new URL(d),k=Xr(j.pathname,v);j.origin===m.origin&&k!=null?d=k+j.search+j.hash:y=!0}catch{}let w=Ex(d,{relative:a}),h=rg(d,{replace:o,state:i,target:u,preventScrollReset:x,relative:a,viewTransition:p});function f(m){r&&r(m),m.defaultPrevented||h(m)}return c.createElement("a",pl({},g,{href:b||w,onClick:y||l?r:f,ref:n,target:u}))}),Wt=c.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:a=!1,className:l="",end:o=!1,style:i,to:u,viewTransition:d,children:x}=t,p=Yf(t,Jx),g=Ol(u,{relative:p.relative}),v=ss(),b=c.useContext(Hf),{navigator:y,basename:w}=c.useContext(Vn),h=b!=null&&sg(g)&&d===!0,f=y.encodeLocation?y.encodeLocation(g).pathname:g.pathname,m=v.pathname,j=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;a||(m=m.toLowerCase(),j=j?j.toLowerCase():null,f=f.toLowerCase()),j&&w&&(j=Xr(j,w)||j);const k=f!=="/"&&f.endsWith("/")?f.length-1:f.length;let E=m===f||!o&&m.startsWith(f)&&m.charAt(k)==="/",$=j!=null&&(j===f||!o&&j.startsWith(f)&&j.charAt(f.length)==="/"),I={isActive:E,isPending:$,isTransitioning:h},Q=E?r:void 0,q;typeof l=="function"?q=l(I):q=[l,E?"active":null,$?"pending":null,h?"transitioning":null].filter(Boolean).join(" ");let B=typeof i=="function"?i(I):i;return c.createElement(oe,pl({},p,{"aria-current":Q,className:q,ref:n,style:B,to:u,viewTransition:d}),typeof x=="function"?x(I):x)});var Ri;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ri||(Ri={}));var rd;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(rd||(rd={}));function ng(e){let t=c.useContext(Dl);return t||et(!1),t}function rg(e,t){let{target:n,replace:r,state:a,preventScrollReset:l,relative:o,viewTransition:i}=t===void 0?{}:t,u=Bt(),d=ss(),x=Ol(e,{relative:o});return c.useCallback(p=>{if(Kx(p,n)){p.preventDefault();let g=r!==void 0?r:fl(d)===fl(x);u(e,{replace:g,state:a,preventScrollReset:l,relative:o,viewTransition:i})}},[d,u,x,r,a,n,e,l,o,i])}function Zt(e){let t=c.useRef(Ai(e)),n=c.useRef(!1),r=ss(),a=c.useMemo(()=>Vx(r.search,n.current?null:t.current),[r.search]),l=Bt(),o=c.useCallback((i,u)=>{const d=Ai(typeof i=="function"?i(a):i);n.current=!0,l("?"+d,u)},[l,a]);return[a,o]}function sg(e,t){t===void 0&&(t={});let n=c.useContext(Yx);n==null&&et(!1);let{basename:r}=ng(Ri.useViewTransitionState),a=Ol(e,{relative:t.relative});if(!n.isTransitioning)return!1;let l=Xr(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Xr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Pi(a.pathname,o)!=null||Pi(a.pathname,l)!=null}function ag({title:e,titleId:t,...n},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?c.createElement("title",{id:t},e):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const _e=c.forwardRef(ag);function lg({title:e,titleId:t,...n},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?c.createElement("title",{id:t},e):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const Dc=c.forwardRef(lg);function og({title:e,titleId:t,...n},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?c.createElement("title",{id:t},e):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"}))}const ig=c.forwardRef(og);function cg({title:e,titleId:t,...n},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?c.createElement("title",{id:t},e):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const Gt=c.forwardRef(cg);function ug({title:e,titleId:t,...n},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?c.createElement("title",{id:t},e):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const Ht=c.forwardRef(ug);function dg({title:e,titleId:t,...n},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?c.createElement("title",{id:t},e):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))}const aa=c.forwardRef(dg);function mg({title:e,titleId:t,...n},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?c.createElement("title",{id:t},e):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const Mc=c.forwardRef(mg);var fg=Object.defineProperty,pg=(e,t,n)=>t in e?fg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yo=(e,t,n)=>(pg(e,typeof t!="symbol"?t+"":t,n),n);let hg=class{constructor(){yo(this,"current",this.detect()),yo(this,"handoffState","pending"),yo(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},fn=new hg,yn=(e,t)=>{fn.isServer?c.useEffect(e,t):c.useLayoutEffect(e,t)};function Fl(e){let t=c.useRef(e);return yn(()=>{t.current=e},[e]),t}let gt=function(e){let t=Fl(e);return Re.useCallback((...n)=>t.current(...n),[t])};function _l(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Bl(){let e=[],t={addEventListener(n,r,a,l){return n.addEventListener(r,a,l),t.add(()=>n.removeEventListener(r,a,l))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return _l(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,a){let l=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:a}),this.add(()=>{Object.assign(n.style,{[r]:l})})},group(n){let r=Bl();return n(r),this.add(()=>r.dispose())},add(n){return e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let a of e.splice(r,1))a()}},dispose(){for(let n of e.splice(0))n()}};return t}function xg(){let[e]=c.useState(Bl);return c.useEffect(()=>()=>e.dispose(),[e]),e}function gg(){let e=typeof document>"u";return"useSyncExternalStore"in Hr?(t=>t.useSyncExternalStore)(Hr)(()=>()=>{},()=>!1,()=>!e):!1}function zl(){let e=gg(),[t,n]=c.useState(fn.isHandoffComplete);return t&&fn.isHandoffComplete===!1&&n(!1),c.useEffect(()=>{t!==!0&&n(!0)},[t]),c.useEffect(()=>fn.handoff(),[]),e?!1:t}var sd;let ls=(sd=Re.useId)!=null?sd:function(){let e=zl(),[t,n]=Re.useState(e?()=>fn.nextId():null);return yn(()=>{t===null&&n(fn.nextId())},[t]),t!=null?""+t:void 0};function Wn(e,t,...n){if(e in t){let a=t[e];return typeof a=="function"?a(...n):a}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(a=>`"${a}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Wn),r}function Zf(e){return fn.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}let Li=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var tr=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(tr||{}),Xf=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Xf||{}),yg=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(yg||{});function vg(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Li)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var ep=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(ep||{});function bg(e,t=0){var n;return e===((n=Zf(e))==null?void 0:n.body)?!1:Wn(t,{0(){return e.matches(Li)},1(){let r=e;for(;r!==null;){if(r.matches(Li))return!0;r=r.parentElement}return!1}})}var wg=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(wg||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function cr(e){e==null||e.focus({preventScroll:!0})}let jg=["textarea","input"].join(",");function Ng(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,jg))!=null?n:!1}function Sg(e,t=n=>n){return e.slice().sort((n,r)=>{let a=t(n),l=t(r);if(a===null||l===null)return 0;let o=a.compareDocumentPosition(l);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function za(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:a=[]}={}){let l=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,o=Array.isArray(e)?n?Sg(e):e:vg(e);a.length>0&&o.length>1&&(o=o.filter(v=>!a.includes(v))),r=r??l.activeElement;let i=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,o.indexOf(r))-1;if(t&4)return Math.max(0,o.indexOf(r))+1;if(t&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=t&32?{preventScroll:!0}:{},x=0,p=o.length,g;do{if(x>=p||x+p<=0)return 0;let v=u+x;if(t&16)v=(v+p)%p;else{if(v<0)return 3;if(v>=p)return 1}g=o[v],g==null||g.focus(d),x+=i}while(g!==l.activeElement);return t&6&&Ng(g)&&g.select(),2}function tp(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function kg(){return/Android/gi.test(window.navigator.userAgent)}function Cg(){return tp()||kg()}function ka(e,t,n){let r=Fl(t);c.useEffect(()=>{function a(l){r.current(l)}return document.addEventListener(e,a,n),()=>document.removeEventListener(e,a,n)},[e,n])}function np(e,t,n){let r=Fl(t);c.useEffect(()=>{function a(l){r.current(l)}return window.addEventListener(e,a,n),()=>window.removeEventListener(e,a,n)},[e,n])}function Eg(e,t,n=!0){let r=c.useRef(!1);c.useEffect(()=>{requestAnimationFrame(()=>{r.current=n})},[n]);function a(o,i){if(!r.current||o.defaultPrevented)return;let u=i(o);if(u===null||!u.getRootNode().contains(u)||!u.isConnected)return;let d=function x(p){return typeof p=="function"?x(p()):Array.isArray(p)||p instanceof Set?p:[p]}(e);for(let x of d){if(x===null)continue;let p=x instanceof HTMLElement?x:x.current;if(p!=null&&p.contains(u)||o.composed&&o.composedPath().includes(p))return}return!bg(u,ep.Loose)&&u.tabIndex!==-1&&o.preventDefault(),t(o,u)}let l=c.useRef(null);ka("pointerdown",o=>{var i,u;r.current&&(l.current=((u=(i=o.composedPath)==null?void 0:i.call(o))==null?void 0:u[0])||o.target)},!0),ka("mousedown",o=>{var i,u;r.current&&(l.current=((u=(i=o.composedPath)==null?void 0:i.call(o))==null?void 0:u[0])||o.target)},!0),ka("click",o=>{Cg()||l.current&&(a(o,()=>l.current),l.current=null)},!0),ka("touchend",o=>a(o,()=>o.target instanceof HTMLElement?o.target:null),!0),np("blur",o=>a(o,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function la(...e){return c.useMemo(()=>Zf(...e),[...e])}let rp=Symbol();function Pg(e,t=!0){return Object.assign(e,{[rp]:t})}function bn(...e){let t=c.useRef(e);c.useEffect(()=>{t.current=e},[e]);let n=gt(r=>{for(let a of t.current)a!=null&&(typeof a=="function"?a(r):a.current=r)});return e.every(r=>r==null||(r==null?void 0:r[rp]))?void 0:n}function Oc(e,t){let n=c.useRef([]),r=gt(e);c.useEffect(()=>{let a=[...n.current];for(let[l,o]of t.entries())if(n.current[l]!==o){let i=r(t,a);return n.current=t,i}},[r,...t])}function ad(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}var $i=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))($i||{}),Tg=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Tg||{});function sn({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:a,visible:l=!0,name:o,mergeRefs:i}){i=i??Ag;let u=sp(t,e);if(l)return Ca(u,n,r,o,i);let d=a??0;if(d&2){let{static:x=!1,...p}=u;if(x)return Ca(p,n,r,o,i)}if(d&1){let{unmount:x=!0,...p}=u;return Wn(x?0:1,{0(){return null},1(){return Ca({...p,hidden:!0,style:{display:"none"}},n,r,o,i)}})}return Ca(u,n,r,o,i)}function Ca(e,t={},n,r,a){let{as:l=n,children:o,refName:i="ref",...u}=vo(e,["unmount","static"]),d=e.ref!==void 0?{[i]:e.ref}:{},x=typeof o=="function"?o(t):o;"className"in u&&u.className&&typeof u.className=="function"&&(u.className=u.className(t));let p={};if(t){let g=!1,v=[];for(let[b,y]of Object.entries(t))typeof y=="boolean"&&(g=!0),y===!0&&v.push(b);g&&(p["data-headlessui-state"]=v.join(" "))}if(l===c.Fragment&&Object.keys(ld(u)).length>0){if(!c.isValidElement(x)||Array.isArray(x)&&x.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(u).map(y=>`  - ${y}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(y=>`  - ${y}`).join(`
`)].join(`
`));let g=x.props,v=typeof(g==null?void 0:g.className)=="function"?(...y)=>ad(g==null?void 0:g.className(...y),u.className):ad(g==null?void 0:g.className,u.className),b=v?{className:v}:{};return c.cloneElement(x,Object.assign({},sp(x.props,ld(vo(u,["ref"]))),p,d,{ref:a(x.ref,d.ref)},b))}return c.createElement(l,Object.assign({},vo(u,["ref"]),l!==c.Fragment&&d,l!==c.Fragment&&p),x)}function Ag(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function sp(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let a in r)a.startsWith("on")&&typeof r[a]=="function"?(n[a]!=null||(n[a]=[]),n[a].push(r[a])):t[a]=r[a];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(n).map(r=>[r,void 0])));for(let r in n)Object.assign(t,{[r](a,...l){let o=n[r];for(let i of o){if((a instanceof Event||(a==null?void 0:a.nativeEvent)instanceof Event)&&a.defaultPrevented)return;i(a,...l)}}});return t}function an(e){var t;return Object.assign(c.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function ld(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function vo(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}let Rg="div";var hl=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(hl||{});function Lg(e,t){var n;let{features:r=1,...a}=e,l={ref:t,"aria-hidden":(r&2)===2?!0:(n=a["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return sn({ourProps:l,theirProps:a,slot:{},defaultTag:Rg,name:"Hidden"})}let Ii=an(Lg),ap=c.createContext(null);ap.displayName="OpenClosedContext";var Ns=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Ns||{});function $g(){return c.useContext(ap)}function Ig(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Pn=[];Ig(()=>{function e(t){t.target instanceof HTMLElement&&t.target!==document.body&&Pn[0]!==t.target&&(Pn.unshift(t.target),Pn=Pn.filter(n=>n!=null&&n.isConnected),Pn.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function Ug(e){let t=e.parentElement,n=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(n=t),t=t.parentElement;let r=(t==null?void 0:t.getAttribute("disabled"))==="";return r&&Dg(n)?!1:r}function Dg(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}var lp=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(lp||{});function op(e,t,n,r){let a=Fl(n);c.useEffect(()=>{e=e??window;function l(o){a.current(o)}return e.addEventListener(t,l,r),()=>e.removeEventListener(t,l,r)},[e,t,r])}function ip(){let e=c.useRef(!1);return yn(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function cp(e){let t=gt(e),n=c.useRef(!1);c.useEffect(()=>(n.current=!1,()=>{n.current=!0,_l(()=>{n.current&&t()})}),[t])}var Ss=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Ss||{});function Mg(){let e=c.useRef(0);return np("keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function up(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)n.current instanceof HTMLElement&&t.add(n.current);return t}let Og="div";var dp=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(dp||{});function Fg(e,t){let n=c.useRef(null),r=bn(n,t),{initialFocus:a,containers:l,features:o=30,...i}=e;zl()||(o=1);let u=la(n);zg({ownerDocument:u},!!(o&16));let d=Wg({ownerDocument:u,container:n,initialFocus:a},!!(o&2));Gg({ownerDocument:u,container:n,containers:l,previousActiveElement:d},!!(o&8));let x=Mg(),p=gt(y=>{let w=n.current;w&&(h=>h())(()=>{Wn(x.current,{[Ss.Forwards]:()=>{za(w,tr.First,{skipElements:[y.relatedTarget]})},[Ss.Backwards]:()=>{za(w,tr.Last,{skipElements:[y.relatedTarget]})}})})}),g=xg(),v=c.useRef(!1),b={ref:r,onKeyDown(y){y.key=="Tab"&&(v.current=!0,g.requestAnimationFrame(()=>{v.current=!1}))},onBlur(y){let w=up(l);n.current instanceof HTMLElement&&w.add(n.current);let h=y.relatedTarget;h instanceof HTMLElement&&h.dataset.headlessuiFocusGuard!=="true"&&(mp(w,h)||(v.current?za(n.current,Wn(x.current,{[Ss.Forwards]:()=>tr.Next,[Ss.Backwards]:()=>tr.Previous})|tr.WrapAround,{relativeTo:y.target}):y.target instanceof HTMLElement&&cr(y.target)))}};return Re.createElement(Re.Fragment,null,!!(o&4)&&Re.createElement(Ii,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:hl.Focusable}),sn({ourProps:b,theirProps:i,defaultTag:Og,name:"FocusTrap"}),!!(o&4)&&Re.createElement(Ii,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:hl.Focusable}))}let _g=an(Fg),hs=Object.assign(_g,{features:dp});function Bg(e=!0){let t=c.useRef(Pn.slice());return Oc(([n],[r])=>{r===!0&&n===!1&&_l(()=>{t.current.splice(0)}),r===!1&&n===!0&&(t.current=Pn.slice())},[e,Pn,t]),gt(()=>{var n;return(n=t.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function zg({ownerDocument:e},t){let n=Bg(t);Oc(()=>{t||(e==null?void 0:e.activeElement)===(e==null?void 0:e.body)&&cr(n())},[t]),cp(()=>{t&&cr(n())})}function Wg({ownerDocument:e,container:t,initialFocus:n},r){let a=c.useRef(null),l=ip();return Oc(()=>{if(!r)return;let o=t.current;o&&_l(()=>{if(!l.current)return;let i=e==null?void 0:e.activeElement;if(n!=null&&n.current){if((n==null?void 0:n.current)===i){a.current=i;return}}else if(o.contains(i)){a.current=i;return}n!=null&&n.current?cr(n.current):za(o,tr.First)===Xf.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),a.current=e==null?void 0:e.activeElement})},[r]),a}function Gg({ownerDocument:e,container:t,containers:n,previousActiveElement:r},a){let l=ip();op(e==null?void 0:e.defaultView,"focus",o=>{if(!a||!l.current)return;let i=up(n);t.current instanceof HTMLElement&&i.add(t.current);let u=r.current;if(!u)return;let d=o.target;d&&d instanceof HTMLElement?mp(i,d)?(r.current=d,cr(d)):(o.preventDefault(),o.stopPropagation(),cr(u)):cr(r.current)},!0)}function mp(e,t){for(let n of e)if(n.contains(t))return!0;return!1}let fp=c.createContext(!1);function Hg(){return c.useContext(fp)}function Ui(e){return Re.createElement(fp.Provider,{value:e.force},e.children)}function Kg(e){let t=Hg(),n=c.useContext(pp),r=la(e),[a,l]=c.useState(()=>{if(!t&&n!==null||fn.isServer)return null;let o=r==null?void 0:r.getElementById("headlessui-portal-root");if(o)return o;if(r===null)return null;let i=r.createElement("div");return i.setAttribute("id","headlessui-portal-root"),r.body.appendChild(i)});return c.useEffect(()=>{a!==null&&(r!=null&&r.body.contains(a)||r==null||r.body.appendChild(a))},[a,r]),c.useEffect(()=>{t||n!==null&&l(n.current)},[n,l,t]),a}let Vg=c.Fragment;function qg(e,t){let n=e,r=c.useRef(null),a=bn(Pg(x=>{r.current=x}),t),l=la(r),o=Kg(r),[i]=c.useState(()=>{var x;return fn.isServer?null:(x=l==null?void 0:l.createElement("div"))!=null?x:null}),u=c.useContext(Di),d=zl();return yn(()=>{!o||!i||o.contains(i)||(i.setAttribute("data-headlessui-portal",""),o.appendChild(i))},[o,i]),yn(()=>{if(i&&u)return u.register(i)},[u,i]),cp(()=>{var x;!o||!i||(i instanceof Node&&o.contains(i)&&o.removeChild(i),o.childNodes.length<=0&&((x=o.parentElement)==null||x.removeChild(o)))}),d?!o||!i?null:Ff.createPortal(sn({ourProps:{ref:a},theirProps:n,defaultTag:Vg,name:"Portal"}),i):null}let Jg=c.Fragment,pp=c.createContext(null);function Qg(e,t){let{target:n,...r}=e,a={ref:bn(t)};return Re.createElement(pp.Provider,{value:n},sn({ourProps:a,theirProps:r,defaultTag:Jg,name:"Popover.Group"}))}let Di=c.createContext(null);function Yg(){let e=c.useContext(Di),t=c.useRef([]),n=gt(l=>(t.current.push(l),e&&e.register(l),()=>r(l))),r=gt(l=>{let o=t.current.indexOf(l);o!==-1&&t.current.splice(o,1),e&&e.unregister(l)}),a=c.useMemo(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,c.useMemo(()=>function({children:l}){return Re.createElement(Di.Provider,{value:a},l)},[a])]}let Zg=an(qg),Xg=an(Qg),Mi=Object.assign(Zg,{Group:Xg});function ey(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}const ty=typeof Object.is=="function"?Object.is:ey,{useState:ny,useEffect:ry,useLayoutEffect:sy,useDebugValue:ay}=Hr;function ly(e,t,n){const r=t(),[{inst:a},l]=ny({inst:{value:r,getSnapshot:t}});return sy(()=>{a.value=r,a.getSnapshot=t,bo(a)&&l({inst:a})},[e,r,t]),ry(()=>(bo(a)&&l({inst:a}),e(()=>{bo(a)&&l({inst:a})})),[e]),ay(r),r}function bo(e){const t=e.getSnapshot,n=e.value;try{const r=t();return!ty(n,r)}catch{return!0}}function oy(e,t,n){return t()}const iy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",cy=!iy,uy=cy?oy:ly,dy="useSyncExternalStore"in Hr?(e=>e.useSyncExternalStore)(Hr):uy;function my(e){return dy(e.subscribe,e.getSnapshot,e.getSnapshot)}function fy(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(a){return r.add(a),()=>r.delete(a)},dispatch(a,...l){let o=t[a].call(n,...l);o&&(n=o,r.forEach(i=>i()))}}}function py(){let e;return{before({doc:t}){var n;let r=t.documentElement;e=((n=t.defaultView)!=null?n:window).innerWidth-r.clientWidth},after({doc:t,d:n}){let r=t.documentElement,a=r.clientWidth-r.offsetWidth,l=e-a;n.style(r,"paddingRight",`${l}px`)}}}function hy(){return tp()?{before({doc:e,d:t,meta:n}){function r(a){return n.containers.flatMap(l=>l()).some(l=>l.contains(a))}t.microTask(()=>{var a;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let i=Bl();i.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>i.dispose()))}let l=(a=window.scrollY)!=null?a:window.pageYOffset,o=null;t.addEventListener(e,"click",i=>{if(i.target instanceof HTMLElement)try{let u=i.target.closest("a");if(!u)return;let{hash:d}=new URL(u.href),x=e.querySelector(d);x&&!r(x)&&(o=x)}catch{}},!0),t.addEventListener(e,"touchstart",i=>{if(i.target instanceof HTMLElement)if(r(i.target)){let u=i.target;for(;u.parentElement&&r(u.parentElement);)u=u.parentElement;t.style(u,"overscrollBehavior","contain")}else t.style(i.target,"touchAction","none")}),t.addEventListener(e,"touchmove",i=>{if(i.target instanceof HTMLElement)if(r(i.target)){let u=i.target;for(;u.parentElement&&u.dataset.headlessuiPortal!==""&&!(u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth);)u=u.parentElement;u.dataset.headlessuiPortal===""&&i.preventDefault()}else i.preventDefault()},{passive:!1}),t.add(()=>{var i;let u=(i=window.scrollY)!=null?i:window.pageYOffset;l!==u&&window.scrollTo(0,l),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function xy(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function gy(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let ar=fy(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:Bl(),meta:new Set};return r.count++,r.meta.add(t),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let r={doc:e,d:t,meta:gy(n)},a=[hy(),py(),xy()];a.forEach(({before:l})=>l==null?void 0:l(r)),a.forEach(({after:l})=>l==null?void 0:l(r))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});ar.subscribe(()=>{let e=ar.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",a=n.count!==0;(a&&!r||!a&&r)&&ar.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&ar.dispatch("TEARDOWN",n)}});function yy(e,t,n){let r=my(ar),a=e?r.get(e):void 0,l=a?a.count>0:!1;return yn(()=>{if(!(!e||!t))return ar.dispatch("PUSH",e,n),()=>ar.dispatch("POP",e,n)},[t,e]),l}let wo=new Map,xs=new Map;function od(e,t=!0){yn(()=>{var n;if(!t)return;let r=typeof e=="function"?e():e.current;if(!r)return;function a(){var o;if(!r)return;let i=(o=xs.get(r))!=null?o:1;if(i===1?xs.delete(r):xs.set(r,i-1),i!==1)return;let u=wo.get(r);u&&(u["aria-hidden"]===null?r.removeAttribute("aria-hidden"):r.setAttribute("aria-hidden",u["aria-hidden"]),r.inert=u.inert,wo.delete(r))}let l=(n=xs.get(r))!=null?n:0;return xs.set(r,l+1),l!==0||(wo.set(r,{"aria-hidden":r.getAttribute("aria-hidden"),inert:r.inert}),r.setAttribute("aria-hidden","true"),r.inert=!0),a},[e,t])}function vy({defaultContainers:e=[],portals:t,mainTreeNodeRef:n}={}){var r;let a=c.useRef((r=n==null?void 0:n.current)!=null?r:null),l=la(a),o=gt(()=>{var i,u,d;let x=[];for(let p of e)p!==null&&(p instanceof HTMLElement?x.push(p):"current"in p&&p.current instanceof HTMLElement&&x.push(p.current));if(t!=null&&t.current)for(let p of t.current)x.push(p);for(let p of(i=l==null?void 0:l.querySelectorAll("html > *, body > *"))!=null?i:[])p!==document.body&&p!==document.head&&p instanceof HTMLElement&&p.id!=="headlessui-portal-root"&&(p.contains(a.current)||p.contains((d=(u=a.current)==null?void 0:u.getRootNode())==null?void 0:d.host)||x.some(g=>p.contains(g))||x.push(p));return x});return{resolveContainers:o,contains:gt(i=>o().some(u=>u.contains(i))),mainTreeNodeRef:a,MainTreeNode:c.useMemo(()=>function(){return n!=null?null:Re.createElement(Ii,{features:hl.Hidden,ref:a})},[a,n])}}let Fc=c.createContext(()=>{});Fc.displayName="StackContext";var Oi=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(Oi||{});function by(){return c.useContext(Fc)}function wy({children:e,onUpdate:t,type:n,element:r,enabled:a}){let l=by(),o=gt((...i)=>{t==null||t(...i),l(...i)});return yn(()=>{let i=a===void 0||a===!0;return i&&o(0,n,r),()=>{i&&o(1,n,r)}},[o,n,r,a]),Re.createElement(Fc.Provider,{value:o},e)}let hp=c.createContext(null);function xp(){let e=c.useContext(hp);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,xp),t}return e}function jy(){let[e,t]=c.useState([]);return[e.length>0?e.join(" "):void 0,c.useMemo(()=>function(n){let r=gt(l=>(t(o=>[...o,l]),()=>t(o=>{let i=o.slice(),u=i.indexOf(l);return u!==-1&&i.splice(u,1),i}))),a=c.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props}),[r,n.slot,n.name,n.props]);return Re.createElement(hp.Provider,{value:a},n.children)},[t])]}let Ny="p";function Sy(e,t){let n=ls(),{id:r=`headlessui-description-${n}`,...a}=e,l=xp(),o=bn(t);yn(()=>l.register(r),[r,l.register]);let i={ref:o,...l.props,id:r};return sn({ourProps:i,theirProps:a,slot:l.slot||{},defaultTag:Ny,name:l.name||"Description"})}let ky=an(Sy),Cy=Object.assign(ky,{});var Ey=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Ey||{}),Py=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(Py||{});let Ty={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},xl=c.createContext(null);xl.displayName="DialogContext";function oa(e){let t=c.useContext(xl);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,oa),n}return t}function Ay(e,t,n=()=>[document.body]){yy(e,t,r=>{var a;return{containers:[...(a=r.containers)!=null?a:[],n]}})}function Ry(e,t){return Wn(t.type,Ty,e,t)}let Ly="div",$y=$i.RenderStrategy|$i.Static;function Iy(e,t){let n=ls(),{id:r=`headlessui-dialog-${n}`,open:a,onClose:l,initialFocus:o,role:i="dialog",__demoMode:u=!1,...d}=e,[x,p]=c.useState(0),g=c.useRef(!1);i=function(){return i==="dialog"||i==="alertdialog"?i:(g.current||(g.current=!0,console.warn(`Invalid role [${i}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let v=$g();a===void 0&&v!==null&&(a=(v&Ns.Open)===Ns.Open);let b=c.useRef(null),y=bn(b,t),w=la(b),h=e.hasOwnProperty("open")||v!==null,f=e.hasOwnProperty("onClose");if(!h&&!f)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!h)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!f)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(typeof a!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${a}`);if(typeof l!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${l}`);let m=a?0:1,[j,k]=c.useReducer(Ry,{titleId:null,descriptionId:null,panelRef:c.createRef()}),E=gt(()=>l(!1)),$=gt(L=>k({type:0,id:L})),I=zl()?u?!1:m===0:!1,Q=x>1,q=c.useContext(xl)!==null,[B,ee]=Yg(),_={get current(){var L;return(L=j.panelRef.current)!=null?L:b.current}},{resolveContainers:D,mainTreeNodeRef:U,MainTreeNode:K}=vy({portals:B,defaultContainers:[_]}),re=Q?"parent":"leaf",N=v!==null?(v&Ns.Closing)===Ns.Closing:!1,S=q||N?!1:I,R=c.useCallback(()=>{var L,G;return(G=Array.from((L=w==null?void 0:w.querySelectorAll("body > *"))!=null?L:[]).find(z=>z.id==="headlessui-portal-root"?!1:z.contains(U.current)&&z instanceof HTMLElement))!=null?G:null},[U]);od(R,S);let C=Q?!0:I,P=c.useCallback(()=>{var L,G;return(G=Array.from((L=w==null?void 0:w.querySelectorAll("[data-headlessui-portal]"))!=null?L:[]).find(z=>z.contains(U.current)&&z instanceof HTMLElement))!=null?G:null},[U]);od(P,C),Eg(D,L=>{L.preventDefault(),E()},!(!I||Q));let V=!(Q||m!==0);op(w==null?void 0:w.defaultView,"keydown",L=>{V&&(L.defaultPrevented||L.key===lp.Escape&&(L.preventDefault(),L.stopPropagation(),E()))}),Ay(w,!(N||m!==0||q),D),c.useEffect(()=>{if(m!==0||!b.current)return;let L=new ResizeObserver(G=>{for(let z of G){let ne=z.target.getBoundingClientRect();ne.x===0&&ne.y===0&&ne.width===0&&ne.height===0&&E()}});return L.observe(b.current),()=>L.disconnect()},[m,b,E]);let[J,T]=jy(),ae=c.useMemo(()=>[{dialogState:m,close:E,setTitleId:$},j],[m,j,E,$]),O=c.useMemo(()=>({open:m===0}),[m]),F={ref:y,id:r,role:i,"aria-modal":m===0?!0:void 0,"aria-labelledby":j.titleId,"aria-describedby":J};return Re.createElement(wy,{type:"Dialog",enabled:m===0,element:b,onUpdate:gt((L,G)=>{G==="Dialog"&&Wn(L,{[Oi.Add]:()=>p(z=>z+1),[Oi.Remove]:()=>p(z=>z-1)})})},Re.createElement(Ui,{force:!0},Re.createElement(Mi,null,Re.createElement(xl.Provider,{value:ae},Re.createElement(Mi.Group,{target:b},Re.createElement(Ui,{force:!1},Re.createElement(T,{slot:O,name:"Dialog.Description"},Re.createElement(hs,{initialFocus:o,containers:D,features:I?Wn(re,{parent:hs.features.RestoreFocus,leaf:hs.features.All&~hs.features.FocusLock}):hs.features.None},Re.createElement(ee,null,sn({ourProps:F,theirProps:d,slot:O,defaultTag:Ly,features:$y,visible:m===0,name:"Dialog"}))))))))),Re.createElement(K,null))}let Uy="div";function Dy(e,t){let n=ls(),{id:r=`headlessui-dialog-overlay-${n}`,...a}=e,[{dialogState:l,close:o}]=oa("Dialog.Overlay"),i=bn(t),u=gt(x=>{if(x.target===x.currentTarget){if(Ug(x.currentTarget))return x.preventDefault();x.preventDefault(),x.stopPropagation(),o()}}),d=c.useMemo(()=>({open:l===0}),[l]);return sn({ourProps:{ref:i,id:r,"aria-hidden":!0,onClick:u},theirProps:a,slot:d,defaultTag:Uy,name:"Dialog.Overlay"})}let My="div";function Oy(e,t){let n=ls(),{id:r=`headlessui-dialog-backdrop-${n}`,...a}=e,[{dialogState:l},o]=oa("Dialog.Backdrop"),i=bn(t);c.useEffect(()=>{if(o.panelRef.current===null)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")},[o.panelRef]);let u=c.useMemo(()=>({open:l===0}),[l]);return Re.createElement(Ui,{force:!0},Re.createElement(Mi,null,sn({ourProps:{ref:i,id:r,"aria-hidden":!0},theirProps:a,slot:u,defaultTag:My,name:"Dialog.Backdrop"})))}let Fy="div";function _y(e,t){let n=ls(),{id:r=`headlessui-dialog-panel-${n}`,...a}=e,[{dialogState:l},o]=oa("Dialog.Panel"),i=bn(t,o.panelRef),u=c.useMemo(()=>({open:l===0}),[l]),d=gt(x=>{x.stopPropagation()});return sn({ourProps:{ref:i,id:r,onClick:d},theirProps:a,slot:u,defaultTag:Fy,name:"Dialog.Panel"})}let By="h2";function zy(e,t){let n=ls(),{id:r=`headlessui-dialog-title-${n}`,...a}=e,[{dialogState:l,setTitleId:o}]=oa("Dialog.Title"),i=bn(t);c.useEffect(()=>(o(r),()=>o(null)),[r,o]);let u=c.useMemo(()=>({open:l===0}),[l]);return sn({ourProps:{ref:i,id:r},theirProps:a,slot:u,defaultTag:By,name:"Dialog.Title"})}let Wy=an(Iy),Gy=an(Oy),Hy=an(_y),Ky=an(Dy),Vy=an(zy),ur=Object.assign(Wy,{Backdrop:Gy,Panel:Hy,Overlay:Ky,Title:Vy,Description:Cy});const gp=c.createContext(void 0);function qy(e){return e.includes("admin")?"superadmin":e.includes("manager")?"manager":e.includes("user")?"user":"guest"}function id(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Jy=({children:e})=>{const[t,n]=c.useState(null),[r,a]=c.useState(!0),l=Re.useCallback(async()=>{const u=id();if(!u){a(!1);return}try{const d=window;if(!d.auth||typeof d.auth.getAccessToken!="function"){a(!1);return}await new Promise(w=>{d.auth.isAuthenticated(h=>{if(!h){n(null),a(!1),w();return}w()})});const x=await new Promise(w=>{window.auth.getAccessToken(h=>w(h))});if(!x){n(null),a(!1);return}const p=await fetch(`${u}/me`,{headers:{Authorization:`Bearer ${x}`}});if(!p.ok){n(null),a(!1);return}const g=await p.json(),v=Array.isArray(g.groups)?g.groups.map(String):[],b=qy(v),y=Array.isArray(g.customGroups)?g.customGroups.map(String):[];n({userId:String(g.userId||""),email:String(g.email||""),groups:v,role:b,customGroups:y})}catch{n(null)}finally{a(!1)}},[]);c.useEffect(()=>{l()},[l]);const o=Re.useCallback(async()=>{id()&&await l()},[l]),i=()=>{const u=window;u.auth&&typeof u.auth.signOut=="function"&&u.auth.signOut(),n(null)};return s.jsx(gp.Provider,{value:{user:t,isLoading:r,signOut:i,refreshAuth:o},children:e})};function ze(){const e=c.useContext(gp);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}function Be(e,t){if(t==="guest")return!0;if(!e)return!1;const n=["guest","user","manager","superadmin"];return n.indexOf(e.role)>=n.indexOf(t)}function gl(e){return e!=null&&e.userId?e.role==="superadmin"?!0:(e.customGroups??[]).includes("Squash"):!1}function yl(e){return e!=null&&e.userId?e.role==="superadmin"?!0:e.role!=="manager"?!1:(e.customGroups??[]).includes("Squash"):!1}function yp(e){return e!=null&&e.userId?e.role==="superadmin"?!0:(e.customGroups??[]).includes("Financial"):!1}function vl(e){return e!=null&&e.userId?e.role==="superadmin"?!0:e.role!=="manager"?!1:(e.customGroups??[]).includes("Financial"):!1}function xr(e){return e!=null&&e.userId?e.role==="superadmin"?!0:(e.customGroups??[]).includes("Memes"):!1}const vp=c.createContext(void 0);function Qy(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Yy=({children:e})=>{const[t,n]=c.useState(null);return c.useEffect(()=>{const r=Qy();if(!r)return;let a=!1;return(async()=>{try{const l=await fetch(`${r}/branding/logo`);if(!l.ok||!(l.headers.get("Content-Type")||"").includes("application/json"))return;const i=await l.json();if(a)return;i&&i.url&&n({url:String(i.url),alt:String(i.alt||"Funkedupshift")})}catch{}})(),()=>{a=!0}},[]),s.jsx(vp.Provider,{value:{logo:t},children:e})};function bp(){const e=c.useContext(vp);if(!e)throw new Error("useBranding must be used within BrandingProvider");return e}const Zy=()=>{const{user:e}=ze(),t=gl(e),n=xr(e);return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("section",{className:"relative overflow-hidden rounded-2xl border border-slate-800 bg-gradient-to-br from-brand-orange/20 via-brand-navy/10 to-brand-teal/20 px-6 py-10",children:[s.jsxs("div",{className:"max-w-xl space-y-4",children:[s.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-slate-200",children:"Shared internet intelligence"}),s.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold tracking-tight text-slate-50",children:"Discover, rate, and enrich the sites that matter."}),s.jsx("p",{className:"text-sm text-slate-100/80",children:"Funkedupshift is a living index of websites, media, and experiments  curated by admins, enriched by everyone."}),s.jsxs("div",{className:"flex flex-wrap gap-3 pt-2",children:[s.jsx(oe,{to:"/websites",className:"inline-flex items-center rounded-full border border-slate-500/60 px-4 py-2 text-sm font-semibold text-slate-100 hover:border-slate-300/80",children:"Browse websites"}),s.jsx(oe,{to:"/media",className:"inline-flex items-center rounded-full border border-slate-500/60 px-4 py-2 text-sm font-semibold text-slate-100 hover:border-slate-300/80",children:"Explore media"}),s.jsx(oe,{to:"/internet-dashboard",className:"inline-flex items-center rounded-full border border-slate-500/60 px-4 py-2 text-sm font-semibold text-slate-100 hover:border-slate-300/80",children:"Internet Dashboard"}),t&&s.jsx(oe,{to:"/squash",className:"inline-flex items-center rounded-full border border-slate-500/60 px-4 py-2 text-sm font-semibold text-slate-100 hover:border-slate-300/80",children:"Squash"}),n&&s.jsx(oe,{to:"/memes",className:"inline-flex items-center rounded-full border border-slate-500/60 px-4 py-2 text-sm font-semibold text-slate-100 hover:border-slate-300/80",children:"Memes"})]})]}),s.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 w-1/2 opacity-60",children:s.jsx("div",{className:"absolute -inset-24 bg-[radial-gradient(circle_at_top,_#f97316_0,_transparent_55%),radial-gradient(circle_at_bottom,_#06d6a0_0,_transparent_55%)]"})})]}),s.jsxs("section",{className:"grid gap-4 sm:grid-cols-3",children:[s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.22em] text-slate-500 mb-2",children:"Everyone"}),s.jsx("p",{className:"text-sm text-slate-200",children:"Browse all sites and media without signing in. Ratings and metadata are public by design."})]}),s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.22em] text-slate-500 mb-2",children:"Users"}),s.jsx("p",{className:"text-sm text-slate-200",children:"Sign in to rate sites, add notes, and personalize your view of the internet."})]}),s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.22em] text-slate-500 mb-2",children:"Admins"}),s.jsx("p",{className:"text-sm text-slate-200",children:"Curate the corpus, manage categories and groups, and control branding from a single admin surface."})]})]})]})};function jo(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const No=10,Xy=()=>{const{user:e}=ze(),[t,n]=Zt(),[r,a]=c.useState([]),[l,o]=c.useState(()=>t.get("q")??""),[i,u]=c.useState(()=>{const N=t.get("categoryIds");return N?N.split(",").filter(Boolean):[]}),[d,x]=c.useState(()=>t.get("categoryMode")==="or"?"or":"and"),[p,g]=c.useState(!1),[v,b]=c.useState(""),[y,w]=c.useState("avgDesc"),[h,f]=c.useState(1),[m,j]=c.useState(!1),[k,E]=c.useState(null),$=!!e,I=c.useRef(null),[Q,q]=c.useState([]);c.useEffect(()=>{const N=jo();if(!N)return;let S=!1;return fetch(`${N}/categories`).then(R=>R.ok?R.json():Promise.reject(new Error("Failed to load categories"))).then(R=>{if(S)return;const C=(R.categories??[]).map(P=>({id:P.PK||P.id||"",name:P.name||P.PK||""}));C.sort((P,Y)=>(P.name||"").localeCompare(Y.name||"")),q(C)}).catch(()=>{}),()=>{S=!0}},[]);const B=c.useMemo(()=>{if(d==="or"&&Q.length>0)return Q;const N=new Map;r.forEach(R=>(R.categories||[]).forEach(C=>{C.id&&!N.has(C.id)&&N.set(C.id,C)}));const S=[...Q];return N.forEach(R=>{S.some(C=>C.id===R.id)||S.push(R)}),S.sort((R,C)=>(R.name||"").localeCompare(C.name||"")),S},[Q,d,r]),ee=c.useMemo(()=>B.filter(N=>!i.includes(N.id)&&(!v.trim()||(N.name||"").toLowerCase().includes(v.toLowerCase()))),[B,i,v]),_=l.trim().length>0||i.length>0;c.useEffect(()=>{if(_){const N=new URLSearchParams;l.trim()&&N.set("q",l.trim()),i.length&&(N.set("categoryIds",i.join(",")),N.set("categoryMode",d)),n(N,{replace:!0})}else n({},{replace:!0})},[_,l,i,d,n]),c.useEffect(()=>{if(!_){a([]),f(1),j(!1),E(null);return}const N=jo();if(!N){E("API URL not set. Deploy via CI or set window.API_BASE_URL in config.js.");return}let S=!1;async function R(){j(!0),E(null);try{const C=new URLSearchParams;C.set("limit","100"),l.trim()&&C.set("q",l.trim()),i.length>0&&(C.set("categoryIds",i.join(",")),C.set("categoryMode",d));const P=await fetch(`${N}/sites?${C.toString()}`);if(!P.ok){const V=await P.text();throw new Error(`HTTP ${P.status}: ${V}`)}const Y=await P.json();if(S)return;a(Y.sites??[]),f(1)}catch(C){S||E((C==null?void 0:C.message)??"Failed to load sites.")}finally{S||j(!1)}}return R(),()=>{S=!0}},[_,l,i,d]),c.useEffect(()=>{function N(S){I.current&&!I.current.contains(S.target)&&g(!1)}if(p)return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[p]);const D=c.useMemo(()=>{const N=[...r];return N.sort((S,R)=>{const C=(S.title||S.url||S.PK||"").toLowerCase(),P=(R.title||R.url||R.PK||"").toLowerCase(),Y=typeof S.averageRating=="number"?S.averageRating:0,V=typeof R.averageRating=="number"?R.averageRating:0;return y==="avgDesc"?V!==Y?V-Y:C.localeCompare(P):y==="avgAsc"?Y!==V?Y-V:C.localeCompare(P):y==="alphaAsc"?C.localeCompare(P):y==="alphaDesc"?P.localeCompare(C):0}),N},[r,y]),U=Math.max(1,Math.ceil(D.length/No)),K=D.slice((h-1)*No,h*No),re=async(N,S)=>{const R=jo();if(!R)return;const C=window;if(!C.auth||typeof C.auth.getAccessToken!="function")return;const P=await new Promise(Y=>{C.auth.getAccessToken(V=>Y(V))});P&&await fetch(`${R}/stars`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${P}`},body:JSON.stringify({siteId:N,rating:S})}).catch(()=>{})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Websites"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Browse curated sites, see ratings, and jump straight into the interesting corners of the internet."})]}),s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-4","aria-label":"Search and filter",children:[s.jsxs("form",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",onSubmit:N=>{N.preventDefault(),o(l.trim())},children:[s.jsx("input",{type:"text",value:l,onChange:N=>o(N.target.value),placeholder:"Search sites (title, URL, description)",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("button",{type:"submit",className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500",children:"Search"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-4 sm:gap-6",children:[s.jsxs("div",{ref:I,className:"relative flex-shrink-0 min-w-0 max-w-sm",children:[s.jsx("label",{htmlFor:"website-category-filter",className:"block text-xs font-medium text-slate-400 mb-1",children:"Categories (filter by)"}),s.jsx("input",{id:"website-category-filter",type:"text",value:v,onChange:N=>b(N.target.value),onFocus:()=>g(!0),placeholder:"Search and select categories",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",autoComplete:"off"}),p&&s.jsx("div",{className:"absolute left-0 top-full z-10 mt-1 w-full max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",role:"listbox","aria-label":"Category options",children:ee.length>0?ee.map(N=>s.jsx("button",{type:"button",role:"option",onClick:()=>{u(S=>S.includes(N.id)?S:[...S,N.id]),b("")},className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:N.name},N.id)):s.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:B.length===0?"No categories yet.":"No matches or all selected."})}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:i.map(N=>{const S=B.find(R=>R.id===N);return s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(S==null?void 0:S.name)??N,s.jsx("button",{type:"button",onClick:()=>u(R=>R.filter(C=>C!==N)),className:"hover:text-red-400","aria-label":"Remove category filter",children:""})]},N)})}),i.length>0&&s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-slate-500",children:"Match:"}),s.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[s.jsx("button",{type:"button",onClick:()=>x("and"),className:`rounded px-2 py-0.5 text-xs font-medium ${d==="and"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"AND"}),s.jsx("button",{type:"button",onClick:()=>x("or"),className:`rounded px-2 py-0.5 text-xs font-medium ${d==="or"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"OR"})]})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-3 items-center text-xs text-slate-400",children:[s.jsx("span",{className:"font-medium text-slate-200",children:"Sort:"}),s.jsxs("select",{value:y,onChange:N=>{w(N.target.value),f(1)},className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",children:[s.jsx("option",{value:"avgDesc",children:"Avg stars (high first)"}),s.jsx("option",{value:"avgAsc",children:"Avg stars (low first)"}),s.jsx("option",{value:"alphaAsc",children:"Title AZ"}),s.jsx("option",{value:"alphaDesc",children:"Title ZA"})]}),s.jsx("span",{className:"text-slate-500",children:_?D.length===0?"No sites found.":`${D.length} sites`:""})]})]})]}),k&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:k}),_?m?s.jsx("div",{className:"text-sm text-slate-400",children:"Loading sites"}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"rounded-md border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm text-slate-400",children:D.length===0?"No results":`${D.length} results`}),s.jsx("ul",{className:"space-y-2 mt-2",children:K.map(N=>{const S=N.title||N.url||N.PK||"Untitled",R=N.logoUrl;return s.jsxs("li",{className:"flex gap-3 rounded-xl border border-slate-800 bg-slate-950/60 p-3",children:[s.jsx("div",{className:"h-12 w-12 flex-shrink-0 overflow-hidden rounded-lg border border-slate-700 bg-slate-900",children:R?s.jsx("img",{src:R,alt:"",className:"h-full w-full object-cover",onError:C=>{C.currentTarget.style.visibility="hidden"}}):null}),s.jsxs("div",{className:"min-w-0 flex-1 space-y-1",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("h2",{className:"truncate text-sm font-semibold text-slate-50",children:s.jsx(oe,{to:`/websites/${encodeURIComponent(N.PK)}`,className:"hover:text-brand-orange",children:S})}),typeof N.averageRating=="number"&&s.jsxs("span",{className:"inline-flex items-center rounded-full bg-slate-900 px-2 py-0.5 text-[11px] text-amber-300",children:[N.averageRating.toFixed(1),""]})]}),N.url&&s.jsx("a",{href:N.url,target:"_blank",rel:"noopener noreferrer",className:"block truncate text-xs text-slate-400 hover:text-slate-200",children:N.url}),N.description&&s.jsxs("p",{className:"text-xs text-slate-300 line-clamp-3",children:[N.description,N.descriptionAiGenerated&&s.jsx("span",{className:"ml-1 text-[11px] uppercase tracking-wide text-slate-500",children:"AI summary"})]}),N.categories&&N.categories.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1 pt-1",children:N.categories.map(C=>s.jsx("span",{className:"rounded-full bg-slate-900 px-2 py-0.5 text-[11px] text-slate-300",children:C.name},C.id))}),$&&s.jsx("div",{className:"pt-1",children:s.jsxs("label",{className:"inline-flex items-center gap-1 text-[11px] text-slate-400",children:[s.jsx("span",{children:"Rate:"}),s.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-1 py-0.5 text-[11px] text-slate-50",onChange:C=>{const P=Number(C.target.value);P>=1&&P<=5&&re(N.PK,P)},defaultValue:"",children:[s.jsx("option",{value:"",children:"--"}),s.jsx("option",{value:"1",children:"1"}),s.jsx("option",{value:"2",children:"2"}),s.jsx("option",{value:"3",children:"3"}),s.jsx("option",{value:"4",children:"4"}),s.jsx("option",{value:"5",children:"5"})]})]})})]})]},N.PK)})})]}):s.jsx("div",{className:"flex items-center justify-center min-h-[280px]",children:s.jsx("p",{className:"text-2xl sm:text-3xl font-light text-slate-500/80 tracking-wide animate-pulse",children:"Enter search term or select categories"})}),_&&U>1&&s.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-center gap-2 text-xs",children:[s.jsx("button",{type:"button",disabled:h<=1,onClick:()=>f(N=>Math.max(1,N-1)),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 disabled:opacity-40",children:"Prev"}),s.jsxs("span",{className:"text-slate-500",children:["Page ",h," of ",U]}),s.jsx("button",{type:"button",disabled:h>=U,onClick:()=>f(N=>Math.min(U,N+1)),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 disabled:opacity-40",children:"Next"})]})]})};function So(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const ev=()=>{var v,b;const{id:e}=as(),{user:t}=ze(),n=Be(t??null,"manager"),[r,a]=c.useState(null),[l,o]=c.useState(null),[i,u]=c.useState(!0),[d,x]=c.useState(null);c.useEffect(()=>{const y=So();if(!y||!e){x(e?"API URL not set.":"Missing site id."),u(!1);return}let w=!1;async function h(){u(!0),x(null);try{const f=new URLSearchParams;f.set("id",decodeURIComponent(e));const m=await fetch(`${y}/sites?${f.toString()}`);if(m.status===404){w||a(null);return}if(!m.ok){const k=await m.text();throw new Error(`HTTP ${m.status}: ${k}`)}const j=await m.json();if(w)return;a(j.site??null)}catch(f){w||x((f==null?void 0:f.message)??"Failed to load site.")}finally{w||u(!1)}}return h(),()=>{w=!0}},[e]),c.useEffect(()=>{if(!t||!(r!=null&&r.PK))return;const y=So();if(!y)return;const w=window;if(!w.auth||typeof w.auth.getAccessToken!="function")return;let h=!1;return(async()=>{const f=await new Promise(j=>{w.auth.getAccessToken(k=>j(k))});if(!f||h)return;const m=await fetch(`${y}/stars?siteId=${encodeURIComponent(r.PK)}`,{headers:{Authorization:`Bearer ${f}`}});if(!h&&m.ok){const j=await m.json();o(typeof j.rating=="number"?j.rating:null)}})(),()=>{h=!0}},[t,r==null?void 0:r.PK]);const p=async(y,w)=>{const h=So();if(!h)return;const f=window;if(!f.auth||typeof f.auth.getAccessToken!="function")return;const m=await new Promise(j=>{f.auth.getAccessToken(k=>j(k))});m&&await fetch(`${h}/stars`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${m}`},body:JSON.stringify({siteId:y,rating:w})}).then(()=>o(w)).catch(()=>{})};if(i)return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(oe,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(_e,{className:"h-4 w-4"}),"Back to Websites"]}),s.jsx("div",{className:"text-sm text-slate-400",children:"Loading"})]});if(d||!r)return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(oe,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(_e,{className:"h-4 w-4"}),"Back to Websites"]}),s.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:d||"Site not found."})]});const g=r.title||r.url||r.PK||"Untitled";return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsxs(oe,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(_e,{className:"h-4 w-4"}),"Back to Websites"]}),n&&r&&s.jsxs(oe,{to:`/admin/sites/edit/${encodeURIComponent(r.PK)}`,className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(aa,{className:"h-4 w-4"}),"Edit site"]})]}),s.jsxs("article",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 sm:p-6",children:[s.jsxs("header",{className:"flex flex-wrap gap-4",children:[s.jsx("div",{className:"h-16 w-16 flex-shrink-0 overflow-hidden rounded-lg border border-slate-700 bg-slate-900",children:r.logoUrl?s.jsx("img",{src:r.logoUrl,alt:"",className:"h-full w-full object-cover",onError:y=>{y.currentTarget.style.visibility="hidden"}}):null}),s.jsxs("div",{className:"min-w-0 flex-1 space-y-1",children:[s.jsx("h1",{className:"text-xl font-semibold tracking-tight text-slate-50",children:g}),typeof r.averageRating=="number"&&s.jsxs("span",{className:"inline-flex items-center rounded-full bg-slate-800 px-2 py-0.5 text-sm text-amber-300",children:[r.averageRating.toFixed(1)," average"]}),r.url&&s.jsx("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:"block truncate text-sm text-slate-400 hover:text-slate-200",children:r.url})]})]}),r.description&&s.jsx("div",{className:"mt-4",children:s.jsxs("p",{className:"text-sm text-slate-300",children:[r.description,r.descriptionAiGenerated&&s.jsx("span",{className:"ml-1 text-xs uppercase tracking-wide text-slate-500",children:"AI summary"})]})}),(((v=r.categories)==null?void 0:v.length)??0)>0&&s.jsx("div",{className:"mt-3 flex flex-wrap gap-1",children:r.categories.map(y=>s.jsx("span",{className:"rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-300",children:y.name},y.id))}),(((b=r.tags)==null?void 0:b.length)??0)>0&&s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:r.tags.map(y=>s.jsx("span",{className:"rounded-full bg-slate-900 px-2 py-0.5 text-xs text-slate-400",children:y},y))}),t&&s.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3",children:[l!==null&&s.jsxs("span",{className:"text-xs text-slate-400",children:["Your rating: ",l,""]}),s.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-400",children:[s.jsx("span",{children:"Rate:"}),s.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-2 py-1 text-sm text-slate-50",value:l??"",onChange:y=>{const w=Number(y.target.value);w>=1&&w<=5&&p(r.PK,w)},children:[s.jsx("option",{value:"",children:"--"}),s.jsx("option",{value:"1",children:"1"}),s.jsx("option",{value:"2",children:"2"}),s.jsx("option",{value:"3",children:"3"}),s.jsx("option",{value:"4",children:"4"}),s.jsx("option",{value:"5",children:"5"})]})]})]}),r.scrapedContent&&s.jsxs("section",{className:"mt-6 border-t border-slate-800 pt-4",children:[s.jsx("h2",{className:"text-sm font-medium text-slate-400",children:"About / Scraped content"}),s.jsx("div",{className:"mt-2 overflow-x-auto rounded-lg border border-slate-800 bg-slate-900/60 p-3",children:s.jsx("pre",{className:"whitespace-pre-wrap break-words font-sans text-sm text-slate-300",children:r.scrapedContent})})]})]})]})};function ko(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Co=10,tv=()=>{const{user:e}=ze(),[t,n]=Zt(),[r,a]=c.useState([]),[l,o]=c.useState(()=>t.get("q")??""),[i,u]=c.useState(()=>{const S=t.get("categoryIds");return S?S.split(",").filter(Boolean):[]}),[d,x]=c.useState(()=>t.get("categoryMode")==="or"?"or":"and"),[p,g]=c.useState(!1),[v,b]=c.useState(""),[y,w]=c.useState("avgDesc"),[h,f]=c.useState(1),[m,j]=c.useState(!1),[k,E]=c.useState(null),$=!!e,I=Be(e??null,"manager"),Q=c.useRef(null),[q,B]=c.useState([]);c.useEffect(()=>{const S=ko();if(!S)return;let R=!1;return fetch(`${S}/media-categories`).then(C=>C.ok?C.json():Promise.reject(new Error("Failed to load categories"))).then(C=>{if(R)return;const P=(C.categories??[]).map(Y=>({id:Y.PK||Y.id||"",name:Y.name||Y.PK||""}));P.sort((Y,V)=>(Y.name||"").localeCompare(V.name||"")),B(P)}).catch(()=>{}),()=>{R=!0}},[]);const ee=c.useMemo(()=>{if(d==="or"&&q.length>0)return q;const S=new Map;r.forEach(C=>(C.categories||[]).forEach(P=>{P.id&&!S.has(P.id)&&S.set(P.id,P)}));const R=[...q];return S.forEach(C=>{R.some(P=>P.id===C.id)||R.push(C)}),R.sort((C,P)=>(C.name||"").localeCompare(P.name||"")),R},[q,d,r]),_=c.useMemo(()=>ee.filter(S=>!i.includes(S.id)&&(!v.trim()||(S.name||"").toLowerCase().includes(v.toLowerCase()))),[ee,i,v]),D=l.trim().length>0||i.length>0;c.useEffect(()=>{if(D){const S=new URLSearchParams;l.trim()&&S.set("q",l.trim()),i.length&&(S.set("categoryIds",i.join(",")),S.set("categoryMode",d)),n(S,{replace:!0})}else n({},{replace:!0})},[D,l,i,d,n]),c.useEffect(()=>{if(!D){a([]),f(1),j(!1),E(null);return}const S=ko();if(!S){E("API URL not set. Deploy via CI or set window.API_BASE_URL in config.js.");return}let R=!1;async function C(){j(!0),E(null);try{const P=new URLSearchParams;P.set("limit","100"),l.trim()&&P.set("q",l.trim()),i.length>0&&(P.set("categoryIds",i.join(",")),P.set("categoryMode",d));const Y=await fetch(`${S}/media?${P.toString()}`);if(!Y.ok){const M=await Y.text();throw new Error(`HTTP ${Y.status}: ${M}`)}const V=await Y.json();if(R)return;a(V.media??[]),f(1)}catch(P){R||E((P==null?void 0:P.message)??"Failed to load media.")}finally{R||j(!1)}}return C(),()=>{R=!0}},[D,l,i,d]),c.useEffect(()=>{function S(R){Q.current&&!Q.current.contains(R.target)&&g(!1)}if(p)return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[p]);const U=c.useMemo(()=>{const S=[...r];return S.sort((R,C)=>{const P=(R.title||R.PK||"").toLowerCase(),Y=(C.title||C.PK||"").toLowerCase(),V=typeof R.averageRating=="number"?R.averageRating:0,M=typeof C.averageRating=="number"?C.averageRating:0;return y==="avgDesc"?M!==V?M-V:P.localeCompare(Y):y==="avgAsc"?V!==M?V-M:P.localeCompare(Y):y==="alphaAsc"?P.localeCompare(Y):y==="alphaDesc"?Y.localeCompare(P):0}),S},[r,y]),K=Math.max(1,Math.ceil(U.length/Co)),re=U.slice((h-1)*Co,h*Co),N=async(S,R)=>{const C=ko();if(!C)return;const P=window;if(!P.auth||typeof P.auth.getAccessToken!="function")return;const Y=await new Promise(V=>{P.auth.getAccessToken(M=>V(M))});Y&&await fetch(`${C}/media/stars`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Y}`},body:JSON.stringify({mediaId:S,rating:R})}).catch(()=>{})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Media"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Images and videos attached to sites and experiments across Funkedupshift."})]}),s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-4","aria-label":"Search and filter",children:[s.jsxs("form",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",onSubmit:S=>{S.preventDefault(),o(l.trim())},children:[s.jsx("input",{type:"text",value:l,onChange:S=>o(S.target.value),placeholder:"Search media by title or description",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("button",{type:"submit",className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500",children:"Search"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-4 sm:gap-6",children:[s.jsxs("div",{ref:Q,className:"relative flex-shrink-0 min-w-0 max-w-sm",children:[s.jsx("label",{htmlFor:"media-category-filter",className:"block text-xs font-medium text-slate-400 mb-1",children:"Categories (filter by)"}),s.jsx("input",{id:"media-category-filter",type:"text",value:v,onChange:S=>b(S.target.value),onFocus:()=>g(!0),placeholder:"Search and select categories",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",autoComplete:"off"}),p&&s.jsx("div",{className:"absolute left-0 top-full z-10 mt-1 w-full max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",role:"listbox","aria-label":"Category options",children:_.length>0?_.map(S=>s.jsx("button",{type:"button",role:"option",onClick:()=>{u(R=>R.includes(S.id)?R:[...R,S.id]),b("")},className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:S.name},S.id)):s.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:ee.length===0?"No categories yet.":"No matches or all selected."})}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:i.map(S=>{const R=ee.find(C=>C.id===S);return s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(R==null?void 0:R.name)??S,s.jsx("button",{type:"button",onClick:()=>u(C=>C.filter(P=>P!==S)),className:"hover:text-red-400","aria-label":"Remove category filter",children:""})]},S)})}),i.length>0&&s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-slate-500",children:"Match:"}),s.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[s.jsx("button",{type:"button",onClick:()=>x("and"),className:`rounded px-2 py-0.5 text-xs font-medium ${d==="and"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"AND"}),s.jsx("button",{type:"button",onClick:()=>x("or"),className:`rounded px-2 py-0.5 text-xs font-medium ${d==="or"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"OR"})]})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-3 items-center text-xs text-slate-400",children:[s.jsx("span",{className:"font-medium text-slate-200",children:"Sort:"}),s.jsxs("select",{value:y,onChange:S=>{w(S.target.value),f(1)},className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",children:[s.jsx("option",{value:"avgDesc",children:"Avg stars (high first)"}),s.jsx("option",{value:"avgAsc",children:"Avg stars (low first)"}),s.jsx("option",{value:"alphaAsc",children:"Title AZ"}),s.jsx("option",{value:"alphaDesc",children:"Title ZA"})]}),s.jsx("span",{className:"text-slate-500",children:D?U.length===0?"No media found.":`${U.length} items`:""})]})]})]}),k&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:k}),D?m?s.jsx("div",{className:"text-sm text-slate-400",children:"Loading media"}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"rounded-md border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm text-slate-400",children:U.length===0?"No results":`${U.length} results`}),s.jsx("ul",{className:"space-y-3 mt-2",children:re.map(S=>{const R=S.thumbnailUrl||(S.mediaType==="image"?S.mediaUrl:void 0),C=S.title||S.PK||"Untitled",P=S.mediaType==="video"?"Video":"Image",Y=`/media/${encodeURIComponent(S.PK)}`;return s.jsxs("li",{className:"flex gap-3 rounded-xl border border-slate-800 bg-slate-950/60 p-3",children:[s.jsx(oe,{to:Y,className:"h-16 w-24 flex-shrink-0 overflow-hidden rounded-lg border border-slate-700 bg-slate-900 flex items-center justify-center text-xl hover:border-slate-600",children:R?s.jsx("img",{src:R,alt:"",className:"h-full w-full object-cover",onError:V=>{V.currentTarget.style.visibility="hidden"}}):s.jsx("span",{children:S.mediaType==="video"?"":""})}),s.jsxs("div",{className:"min-w-0 flex-1 space-y-1",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("h2",{className:"truncate text-sm font-semibold text-slate-50",children:s.jsx(oe,{to:Y,className:"hover:text-brand-orange",children:C})}),typeof S.averageRating=="number"&&s.jsxs("span",{className:"inline-flex items-center rounded-full bg-slate-900 px-2 py-0.5 text-[11px] text-amber-300",children:[S.averageRating.toFixed(1),""]}),s.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-900 px-2 py-0.5 text-[10px] uppercase tracking-wide text-slate-400",children:P})]}),S.description&&s.jsx("p",{className:"text-xs text-slate-300 line-clamp-3",children:S.description}),S.categories&&S.categories.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1 pt-1",children:S.categories.map(V=>s.jsx("span",{className:"rounded-full bg-slate-900 px-2 py-0.5 text-[11px] text-slate-300",children:V.name},V.id))}),I&&s.jsx("div",{className:"pt-1",children:s.jsxs(oe,{to:`/admin/media/edit/${encodeURIComponent(S.PK)}`,className:"inline-flex items-center gap-1 text-[11px] text-slate-400 hover:text-slate-200",children:[s.jsx(aa,{className:"h-3.5 w-3.5"}),"Edit"]})}),$&&s.jsx("div",{className:"pt-1",children:s.jsxs("label",{className:"inline-flex items-center gap-1 text-[11px] text-slate-400",children:[s.jsx("span",{children:"Rate:"}),s.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-1 py-0.5 text-[11px] text-slate-50",onChange:V=>{const M=Number(V.target.value);M>=1&&M<=5&&N(S.PK,M)},defaultValue:"",children:[s.jsx("option",{value:"",children:"--"}),s.jsx("option",{value:"1",children:"1"}),s.jsx("option",{value:"2",children:"2"}),s.jsx("option",{value:"3",children:"3"}),s.jsx("option",{value:"4",children:"4"}),s.jsx("option",{value:"5",children:"5"})]})]})})]})]},S.PK)})})]}):s.jsx("div",{className:"flex items-center justify-center min-h-[280px]",children:s.jsx("p",{className:"text-2xl sm:text-3xl font-light text-slate-500/80 tracking-wide animate-pulse",children:"Enter search term or select categories"})}),D&&K>1&&s.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-center gap-2 text-xs",children:[s.jsx("button",{type:"button",disabled:h<=1,onClick:()=>f(S=>Math.max(1,S-1)),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 disabled:opacity-40",children:"Prev"}),s.jsxs("span",{className:"text-slate-500",children:["Page ",h," of ",K]}),s.jsx("button",{type:"button",disabled:h>=K,onClick:()=>f(S=>Math.min(K,S+1)),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 disabled:opacity-40",children:"Next"})]})]})};function cd(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const nv=()=>{var y;const{id:e}=as(),{user:t}=ze(),[n,r]=c.useState(null),[a,l]=c.useState(null),[o,i]=c.useState(!0),[u,d]=c.useState(null),x=Be(t??null,"manager"),p=e?decodeURIComponent(e):"";c.useEffect(()=>{const w=cd();if(!w||!p){d(p?"API URL not set.":"Missing media id."),i(!1);return}let h=!1;async function f(){i(!0),d(null);try{const m=await fetch(`${w}/media?id=${encodeURIComponent(p)}`);if(m.status===404){h||r(null);return}if(!m.ok){const E=await m.text();throw new Error(`HTTP ${m.status}: ${E}`)}const j=await m.json();if(h)return;const k=Array.isArray(j.media)?j.media[0]:j.media;r(k??null)}catch(m){h||d((m==null?void 0:m.message)??"Failed to load media.")}finally{h||i(!1)}}return f(),()=>{h=!0}},[p]);const g=async w=>{var j;const h=cd();if(!h||!n)return;const f=window;if(!((j=f.auth)!=null&&j.getAccessToken))return;const m=await new Promise(k=>f.auth.getAccessToken(k));m&&await fetch(`${h}/media/stars`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${m}`},body:JSON.stringify({mediaId:n.PK,rating:w})}).then(()=>l(w)).catch(()=>{})};if(o)return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(oe,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(_e,{className:"h-4 w-4"}),"Back to Media"]}),s.jsx("div",{className:"text-sm text-slate-400",children:"Loading"})]});if(u||!n)return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(oe,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(_e,{className:"h-4 w-4"}),"Back to Media"]}),s.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:u||"Media not found."})]});const v=n.title||n.PK||"Untitled",b=n.mediaType==="video";return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsxs(oe,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(_e,{className:"h-4 w-4"}),"Back to Media"]}),x&&s.jsxs(oe,{to:`/admin/media/edit/${encodeURIComponent(n.PK)}`,className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(aa,{className:"h-4 w-4"}),"Edit"]})]}),s.jsxs("article",{className:"rounded-xl border border-slate-800 bg-slate-950/60 overflow-hidden",children:[s.jsxs("header",{className:"p-4 sm:p-6 border-b border-slate-800",children:[s.jsx("h1",{className:"text-xl font-semibold tracking-tight text-slate-50",children:v}),s.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[typeof n.averageRating=="number"&&s.jsxs("span",{className:"inline-flex items-center rounded-full bg-slate-800 px-2 py-0.5 text-sm text-amber-300",children:[n.averageRating.toFixed(1)," average"]}),s.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-800 px-2 py-0.5 text-xs uppercase tracking-wide text-slate-400",children:b?"Video":"Image"})]}),n.description&&s.jsx("p",{className:"mt-3 text-sm text-slate-300",children:n.description}),(((y=n.categories)==null?void 0:y.length)??0)>0&&s.jsx("div",{className:"mt-3 flex flex-wrap gap-1",children:n.categories.map(w=>s.jsx("span",{className:"rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-300",children:w.name},w.id))}),t&&s.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3",children:[a!==null&&s.jsxs("span",{className:"text-xs text-slate-400",children:["Your rating: ",a,""]}),s.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-400",children:[s.jsx("span",{children:"Rate:"}),s.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-2 py-1 text-sm text-slate-50",value:a??"",onChange:w=>{const h=Number(w.target.value);h>=1&&h<=5&&g(h)},children:[s.jsx("option",{value:"",children:"--"}),s.jsx("option",{value:"1",children:"1"}),s.jsx("option",{value:"2",children:"2"}),s.jsx("option",{value:"3",children:"3"}),s.jsx("option",{value:"4",children:"4"}),s.jsx("option",{value:"5",children:"5"})]})]})]})]}),s.jsx("div",{className:"p-4 sm:p-6 bg-slate-900/40 flex justify-center items-center min-h-[200px]",children:n.mediaUrl?b?s.jsx("video",{src:n.mediaUrl,controls:!0,className:"max-w-full max-h-[70vh] rounded-lg border border-slate-700",playsInline:!0}):s.jsx("img",{src:n.mediaUrl,alt:v,className:"max-w-full max-h-[70vh] w-auto h-auto object-contain rounded-lg border border-slate-700"}):s.jsx("p",{className:"text-sm text-slate-500",children:"No media URL available."})})]})]})},wp="funkedupshift_internet_dashboard",rv=5*60*1e3;function sv(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function av(){try{const e=localStorage.getItem(wp);if(!e)return null;const t=JSON.parse(e);return!(t!=null&&t.sites)||!(t!=null&&t.lastFetchTime)||Date.now()-new Date(t.lastFetchTime).getTime()>=rv?null:t.sites}catch{return null}}function lv(e){try{localStorage.setItem(wp,JSON.stringify({sites:e,lastFetchTime:new Date().toISOString()}))}catch{}}const ov=()=>{const{user:e}=ze(),[t,n]=c.useState([]),[r,a]=c.useState(!0),[l,o]=c.useState(null),i=c.useCallback(async()=>{const u=sv(),d=av();if(d&&d.length>0){n(d),a(!1),o(null);return}if(!u){o("API URL not set."),a(!1);return}a(!0),o(null);try{const x=await fetch(`${u}/internet-dashboard`);if(!x.ok){const v=await x.text();throw new Error(v||`HTTP ${x.status}`)}const p=await x.json(),g=Array.isArray(p.sites)?p.sites:[];g.length>0?(lv(g),n(g)):(o(d!=null&&d.length?void 0:"No data returned."),d!=null&&d.length&&n(d))}catch(x){const p=x instanceof Error?x.message:"Failed to load dashboard.";d&&d.length>0?(n(d),o(null)):(o(p),n([]))}finally{a(!1)}},[]);return c.useEffect(()=>{i()},[i]),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Internet dashboard"}),s.jsxs("div",{className:"rounded-xl border border-teal-800/60 bg-gradient-to-br from-teal-900/40 to-teal-950/60 p-4 shadow-lg",children:[s.jsx("p",{className:"text-sm font-medium text-teal-100",children:"Live status of popular sites"}),s.jsx("p",{className:"mt-1 text-xs text-teal-200/80",children:"Refreshes when data is older than 5 minutes"}),Be(e??null,"superadmin")&&s.jsx("p",{className:"mt-2",children:s.jsx(oe,{to:"/admin/internet-dashboard",className:"text-brand-orange hover:text-orange-400 text-sm",children:"Edit sites list"})})]}),r&&s.jsx("p",{className:"text-sm text-slate-400",children:"Loading"}),l&&!t.length&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:l}),s.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(140px,1fr))] gap-3",children:t.map(u=>{const d=(u.status||"down").toLowerCase(),x=d==="up"?"border-emerald-500/50 bg-emerald-500/15 text-emerald-200":d==="degraded"?"border-amber-500/50 bg-amber-500/15 text-amber-200":"border-red-500/50 bg-red-500/15 text-red-200",p=u.responseTimeMs!=null?`${u.responseTimeMs} ms`:null;return s.jsxs("div",{className:`rounded-lg border p-3 text-center text-sm transition-all duration-200 hover:scale-[1.02] hover:shadow-lg ${x}`,children:[s.jsx("a",{href:`https://${u.domain}`,target:"_blank",rel:"noopener noreferrer",className:"font-semibold break-all hover:underline block",children:u.domain}),s.jsx("div",{className:"mt-1 text-xs capitalize opacity-90",children:d}),p&&s.jsx("div",{className:"mt-0.5 text-[11px] opacity-75",children:p})]},u.domain)})})]})};function iv(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return!e||e==="API_URL_PLACEHOLDER"||!e.startsWith("http")?null:e.replace(/\/$/,"")}const cv=()=>{const{user:e}=ze(),[t,n]=c.useState([]),[r,a]=c.useState(null),[l,o]=c.useState(!0),[i,u]=c.useState(null),d=c.useCallback(async()=>{const p=iv();if(!p){u("API URL not set. For local dev, edit public/config.js and set window.API_BASE_URL to your staging API (e.g. terraform -chdir=infra output -raw apiInvokeUrl)."),o(!1);return}o(!0),u(null);try{const g=await fetch(`${p}/recommended/highlights`),v=await g.text();if(!g.ok)throw new Error(v||`HTTP ${g.status}`);if(v.trim().startsWith("<"))throw new Error("API returned HTML instead of JSON. For local dev, set window.API_BASE_URL in public/config.js to your staging API URL (e.g. terraform -chdir=infra output -raw apiInvokeUrl)");let b;try{b=JSON.parse(v)}catch{throw new Error("API returned invalid JSON.")}const y=Array.isArray(b.sites)?b.sites:[];n(y),u(null)}catch(g){const v=g instanceof Error?g.message:"Failed to load.";u(v),n([])}finally{o(!1)}},[]);c.useEffect(()=>{d()},[d]);const x=Be(e??null,"manager");return s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-violet-200",children:"Highlights and faves"}),s.jsxs("div",{className:"rounded-xl border border-violet-800/60 bg-gradient-to-br from-violet-900/40 to-violet-950/60 p-4 shadow-lg",children:[s.jsx("p",{className:"text-sm font-medium text-violet-100",children:"Our curated list of exceptional sites"}),s.jsx("p",{className:"mt-1 text-xs text-violet-200/80",children:"Click a card below for more detail"}),x&&s.jsx("p",{className:"mt-2",children:s.jsx(oe,{to:"/admin/recommended?tab=highlights",className:"text-violet-300 hover:text-violet-200 font-semibold text-sm",children:"Edit sites list"})})]}),l&&s.jsx("p",{className:"text-sm text-slate-400",children:"Loading"}),i&&!t.length&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:i}),!l&&t.length===0&&!i&&s.jsxs("p",{className:"text-sm text-slate-400",children:["No sites configured yet."," ",x&&s.jsx(oe,{to:"/admin/recommended?tab=highlights",className:"text-violet-400 hover:text-violet-300",children:"Add sites"})]}),t.length>0&&s.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(260px,1fr))] gap-4",children:t.map(p=>{const g=(p.status||"up").toLowerCase(),v=g==="up"?"border-violet-400/50 bg-violet-400/20 text-violet-200":g==="degraded"?"border-violet-500/50 bg-violet-500/15 text-violet-200":"border-violet-600/50 bg-violet-600/15 text-violet-200",b=(p.description||"").trim().length>0,y=p.title||p.domain,w=p.url||`https://${p.domain}`;return s.jsxs("div",{className:`rounded-lg border p-4 text-left text-sm min-w-0 cursor-pointer transition-all duration-200 hover:scale-[1.01] hover:shadow-lg ${v}`,onClick:()=>a(p),role:"button",tabIndex:0,onKeyDown:h=>{(h.key==="Enter"||h.key===" ")&&(h.preventDefault(),a(p))},children:[s.jsxs("span",{className:"relative group block",children:[s.jsx("a",{href:w,target:"_blank",rel:"noopener noreferrer",className:"font-semibold block hover:underline break-all",onClick:h=>h.stopPropagation(),children:y}),s.jsx("span",{className:"absolute left-0 top-full mt-1 px-2 py-1.5 rounded bg-slate-900 border border-violet-700/60 text-xs text-violet-200 break-all max-w-[280px] shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-opacity z-10 pointer-events-none",role:"tooltip",children:w})]}),b&&s.jsx("div",{className:"mt-2 text-xs text-violet-200/90 leading-relaxed break-words",children:p.description})]},p.url||p.domain)})}),s.jsxs(ur,{open:!!r,onClose:()=>a(null),className:"relative z-50",children:[s.jsx("div",{className:"fixed inset-0 bg-black/50","aria-hidden":"true"}),s.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:s.jsx(ur.Panel,{className:"mx-auto w-full max-w-xl rounded-xl border border-violet-800/60 bg-gradient-to-br from-violet-900/40 to-violet-950/60 p-6 shadow-xl",children:r&&s.jsxs("div",{className:"relative flex min-h-[12rem] items-center justify-center",children:[s.jsx("button",{type:"button",onClick:()=>a(null),className:"absolute right-0 top-0 rounded p-1 text-violet-400 hover:bg-violet-800/40 hover:text-violet-200","aria-label":"Close modal",children:s.jsx(Mc,{className:"h-6 w-6"})}),r.logoUrl?s.jsx("img",{src:r.logoUrl,alt:"",className:"max-h-48 max-w-full object-contain",onError:p=>{p.currentTarget.style.visibility="hidden"}}):s.jsx("div",{className:"h-24 w-24 rounded-lg border border-violet-700/60 bg-violet-900/40"})]})})})]})]})};function uv({title:e,titleId:t,...n},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?c.createElement("title",{id:t},e):null,c.createElement("path",{fillRule:"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.006 5.404.434c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.434 2.082-5.005Z",clipRule:"evenodd"}))}const jp=c.forwardRef(uv);function dv(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return!e||e==="API_URL_PLACEHOLDER"||!e.startsWith("http")?null:e.replace(/\/$/,"")}const mv=()=>{const{user:e}=ze(),[t,n]=c.useState([]),[r,a]=c.useState(null),[l,o]=c.useState(!0),[i,u]=c.useState(null),d=c.useCallback(async()=>{const p=dv();if(!p){u("API URL not set. For local dev, edit public/config.js and set window.API_BASE_URL to your staging API (e.g. terraform -chdir=infra output -raw apiInvokeUrl)."),o(!1);return}o(!0),u(null);try{const g=await fetch(`${p}/recommended/highest-rated`),v=await g.text();if(!g.ok)throw new Error(v||`HTTP ${g.status}`);if(v.trim().startsWith("<"))throw new Error("API returned HTML instead of JSON. For local dev, set window.API_BASE_URL in public/config.js to your staging API URL (e.g. terraform -chdir=infra output -raw apiInvokeUrl)");let b;try{b=JSON.parse(v)}catch{throw new Error("API returned invalid JSON.")}const y=Array.isArray(b.sites)?b.sites:[];n(y),u(null)}catch(g){const v=g instanceof Error?g.message:"Failed to load.";u(v),n([])}finally{o(!1)}},[]);c.useEffect(()=>{d()},[d]);const x=Be(e??null,"manager");return s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-amber-200",children:"Highest rated"}),s.jsxs("div",{className:"rounded-xl border border-amber-800/60 bg-gradient-to-br from-amber-900/40 to-amber-950/60 p-4 shadow-lg",children:[s.jsx("p",{className:"text-sm font-medium text-amber-100",children:"Top sites and media rated by our community"}),s.jsx("p",{className:"mt-1 text-xs text-amber-200/80",children:"Click a card below for more detail"}),x&&s.jsx("p",{className:"mt-2",children:s.jsx(oe,{to:"/admin/recommended?tab=highest-rated",className:"text-amber-300 hover:text-amber-200 font-semibold text-sm",children:"Edit list"})})]}),l&&s.jsx("p",{className:"text-sm text-slate-400",children:"Loading"}),i&&!t.length&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:i}),!l&&t.length===0&&!i&&s.jsxs("p",{className:"text-sm text-slate-400",children:["No items configured yet."," ",x&&s.jsx(oe,{to:"/admin/recommended?tab=highest-rated",className:"text-amber-400 hover:text-amber-300",children:"Generate cache"})]}),t.length>0&&s.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(260px,1fr))] gap-4",children:t.map(p=>{const g=(p.status||"up").toLowerCase(),v=g==="up"?"border-amber-400/50 bg-amber-400/20 text-amber-200":g==="degraded"?"border-amber-500/50 bg-amber-500/15 text-amber-200":"border-amber-600/50 bg-amber-600/15 text-amber-200",b=(p.description||"").trim().length>0,y=p.title||p.domain,w=p.type==="media",h=p.id||p.url||p.domain;return s.jsxs("div",{className:`rounded-lg border p-4 text-left text-sm min-w-0 cursor-pointer transition-all duration-200 hover:scale-[1.01] hover:shadow-lg ${v}`,onClick:()=>a(p),role:"button",tabIndex:0,onKeyDown:f=>{(f.key==="Enter"||f.key===" ")&&(f.preventDefault(),a(p))},children:[s.jsxs("span",{className:"relative group block",children:[w?s.jsx(oe,{to:p.link,className:"font-semibold block hover:underline break-all",onClick:f=>f.stopPropagation(),children:y}):s.jsx("a",{href:p.link,target:"_blank",rel:"noopener noreferrer",className:"font-semibold block hover:underline break-all",onClick:f=>f.stopPropagation(),children:y}),s.jsx("span",{className:"absolute left-0 top-full mt-1 px-2 py-1.5 rounded bg-slate-900 border border-amber-700/60 text-xs text-amber-200 break-all max-w-[280px] shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-opacity z-10 pointer-events-none",role:"tooltip",children:p.link})]}),p.averageRating!=null&&s.jsxs("div",{className:"mt-1 flex items-center gap-0.5 text-amber-300",children:[s.jsx(jp,{className:"h-3.5 w-3.5"}),s.jsx("span",{className:"font-medium",children:p.averageRating})]}),b&&s.jsx("div",{className:"mt-2 text-xs text-amber-200/90 leading-relaxed break-words",children:p.description})]},h)})}),s.jsxs(ur,{open:!!r,onClose:()=>a(null),className:"relative z-50",children:[s.jsx("div",{className:"fixed inset-0 bg-black/50","aria-hidden":"true"}),s.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:s.jsx(ur.Panel,{className:"mx-auto w-full max-w-xl rounded-xl border border-amber-800/60 bg-gradient-to-br from-amber-900/40 to-amber-950/60 p-6 shadow-xl",children:r&&s.jsxs("div",{className:"relative flex min-h-[12rem] items-center justify-center",children:[s.jsx("button",{type:"button",onClick:()=>a(null),className:"absolute right-0 top-0 rounded p-1 text-amber-400 hover:bg-amber-800/40 hover:text-amber-200","aria-label":"Close modal",children:s.jsx(Mc,{className:"h-6 w-6"})}),r.logoUrl?s.jsx("img",{src:r.logoUrl,alt:"",className:"max-h-48 max-w-full object-contain",onError:p=>{p.currentTarget.style.visibility="hidden"}}):s.jsx("div",{className:"h-24 w-24 rounded-lg border border-amber-700/60 bg-amber-900/40"})]})})})]})]})};function fv(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const pv=["image/png","image/jpeg","image/jpg","image/gif","image/webp"],hv=()=>{const{user:e}=ze(),{logo:t}=bp(),[n,r]=c.useState(null),[a,l]=c.useState("Funkedupshift"),[o,i]=c.useState(null),[u,d]=c.useState(!1),[x,p]=c.useState(null),[g,v]=c.useState(null);if(!Be(e??null,"superadmin"))return s.jsxs("div",{className:"space-y-3",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Branding"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Only superadmin users can manage global branding assets."})]});const y=h=>{var m;const f=(m=h.target.files)==null?void 0:m[0];r(f??null),p(null),v(null),o&&(URL.revokeObjectURL(o),i(null)),f&&i(URL.createObjectURL(f))},w=async h=>{if(h.preventDefault(),v(null),p(null),!n){v("Choose an image file first.");return}const f=n.type||"image/png";if(!pv.includes(f)){v("Logo must be PNG, JPEG, GIF, or WEBP.");return}const m=fv();if(!m){v("API URL not configured.");return}const j=window;if(!j.auth||typeof j.auth.getAccessToken!="function"){v("Auth not initialized.");return}d(!0);try{const k=await new Promise(Q=>{j.auth.getAccessToken(q=>Q(q))});if(!k)throw new Error("Missing access token.");const E=await fetch(`${m}/branding/logo`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${k}`},body:JSON.stringify({contentType:f,alt:a})});if(!E.ok){const Q=await E.text();throw new Error(Q||`Metadata request failed with ${E.status}`)}const $=await E.json();if(!$.uploadUrl)throw new Error("uploadUrl missing from response.");const I=await fetch($.uploadUrl,{method:"PUT",headers:{"Content-Type":f},body:n});if(!I.ok)throw new Error(`Upload failed with ${I.status}`);p("Logo updated. It may take a moment for caches to refresh.")}catch(k){v((k==null?void 0:k.message)??"Failed to update logo.")}finally{d(!1)}};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Branding"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Upload a new global logo for Funkedupshift. This logo is used in the navigation bar and other shared surfaces."})]}),s.jsxs("form",{className:"space-y-4 max-w-md",onSubmit:w,children:[s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsx("label",{className:"block text-slate-200",children:"Logo image"}),t&&!o&&s.jsxs("div",{className:"space-y-1 mb-3",children:[s.jsx("p",{className:"text-slate-200",children:"Current logo"}),s.jsx("div",{className:"inline-flex items-center rounded-lg border border-slate-800 bg-slate-950 p-2",children:s.jsx("img",{src:t.url,alt:t.alt,className:"h-12 w-auto rounded-md object-contain"})})]}),s.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/jpg,image/gif,image/webp",onChange:y,className:"block w-full text-xs text-slate-300 file:mr-3 file:rounded-md file:border-0 file:bg-slate-800 file:px-3 file:py-1.5 file:text-xs file:font-semibold file:text-slate-100 hover:file:bg-slate-700"}),s.jsx("p",{className:"text-xs text-slate-500",children:"PNG, JPEG, GIF, or WEBP. Recommended square or horizontal layout."})]}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsx("label",{className:"block text-slate-200",children:"Alt text"}),s.jsx("input",{type:"text",value:a,onChange:h=>l(h.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),o&&s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsx("p",{className:"text-slate-200",children:"Preview"}),s.jsxs("div",{className:"inline-flex items-center rounded-lg border border-slate-800 bg-slate-950 p-2",children:[s.jsx("img",{src:o,alt:"Preview",className:"h-12 w-auto rounded-md object-contain"}),s.jsx("span",{className:"ml-3 text-xs text-slate-400 truncate max-w-[12rem]",children:n==null?void 0:n.name})]})]}),s.jsx("button",{type:"submit",disabled:u||!n,className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:u?"Updating":"Update logo"}),x&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-xs text-emerald-200",children:x}),g&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:g})]})]})};function ud(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const xv=()=>{const{user:e}=ze(),[t,n]=c.useState([]),[r,a]=c.useState("custom"),[l,o]=c.useState(null),[i,u]=c.useState(null),[d,x]=c.useState(""),[p,g]=c.useState(!0),[v,b]=c.useState(!1),[y,w]=c.useState(null),[h,f]=c.useState(null),m=Be(e??null,"superadmin"),j=c.useCallback(async(U,K)=>{var R;const re=window;if(!((R=re.auth)!=null&&R.getAccessToken))throw new Error("Not signed in");const N=await new Promise(C=>re.auth.getAccessToken(C));if(!N)throw new Error("Not signed in");const S={...K==null?void 0:K.headers,Authorization:`Bearer ${N}`};return fetch(U,{...K,headers:S})},[]),k=c.useCallback(async()=>{const U=ud();if(!U){f("API URL not set."),g(!1);return}g(!0),f(null);try{const K=await j(`${U}/admin/internet-dashboard/sites`);if(!K.ok){const N=await K.json().catch(()=>({}));throw new Error(N.error||"Failed to load")}const re=await K.json();n(Array.isArray(re.sites)?re.sites:[])}catch(K){f((K==null?void 0:K.message)??"Failed to load sites.")}finally{g(!1)}},[j]);c.useEffect(()=>{m&&k()},[m,k]);const E=async U=>{const K=ud();if(K){b(!0),w(null),f(null);try{const re=await j(`${K}/admin/internet-dashboard/sites`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({sites:U})});if(!re.ok){const N=await re.json().catch(()=>({}));throw new Error(N.error||"Failed to save")}n(U),w("Sites list saved.")}catch(re){f((re==null?void 0:re.message)??"Failed to save.")}finally{b(!1)}}},$=U=>{U.preventDefault();const K=d.trim().toLowerCase().replace(/^https?:\/\//,"").replace(/\/.*$/,"");if(!K)return;if(t.includes(K)){f("Domain already in list.");return}const re=[...t,K];x(""),f(null),E(re)},I=c.useMemo(()=>{if(r==="custom")return[...t];const U=[...t];return U.sort((K,re)=>r==="a-z"?K.localeCompare(re):re.localeCompare(K)),U},[t,r]),Q=U=>{o(U)},q=(U,K)=>{U.preventDefault(),U.dataTransfer.dropEffect="move",u(K)},B=()=>{u(null)},ee=()=>{o(null),u(null)},_=(U,K)=>{if(U.preventDefault(),u(null),r!=="custom"||l===null||l===K){o(null);return}const re=[...I],[N]=re.splice(l,1);re.splice(K,0,N),n(re),E(re),o(null)},D=U=>{const K=t.filter(re=>re!==U);if(K.length===0){f("At least one site is required.");return}f(null),E(K)};return m?p?s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Internet Dashboard"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Loading sites"})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs(oe,{to:"/internet-dashboard",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(_e,{className:"h-4 w-4"}),"Back to Internet Dashboard"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Internet Dashboard"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Edit the list of sites shown on the Internet Dashboard. Only SuperAdmin can change this."})]}),s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-4 max-w-2xl",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsxs("h2",{className:"text-base font-semibold text-slate-200",children:["Sites list (",t.length,")"]}),s.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[s.jsx("button",{type:"button",onClick:()=>a("custom"),className:`rounded px-2 py-0.5 text-xs font-medium ${r==="custom"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"Custom"}),s.jsx("button",{type:"button",onClick:()=>a("a-z"),className:`rounded px-2 py-0.5 text-xs font-medium ${r==="a-z"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"AZ"}),s.jsx("button",{type:"button",onClick:()=>a("z-a"),className:`rounded px-2 py-0.5 text-xs font-medium ${r==="z-a"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"ZA"})]})]}),s.jsxs("form",{onSubmit:$,className:"flex gap-2 flex-wrap items-end",children:[s.jsxs("div",{className:"flex-1 min-w-[12rem]",children:[s.jsx("label",{htmlFor:"newDomain",className:"block text-xs font-medium text-slate-400 mb-1",children:"Add domain"}),s.jsx("input",{id:"newDomain",type:"text",value:d,onChange:U=>x(U.target.value),placeholder:"example.com",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsx("button",{type:"submit",disabled:v||!d.trim(),className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:"Add"})]}),s.jsx("ul",{className:"space-y-2",children:I.map((U,K)=>s.jsxs("li",{draggable:r==="custom",onDragStart:()=>Q(K),onDragOver:re=>q(re,K),onDragLeave:B,onDragEnd:ee,onDrop:re=>_(re,K),className:`flex items-center gap-2 rounded-md border px-3 py-2 ${l===K?"border-brand-orange bg-slate-800 opacity-60":i===K?"border-brand-orange/70 bg-slate-800/80":"border-slate-700 bg-slate-900"} ${r==="custom"?"cursor-grab active:cursor-grabbing":""}`,children:[r==="custom"&&s.jsx(Dc,{className:"h-4 w-4 flex-shrink-0 text-slate-500","aria-hidden":!0}),s.jsx("span",{className:"font-medium text-slate-200 break-all flex-1",children:U}),s.jsx("button",{type:"button",onClick:()=>D(U),disabled:v||t.length<=1,className:"flex-shrink-0 rounded-md border border-red-500/60 bg-red-500/10 px-2 py-1 text-xs font-medium text-red-300 hover:bg-red-500/20 disabled:opacity-50",children:"Remove"})]},U))}),y&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:y}),h&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:h})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Internet Dashboard"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Only SuperAdmin users can edit the dashboard sites list."})]})};function Eo(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function dd(e){const t=e.trim();return t?t.toLowerCase().startsWith("http://")||t.toLowerCase().startsWith("https://")?t:`https://${t.replace(/^https?:\/\//i,"")}`:null}function md(e){try{return new URL(e.startsWith("http")?e:`https://${e}`).hostname}catch{return e}}const gs=[{id:"highlights",label:"Highlights",fetchPath:"/admin/recommended/highlights/sites",savePath:"/admin/recommended/highlights/sites",generatePath:"/admin/recommended/highlights/generate",generateLabel:"Generate new cache",listLabel:"Highlights list",emptyMessage:"No highlights yet. Generate from the highlight category or add a URL above.",generateSuccessMessage:"Cache generated from sites in the highlight category.",saveSuccessMessage:"Highlights list saved.",buttonClass:"bg-violet-600 hover:bg-violet-500",viewPath:"/recommended/highlights"},{id:"highestRated",label:"Highest Rated",fetchPath:"/admin/recommended/highest-rated/sites",savePath:"/admin/recommended/highest-rated/sites",generatePath:"/admin/recommended/highest-rated/generate",generateLabel:"Generate new cache",listLabel:"Highest rated list",emptyMessage:"No items yet. Generate from top 12 by star rating or add a URL above.",generateSuccessMessage:"Cache generated from top 12 sites and media by star rating.",saveSuccessMessage:"Highest rated list saved.",buttonClass:"bg-amber-600 hover:bg-amber-500",viewPath:"/recommended/highest-rated"}],fd=({config:e})=>{const[t,n]=c.useState([]),[r,a]=c.useState(null),[l,o]=c.useState(!1),[i,u]=c.useState("custom"),[d,x]=c.useState(null),[p,g]=c.useState(null),[v,b]=c.useState(""),[y,w]=c.useState(null),[h,f]=c.useState(""),[m,j]=c.useState(!1),[k,E]=c.useState(null),[$,I]=c.useState(null),Q=c.useRef([]);c.useEffect(()=>{Q.current=t},[t]);const q=c.useCallback(async(O,F)=>{var ne;const L=window;if(!((ne=L.auth)!=null&&ne.getAccessToken))throw new Error("Not signed in");const G=await new Promise(be=>L.auth.getAccessToken(be));if(!G)throw new Error("Not signed in");const z={...F==null?void 0:F.headers,Authorization:`Bearer ${G}`};return fetch(O,{...F,headers:z})},[]),B=c.useCallback(async()=>{const O=Eo();if(O){I(null);try{const F=await q(`${O}${e.fetchPath}`);if(!F.ok){const z=await F.json().catch(()=>({}));throw new Error(z.error||"Failed to load")}const L=await F.json(),G=Array.isArray(L.sites)?L.sites:[];n(G.map(z=>typeof z=="string"?{type:"site",url:z,description:""}:(z.type||"site")==="media"?{type:"media",id:z.id||"",description:z.description||"",title:z.title,thumbnailKey:z.thumbnailKey,averageRating:z.averageRating}:{type:"site",url:z.url||"",description:z.description||"",title:z.title,logoKey:z.logoKey,averageRating:z.averageRating})),a(L.updatedAt??null)}catch(F){I((F==null?void 0:F.message)??"Failed to load sites.")}}},[q,e.fetchPath]);c.useEffect(()=>{B()},[B]);const ee=async()=>{const O=Eo();if(O){o(!0),E(null),I(null);try{const F=await q(`${O}${e.generatePath}`,{method:"POST"}),L=await F.json();if(!F.ok)throw new Error(L.error||"Failed to generate");const G=Array.isArray(L.sites)?L.sites:[];n(G.map(z=>typeof z=="string"?{type:"site",url:z,description:""}:(z.type||"site")==="media"?{type:"media",id:z.id||"",description:z.description||"",title:z.title,thumbnailKey:z.thumbnailKey,averageRating:z.averageRating}:{type:"site",url:z.url||"",description:z.description||"",title:z.title,logoKey:z.logoKey,averageRating:z.averageRating})),a(L.updatedAt??null),E(e.generateSuccessMessage)}catch(F){I((F==null?void 0:F.message)??"Failed to generate cache.")}finally{o(!1)}}},_=async O=>{const F=Eo();if(F){j(!0),E(null),I(null);try{const L={sites:O.map(ne=>ne.type==="media"?{type:"media",id:ne.id,description:ne.description,...ne.title&&{title:ne.title},...ne.thumbnailKey&&{thumbnailKey:ne.thumbnailKey},...ne.averageRating!=null&&{averageRating:ne.averageRating}}:{type:"site",url:ne.url,description:ne.description,...ne.title&&{title:ne.title},...ne.logoKey&&{logoKey:ne.logoKey},...ne.averageRating!=null&&{averageRating:ne.averageRating}})},G=await q(`${F}${e.savePath}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)}),z=await G.json();if(!G.ok)throw new Error(z.error||"Failed to save");n(O),E(e.saveSuccessMessage),a(z.updatedAt??null)}catch(L){I((L==null?void 0:L.message)??"Failed to save.")}finally{j(!1)}}},D=O=>{O.preventDefault();const F=dd(v);if(F){if(t.some(L=>L.url===F)){I("URL already in list.");return}b(""),I(null),_([...t,{type:"site",url:F,description:""}])}},U=O=>O.type==="media"?(O.title||O.id||"").toLowerCase():md(O.url||"").toLowerCase(),K=c.useMemo(()=>{if(i==="custom")return[...t];const O=[...t];return O.sort((F,L)=>{const G=U(F),z=U(L);return i==="a-z"?G.localeCompare(z):z.localeCompare(G)}),O},[t,i]),re=O=>{const F=K[O];F.type!=="media"&&(w(O),f(F.url||""))},N=()=>{if(y===null)return;const O=dd(h);if(!O){I("Invalid URL.");return}const F=K[y];if(F.type==="media")return;if(t.some(G=>G.type==="site"&&G.url===O&&G.url!==F.url)){I("URL already in list.");return}I(null);const L=t.map(G=>G.type==="site"&&G.url===F.url?{...G,url:O}:G);n(L),_(L),w(null),f("")},S=()=>{w(null),f("")},R=(O,F)=>{n(L=>L.map(G=>(G.type==="media"?G.id===O.id:G.url===O.url)?{...G,description:F.slice(0,255)}:G))},C=()=>{_(Q.current)},P=O=>x(O),Y=(O,F)=>{O.preventDefault(),O.dataTransfer.dropEffect="move",g(F)},V=()=>g(null),M=()=>{x(null),g(null)},J=(O,F)=>{if(O.preventDefault(),g(null),i!=="custom"||d===null||d===F){x(null);return}const L=[...K],[G]=L.splice(d,1);L.splice(F,0,G),n(L),_(L),x(null)},T=O=>{I(null),_(t.filter(F=>F.type==="media"?F.id!==O.id:F.url!==O.url))},ae=r?new Date(r).toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"}):null;return s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-4 max-w-2xl",children:[s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsxs("h2",{className:"text-base font-semibold text-slate-200",children:[e.listLabel," (",t.length,")"]}),ae&&s.jsxs("span",{className:"text-xs text-slate-500",children:["Cache was last updated ",ae]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(oe,{to:e.viewPath,className:"text-sm text-slate-400 hover:text-slate-200",children:"View"}),s.jsx("button",{type:"button",onClick:ee,disabled:l,className:`rounded-md px-4 py-2 text-sm font-medium text-white disabled:opacity-50 ${e.buttonClass}`,children:l?"Generating":e.generateLabel})]})]}),s.jsx("div",{className:"flex flex-wrap items-center gap-3",children:s.jsx("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:["custom","a-z","z-a"].map(O=>s.jsx("button",{type:"button",onClick:()=>u(O),className:`rounded px-2 py-0.5 text-xs font-medium ${i===O?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:O==="custom"?"Custom":O==="a-z"?"AZ":"ZA"},O))})}),s.jsxs("form",{onSubmit:D,className:"flex gap-2 flex-wrap items-end",children:[s.jsxs("div",{className:"flex-1 min-w-[12rem]",children:[s.jsx("label",{htmlFor:"newUrl",className:"block text-xs font-medium text-slate-400 mb-1",children:"Add URL"}),s.jsx("input",{id:"newUrl",type:"text",value:v,onChange:O=>b(O.target.value),placeholder:"https://example.com or example.com",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsx("button",{type:"submit",disabled:m||!v.trim(),className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:"Add"})]}),s.jsx("ul",{className:"space-y-3",children:K.map((O,F)=>s.jsxs("li",{draggable:i==="custom"&&y===null,onDragStart:()=>P(F),onDragOver:L=>Y(L,F),onDragLeave:V,onDragEnd:M,onDrop:L=>J(L,F),className:`flex flex-col gap-2 rounded-md border px-3 py-2 ${d===F?"border-brand-orange bg-slate-800 opacity-60":p===F?"border-brand-orange/70 bg-slate-800/80":"border-slate-700 bg-slate-900"} ${i==="custom"&&y===null?"cursor-grab active:cursor-grabbing":""}`,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[i==="custom"&&s.jsx(Dc,{className:"h-4 w-4 flex-shrink-0 text-slate-500","aria-hidden":!0}),y===F?s.jsx("input",{type:"text",value:h,onChange:L=>f(L.target.value),onBlur:N,onKeyDown:L=>{L.key==="Enter"&&N(),L.key==="Escape"&&S()},autoFocus:!0,className:"flex-1 rounded-md border border-slate-600 bg-slate-900 px-2 py-1 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}):O.type==="media"?s.jsx("span",{className:"font-medium text-slate-200 break-all flex-1",children:O.title||O.id}):s.jsx("button",{type:"button",onClick:()=>re(F),className:"font-medium text-slate-200 break-all flex-1 text-left hover:text-brand-orange hover:underline",children:md(O.url||"")}),e.id==="highestRated"&&O.averageRating!=null&&s.jsxs("span",{className:"flex items-center gap-0.5 text-amber-400 text-xs",children:[s.jsx(jp,{className:"h-3.5 w-3.5"}),O.averageRating]}),s.jsx("button",{type:"button",onClick:()=>T(O),disabled:m||y!==null,className:"flex-shrink-0 rounded-md border border-red-500/60 bg-red-500/10 px-2 py-1 text-xs font-medium text-red-300 hover:bg-red-500/20 disabled:opacity-50",children:"Remove"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:`desc-${e.id}-${F}`,className:"block text-xs font-medium text-slate-400 mb-0.5",children:"Description"}),s.jsx("input",{id:`desc-${e.id}-${F}`,type:"text",value:O.description,onChange:L=>R(O,L.target.value),onBlur:C,maxLength:255,placeholder:"One-line description (255 chars max)",disabled:m,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange disabled:opacity-50"}),s.jsxs("span",{className:"text-[10px] text-slate-500",children:[O.description.length,"/255"]})]})]},O.id||O.url||F))}),K.length===0&&s.jsx("p",{className:"text-sm text-slate-500",children:e.emptyMessage}),k&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:k}),$&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:$})]})},gv=()=>{const{user:e}=ze(),[t,n]=Zt(),r=t.get("tab"),a=r==="highest-rated"||r==="highestRated"?"highestRated":"highlights",[l,o]=c.useState(a);c.useEffect(()=>{o(r==="highest-rated"||r==="highestRated"?"highestRated":"highlights")},[r]);const i=d=>{o(d),n({tab:d==="highestRated"?"highest-rated":d},{replace:!0})},u=Be(e??null,"manager");return gs.find(d=>d.id===l)??gs[0],u?s.jsxs("div",{className:"space-y-6",children:[s.jsxs(oe,{to:"/recommended/highlights",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(_e,{className:"h-4 w-4"}),"Back to Recommended"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Recommended Admin"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manage highlighted and highest-rated site lists. Generate from categories or star ratings, or edit manually."})]}),s.jsx("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:gs.map(d=>s.jsx("button",{type:"button",onClick:()=>i(d.id),className:`px-4 py-2 rounded-md text-sm font-medium ${l===d.id?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:d.label},d.id))}),l==="highlights"&&s.jsx(fd,{config:gs[0]}),l==="highestRated"&&s.jsx(fd,{config:gs[1]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Recommended Admin"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Only Manager or SuperAdmin users can edit the recommended caches."})]})},yv={admin:"SuperAdmin",manager:"Manager",user:"User"},Fi=[{value:-8,label:"UTC-8"},{value:-5,label:"UTC-5"},{value:0,label:"UTC+0/GMT"}];function Sr(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function vv(e,t,n){if(!e&&!n)return"";if(!e)return n?`from ${n}`:"";try{const r=new Date(e);if(isNaN(r.getTime()))return e+(n?` from ${n}`:"");const a=r.getTime()+(t||0)*36e5,l=new Date(a),o=y=>y<10?"0"+y:""+y,i=l.getUTCFullYear(),u=o(l.getUTCMonth()+1),d=o(l.getUTCDate()),x=o(l.getUTCHours()),p=o(l.getUTCMinutes()),g=Fi.find(y=>y.value===t),v=g?g.label:t<0?"UTC"+t:"UTC+"+t;let b=`${i}-${u}-${d} ${x}:${p} ${v}`;return n&&(b+=` from ${n}`),b}catch{return e+(n?` from ${n}`:"")}}const bv=()=>{const{user:e}=ze(),t=Bt(),[n,r]=Zt(),a=n.get("tab"),l=a==="groups"?"groups":"users",[o,i]=c.useState(l);c.useEffect(()=>{i(a==="groups"?"groups":"users")},[a]);const u=Z=>{i(Z);const H=new URLSearchParams(n);Z==="groups"?H.set("tab","groups"):H.delete("tab"),r(H)},[d,x]=c.useState([]),[p,g]=c.useState(!0),[v,b]=c.useState(null),[y,w]=c.useState(""),[h,f]=c.useState(-8),[m,j]=c.useState([]),[k,E]=c.useState(!0),[$,I]=c.useState(null),[Q,q]=c.useState(""),[B,ee]=c.useState(""),[_,D]=c.useState(""),[U,K]=c.useState(!1),[re,N]=c.useState(null),[S,R]=c.useState(null),[C,P]=c.useState(""),[Y,V]=c.useState(""),[M,J]=c.useState(!1),[T,ae]=c.useState(null),[O,F]=c.useState(null),L=Be(e??null,"manager"),G=async Z=>{var de;const H=Sr();if(!H){b("API URL not set."),g(!1);return}const ce=window;if(!((de=ce.auth)!=null&&de.getAccessToken)){b("Sign in required."),g(!1);return}g(!0),b(null);try{const ge=await new Promise(Se=>ce.auth.getAccessToken(Se));let xe=`${H}/admin/users`;Z&&(xe+=`?paginationToken=${encodeURIComponent(Z)}`);const me=await fetch(xe,{headers:{Authorization:`Bearer ${ge}`}});if(!me.ok){const Se=await me.json().catch(()=>({}));throw new Error(Se.error||"Failed to load users")}const je=await me.json();x(Se=>Z?[...Se,...je.users??[]]:je.users??[]),w(je.paginationToken??"")}catch(ge){b((ge==null?void 0:ge.message)??"Failed to load users")}finally{g(!1)}},z=async Z=>{var de;const H=Sr();if(!H)return{cognitoGroups:[],customGroups:[]};const ce=window;if(!((de=ce.auth)!=null&&de.getAccessToken))return{cognitoGroups:[],customGroups:[]};try{const ge=await new Promise(je=>ce.auth.getAccessToken(je)),xe=await fetch(`${H}/admin/users/${encodeURIComponent(Z.username)}/groups`,{headers:{Authorization:`Bearer ${ge}`}});if(!xe.ok)return{cognitoGroups:[],customGroups:[]};const me=await xe.json();return{cognitoGroups:me.cognitoGroups??[],customGroups:me.customGroups??[]}}catch{return{cognitoGroups:[],customGroups:[]}}},ne=async()=>{var ce;const Z=Sr();if(!Z){I("API URL not set."),E(!1);return}const H=window;if(!((ce=H.auth)!=null&&ce.getAccessToken)){I("Sign in required."),E(!1);return}E(!0),I(null);try{const de=await new Promise(je=>H.auth.getAccessToken(je)),ge=await fetch(`${Z}/admin/groups`,{headers:{Authorization:`Bearer ${de}`}});if(!ge.ok)throw new Error(await ge.text());const me=((await ge.json()).groups??[]).map(je=>({name:je.name??(je.PK??"").replace("GROUP#",""),description:je.description,permissions:Array.isArray(je.permissions)?je.permissions:[]}));me.sort((je,Se)=>je.name.toLowerCase().localeCompare(Se.name.toLowerCase())),j(me)}catch(de){I((de==null?void 0:de.message)??"Failed to load groups")}finally{E(!1)}};c.useEffect(()=>{const Z=parseInt(sessionStorage.getItem("funkedupshift_lastlogin_tz")??"-8",10);!isNaN(Z)&&Fi.some(H=>H.value===Z)&&f(Z)},[]),c.useEffect(()=>{L&&o==="users"&&G()},[L,o]),c.useEffect(()=>{L&&o==="groups"&&ne()},[L,o]);const be=Z=>{t(`/admin/users/edit?username=${encodeURIComponent(Z.username)}&email=${encodeURIComponent(Z.email??"")}&status=${encodeURIComponent(Z.status??"")}`)},W=(Z,H)=>{const ce=[];return(Z||[]).forEach(de=>{const ge=yv[de]||de,xe=de==="admin"?"bg-amber-500/20 text-amber-200":de==="manager"?"bg-blue-500/20 text-blue-200":"bg-slate-600/30 text-slate-300";ce.push(s.jsx("span",{className:`inline-block px-2 py-0.5 rounded text-xs mr-1 ${xe}`,children:ge},`c-${de}`))}),(H||[]).forEach(de=>{ce.push(s.jsx("span",{className:"inline-block px-2 py-0.5 rounded text-xs mr-1 bg-emerald-500/20 text-emerald-200",children:de},`x-${de}`))}),ce.length?ce:s.jsx("span",{className:"text-slate-500",children:""})},se=Z=>{R(Z.name),P(Z.description??""),V((Z.permissions??[]).join(", ")),ae(null)},ye=()=>{R(null),P(""),V(""),ae(null)},he=async Z=>{var xe;Z.preventDefault();const H=Q.trim();if(!H)return;const ce=Sr();if(!ce)return;const de=window;if(!((xe=de.auth)!=null&&xe.getAccessToken))return;const ge=_.split(",").map(me=>me.trim()).filter(Boolean);K(!0),N(null),I(null);try{const me=await new Promise(Se=>de.auth.getAccessToken(Se)),je=await fetch(`${ce}/admin/groups`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${me}`},body:JSON.stringify({name:H,description:B.trim(),permissions:ge})});if(!je.ok){const Se=await je.json().catch(()=>({}));throw new Error(Se.error||"Failed to create group")}q(""),ee(""),D(""),N("Group created."),ne()}catch(me){I((me==null?void 0:me.message)??"Failed to create group")}finally{K(!1)}},we=async Z=>{var ge;if(Z.preventDefault(),!S)return;const H=Sr();if(!H)return;const ce=window;if(!((ge=ce.auth)!=null&&ge.getAccessToken))return;const de=Y.split(",").map(xe=>xe.trim()).filter(Boolean);J(!0),ae(null);try{const xe=await new Promise(je=>ce.auth.getAccessToken(je)),me=await fetch(`${H}/admin/groups/${encodeURIComponent(S)}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${xe}`},body:JSON.stringify({description:C,permissions:de})});if(!me.ok){const je=await me.json().catch(()=>({}));throw new Error(je.error||"Failed to update group")}j(je=>je.map(Se=>Se.name===S?{...Se,description:C,permissions:de}:Se)),ye()}catch(xe){ae((xe==null?void 0:xe.message)??"Failed to update group")}finally{J(!1)}},Ee=async Z=>{var de;if(!window.confirm(`Delete group "${Z}"? Members will lose access.`))return;const H=Sr();if(!H)return;const ce=window;if((de=ce.auth)!=null&&de.getAccessToken){F(Z);try{const ge=await new Promise(me=>ce.auth.getAccessToken(me)),xe=await fetch(`${H}/admin/groups/${encodeURIComponent(Z)}`,{method:"DELETE",headers:{Authorization:`Bearer ${ge}`}});if(!xe.ok){const me=await xe.json().catch(()=>({}));throw new Error(me.error||"Failed to delete group")}j(me=>me.filter(je=>je.name!==Z)),S===Z&&ye()}catch(ge){I((ge==null?void 0:ge.message)??"Failed to delete group")}finally{F(null)}}},Le=Z=>{const H=parseInt(Z.target.value,10);f(H),sessionStorage.setItem("funkedupshift_lastlogin_tz",String(H))};return L?s.jsxs("div",{className:"space-y-6",children:[s.jsxs(oe,{to:"/",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(_e,{className:"h-4 w-4"}),"Back to Home"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Membership"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manage users and groups."})]}),s.jsxs("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:[s.jsx("button",{type:"button",onClick:()=>u("users"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="users"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Users"}),s.jsx("button",{type:"button",onClick:()=>u("groups"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="groups"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Groups"})]}),o==="users"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("label",{htmlFor:"tz-select",className:"text-slate-500",children:"Last login timezone:"}),s.jsx("select",{id:"tz-select",value:h,onChange:Le,className:"rounded border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 text-sm",children:Fi.map(Z=>s.jsx("option",{value:Z.value,children:Z.label},Z.value))})]}),v&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:v}),s.jsx("div",{className:"overflow-x-auto rounded-lg border border-slate-800",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-800",children:[s.jsx("thead",{className:"bg-slate-900/80",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Email"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Status"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Last login"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"System Roles"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Custom Groups"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-800",children:p&&d.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-slate-500",children:"Loading"})}):d.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-slate-500",children:"No users found."})}):d.map(Z=>s.jsx(wv,{user:Z,tzOffset:h,formatLastLogin:vv,renderGroupBadges:W,loadUserGroups:z,onClick:()=>be(Z)},Z.username))})]})}),y&&s.jsx("div",{className:"flex justify-center",children:s.jsx("button",{type:"button",onClick:()=>G(y),disabled:p,className:"rounded-md border border-slate-700 px-4 py-2 text-sm font-medium text-slate-200 hover:bg-slate-800 disabled:opacity-50",children:p?"Loading":"Load more"})})]}),o==="groups"&&s.jsxs(s.Fragment,{children:[s.jsxs("form",{className:"space-y-3 max-w-md",onSubmit:he,children:[s.jsx("h2",{className:"text-sm font-medium text-slate-300",children:"Create group"}),s.jsx("input",{type:"text",value:Q,onChange:Z=>q(Z.target.value),placeholder:"Name (alphanumeric, underscore, hyphen)",required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("input",{type:"text",value:B,onChange:Z=>ee(Z.target.value),placeholder:"Description (optional)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("input",{type:"text",value:_,onChange:Z=>D(Z.target.value),placeholder:"Permissions (comma-separated, e.g. media:edit, sites:add)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("button",{type:"submit",disabled:U||!Q.trim(),className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:U?"Creating":"Create"}),re&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:re}),$&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:$})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-sm font-medium text-slate-300 mb-2",children:"Custom groups"}),k?s.jsx("p",{className:"text-sm text-slate-500",children:"Loading"}):m.length===0?s.jsx("p",{className:"text-sm text-slate-500",children:"No custom groups yet. Create one above."}):s.jsx("ul",{className:"space-y-2",children:m.map(Z=>s.jsx("li",{className:"rounded-lg border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm",children:S===Z.name?s.jsxs("form",{onSubmit:we,className:"space-y-2",children:[s.jsx("span",{className:"font-medium text-slate-200",children:Z.name}),s.jsx("input",{type:"text",value:C,onChange:H=>P(H.target.value),placeholder:"Description (optional)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("input",{type:"text",value:Y,onChange:H=>V(H.target.value),placeholder:"Permissions (comma-separated)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsxs("div",{className:"flex gap-2 flex-wrap",children:[s.jsx("button",{type:"submit",disabled:M,className:"rounded-md bg-brand-orange px-3 py-1.5 text-xs font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:M?"Saving":"Save"}),s.jsx("button",{type:"button",onClick:ye,className:"rounded-md border border-slate-700 px-3 py-1.5 text-xs font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"}),s.jsx("button",{type:"button",onClick:()=>Ee(Z.name),disabled:O===Z.name,className:"rounded-md border border-red-500/60 px-3 py-1.5 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:O===Z.name?"Deleting":"Delete"})]}),T&&s.jsx("p",{className:"text-xs text-red-400",children:T})]}):s.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("span",{className:"font-medium text-slate-200",children:Z.name}),Z.description&&s.jsx("span",{className:"text-slate-500 ml-2",children:Z.description}),Z.permissions&&Z.permissions.length>0&&s.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Permissions: ",Z.permissions.join(", ")]})]}),s.jsxs("div",{className:"flex gap-2 shrink-0",children:[s.jsx("button",{type:"button",onClick:()=>se(Z),className:"rounded-md border border-slate-700 px-2 py-1 text-xs font-medium text-slate-300 hover:bg-slate-800",children:"Edit"}),s.jsx("button",{type:"button",onClick:()=>Ee(Z.name),disabled:O===Z.name,className:"rounded-md border border-red-500/60 px-2 py-1 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:O===Z.name?"Deleting":"Delete"})]})]})},Z.name))})]})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Membership"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})},wv=({user:e,tzOffset:t,formatLastLogin:n,renderGroupBadges:r,loadUserGroups:a,onClick:l})=>{const[o,i]=c.useState(null);return c.useEffect(()=>{let u=!1;return a(e).then(d=>{u||i(d)}),()=>{u=!0}},[e.username]),s.jsxs("tr",{className:"cursor-pointer hover:bg-slate-800/50 transition-colors",onClick:l,children:[s.jsx("td",{className:"px-4 py-3 text-sm text-slate-200",children:e.email||e.username||""}),s.jsx("td",{className:"px-4 py-3 text-sm text-slate-400",children:e.status||""}),s.jsx("td",{className:"px-4 py-3 text-sm text-slate-400",children:n(e.lastLoginAt??"",t,e.lastLoginIp)}),s.jsx("td",{className:"px-4 py-3 text-sm",children:o?r(o.cognitoGroups,[]):s.jsx("span",{className:"text-slate-500",children:""})}),s.jsx("td",{className:"px-4 py-3 text-sm",children:o?r([],o.customGroups):s.jsx("span",{className:"text-slate-500",children:""})})]})};function Yn(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const pd=100,jv=5*1024*1024,Nv=()=>{const e=Bt(),{user:t}=ze(),[n,r]=Zt(),a=n.get("tab"),l=a==="categories"?"categories":"add",[o,i]=c.useState(l);c.useEffect(()=>{i(a==="categories"?"categories":"add")},[a]);const u=X=>{i(X);const ie=new URLSearchParams(n);X==="categories"?ie.set("tab","categories"):ie.delete("tab"),r(ie)},[d,x]=c.useState([]),[p,g]=c.useState(""),[v,b]=c.useState(""),[y,w]=c.useState(""),[h,f]=c.useState(!1),[m,j]=c.useState(null),[k,E]=c.useState(null),[$,I]=c.useState(null),[Q,q]=c.useState(""),[B,ee]=c.useState([]),[_,D]=c.useState(""),[U,K]=c.useState(!1),[re,N]=c.useState(!1),[S,R]=c.useState(null),[C,P]=c.useState(null),[Y,V]=c.useState(!1),M=c.useRef(null),[J,T]=c.useState(!0),[ae,O]=c.useState(null),[F,L]=c.useState(""),[G,z]=c.useState(""),[ne,be]=c.useState(!1),[W,se]=c.useState(null),[ye,he]=c.useState(null),[we,Ee]=c.useState(""),[Le,Z]=c.useState(""),[H,ce]=c.useState(!1),[de,ge]=c.useState(null),[xe,me]=c.useState(null),je=Be(t??null,"manager");c.useEffect(()=>{var fe;if(!je)return;const X=Yn();if(!X)return;const ie=window;(fe=ie.auth)!=null&&fe.getAccessToken&&(async()=>{const Ie=await new Promise(Ce=>ie.auth.getAccessToken(Ce));if(!Ie)return;const Pe=await fetch(`${X}/categories`,{headers:{Authorization:`Bearer ${Ie}`}});if(!Pe.ok)return;const Ke=((await Pe.json()).categories??[]).map(Ce=>({id:Ce.PK||Ce.id||"",name:Ce.name||Ce.PK||"",description:Ce.description}));x(Ke)})()},[je]),c.useEffect(()=>{function X(ie){M.current&&!M.current.contains(ie.target)&&K(!1)}if(U)return document.addEventListener("mousedown",X),()=>document.removeEventListener("mousedown",X)},[U]);const Se=d.filter(X=>!B.includes(X.id)&&(!_.trim()||(X.name||"").toLowerCase().includes(_.toLowerCase()))),tt=X=>{var Ie;const ie=(Ie=X.target.files)==null?void 0:Ie[0];if(j(ie??null),ie&&q(""),I(null),k&&(URL.revokeObjectURL(k),E(null)),!ie)return;if(ie.size>jv){I("Logo must be 5 MB or smaller.");return}const fe=new Image;fe.onload=()=>{if(fe.naturalWidth<pd||fe.naturalHeight<pd){I("Logo must be at least 100100 pixels.");return}I(null),E(URL.createObjectURL(ie))},fe.onerror=()=>I("Please choose a valid image file."),fe.src=URL.createObjectURL(ie)},rt=X=>{B.includes(X)||ee([...B,X]),D("")},st=X=>{ee(B.filter(ie=>ie!==X))},ln=async()=>{var fe;const X=Yn();if(!X){O("API URL not set."),T(!1);return}const ie=window;if(!((fe=ie.auth)!=null&&fe.getAccessToken)){O("Sign in required."),T(!1);return}T(!0),O(null);try{const Ie=await new Promise(Ce=>ie.auth.getAccessToken(Ce)),Pe=await fetch(`${X}/categories`,{headers:{Authorization:`Bearer ${Ie}`}});if(!Pe.ok)throw new Error(await Pe.text());const Ke=((await Pe.json()).categories??[]).map(Ce=>({id:Ce.PK||Ce.id||"",name:Ce.name||Ce.PK||"",description:Ce.description}));x(Ke)}catch(Ie){O((Ie==null?void 0:Ie.message)??"Failed to load categories.")}finally{T(!1)}};c.useEffect(()=>{je&&o==="categories"&&ln()},[je,o]);const vr=async()=>{var Ie;const X=p.trim();if(!X){P("Enter URL first.");return}const ie=Yn();if(!ie){P("API URL not set.");return}const fe=window;if(!((Ie=fe.auth)!=null&&Ie.getAccessToken)){P("Sign in required.");return}V(!0),P(null);try{const Pe=await new Promise(Ce=>fe.auth.getAccessToken(Ce)),Ue=await fetch(`${ie}/sites/generate-description`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Pe}`},body:JSON.stringify({url:X})});if(!Ue.ok)throw new Error(await Ue.text());const Ke=await Ue.json();w(Ke.description??""),f(!0)}catch(Pe){P((Pe==null?void 0:Pe.message)??"Failed to generate description.")}finally{V(!1)}},wn=async X=>{var Pe;X.preventDefault();const ie=p.trim();if(!ie){P("URL is required.");return}const fe=Yn();if(!fe){P("API URL not set.");return}const Ie=window;if(!((Pe=Ie.auth)!=null&&Pe.getAccessToken)){P("Sign in required.");return}if(!(m&&$)){N(!0),P(null),R(null);try{const Ue=await new Promise(ft=>Ie.auth.getAccessToken(ft));let Ke=null;if(Q.trim()){const ft=await fetch(`${fe}/sites/logo-from-url`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ue}`},body:JSON.stringify({siteId:"new",imageUrl:Q.trim()})});if(!ft.ok){const wr=await ft.json().catch(()=>({}));throw new Error(wr.error||await ft.text())}const vt=await ft.json();vt.key&&(Ke=vt.key)}else if(m){const ft=await fetch(`${fe}/sites/logo-upload`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ue}`},body:JSON.stringify({siteId:"new",contentType:m.type||"image/png"})});if(!ft.ok)throw new Error("Logo upload request failed");const{uploadUrl:vt,key:wr}=await ft.json();if(!(await fetch(vt,{method:"PUT",headers:{"Content-Type":m.type||"image/png"},body:m})).ok)throw new Error("Logo upload failed");Ke=wr}const Ce={url:ie,title:v.trim()||ie,description:y.trim(),categoryIds:B};h&&(Ce.descriptionAiGenerated=!0),Ke&&(Ce.logoKey=Ke);const Jn=await fetch(`${fe}/sites`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ue}`},body:JSON.stringify(Ce)});if(!Jn.ok)throw new Error(await Jn.text());const br=await Jn.json();R(`Site added: ${br.title||br.url||ie}`),g(""),b(""),w(""),f(!1),j(null),k&&URL.revokeObjectURL(k),E(null),ee([]),setTimeout(()=>e("/websites"),1500)}catch(Ue){P((Ue==null?void 0:Ue.message)??"Failed to add site.")}finally{N(!1)}}},le=X=>{he(X.id),Ee(X.name),Z(X.description??"")},ve=()=>{he(null),Ee(""),Z(""),ge(null)},Me=async X=>{var Ie;if(X.preventDefault(),!ye)return;const ie=Yn();if(!ie)return;const fe=window;if((Ie=fe.auth)!=null&&Ie.getAccessToken){ce(!0),ge(null);try{const Pe=await new Promise(Ke=>fe.auth.getAccessToken(Ke)),Ue=await fetch(`${ie}/categories`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Pe}`},body:JSON.stringify({id:ye,name:we.trim(),description:Le.trim()||void 0})});if(!Ue.ok)throw new Error(await Ue.text());x(Ke=>Ke.map(Ce=>Ce.id===ye?{...Ce,name:we.trim(),description:Le.trim()||void 0}:Ce)),ve()}catch(Pe){ge((Pe==null?void 0:Pe.message)??"Failed to update category.")}finally{ce(!1)}}},Oe=async X=>{var Ie;if(!window.confirm("Delete this category? Sites using it will lose this category."))return;const ie=Yn();if(!ie)return;const fe=window;if((Ie=fe.auth)!=null&&Ie.getAccessToken){me(X);try{const Pe=await new Promise(Ke=>fe.auth.getAccessToken(Ke)),Ue=await fetch(`${ie}/categories?id=${encodeURIComponent(X)}`,{method:"DELETE",headers:{Authorization:`Bearer ${Pe}`}});if(!Ue.ok)throw new Error(await Ue.text());x(Ke=>Ke.filter(Ce=>Ce.id!==X)),ye===X&&ve()}catch(Pe){O((Pe==null?void 0:Pe.message)??"Failed to delete category.")}finally{me(null)}}},$e=async X=>{var Pe;X.preventDefault();const ie=F.trim();if(!ie)return;const fe=Yn();if(!fe)return;const Ie=window;if((Pe=Ie.auth)!=null&&Pe.getAccessToken){be(!0),se(null),O(null);try{const Ue=await new Promise(Ce=>Ie.auth.getAccessToken(Ce)),Ke=await fetch(`${fe}/categories`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ue}`},body:JSON.stringify({name:ie,description:G.trim()})});if(!Ke.ok)throw new Error(await Ke.text());L(""),z(""),se("Category created."),ln()}catch(Ue){O((Ue==null?void 0:Ue.message)??"Failed to create category.")}finally{be(!1)}}};return je?s.jsxs("div",{className:"space-y-6",children:[s.jsxs(oe,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(_e,{className:"h-4 w-4"}),"Back to Websites"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Websites"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Add sites and manage website categories."})]}),s.jsxs("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:[s.jsx("button",{type:"button",onClick:()=>u("add"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="add"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Add Site"}),s.jsx("button",{type:"button",onClick:()=>u("categories"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="categories"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Website Categories"})]}),o==="add"&&s.jsxs("form",{className:"space-y-4 max-w-xl",onSubmit:wn,children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"URL *"}),s.jsx("input",{type:"url",value:p,onChange:X=>g(X.target.value),placeholder:"https://example.com",required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Title (optional)"}),s.jsx("input",{type:"text",value:v,onChange:X=>b(X.target.value),placeholder:"Display title",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description (optional)"}),s.jsx("textarea",{value:y,onChange:X=>{w(X.target.value),f(!1)},placeholder:"Short description",rows:4,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("button",{type:"button",onClick:vr,disabled:Y||!p.trim(),className:"mt-2 rounded-md border border-slate-700 bg-slate-800 px-3 py-1.5 text-xs font-medium text-slate-200 hover:bg-slate-700 disabled:opacity-50",children:Y?"Generating":"Generate AI description"}),h&&s.jsx("span",{className:"ml-2 text-xs uppercase tracking-wide text-slate-500",children:"AI summary"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Logo (optional, min 100100, max 5 MB)"}),s.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/gif,image/webp",onChange:tt,className:"block w-full text-xs text-slate-300 file:mr-3 file:rounded-md file:border-0 file:bg-slate-800 file:px-3 file:py-1.5 file:text-slate-100"}),s.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Or paste image URL (image will be copied to S3 on save):"}),s.jsx("input",{type:"url",value:Q,onChange:X=>{q(X.target.value),X.target.value.trim()&&j(null)},placeholder:"https://example.com/logo.png",className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),k&&s.jsx("div",{className:"mt-2",children:s.jsx("img",{src:k,alt:"Preview",className:"h-16 w-16 rounded-lg border border-slate-700 object-cover"})}),$&&s.jsx("p",{className:"mt-1 text-xs text-red-400",children:$})]}),s.jsxs("div",{ref:M,className:"relative",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Categories (optional)"}),s.jsx("input",{type:"text",value:_,onChange:X=>D(X.target.value),onFocus:()=>K(!0),placeholder:"Search and select",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),U&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"absolute left-0 right-0 top-full z-10 mt-1 max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",children:Se.length?Se.map(X=>s.jsx("button",{type:"button",onClick:()=>rt(X.id),className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:X.name},X.id)):s.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:"No matches"})}),d.length===0&&s.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["No categories."," ",s.jsx("button",{type:"button",onClick:()=>u("categories"),className:"text-brand-orange hover:underline",children:"Create categories"})]})]}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:B.map(X=>{const ie=d.find(fe=>fe.id===X);return s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(ie==null?void 0:ie.name)??X,s.jsx("button",{type:"button",onClick:()=>st(X),className:"hover:text-red-400","aria-label":"Remove",children:""})]},X)})})]}),s.jsx("button",{type:"submit",disabled:re,className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:re?"Adding":"Add Site"}),S&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:S}),C&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:C})]}),o==="categories"&&s.jsxs(s.Fragment,{children:[s.jsxs("form",{className:"space-y-3 max-w-md",onSubmit:$e,children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"New category name"}),s.jsx("input",{type:"text",value:F,onChange:X=>L(X.target.value),placeholder:"e.g. Developer tools",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description (optional)"}),s.jsx("input",{type:"text",value:G,onChange:X=>z(X.target.value),placeholder:"Optional description",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsx("button",{type:"submit",disabled:ne||!F.trim(),className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:ne?"Creating":"Create category"}),W&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:W}),ae&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:ae})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-sm font-medium text-slate-300 mb-2",children:"Existing categories"}),J?s.jsx("p",{className:"text-sm text-slate-500",children:"Loading"}):d.length===0?s.jsx("p",{className:"text-sm text-slate-500",children:"No categories yet. Create one above."}):s.jsx("ul",{className:"space-y-2",children:d.map(X=>s.jsx("li",{className:"rounded-lg border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm",children:ye===X.id?s.jsxs("form",{onSubmit:Me,className:"space-y-2",children:[s.jsx("input",{type:"text",value:we,onChange:ie=>Ee(ie.target.value),placeholder:"Name",required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",autoFocus:!0}),s.jsx("input",{type:"text",value:Le,onChange:ie=>Z(ie.target.value),placeholder:"Description (optional)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsxs("div",{className:"flex gap-2 flex-wrap",children:[s.jsx("button",{type:"submit",disabled:H||!we.trim(),className:"rounded-md bg-brand-orange px-3 py-1.5 text-xs font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:H?"Saving":"Save"}),s.jsx("button",{type:"button",onClick:ve,className:"rounded-md border border-slate-700 px-3 py-1.5 text-xs font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"}),s.jsx("button",{type:"button",onClick:()=>Oe(X.id),disabled:xe===X.id,className:"rounded-md border border-red-500/60 px-3 py-1.5 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:xe===X.id?"Deleting":"Delete"})]}),de&&s.jsx("p",{className:"text-xs text-red-400",children:de})]}):s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>le(X),className:"flex-1 min-w-0 text-left hover:bg-slate-800/50 rounded px-1 -mx-1 py-1 -my-1 transition-colors",children:[s.jsx("span",{className:"font-medium text-slate-200",children:X.name}),X.description&&s.jsx("span",{className:"text-slate-500 truncate max-w-xs ml-2",children:X.description})]}),s.jsx("button",{type:"button",onClick:()=>Oe(X.id),disabled:xe===X.id,className:"rounded px-2 py-1 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50 shrink-0","aria-label":"Delete category",children:xe===X.id?"":"Delete"})]})},X.id))})]})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Websites"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})};function kr(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function Sv(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}const kv=()=>{const e=Bt(),{user:t}=ze(),[n,r]=Zt(),a=n.get("tab"),l=a==="categories"?"categories":"add",[o,i]=c.useState(l);c.useEffect(()=>{i(a==="categories"?"categories":"add")},[a]);const u=le=>{i(le);const ve=new URLSearchParams(n);le==="categories"?ve.set("tab","categories"):ve.delete("tab"),r(ve)},[d,x]=c.useState([]),[p,g]=c.useState(""),[v,b]=c.useState(""),[y,w]=c.useState(null),[h,f]=c.useState(null),[m,j]=c.useState(null),[k,E]=c.useState(!1),[$,I]=c.useState([]),[Q,q]=c.useState(""),[B,ee]=c.useState(!1),[_,D]=c.useState(!1),[U,K]=c.useState(null),[re,N]=c.useState(null),S=c.useRef(null),[R,C]=c.useState(!0),[P,Y]=c.useState(null),[V,M]=c.useState(""),[J,T]=c.useState(""),[ae,O]=c.useState(!1),[F,L]=c.useState(null),[G,z]=c.useState(null),[ne,be]=c.useState(""),[W,se]=c.useState(""),[ye,he]=c.useState(!1),[we,Ee]=c.useState(null),[Le,Z]=c.useState(null),H=Be(t??null,"manager");c.useEffect(()=>{var Me;if(!H)return;const le=kr();if(!le)return;const ve=window;(Me=ve.auth)!=null&&Me.getAccessToken&&(async()=>{const Oe=await new Promise(fe=>ve.auth.getAccessToken(fe));if(!Oe)return;const $e=await fetch(`${le}/media-categories`,{headers:{Authorization:`Bearer ${Oe}`}});if(!$e.ok)return;const ie=((await $e.json()).categories??[]).map(fe=>({id:fe.PK||fe.id||"",name:fe.name||fe.PK||"",description:fe.description}));x(ie)})()},[H]),c.useEffect(()=>{function le(ve){S.current&&!S.current.contains(ve.target)&&ee(!1)}if(B)return document.addEventListener("mousedown",le),()=>document.removeEventListener("mousedown",le)},[B]);const ce=d.filter(le=>!$.includes(le.id)&&(!Q.trim()||(le.name||"").toLowerCase().includes(Q.toLowerCase()))),de=le=>{var Me;const ve=(Me=le.target.files)==null?void 0:Me[0];w(ve??null),j(null),N(null),h&&(URL.revokeObjectURL(h),f(null)),ve&&(f(URL.createObjectURL(ve)),ve.type.startsWith("video/")&&E(!0))},ge=c.useRef(null),xe=le=>{var Me;const ve=(Me=le.target.files)==null?void 0:Me[0];ve&&ve.type.startsWith("image/")&&(j(ve),E(!1)),le.target.value=""},me=le=>{$.includes(le)||I([...$,le]),q("")},je=le=>{I($.filter(ve=>ve!==le))},Se=async()=>{var Me;const le=kr();if(!le){Y("API URL not set."),C(!1);return}const ve=window;if(!((Me=ve.auth)!=null&&Me.getAccessToken)){Y("Sign in required."),C(!1);return}C(!0),Y(null);try{const Oe=await new Promise(fe=>ve.auth.getAccessToken(fe)),$e=await fetch(`${le}/media-categories`,{headers:{Authorization:`Bearer ${Oe}`}});if(!$e.ok)throw new Error(await $e.text());const ie=((await $e.json()).categories??[]).map(fe=>({id:fe.PK||fe.id||"",name:fe.name||fe.PK||"",description:fe.description}));x(ie)}catch(Oe){Y((Oe==null?void 0:Oe.message)??"Failed to load media categories.")}finally{C(!1)}};c.useEffect(()=>{H&&o==="categories"&&Se()},[H,o]);const tt=async le=>{var X;if(le.preventDefault(),!y){N("Please select an image or video file.");return}const ve=kr();if(!ve){N("API URL not set.");return}const Me=window;if(!((X=Me.auth)!=null&&X.getAccessToken)){N("Sign in required.");return}const Oe=y.type.startsWith("video/")?"video":"image",$e=`MEDIA#${Sv()}`;D(!0),N(null),K(null);try{const ie=await new Promise(Ce=>Me.auth.getAccessToken(Ce)),fe=await fetch(`${ve}/media/upload`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ie}`},body:JSON.stringify({mediaId:$e,mediaType:Oe,contentType:y.type||(Oe==="image"?"image/png":"video/mp4")})});if(!fe.ok)throw new Error("Upload request failed");const{uploadUrl:Ie,key:Pe}=await fe.json(),Ue=await fetch(`${ve}/media`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ie}`},body:JSON.stringify({id:$e,mediaKey:Pe,title:p.trim()||"Untitled",description:v.trim(),mediaType:Oe,categoryIds:$})});if(!Ue.ok)throw new Error(await Ue.text());if(!(await fetch(Ie,{method:"PUT",headers:{"Content-Type":y.type||(Oe==="image"?"image/png":"video/mp4")},body:y})).ok)throw new Error("File upload failed");if(Oe==="video"&&m){const Ce=await fetch(`${ve}/media/thumbnail-upload`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ie}`},body:JSON.stringify({mediaId:$e,contentType:m.type||"image/jpeg"})});if(Ce.ok){const{uploadUrl:Jn,key:br}=await Ce.json();(await fetch(Jn,{method:"PUT",headers:{"Content-Type":m.type||"image/jpeg"},body:m})).ok&&((await fetch(`${ve}/media`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ie}`},body:JSON.stringify({id:$e,thumbnailKey:br})})).ok||console.warn("Thumbnail uploaded but update failed"))}}K("Media added."),g(""),b(""),w(null),j(null),h&&URL.revokeObjectURL(h),f(null),I([]),setTimeout(()=>e("/media"),1500)}catch(ie){N((ie==null?void 0:ie.message)??"Failed to add media.")}finally{D(!1)}},rt=le=>{z(le.id),be(le.name),se(le.description??"")},st=()=>{z(null),be(""),se(""),Ee(null)},ln=async le=>{var Oe;if(le.preventDefault(),!G)return;const ve=kr();if(!ve)return;const Me=window;if((Oe=Me.auth)!=null&&Oe.getAccessToken){he(!0),Ee(null);try{const $e=await new Promise(ie=>Me.auth.getAccessToken(ie)),X=await fetch(`${ve}/media-categories`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${$e}`},body:JSON.stringify({id:G,name:ne.trim(),description:W.trim()||void 0})});if(!X.ok)throw new Error(await X.text());x(ie=>ie.map(fe=>fe.id===G?{...fe,name:ne.trim(),description:W.trim()||void 0}:fe)),st()}catch($e){Ee(($e==null?void 0:$e.message)??"Failed to update media category.")}finally{he(!1)}}},vr=async le=>{var Oe;if(!window.confirm("Delete this media category? Media using it will lose this category."))return;const ve=kr();if(!ve)return;const Me=window;if((Oe=Me.auth)!=null&&Oe.getAccessToken){Z(le);try{const $e=await new Promise(ie=>Me.auth.getAccessToken(ie)),X=await fetch(`${ve}/media-categories?id=${encodeURIComponent(le)}`,{method:"DELETE",headers:{Authorization:`Bearer ${$e}`}});if(!X.ok)throw new Error(await X.text());x(ie=>ie.filter(fe=>fe.id!==le)),G===le&&st()}catch($e){Y(($e==null?void 0:$e.message)??"Failed to delete media category.")}finally{Z(null)}}},wn=async le=>{var $e;le.preventDefault();const ve=V.trim();if(!ve)return;const Me=kr();if(!Me)return;const Oe=window;if(($e=Oe.auth)!=null&&$e.getAccessToken){O(!0),L(null),Y(null);try{const X=await new Promise(fe=>Oe.auth.getAccessToken(fe)),ie=await fetch(`${Me}/media-categories`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${X}`},body:JSON.stringify({name:ve,description:J.trim()})});if(!ie.ok)throw new Error(await ie.text());M(""),T(""),L("Media category created."),Se()}catch(X){Y((X==null?void 0:X.message)??"Failed to create media category.")}finally{O(!1)}}};return H?s.jsxs("div",{className:"space-y-6",children:[s.jsxs(oe,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(_e,{className:"h-4 w-4"}),"Back to Media"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Media"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Add media and manage media categories."})]}),s.jsxs("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:[s.jsx("button",{type:"button",onClick:()=>u("add"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="add"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Add Media"}),s.jsx("button",{type:"button",onClick:()=>u("categories"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="categories"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Media Categories"})]}),o==="add"&&s.jsxs("form",{className:"space-y-4 max-w-xl",onSubmit:tt,children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Title (optional)"}),s.jsx("input",{type:"text",value:p,onChange:le=>g(le.target.value),placeholder:"Untitled",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description (optional)"}),s.jsx("textarea",{value:v,onChange:le=>b(le.target.value),placeholder:"Description",rows:3,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Image or video *"}),s.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/gif,image/webp,video/mp4,video/webm",onChange:de,className:"block w-full text-xs text-slate-300 file:mr-3 file:rounded-md file:border-0 file:bg-slate-800 file:px-3 file:py-1.5 file:text-slate-100"}),s.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Videos get an auto-generated thumbnail from the 34 sec frame. Change it when editing."}),(y==null?void 0:y.type.startsWith("video/"))&&m&&s.jsxs("p",{className:"mt-1 text-xs text-emerald-400",children:["Custom thumbnail: ",m.name," ",s.jsx("button",{type:"button",onClick:()=>E(!0),className:"text-brand-orange hover:underline",children:"Change"})]}),k&&(y==null?void 0:y.type.startsWith("video/"))&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",role:"dialog","aria-modal":"true","aria-labelledby":"thumbnail-dialog-title",onClick:()=>E(!1),children:s.jsxs("div",{className:"rounded-lg border border-slate-700 bg-slate-900 p-6 shadow-xl max-w-sm w-full mx-4",onClick:le=>le.stopPropagation(),children:[s.jsx("h2",{id:"thumbnail-dialog-title",className:"text-lg font-medium text-slate-100 mb-2",children:"Add thumbnail"}),s.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"Choose a custom thumbnail image for this video (optional)."}),s.jsx("input",{ref:ge,type:"file",accept:"image/png,image/jpeg,image/gif,image/webp",onChange:xe,className:"hidden"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:()=>{var le;return(le=ge.current)==null?void 0:le.click()},className:"rounded-md bg-slate-700 px-3 py-2 text-sm font-medium text-slate-100 hover:bg-slate-600",children:"Choose file"}),s.jsx("button",{type:"button",onClick:()=>E(!1),className:"rounded-md border border-slate-600 px-3 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Skip"})]})]})}),h&&s.jsx("div",{className:"mt-2",children:y!=null&&y.type.startsWith("video/")?s.jsx("video",{src:h,muted:!0,controls:!0,className:"max-h-32 rounded-lg border border-slate-700"}):s.jsx("img",{src:h,alt:"Preview",className:"h-24 w-auto rounded-lg border border-slate-700 object-cover"})})]}),s.jsxs("div",{ref:S,className:"relative",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Media categories (optional)"}),s.jsx("input",{type:"text",value:Q,onChange:le=>q(le.target.value),onFocus:()=>ee(!0),placeholder:"Search and select",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),B&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"absolute left-0 right-0 top-full z-10 mt-1 max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",children:ce.length?ce.map(le=>s.jsx("button",{type:"button",onClick:()=>me(le.id),className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:le.name},le.id)):s.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:"No matches"})}),d.length===0&&s.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["No categories."," ",s.jsx("button",{type:"button",onClick:()=>u("categories"),className:"text-brand-orange hover:underline",children:"Create media categories"})]})]}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:$.map(le=>{const ve=d.find(Me=>Me.id===le);return s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(ve==null?void 0:ve.name)??le,s.jsx("button",{type:"button",onClick:()=>je(le),className:"hover:text-red-400","aria-label":"Remove",children:""})]},le)})})]}),s.jsx("button",{type:"submit",disabled:_||!y,className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:_?"Uploading":"Add Media"}),U&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:U}),re&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:re})]}),o==="categories"&&s.jsxs(s.Fragment,{children:[s.jsxs("form",{className:"space-y-3 max-w-md",onSubmit:wn,children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"New category name"}),s.jsx("input",{type:"text",value:V,onChange:le=>M(le.target.value),placeholder:"e.g. Tutorials",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description (optional)"}),s.jsx("input",{type:"text",value:J,onChange:le=>T(le.target.value),placeholder:"Optional description",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsx("button",{type:"submit",disabled:ae||!V.trim(),className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:ae?"Creating":"Create media category"}),F&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:F}),P&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:P})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-sm font-medium text-slate-300 mb-2",children:"Existing media categories"}),R?s.jsx("p",{className:"text-sm text-slate-500",children:"Loading"}):d.length===0?s.jsx("p",{className:"text-sm text-slate-500",children:"No media categories yet. Create one above."}):s.jsx("ul",{className:"space-y-2",children:d.map(le=>s.jsx("li",{className:"rounded-lg border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm",children:G===le.id?s.jsxs("form",{onSubmit:ln,className:"space-y-2",children:[s.jsx("input",{type:"text",value:ne,onChange:ve=>be(ve.target.value),placeholder:"Name",required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",autoFocus:!0}),s.jsx("input",{type:"text",value:W,onChange:ve=>se(ve.target.value),placeholder:"Description (optional)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsxs("div",{className:"flex gap-2 flex-wrap",children:[s.jsx("button",{type:"submit",disabled:ye||!ne.trim(),className:"rounded-md bg-brand-orange px-3 py-1.5 text-xs font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:ye?"Saving":"Save"}),s.jsx("button",{type:"button",onClick:st,className:"rounded-md border border-slate-700 px-3 py-1.5 text-xs font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"}),s.jsx("button",{type:"button",onClick:()=>vr(le.id),disabled:Le===le.id,className:"rounded-md border border-red-500/60 px-3 py-1.5 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:Le===le.id?"Deleting":"Delete"})]}),we&&s.jsx("p",{className:"text-xs text-red-400",children:we})]}):s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>rt(le),className:"flex-1 min-w-0 text-left hover:bg-slate-800/50 rounded px-1 -mx-1 py-1 -my-1 transition-colors",children:[s.jsx("span",{className:"font-medium text-slate-200",children:le.name}),le.description&&s.jsx("span",{className:"text-slate-500 truncate max-w-xs ml-2",children:le.description})]}),s.jsx("button",{type:"button",onClick:()=>vr(le.id),disabled:Le===le.id,className:"rounded px-2 py-1 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50 shrink-0","aria-label":"Delete category",children:Le===le.id?"":"Delete"})]})},le.id))})]})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Media"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})};function Ea(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const hd=100,Cv=5*1024*1024,Ev=()=>{const{id:e}=as(),t=Bt(),{user:n}=ze(),[r,a]=c.useState(!0),[l,o]=c.useState(""),[i,u]=c.useState(""),[d,x]=c.useState(""),[p,g]=c.useState(!1),[v,b]=c.useState([]),[y,w]=c.useState(""),[h,f]=c.useState(""),[m,j]=c.useState(null),[k,E]=c.useState(!1),[$,I]=c.useState(null),[Q,q]=c.useState(""),[B,ee]=c.useState(null),[_,D]=c.useState(null),[U,K]=c.useState([]),[re,N]=c.useState([]),[S,R]=c.useState(""),[C,P]=c.useState(!1),[Y,V]=c.useState(!1),[M,J]=c.useState(!1),[T,ae]=c.useState(!1),[O,F]=c.useState(null),[L,G]=c.useState(null),z=Be(n??null,"manager"),ne=e?decodeURIComponent(e):"";c.useEffect(()=>{var ge;if(!z||!ne){a(!1);return}const H=Ea();if(!H){G("API URL not set."),a(!1);return}const ce=window;if(!((ge=ce.auth)!=null&&ge.getAccessToken)){G("Sign in required."),a(!1);return}let de=!1;return(async()=>{const xe=await new Promise(rt=>ce.auth.getAccessToken(rt));if(!xe||de)return;const me=await fetch(`${H}/sites?id=${encodeURIComponent(ne)}`);if(me.status===404||!me.ok){de||G("Site not found."),a(!1);return}const Se=(await me.json()).site;if(de||!Se){a(!1);return}o(Se.url??""),u(Se.title??""),x(Se.description??""),g(!!Se.descriptionAiGenerated),b(Array.isArray(Se.tags)?Se.tags:[]),w(""),f(Se.scrapedContent??""),j(Se.logoUrl||null),N(Array.isArray(Se.categoryIds)?Se.categoryIds:[]);const tt=await fetch(`${H}/categories`,{headers:{Authorization:`Bearer ${xe}`}});if(tt.ok&&!de){const rt=await tt.json();K((rt.categories??[]).map(st=>({id:st.PK||st.id||"",name:st.name||st.PK||""})))}de||a(!1)})(),()=>{de=!0}},[z,ne]);const be=H=>{var ge;const ce=(ge=H.target.files)==null?void 0:ge[0];if(I(ce??null),q(""),D(null),E(!1),B&&(URL.revokeObjectURL(B),ee(null)),!ce)return;if(ce.size>Cv){D("Logo must be 5 MB or smaller.");return}const de=new Image;de.onload=()=>{if(de.naturalWidth<hd||de.naturalHeight<hd){D("Logo must be at least 100100 pixels.");return}D(null),ee(URL.createObjectURL(ce))},de.onerror=()=>D("Please choose a valid image file."),de.src=URL.createObjectURL(ce)},W=H=>{re.includes(H)||N([...re,H]),R(""),P(!1)},se=H=>{N(re.filter(ce=>ce!==H))},ye=()=>{const H=y.trim();H&&!v.includes(H)&&b([...v,H]),w("")},he=H=>b(v.filter(ce=>ce!==H)),we=U.filter(H=>!re.includes(H.id)&&(!S.trim()||(H.name||"").toLowerCase().includes(S.toLowerCase()))),Ee=async()=>{var ge;const H=l.trim();if(!H){G("Enter URL first.");return}const ce=Ea();if(!ce){G("API URL not set.");return}const de=window;if(!((ge=de.auth)!=null&&ge.getAccessToken)){G("Sign in required.");return}ae(!0),G(null);try{const xe=await new Promise(Se=>de.auth.getAccessToken(Se)),me=await fetch(`${ce}/sites/generate-description`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${xe}`},body:JSON.stringify({url:H})});if(!me.ok)throw new Error(await me.text());const je=await me.json();x(je.description??""),g(!0)}catch(xe){G((xe==null?void 0:xe.message)??"Failed to generate description.")}finally{ae(!1)}},Le=async H=>{var ge;if(H.preventDefault(),!ne)return;const ce=Ea();if(!ce){G("API URL not set.");return}const de=window;if(!((ge=de.auth)!=null&&ge.getAccessToken)){G("Sign in required.");return}if(!($&&_)){V(!0),G(null),F(null);try{const xe=await new Promise(tt=>de.auth.getAccessToken(tt));let me=null;if($){const tt=await fetch(`${ce}/sites/logo-upload`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${xe}`},body:JSON.stringify({siteId:ne,contentType:$.type||"image/png"})});if(!tt.ok)throw new Error("Logo upload request failed");const{uploadUrl:rt,key:st}=await tt.json();if(!(await fetch(rt,{method:"PUT",headers:{"Content-Type":$.type||"image/png"},body:$})).ok)throw new Error("Logo upload failed");me=st}else if(Q.trim()){const tt=await fetch(`${ce}/sites/logo-from-url`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${xe}`},body:JSON.stringify({siteId:ne,imageUrl:Q.trim()})});if(!tt.ok){const st=await tt.json().catch(()=>({}));throw new Error(st.error||await tt.text())}const rt=await tt.json();rt.key&&(me=rt.key)}const je={id:ne,url:l.trim(),title:i.trim()||l.trim(),description:d.trim(),descriptionAiGenerated:p,categoryIds:re,tags:v,scrapedContent:h.trim()||void 0};k?je.deleteLogo=!0:me&&(je.logoKey=me);const Se=await fetch(`${ce}/sites`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${xe}`},body:JSON.stringify(je)});if(!Se.ok)throw new Error(await Se.text());F("Site updated."),B&&URL.revokeObjectURL(B),I(null),ee(null),q(""),setTimeout(()=>t(`/websites/${encodeURIComponent(ne)}`),1200)}catch(xe){G((xe==null?void 0:xe.message)??"Failed to update site.")}finally{V(!1)}}},Z=async()=>{var de;if(!ne||!window.confirm("Delete this site? This cannot be undone."))return;const H=Ea();if(!H)return;const ce=window;if((de=ce.auth)!=null&&de.getAccessToken){J(!0),G(null);try{const ge=await new Promise(me=>ce.auth.getAccessToken(me)),xe=await fetch(`${H}/sites`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ge}`},body:JSON.stringify({id:ne})});if(!xe.ok)throw new Error(await xe.text());t("/websites")}catch(ge){G((ge==null?void 0:ge.message)??"Failed to delete site.")}finally{J(!1)}}};return z?r?s.jsxs("div",{className:"space-y-4",children:[s.jsxs(oe,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(_e,{className:"h-4 w-4"}),"Back to Websites"]}),s.jsx("p",{className:"text-sm text-slate-400",children:"Loading"})]}):L&&!l&&!i?s.jsxs("div",{className:"space-y-4",children:[s.jsxs(oe,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(_e,{className:"h-4 w-4"}),"Back to Websites"]}),s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:L})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs(oe,{to:`/websites/${encodeURIComponent(ne)}`,className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(_e,{className:"h-4 w-4"}),"Back to site"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit Site"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Update URL, title, description, logo, categories, and scraped content."})]}),s.jsxs("form",{className:"space-y-4 max-w-xl",onSubmit:Le,children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"URL *"}),s.jsx("input",{type:"url",value:l,onChange:H=>o(H.target.value),required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Title"}),s.jsx("input",{type:"text",value:i,onChange:H=>u(H.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description"}),s.jsx("textarea",{value:d,onChange:H=>{x(H.target.value),g(!1)},placeholder:"Short description",rows:4,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("button",{type:"button",onClick:Ee,disabled:T||!l.trim(),className:"mt-2 rounded-md border border-slate-700 bg-slate-800 px-3 py-1.5 text-xs font-medium text-slate-200 hover:bg-slate-700 disabled:opacity-50",children:T?"Generating":"Generate AI description"}),p&&s.jsx("span",{className:"ml-2 text-xs uppercase tracking-wide text-slate-500",children:"AI summary"}),s.jsxs("label",{className:"mt-2 block inline-flex items-center gap-2 text-xs text-slate-500",children:[s.jsx("input",{type:"checkbox",checked:p,onChange:H=>g(H.target.checked)}),"AI-generated summary"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Logo"}),m&&!k&&!B&&s.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[s.jsx("img",{src:m,alt:"Current logo",className:"h-12 w-12 rounded-lg border border-slate-700 object-cover"}),s.jsxs("label",{className:"text-xs text-slate-400",children:[s.jsx("input",{type:"checkbox",checked:k,onChange:H=>E(H.target.checked)}),s.jsx("span",{className:"ml-1",children:"Remove logo"})]})]}),s.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/gif,image/webp",onChange:be,className:"block w-full text-xs text-slate-300 file:mr-3 file:rounded-md file:border-0 file:bg-slate-800 file:px-3 file:py-1.5 file:text-slate-100"}),s.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Or paste image URL (image will be copied to S3 on save):"}),s.jsx("input",{type:"url",value:Q,onChange:H=>{q(H.target.value),H.target.value.trim()&&I(null)},placeholder:"https://example.com/logo.png",className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),B&&s.jsx("div",{className:"mt-2",children:s.jsx("img",{src:B,alt:"New logo",className:"h-16 w-16 rounded-lg border border-slate-700 object-cover"})}),_&&s.jsx("p",{className:"mt-1 text-xs text-red-400",children:_})]}),s.jsxs("div",{className:"relative",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Categories"}),s.jsx("input",{type:"text",value:S,onChange:H=>R(H.target.value),onFocus:()=>P(!0),placeholder:"Search and select",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),C&&s.jsx("div",{className:"absolute left-0 right-0 top-full z-10 mt-1 max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",children:we.length?we.map(H=>s.jsx("button",{type:"button",onClick:()=>W(H.id),className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:H.name},H.id)):s.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:"No matches"})}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:re.map(H=>{const ce=U.find(de=>de.id===H);return s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(ce==null?void 0:ce.name)??H,s.jsx("button",{type:"button",onClick:()=>se(H),className:"hover:text-red-400","aria-label":"Remove",children:""})]},H)})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Tags"}),s.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:v.map(H=>s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[H,s.jsx("button",{type:"button",onClick:()=>he(H),className:"hover:text-red-400","aria-label":"Remove",children:""})]},H))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:y,onChange:H=>w(H.target.value),onKeyDown:H=>H.key==="Enter"&&(H.preventDefault(),ye()),placeholder:"Add tag",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("button",{type:"button",onClick:ye,className:"rounded-md border border-slate-700 bg-slate-800 px-3 py-2 text-sm text-slate-200 hover:bg-slate-700",children:"Add"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Scraped content (optional)"}),s.jsx("textarea",{value:h,onChange:H=>f(H.target.value),rows:6,placeholder:"Paste or edit scraped content (e.g. README, about page)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm font-mono text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsx("button",{type:"submit",disabled:Y,className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:Y?"Saving":"Save changes"}),s.jsx("button",{type:"button",onClick:Z,disabled:M||Y,className:"rounded-md border border-red-500/60 px-4 py-2 text-sm font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:M?"Deleting":"Delete entry"})]}),O&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:O}),L&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:L})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit Site"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})};function Cr(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Pv=()=>{const{id:e}=as(),t=Bt(),{user:n}=ze(),[r,a]=c.useState(!0),[l,o]=c.useState(""),[i,u]=c.useState(""),[d,x]=c.useState(null),[p,g]=c.useState(null),[v,b]=c.useState("image"),[y,w]=c.useState(!1),[h,f]=c.useState(!1),[m,j]=c.useState(!1),[k,E]=c.useState([]),[$,I]=c.useState([]),[Q,q]=c.useState(""),[B,ee]=c.useState(!1),[_,D]=c.useState(!1),[U,K]=c.useState(!1),[re,N]=c.useState(null),[S,R]=c.useState(null),C=Be(n??null,"manager"),P=e?decodeURIComponent(e):"";c.useEffect(()=>{var ne;if(!C||!P){a(!1);return}const L=Cr();if(!L){R("API URL not set."),a(!1);return}const G=window;if(!((ne=G.auth)!=null&&ne.getAccessToken)){R("Sign in required."),a(!1);return}let z=!1;return(async()=>{const be=await new Promise(Ee=>G.auth.getAccessToken(Ee));if(!be||z)return;const W=await fetch(`${L}/media?id=${encodeURIComponent(P)}`);if(W.status===404||!W.ok){z||R("Media not found."),a(!1);return}const se=await W.json(),ye=Array.isArray(se.media)?se.media[0]:se.media;if(z||!ye){a(!1);return}const he=ye;o(he.title??""),u(he.description??""),x(he.mediaUrl||null),g(he.thumbnailUrl||null),b(he.mediaType||"image"),I(Array.isArray(he.categoryIds)?he.categoryIds:[]);const we=await fetch(`${L}/media-categories`,{headers:{Authorization:`Bearer ${be}`}});if(we.ok&&!z){const Ee=await we.json();E((Ee.categories??[]).map(Le=>({id:Le.PK||Le.id||"",name:Le.name||Le.PK||""})))}z||a(!1)})(),()=>{z=!0}},[C,P]);const Y=L=>{$.includes(L)||I([...$,L]),q(""),ee(!1)},V=L=>{I($.filter(G=>G!==L))},M=k.filter(L=>!$.includes(L.id)&&(!Q.trim()||(L.name||"").toLowerCase().includes(Q.toLowerCase()))),J=async L=>{var ne;if(L.preventDefault(),!P)return;const G=Cr();if(!G){R("API URL not set.");return}const z=window;if(!((ne=z.auth)!=null&&ne.getAccessToken)){R("Sign in required.");return}D(!0),R(null),N(null);try{const be=await new Promise(se=>z.auth.getAccessToken(se)),W=await fetch(`${G}/media`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${be}`},body:JSON.stringify({id:P,title:l.trim()||"Untitled",description:i.trim(),categoryIds:$})});if(!W.ok)throw new Error(await W.text());N("Media updated."),setTimeout(()=>t("/media"),1200)}catch(be){R((be==null?void 0:be.message)??"Failed to update media.")}finally{D(!1)}},T=async L=>{var be,W;const G=(be=L.target.files)==null?void 0:be[0];if(!G||!P)return;if(!G.type.startsWith("image/")){R("Please choose an image (PNG, JPEG, GIF, WebP).");return}const z=Cr();if(!z)return;const ne=window;if((W=ne.auth)!=null&&W.getAccessToken){f(!0),R(null),N(null);try{const se=await new Promise(H=>ne.auth.getAccessToken(H)),ye=await fetch(`${z}/media/thumbnail-upload`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${se}`},body:JSON.stringify({mediaId:P,contentType:G.type||"image/png"})});if(!ye.ok)throw new Error("Upload request failed");const{uploadUrl:he,key:we}=await ye.json();if(!(await fetch(he,{method:"PUT",headers:{"Content-Type":G.type||"image/png"},body:G})).ok)throw new Error("File upload failed");const Le=await fetch(`${z}/media`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${se}`},body:JSON.stringify({id:P,thumbnailKey:we})});if(!Le.ok)throw new Error(await Le.text());const Z=await fetch(`${z}/media?id=${encodeURIComponent(P)}`);if(Z.ok){const H=await Z.json(),ce=Array.isArray(H.media)?H.media[0]:H.media;ce!=null&&ce.thumbnailUrl&&g(ce.thumbnailUrl)}N("Logo/thumbnail updated.")}catch(se){R((se==null?void 0:se.message)??"Failed to upload thumbnail.")}finally{f(!1),L.target.value=""}}},ae=async()=>{var z;if(!P||!window.confirm("Remove the custom logo/thumbnail? You can regenerate from video or upload a new one."))return;const L=Cr();if(!L)return;const G=window;if((z=G.auth)!=null&&z.getAccessToken){j(!0),R(null),N(null);try{const ne=await new Promise(W=>G.auth.getAccessToken(W)),be=await fetch(`${L}/media`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ne}`},body:JSON.stringify({id:P,deleteThumbnail:!0})});if(!be.ok)throw new Error(await be.text());g(null),N("Logo/thumbnail removed.")}catch(ne){R((ne==null?void 0:ne.message)??"Failed to remove thumbnail.")}finally{j(!1)}}},O=async()=>{var z;if(!P)return;const L=Cr();if(!L)return;const G=window;if((z=G.auth)!=null&&z.getAccessToken){w(!0),R(null),N(null);try{const ne=await new Promise(se=>G.auth.getAccessToken(se)),be=await fetch(`${L}/media/regenerate-thumbnail`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ne}`},body:JSON.stringify({mediaId:P})});if(!be.ok)throw new Error(await be.text());N("Thumbnail regeneration started. New thumbnail will appear in 3060 seconds.");const W=async se=>{if(se>6)return;await new Promise(he=>setTimeout(he,1e4));const ye=await fetch(`${L}/media?id=${encodeURIComponent(P)}`);if(ye.ok){const he=await ye.json(),we=Array.isArray(he.media)?he.media[0]:he.media;if(we!=null&&we.thumbnailUrl){g(we.thumbnailUrl),N("Thumbnail updated.");return}}W(se+1)};W(1)}catch(ne){R((ne==null?void 0:ne.message)??"Failed to regenerate thumbnail.")}finally{w(!1)}}},F=async()=>{var z;if(!P||!window.confirm("Delete this media item? This cannot be undone."))return;const L=Cr();if(!L)return;const G=window;if((z=G.auth)!=null&&z.getAccessToken){K(!0),R(null);try{const ne=await new Promise(W=>G.auth.getAccessToken(W)),be=await fetch(`${L}/media?id=${encodeURIComponent(P)}`,{method:"DELETE",headers:{Authorization:`Bearer ${ne}`}});if(!be.ok)throw new Error(await be.text());t("/media")}catch(ne){R((ne==null?void 0:ne.message)??"Failed to delete media.")}finally{K(!1)}}};return C?r?s.jsxs("div",{className:"space-y-4",children:[s.jsxs(oe,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(_e,{className:"h-4 w-4"}),"Back to Media"]}),s.jsx("p",{className:"text-sm text-slate-400",children:"Loading"})]}):S&&!l&&!i?s.jsxs("div",{className:"space-y-4",children:[s.jsxs(oe,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(_e,{className:"h-4 w-4"}),"Back to Media"]}),s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:S})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs(oe,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(_e,{className:"h-4 w-4"}),"Back to Media"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit Media"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Update title, description, and categories. The file itself cannot be changed here."})]}),d&&s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 overflow-hidden max-w-2xl",children:[s.jsx("p",{className:"px-4 py-2 text-xs font-medium text-slate-400 border-b border-slate-800",children:"Current media"}),s.jsx("div",{className:"p-4 flex justify-center items-center bg-slate-900/40 min-h-[160px]",children:v==="video"?s.jsx("video",{src:d,controls:!0,className:"max-w-full max-h-[50vh] rounded-lg border border-slate-700",playsInline:!0}):s.jsx("img",{src:d,alt:l||"Media",className:"max-w-full max-h-[50vh] w-auto h-auto object-contain rounded-lg border border-slate-700"})}),v==="video"&&s.jsxs("div",{className:"px-4 py-3 border-t border-slate-800 space-y-2",children:[s.jsx("p",{className:"text-xs font-medium text-slate-400",children:"Logo / Thumbnail"}),s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[p&&s.jsx("img",{src:p,alt:"Thumbnail",className:"h-16 w-auto rounded border border-slate-700 object-cover"}),s.jsx("button",{type:"button",onClick:O,disabled:y,className:"rounded-md border border-slate-600 px-3 py-1.5 text-sm font-medium text-slate-200 hover:bg-slate-800 disabled:opacity-50",children:y?"Regenerating":"Take screenshot"}),s.jsxs("label",{className:"cursor-pointer rounded-md border border-slate-600 px-3 py-1.5 text-sm font-medium text-slate-200 hover:bg-slate-800",children:[h?"Uploading":"Add logo",s.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/gif,image/webp",className:"hidden",onChange:T,disabled:h})]}),p&&s.jsx("button",{type:"button",onClick:ae,disabled:m,className:"rounded-md border border-red-500/60 px-3 py-1.5 text-sm font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:m?"Removing":"Delete logo"})]})]})]}),s.jsxs("form",{className:"space-y-4 max-w-xl",onSubmit:J,children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Title"}),s.jsx("input",{type:"text",value:l,onChange:L=>o(L.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description"}),s.jsx("textarea",{value:i,onChange:L=>u(L.target.value),rows:4,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Media categories"}),s.jsx("input",{type:"text",value:Q,onChange:L=>q(L.target.value),onFocus:()=>ee(!0),placeholder:"Search and select",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),B&&s.jsx("div",{className:"absolute left-0 right-0 top-full z-10 mt-1 max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",children:M.length?M.map(L=>s.jsx("button",{type:"button",onClick:()=>Y(L.id),className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:L.name},L.id)):s.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:"No matches"})}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:$.map(L=>{const G=k.find(z=>z.id===L);return s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(G==null?void 0:G.name)??L,s.jsx("button",{type:"button",onClick:()=>V(L),className:"hover:text-red-400","aria-label":"Remove",children:""})]},L)})})]}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsx("button",{type:"submit",disabled:_,className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:_?"Saving":"Save changes"}),s.jsx("button",{type:"button",onClick:F,disabled:U||_,className:"rounded-md border border-red-500/60 px-4 py-2 text-sm font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:U?"Deleting":"Delete entry"})]}),re&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:re}),S&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:S})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit Media"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})},xd={admin:"SuperAdmin",manager:"Manager",user:"User"},_i=[{value:-8,label:"UTC-8"},{value:-5,label:"UTC-5"},{value:0,label:"UTC+0/GMT"}];function Po(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function Tv(e,t,n){if(!e&&!n)return"";if(!e)return n?`from ${n}`:"";try{const r=new Date(e);if(isNaN(r.getTime()))return e+(n?` from ${n}`:"");const a=r.getTime()+(t||0)*36e5,l=new Date(a),o=y=>y<10?"0"+y:""+y,i=l.getUTCFullYear(),u=o(l.getUTCMonth()+1),d=o(l.getUTCDate()),x=o(l.getUTCHours()),p=o(l.getUTCMinutes()),g=_i.find(y=>y.value===t),v=g?g.label:t<0?"UTC"+t:"UTC+"+t;let b=`${i}-${u}-${d} ${x}:${p} ${v}`;return n&&(b+=` from ${n}`),b}catch{return e+(n?` from ${n}`:"")}}const Av=e=>e==="admin"?"bg-amber-500/20 text-amber-200":e==="manager"?"bg-blue-500/20 text-blue-200":e==="user"?"bg-slate-600/30 text-slate-300":"bg-emerald-500/20 text-emerald-200",Rv=()=>{var J;const e=Bt(),[t]=Zt(),n=t.get("username")??"",r=t.get("email")??"",a=t.get("status")??"",{user:l}=ze(),[o,i]=c.useState(!0),[u,d]=c.useState(null),[x,p]=c.useState(null),[g,v]=c.useState([]),[b,y]=c.useState([]),[w,h]=c.useState([]),[f,m]=c.useState(""),[j,k]=c.useState(!1),[E,$]=c.useState(!1),[I,Q]=c.useState(null),[q,B]=c.useState(!1),[ee,_]=c.useState(-8),D=Be(l??null,"manager"),U=((J=l==null?void 0:l.groups)==null?void 0:J.includes("admin"))??!1,K=U?["admin","manager","user"]:["user"],re=async()=>{var O;if(!n)return;const T=Po();if(!T){d("API URL not set."),i(!1);return}const ae=window;if(!((O=ae.auth)!=null&&O.getAccessToken)){d("Sign in required."),i(!1);return}i(!0),d(null);try{const F=await new Promise(W=>ae.auth.getAccessToken(W)),[L,G]=await Promise.all([fetch(`${T}/admin/users/${encodeURIComponent(n)}/groups`,{headers:{Authorization:`Bearer ${F}`}}),fetch(`${T}/admin/groups`,{headers:{Authorization:`Bearer ${F}`}})]);if(!L.ok){const W=await L.json().catch(()=>({}));throw new Error(W.error||"Failed to load user")}const z=await L.json(),be=((await G.json()).groups??[]).map(W=>W.name??(W.PK??"").replace("GROUP#","")).filter(Boolean);p({email:z.username??n,status:a,lastLoginAt:z.lastLoginAt??"",lastLoginIp:z.lastLoginIp??"",cognitoGroups:z.cognitoGroups??[],customGroups:z.customGroups??[]}),y([...z.cognitoGroups??[]]),h([...z.customGroups??[]]),v(be)}catch(F){d((F==null?void 0:F.message)??"Failed to load user")}finally{i(!1)}};c.useEffect(()=>{const T=parseInt(sessionStorage.getItem("funkedupshift_lastlogin_tz")??"-8",10);!isNaN(T)&&_i.some(ae=>ae.value===T)&&_(T)},[]),c.useEffect(()=>{D&&n&&re()},[D,n]);const N=T=>{T&&!b.includes(T)&&y(ae=>[...ae,T])},S=T=>{y(ae=>ae.filter(O=>O!==T))},R=T=>{T&&!w.includes(T)&&(h(ae=>[...ae,T]),m(""),k(!1))},C=T=>{h(ae=>ae.filter(O=>O!==T))},P=g.filter(T=>w.includes(T)?!1:f.trim()?T.toLowerCase().includes(f.toLowerCase().trim()):!0),Y=async T=>{var W;if(T.preventDefault(),!n)return;const ae=Po();if(!ae)return;const O=window;if(!((W=O.auth)!=null&&W.getAccessToken))return;const F=(x==null?void 0:x.cognitoGroups)??[],L=(x==null?void 0:x.customGroups)??[];let G=b.filter(se=>!F.includes(se)),z=F.filter(se=>!b.includes(se));U||(G=G.filter(se=>se==="user"),z=z.filter(se=>se==="user"));const ne=w.filter(se=>!L.includes(se)),be=L.filter(se=>!w.includes(se));$(!0),Q(null);try{const ye={headers:{"Content-Type":"application/json",Authorization:`Bearer ${await new Promise(Z=>O.auth.getAccessToken(Z))}`}},he=encodeURIComponent,we=[];G.forEach(Z=>we.push(fetch(`${ae}/admin/users/${he(n)}/groups`,{method:"POST",...ye,body:JSON.stringify({groupName:Z})}))),z.forEach(Z=>we.push(fetch(`${ae}/admin/users/${he(n)}/groups/${he(Z)}`,{method:"DELETE",headers:ye.headers}))),ne.forEach(Z=>we.push(fetch(`${ae}/admin/users/${he(n)}/groups`,{method:"POST",...ye,body:JSON.stringify({groupName:Z})}))),be.forEach(Z=>we.push(fetch(`${ae}/admin/users/${he(n)}/groups/${he(Z)}`,{method:"DELETE",headers:ye.headers})));const Le=(await Promise.all(we)).find(Z=>!Z.ok);if(Le){const Z=await Le.json().catch(()=>({}));throw new Error(Z.error||"Failed to save")}window.alert("Changes saved"),e("/admin/membership")}catch(se){Q((se==null?void 0:se.message)??"Failed to save")}finally{$(!1)}},V=T=>{const ae=parseInt(T.target.value,10);_(ae),sessionStorage.setItem("funkedupshift_lastlogin_tz",String(ae))},M=async()=>{var F;const T=r||(x==null?void 0:x.email)||n;if(!window.confirm(`Delete user "${T}"? This cannot be undone.`))return;const ae=Po();if(!ae)return;const O=window;if((F=O.auth)!=null&&F.getAccessToken){B(!0);try{const L=await new Promise(z=>O.auth.getAccessToken(z)),G=await fetch(`${ae}/admin/users/${encodeURIComponent(n)}`,{method:"DELETE",headers:{Authorization:`Bearer ${L}`}});if(!G.ok){const z=await G.json().catch(()=>({}));throw new Error(z.error||"Failed to delete user")}e("/admin/membership")}catch(L){Q((L==null?void 0:L.message)??"Failed to delete user")}finally{B(!1)}}};return D?n?o?s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit User"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Loading"})]}):u||!x?s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit User"}),s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:u??"Failed to load user"})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs(oe,{to:"/admin/membership",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(_e,{className:"h-4 w-4"}),"Back to users"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit User"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Adjust system roles and custom groups."}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("label",{htmlFor:"tz-select",className:"text-slate-500",children:"Last login timezone:"}),s.jsx("select",{id:"tz-select",value:ee,onChange:V,className:"rounded border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 text-sm",children:_i.map(T=>s.jsx("option",{value:T.value,children:T.label},T.value))})]})]}),s.jsxs("form",{onSubmit:Y,className:"space-y-6 max-w-2xl",children:[s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("h2",{className:"text-sm font-medium text-slate-300 mb-3",children:"User info"}),s.jsx("table",{className:"text-sm",children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{className:"py-1 pr-4 font-medium text-slate-400 w-28",children:"Email"}),s.jsx("td",{className:"py-1 text-slate-200",children:r||x.email})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"py-1 pr-4 font-medium text-slate-400",children:"Status"}),s.jsx("td",{className:"py-1 text-slate-200",children:a||x.status||""})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"py-1 pr-4 font-medium text-slate-400",children:"Last login"}),s.jsx("td",{className:"py-1 text-slate-200",children:Tv(x.lastLoginAt,ee,x.lastLoginIp)})]})]})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200",children:"System roles"}),s.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-200 w-full max-w-xs",onChange:T=>{const ae=T.target.value;ae&&N(ae),T.target.value=""},children:[s.jsx("option",{value:"",children:"Select role to add"}),K.filter(T=>!b.includes(T)).map(T=>s.jsx("option",{value:T,children:xd[T]??T},T))]}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:b.map(T=>{const ae=U||T==="user";return s.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded text-sm ${Av(T)}`,children:[xd[T]??T,ae&&s.jsx("button",{type:"button",onClick:()=>S(T),className:"ml-0.5 hover:text-red-300","aria-label":"Remove",children:""})]},T)})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200",children:"Custom groups"}),g.length===0?s.jsxs("p",{className:"text-sm text-slate-500",children:["No custom groups. ",s.jsx(oe,{to:"/admin/membership?tab=groups",className:"text-brand-orange hover:underline",children:"Create groups"}),"."]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"relative max-w-xs",children:[s.jsx("input",{type:"text",value:f,onChange:T=>{m(T.target.value),k(!0)},onFocus:()=>k(!0),placeholder:"Search or select groups",className:"w-full rounded border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-200 placeholder:text-slate-500"}),j&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>k(!1),"aria-hidden":"true"}),s.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 max-h-48 overflow-y-auto rounded border border-slate-700 bg-slate-900 shadow-lg z-20",children:P.length===0?s.jsx("div",{className:"px-3 py-2 text-sm text-slate-500",children:"No matches"}):P.map(T=>s.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",onClick:()=>R(T),children:T},T))})]})]}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:w.map(T=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-sm bg-emerald-500/20 text-emerald-200",children:[T,s.jsx("button",{type:"button",onClick:()=>C(T),className:"ml-0.5 hover:text-red-300","aria-label":"Remove",children:""})]},T))})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[s.jsx("button",{type:"submit",disabled:E,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:E?"Saving":"Save"}),s.jsx(oe,{to:"/admin/membership",className:"rounded-md border border-slate-700 px-4 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"}),U&&s.jsx("button",{type:"button",onClick:M,disabled:q||E,className:"rounded-md border border-red-500/60 bg-red-500/10 px-4 py-2 text-sm font-medium text-red-200 hover:bg-red-500/20 disabled:opacity-50",children:q?"Deleting":"Delete user"})]}),I&&s.jsx("p",{className:"text-sm text-red-400",children:I})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit User"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Missing username in URL."})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit User"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})},Lv=()=>{const{user:e,refreshAuth:t}=ze(),n=Bt(),[r,a]=c.useState("signin"),[l,o]=c.useState(""),[i,u]=c.useState(""),[d,x]=c.useState(!1),[p,g]=c.useState(null),[v,b]=c.useState(null),y=h=>{a(h),g(null),b(null)},w=async h=>{h.preventDefault(),g(null),b(null);const f=l.trim(),m=i.trim();if(!f||!m){g("Email and password are required.");return}const j=window;if(!j.auth){g("Auth is not configured. Check Cognito frontend setup.");return}x(!0);try{r==="signin"?(await new Promise((k,E)=>{j.auth.signIn(f,m,$=>{$?E($):k()})}),b("Signed in successfully. Redirecting"),await t()):(await new Promise((k,E)=>{j.auth.signUp(f,m,$=>{$?E($):k()})}),b("Account created successfully. You can now sign in."),a("signin")),r==="signin"&&setTimeout(()=>n("/"),800)}catch(k){const E=(k==null?void 0:k.message)||"Authentication failed. Please try again.";g(E)}finally{x(!1)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Sign in / Sign up"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Use your Funkedupshift account to rate sites, add notes, and manage curated content (based on your role)."})]}),e&&s.jsxs("div",{className:"rounded-xl border border-emerald-600/60 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-100",children:["You're currently signed in as"," ",s.jsx("span",{className:"font-semibold text-emerald-200",children:e.email})," (",e.role==="superadmin"?"SuperAdmin":e.role,"). You can safely close this page or continue browsing websites and media."]}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-[minmax(0,1.3fr)_minmax(0,1fr)] items-start",children:[s.jsxs("section",{className:"rounded-2xl border border-slate-800 bg-slate-950/70 p-5 shadow-lg shadow-slate-950/40",children:[s.jsxs("div",{className:"mb-4 flex gap-2 rounded-full bg-slate-900/70 p-1 text-xs font-medium text-slate-300",children:[s.jsx("button",{type:"button",onClick:()=>y("signin"),className:["flex-1 rounded-full px-3 py-1.5 transition-colors",r==="signin"?"bg-slate-50 text-slate-950":"hover:bg-slate-800/80"].join(" "),children:"Sign in"}),s.jsx("button",{type:"button",onClick:()=>y("signup"),className:["flex-1 rounded-full px-3 py-1.5 transition-colors",r==="signup"?"bg-slate-50 text-slate-950":"hover:bg-slate-800/80"].join(" "),children:"Sign up"})]}),s.jsxs("form",{className:"space-y-4",onSubmit:w,children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{htmlFor:"authEmail",className:"text-xs font-medium uppercase tracking-[0.18em] text-slate-400",children:"Email"}),s.jsx("input",{id:"authEmail",type:"email",autoComplete:"email",value:l,onChange:h=>o(h.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",placeholder:"you@example.com",required:!0})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{htmlFor:"authPassword",className:"text-xs font-medium uppercase tracking-[0.18em] text-slate-400",children:"Password"}),s.jsx("input",{id:"authPassword",type:"password",autoComplete:r==="signin"?"current-password":"new-password",value:i,onChange:h=>u(h.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",placeholder:r==="signup"?"At least 8 characters":"Your password",minLength:8,required:!0})]}),p&&s.jsx("div",{className:"rounded-md border border-red-500/70 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:p}),v&&!p&&s.jsx("div",{className:"rounded-md border border-emerald-500/70 bg-emerald-500/10 px-3 py-2 text-xs text-emerald-100",children:v}),s.jsx("button",{type:"submit",disabled:d,className:"inline-flex w-full items-center justify-center rounded-full bg-brand-orange px-4 py-2.5 text-sm font-semibold text-slate-950 shadow-md shadow-orange-500/40 transition hover:bg-orange-500 disabled:cursor-not-allowed disabled:opacity-70",children:d?r==="signin"?"Signing in":"Creating account":r==="signin"?"Sign in":"Create account"})]})]}),s.jsxs("aside",{className:"space-y-3 rounded-2xl border border-slate-800 bg-slate-950/40 p-4 text-xs text-slate-300",children:[s.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-[0.25em] text-slate-500",children:"How access works"}),s.jsxs("ul",{className:"space-y-2",children:[s.jsxs("li",{children:[s.jsx("span",{className:"font-semibold text-slate-100",children:"Guests"})," can browse all websites and media without signing in."]}),s.jsxs("li",{children:[s.jsx("span",{className:"font-semibold text-slate-100",children:"Signed-in users"})," can star sites and media, and later add their own metadata and comments."]}),s.jsxs("li",{children:[s.jsx("span",{className:"font-semibold text-slate-100",children:"Managers & admins"})," can curate sites, media, and categories, with extra tooling in the admin area."]})]}),s.jsx("p",{className:"text-slate-500",children:"If you don't see expected admin controls after signing in, confirm your Cognito group membership in the AWS Console."})]})]})]})},$v={admin:"SuperAdmin",manager:"Manager",user:"User"},_c=[{value:-8,label:"UTC-8"},{value:-5,label:"UTC-5"},{value:0,label:"UTC+0/GMT"}],Np="funkedupshift_lastlogin_tz";function Iv(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function Uv(){try{const e=parseInt(sessionStorage.getItem(Np)??"",10);if(!isNaN(e)&&_c.some(t=>t.value===e))return e}catch{}return-8}function Dv(e){try{sessionStorage.setItem(Np,String(e))}catch{}}function Mv(e,t,n){if(!e)return n?`from ${n}`:"";try{const r=new Date(e);if(isNaN(r.getTime()))return e;const a=r.getTime()+t*36e5,l=new Date(a),o=y=>y<10?"0"+y:""+y,i=l.getUTCFullYear(),u=o(l.getUTCMonth()+1),d=o(l.getUTCDate()),x=o(l.getUTCHours()),p=o(l.getUTCMinutes()),g=_c.find(y=>y.value===t),v=g?g.label:t<0?`UTC${t}`:`UTC+${t}`;let b=`${i}-${u}-${d} ${x}:${p} ${v}`;return n&&(b+=` from ${n}`),b}catch{return e}}const Ov=()=>{var q,B,ee,_;const{user:e}=ze(),[t,n]=c.useState(null),[r,a]=c.useState(""),[l,o]=c.useState(Uv),[i,u]=c.useState(!0),[d,x]=c.useState(!1),[p,g]=c.useState(null),[v,b]=c.useState(""),[y,w]=c.useState(!1),[h,f]=c.useState(null),m=Iv(),j=async(D,U)=>{var S;const K=window;if(!((S=K.auth)!=null&&S.getAccessToken))throw new Error("Not signed in");const re=await new Promise(R=>K.auth.getAccessToken(R)),N={...U==null?void 0:U.headers,Authorization:`Bearer ${re}`};return fetch(D,{...U,headers:N})};c.useEffect(()=>{if(!e||!m){u(!1);return}let D=!1;return j(`${m}/profile`).then(U=>U.ok?U.json():U.json().then(K=>Promise.reject(new Error(K.error||"Failed")))).then(U=>{var K;D||(n(U),a(((K=U.profile)==null?void 0:K.description)??""))}).catch(U=>{D||f({text:`Failed to load profile: ${(U==null?void 0:U.message)??"Unknown"}`,error:!0})}).finally(()=>{D||u(!1)}),()=>{D=!0}},[e,m]);const k=async()=>{if(m){x(!0),f(null);try{const D=await j(`${m}/profile`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:r.trim().slice(0,100)})});if(!D.ok){const U=await D.json();throw new Error(U.error||"Failed")}f({text:"Saved.",error:!1})}catch(D){f({text:`Error: ${(D==null?void 0:D.message)??"Unknown"}`,error:!0})}finally{x(!1)}}},E=async D=>{var re,N;const U=(re=D.target.files)==null?void 0:re[0];if(D.target.value="",!U||!m)return;if(g(null),!((N=U.type)!=null&&N.match(/^image\/(png|jpeg|jpg|gif|webp)$/))){g("Please choose PNG, JPEG, GIF, or WebP.");return}const K=U.type||"image/png";try{const S=await j(`${m}/profile/avatar-upload`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contentType:K})});if(!S.ok){const M=await S.json();throw new Error(M.error||"Upload failed")}const{uploadUrl:R,key:C}=await S.json();if(!(await fetch(R,{method:"PUT",body:U,headers:{"Content-Type":K}})).ok)throw new Error("Upload failed");const Y=await j(`${m}/profile`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({avatarKey:C})});if(!Y.ok){const M=await Y.json();throw new Error(M.error||"Failed")}const V=await j(`${m}/profile`).then(M=>M.json());n(V)}catch(S){g(`Error: ${(S==null?void 0:S.message)??"Unknown"}`)}},$=async()=>{if(m){g(null);try{const D=await j(`${m}/profile/avatar`,{method:"DELETE"});if(!D.ok){const U=await D.json();throw new Error(U.error||"Failed")}n(U=>U?{...U,profile:{...U.profile,avatarUrl:void 0,avatarKey:void 0}}:null)}catch(D){g(`Error: ${(D==null?void 0:D.message)??"Unknown"}`)}}},I=async()=>{const D=v.trim();if(!(!D||!m)){g(null),w(!0);try{const U=await j(`${m}/profile/avatar-from-url`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageUrl:D})});if(!U.ok){const S=await U.json();throw new Error(S.error||"Import failed")}const{key:K}=await U.json(),re=await j(`${m}/profile`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({avatarKey:K})});if(!re.ok){const S=await re.json();throw new Error(S.error||"Failed")}const N=await j(`${m}/profile`).then(S=>S.json());n(N),b("")}catch(U){g(`Error: ${(U==null?void 0:U.message)??"Unknown"}`)}finally{w(!1)}}};if(!e)return s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"My Profile"}),s.jsxs("p",{className:"text-sm text-slate-400",children:[s.jsx(oe,{to:"/auth",className:"text-brand-orange hover:underline",children:"Sign in"})," ","to view and edit your profile."]})]});if(!m)return s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"My Profile"}),s.jsx("p",{className:"text-sm text-red-400",children:"API URL not set."})]});if(i)return s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"My Profile"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Loading profile"})]});const Q=t!=null&&t.profile?Mv(t.profile.lastLoginAt,l,t.profile.lastLoginIp):"";return s.jsxs("div",{className:"space-y-6 max-w-2xl",children:[s.jsx(oe,{to:"/",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:" Back to Home"}),s.jsx("header",{children:s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"My Profile"})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400",children:"Last login timezone"}),s.jsx("select",{value:l,onChange:D=>{const U=parseInt(D.target.value,10);Dv(U),o(U)},className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",children:_c.map(D=>s.jsx("option",{value:D.value,children:D.label},D.value))})]}),h&&s.jsx("div",{className:`rounded-md px-3 py-2 text-sm ${h.error?"border-red-500/60 bg-red-500/10 text-red-200":"border-green-500/40 bg-green-500/10 text-green-200"}`,children:h.text}),t&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("h2",{className:"text-sm font-semibold text-slate-200 mb-3",children:"User info"}),s.jsx("table",{className:"w-full text-sm",children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{className:"py-1 pr-4 font-medium text-slate-300 w-28",children:"Email"}),s.jsx("td",{className:"text-slate-400",children:t.email??""})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"py-1 pr-4 font-medium text-slate-300",children:"Status"}),s.jsx("td",{className:"text-slate-400",children:t.status??""})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"py-1 pr-4 font-medium text-slate-300",children:"Last login"}),s.jsx("td",{className:"text-slate-400",children:Q})]})]})})]}),s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("h2",{className:"text-sm font-semibold text-slate-200 mb-3",children:"System role"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:(((q=t.cognitoGroups)==null?void 0:q.length)??0)>0?t.cognitoGroups.map(D=>{const U=$v[D]??D,K=D==="admin"?"bg-amber-500/20 text-amber-300":D==="manager"?"bg-blue-500/20 text-blue-300":"bg-slate-700 text-slate-200";return s.jsx("span",{className:`rounded-md px-2 py-0.5 text-xs font-medium ${K}`,children:U},D)}):s.jsx("span",{className:"rounded-md px-2 py-0.5 text-xs font-medium bg-slate-700 text-slate-200",children:"User"})})]}),s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("h2",{className:"text-sm font-semibold text-slate-200 mb-3",children:"Custom groups"}),(((B=t.customGroups)==null?void 0:B.length)??0)>0?s.jsx("div",{className:"flex flex-wrap gap-2",children:t.customGroups.map(D=>s.jsx("span",{className:"rounded-md px-2 py-0.5 text-xs font-medium bg-emerald-500/20 text-emerald-300",children:D},D))}):s.jsx("p",{className:"text-sm text-slate-500",children:"Not in any custom groups."})]}),s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("h2",{className:"text-sm font-semibold text-slate-200 mb-3",children:"Edit profile"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Profile icon"}),s.jsxs("div",{className:"flex items-start gap-4",children:[(ee=t.profile)!=null&&ee.avatarUrl?s.jsx("img",{src:t.profile.avatarUrl,alt:"Profile",className:"h-24 w-24 rounded-full border-2 border-slate-700 object-cover"}):s.jsx("div",{className:"h-24 w-24 rounded-full border-2 border-slate-700 bg-slate-800 flex items-center justify-center text-2xl text-slate-500",children:"?"}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/gif,image/webp",onChange:E,className:"block w-full text-xs text-slate-300 file:mr-3 file:rounded-md file:border-0 file:bg-slate-800 file:px-3 file:py-1.5 file:text-slate-100"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Or paste image URL (min 4848, max 5 MB):"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"url",value:v,onChange:D=>b(D.target.value),placeholder:"https://example.com/avatar.png",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("button",{type:"button",onClick:I,disabled:!v.trim()||y,className:"rounded-md border border-slate-600 px-3 py-2 text-sm font-medium text-slate-200 hover:bg-slate-800 disabled:opacity-50",children:y?"Importing":"Use from URL"})]}),((_=t.profile)==null?void 0:_.avatarUrl)&&s.jsx("button",{type:"button",onClick:$,className:"self-start rounded-md border border-red-500/60 bg-red-500/10 px-2 py-1 text-xs font-medium text-red-300 hover:bg-red-500/20",children:"Remove icon"})]})]}),s.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"PNG, JPEG, GIF, or WebP. Same constraints as thumbnail uploads."}),p&&s.jsx("p",{className:"mt-1 text-xs text-red-400",children:p})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"profile-description",className:"block text-xs font-medium text-slate-400 mb-1",children:"Description"}),s.jsx("textarea",{id:"profile-description",value:r,onChange:D=>a(D.target.value),maxLength:100,placeholder:"About you (max 100 characters)",rows:4,className:"w-full max-w-md rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsxs("div",{className:`mt-1 text-xs ${r.length>=100?"text-red-400":"text-slate-500"}`,children:[r.length," / 100"]})]}),s.jsx("button",{type:"button",onClick:k,disabled:d,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:d?"Saving":"Save"})]})]})]})]})},Fv=/^\d{4}-\d{2}-\d{2}$/;function gd(e){if(!Fv.test(e))return!1;const t=new Date(e);return!isNaN(t.getTime())}const lr=({id:e,value:t,onChange:n,label:r,required:a,className:l="",inputClassName:o=""})=>{const i=c.useRef(null),u=c.useRef(null),d=y=>{const h=y.target.value.replace(/[^\d-]/g,"");n(h)},x=()=>{const y=t.trim();y&&!gd(y)&&n("")},p=y=>{const w=y.target.value;w&&n(w)},g=()=>{const y=i.current;y&&(y.focus(),typeof y.showPicker=="function"&&y.showPicker())},v="rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",b=t&&gd(t);return s.jsxs("div",{className:l,children:[s.jsxs("label",{htmlFor:`${e}-text`,className:"block text-xs font-semibold text-slate-400 mb-1",children:[r,s.jsx("span",{className:"block font-normal text-slate-500 mt-0.5",children:"yyyy-MM-DD or use calendar"})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("input",{ref:u,type:"text",id:`${e}-text`,value:t,onChange:d,onBlur:x,placeholder:"yyyy-MM-DD",required:a,pattern:a?"[0-9]{4}-[0-9]{2}-[0-9]{2}":void 0,title:a?"Enter date as yyyy-MM-DD":void 0,className:`${v} flex-1 min-w-0 ${o}`,inputMode:"numeric",autoComplete:"off"}),s.jsx("input",{ref:i,type:"date",id:e,value:b?t:"",onChange:p,required:a,className:"sr-only","aria-hidden":!0}),s.jsx("button",{type:"button",onClick:g,title:"Open calendar","aria-label":"Open calendar",className:"rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-slate-400 hover:bg-slate-800 hover:text-slate-200 focus:border-brand-orange focus:outline-none shrink-0",children:s.jsx(ig,{className:"h-5 w-5"})})]})]})};function yd(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const To=10,_v=()=>{const{user:e}=ze(),[t,n]=Zt(),[r,a]=c.useState([]),[l,o]=c.useState(()=>{const W=t.get("playerIds");return W?W.split(",").filter(Boolean):[]}),[i,u]=c.useState([]),[d,x]=c.useState(1),[p,g]=c.useState(!1),[v,b]=c.useState(()=>t.get("date")??""),[y,w]=c.useState(()=>t.get("dateFrom")??""),[h,f]=c.useState(()=>t.get("dateTo")??""),[m,j]=c.useState(""),[k,E]=c.useState(!1),[$,I]=c.useState(null),[Q,q]=c.useState(null),[B,ee]=c.useState(!1),[_,D]=c.useState(()=>t.get("sortOrder")==="oldest"?"oldest":"newest"),[U,K]=c.useState(()=>t.get("playerMode")==="or"?"or":"and"),re=c.useRef(null),N=gl(e),S=yl(e),R=W=>{const se=r.find(ye=>ye.id===W||ye.PK===W);return se&&(se.name||se.id)||W},C=async(W,se={})=>{var Ee;const ye=window;if(!((Ee=ye.auth)!=null&&Ee.getAccessToken))throw new Error("Not signed in");const he=await new Promise(Le=>ye.auth.getAccessToken(Le));if(!he)throw new Error("Not signed in");const we={...se.headers,Authorization:`Bearer ${he}`};return fetch(W,{...se,headers:we})},P=async()=>{const W=yd();if(W)try{const se=await C(`${W}/squash/players`);if(!se.ok){const we=await se.json().catch(()=>({}));throw new Error(we.error||"Failed")}const he=((await se.json()).players??[]).map(we=>({...we,id:we.id||we.PK||""}));a(he)}catch(se){q((se==null?void 0:se.message)??"Failed to load players")}},Y=async()=>{const W=yd();if(!W)return;const se=new URLSearchParams;v&&se.set("date",v),y&&se.set("dateFrom",y),h&&se.set("dateTo",h),l.length&&(se.set("playerIds",l.join(",")),se.set("playerMode",U));const ye=se.toString()?`?${se.toString()}`:"";ee(!0),q(null);try{const he=await C(`${W}/squash/matches${ye}`);if(!he.ok){const Le=await he.json().catch(()=>({}));throw new Error(Le.error||"Failed")}const we=await he.json();u(we.matches??[]),g(!0),x(1);const Ee=new URLSearchParams;v&&Ee.set("date",v),y&&Ee.set("dateFrom",y),h&&Ee.set("dateTo",h),l.length&&(Ee.set("playerIds",l.join(",")),Ee.set("playerMode",U)),Ee.set("sortOrder",_),n(Ee,{replace:!0})}catch(he){q((he==null?void 0:he.message)??"Failed to search matches")}finally{ee(!1)}},V=()=>{b(""),w(""),f(""),o([]),j(""),K("and"),g(!1),u([]),x(1),n({},{replace:!0})},M=W=>{l.includes(W)||o([...l,W]),j("")},J=W=>{o(l.filter(se=>se!==W))},T=r.filter(W=>!l.includes(W.id)&&(!m.trim()||(W.name||"").toLowerCase().includes(m.toLowerCase())));c.useEffect(()=>{N&&P()},[N]);const ae=t.get("date")||t.get("dateFrom")||t.get("dateTo")||t.get("playerIds");c.useEffect(()=>{!N||!ae||Y()},[]),c.useEffect(()=>{function W(se){re.current&&!re.current.contains(se.target)&&E(!1)}if(k)return document.addEventListener("mousedown",W),()=>document.removeEventListener("mousedown",W)},[k]);const O=c.useMemo(()=>{const W=[...i];return W.sort((se,ye)=>{const he=se.date||"",we=ye.date||"";return _==="newest"?we.localeCompare(he):he.localeCompare(we)}),W},[i,_]),F=Math.max(1,Math.ceil(O.length/To)),L=(d-1)*To,G=O.slice(L,L+To),z=W=>{const se=W.teamAGames??0,ye=W.teamBGames??0,he=W.winningTeam==="B"?ye:se,we=W.winningTeam==="B"?se:ye;return`${he}-${we}`},ne=W=>{const se=[R(W.teamAPlayer1Id||""),R(W.teamAPlayer2Id||"")].filter(Boolean).join(" & "),ye=[R(W.teamBPlayer1Id||""),R(W.teamBPlayer2Id||"")].filter(Boolean).join(" & "),he=W.winningTeam==="B"?ye:se,we=W.winningTeam==="B"?se:ye;return s.jsxs("li",{className:"flex items-center gap-2 flex-wrap py-2 border-b border-slate-800 last:border-0",children:[s.jsx("span",{className:"font-semibold text-slate-200",children:W.date||""}),s.jsxs("span",{className:"text-slate-300",children:[he," vs ",we]}),s.jsx("span",{className:"italic text-slate-400",children:z(W)})]},W.id||W.date+he)},be=[];if(F<=7)for(let W=1;W<=F;W++)be.push(W);else{const W=d;be.push(1),W>3&&be.push("");for(let se=Math.max(2,W-1);se<=Math.min(F-1,W+1);se++)be.includes(se)||be.push(se);W<F-2&&be.push(""),F>1&&be.push(F)}return e?N?s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Doubles"}),S&&s.jsx("p",{className:"text-sm text-slate-400",children:s.jsx(oe,{to:"/squash-admin",className:"text-brand-orange hover:text-orange-400",children:"Squash Admin"})}),($||Q)&&s.jsx("div",{className:`rounded-md px-4 py-3 text-sm ${Q?"bg-red-900/30 border border-red-800/50 text-red-200":"bg-emerald-900/30 border border-emerald-800/50 text-emerald-200"}`,children:Q||$}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-base font-semibold text-slate-200 mb-3",children:"Search matches"}),s.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[s.jsx(lr,{id:"searchDate",value:v,onChange:b,label:"Date (exact)",className:"max-w-[12rem]"}),s.jsx(lr,{id:"searchDateFrom",value:y,onChange:w,label:"Date from",className:"max-w-[12rem]"}),s.jsx(lr,{id:"searchDateTo",value:h,onChange:f,label:"Date to",className:"max-w-[12rem]"}),s.jsxs("div",{className:"relative max-w-[14rem] min-w-[12rem]",ref:re,children:[s.jsx("label",{className:"block text-xs font-semibold text-slate-400 mb-1",children:"Filter by players"}),s.jsx("input",{type:"text",value:m,onChange:W=>j(W.target.value),onFocus:()=>E(!0),placeholder:"Search players...",autoComplete:"off",className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none"}),k&&s.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-slate-900 border border-slate-700 rounded-md max-h-48 overflow-y-auto z-10",children:T.length?T.map(W=>s.jsx("button",{type:"button",onClick:()=>M(W.id),className:"w-full text-left px-3 py-2 text-sm text-slate-200 hover:bg-slate-800",children:W.name||W.id},W.id)):s.jsx("div",{className:"px-3 py-2 text-sm text-slate-500",children:"No matches"})}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:l.map(W=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-slate-700 text-slate-200 text-xs",children:[R(W),s.jsx("button",{type:"button",onClick:()=>J(W),className:"text-slate-400 hover:text-slate-100","aria-label":"Remove",children:""})]},W))}),l.length>0&&s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-slate-500",children:"Match:"}),s.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[s.jsx("button",{type:"button",onClick:()=>K("and"),className:`rounded px-2 py-0.5 text-xs font-medium ${U==="and"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"AND"}),s.jsx("button",{type:"button",onClick:()=>K("or"),className:`rounded px-2 py-0.5 text-xs font-medium ${U==="or"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"OR"})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:Y,disabled:B,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:B?"Searching":"Search"}),s.jsx("button",{type:"button",onClick:V,className:"rounded-md border border-slate-600 px-4 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Clear"})]})]})]}),s.jsxs("section",{children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-3",children:[s.jsx("h2",{className:"text-base font-semibold text-slate-200",children:"Results"}),p&&O.length>0&&s.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[s.jsx("button",{type:"button",onClick:()=>D("newest"),className:`rounded px-2 py-0.5 text-xs font-medium ${_==="newest"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"Newest first"}),s.jsx("button",{type:"button",onClick:()=>D("oldest"),className:`rounded px-2 py-0.5 text-xs font-medium ${_==="oldest"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"Oldest first"})]})]}),p&&s.jsx("div",{className:"rounded-md border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm text-slate-400 mb-3",children:O.length===0?"No results":`${O.length} results`}),p?G.length===0?s.jsx("ul",{className:"list-none p-0",children:s.jsx("li",{className:"py-2 text-slate-400",children:"No matches found."})}):s.jsxs(s.Fragment,{children:[s.jsx("ul",{className:"list-none p-0",children:G.map(ne)}),F>1&&s.jsxs("div",{className:"flex items-center gap-2 mt-4 flex-wrap",children:[s.jsx("button",{type:"button",disabled:d<=1,onClick:()=>x(W=>Math.max(1,W-1)),className:"rounded-md border border-slate-600 px-3 py-1 text-sm disabled:opacity-50 disabled:cursor-not-allowed text-slate-300 hover:bg-slate-800",children:"Prev"}),s.jsx("span",{className:"flex items-center gap-1",children:be.map((W,se)=>W===""?s.jsx("span",{className:"px-1 text-slate-500",children:""},`ellipsis-${se}`):W===d?s.jsx("span",{className:"min-w-[2rem] px-2 py-1 text-center font-semibold text-slate-200",children:W},W):s.jsx("button",{type:"button",onClick:()=>x(W),className:"min-w-[2rem] rounded px-2 py-1 text-sm text-slate-300 hover:bg-slate-800 border border-slate-600",children:W},W))}),s.jsx("button",{type:"button",disabled:d>=F,onClick:()=>x(W=>Math.min(F,W+1)),className:"rounded-md border border-slate-600 px-3 py-1 text-sm disabled:opacity-50 disabled:cursor-not-allowed text-slate-300 hover:bg-slate-800",children:"Next"})]})]}):s.jsx("div",{className:"flex items-center justify-center min-h-[280px]",children:s.jsx("p",{className:"text-2xl sm:text-3xl font-light text-slate-500/80 tracking-wide animate-pulse",children:"Enter search criteria and click Search to find matches."})})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Doubles"}),s.jsx("div",{className:"rounded-md bg-amber-900/30 border border-amber-800/50 px-4 py-3 text-sm text-amber-200",children:"You do not have access to the Squash section. Join the Squash group or contact an admin."})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Doubles"}),s.jsxs("div",{className:"rounded-md bg-red-900/30 border border-red-800/50 px-4 py-3 text-sm text-red-200",children:["Sign in required. ",s.jsx(oe,{to:"/auth",className:"underline hover:text-red-100",children:"Sign in"})]})]})};function Zn(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Ao=10,Bv=()=>{const{user:e}=ze(),[t,n]=Zt(),[r,a]=c.useState("matches"),[l,o]=c.useState([]),[i,u]=c.useState(()=>{const A=t.get("playerIds");return A?A.split(",").filter(Boolean):[]}),[d,x]=c.useState([]),[p,g]=c.useState(1),[v,b]=c.useState(!1),[y,w]=c.useState(()=>t.get("date")??""),[h,f]=c.useState(()=>t.get("dateFrom")??""),[m,j]=c.useState(()=>t.get("dateTo")??""),[k,E]=c.useState(""),[$,I]=c.useState(!1),[Q,q]=c.useState(null),[B,ee]=c.useState(""),[_,D]=c.useState(""),[U,K]=c.useState(""),[re,N]=c.useState(""),[S,R]=c.useState(""),[C,P]=c.useState("A"),[Y,V]=c.useState(0),[M,J]=c.useState(!1),[T,ae]=c.useState(!1),[O,F]=c.useState(()=>t.get("sortOrder")==="oldest"?"oldest":"newest"),[L,G]=c.useState(()=>t.get("playerMode")==="or"?"or":"and"),z=c.useRef(null),[ne,be]=c.useState([]),[W,se]=c.useState([]),[ye,he]=c.useState(null),[we,Ee]=c.useState(""),[Le,Z]=c.useState(""),[H,ce]=c.useState(""),[de,ge]=c.useState(!1),[xe,me]=c.useState(null),[je,Se]=c.useState(null),tt=yl(e),rt=async(A,pe={})=>{var qe;const Ne=window;if(!((qe=Ne.auth)!=null&&qe.getAccessToken))throw new Error("Not signed in");const Ae=await new Promise(Qn=>Ne.auth.getAccessToken(Qn));if(!Ae)throw new Error("Not signed in");const Ze={...pe.headers,Authorization:`Bearer ${Ae}`};return fetch(A,{...pe,headers:Ze})},st=A=>{const pe=l.find(Ne=>Ne.id===A||Ne.PK===A);return pe&&(pe.name||pe.id)||A},ln=async()=>{const A=Zn();if(A)try{const pe=await rt(`${A}/squash/players`);if(!pe.ok){const Ze=await pe.json().catch(()=>({}));throw new Error(Ze.error||"Failed")}const Ae=((await pe.json()).players??[]).map(Ze=>({...Ze,id:Ze.id||Ze.PK||""}));o(Ae),be(Ae)}catch(pe){me((pe==null?void 0:pe.message)??"Failed to load players")}},vr=async()=>{const A=Zn();if(A)try{const pe=await rt(`${A}/admin/users?limit=60`);if(!pe.ok)return;const Ne=await pe.json();se(Ne.users??[])}catch{se([])}},wn=async()=>{const A=Zn();if(!A)return;const pe=new URLSearchParams;y&&pe.set("date",y),h&&pe.set("dateFrom",h),m&&pe.set("dateTo",m),i.length&&(pe.set("playerIds",i.join(",")),pe.set("playerMode",L));const Ne=pe.toString()?`?${pe.toString()}`:"";ae(!0),me(null);try{const Ae=await rt(`${A}/squash/matches${Ne}`);if(!Ae.ok){const Qn=await Ae.json().catch(()=>({}));throw new Error(Qn.error||"Failed")}const Ze=await Ae.json();x(Ze.matches??[]),b(!0),g(1);const qe=new URLSearchParams;y&&qe.set("date",y),h&&qe.set("dateFrom",h),m&&qe.set("dateTo",m),i.length&&(qe.set("playerIds",i.join(",")),qe.set("playerMode",L)),qe.set("sortOrder",O),n(qe,{replace:!0})}catch(Ae){me((Ae==null?void 0:Ae.message)??"Failed to search matches")}finally{ae(!1)}},le=()=>{w(""),f(""),j(""),u([]),G("and"),E(""),b(!1),x([]),g(1),n({},{replace:!0})},ve=A=>{i.includes(A)||u([...i,A]),E("")},Me=A=>{u(i.filter(pe=>pe!==A))},Oe=l.filter(A=>!i.includes(A.id)&&(!k.trim()||(A.name||"").toLowerCase().includes(k.toLowerCase()))),$e=[_,U,re,S],X=A=>{const pe=A==="p1"?0:A==="p2"?1:A==="p3"?2:3,Ne=$e.filter((Ae,Ze)=>Ze!==pe);return l.filter(Ae=>!Ne.includes(Ae.id))},ie=async A=>{if(A.preventDefault(),!B||!_||!U||!re||!S){me("All fields are required.");return}const pe=[_,U,re,S];if(new Set(pe).size!==4){me("Each player can only be on one team.");return}const Ne=Zn();if(!Ne)return;const qe={date:B,teamAPlayer1Id:_,teamAPlayer2Id:U,teamBPlayer1Id:re,teamBPlayer2Id:S,winningTeam:C,teamAGames:C==="A"?3:Y,teamBGames:C==="B"?3:Y},Qn=Q?"PUT":"POST";Q&&(qe.id=Q),J(!0),me(null);try{const jr=await rt(`${Ne}/squash/matches`,{method:Qn,headers:{"Content-Type":"application/json"},body:JSON.stringify(qe)});if(!jr.ok){const Ep=await jr.json().catch(()=>({}));throw new Error(Ep.error||"Failed")}q(null),ee(""),D(""),K(""),N(""),R(""),P("A"),V(0),wn()}catch(jr){me((jr==null?void 0:jr.message)??"Failed")}finally{J(!1)}},fe=()=>{q(null),ee(""),D(""),K(""),N(""),R(""),P("A"),V(0)},Ie=A=>{var Ne,Ae;const pe=A.id||((Ae=(Ne=A.PK)==null?void 0:Ne.replace)==null?void 0:Ae.call(Ne,"SQUASH#MATCH#",""))||"";q(pe),ee(A.date||""),D(A.teamAPlayer1Id||""),K(A.teamAPlayer2Id||""),N(A.teamBPlayer1Id||""),R(A.teamBPlayer2Id||""),P(A.winningTeam||"A"),V(A.winningTeam==="A"?A.teamBGames??0:A.teamAGames??0)},Pe=async A=>{if(!confirm("Delete this match?"))return;const pe=Zn();if(pe)try{const Ne=await rt(`${pe}/squash/matches?id=${encodeURIComponent(A)}`,{method:"DELETE"});if(!Ne.ok){const Ae=await Ne.json().catch(()=>({}));throw new Error(Ae.error||"Failed")}wn()}catch(Ne){me((Ne==null?void 0:Ne.message)??"Delete failed")}},Ue=async A=>{A.preventDefault();const pe=we.trim();if(!pe){me("Name is required.");return}const Ne=Zn();if(!Ne)return;const Ae={name:pe,email:Le.trim()||void 0,userId:H||void 0},Ze=ye?"PUT":"POST";ye&&(Ae.id=ye),ge(!0),me(null);try{const qe=await rt(`${Ne}/squash/players`,{method:Ze,headers:{"Content-Type":"application/json"},body:JSON.stringify(Ae)});if(!qe.ok){const Qn=await qe.json().catch(()=>({}));throw new Error(Qn.error||"Failed")}he(null),Ee(""),Z(""),ce(""),ln()}catch(qe){me((qe==null?void 0:qe.message)??"Failed")}finally{ge(!1)}},Ke=()=>{he(null),Ee(""),Z(""),ce("")},Ce=A=>{he(A.id),Ee(A.name||""),Z(A.email||""),ce(A.userId||"")},Jn=async A=>{if(!confirm("Delete this player?"))return;const pe=Zn();if(pe)try{const Ne=await rt(`${pe}/squash/players?id=${encodeURIComponent(A)}`,{method:"DELETE"});if(!Ne.ok){const Ae=await Ne.json().catch(()=>({}));throw new Error(Ae.error||"Failed")}ln()}catch(Ne){me((Ne==null?void 0:Ne.message)??"Delete failed")}};c.useEffect(()=>{tt&&(ln(),r==="players"&&vr())},[tt,r]);const br=t.get("date")||t.get("dateFrom")||t.get("dateTo")||t.get("playerIds");c.useEffect(()=>{!tt||!br||wn()},[]),c.useEffect(()=>{function A(pe){z.current&&!z.current.contains(pe.target)&&I(!1)}if($)return document.addEventListener("mousedown",A),()=>document.removeEventListener("mousedown",A)},[$]);const ft=c.useMemo(()=>{const A=[...d];return A.sort((pe,Ne)=>{const Ae=pe.date||"",Ze=Ne.date||"";return O==="newest"?Ze.localeCompare(Ae):Ae.localeCompare(Ze)}),A},[d,O]),vt=Math.max(1,Math.ceil(ft.length/Ao)),wr=(p-1)*Ao,Wl=ft.slice(wr,wr+Ao),Cp=A=>{const pe=A.teamAGames??0,Ne=A.teamBGames??0;return A.winningTeam==="A"?`${pe}-${Ne}`:`${Ne}-${pe}`},jn=[];if(vt<=7)for(let A=1;A<=vt;A++)jn.push(A);else{const A=p;jn.push(1),A>3&&jn.push("");for(let pe=Math.max(2,A-1);pe<=Math.min(vt-1,A+1);pe++)jn.includes(pe)||jn.push(pe);A<vt-2&&jn.push(""),vt>1&&jn.push(vt)}return e?tt?s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Admin"}),s.jsx("p",{className:"text-sm text-slate-400",children:s.jsx(oe,{to:"/squash",className:"text-brand-orange hover:text-orange-400",children:"Squash"})}),(je||xe)&&s.jsx("div",{className:`rounded-md px-4 py-3 text-sm ${xe?"bg-red-900/30 border border-red-800/50 text-red-200":"bg-emerald-900/30 border border-emerald-800/50 text-emerald-200"}`,children:xe||je}),s.jsxs("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:[s.jsx("button",{type:"button",onClick:()=>a("matches"),className:`px-4 py-2 rounded-md text-sm font-medium ${r==="matches"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Matches"}),s.jsx("button",{type:"button",onClick:()=>a("players"),className:`px-4 py-2 rounded-md text-sm font-medium ${r==="players"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Players"})]}),r==="matches"&&s.jsxs(s.Fragment,{children:[s.jsxs("section",{children:[s.jsx("h2",{className:"text-base font-semibold text-slate-200 mb-3",children:"Add match"}),s.jsxs("form",{onSubmit:ie,className:"grid grid-cols-2 gap-4 max-w-2xl",children:[s.jsx("div",{className:"col-span-2",children:s.jsx(lr,{id:"matchDate",value:B,onChange:ee,label:"Date",required:!0})}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"matchTeamAP1",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Team A  Player 1"}),s.jsxs("select",{id:"matchTeamAP1",value:_,onChange:A=>D(A.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[s.jsx("option",{value:"",children:" Select "}),X("p1").map(A=>s.jsx("option",{value:A.id,children:A.name||A.id},A.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"matchTeamAP2",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Team A  Player 2"}),s.jsxs("select",{id:"matchTeamAP2",value:U,onChange:A=>K(A.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[s.jsx("option",{value:"",children:" Select "}),X("p2").map(A=>s.jsx("option",{value:A.id,children:A.name||A.id},A.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"matchTeamBP1",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Team B  Player 1"}),s.jsxs("select",{id:"matchTeamBP1",value:re,onChange:A=>N(A.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[s.jsx("option",{value:"",children:" Select "}),X("p3").map(A=>s.jsx("option",{value:A.id,children:A.name||A.id},A.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"matchTeamBP2",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Team B  Player 2"}),s.jsxs("select",{id:"matchTeamBP2",value:S,onChange:A=>R(A.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[s.jsx("option",{value:"",children:" Select "}),X("p4").map(A=>s.jsx("option",{value:A.id,children:A.name||A.id},A.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"matchWinningTeam",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Winning team"}),s.jsxs("select",{id:"matchWinningTeam",value:C,onChange:A=>P(A.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[s.jsx("option",{value:"A",children:"Team A"}),s.jsx("option",{value:"B",children:"Team B"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"matchLoserGames",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Games won by losing team"}),s.jsxs("select",{id:"matchLoserGames",value:Y,onChange:A=>V(parseInt(A.target.value,10)),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[s.jsx("option",{value:0,children:"0"}),s.jsx("option",{value:1,children:"1"}),s.jsx("option",{value:2,children:"2"})]})]}),s.jsxs("div",{className:"col-span-2 flex gap-2",children:[s.jsx("button",{type:"submit",disabled:M,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:Q?"Update match":"Add match"}),s.jsx("button",{type:"button",onClick:fe,className:"rounded-md border border-slate-600 px-4 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"})]})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-base font-semibold text-slate-200 mb-3",children:"Search matches"}),s.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[s.jsx(lr,{id:"searchDate",value:y,onChange:w,label:"Date (exact)",className:"max-w-[12rem]"}),s.jsx(lr,{id:"searchDateFrom",value:h,onChange:f,label:"Date from",className:"max-w-[12rem]"}),s.jsx(lr,{id:"searchDateTo",value:m,onChange:j,label:"Date to",className:"max-w-[12rem]"}),s.jsxs("div",{className:"relative max-w-[14rem] min-w-[12rem]",ref:z,children:[s.jsx("label",{className:"block text-xs font-semibold text-slate-400 mb-1",children:"Filter by players"}),s.jsx("input",{type:"text",value:k,onChange:A=>E(A.target.value),onFocus:()=>I(!0),placeholder:"Search players...",autoComplete:"off",className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none"}),$&&s.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-slate-900 border border-slate-700 rounded-md max-h-48 overflow-y-auto z-10",children:Oe.length?Oe.map(A=>s.jsx("button",{type:"button",onClick:()=>ve(A.id),className:"w-full text-left px-3 py-2 text-sm text-slate-200 hover:bg-slate-800",children:A.name||A.id},A.id)):s.jsx("div",{className:"px-3 py-2 text-sm text-slate-500",children:"No matches"})}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:i.map(A=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-slate-700 text-slate-200 text-xs",children:[st(A),s.jsx("button",{type:"button",onClick:()=>Me(A),className:"text-slate-400 hover:text-slate-100","aria-label":"Remove",children:""})]},A))}),i.length>0&&s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-slate-500",children:"Match:"}),s.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[s.jsx("button",{type:"button",onClick:()=>G("and"),className:`rounded px-2 py-0.5 text-xs font-medium ${L==="and"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"AND"}),s.jsx("button",{type:"button",onClick:()=>G("or"),className:`rounded px-2 py-0.5 text-xs font-medium ${L==="or"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"OR"})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:wn,disabled:T,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:T?"Searching":"Search"}),s.jsx("button",{type:"button",onClick:le,className:"rounded-md border border-slate-600 px-4 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Clear"})]})]})]}),s.jsxs("section",{children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-3",children:[s.jsx("h2",{className:"text-base font-semibold text-slate-200",children:"Search results"}),v&&ft.length>0&&s.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[s.jsx("button",{type:"button",onClick:()=>F("newest"),className:`rounded px-2 py-0.5 text-xs font-medium ${O==="newest"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"Newest first"}),s.jsx("button",{type:"button",onClick:()=>F("oldest"),className:`rounded px-2 py-0.5 text-xs font-medium ${O==="oldest"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"Oldest first"})]})]}),v&&s.jsx("div",{className:"rounded-md border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm text-slate-400 mb-3",children:ft.length===0?"No results":`${ft.length} results`}),v?Wl.length===0?s.jsx("ul",{className:"list-none p-0",children:s.jsx("li",{className:"py-2 text-slate-400",children:"No matches found."})}):s.jsxs(s.Fragment,{children:[s.jsx("ul",{className:"list-none p-0",children:Wl.map(A=>{var Ze,qe;const pe=A.id||((qe=(Ze=A.PK)==null?void 0:Ze.replace)==null?void 0:qe.call(Ze,"SQUASH#MATCH#",""))||"",Ne=[st(A.teamAPlayer1Id||""),st(A.teamAPlayer2Id||"")].filter(Boolean).join(" & "),Ae=[st(A.teamBPlayer1Id||""),st(A.teamBPlayer2Id||"")].filter(Boolean).join(" & ");return s.jsxs("li",{className:"flex items-center gap-2 flex-wrap py-2 border-b border-slate-800 last:border-0",children:[s.jsx("span",{className:"font-semibold text-slate-200",children:A.date||""}),s.jsxs("span",{className:"text-slate-300",children:[Ne," vs ",Ae]}),s.jsx("span",{className:"italic text-slate-400",children:Cp(A)}),s.jsx("button",{type:"button",onClick:()=>Ie(A),className:"rounded-md border border-slate-600 px-2 py-1 text-xs text-slate-300 hover:bg-slate-800",children:"Edit"}),s.jsx("button",{type:"button",onClick:()=>Pe(pe),className:"rounded-md border border-red-800/50 px-2 py-1 text-xs text-red-300 hover:bg-red-900/30",children:"Delete"})]},pe)})}),vt>1&&s.jsxs("div",{className:"flex items-center gap-2 mt-4 flex-wrap",children:[s.jsx("button",{type:"button",disabled:p<=1,onClick:()=>g(A=>Math.max(1,A-1)),className:"rounded-md border border-slate-600 px-3 py-1 text-sm disabled:opacity-50 disabled:cursor-not-allowed text-slate-300 hover:bg-slate-800",children:"Prev"}),s.jsx("span",{className:"flex items-center gap-1",children:jn.map((A,pe)=>A===""?s.jsx("span",{className:"px-1 text-slate-500",children:""},`ellipsis-${pe}`):A===p?s.jsx("span",{className:"min-w-[2rem] px-2 py-1 text-center font-semibold text-slate-200",children:A},A):s.jsx("button",{type:"button",onClick:()=>g(A),className:"min-w-[2rem] rounded px-2 py-1 text-sm text-slate-300 hover:bg-slate-800 border border-slate-600",children:A},A))}),s.jsx("button",{type:"button",disabled:p>=vt,onClick:()=>g(A=>Math.min(vt,A+1)),className:"rounded-md border border-slate-600 px-3 py-1 text-sm disabled:opacity-50 disabled:cursor-not-allowed text-slate-300 hover:bg-slate-800",children:"Next"})]})]}):s.jsx("div",{className:"flex items-center justify-center min-h-[280px]",children:s.jsx("p",{className:"text-2xl sm:text-3xl font-light text-slate-500/80 tracking-wide animate-pulse",children:"Enter search criteria and click Search to find matches."})})]})]}),r==="players"&&s.jsxs(s.Fragment,{children:[s.jsxs("section",{children:[s.jsx("h2",{className:"text-base font-semibold text-slate-200 mb-3",children:"Players"}),s.jsxs("form",{onSubmit:Ue,className:"space-y-4 max-w-md",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"playerName",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Name"}),s.jsx("input",{type:"text",id:"playerName",value:we,onChange:A=>Ee(A.target.value),required:!0,placeholder:"Player name",className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"playerEmail",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Email (optional)"}),s.jsx("input",{type:"email",id:"playerEmail",value:Le,onChange:A=>Z(A.target.value),placeholder:"player@example.com",className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"playerUserId",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Link to user (optional)"}),s.jsxs("select",{id:"playerUserId",value:H,onChange:A=>ce(A.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[s.jsx("option",{value:"",children:" None "}),W.map(A=>s.jsx("option",{value:A.sub||"",children:A.email||A.username||A.sub},A.sub||A.username))]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"submit",disabled:de,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:ye?"Update player":"Add player"}),s.jsx("button",{type:"button",onClick:Ke,className:"rounded-md border border-slate-600 px-4 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"})]})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-base font-semibold text-slate-200 mb-3",children:"Player list"}),ne.length===0?s.jsx("p",{className:"text-sm text-slate-500",children:"No players yet. Add players above."}):s.jsx("ul",{className:"list-none p-0",children:ne.map(A=>s.jsxs("li",{className:"flex items-center gap-2 flex-wrap py-2 border-b border-slate-800 last:border-0",children:[s.jsx("span",{className:"font-semibold text-slate-200",children:A.name||A.id}),A.email&&s.jsxs("span",{className:"text-slate-500 text-sm",children:["(",A.email,")"]}),s.jsx("button",{type:"button",onClick:()=>Ce(A),className:"rounded-md border border-slate-600 px-2 py-1 text-xs text-slate-300 hover:bg-slate-800",children:"Edit"}),s.jsx("button",{type:"button",onClick:()=>Jn(A.id),className:"rounded-md border border-red-800/50 px-2 py-1 text-xs text-red-300 hover:bg-red-900/30",children:"Delete"})]},A.id))})]})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Admin"}),s.jsx("div",{className:"rounded-md bg-amber-900/30 border border-amber-800/50 px-4 py-3 text-sm text-amber-200",children:"Squash Admin requires manager (in Squash group) or SuperAdmin access."})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Admin"}),s.jsxs("div",{className:"rounded-md bg-red-900/30 border border-red-800/50 px-4 py-3 text-sm text-red-200",children:["Sign in required. ",s.jsx(oe,{to:"/auth",className:"underline hover:text-red-100",children:"Sign in"})]})]})};function Ro(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const zv=()=>{const{user:e}=ze(),t=yp(e),n=vl(e),[r,a]=c.useState([]),[l,o]=c.useState({}),[i,u]=c.useState("yahoo"),[d,x]=c.useState([]),[p,g]=c.useState(!0),[v,b]=c.useState(!1),[y,w]=c.useState(""),[h,f]=c.useState(null),[m,j]=c.useState(null),k=c.useCallback(async(B,ee)=>{var K;const _=window;if(!((K=_.auth)!=null&&K.getAccessToken))throw new Error("Not signed in");const D=await new Promise(re=>_.auth.getAccessToken(re));if(!D)throw new Error("Not signed in");const U={...ee==null?void 0:ee.headers,Authorization:`Bearer ${D}`};return fetch(B,{...ee,headers:U})},[]),E=c.useCallback(async()=>{const B=Ro();if(B){g(!0),f(null);try{const[ee,_]=await Promise.all([k(`${B}/financial/watchlist`),k(`${B}/financial/config`)]),D=_.ok?await _.json():{symbols:[],source:"yahoo",availableSources:["yahoo"]};if(ee.ok){const K=(await ee.json()).symbols??[];a(K.length>0?K:D.symbols??[]),u(D.source??"yahoo"),x(D.availableSources??["yahoo"])}}catch(ee){f((ee==null?void 0:ee.message)??"Failed to load watchlist")}finally{g(!1)}}},[k]),$=c.useCallback(async()=>{const B=Ro();if(!B||r.length===0)return;const ee={};for(const _ of r)try{const D=await k(`${B}/financial/quote?symbol=${encodeURIComponent(_)}&source=${encodeURIComponent(i)}`);if(D.ok){const U=await D.json();ee[_]=U}else ee[_]=null}catch{ee[_]=null}o(ee)},[r,i,k]);c.useEffect(()=>{t&&E()},[t,E]),c.useEffect(()=>{t&&r.length>0?$():o({})},[t,r,i,$]);const I=()=>{const B=y.trim().toUpperCase();!B||r.includes(B)||(a(ee=>[...ee,B]),w(""))},Q=B=>{a(ee=>ee.filter(_=>_!==B)),o(ee=>{const _={...ee};return delete _[B],_})},q=async()=>{const B=Ro();if(B){b(!0),f(null),j(null);try{const ee=await k(`${B}/financial/watchlist`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbols:r})});if(!ee.ok){const _=await ee.json().catch(()=>({}));throw new Error(_.error??"Failed to save")}j("Watchlist saved.")}catch(ee){f((ee==null?void 0:ee.message)??"Failed to save")}finally{b(!1)}}};return t?s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Financial"}),n&&s.jsx("p",{className:"text-sm text-slate-400",children:s.jsx(oe,{to:"/admin/financial",className:"text-brand-orange hover:text-orange-400",children:"Financial Admin"})}),p?s.jsx("p",{className:"text-sm text-slate-500",children:"Loading"}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-wrap gap-2 items-end",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"newSymbol",className:"block text-xs text-slate-500 mb-1",children:"Add symbol"}),s.jsx("input",{id:"newSymbol",type:"text",value:y,onChange:B=>w(B.target.value.toUpperCase()),onKeyDown:B=>B.key==="Enter"&&(B.preventDefault(),I()),placeholder:"AAPL",className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 w-24"})]}),s.jsx("button",{type:"button",onClick:I,disabled:!y.trim(),className:"rounded-md bg-brand-orange px-3 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:"Add"}),d.length>1&&s.jsxs("div",{className:"ml-4",children:[s.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Data source"}),s.jsx("select",{value:i,onChange:B=>u(B.target.value),className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50",children:d.map(B=>s.jsx("option",{value:B,children:B==="yahoo"?"Yahoo Finance":"Alpha Vantage"},B))})]})]}),r.length>0&&s.jsx("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-800",children:[s.jsx("thead",{className:"bg-slate-900/80",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Symbol"}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase",children:"Price"}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase",children:"Change"}),s.jsx("th",{className:"px-4 py-3 w-10"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-800",children:r.map(B=>{const ee=l[B];return s.jsxs("tr",{className:"hover:bg-slate-800/50",children:[s.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-200",children:B}),s.jsx("td",{className:"px-4 py-3 text-sm text-right text-slate-300",children:ee?`$${ee.price.toFixed(2)}`:""}),s.jsx("td",{className:"px-4 py-3 text-sm text-right",children:ee?s.jsxs("span",{className:ee.change>=0?"text-emerald-400":"text-red-400",children:[ee.change>=0?"+":"",ee.change.toFixed(2)," (",ee.changePercent>=0?"+":"",ee.changePercent.toFixed(2),"%)"]}):s.jsx("span",{className:"text-slate-500",children:""})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("button",{type:"button",onClick:()=>Q(B),className:"text-slate-500 hover:text-red-400","aria-label":`Remove ${B}`,children:""})})]},B)})})]})}),r.length>0&&s.jsx("button",{type:"button",onClick:q,disabled:v,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:v?"Saving":"Save watchlist"}),r.length===0&&s.jsx("p",{className:"text-sm text-slate-500",children:"Add symbols above to build your watchlist. Default symbols from admin may appear when you first load."})]}),m&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:m}),h&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:h})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Financial"}),s.jsx("div",{className:"rounded-md bg-amber-900/30 border border-amber-800/50 px-4 py-3 text-sm text-amber-200",children:"You do not have access to the Financial section. Join the Financial custom group or contact an admin."})]})};function vd(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Wv=()=>{const{user:e}=ze(),[t,n]=Zt(),r=t.get("tab"),a=r==="members"?"members":r==="symbols"?"symbols":"overview",[l,o]=c.useState(a),[i,u]=c.useState([]),[d,x]=c.useState("yahoo"),[p,g]=c.useState(!1),[v,b]=c.useState(!1),[y,w]=c.useState(null),[h,f]=c.useState(null),[m,j]=c.useState(""),[k]=c.useState(["yahoo","alpha_vantage"]);c.useEffect(()=>{o(r==="members"?"members":r==="symbols"?"symbols":"overview")},[r]);const E=_=>{o(_),n(_==="overview"?{}:{tab:_},{replace:!0})},$=c.useCallback(async(_,D)=>{var N;const U=window;if(!((N=U.auth)!=null&&N.getAccessToken))throw new Error("Not signed in");const K=await new Promise(S=>U.auth.getAccessToken(S));if(!K)throw new Error("Not signed in");const re={...D==null?void 0:D.headers,Authorization:`Bearer ${K}`};return fetch(_,{...D,headers:re})},[]),I=c.useCallback(async()=>{const _=vd();if(_){g(!0),w(null);try{const D=await $(`${_}/admin/financial/default-symbols`);if(!D.ok)throw new Error("Failed to load");const U=await D.json();u(U.symbols??[]),x(U.source??"yahoo")}catch(D){w((D==null?void 0:D.message)??"Failed to load")}finally{g(!1)}}},[$]);c.useEffect(()=>{l==="symbols"&&I()},[l,I]);const Q=()=>{const _=m.trim().toUpperCase();!_||i.includes(_)||(u(D=>[...D,_]),j(""))},q=_=>{u(D=>D.filter(U=>U!==_))},B=async()=>{const _=vd();if(_){b(!0),w(null),f(null);try{const D=await $(`${_}/admin/financial/default-symbols`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbols:i,source:d})});if(!D.ok){const U=await D.json().catch(()=>({}));throw new Error(U.error??"Failed to save")}f("Default symbols saved.")}catch(D){w((D==null?void 0:D.message)??"Failed to save")}finally{b(!1)}}};return vl(e)?s.jsxs("div",{className:"space-y-6",children:[s.jsxs(oe,{to:"/financial",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(_e,{className:"h-4 w-4"}),"Back to Financial"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Financial Admin"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manage Financial section settings, members, and data sources."})]}),s.jsxs("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:[s.jsx("button",{type:"button",onClick:()=>E("overview"),className:`px-4 py-2 rounded-md text-sm font-medium ${l==="overview"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Overview"}),s.jsx("button",{type:"button",onClick:()=>E("symbols"),className:`px-4 py-2 rounded-md text-sm font-medium ${l==="symbols"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Tracked Symbols"}),s.jsx("button",{type:"button",onClick:()=>E("members"),className:`px-4 py-2 rounded-md text-sm font-medium ${l==="members"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Members"})]}),l==="overview"&&s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-6 text-sm text-slate-400",children:[s.jsx("p",{className:"mb-2",children:"Admin configuration:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 text-slate-500",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Tracked symbols"}),"  Default symbols for new users' watchlists"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Data source"}),"  Yahoo Finance (no key) or Alpha Vantage (API key in Terraform)"]})]})]}),l==="symbols"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-wrap gap-2 items-end",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"newSymbol",className:"block text-xs text-slate-500 mb-1",children:"Add symbol"}),s.jsx("input",{id:"newSymbol",type:"text",value:m,onChange:_=>j(_.target.value.toUpperCase()),onKeyDown:_=>_.key==="Enter"&&(_.preventDefault(),Q()),placeholder:"AAPL",className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 w-24"})]}),s.jsx("button",{type:"button",onClick:Q,disabled:!m.trim(),className:"rounded-md bg-brand-orange px-3 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:"Add"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Default data source"}),s.jsx("select",{value:d,onChange:_=>x(_.target.value),className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50",children:k.map(_=>s.jsx("option",{value:_,children:_==="yahoo"?"Yahoo Finance":"Alpha Vantage"},_))})]}),i.length>0&&s.jsx("ul",{className:"flex flex-wrap gap-2",children:i.map(_=>s.jsxs("li",{className:"inline-flex items-center gap-1 rounded-md bg-slate-800 px-2 py-1 text-sm text-slate-200",children:[_,s.jsx("button",{type:"button",onClick:()=>q(_),className:"text-slate-500 hover:text-red-400","aria-label":`Remove ${_}`,children:""})]},_))}),s.jsx("button",{type:"button",onClick:B,disabled:v||p,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:v?"Saving":"Save defaults"}),h&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:h}),y&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:y})]}),l==="members"&&s.jsx("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-6 text-sm text-slate-400",children:s.jsxs("p",{className:"mb-2",children:["Manage Financial group membership via"," ",s.jsx(oe,{to:"/admin/membership?tab=groups",className:"text-brand-orange hover:text-orange-400",children:"Membership"}),'. Create the "Financial" custom group and add users there.']})})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Financial Admin"}),s.jsx("p",{className:"text-sm text-slate-400",children:"SuperAdmin or Manager with Financial group membership is required."})]})};function Lo(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const bd="memes_my_cache_invalidate",Gv=()=>{const{user:e}=ze(),[t,n]=Zt(),r=(t.get("tab")||"all")==="mine"?"mine":"all",[a,l]=c.useState([]),[o,i]=c.useState(()=>t.get("q")??""),[u,d]=c.useState(()=>{const C=t.get("tagIds");return C?C.split(",").filter(Boolean):[]}),[x,p]=c.useState(()=>t.get("tagMode")==="and"?"and":"or"),[g,v]=c.useState(!1),[b,y]=c.useState(""),[w,h]=c.useState("newest"),[f,m]=c.useState(!1),[j,k]=c.useState(null),E=c.useRef(null),[$,I]=c.useState([]),Q=c.useRef(null),[q,B]=c.useState(!1),ee=!!e,_=!!e&&(Be(e,"user")||Be(e,"manager")||Be(e,"superadmin")),D=c.useCallback(async(C,P)=>{var J;const Y=window;if(!((J=Y.auth)!=null&&J.getAccessToken))throw new Error("Not signed in");const V=await new Promise(T=>Y.auth.getAccessToken(T));if(!V)throw new Error("Not signed in");const M={...P==null?void 0:P.headers,Authorization:`Bearer ${V}`};return fetch(C,{...P,headers:M})},[]),U=o.trim().length>0||u.length>0;c.useEffect(()=>{try{const C=sessionStorage.getItem(bd);if(!C)return;sessionStorage.removeItem(bd);const P=JSON.parse(C);if(P.tagOnly&&P.memeId&&P.tags){const Y=(Q.current??[]).map(V=>V.PK===P.memeId?{...V,tags:P.tags}:V);if(Q.current=Y,r==="mine"){let V=Y;u.length>0&&(V=x==="and"?Y.filter(M=>u.every(J=>(M.tags??[]).includes(J))):Y.filter(M=>u.some(J=>(M.tags??[]).includes(J)))),l(V)}}else B(!0)}catch{}},[]),c.useEffect(()=>{const C=Lo();if(!C)return;let P=!1;return D(`${C}/memes/tags`).then(Y=>Y.ok?Y.json():Promise.reject(new Error("Failed to load tags"))).then(Y=>{P||I((Y.tags??[]).sort((V,M)=>V.localeCompare(M)))}).catch(()=>{}),()=>{P=!0}},[D]),c.useEffect(()=>{const C=new URLSearchParams;r==="mine"&&C.set("tab","mine"),U&&(o.trim()&&C.set("q",o.trim()),u.length&&(C.set("tagIds",u.join(",")),C.set("tagMode",x))),n(C,{replace:!0})},[r,U,o,u,x,n]),c.useEffect(()=>{const C=Lo();if(!C){k("API URL not set.");return}let P=!1;if(r==="mine"){const V=Q.current,M=u.length>0;if(V&&!q&&!o.trim()){B(!1);let J=V;M&&(x==="and"?J=V.filter(T=>u.every(ae=>(T.tags??[]).includes(ae))):J=V.filter(T=>u.some(ae=>(T.tags??[]).includes(ae)))),l(J),m(!1);return}}async function Y(){m(!0),k(null);try{const V=new URLSearchParams;V.set("limit",r==="mine"?"100":"20"),r==="mine"&&V.set("mine","1"),o.trim()&&V.set("q",o.trim()),u.length>0&&r!=="mine"&&(V.set("tagIds",u.join(",")),V.set("tagMode",x));const M=await D(`${C}/memes?${V.toString()}`);if(!M.ok){const ae=await M.text();throw new Error(`HTTP ${M.status}: ${ae}`)}const J=await M.json();if(P)return;const T=J.memes??[];if(r==="mine")if(Q.current=T,B(!1),u.length>0){const ae=x==="and"?T.filter(O=>u.every(F=>(O.tags??[]).includes(F))):T.filter(O=>u.some(F=>(O.tags??[]).includes(F)));l(ae)}else l(T);else l(T)}catch(V){P||k((V==null?void 0:V.message)??"Failed to load memes.")}finally{P||m(!1)}}return Y(),()=>{P=!0}},[r,o,u,x,D,q]),c.useEffect(()=>{function C(P){E.current&&!E.current.contains(P.target)&&v(!1)}if(g)return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[g]);const K=c.useMemo(()=>$.filter(C=>!u.includes(C)&&(!b.trim()||C.toLowerCase().includes(b.toLowerCase()))),[$,u,b]),re=c.useMemo(()=>{const C=[...a];return C.sort((P,Y)=>{const V=(P.title||P.PK||"").toLowerCase(),M=(Y.title||Y.PK||"").toLowerCase(),J=typeof P.averageRating=="number"?P.averageRating:0,T=typeof Y.averageRating=="number"?Y.averageRating:0,ae=P.createdAt||"",O=Y.createdAt||"";if(w==="newest"){const F=O.localeCompare(ae);return F!==0?F:V.localeCompare(M)}if(w==="oldest"){const F=ae.localeCompare(O);return F!==0?F:V.localeCompare(M)}return w==="avgDesc"?T!==J?T-J:V.localeCompare(M):w==="avgAsc"?J!==T?J-T:V.localeCompare(M):w==="alphaAsc"?V.localeCompare(M):w==="alphaDesc"?M.localeCompare(V):0}),C},[a,w]),N=async(C,P)=>{const Y=Lo();if(Y)try{await D(`${Y}/memes/stars`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({memeId:C,rating:P})}),l(V=>V.map(M=>M.PK===C?{...M,averageRating:P}:M))}catch{}},S=xr(e);if(!e)return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Memes"}),s.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:"Sign in to browse memes."})]});if(!S)return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Memes"}),s.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:"You do not have access to Memes. Join the Memes custom group or contact an admin."})]});const R=C=>{const P=new URLSearchParams(t);C==="mine"?P.set("tab","mine"):P.delete("tab"),n(P,{replace:!0})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("header",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Memes"}),s.jsxs("div",{className:"flex rounded-lg border border-slate-700 bg-slate-900/60 p-0.5",children:[s.jsx("button",{type:"button",onClick:()=>R("all"),className:`rounded-md px-3 py-1 text-sm font-medium transition-colors ${r==="all"?"bg-slate-700 text-slate-50":"text-slate-400 hover:text-slate-200"}`,children:"All"}),s.jsx("button",{type:"button",onClick:()=>R("mine"),className:`rounded-md px-3 py-1 text-sm font-medium transition-colors ${r==="mine"?"bg-slate-700 text-slate-50":"text-slate-400 hover:text-slate-200"}`,children:"My Memes"})]})]}),s.jsx("p",{className:"text-sm text-slate-400",children:r==="mine"?"Your memes, newest first. Filter by tags below.":"Browse and rate memes. Latest 20 shown by default."})]}),s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-4","aria-label":"Search and filter",children:[s.jsxs("form",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",onSubmit:C=>{C.preventDefault(),i(o.trim())},children:[s.jsx("input",{type:"text",value:o,onChange:C=>i(C.target.value),placeholder:"Search memes (title, description)",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("button",{type:"submit",className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500",children:"Search"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-4 sm:gap-6",children:[s.jsxs("div",{ref:E,className:"relative flex-shrink-0 min-w-0 max-w-sm",children:[s.jsx("label",{htmlFor:"meme-tag-filter",className:"block text-xs font-medium text-slate-400 mb-1",children:"Tags (filter by)"}),s.jsx("input",{id:"meme-tag-filter",type:"text",value:b,onChange:C=>y(C.target.value),onFocus:()=>v(!0),placeholder:"Search and select tags",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",autoComplete:"off"}),g&&s.jsx("div",{className:"absolute left-0 top-full z-10 mt-1 w-full max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",role:"listbox",children:K.length>0?K.map(C=>s.jsx("button",{type:"button",role:"option",onClick:()=>{d(P=>P.includes(C)?P:[...P,C]),y("")},className:"block w-full text-left px-3 py-2 text-sm text-slate-200 hover:bg-slate-800",children:C},C)):s.jsx("div",{className:"px-3 py-2 text-xs text-slate-500",children:"No matching tags"})}),u.length>0&&s.jsxs("div",{className:"mt-2 flex flex-wrap gap-1",children:[u.map(C=>s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-300",children:[C,s.jsx("button",{type:"button",onClick:()=>d(P=>P.filter(Y=>Y!==C)),className:"hover:text-slate-100","aria-label":`Remove ${C}`,children:""})]},C)),s.jsxs("select",{value:x,onChange:C=>p(C.target.value),className:"rounded border border-slate-700 bg-slate-950 px-2 py-0.5 text-[11px] text-slate-400",children:[s.jsx("option",{value:"or",children:"OR"}),s.jsx("option",{value:"and",children:"AND"})]})]})]}),s.jsxs("div",{className:"flex items-end gap-2",children:[s.jsx("label",{className:"text-xs font-medium text-slate-400",children:"Sort"}),s.jsxs("select",{value:w,onChange:C=>h(C.target.value),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",children:[s.jsx("option",{value:"newest",children:"Newest first"}),s.jsx("option",{value:"oldest",children:"Oldest first"}),s.jsx("option",{value:"avgDesc",children:"Avg stars (high first)"}),s.jsx("option",{value:"avgAsc",children:"Avg stars (low first)"}),s.jsx("option",{value:"alphaAsc",children:"Title AZ"}),s.jsx("option",{value:"alphaDesc",children:"Title ZA"})]}),s.jsx("span",{className:"text-slate-500",children:re.length===0?"No memes":`${re.length} memes`})]})]})]}),j&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:j}),f?s.jsx("div",{className:"text-sm text-slate-400",children:"Loading memes"}):s.jsxs(s.Fragment,{children:[s.jsx("ul",{className:"space-y-3 mt-2",children:re.map(C=>{const P=C.thumbnailUrl||C.mediaUrl,Y=C.title||C.PK||"Untitled",V=`/memes/${encodeURIComponent(C.PK)}`;return s.jsxs("li",{className:"flex gap-3 rounded-xl border border-slate-800 bg-slate-950/60 p-3",children:[s.jsx(oe,{to:V,className:"h-16 w-24 flex-shrink-0 overflow-hidden rounded-lg border border-slate-700 bg-slate-900 flex items-center justify-center text-xl hover:border-slate-600",children:P?s.jsx("img",{src:P,alt:"",className:"h-full w-full object-cover",onError:M=>{M.currentTarget.style.visibility="hidden"}}):s.jsx("span",{children:""})}),s.jsxs("div",{className:"min-w-0 flex-1 space-y-1",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("h2",{className:"truncate text-sm font-semibold text-slate-50",children:s.jsx(oe,{to:V,className:"hover:text-brand-orange",children:Y})}),C.isPrivate&&s.jsx("span",{className:"inline-flex rounded-full bg-slate-900 px-2 py-0.5 text-[10px] uppercase text-slate-500",children:"Private"}),typeof C.averageRating=="number"&&s.jsxs("span",{className:"inline-flex rounded-full bg-slate-900 px-2 py-0.5 text-[11px] text-amber-300",children:[C.averageRating.toFixed(1),""]})]}),C.description&&s.jsx("p",{className:"text-xs text-slate-300 line-clamp-3",children:C.description}),C.tags&&C.tags.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1 pt-1",children:C.tags.map(M=>s.jsx("span",{className:"rounded-full bg-slate-900 px-2 py-0.5 text-[11px] text-slate-300",children:M},M))}),s.jsxs("div",{className:"pt-1 flex items-center gap-3",children:[_&&s.jsxs(oe,{to:`/memes/${encodeURIComponent(C.PK)}/edit`,className:"inline-flex items-center gap-1 text-[11px] text-slate-400 hover:text-slate-200",children:[s.jsx(aa,{className:"h-3.5 w-3.5"}),"Edit"]}),ee&&s.jsxs("label",{className:"inline-flex items-center gap-1 text-[11px] text-slate-400",children:[s.jsx("span",{children:"Rate:"}),s.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-1 py-0.5 text-[11px] text-slate-50",onChange:M=>{const J=Number(M.target.value);J>=1&&J<=5&&N(C.PK,J)},defaultValue:"",children:[s.jsx("option",{value:"",children:"--"}),s.jsx("option",{value:"5",children:"5"}),s.jsx("option",{value:"4",children:"4"}),s.jsx("option",{value:"3",children:"3"}),s.jsx("option",{value:"2",children:"2"}),s.jsx("option",{value:"1",children:"1"})]})]})]})]})]},C.PK)})}),re.length===0&&!f&&s.jsx("div",{className:"flex items-center justify-center min-h-[200px]",children:s.jsx("p",{className:"text-lg text-slate-500",children:r==="mine"?U?"No memes match the selected tags.":"You haven't created any memes yet. Create one!":U?"No memes found.":"No memes yet. Create one!"})})]})]})},Sp=({tags:e,onTagsChange:t,allTags:n,fetchTags:r,placeholder:a="Type to suggest or create tag, Tab to autocomplete",className:l=""})=>{const[o,i]=c.useState(""),[u,d]=c.useState(!1),[x,p]=c.useState(0),[g,v]=c.useState(null),b=c.useRef(null),y=c.useRef(null),w=c.useRef(null);c.useEffect(()=>{function k(E){w.current&&!w.current.contains(E.target)&&d(!1)}return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]),c.useEffect(()=>{if(!r){v(null);return}const k=o.trim();if(k.length===0){v(null);return}b.current&&b.current.abort();const E=new AbortController;b.current=E;const $=setTimeout(()=>{r(k).then(I=>{E.signal.aborted||v(I)}).catch(()=>{E.signal.aborted||v(null)})},80);return()=>{clearTimeout($),E.abort()}},[o,r]);const h=c.useMemo(()=>{const k=o.trim().toLowerCase();return r&&g!==null?g.filter(E=>!e.includes(E)):k?n.filter(E=>!e.includes(E)&&E.toLowerCase().includes(k)):n.filter(E=>!e.includes(E))},[n,e,o,r,g]),f=k=>{const E=k.trim();E&&!e.includes(E)&&t([...e,E]),i(""),p(0)},m=k=>{t(e.filter(E=>E!==k))},j=k=>{if(k.key==="Tab"||k.key==="Enter"){if(k.preventDefault(),h.length>0)f(h[x]??h[0]);else{const E=o.trim();E&&f(E)}return}if(k.key==="ArrowDown"){k.preventDefault(),p(E=>(E+1)%Math.max(1,h.length));return}if(k.key==="ArrowUp"){k.preventDefault(),p(E=>E<=0?Math.max(0,h.length-1):E-1);return}k.key==="Escape"&&(d(!1),p(0))};return s.jsxs("div",{ref:w,className:`relative ${l}`,children:[s.jsx("input",{ref:y,type:"text",value:o,onChange:k=>{i(k.target.value),d(!0),p(0)},onFocus:()=>d(!0),onKeyDown:j,placeholder:a,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",autoComplete:"off"}),u&&(h.length>0||o.trim())&&s.jsx("div",{className:"absolute left-0 top-full z-10 mt-1 w-full max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",role:"listbox",children:h.length>0?h.map((k,E)=>s.jsx("button",{type:"button",role:"option","aria-selected":E===x,onClick:()=>f(k),onMouseEnter:()=>p(E),className:`block w-full text-left px-3 py-2 text-sm text-slate-200 hover:bg-slate-800 ${E===x?"bg-slate-800":""}`,children:k},k)):s.jsxs("button",{type:"button",onClick:()=>o.trim()&&f(o.trim()),className:"block w-full text-left px-3 py-2 text-sm text-slate-200 hover:bg-slate-800",children:['Create "',o.trim(),'"']})}),e.length>0&&s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:e.map(k=>s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-300",children:[k,s.jsx("button",{type:"button",onClick:()=>m(k),className:"hover:text-slate-100","aria-label":`Remove ${k}`,children:""})]},k))})]})},wd=["Impact","Arial Black","Comic Sans MS","Georgia","Verdana","Times New Roman","Courier New"],jd=[{id:"top-left",x:.05,y:.05,align:"left"},{id:"top-center",x:.5,y:.05,align:"center"},{id:"top-right",x:.95,y:.05,align:"right"},{id:"center",x:.5,y:.5,align:"center"},{id:"bottom-left",x:.05,y:.95,align:"left"},{id:"bottom-center",x:.5,y:.95,align:"center"},{id:"bottom-right",x:.95,y:.95,align:"right"}],Nd=500,Hv=10*1024*1024;function ys(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Kv=()=>{const{user:e}=ze(),t=Bt(),n=c.useRef(null),[r,a]=c.useState(null),[l,o]=c.useState(null),[i,u]=c.useState(""),[d,x]=c.useState([]),[p,g]=c.useState(null),[v,b]=c.useState(""),[y,w]=c.useState(""),[h,f]=c.useState(!1),[m,j]=c.useState("resize"),[k,E]=c.useState(!1),[$,I]=c.useState(null),[Q,q]=c.useState(!1),[B,ee]=c.useState([]),[_,D]=c.useState([]),U=c.useCallback(async(M,J)=>{var O;const T=window;if(!((O=T.auth)!=null&&O.getAccessToken))throw new Error("Not signed in");const ae=await new Promise(F=>T.auth.getAccessToken(F));if(!ae)throw new Error("Not signed in");return fetch(M,{...J,headers:{...J==null?void 0:J.headers,Authorization:`Bearer ${ae}`}})},[]),K=M=>{d.some(J=>J.zoneId===M)||(x(J=>[...J,{zoneId:M,text:"",font:wd[0],color:"#ffffff",size:32}]),g(M))},re=M=>{x(J=>J.filter(T=>T.zoneId!==M)),p===M&&g(null)},N=(M,J)=>{x(T=>T.map(ae=>ae.zoneId===M?{...ae,...J}:ae))},S=M=>{if(M.size>Hv){I("File too large (max 10MB)");return}if(!["image/jpeg","image/png","image/gif","image/webp","image/bmp"].includes(M.type)){I("Invalid image type");return}I(null);const T=new FileReader;T.onload=()=>a(T.result),T.readAsDataURL(M),o(M),u("")},R=async()=>{const M=i.trim();if(M){I(null);try{const T=await(await U(`${ys()}/memes/import-from-url`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:M})})).json();if(!T.presignedUrl){I(T.error||"Failed to load image from URL");return}a(T.presignedUrl),o(null)}catch(J){I((J==null?void 0:J.message)??"Failed to load image from URL")}}},C=async()=>{const M=ys();if(M){q(!0),I(null);try{const T=await(await U(`${M}/memes/generate-title`,{method:"POST"})).json();T.title&&b(T.title)}catch{b(`Meme ${Date.now().toString(36)}`)}finally{q(!1)}}},P=c.useCallback(()=>{const M=n.current;if(!M||!r)return;const J=M.getContext("2d");if(!J)return;const T=new Image;T.crossOrigin="anonymous",T.onload=()=>{const ae=M.width,O=M.height;if(J.clearRect(0,0,ae,O),m==="resize"){const F=Math.min(ae/T.width,O/T.height),L=T.width*F,G=T.height*F,z=(ae-L)/2,ne=(O-G)/2;J.drawImage(T,z,ne,L,G)}else J.drawImage(T,0,0,ae,O);d.forEach(F=>{const L=jd.find(ne=>ne.id===F.zoneId);if(!L||!F.text)return;J.font=`${F.size}px ${F.font}`,J.fillStyle=F.color,J.textAlign=L.align,J.textBaseline=L.y<.5?"top":"bottom";const G=L.x*ae,z=L.y*O;J.fillText(F.text,G,z)})},T.onerror=()=>I("Failed to load image"),T.src=r},[r,d,m]);c.useEffect(()=>P(),[P]),c.useEffect(()=>{const M=ys();if(!M)return;let J=!1;return U(`${M}/memes/tags`).then(T=>T.ok?T.json():Promise.reject(new Error("Failed to load tags"))).then(T=>{J||D((T.tags??[]).sort((ae,O)=>ae.localeCompare(O)))}).catch(()=>{}),()=>{J=!0}},[U]);const Y=async()=>{if(!r){I("Add an image first");return}const M=n.current;if(!M)return;const J=ys();if(!J){I("API not configured");return}E(!0),I(null);try{const T=await new Promise(z=>{M.toBlob(ne=>z(ne),"image/png",.95)});if(!T)throw new Error("Failed to export canvas");const O=await(await U(`${J}/memes/upload`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contentType:"image/png"})})).json();if(!O.uploadUrl||!O.key)throw new Error(O.error||"Failed to get upload URL");const F=O.key;await fetch(O.uploadUrl,{method:"PUT",body:T,headers:{"Content-Type":"image/png"}});const L=await U(`${J}/memes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mediaKey:F,title:v.trim()||void 0,description:y.trim()||void 0,isPrivate:h,textBoxes:d,sizeMode:m,tags:B})});if(!L.ok){const z=await L.json();throw new Error(z.error||"Failed to save meme")}const G=await L.json();t(G.id?`/memes/${encodeURIComponent(G.id)}`:"/memes")}catch(T){I((T==null?void 0:T.message)??"Failed to save meme")}finally{E(!1)}},V=xr(e);return e?V?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("header",{className:"flex items-center gap-4",children:[s.jsxs(oe,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(_e,{className:"h-4 w-4"}),"Back to Memes"]}),s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Meme Generator"})]}),s.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1fr,320px]",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-2",children:"Image"}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("input",{type:"file",accept:"image/jpeg,image/png,image/gif,image/webp,image/bmp",onChange:M=>{var J;return((J=M.target.files)==null?void 0:J[0])&&S(M.target.files[0])},className:"text-sm text-slate-300 file:mr-2 file:rounded file:border-0 file:bg-brand-orange file:px-3 file:py-1 file:text-slate-950"}),s.jsx("span",{className:"text-xs text-slate-500",children:"or"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"url",value:i,onChange:M=>u(M.target.value),placeholder:"Paste image URL",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500"}),s.jsx("button",{type:"button",onClick:R,className:"rounded-md bg-slate-700 px-3 py-2 text-sm text-slate-200 hover:bg-slate-600",children:"Load"})]})]})]}),r&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{className:"text-xs font-medium text-slate-400",children:"Preview"}),s.jsxs("select",{value:m,onChange:M=>j(M.target.value),className:"rounded border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-300",children:[s.jsx("option",{value:"resize",children:"Resize to fit"}),s.jsx("option",{value:"original",children:"Original"})]})]}),s.jsx("canvas",{ref:n,width:Nd,height:Nd,className:"w-full max-w-[500px] border border-slate-700 rounded-lg bg-slate-900"})]}),s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-2",children:"Text boxes (fixed zones)"}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:jd.map(M=>{const J=d.find(T=>T.zoneId===M.id);return s.jsxs("div",{className:"rounded border border-slate-700 p-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"text-xs text-slate-400",children:M.id}),J?s.jsx("button",{type:"button",onClick:()=>re(M.id),className:"text-red-400 hover:text-red-300 text-xs",children:"Remove"}):s.jsx("button",{type:"button",onClick:()=>K(M.id),className:"text-brand-orange hover:text-orange-400 text-xs",children:"Add"})]}),J&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("input",{type:"text",value:J.text,onChange:T=>N(M.id,{text:T.target.value}),placeholder:"Text",className:"w-full rounded border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-50"}),s.jsx("select",{value:J.font,onChange:T=>N(M.id,{font:T.target.value}),className:"w-full rounded border border-slate-700 bg-slate-950 px-2 py-1 text-[11px] text-slate-300",children:wd.map(T=>s.jsx("option",{value:T,children:T},T))}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("input",{type:"color",value:J.color,onChange:T=>N(M.id,{color:T.target.value}),className:"h-6 w-8 cursor-pointer rounded border border-slate-700"}),s.jsx("input",{type:"number",value:J.size,onChange:T=>N(M.id,{size:Number(T.target.value)||32}),min:12,max:72,className:"w-14 rounded border border-slate-700 bg-slate-950 px-1 py-0.5 text-[11px] text-slate-50"})]})]})]},M.id)})})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Title (optional)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:v,onChange:M=>b(M.target.value),placeholder:"Generate or type",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500"}),s.jsx("button",{type:"button",onClick:C,disabled:Q,className:"rounded-md bg-brand-orange px-3 py-2 text-sm font-medium text-slate-950 disabled:opacity-50",children:Q?"":"Generate"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Description (optional)"}),s.jsx("textarea",{value:y,onChange:M=>w(M.target.value),placeholder:"Optional description",rows:3,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Tags"}),s.jsx(Sp,{tags:B,onTagsChange:ee,allTags:_,fetchTags:async M=>{const J=ys();if(!J)return[];const T=await U(`${J}/memes/tags?q=${encodeURIComponent(M)}`);return T.ok?(await T.json()).tags??[]:[]},placeholder:"Type to suggest or create tag, Tab to autocomplete"})]}),s.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:[s.jsx("input",{type:"checkbox",checked:h,onChange:M=>f(M.target.checked),className:"rounded border-slate-600"}),"Private (only you can see)"]})]}),$&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:$}),s.jsx("button",{type:"button",onClick:Y,disabled:!r||k,className:"w-full rounded-md bg-brand-orange px-4 py-3 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50 disabled:cursor-not-allowed",children:k?"Saving":"Save meme"})]})]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-2xl font-semibold text-slate-50",children:"Meme Generator"}),s.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:"You do not have access. Join the Memes custom group or contact an admin."})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-2xl font-semibold text-slate-50",children:"Meme Generator"}),s.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:"Sign in to create memes."})]})};function Sd(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Vv=()=>{const{id:e}=as(),{user:t}=ze(),[n,r]=c.useState(null),[a,l]=c.useState(!0),[o,i]=c.useState(null),u=!!t&&(Be(t,"user")||Be(t,"manager")||Be(t,"superadmin")),d=e?decodeURIComponent(e):"",x=Re.useCallback(async y=>{var f;const w=window;if(!((f=w.auth)!=null&&f.getAccessToken))throw new Error("Not signed in");const h=await new Promise(m=>w.auth.getAccessToken(m));if(!h)throw new Error("Not signed in");return fetch(y,{headers:{Authorization:`Bearer ${h}`}})},[]);c.useEffect(()=>{const y=Sd();if(!y||!d){i(d?"API URL not set.":"Missing meme id."),l(!1);return}let w=!1;async function h(){l(!0),i(null);try{const f=await x(`${y}/memes?id=${encodeURIComponent(d)}`);if(f.status===404){w||r(null);return}if(!f.ok){const j=await f.text();throw new Error(`HTTP ${f.status}: ${j}`)}const m=await f.json();if(w)return;r(m.meme??null)}catch(f){w||i((f==null?void 0:f.message)??"Failed to load meme.")}finally{w||l(!1)}}return h(),()=>{w=!0}},[d,x]);const p=async y=>{const w=Sd();if(!(!w||!n))try{const h=window,f=await new Promise(j=>h.auth.getAccessToken(j)),m=await fetch(`${w}/memes/stars`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${f}`},body:JSON.stringify({memeId:n.PK,rating:y})});if(m.ok){const j=await m.json();r(k=>k?{...k,averageRating:j.averageRating??y}:null)}}catch{}},g=xr(t);if(!t||!g)return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(oe,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(_e,{className:"h-4 w-4"}),"Back to Memes"]}),s.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:"Sign in and join Memes group to view."})]});if(a)return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(oe,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(_e,{className:"h-4 w-4"}),"Back to Memes"]}),s.jsx("div",{className:"text-sm text-slate-400",children:"Loading"})]});if(o||!n)return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(oe,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(_e,{className:"h-4 w-4"}),"Back to Memes"]}),s.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:o||"Meme not found."})]});const v=n.title||n.PK||"Untitled",b=n.mediaUrl||n.thumbnailUrl;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("header",{className:"flex items-center justify-between gap-4",children:[s.jsxs(oe,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(_e,{className:"h-4 w-4"}),"Back to Memes"]}),u&&s.jsxs(oe,{to:`/memes/${encodeURIComponent(n.PK)}/edit`,className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(aa,{className:"h-4 w-4"}),"Edit"]})]}),s.jsx("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 overflow-hidden min-h-[200px] flex items-center justify-center p-4",children:b?s.jsxs(s.Fragment,{children:[s.jsx("img",{src:b,alt:v,className:"w-full max-w-2xl mx-auto block object-contain max-h-[70vh]",onError:y=>{y.currentTarget.style.display="none";const w=y.currentTarget.nextElementSibling;w&&w.classList.remove("hidden")}}),s.jsx("div",{className:"hidden py-12 text-slate-500","aria-hidden":!0,children:"Image failed to load"})]}):s.jsx("div",{className:"py-12 text-slate-500",children:"No image"})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-50",children:v}),n.isPrivate&&s.jsx("span",{className:"inline-flex rounded-full bg-slate-900 px-2 py-0.5 text-xs uppercase text-slate-500",children:"Private"}),n.description&&s.jsx("p",{className:"text-sm text-slate-300",children:n.description}),s.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[s.jsx("span",{className:"text-xs text-slate-500",children:"Tags:"}),n.tags&&n.tags.length>0?n.tags.map(y=>s.jsx("span",{className:"rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-300",children:y},y)):s.jsx("span",{className:"text-xs text-slate-500",children:""})]}),t&&s.jsx("div",{className:"pt-2",children:s.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-400",children:[s.jsx("span",{children:"Rate:"}),s.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-2 py-1 text-sm text-slate-50",onChange:y=>{const w=Number(y.target.value);w>=1&&w<=5&&p(w)},defaultValue:"",children:[s.jsx("option",{value:"",children:"--"}),s.jsx("option",{value:"5",children:"5"}),s.jsx("option",{value:"4",children:"4"}),s.jsx("option",{value:"3",children:"3"}),s.jsx("option",{value:"2",children:"2"}),s.jsx("option",{value:"1",children:"1"})]}),typeof n.averageRating=="number"&&s.jsxs("span",{className:"text-amber-300",children:[n.averageRating.toFixed(1),""]})]})})]})]})};function $o(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const qv=()=>{const{id:e}=as(),t=Bt(),{user:n}=ze(),[r,a]=c.useState(null),[l,o]=c.useState([]),[i,u]=c.useState(!1),[d,x]=c.useState(!0),[p,g]=c.useState(!1),[v,b]=c.useState(null),[y,w]=c.useState([]),h=e?decodeURIComponent(e):"",f=c.useCallback(async(E,$)=>{var q;const I=window;if(!((q=I.auth)!=null&&q.getAccessToken))throw new Error("Not signed in");const Q=await new Promise(B=>I.auth.getAccessToken(B));if(!Q)throw new Error("Not signed in");return fetch(E,{...$,headers:{...$==null?void 0:$.headers,Authorization:`Bearer ${Q}`}})},[]);c.useEffect(()=>{const E=$o();if(!E||!h){b(h?"API URL not set.":"Missing meme id."),x(!1);return}let $=!1;async function I(){var Q,q;x(!0),b(null);try{const[B,ee]=await Promise.all([f(`${E}/memes?id=${encodeURIComponent(h)}`),f(`${E}/memes/tags`)]);if(B.status===404||!B.ok){$||a(null);return}const _=await B.json(),D=await ee.json();if($)return;a(_.meme??null),o(((Q=_.meme)==null?void 0:Q.tags)??[]),u(((q=_.meme)==null?void 0:q.isPrivate)??!1),w((D.tags??[]).sort((U,K)=>U.localeCompare(K)))}catch(B){$||b((B==null?void 0:B.message)??"Failed to load meme.")}finally{$||x(!1)}}return I(),()=>{$=!0}},[h,f]);const m=c.useRef(null);c.useEffect(()=>{r&&m.current===null&&(m.current=r.isPrivate??!1)},[r]);const j=async()=>{const E=$o();if(!(!E||!r)){g(!0),b(null);try{const $=await f(`${E}/memes`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r.PK,tags:l,isPrivate:i})});if(!$.ok){const Q=await $.json();throw new Error(Q.error||"Failed to save")}const I=m.current===(i??!1);try{sessionStorage.setItem("memes_my_cache_invalidate",JSON.stringify({memeId:r.PK,tagOnly:I,tags:l}))}catch{}t(`/memes/${encodeURIComponent(r.PK)}`)}catch($){b(($==null?void 0:$.message)??"Failed to save")}finally{g(!1)}}},k=xr(n);return n&&(Be(n,"user")||Be(n,"manager")||Be(n,"superadmin")),!n||!k?s.jsxs("div",{className:"space-y-6",children:[s.jsxs(oe,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(_e,{className:"h-4 w-4"}),"Back to Memes"]}),s.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:"Sign in and join Memes group to edit."})]}):d?s.jsxs("div",{className:"space-y-4",children:[s.jsxs(oe,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(_e,{className:"h-4 w-4"}),"Back to Memes"]}),s.jsx("div",{className:"text-sm text-slate-400",children:"Loading"})]}):v||!r?s.jsxs("div",{className:"space-y-4",children:[s.jsxs(oe,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(_e,{className:"h-4 w-4"}),"Back to Memes"]}),s.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:v||"Meme not found."})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("header",{className:"flex items-center gap-4",children:[s.jsxs(oe,{to:`/memes/${encodeURIComponent(r.PK)}`,className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(_e,{className:"h-4 w-4"}),"Back to Meme"]}),s.jsx("h1",{className:"text-xl font-semibold text-slate-50",children:"Edit meme"})]}),s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-4 max-w-xl",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Tags"}),s.jsx(Sp,{tags:l,onTagsChange:o,allTags:y,fetchTags:async E=>{const $=$o();if(!$)return[];const I=await f(`${$}/memes/tags?q=${encodeURIComponent(E)}`);return I.ok?(await I.json()).tags??[]:[]},placeholder:"Type to suggest or create tag, Tab to autocomplete"})]}),s.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:[s.jsx("input",{type:"checkbox",checked:i,onChange:E=>u(E.target.checked),className:"rounded border-slate-600"}),"Private (only you can see)"]}),v&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:v}),s.jsx("button",{type:"button",onClick:j,disabled:p,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:p?"Saving":"Save"})]})]})},Pa=[{label:"Websites",to:"/websites",section:"discover",minRole:"guest"},{label:"Media",to:"/media",section:"discover",minRole:"guest"},{label:"Internet Dashboard",to:"/internet-dashboard",section:"discover",minRole:"guest"},{label:"Profile",to:"/profile",section:"discover",minRole:"user"},{label:"Squash",to:"/squash",section:"squash",minRole:"user"},{label:"Squash Admin",to:"/squash-admin",section:"squash",minRole:"manager"},{label:"Memes",to:"/memes",section:"memes",minRole:"user",memesAccess:!0},{label:"Meme Generator",to:"/memes/create",section:"memes",minRole:"user",memesAccess:!0},{label:"Financial",to:"/financial",section:"financial",minRole:"user"},{label:"Financial Admin",to:"/admin/financial",section:"financial",minRole:"manager"},{label:"Highlights",to:"/recommended/highlights",section:"recommended",minRole:"guest"},{label:"Highest Rated",to:"/recommended/highest-rated",section:"recommended",minRole:"guest"},{label:"Recommended",to:"/admin/recommended",section:"admin",minRole:"manager"},{label:"Membership",to:"/admin/membership",section:"admin",minRole:"manager"},{label:"Websites",to:"/admin/websites",section:"admin",minRole:"manager"},{label:"Media",to:"/admin/media",section:"admin",minRole:"manager"},{label:"Branding",to:"/admin/branding",section:"admin",minRole:"superadmin"},{label:"Internet Dashboard",to:"/admin/internet-dashboard",section:"admin",minRole:"superadmin"}],kp="funkedupshift_sectionOpen";function Ta(){return{discover:!0,squash:!1,memes:!1,financial:!1,recommended:!0,admin:!1}}function Jv(){try{const e=sessionStorage.getItem(kp);if(!e)return Ta();const t=JSON.parse(e);return typeof t!="object"||t===null?Ta():{...Ta(),...t}}catch{return Ta()}}function Qv(e){try{sessionStorage.setItem(kp,JSON.stringify(e))}catch{}}const Yv=()=>{const{user:e,isLoading:t,signOut:n}=ze(),{logo:r}=bp(),a=Bt(),[l,o]=Re.useState(!1),[i,u]=Re.useState(Jv),d=m=>{u(j=>{const k={...j,[m]:!j[m]};return Qv(k),k})},x=()=>{n(),o(!1),a("/")};e==null||e.role;const p=Pa.filter(m=>Be(e??null,m.minRole)),g=p.filter(m=>m.section==="discover"),v=p.filter(m=>m.section==="recommended"),b=Pa.filter(m=>m.section==="squash").filter(m=>m.to==="/squash"?gl(e):yl(e)),y=Pa.filter(m=>m.section==="memes").filter(m=>Be(e??null,m.minRole)&&(!m.memesAccess||xr(e))),w=Pa.filter(m=>m.section==="financial").filter(m=>Be(e??null,m.minRole)).filter(m=>m.to==="/financial"?!0:vl(e)),h=p.filter(m=>m.section==="admin"),f=({isActive:m})=>["flex items-center rounded-md px-3 py-2 text-sm font-medium",m?"bg-slate-800 text-white":"text-slate-300 hover:bg-slate-800/70 hover:text-white"].join(" ");return s.jsxs("div",{className:"min-h-screen bg-slate-950 text-slate-50 flex flex-col",children:[s.jsx("header",{className:"border-b border-slate-800 bg-slate-950/80 backdrop-blur z-20 sticky top-0",children:s.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-3 flex items-center justify-between gap-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-md p-2 text-slate-200 hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-brand-orange lg:hidden",onClick:()=>o(!0),"aria-label":"Open main navigation",children:s.jsx(Dc,{className:"h-6 w-6"})}),s.jsxs(oe,{to:"/",className:"flex items-center gap-2",children:[r?s.jsx("img",{src:r.url,alt:r.alt,className:"h-8 w-auto rounded-md border border-slate-700 object-contain"}):s.jsx("div",{className:"h-8 w-8 rounded-md border border-slate-700 bg-gradient-to-br from-brand-orange to-brand-navy"}),s.jsx("span",{className:"text-sm font-semibold tracking-[0.2em] uppercase text-slate-100",children:"Funked Up Shift"})]})]}),s.jsx("div",{className:"flex items-center gap-3",children:e?s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"hidden sm:inline text-xs text-slate-300",children:[e.email," ",s.jsxs("span",{className:"text-slate-500",children:["(",e.role==="superadmin"?"SuperAdmin":e.role,")"]})]}),s.jsx("button",{type:"button",onClick:x,className:"rounded-full border border-slate-700 px-3 py-1 text-xs font-medium text-slate-200 hover:bg-slate-800",children:"Sign out"})]}):t?s.jsx("span",{className:"text-xs text-slate-400",children:"Loading..."}):s.jsx(oe,{to:"/auth",className:"rounded-full bg-brand-orange px-3 py-1 text-xs font-semibold text-slate-950 hover:bg-orange-500",children:"Sign in"})})]})}),s.jsxs("div",{className:"flex-1 flex",children:[s.jsx("aside",{className:"hidden lg:block w-64 border-r border-slate-800 bg-slate-950/80",children:s.jsxs("nav",{className:"h-full overflow-y-auto px-4 py-6 space-y-6 text-sm",children:[s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("discover"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Discover",i.discover??!0?s.jsx(Gt,{className:"h-4 w-4 shrink-0"}):s.jsx(Ht,{className:"h-4 w-4 shrink-0"})]}),(i.discover??!0)&&s.jsx("div",{className:"space-y-1",children:g.map(m=>s.jsx(Wt,{to:m.to,className:f,children:m.label},m.to))})]}),b.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("squash"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Squash",i.squash??!1?s.jsx(Gt,{className:"h-4 w-4 shrink-0"}):s.jsx(Ht,{className:"h-4 w-4 shrink-0"})]}),(i.squash??!1)&&s.jsx("div",{className:"space-y-1",children:b.map(m=>s.jsx(Wt,{to:m.to,className:f,children:m.label},m.to))})]}),y.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("memes"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Memes",i.memes??!1?s.jsx(Gt,{className:"h-4 w-4 shrink-0"}):s.jsx(Ht,{className:"h-4 w-4 shrink-0"})]}),(i.memes??!1)&&s.jsx("div",{className:"space-y-1",children:y.map(m=>s.jsx(Wt,{to:m.to,className:f,children:m.label},m.to))})]}),v.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("recommended"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Recommended",i.recommended??!0?s.jsx(Gt,{className:"h-4 w-4 shrink-0"}):s.jsx(Ht,{className:"h-4 w-4 shrink-0"})]}),(i.recommended??!0)&&s.jsx("div",{className:"space-y-1",children:v.map(m=>s.jsx(Wt,{to:m.to,className:f,children:m.label},m.to))})]}),w.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("financial"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Financial",i.financial??!1?s.jsx(Gt,{className:"h-4 w-4 shrink-0"}):s.jsx(Ht,{className:"h-4 w-4 shrink-0"})]}),(i.financial??!1)&&s.jsx("div",{className:"space-y-1",children:w.map(m=>s.jsx(Wt,{to:m.to,className:f,children:m.label},m.to))})]}),h.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("admin"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Admin",i.admin??!1?s.jsx(Gt,{className:"h-4 w-4 shrink-0"}):s.jsx(Ht,{className:"h-4 w-4 shrink-0"})]}),(i.admin??!1)&&s.jsx("div",{className:"space-y-1",children:h.map(m=>s.jsx(Wt,{to:m.to,className:f,children:m.label},m.to))})]})]})}),s.jsxs(ur,{open:l,onClose:o,className:"lg:hidden",children:[s.jsx("div",{className:"fixed inset-0 bg-black/40","aria-hidden":"true"}),s.jsxs(ur.Panel,{className:"fixed inset-y-0 left-0 w-72 bg-slate-950 border-r border-slate-800 p-4 flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx(ur.Title,{className:"text-sm font-semibold tracking-[0.15em] uppercase text-slate-100",children:"Funked Up Shift"}),s.jsx("button",{type:"button",className:"rounded-md p-1 text-slate-200 hover:bg-slate-800",onClick:()=>o(!1),"aria-label":"Close main navigation",children:s.jsx(Mc,{className:"h-5 w-5"})})]}),s.jsxs("nav",{className:"flex-1 overflow-y-auto space-y-6 text-sm",children:[s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("discover"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Discover",i.discover??!0?s.jsx(Gt,{className:"h-4 w-4 shrink-0"}):s.jsx(Ht,{className:"h-4 w-4 shrink-0"})]}),(i.discover??!0)&&s.jsx("div",{className:"space-y-1",children:g.map(m=>s.jsx(Wt,{to:m.to,className:f,onClick:()=>o(!1),children:m.label},m.to))})]}),v.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("recommended"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Recommended",i.recommended??!0?s.jsx(Gt,{className:"h-4 w-4 shrink-0"}):s.jsx(Ht,{className:"h-4 w-4 shrink-0"})]}),(i.recommended??!0)&&s.jsx("div",{className:"space-y-1",children:v.map(m=>s.jsx(Wt,{to:m.to,className:f,onClick:()=>o(!1),children:m.label},m.to))})]}),b.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("squash"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Squash",i.squash??!1?s.jsx(Gt,{className:"h-4 w-4 shrink-0"}):s.jsx(Ht,{className:"h-4 w-4 shrink-0"})]}),(i.squash??!1)&&s.jsx("div",{className:"space-y-1",children:b.map(m=>s.jsx(Wt,{to:m.to,className:f,onClick:()=>o(!1),children:m.label},m.to))})]}),w.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("financial"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Financial",i.financial??!1?s.jsx(Gt,{className:"h-4 w-4 shrink-0"}):s.jsx(Ht,{className:"h-4 w-4 shrink-0"})]}),(i.financial??!1)&&s.jsx("div",{className:"space-y-1",children:w.map(m=>s.jsx(Wt,{to:m.to,className:f,onClick:()=>o(!1),children:m.label},m.to))})]}),h.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("admin"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Admin",i.admin??!1?s.jsx(Gt,{className:"h-4 w-4 shrink-0"}):s.jsx(Ht,{className:"h-4 w-4 shrink-0"})]}),(i.admin??!1)&&s.jsx("div",{className:"space-y-1",children:h.map(m=>s.jsx(Wt,{to:m.to,className:f,onClick:()=>o(!1),children:m.label},m.to))})]})]})]})]}),s.jsx("main",{className:"flex-1 min-w-0",children:s.jsx("div",{className:"mx-auto max-w-6xl px-4 py-6",children:s.jsxs(Gx,{children:[s.jsx(De,{path:"/",element:s.jsx(Zy,{})}),s.jsx(De,{path:"/websites",element:s.jsx(Xy,{})}),s.jsx(De,{path:"/websites/:id",element:s.jsx(ev,{})}),s.jsx(De,{path:"/media",element:s.jsx(tv,{})}),s.jsx(De,{path:"/media/:id",element:s.jsx(nv,{})}),s.jsx(De,{path:"/internet-dashboard",element:s.jsx(ov,{})}),s.jsx(De,{path:"/recommended/highlights",element:s.jsx(cv,{})}),s.jsx(De,{path:"/recommended/highest-rated",element:s.jsx(mv,{})}),s.jsx(De,{path:"/squash",element:s.jsx(_v,{})}),s.jsx(De,{path:"/squash-admin",element:s.jsx(Bv,{})}),s.jsx(De,{path:"/memes",element:s.jsx(Gv,{})}),s.jsx(De,{path:"/memes/create",element:s.jsx(Kv,{})}),s.jsx(De,{path:"/memes/:id/edit",element:s.jsx(qv,{})}),s.jsx(De,{path:"/memes/:id",element:s.jsx(Vv,{})}),s.jsx(De,{path:"/financial",element:s.jsx(zv,{})}),s.jsx(De,{path:"/admin/financial",element:s.jsx(Wv,{})}),s.jsx(De,{path:"/admin/branding",element:s.jsx(hv,{})}),s.jsx(De,{path:"/admin/internet-dashboard",element:s.jsx(xv,{})}),s.jsx(De,{path:"/admin/recommended",element:s.jsx(gv,{})}),s.jsx(De,{path:"/admin/membership",element:s.jsx(bv,{})}),s.jsx(De,{path:"/admin/users/edit",element:s.jsx(Rv,{})}),s.jsx(De,{path:"/admin/websites",element:s.jsx(Nv,{})}),s.jsx(De,{path:"/admin/sites/edit/:id",element:s.jsx(Ev,{})}),s.jsx(De,{path:"/admin/media",element:s.jsx(kv,{})}),s.jsx(De,{path:"/admin/media/edit/:id",element:s.jsx(Pv,{})}),s.jsx(De,{path:"/admin/*",element:s.jsx("div",{children:"Admin area"})}),s.jsx(De,{path:"/profile",element:s.jsx(Ov,{})}),s.jsx(De,{path:"/auth",element:s.jsx(Lv,{})}),s.jsx(De,{path:"*",element:s.jsx("div",{children:"Not found"})})]})})})]}),s.jsx("footer",{className:"border-t border-slate-800 bg-slate-950",children:s.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-4 flex flex-col sm:flex-row items-center justify-between gap-3 text-xs text-slate-500",children:[s.jsxs("nav",{className:"flex flex-wrap gap-3 justify-center sm:justify-start",children:[s.jsx(oe,{to:"/",className:"hover:text-slate-300",children:"Home"}),s.jsx(oe,{to:"/websites",className:"hover:text-slate-300",children:"Websites"}),s.jsx(oe,{to:"/media",className:"hover:text-slate-300",children:"Media"}),s.jsx(oe,{to:"/internet-dashboard",className:"hover:text-slate-300",children:"Internet dashboard"}),s.jsx(oe,{to:"/recommended/highlights",className:"hover:text-slate-300",children:"Highlights"}),s.jsx(oe,{to:"/recommended/highest-rated",className:"hover:text-slate-300",children:"Highest rated"}),e&&s.jsx(oe,{to:"/profile",className:"hover:text-slate-300",children:"Profile"}),Be(e??null,"superadmin")&&s.jsx(oe,{to:"/admin/branding",className:"hover:text-slate-300",children:"Branding"}),gl(e)&&s.jsx(oe,{to:"/squash",className:"hover:text-slate-300",children:"Squash"}),yl(e)&&s.jsx(oe,{to:"/squash-admin",className:"hover:text-slate-300",children:"Squash Admin"}),xr(e)&&s.jsx(oe,{to:"/memes",className:"hover:text-slate-300",children:"Memes"}),yp(e)&&s.jsx(oe,{to:"/financial",className:"hover:text-slate-300",children:"Financial"}),vl(e)&&s.jsx(oe,{to:"/admin/financial",className:"hover:text-slate-300",children:"Financial Admin"})]}),s.jsxs("div",{className:"text-slate-600",children:[s.jsx("span",{className:"font-mono text-[11px]",children:"funkedupshift"})," ",s.jsx("span",{className:"text-slate-700",children:""})," ",s.jsx("span",{children:"All data public, admin-managed curation"})]})]})})]})},kd=document.getElementById("root");kd&&Io.createRoot(kd).render(s.jsx(Re.StrictMode,{children:s.jsx(Xx,{children:s.jsx(Jy,{children:s.jsx(Yy,{children:s.jsx(Yv,{})})})})}));

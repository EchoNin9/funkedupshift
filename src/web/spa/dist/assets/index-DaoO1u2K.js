function pp(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const l=Object.getOwnPropertyDescriptor(r,a);l&&Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function hp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var pd={exports:{}},pl={},hd={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ys=Symbol.for("react.element"),xp=Symbol.for("react.portal"),gp=Symbol.for("react.fragment"),yp=Symbol.for("react.strict_mode"),vp=Symbol.for("react.profiler"),wp=Symbol.for("react.provider"),bp=Symbol.for("react.context"),jp=Symbol.for("react.forward_ref"),Np=Symbol.for("react.suspense"),Sp=Symbol.for("react.memo"),kp=Symbol.for("react.lazy"),Ru=Symbol.iterator;function Cp(e){return e===null||typeof e!="object"?null:(e=Ru&&e[Ru]||e["@@iterator"],typeof e=="function"?e:null)}var xd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gd=Object.assign,yd={};function Xr(e,t,n){this.props=e,this.context=t,this.refs=yd,this.updater=n||xd}Xr.prototype.isReactComponent={};Xr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Xr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function vd(){}vd.prototype=Xr.prototype;function Ri(e,t,n){this.props=e,this.context=t,this.refs=yd,this.updater=n||xd}var Ui=Ri.prototype=new vd;Ui.constructor=Ri;gd(Ui,Xr.prototype);Ui.isPureReactComponent=!0;var Uu=Array.isArray,wd=Object.prototype.hasOwnProperty,Ii={current:null},bd={key:!0,ref:!0,__self:!0,__source:!0};function jd(e,t,n){var r,a={},l=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(l=""+t.key),t)wd.call(t,r)&&!bd.hasOwnProperty(r)&&(a[r]=t[r]);var i=arguments.length-2;if(i===1)a.children=n;else if(1<i){for(var c=Array(i),d=0;d<i;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(r in i=e.defaultProps,i)a[r]===void 0&&(a[r]=i[r]);return{$$typeof:Ys,type:e,key:l,ref:o,props:a,_owner:Ii.current}}function Ep(e,t){return{$$typeof:Ys,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Di(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ys}function Pp(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Iu=/\/+/g;function Ml(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Pp(""+e.key):t.toString(36)}function ka(e,t,n,r,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Ys:case xp:o=!0}}if(o)return o=e,a=a(o),e=r===""?"."+Ml(o,0):r,Uu(a)?(n="",e!=null&&(n=e.replace(Iu,"$&/")+"/"),ka(a,t,n,"",function(d){return d})):a!=null&&(Di(a)&&(a=Ep(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(Iu,"$&/")+"/")+e)),t.push(a)),1;if(o=0,r=r===""?".":r+":",Uu(e))for(var i=0;i<e.length;i++){l=e[i];var c=r+Ml(l,i);o+=ka(l,t,n,c,a)}else if(c=Cp(e),typeof c=="function")for(e=c.call(e),i=0;!(l=e.next()).done;)l=l.value,c=r+Ml(l,i++),o+=ka(l,t,n,c,a);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function sa(e,t,n){if(e==null)return e;var r=[],a=0;return ka(e,r,"","",function(l){return t.call(n,l,a++)}),r}function Tp(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var jt={current:null},Ca={transition:null},Lp={ReactCurrentDispatcher:jt,ReactCurrentBatchConfig:Ca,ReactCurrentOwner:Ii};function Nd(){throw Error("act(...) is not supported in production builds of React.")}ke.Children={map:sa,forEach:function(e,t,n){sa(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return sa(e,function(){t++}),t},toArray:function(e){return sa(e,function(t){return t})||[]},only:function(e){if(!Di(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ke.Component=Xr;ke.Fragment=gp;ke.Profiler=vp;ke.PureComponent=Ri;ke.StrictMode=yp;ke.Suspense=Np;ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lp;ke.act=Nd;ke.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=gd({},e.props),a=e.key,l=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,o=Ii.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(c in t)wd.call(t,c)&&!bd.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&i!==void 0?i[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){i=Array(c);for(var d=0;d<c;d++)i[d]=arguments[d+2];r.children=i}return{$$typeof:Ys,type:e.type,key:a,ref:l,props:r,_owner:o}};ke.createContext=function(e){return e={$$typeof:bp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:wp,_context:e},e.Consumer=e};ke.createElement=jd;ke.createFactory=function(e){var t=jd.bind(null,e);return t.type=e,t};ke.createRef=function(){return{current:null}};ke.forwardRef=function(e){return{$$typeof:jp,render:e}};ke.isValidElement=Di;ke.lazy=function(e){return{$$typeof:kp,_payload:{_status:-1,_result:e},_init:Tp}};ke.memo=function(e,t){return{$$typeof:Sp,type:e,compare:t===void 0?null:t}};ke.startTransition=function(e){var t=Ca.transition;Ca.transition={};try{e()}finally{Ca.transition=t}};ke.unstable_act=Nd;ke.useCallback=function(e,t){return jt.current.useCallback(e,t)};ke.useContext=function(e){return jt.current.useContext(e)};ke.useDebugValue=function(){};ke.useDeferredValue=function(e){return jt.current.useDeferredValue(e)};ke.useEffect=function(e,t){return jt.current.useEffect(e,t)};ke.useId=function(){return jt.current.useId()};ke.useImperativeHandle=function(e,t,n){return jt.current.useImperativeHandle(e,t,n)};ke.useInsertionEffect=function(e,t){return jt.current.useInsertionEffect(e,t)};ke.useLayoutEffect=function(e,t){return jt.current.useLayoutEffect(e,t)};ke.useMemo=function(e,t){return jt.current.useMemo(e,t)};ke.useReducer=function(e,t,n){return jt.current.useReducer(e,t,n)};ke.useRef=function(e){return jt.current.useRef(e)};ke.useState=function(e){return jt.current.useState(e)};ke.useSyncExternalStore=function(e,t,n){return jt.current.useSyncExternalStore(e,t,n)};ke.useTransition=function(){return jt.current.useTransition()};ke.version="18.3.1";hd.exports=ke;var u=hd.exports;const Ae=hp(u),Gr=pp({__proto__:null,default:Ae},[u]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ap=u,$p=Symbol.for("react.element"),Rp=Symbol.for("react.fragment"),Up=Object.prototype.hasOwnProperty,Ip=Ap.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Dp={key:!0,ref:!0,__self:!0,__source:!0};function Sd(e,t,n){var r,a={},l=null,o=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Up.call(t,r)&&!Dp.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:$p,type:e,key:l,ref:o,props:a,_owner:Ip.current}}pl.Fragment=Rp;pl.jsx=Sd;pl.jsxs=Sd;pd.exports=pl;var s=pd.exports,Co={},kd={exports:{}},Rt={},Cd={exports:{}},Ed={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(w,b){var C=w.length;w.push(b);e:for(;0<C;){var A=C-1>>>1,T=w[A];if(0<a(T,b))w[A]=b,w[C]=T,C=A;else break e}}function n(w){return w.length===0?null:w[0]}function r(w){if(w.length===0)return null;var b=w[0],C=w.pop();if(C!==b){w[0]=C;e:for(var A=0,T=w.length,Z=T>>>1;A<Z;){var se=2*(A+1)-1,H=w[se],J=se+1,L=w[J];if(0>a(H,C))J<T&&0>a(L,H)?(w[A]=L,w[J]=C,A=J):(w[A]=H,w[se]=C,A=se);else if(J<T&&0>a(L,C))w[A]=L,w[J]=C,A=J;else break e}}return b}function a(w,b){var C=w.sortIndex-b.sortIndex;return C!==0?C:w.id-b.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var o=Date,i=o.now();e.unstable_now=function(){return o.now()-i}}var c=[],d=[],h=1,m=null,g=3,v=!1,j=!1,y=!1,S=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(w){for(var b=n(d);b!==null;){if(b.callback===null)r(d);else if(b.startTime<=w)r(d),b.sortIndex=b.expirationTime,t(c,b);else break;b=n(d)}}function N(w){if(y=!1,x(w),!j)if(n(c)!==null)j=!0,z(E);else{var b=n(d);b!==null&&Q(N,b.startTime-w)}}function E(w,b){j=!1,y&&(y=!1,f(I),I=-1),v=!0;var C=g;try{for(x(b),m=n(c);m!==null&&(!(m.expirationTime>b)||w&&!te());){var A=m.callback;if(typeof A=="function"){m.callback=null,g=m.priorityLevel;var T=A(m.expirationTime<=b);b=e.unstable_now(),typeof T=="function"?m.callback=T:m===n(c)&&r(c),x(b)}else r(c);m=n(c)}if(m!==null)var Z=!0;else{var se=n(d);se!==null&&Q(N,se.startTime-b),Z=!1}return Z}finally{m=null,g=C,v=!1}}var P=!1,R=null,I=-1,V=5,G=-1;function te(){return!(e.unstable_now()-G<V)}function ye(){if(R!==null){var w=e.unstable_now();G=w;var b=!0;try{b=R(!0,w)}finally{b?de():(P=!1,R=null)}}else P=!1}var de;if(typeof p=="function")de=function(){p(ye)};else if(typeof MessageChannel<"u"){var _=new MessageChannel,$=_.port2;_.port1.onmessage=ye,de=function(){$.postMessage(null)}}else de=function(){S(ye,0)};function z(w){R=w,P||(P=!0,de())}function Q(w,b){I=S(function(){w(e.unstable_now())},b)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(w){w.callback=null},e.unstable_continueExecution=function(){j||v||(j=!0,z(E))},e.unstable_forceFrameRate=function(w){0>w||125<w?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<w?Math.floor(1e3/w):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(w){switch(g){case 1:case 2:case 3:var b=3;break;default:b=g}var C=g;g=b;try{return w()}finally{g=C}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(w,b){switch(w){case 1:case 2:case 3:case 4:case 5:break;default:w=3}var C=g;g=w;try{return b()}finally{g=C}},e.unstable_scheduleCallback=function(w,b,C){var A=e.unstable_now();switch(typeof C=="object"&&C!==null?(C=C.delay,C=typeof C=="number"&&0<C?A+C:A):C=A,w){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=C+T,w={id:h++,callback:b,priorityLevel:w,startTime:C,expirationTime:T,sortIndex:-1},C>A?(w.sortIndex=C,t(d,w),n(c)===null&&w===n(d)&&(y?(f(I),I=-1):y=!0,Q(N,C-A))):(w.sortIndex=T,t(c,w),j||v||(j=!0,z(E))),w},e.unstable_shouldYield=te,e.unstable_wrapCallback=function(w){var b=g;return function(){var C=g;g=b;try{return w.apply(this,arguments)}finally{g=C}}}})(Ed);Cd.exports=Ed;var Op=Cd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _p=u,$t=Op;function B(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Pd=new Set,As={};function hr(e,t){Hr(e,t),Hr(e+"Capture",t)}function Hr(e,t){for(As[e]=t,e=0;e<t.length;e++)Pd.add(t[e])}var cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Eo=Object.prototype.hasOwnProperty,Mp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Du={},Ou={};function Fp(e){return Eo.call(Ou,e)?!0:Eo.call(Du,e)?!1:Mp.test(e)?Ou[e]=!0:(Du[e]=!0,!1)}function Bp(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function zp(e,t,n,r){if(t===null||typeof t>"u"||Bp(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Nt(e,t,n,r,a,l,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=o}var dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){dt[e]=new Nt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];dt[t]=new Nt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){dt[e]=new Nt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){dt[e]=new Nt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){dt[e]=new Nt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){dt[e]=new Nt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){dt[e]=new Nt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){dt[e]=new Nt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){dt[e]=new Nt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Oi=/[\-:]([a-z])/g;function _i(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Oi,_i);dt[t]=new Nt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Oi,_i);dt[t]=new Nt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Oi,_i);dt[t]=new Nt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){dt[e]=new Nt(e,1,!1,e.toLowerCase(),null,!1,!1)});dt.xlinkHref=new Nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){dt[e]=new Nt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Mi(e,t,n,r){var a=dt.hasOwnProperty(t)?dt[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(zp(t,n,a,r)&&(n=null),r||a===null?Fp(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var hn=_p.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,aa=Symbol.for("react.element"),kr=Symbol.for("react.portal"),Cr=Symbol.for("react.fragment"),Fi=Symbol.for("react.strict_mode"),Po=Symbol.for("react.profiler"),Td=Symbol.for("react.provider"),Ld=Symbol.for("react.context"),Bi=Symbol.for("react.forward_ref"),To=Symbol.for("react.suspense"),Lo=Symbol.for("react.suspense_list"),zi=Symbol.for("react.memo"),Nn=Symbol.for("react.lazy"),Ad=Symbol.for("react.offscreen"),_u=Symbol.iterator;function as(e){return e===null||typeof e!="object"?null:(e=_u&&e[_u]||e["@@iterator"],typeof e=="function"?e:null)}var qe=Object.assign,Fl;function xs(e){if(Fl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Fl=t&&t[1]||""}return`
`+Fl+e}var Bl=!1;function zl(e,t){if(!e||Bl)return"";Bl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),l=r.stack.split(`
`),o=a.length-1,i=l.length-1;1<=o&&0<=i&&a[o]!==l[i];)i--;for(;1<=o&&0<=i;o--,i--)if(a[o]!==l[i]){if(o!==1||i!==1)do if(o--,i--,0>i||a[o]!==l[i]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=i);break}}}finally{Bl=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?xs(e):""}function Wp(e){switch(e.tag){case 5:return xs(e.type);case 16:return xs("Lazy");case 13:return xs("Suspense");case 19:return xs("SuspenseList");case 0:case 2:case 15:return e=zl(e.type,!1),e;case 11:return e=zl(e.type.render,!1),e;case 1:return e=zl(e.type,!0),e;default:return""}}function Ao(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Cr:return"Fragment";case kr:return"Portal";case Po:return"Profiler";case Fi:return"StrictMode";case To:return"Suspense";case Lo:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ld:return(e.displayName||"Context")+".Consumer";case Td:return(e._context.displayName||"Context")+".Provider";case Bi:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case zi:return t=e.displayName||null,t!==null?t:Ao(e.type)||"Memo";case Nn:t=e._payload,e=e._init;try{return Ao(e(t))}catch{}}return null}function Gp(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ao(t);case 8:return t===Fi?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Fn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function $d(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Hp(e){var t=$d(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,l.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function la(e){e._valueTracker||(e._valueTracker=Hp(e))}function Rd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=$d(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function _a(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function $o(e,t){var n=t.checked;return qe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Mu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Fn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ud(e,t){t=t.checked,t!=null&&Mi(e,"checked",t,!1)}function Ro(e,t){Ud(e,t);var n=Fn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Uo(e,t.type,n):t.hasOwnProperty("defaultValue")&&Uo(e,t.type,Fn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Fu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Uo(e,t,n){(t!=="number"||_a(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var gs=Array.isArray;function Or(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Fn(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Io(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(B(91));return qe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Bu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(B(92));if(gs(n)){if(1<n.length)throw Error(B(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Fn(n)}}function Id(e,t){var n=Fn(t.value),r=Fn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function zu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Dd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Do(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Dd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var oa,Od=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(oa=oa||document.createElement("div"),oa.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=oa.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function $s(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var js={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vp=["Webkit","ms","Moz","O"];Object.keys(js).forEach(function(e){Vp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),js[t]=js[e]})});function _d(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||js.hasOwnProperty(e)&&js[e]?(""+t).trim():t+"px"}function Md(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=_d(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var Kp=qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Oo(e,t){if(t){if(Kp[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(B(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(B(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(B(61))}if(t.style!=null&&typeof t.style!="object")throw Error(B(62))}}function _o(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mo=null;function Wi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Fo=null,_r=null,Mr=null;function Wu(e){if(e=Xs(e)){if(typeof Fo!="function")throw Error(B(280));var t=e.stateNode;t&&(t=vl(t),Fo(e.stateNode,e.type,t))}}function Fd(e){_r?Mr?Mr.push(e):Mr=[e]:_r=e}function Bd(){if(_r){var e=_r,t=Mr;if(Mr=_r=null,Wu(e),t)for(e=0;e<t.length;e++)Wu(t[e])}}function zd(e,t){return e(t)}function Wd(){}var Wl=!1;function Gd(e,t,n){if(Wl)return e(t,n);Wl=!0;try{return zd(e,t,n)}finally{Wl=!1,(_r!==null||Mr!==null)&&(Wd(),Bd())}}function Rs(e,t){var n=e.stateNode;if(n===null)return null;var r=vl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(B(231,t,typeof n));return n}var Bo=!1;if(cn)try{var ls={};Object.defineProperty(ls,"passive",{get:function(){Bo=!0}}),window.addEventListener("test",ls,ls),window.removeEventListener("test",ls,ls)}catch{Bo=!1}function qp(e,t,n,r,a,l,o,i,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(h){this.onError(h)}}var Ns=!1,Ma=null,Fa=!1,zo=null,Qp={onError:function(e){Ns=!0,Ma=e}};function Yp(e,t,n,r,a,l,o,i,c){Ns=!1,Ma=null,qp.apply(Qp,arguments)}function Jp(e,t,n,r,a,l,o,i,c){if(Yp.apply(this,arguments),Ns){if(Ns){var d=Ma;Ns=!1,Ma=null}else throw Error(B(198));Fa||(Fa=!0,zo=d)}}function xr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Hd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Gu(e){if(xr(e)!==e)throw Error(B(188))}function Zp(e){var t=e.alternate;if(!t){if(t=xr(e),t===null)throw Error(B(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var l=a.alternate;if(l===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===n)return Gu(a),e;if(l===r)return Gu(a),t;l=l.sibling}throw Error(B(188))}if(n.return!==r.return)n=a,r=l;else{for(var o=!1,i=a.child;i;){if(i===n){o=!0,n=a,r=l;break}if(i===r){o=!0,r=a,n=l;break}i=i.sibling}if(!o){for(i=l.child;i;){if(i===n){o=!0,n=l,r=a;break}if(i===r){o=!0,r=l,n=a;break}i=i.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?e:t}function Vd(e){return e=Zp(e),e!==null?Kd(e):null}function Kd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Kd(e);if(t!==null)return t;e=e.sibling}return null}var qd=$t.unstable_scheduleCallback,Hu=$t.unstable_cancelCallback,Xp=$t.unstable_shouldYield,eh=$t.unstable_requestPaint,Xe=$t.unstable_now,th=$t.unstable_getCurrentPriorityLevel,Gi=$t.unstable_ImmediatePriority,Qd=$t.unstable_UserBlockingPriority,Ba=$t.unstable_NormalPriority,nh=$t.unstable_LowPriority,Yd=$t.unstable_IdlePriority,hl=null,Jt=null;function rh(e){if(Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(hl,e,void 0,(e.current.flags&128)===128)}catch{}}var Ht=Math.clz32?Math.clz32:lh,sh=Math.log,ah=Math.LN2;function lh(e){return e>>>=0,e===0?32:31-(sh(e)/ah|0)|0}var ia=64,ua=4194304;function ys(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function za(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,l=e.pingedLanes,o=n&268435455;if(o!==0){var i=o&~a;i!==0?r=ys(i):(l&=o,l!==0&&(r=ys(l)))}else o=n&~a,o!==0?r=ys(o):l!==0&&(r=ys(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,l=t&-t,a>=l||a===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ht(t),a=1<<n,r|=e[n],t&=~a;return r}function oh(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ih(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var o=31-Ht(l),i=1<<o,c=a[o];c===-1?(!(i&n)||i&r)&&(a[o]=oh(i,t)):c<=t&&(e.expiredLanes|=i),l&=~i}}function Wo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Jd(){var e=ia;return ia<<=1,!(ia&4194240)&&(ia=64),e}function Gl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Js(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ht(t),e[t]=n}function uh(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Ht(n),l=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~l}}function Hi(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ht(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var _e=0;function Zd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Xd,Vi,ef,tf,nf,Go=!1,ca=[],An=null,$n=null,Rn=null,Us=new Map,Is=new Map,kn=[],ch="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vu(e,t){switch(e){case"focusin":case"focusout":An=null;break;case"dragenter":case"dragleave":$n=null;break;case"mouseover":case"mouseout":Rn=null;break;case"pointerover":case"pointerout":Us.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Is.delete(t.pointerId)}}function os(e,t,n,r,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[a]},t!==null&&(t=Xs(t),t!==null&&Vi(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function dh(e,t,n,r,a){switch(t){case"focusin":return An=os(An,e,t,n,r,a),!0;case"dragenter":return $n=os($n,e,t,n,r,a),!0;case"mouseover":return Rn=os(Rn,e,t,n,r,a),!0;case"pointerover":var l=a.pointerId;return Us.set(l,os(Us.get(l)||null,e,t,n,r,a)),!0;case"gotpointercapture":return l=a.pointerId,Is.set(l,os(Is.get(l)||null,e,t,n,r,a)),!0}return!1}function rf(e){var t=nr(e.target);if(t!==null){var n=xr(t);if(n!==null){if(t=n.tag,t===13){if(t=Hd(n),t!==null){e.blockedOn=t,nf(e.priority,function(){ef(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ea(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ho(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Mo=r,n.target.dispatchEvent(r),Mo=null}else return t=Xs(n),t!==null&&Vi(t),e.blockedOn=n,!1;t.shift()}return!0}function Ku(e,t,n){Ea(e)&&n.delete(t)}function fh(){Go=!1,An!==null&&Ea(An)&&(An=null),$n!==null&&Ea($n)&&($n=null),Rn!==null&&Ea(Rn)&&(Rn=null),Us.forEach(Ku),Is.forEach(Ku)}function is(e,t){e.blockedOn===t&&(e.blockedOn=null,Go||(Go=!0,$t.unstable_scheduleCallback($t.unstable_NormalPriority,fh)))}function Ds(e){function t(a){return is(a,e)}if(0<ca.length){is(ca[0],e);for(var n=1;n<ca.length;n++){var r=ca[n];r.blockedOn===e&&(r.blockedOn=null)}}for(An!==null&&is(An,e),$n!==null&&is($n,e),Rn!==null&&is(Rn,e),Us.forEach(t),Is.forEach(t),n=0;n<kn.length;n++)r=kn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<kn.length&&(n=kn[0],n.blockedOn===null);)rf(n),n.blockedOn===null&&kn.shift()}var Fr=hn.ReactCurrentBatchConfig,Wa=!0;function mh(e,t,n,r){var a=_e,l=Fr.transition;Fr.transition=null;try{_e=1,Ki(e,t,n,r)}finally{_e=a,Fr.transition=l}}function ph(e,t,n,r){var a=_e,l=Fr.transition;Fr.transition=null;try{_e=4,Ki(e,t,n,r)}finally{_e=a,Fr.transition=l}}function Ki(e,t,n,r){if(Wa){var a=Ho(e,t,n,r);if(a===null)eo(e,t,r,Ga,n),Vu(e,r);else if(dh(a,e,t,n,r))r.stopPropagation();else if(Vu(e,r),t&4&&-1<ch.indexOf(e)){for(;a!==null;){var l=Xs(a);if(l!==null&&Xd(l),l=Ho(e,t,n,r),l===null&&eo(e,t,r,Ga,n),l===a)break;a=l}a!==null&&r.stopPropagation()}else eo(e,t,r,null,n)}}var Ga=null;function Ho(e,t,n,r){if(Ga=null,e=Wi(r),e=nr(e),e!==null)if(t=xr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Hd(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ga=e,null}function sf(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(th()){case Gi:return 1;case Qd:return 4;case Ba:case nh:return 16;case Yd:return 536870912;default:return 16}default:return 16}}var Pn=null,qi=null,Pa=null;function af(){if(Pa)return Pa;var e,t=qi,n=t.length,r,a="value"in Pn?Pn.value:Pn.textContent,l=a.length;for(e=0;e<n&&t[e]===a[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===a[l-r];r++);return Pa=a.slice(e,1<r?1-r:void 0)}function Ta(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function da(){return!0}function qu(){return!1}function Ut(e){function t(n,r,a,l,o){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],this[i]=n?n(l):l[i]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?da:qu,this.isPropagationStopped=qu,this}return qe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=da)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=da)},persist:function(){},isPersistent:da}),t}var es={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qi=Ut(es),Zs=qe({},es,{view:0,detail:0}),hh=Ut(Zs),Hl,Vl,us,xl=qe({},Zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==us&&(us&&e.type==="mousemove"?(Hl=e.screenX-us.screenX,Vl=e.screenY-us.screenY):Vl=Hl=0,us=e),Hl)},movementY:function(e){return"movementY"in e?e.movementY:Vl}}),Qu=Ut(xl),xh=qe({},xl,{dataTransfer:0}),gh=Ut(xh),yh=qe({},Zs,{relatedTarget:0}),Kl=Ut(yh),vh=qe({},es,{animationName:0,elapsedTime:0,pseudoElement:0}),wh=Ut(vh),bh=qe({},es,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),jh=Ut(bh),Nh=qe({},es,{data:0}),Yu=Ut(Nh),Sh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ch={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Eh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ch[e])?!!t[e]:!1}function Yi(){return Eh}var Ph=qe({},Zs,{key:function(e){if(e.key){var t=Sh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ta(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?kh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yi,charCode:function(e){return e.type==="keypress"?Ta(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ta(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Th=Ut(Ph),Lh=qe({},xl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ju=Ut(Lh),Ah=qe({},Zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yi}),$h=Ut(Ah),Rh=qe({},es,{propertyName:0,elapsedTime:0,pseudoElement:0}),Uh=Ut(Rh),Ih=qe({},xl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dh=Ut(Ih),Oh=[9,13,27,32],Ji=cn&&"CompositionEvent"in window,Ss=null;cn&&"documentMode"in document&&(Ss=document.documentMode);var _h=cn&&"TextEvent"in window&&!Ss,lf=cn&&(!Ji||Ss&&8<Ss&&11>=Ss),Zu=" ",Xu=!1;function of(e,t){switch(e){case"keyup":return Oh.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Er=!1;function Mh(e,t){switch(e){case"compositionend":return uf(t);case"keypress":return t.which!==32?null:(Xu=!0,Zu);case"textInput":return e=t.data,e===Zu&&Xu?null:e;default:return null}}function Fh(e,t){if(Er)return e==="compositionend"||!Ji&&of(e,t)?(e=af(),Pa=qi=Pn=null,Er=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return lf&&t.locale!=="ko"?null:t.data;default:return null}}var Bh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ec(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Bh[e.type]:t==="textarea"}function cf(e,t,n,r){Fd(r),t=Ha(t,"onChange"),0<t.length&&(n=new Qi("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ks=null,Os=null;function zh(e){bf(e,0)}function gl(e){var t=Lr(e);if(Rd(t))return e}function Wh(e,t){if(e==="change")return t}var df=!1;if(cn){var ql;if(cn){var Ql="oninput"in document;if(!Ql){var tc=document.createElement("div");tc.setAttribute("oninput","return;"),Ql=typeof tc.oninput=="function"}ql=Ql}else ql=!1;df=ql&&(!document.documentMode||9<document.documentMode)}function nc(){ks&&(ks.detachEvent("onpropertychange",ff),Os=ks=null)}function ff(e){if(e.propertyName==="value"&&gl(Os)){var t=[];cf(t,Os,e,Wi(e)),Gd(zh,t)}}function Gh(e,t,n){e==="focusin"?(nc(),ks=t,Os=n,ks.attachEvent("onpropertychange",ff)):e==="focusout"&&nc()}function Hh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return gl(Os)}function Vh(e,t){if(e==="click")return gl(t)}function Kh(e,t){if(e==="input"||e==="change")return gl(t)}function qh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Kt=typeof Object.is=="function"?Object.is:qh;function _s(e,t){if(Kt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Eo.call(t,a)||!Kt(e[a],t[a]))return!1}return!0}function rc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function sc(e,t){var n=rc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=rc(n)}}function mf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?mf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function pf(){for(var e=window,t=_a();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=_a(e.document)}return t}function Zi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Qh(e){var t=pf(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&mf(n.ownerDocument.documentElement,n)){if(r!==null&&Zi(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,l=Math.min(r.start,a);r=r.end===void 0?l:Math.min(r.end,a),!e.extend&&l>r&&(a=r,r=l,l=a),a=sc(n,l);var o=sc(n,r);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Yh=cn&&"documentMode"in document&&11>=document.documentMode,Pr=null,Vo=null,Cs=null,Ko=!1;function ac(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ko||Pr==null||Pr!==_a(r)||(r=Pr,"selectionStart"in r&&Zi(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Cs&&_s(Cs,r)||(Cs=r,r=Ha(Vo,"onSelect"),0<r.length&&(t=new Qi("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Pr)))}function fa(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Tr={animationend:fa("Animation","AnimationEnd"),animationiteration:fa("Animation","AnimationIteration"),animationstart:fa("Animation","AnimationStart"),transitionend:fa("Transition","TransitionEnd")},Yl={},hf={};cn&&(hf=document.createElement("div").style,"AnimationEvent"in window||(delete Tr.animationend.animation,delete Tr.animationiteration.animation,delete Tr.animationstart.animation),"TransitionEvent"in window||delete Tr.transitionend.transition);function yl(e){if(Yl[e])return Yl[e];if(!Tr[e])return e;var t=Tr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in hf)return Yl[e]=t[n];return e}var xf=yl("animationend"),gf=yl("animationiteration"),yf=yl("animationstart"),vf=yl("transitionend"),wf=new Map,lc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wn(e,t){wf.set(e,t),hr(t,[e])}for(var Jl=0;Jl<lc.length;Jl++){var Zl=lc[Jl],Jh=Zl.toLowerCase(),Zh=Zl[0].toUpperCase()+Zl.slice(1);Wn(Jh,"on"+Zh)}Wn(xf,"onAnimationEnd");Wn(gf,"onAnimationIteration");Wn(yf,"onAnimationStart");Wn("dblclick","onDoubleClick");Wn("focusin","onFocus");Wn("focusout","onBlur");Wn(vf,"onTransitionEnd");Hr("onMouseEnter",["mouseout","mouseover"]);Hr("onMouseLeave",["mouseout","mouseover"]);Hr("onPointerEnter",["pointerout","pointerover"]);Hr("onPointerLeave",["pointerout","pointerover"]);hr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hr("onBeforeInput",["compositionend","keypress","textInput","paste"]);hr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xh=new Set("cancel close invalid load scroll toggle".split(" ").concat(vs));function oc(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Jp(r,t,void 0,e),e.currentTarget=null}function bf(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var o=r.length-1;0<=o;o--){var i=r[o],c=i.instance,d=i.currentTarget;if(i=i.listener,c!==l&&a.isPropagationStopped())break e;oc(a,i,d),l=c}else for(o=0;o<r.length;o++){if(i=r[o],c=i.instance,d=i.currentTarget,i=i.listener,c!==l&&a.isPropagationStopped())break e;oc(a,i,d),l=c}}}if(Fa)throw e=zo,Fa=!1,zo=null,e}function Fe(e,t){var n=t[Zo];n===void 0&&(n=t[Zo]=new Set);var r=e+"__bubble";n.has(r)||(jf(t,e,2,!1),n.add(r))}function Xl(e,t,n){var r=0;t&&(r|=4),jf(n,e,r,t)}var ma="_reactListening"+Math.random().toString(36).slice(2);function Ms(e){if(!e[ma]){e[ma]=!0,Pd.forEach(function(n){n!=="selectionchange"&&(Xh.has(n)||Xl(n,!1,e),Xl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ma]||(t[ma]=!0,Xl("selectionchange",!1,t))}}function jf(e,t,n,r){switch(sf(t)){case 1:var a=mh;break;case 4:a=ph;break;default:a=Ki}n=a.bind(null,t,n,e),a=void 0,!Bo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function eo(e,t,n,r,a){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var i=r.stateNode.containerInfo;if(i===a||i.nodeType===8&&i.parentNode===a)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;i!==null;){if(o=nr(i),o===null)return;if(c=o.tag,c===5||c===6){r=l=o;continue e}i=i.parentNode}}r=r.return}Gd(function(){var d=l,h=Wi(n),m=[];e:{var g=wf.get(e);if(g!==void 0){var v=Qi,j=e;switch(e){case"keypress":if(Ta(n)===0)break e;case"keydown":case"keyup":v=Th;break;case"focusin":j="focus",v=Kl;break;case"focusout":j="blur",v=Kl;break;case"beforeblur":case"afterblur":v=Kl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Qu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=gh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=$h;break;case xf:case gf:case yf:v=wh;break;case vf:v=Uh;break;case"scroll":v=hh;break;case"wheel":v=Dh;break;case"copy":case"cut":case"paste":v=jh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Ju}var y=(t&4)!==0,S=!y&&e==="scroll",f=y?g!==null?g+"Capture":null:g;y=[];for(var p=d,x;p!==null;){x=p;var N=x.stateNode;if(x.tag===5&&N!==null&&(x=N,f!==null&&(N=Rs(p,f),N!=null&&y.push(Fs(p,N,x)))),S)break;p=p.return}0<y.length&&(g=new v(g,j,null,n,h),m.push({event:g,listeners:y}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",g&&n!==Mo&&(j=n.relatedTarget||n.fromElement)&&(nr(j)||j[dn]))break e;if((v||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,v?(j=n.relatedTarget||n.toElement,v=d,j=j?nr(j):null,j!==null&&(S=xr(j),j!==S||j.tag!==5&&j.tag!==6)&&(j=null)):(v=null,j=d),v!==j)){if(y=Qu,N="onMouseLeave",f="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(y=Ju,N="onPointerLeave",f="onPointerEnter",p="pointer"),S=v==null?g:Lr(v),x=j==null?g:Lr(j),g=new y(N,p+"leave",v,n,h),g.target=S,g.relatedTarget=x,N=null,nr(h)===d&&(y=new y(f,p+"enter",j,n,h),y.target=x,y.relatedTarget=S,N=y),S=N,v&&j)t:{for(y=v,f=j,p=0,x=y;x;x=br(x))p++;for(x=0,N=f;N;N=br(N))x++;for(;0<p-x;)y=br(y),p--;for(;0<x-p;)f=br(f),x--;for(;p--;){if(y===f||f!==null&&y===f.alternate)break t;y=br(y),f=br(f)}y=null}else y=null;v!==null&&ic(m,g,v,y,!1),j!==null&&S!==null&&ic(m,S,j,y,!0)}}e:{if(g=d?Lr(d):window,v=g.nodeName&&g.nodeName.toLowerCase(),v==="select"||v==="input"&&g.type==="file")var E=Wh;else if(ec(g))if(df)E=Kh;else{E=Hh;var P=Gh}else(v=g.nodeName)&&v.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(E=Vh);if(E&&(E=E(e,d))){cf(m,E,n,h);break e}P&&P(e,g,d),e==="focusout"&&(P=g._wrapperState)&&P.controlled&&g.type==="number"&&Uo(g,"number",g.value)}switch(P=d?Lr(d):window,e){case"focusin":(ec(P)||P.contentEditable==="true")&&(Pr=P,Vo=d,Cs=null);break;case"focusout":Cs=Vo=Pr=null;break;case"mousedown":Ko=!0;break;case"contextmenu":case"mouseup":case"dragend":Ko=!1,ac(m,n,h);break;case"selectionchange":if(Yh)break;case"keydown":case"keyup":ac(m,n,h)}var R;if(Ji)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Er?of(e,n)&&(I="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(lf&&n.locale!=="ko"&&(Er||I!=="onCompositionStart"?I==="onCompositionEnd"&&Er&&(R=af()):(Pn=h,qi="value"in Pn?Pn.value:Pn.textContent,Er=!0)),P=Ha(d,I),0<P.length&&(I=new Yu(I,e,null,n,h),m.push({event:I,listeners:P}),R?I.data=R:(R=uf(n),R!==null&&(I.data=R)))),(R=_h?Mh(e,n):Fh(e,n))&&(d=Ha(d,"onBeforeInput"),0<d.length&&(h=new Yu("onBeforeInput","beforeinput",null,n,h),m.push({event:h,listeners:d}),h.data=R))}bf(m,t)})}function Fs(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ha(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=Rs(e,n),l!=null&&r.unshift(Fs(e,l,a)),l=Rs(e,t),l!=null&&r.push(Fs(e,l,a))),e=e.return}return r}function br(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ic(e,t,n,r,a){for(var l=t._reactName,o=[];n!==null&&n!==r;){var i=n,c=i.alternate,d=i.stateNode;if(c!==null&&c===r)break;i.tag===5&&d!==null&&(i=d,a?(c=Rs(n,l),c!=null&&o.unshift(Fs(n,c,i))):a||(c=Rs(n,l),c!=null&&o.push(Fs(n,c,i)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var e0=/\r\n?/g,t0=/\u0000|\uFFFD/g;function uc(e){return(typeof e=="string"?e:""+e).replace(e0,`
`).replace(t0,"")}function pa(e,t,n){if(t=uc(t),uc(e)!==t&&n)throw Error(B(425))}function Va(){}var qo=null,Qo=null;function Yo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Jo=typeof setTimeout=="function"?setTimeout:void 0,n0=typeof clearTimeout=="function"?clearTimeout:void 0,cc=typeof Promise=="function"?Promise:void 0,r0=typeof queueMicrotask=="function"?queueMicrotask:typeof cc<"u"?function(e){return cc.resolve(null).then(e).catch(s0)}:Jo;function s0(e){setTimeout(function(){throw e})}function to(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),Ds(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);Ds(t)}function Un(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function dc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ts=Math.random().toString(36).slice(2),Yt="__reactFiber$"+ts,Bs="__reactProps$"+ts,dn="__reactContainer$"+ts,Zo="__reactEvents$"+ts,a0="__reactListeners$"+ts,l0="__reactHandles$"+ts;function nr(e){var t=e[Yt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[dn]||n[Yt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=dc(e);e!==null;){if(n=e[Yt])return n;e=dc(e)}return t}e=n,n=e.parentNode}return null}function Xs(e){return e=e[Yt]||e[dn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Lr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(B(33))}function vl(e){return e[Bs]||null}var Xo=[],Ar=-1;function Gn(e){return{current:e}}function Be(e){0>Ar||(e.current=Xo[Ar],Xo[Ar]=null,Ar--)}function Me(e,t){Ar++,Xo[Ar]=e.current,e.current=t}var Bn={},gt=Gn(Bn),Ct=Gn(!1),cr=Bn;function Vr(e,t){var n=e.type.contextTypes;if(!n)return Bn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in n)a[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Et(e){return e=e.childContextTypes,e!=null}function Ka(){Be(Ct),Be(gt)}function fc(e,t,n){if(gt.current!==Bn)throw Error(B(168));Me(gt,t),Me(Ct,n)}function Nf(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(B(108,Gp(e)||"Unknown",a));return qe({},n,r)}function qa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Bn,cr=gt.current,Me(gt,e),Me(Ct,Ct.current),!0}function mc(e,t,n){var r=e.stateNode;if(!r)throw Error(B(169));n?(e=Nf(e,t,cr),r.__reactInternalMemoizedMergedChildContext=e,Be(Ct),Be(gt),Me(gt,e)):Be(Ct),Me(Ct,n)}var sn=null,wl=!1,no=!1;function Sf(e){sn===null?sn=[e]:sn.push(e)}function o0(e){wl=!0,Sf(e)}function Hn(){if(!no&&sn!==null){no=!0;var e=0,t=_e;try{var n=sn;for(_e=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}sn=null,wl=!1}catch(a){throw sn!==null&&(sn=sn.slice(e+1)),qd(Gi,Hn),a}finally{_e=t,no=!1}}return null}var $r=[],Rr=0,Qa=null,Ya=0,It=[],Dt=0,dr=null,an=1,ln="";function Xn(e,t){$r[Rr++]=Ya,$r[Rr++]=Qa,Qa=e,Ya=t}function kf(e,t,n){It[Dt++]=an,It[Dt++]=ln,It[Dt++]=dr,dr=e;var r=an;e=ln;var a=32-Ht(r)-1;r&=~(1<<a),n+=1;var l=32-Ht(t)+a;if(30<l){var o=a-a%5;l=(r&(1<<o)-1).toString(32),r>>=o,a-=o,an=1<<32-Ht(t)+a|n<<a|r,ln=l+e}else an=1<<l|n<<a|r,ln=e}function Xi(e){e.return!==null&&(Xn(e,1),kf(e,1,0))}function eu(e){for(;e===Qa;)Qa=$r[--Rr],$r[Rr]=null,Ya=$r[--Rr],$r[Rr]=null;for(;e===dr;)dr=It[--Dt],It[Dt]=null,ln=It[--Dt],It[Dt]=null,an=It[--Dt],It[Dt]=null}var At=null,Lt=null,We=!1,Gt=null;function Cf(e,t){var n=Ot(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function pc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,At=e,Lt=Un(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,At=e,Lt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=dr!==null?{id:an,overflow:ln}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ot(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,At=e,Lt=null,!0):!1;default:return!1}}function ei(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ti(e){if(We){var t=Lt;if(t){var n=t;if(!pc(e,t)){if(ei(e))throw Error(B(418));t=Un(n.nextSibling);var r=At;t&&pc(e,t)?Cf(r,n):(e.flags=e.flags&-4097|2,We=!1,At=e)}}else{if(ei(e))throw Error(B(418));e.flags=e.flags&-4097|2,We=!1,At=e}}}function hc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;At=e}function ha(e){if(e!==At)return!1;if(!We)return hc(e),We=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Yo(e.type,e.memoizedProps)),t&&(t=Lt)){if(ei(e))throw Ef(),Error(B(418));for(;t;)Cf(e,t),t=Un(t.nextSibling)}if(hc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(B(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Lt=Un(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Lt=null}}else Lt=At?Un(e.stateNode.nextSibling):null;return!0}function Ef(){for(var e=Lt;e;)e=Un(e.nextSibling)}function Kr(){Lt=At=null,We=!1}function tu(e){Gt===null?Gt=[e]:Gt.push(e)}var i0=hn.ReactCurrentBatchConfig;function cs(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,e));var a=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(o){var i=a.refs;o===null?delete i[l]:i[l]=o},t._stringRef=l,t)}if(typeof e!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,e))}return e}function xa(e,t){throw e=Object.prototype.toString.call(t),Error(B(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xc(e){var t=e._init;return t(e._payload)}function Pf(e){function t(f,p){if(e){var x=f.deletions;x===null?(f.deletions=[p],f.flags|=16):x.push(p)}}function n(f,p){if(!e)return null;for(;p!==null;)t(f,p),p=p.sibling;return null}function r(f,p){for(f=new Map;p!==null;)p.key!==null?f.set(p.key,p):f.set(p.index,p),p=p.sibling;return f}function a(f,p){return f=_n(f,p),f.index=0,f.sibling=null,f}function l(f,p,x){return f.index=x,e?(x=f.alternate,x!==null?(x=x.index,x<p?(f.flags|=2,p):x):(f.flags|=2,p)):(f.flags|=1048576,p)}function o(f){return e&&f.alternate===null&&(f.flags|=2),f}function i(f,p,x,N){return p===null||p.tag!==6?(p=uo(x,f.mode,N),p.return=f,p):(p=a(p,x),p.return=f,p)}function c(f,p,x,N){var E=x.type;return E===Cr?h(f,p,x.props.children,N,x.key):p!==null&&(p.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Nn&&xc(E)===p.type)?(N=a(p,x.props),N.ref=cs(f,p,x),N.return=f,N):(N=Da(x.type,x.key,x.props,null,f.mode,N),N.ref=cs(f,p,x),N.return=f,N)}function d(f,p,x,N){return p===null||p.tag!==4||p.stateNode.containerInfo!==x.containerInfo||p.stateNode.implementation!==x.implementation?(p=co(x,f.mode,N),p.return=f,p):(p=a(p,x.children||[]),p.return=f,p)}function h(f,p,x,N,E){return p===null||p.tag!==7?(p=ir(x,f.mode,N,E),p.return=f,p):(p=a(p,x),p.return=f,p)}function m(f,p,x){if(typeof p=="string"&&p!==""||typeof p=="number")return p=uo(""+p,f.mode,x),p.return=f,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case aa:return x=Da(p.type,p.key,p.props,null,f.mode,x),x.ref=cs(f,null,p),x.return=f,x;case kr:return p=co(p,f.mode,x),p.return=f,p;case Nn:var N=p._init;return m(f,N(p._payload),x)}if(gs(p)||as(p))return p=ir(p,f.mode,x,null),p.return=f,p;xa(f,p)}return null}function g(f,p,x,N){var E=p!==null?p.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return E!==null?null:i(f,p,""+x,N);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case aa:return x.key===E?c(f,p,x,N):null;case kr:return x.key===E?d(f,p,x,N):null;case Nn:return E=x._init,g(f,p,E(x._payload),N)}if(gs(x)||as(x))return E!==null?null:h(f,p,x,N,null);xa(f,x)}return null}function v(f,p,x,N,E){if(typeof N=="string"&&N!==""||typeof N=="number")return f=f.get(x)||null,i(p,f,""+N,E);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case aa:return f=f.get(N.key===null?x:N.key)||null,c(p,f,N,E);case kr:return f=f.get(N.key===null?x:N.key)||null,d(p,f,N,E);case Nn:var P=N._init;return v(f,p,x,P(N._payload),E)}if(gs(N)||as(N))return f=f.get(x)||null,h(p,f,N,E,null);xa(p,N)}return null}function j(f,p,x,N){for(var E=null,P=null,R=p,I=p=0,V=null;R!==null&&I<x.length;I++){R.index>I?(V=R,R=null):V=R.sibling;var G=g(f,R,x[I],N);if(G===null){R===null&&(R=V);break}e&&R&&G.alternate===null&&t(f,R),p=l(G,p,I),P===null?E=G:P.sibling=G,P=G,R=V}if(I===x.length)return n(f,R),We&&Xn(f,I),E;if(R===null){for(;I<x.length;I++)R=m(f,x[I],N),R!==null&&(p=l(R,p,I),P===null?E=R:P.sibling=R,P=R);return We&&Xn(f,I),E}for(R=r(f,R);I<x.length;I++)V=v(R,f,I,x[I],N),V!==null&&(e&&V.alternate!==null&&R.delete(V.key===null?I:V.key),p=l(V,p,I),P===null?E=V:P.sibling=V,P=V);return e&&R.forEach(function(te){return t(f,te)}),We&&Xn(f,I),E}function y(f,p,x,N){var E=as(x);if(typeof E!="function")throw Error(B(150));if(x=E.call(x),x==null)throw Error(B(151));for(var P=E=null,R=p,I=p=0,V=null,G=x.next();R!==null&&!G.done;I++,G=x.next()){R.index>I?(V=R,R=null):V=R.sibling;var te=g(f,R,G.value,N);if(te===null){R===null&&(R=V);break}e&&R&&te.alternate===null&&t(f,R),p=l(te,p,I),P===null?E=te:P.sibling=te,P=te,R=V}if(G.done)return n(f,R),We&&Xn(f,I),E;if(R===null){for(;!G.done;I++,G=x.next())G=m(f,G.value,N),G!==null&&(p=l(G,p,I),P===null?E=G:P.sibling=G,P=G);return We&&Xn(f,I),E}for(R=r(f,R);!G.done;I++,G=x.next())G=v(R,f,I,G.value,N),G!==null&&(e&&G.alternate!==null&&R.delete(G.key===null?I:G.key),p=l(G,p,I),P===null?E=G:P.sibling=G,P=G);return e&&R.forEach(function(ye){return t(f,ye)}),We&&Xn(f,I),E}function S(f,p,x,N){if(typeof x=="object"&&x!==null&&x.type===Cr&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case aa:e:{for(var E=x.key,P=p;P!==null;){if(P.key===E){if(E=x.type,E===Cr){if(P.tag===7){n(f,P.sibling),p=a(P,x.props.children),p.return=f,f=p;break e}}else if(P.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Nn&&xc(E)===P.type){n(f,P.sibling),p=a(P,x.props),p.ref=cs(f,P,x),p.return=f,f=p;break e}n(f,P);break}else t(f,P);P=P.sibling}x.type===Cr?(p=ir(x.props.children,f.mode,N,x.key),p.return=f,f=p):(N=Da(x.type,x.key,x.props,null,f.mode,N),N.ref=cs(f,p,x),N.return=f,f=N)}return o(f);case kr:e:{for(P=x.key;p!==null;){if(p.key===P)if(p.tag===4&&p.stateNode.containerInfo===x.containerInfo&&p.stateNode.implementation===x.implementation){n(f,p.sibling),p=a(p,x.children||[]),p.return=f,f=p;break e}else{n(f,p);break}else t(f,p);p=p.sibling}p=co(x,f.mode,N),p.return=f,f=p}return o(f);case Nn:return P=x._init,S(f,p,P(x._payload),N)}if(gs(x))return j(f,p,x,N);if(as(x))return y(f,p,x,N);xa(f,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,p!==null&&p.tag===6?(n(f,p.sibling),p=a(p,x),p.return=f,f=p):(n(f,p),p=uo(x,f.mode,N),p.return=f,f=p),o(f)):n(f,p)}return S}var qr=Pf(!0),Tf=Pf(!1),Ja=Gn(null),Za=null,Ur=null,nu=null;function ru(){nu=Ur=Za=null}function su(e){var t=Ja.current;Be(Ja),e._currentValue=t}function ni(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Br(e,t){Za=e,nu=Ur=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(kt=!0),e.firstContext=null)}function Mt(e){var t=e._currentValue;if(nu!==e)if(e={context:e,memoizedValue:t,next:null},Ur===null){if(Za===null)throw Error(B(308));Ur=e,Za.dependencies={lanes:0,firstContext:e}}else Ur=Ur.next=e;return t}var rr=null;function au(e){rr===null?rr=[e]:rr.push(e)}function Lf(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,au(t)):(n.next=a.next,a.next=n),t.interleaved=n,fn(e,r)}function fn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Sn=!1;function lu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Af(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function on(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function In(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Te&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,fn(e,n)}return a=r.interleaved,a===null?(t.next=t,au(r)):(t.next=a.next,a.next=t),r.interleaved=t,fn(e,n)}function La(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Hi(e,n)}}function gc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?a=l=o:l=l.next=o,n=n.next}while(n!==null);l===null?a=l=t:l=l.next=t}else a=l=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Xa(e,t,n,r){var a=e.updateQueue;Sn=!1;var l=a.firstBaseUpdate,o=a.lastBaseUpdate,i=a.shared.pending;if(i!==null){a.shared.pending=null;var c=i,d=c.next;c.next=null,o===null?l=d:o.next=d,o=c;var h=e.alternate;h!==null&&(h=h.updateQueue,i=h.lastBaseUpdate,i!==o&&(i===null?h.firstBaseUpdate=d:i.next=d,h.lastBaseUpdate=c))}if(l!==null){var m=a.baseState;o=0,h=d=c=null,i=l;do{var g=i.lane,v=i.eventTime;if((r&g)===g){h!==null&&(h=h.next={eventTime:v,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var j=e,y=i;switch(g=t,v=n,y.tag){case 1:if(j=y.payload,typeof j=="function"){m=j.call(v,m,g);break e}m=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=y.payload,g=typeof j=="function"?j.call(v,m,g):j,g==null)break e;m=qe({},m,g);break e;case 2:Sn=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,g=a.effects,g===null?a.effects=[i]:g.push(i))}else v={eventTime:v,lane:g,tag:i.tag,payload:i.payload,callback:i.callback,next:null},h===null?(d=h=v,c=m):h=h.next=v,o|=g;if(i=i.next,i===null){if(i=a.shared.pending,i===null)break;g=i,i=g.next,g.next=null,a.lastBaseUpdate=g,a.shared.pending=null}}while(!0);if(h===null&&(c=m),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=h,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else l===null&&(a.shared.lanes=0);mr|=o,e.lanes=o,e.memoizedState=m}}function yc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(B(191,a));a.call(r)}}}var ea={},Zt=Gn(ea),zs=Gn(ea),Ws=Gn(ea);function sr(e){if(e===ea)throw Error(B(174));return e}function ou(e,t){switch(Me(Ws,t),Me(zs,e),Me(Zt,ea),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Do(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Do(t,e)}Be(Zt),Me(Zt,t)}function Qr(){Be(Zt),Be(zs),Be(Ws)}function $f(e){sr(Ws.current);var t=sr(Zt.current),n=Do(t,e.type);t!==n&&(Me(zs,e),Me(Zt,n))}function iu(e){zs.current===e&&(Be(Zt),Be(zs))}var Ve=Gn(0);function el(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ro=[];function uu(){for(var e=0;e<ro.length;e++)ro[e]._workInProgressVersionPrimary=null;ro.length=0}var Aa=hn.ReactCurrentDispatcher,so=hn.ReactCurrentBatchConfig,fr=0,Ke=null,st=null,lt=null,tl=!1,Es=!1,Gs=0,u0=0;function mt(){throw Error(B(321))}function cu(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Kt(e[n],t[n]))return!1;return!0}function du(e,t,n,r,a,l){if(fr=l,Ke=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Aa.current=e===null||e.memoizedState===null?m0:p0,e=n(r,a),Es){l=0;do{if(Es=!1,Gs=0,25<=l)throw Error(B(301));l+=1,lt=st=null,t.updateQueue=null,Aa.current=h0,e=n(r,a)}while(Es)}if(Aa.current=nl,t=st!==null&&st.next!==null,fr=0,lt=st=Ke=null,tl=!1,t)throw Error(B(300));return e}function fu(){var e=Gs!==0;return Gs=0,e}function Qt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lt===null?Ke.memoizedState=lt=e:lt=lt.next=e,lt}function Ft(){if(st===null){var e=Ke.alternate;e=e!==null?e.memoizedState:null}else e=st.next;var t=lt===null?Ke.memoizedState:lt.next;if(t!==null)lt=t,st=e;else{if(e===null)throw Error(B(310));st=e,e={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},lt===null?Ke.memoizedState=lt=e:lt=lt.next=e}return lt}function Hs(e,t){return typeof t=="function"?t(e):t}function ao(e){var t=Ft(),n=t.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=e;var r=st,a=r.baseQueue,l=n.pending;if(l!==null){if(a!==null){var o=a.next;a.next=l.next,l.next=o}r.baseQueue=a=l,n.pending=null}if(a!==null){l=a.next,r=r.baseState;var i=o=null,c=null,d=l;do{var h=d.lane;if((fr&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var m={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(i=c=m,o=r):c=c.next=m,Ke.lanes|=h,mr|=h}d=d.next}while(d!==null&&d!==l);c===null?o=r:c.next=i,Kt(r,t.memoizedState)||(kt=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do l=a.lane,Ke.lanes|=l,mr|=l,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function lo(e){var t=Ft(),n=t.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,l=t.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do l=e(l,o.action),o=o.next;while(o!==a);Kt(l,t.memoizedState)||(kt=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function Rf(){}function Uf(e,t){var n=Ke,r=Ft(),a=t(),l=!Kt(r.memoizedState,a);if(l&&(r.memoizedState=a,kt=!0),r=r.queue,mu(Of.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||lt!==null&&lt.memoizedState.tag&1){if(n.flags|=2048,Vs(9,Df.bind(null,n,r,a,t),void 0,null),ot===null)throw Error(B(349));fr&30||If(n,t,a)}return a}function If(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ke.updateQueue,t===null?(t={lastEffect:null,stores:null},Ke.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Df(e,t,n,r){t.value=n,t.getSnapshot=r,_f(t)&&Mf(e)}function Of(e,t,n){return n(function(){_f(t)&&Mf(e)})}function _f(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Kt(e,n)}catch{return!0}}function Mf(e){var t=fn(e,1);t!==null&&Vt(t,e,1,-1)}function vc(e){var t=Qt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:e},t.queue=e,e=e.dispatch=f0.bind(null,Ke,e),[t.memoizedState,e]}function Vs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ke.updateQueue,t===null?(t={lastEffect:null,stores:null},Ke.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Ff(){return Ft().memoizedState}function $a(e,t,n,r){var a=Qt();Ke.flags|=e,a.memoizedState=Vs(1|t,n,void 0,r===void 0?null:r)}function bl(e,t,n,r){var a=Ft();r=r===void 0?null:r;var l=void 0;if(st!==null){var o=st.memoizedState;if(l=o.destroy,r!==null&&cu(r,o.deps)){a.memoizedState=Vs(t,n,l,r);return}}Ke.flags|=e,a.memoizedState=Vs(1|t,n,l,r)}function wc(e,t){return $a(8390656,8,e,t)}function mu(e,t){return bl(2048,8,e,t)}function Bf(e,t){return bl(4,2,e,t)}function zf(e,t){return bl(4,4,e,t)}function Wf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Gf(e,t,n){return n=n!=null?n.concat([e]):null,bl(4,4,Wf.bind(null,t,e),n)}function pu(){}function Hf(e,t){var n=Ft();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&cu(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Vf(e,t){var n=Ft();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&cu(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Kf(e,t,n){return fr&21?(Kt(n,t)||(n=Jd(),Ke.lanes|=n,mr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,kt=!0),e.memoizedState=n)}function c0(e,t){var n=_e;_e=n!==0&&4>n?n:4,e(!0);var r=so.transition;so.transition={};try{e(!1),t()}finally{_e=n,so.transition=r}}function qf(){return Ft().memoizedState}function d0(e,t,n){var r=On(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qf(e))Yf(t,n);else if(n=Lf(e,t,n,r),n!==null){var a=bt();Vt(n,e,r,a),Jf(n,t,r)}}function f0(e,t,n){var r=On(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qf(e))Yf(t,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var o=t.lastRenderedState,i=l(o,n);if(a.hasEagerState=!0,a.eagerState=i,Kt(i,o)){var c=t.interleaved;c===null?(a.next=a,au(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}n=Lf(e,t,a,r),n!==null&&(a=bt(),Vt(n,e,r,a),Jf(n,t,r))}}function Qf(e){var t=e.alternate;return e===Ke||t!==null&&t===Ke}function Yf(e,t){Es=tl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Jf(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Hi(e,n)}}var nl={readContext:Mt,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useInsertionEffect:mt,useLayoutEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useMutableSource:mt,useSyncExternalStore:mt,useId:mt,unstable_isNewReconciler:!1},m0={readContext:Mt,useCallback:function(e,t){return Qt().memoizedState=[e,t===void 0?null:t],e},useContext:Mt,useEffect:wc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,$a(4194308,4,Wf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return $a(4194308,4,e,t)},useInsertionEffect:function(e,t){return $a(4,2,e,t)},useMemo:function(e,t){var n=Qt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Qt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=d0.bind(null,Ke,e),[r.memoizedState,e]},useRef:function(e){var t=Qt();return e={current:e},t.memoizedState=e},useState:vc,useDebugValue:pu,useDeferredValue:function(e){return Qt().memoizedState=e},useTransition:function(){var e=vc(!1),t=e[0];return e=c0.bind(null,e[1]),Qt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ke,a=Qt();if(We){if(n===void 0)throw Error(B(407));n=n()}else{if(n=t(),ot===null)throw Error(B(349));fr&30||If(r,t,n)}a.memoizedState=n;var l={value:n,getSnapshot:t};return a.queue=l,wc(Of.bind(null,r,l,e),[e]),r.flags|=2048,Vs(9,Df.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=Qt(),t=ot.identifierPrefix;if(We){var n=ln,r=an;n=(r&~(1<<32-Ht(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Gs++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=u0++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},p0={readContext:Mt,useCallback:Hf,useContext:Mt,useEffect:mu,useImperativeHandle:Gf,useInsertionEffect:Bf,useLayoutEffect:zf,useMemo:Vf,useReducer:ao,useRef:Ff,useState:function(){return ao(Hs)},useDebugValue:pu,useDeferredValue:function(e){var t=Ft();return Kf(t,st.memoizedState,e)},useTransition:function(){var e=ao(Hs)[0],t=Ft().memoizedState;return[e,t]},useMutableSource:Rf,useSyncExternalStore:Uf,useId:qf,unstable_isNewReconciler:!1},h0={readContext:Mt,useCallback:Hf,useContext:Mt,useEffect:mu,useImperativeHandle:Gf,useInsertionEffect:Bf,useLayoutEffect:zf,useMemo:Vf,useReducer:lo,useRef:Ff,useState:function(){return lo(Hs)},useDebugValue:pu,useDeferredValue:function(e){var t=Ft();return st===null?t.memoizedState=e:Kf(t,st.memoizedState,e)},useTransition:function(){var e=lo(Hs)[0],t=Ft().memoizedState;return[e,t]},useMutableSource:Rf,useSyncExternalStore:Uf,useId:qf,unstable_isNewReconciler:!1};function zt(e,t){if(e&&e.defaultProps){t=qe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ri(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:qe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var jl={isMounted:function(e){return(e=e._reactInternals)?xr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=bt(),a=On(e),l=on(r,a);l.payload=t,n!=null&&(l.callback=n),t=In(e,l,a),t!==null&&(Vt(t,e,a,r),La(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=bt(),a=On(e),l=on(r,a);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=In(e,l,a),t!==null&&(Vt(t,e,a,r),La(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=bt(),r=On(e),a=on(n,r);a.tag=2,t!=null&&(a.callback=t),t=In(e,a,r),t!==null&&(Vt(t,e,r,n),La(t,e,r))}};function bc(e,t,n,r,a,l,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,o):t.prototype&&t.prototype.isPureReactComponent?!_s(n,r)||!_s(a,l):!0}function Zf(e,t,n){var r=!1,a=Bn,l=t.contextType;return typeof l=="object"&&l!==null?l=Mt(l):(a=Et(t)?cr:gt.current,r=t.contextTypes,l=(r=r!=null)?Vr(e,a):Bn),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=jl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),t}function jc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&jl.enqueueReplaceState(t,t.state,null)}function si(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},lu(e);var l=t.contextType;typeof l=="object"&&l!==null?a.context=Mt(l):(l=Et(t)?cr:gt.current,a.context=Vr(e,l)),a.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(ri(e,t,l,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&jl.enqueueReplaceState(a,a.state,null),Xa(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Yr(e,t){try{var n="",r=t;do n+=Wp(r),r=r.return;while(r);var a=n}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:a,digest:null}}function oo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ai(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var x0=typeof WeakMap=="function"?WeakMap:Map;function Xf(e,t,n){n=on(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){sl||(sl=!0,hi=r),ai(e,t)},n}function em(e,t,n){n=on(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){ai(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){ai(e,t),typeof r!="function"&&(Dn===null?Dn=new Set([this]):Dn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Nc(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new x0;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=L0.bind(null,e,t,n),t.then(e,e))}function Sc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function kc(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=on(-1,1),t.tag=2,In(n,t,1))),n.lanes|=1),e)}var g0=hn.ReactCurrentOwner,kt=!1;function wt(e,t,n,r){t.child=e===null?Tf(t,null,n,r):qr(t,e.child,n,r)}function Cc(e,t,n,r,a){n=n.render;var l=t.ref;return Br(t,a),r=du(e,t,n,r,l,a),n=fu(),e!==null&&!kt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,mn(e,t,a)):(We&&n&&Xi(t),t.flags|=1,wt(e,t,r,a),t.child)}function Ec(e,t,n,r,a){if(e===null){var l=n.type;return typeof l=="function"&&!ju(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,tm(e,t,l,r,a)):(e=Da(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&a)){var o=l.memoizedProps;if(n=n.compare,n=n!==null?n:_s,n(o,r)&&e.ref===t.ref)return mn(e,t,a)}return t.flags|=1,e=_n(l,r),e.ref=t.ref,e.return=t,t.child=e}function tm(e,t,n,r,a){if(e!==null){var l=e.memoizedProps;if(_s(l,r)&&e.ref===t.ref)if(kt=!1,t.pendingProps=r=l,(e.lanes&a)!==0)e.flags&131072&&(kt=!0);else return t.lanes=e.lanes,mn(e,t,a)}return li(e,t,n,r,a)}function nm(e,t,n){var r=t.pendingProps,a=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Me(Dr,Tt),Tt|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Me(Dr,Tt),Tt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,Me(Dr,Tt),Tt|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,Me(Dr,Tt),Tt|=r;return wt(e,t,a,n),t.child}function rm(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function li(e,t,n,r,a){var l=Et(n)?cr:gt.current;return l=Vr(t,l),Br(t,a),n=du(e,t,n,r,l,a),r=fu(),e!==null&&!kt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,mn(e,t,a)):(We&&r&&Xi(t),t.flags|=1,wt(e,t,n,a),t.child)}function Pc(e,t,n,r,a){if(Et(n)){var l=!0;qa(t)}else l=!1;if(Br(t,a),t.stateNode===null)Ra(e,t),Zf(t,n,r),si(t,n,r,a),r=!0;else if(e===null){var o=t.stateNode,i=t.memoizedProps;o.props=i;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Mt(d):(d=Et(n)?cr:gt.current,d=Vr(t,d));var h=n.getDerivedStateFromProps,m=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==r||c!==d)&&jc(t,o,r,d),Sn=!1;var g=t.memoizedState;o.state=g,Xa(t,r,o,a),c=t.memoizedState,i!==r||g!==c||Ct.current||Sn?(typeof h=="function"&&(ri(t,n,h,r),c=t.memoizedState),(i=Sn||bc(t,n,i,r,g,c,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=d,r=i):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Af(e,t),i=t.memoizedProps,d=t.type===t.elementType?i:zt(t.type,i),o.props=d,m=t.pendingProps,g=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Mt(c):(c=Et(n)?cr:gt.current,c=Vr(t,c));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==m||g!==c)&&jc(t,o,r,c),Sn=!1,g=t.memoizedState,o.state=g,Xa(t,r,o,a);var j=t.memoizedState;i!==m||g!==j||Ct.current||Sn?(typeof v=="function"&&(ri(t,n,v,r),j=t.memoizedState),(d=Sn||bc(t,n,d,r,g,j,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,j,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,j,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=j),o.props=r,o.state=j,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return oi(e,t,n,r,l,a)}function oi(e,t,n,r,a,l){rm(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return a&&mc(t,n,!1),mn(e,t,l);r=t.stateNode,g0.current=t;var i=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=qr(t,e.child,null,l),t.child=qr(t,null,i,l)):wt(e,t,i,l),t.memoizedState=r.state,a&&mc(t,n,!0),t.child}function sm(e){var t=e.stateNode;t.pendingContext?fc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&fc(e,t.context,!1),ou(e,t.containerInfo)}function Tc(e,t,n,r,a){return Kr(),tu(a),t.flags|=256,wt(e,t,n,r),t.child}var ii={dehydrated:null,treeContext:null,retryLane:0};function ui(e){return{baseLanes:e,cachePool:null,transitions:null}}function am(e,t,n){var r=t.pendingProps,a=Ve.current,l=!1,o=(t.flags&128)!==0,i;if((i=o)||(i=e!==null&&e.memoizedState===null?!1:(a&2)!==0),i?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Me(Ve,a&1),e===null)return ti(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,l?(r=t.mode,l=t.child,o={mode:"hidden",children:o},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=o):l=kl(o,r,0,null),e=ir(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=ui(n),t.memoizedState=ii,e):hu(t,o));if(a=e.memoizedState,a!==null&&(i=a.dehydrated,i!==null))return y0(e,t,o,r,i,a,n);if(l){l=r.fallback,o=t.mode,a=e.child,i=a.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=_n(a,c),r.subtreeFlags=a.subtreeFlags&14680064),i!==null?l=_n(i,l):(l=ir(l,o,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,o=e.child.memoizedState,o=o===null?ui(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=e.childLanes&~n,t.memoizedState=ii,r}return l=e.child,e=l.sibling,r=_n(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function hu(e,t){return t=kl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ga(e,t,n,r){return r!==null&&tu(r),qr(t,e.child,null,n),e=hu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function y0(e,t,n,r,a,l,o){if(n)return t.flags&256?(t.flags&=-257,r=oo(Error(B(422))),ga(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,a=t.mode,r=kl({mode:"visible",children:r.children},a,0,null),l=ir(l,a,o,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&qr(t,e.child,null,o),t.child.memoizedState=ui(o),t.memoizedState=ii,l);if(!(t.mode&1))return ga(e,t,o,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var i=r.dgst;return r=i,l=Error(B(419)),r=oo(l,r,void 0),ga(e,t,o,r)}if(i=(o&e.childLanes)!==0,kt||i){if(r=ot,r!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|o)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,fn(e,a),Vt(r,e,a,-1))}return bu(),r=oo(Error(B(421))),ga(e,t,o,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=A0.bind(null,e),a._reactRetry=t,null):(e=l.treeContext,Lt=Un(a.nextSibling),At=t,We=!0,Gt=null,e!==null&&(It[Dt++]=an,It[Dt++]=ln,It[Dt++]=dr,an=e.id,ln=e.overflow,dr=t),t=hu(t,r.children),t.flags|=4096,t)}function Lc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ni(e.return,t,n)}function io(e,t,n,r,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=a)}function lm(e,t,n){var r=t.pendingProps,a=r.revealOrder,l=r.tail;if(wt(e,t,r.children,n),r=Ve.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Lc(e,n,t);else if(e.tag===19)Lc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Me(Ve,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&el(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),io(t,!1,a,n,l);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&el(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}io(t,!0,n,null,l);break;case"together":io(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ra(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function mn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),mr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(B(153));if(t.child!==null){for(e=t.child,n=_n(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=_n(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function v0(e,t,n){switch(t.tag){case 3:sm(t),Kr();break;case 5:$f(t);break;case 1:Et(t.type)&&qa(t);break;case 4:ou(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Me(Ja,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Me(Ve,Ve.current&1),t.flags|=128,null):n&t.child.childLanes?am(e,t,n):(Me(Ve,Ve.current&1),e=mn(e,t,n),e!==null?e.sibling:null);Me(Ve,Ve.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return lm(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Me(Ve,Ve.current),r)break;return null;case 22:case 23:return t.lanes=0,nm(e,t,n)}return mn(e,t,n)}var om,ci,im,um;om=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ci=function(){};im=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,sr(Zt.current);var l=null;switch(n){case"input":a=$o(e,a),r=$o(e,r),l=[];break;case"select":a=qe({},a,{value:void 0}),r=qe({},r,{value:void 0}),l=[];break;case"textarea":a=Io(e,a),r=Io(e,r),l=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Va)}Oo(n,r);var o;n=null;for(d in a)if(!r.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var i=a[d];for(o in i)i.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(As.hasOwnProperty(d)?l||(l=[]):(l=l||[]).push(d,null));for(d in r){var c=r[d];if(i=a!=null?a[d]:void 0,r.hasOwnProperty(d)&&c!==i&&(c!=null||i!=null))if(d==="style")if(i){for(o in i)!i.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&i[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(l||(l=[]),l.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(l=l||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(As.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Fe("scroll",e),l||i===c||(l=[])):(l=l||[]).push(d,c))}n&&(l=l||[]).push("style",n);var d=l;(t.updateQueue=d)&&(t.flags|=4)}};um=function(e,t,n,r){n!==r&&(t.flags|=4)};function ds(e,t){if(!We)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function pt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function w0(e,t,n){var r=t.pendingProps;switch(eu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(t),null;case 1:return Et(t.type)&&Ka(),pt(t),null;case 3:return r=t.stateNode,Qr(),Be(Ct),Be(gt),uu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ha(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Gt!==null&&(yi(Gt),Gt=null))),ci(e,t),pt(t),null;case 5:iu(t);var a=sr(Ws.current);if(n=t.type,e!==null&&t.stateNode!=null)im(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(B(166));return pt(t),null}if(e=sr(Zt.current),ha(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[Yt]=t,r[Bs]=l,e=(t.mode&1)!==0,n){case"dialog":Fe("cancel",r),Fe("close",r);break;case"iframe":case"object":case"embed":Fe("load",r);break;case"video":case"audio":for(a=0;a<vs.length;a++)Fe(vs[a],r);break;case"source":Fe("error",r);break;case"img":case"image":case"link":Fe("error",r),Fe("load",r);break;case"details":Fe("toggle",r);break;case"input":Mu(r,l),Fe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},Fe("invalid",r);break;case"textarea":Bu(r,l),Fe("invalid",r)}Oo(n,l),a=null;for(var o in l)if(l.hasOwnProperty(o)){var i=l[o];o==="children"?typeof i=="string"?r.textContent!==i&&(l.suppressHydrationWarning!==!0&&pa(r.textContent,i,e),a=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(l.suppressHydrationWarning!==!0&&pa(r.textContent,i,e),a=["children",""+i]):As.hasOwnProperty(o)&&i!=null&&o==="onScroll"&&Fe("scroll",r)}switch(n){case"input":la(r),Fu(r,l,!0);break;case"textarea":la(r),zu(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=Va)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Dd(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Yt]=t,e[Bs]=r,om(e,t,!1,!1),t.stateNode=e;e:{switch(o=_o(n,r),n){case"dialog":Fe("cancel",e),Fe("close",e),a=r;break;case"iframe":case"object":case"embed":Fe("load",e),a=r;break;case"video":case"audio":for(a=0;a<vs.length;a++)Fe(vs[a],e);a=r;break;case"source":Fe("error",e),a=r;break;case"img":case"image":case"link":Fe("error",e),Fe("load",e),a=r;break;case"details":Fe("toggle",e),a=r;break;case"input":Mu(e,r),a=$o(e,r),Fe("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=qe({},r,{value:void 0}),Fe("invalid",e);break;case"textarea":Bu(e,r),a=Io(e,r),Fe("invalid",e);break;default:a=r}Oo(n,a),i=a;for(l in i)if(i.hasOwnProperty(l)){var c=i[l];l==="style"?Md(e,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Od(e,c)):l==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&$s(e,c):typeof c=="number"&&$s(e,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(As.hasOwnProperty(l)?c!=null&&l==="onScroll"&&Fe("scroll",e):c!=null&&Mi(e,l,c,o))}switch(n){case"input":la(e),Fu(e,r,!1);break;case"textarea":la(e),zu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Fn(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?Or(e,!!r.multiple,l,!1):r.defaultValue!=null&&Or(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Va)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return pt(t),null;case 6:if(e&&t.stateNode!=null)um(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(B(166));if(n=sr(Ws.current),sr(Zt.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[Yt]=t,(l=r.nodeValue!==n)&&(e=At,e!==null))switch(e.tag){case 3:pa(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&pa(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Yt]=t,t.stateNode=r}return pt(t),null;case 13:if(Be(Ve),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(We&&Lt!==null&&t.mode&1&&!(t.flags&128))Ef(),Kr(),t.flags|=98560,l=!1;else if(l=ha(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(B(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(B(317));l[Yt]=t}else Kr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;pt(t),l=!1}else Gt!==null&&(yi(Gt),Gt=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ve.current&1?at===0&&(at=3):bu())),t.updateQueue!==null&&(t.flags|=4),pt(t),null);case 4:return Qr(),ci(e,t),e===null&&Ms(t.stateNode.containerInfo),pt(t),null;case 10:return su(t.type._context),pt(t),null;case 17:return Et(t.type)&&Ka(),pt(t),null;case 19:if(Be(Ve),l=t.memoizedState,l===null)return pt(t),null;if(r=(t.flags&128)!==0,o=l.rendering,o===null)if(r)ds(l,!1);else{if(at!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=el(e),o!==null){for(t.flags|=128,ds(l,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,o=l.alternate,o===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,e=o.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Me(Ve,Ve.current&1|2),t.child}e=e.sibling}l.tail!==null&&Xe()>Jr&&(t.flags|=128,r=!0,ds(l,!1),t.lanes=4194304)}else{if(!r)if(e=el(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ds(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!We)return pt(t),null}else 2*Xe()-l.renderingStartTime>Jr&&n!==1073741824&&(t.flags|=128,r=!0,ds(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(n=l.last,n!==null?n.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Xe(),t.sibling=null,n=Ve.current,Me(Ve,r?n&1|2:n&1),t):(pt(t),null);case 22:case 23:return wu(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Tt&1073741824&&(pt(t),t.subtreeFlags&6&&(t.flags|=8192)):pt(t),null;case 24:return null;case 25:return null}throw Error(B(156,t.tag))}function b0(e,t){switch(eu(t),t.tag){case 1:return Et(t.type)&&Ka(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Qr(),Be(Ct),Be(gt),uu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return iu(t),null;case 13:if(Be(Ve),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(B(340));Kr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Be(Ve),null;case 4:return Qr(),null;case 10:return su(t.type._context),null;case 22:case 23:return wu(),null;case 24:return null;default:return null}}var ya=!1,ht=!1,j0=typeof WeakSet=="function"?WeakSet:Set,re=null;function Ir(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ye(e,t,r)}else n.current=null}function di(e,t,n){try{n()}catch(r){Ye(e,t,r)}}var Ac=!1;function N0(e,t){if(qo=Wa,e=pf(),Zi(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var o=0,i=-1,c=-1,d=0,h=0,m=e,g=null;t:for(;;){for(var v;m!==n||a!==0&&m.nodeType!==3||(i=o+a),m!==l||r!==0&&m.nodeType!==3||(c=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(v=m.firstChild)!==null;)g=m,m=v;for(;;){if(m===e)break t;if(g===n&&++d===a&&(i=o),g===l&&++h===r&&(c=o),(v=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=v}n=i===-1||c===-1?null:{start:i,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qo={focusedElem:e,selectionRange:n},Wa=!1,re=t;re!==null;)if(t=re,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,re=e;else for(;re!==null;){t=re;try{var j=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var y=j.memoizedProps,S=j.memoizedState,f=t.stateNode,p=f.getSnapshotBeforeUpdate(t.elementType===t.type?y:zt(t.type,y),S);f.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(N){Ye(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,re=e;break}re=t.return}return j=Ac,Ac=!1,j}function Ps(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&di(t,n,l)}a=a.next}while(a!==r)}}function Nl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function fi(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function cm(e){var t=e.alternate;t!==null&&(e.alternate=null,cm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Yt],delete t[Bs],delete t[Zo],delete t[a0],delete t[l0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function dm(e){return e.tag===5||e.tag===3||e.tag===4}function $c(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||dm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function mi(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Va));else if(r!==4&&(e=e.child,e!==null))for(mi(e,t,n),e=e.sibling;e!==null;)mi(e,t,n),e=e.sibling}function pi(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(pi(e,t,n),e=e.sibling;e!==null;)pi(e,t,n),e=e.sibling}var ut=null,Wt=!1;function vn(e,t,n){for(n=n.child;n!==null;)fm(e,t,n),n=n.sibling}function fm(e,t,n){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(hl,n)}catch{}switch(n.tag){case 5:ht||Ir(n,t);case 6:var r=ut,a=Wt;ut=null,vn(e,t,n),ut=r,Wt=a,ut!==null&&(Wt?(e=ut,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ut.removeChild(n.stateNode));break;case 18:ut!==null&&(Wt?(e=ut,n=n.stateNode,e.nodeType===8?to(e.parentNode,n):e.nodeType===1&&to(e,n),Ds(e)):to(ut,n.stateNode));break;case 4:r=ut,a=Wt,ut=n.stateNode.containerInfo,Wt=!0,vn(e,t,n),ut=r,Wt=a;break;case 0:case 11:case 14:case 15:if(!ht&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var l=a,o=l.destroy;l=l.tag,o!==void 0&&(l&2||l&4)&&di(n,t,o),a=a.next}while(a!==r)}vn(e,t,n);break;case 1:if(!ht&&(Ir(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(i){Ye(n,t,i)}vn(e,t,n);break;case 21:vn(e,t,n);break;case 22:n.mode&1?(ht=(r=ht)||n.memoizedState!==null,vn(e,t,n),ht=r):vn(e,t,n);break;default:vn(e,t,n)}}function Rc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new j0),t.forEach(function(r){var a=$0.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function Bt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var l=e,o=t,i=o;e:for(;i!==null;){switch(i.tag){case 5:ut=i.stateNode,Wt=!1;break e;case 3:ut=i.stateNode.containerInfo,Wt=!0;break e;case 4:ut=i.stateNode.containerInfo,Wt=!0;break e}i=i.return}if(ut===null)throw Error(B(160));fm(l,o,a),ut=null,Wt=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){Ye(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)mm(t,e),t=t.sibling}function mm(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Bt(t,e),qt(e),r&4){try{Ps(3,e,e.return),Nl(3,e)}catch(y){Ye(e,e.return,y)}try{Ps(5,e,e.return)}catch(y){Ye(e,e.return,y)}}break;case 1:Bt(t,e),qt(e),r&512&&n!==null&&Ir(n,n.return);break;case 5:if(Bt(t,e),qt(e),r&512&&n!==null&&Ir(n,n.return),e.flags&32){var a=e.stateNode;try{$s(a,"")}catch(y){Ye(e,e.return,y)}}if(r&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,o=n!==null?n.memoizedProps:l,i=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{i==="input"&&l.type==="radio"&&l.name!=null&&Ud(a,l),_o(i,o);var d=_o(i,l);for(o=0;o<c.length;o+=2){var h=c[o],m=c[o+1];h==="style"?Md(a,m):h==="dangerouslySetInnerHTML"?Od(a,m):h==="children"?$s(a,m):Mi(a,h,m,d)}switch(i){case"input":Ro(a,l);break;case"textarea":Id(a,l);break;case"select":var g=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var v=l.value;v!=null?Or(a,!!l.multiple,v,!1):g!==!!l.multiple&&(l.defaultValue!=null?Or(a,!!l.multiple,l.defaultValue,!0):Or(a,!!l.multiple,l.multiple?[]:"",!1))}a[Bs]=l}catch(y){Ye(e,e.return,y)}}break;case 6:if(Bt(t,e),qt(e),r&4){if(e.stateNode===null)throw Error(B(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(y){Ye(e,e.return,y)}}break;case 3:if(Bt(t,e),qt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ds(t.containerInfo)}catch(y){Ye(e,e.return,y)}break;case 4:Bt(t,e),qt(e);break;case 13:Bt(t,e),qt(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(yu=Xe())),r&4&&Rc(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(ht=(d=ht)||h,Bt(t,e),ht=d):Bt(t,e),qt(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!h&&e.mode&1)for(re=e,h=e.child;h!==null;){for(m=re=h;re!==null;){switch(g=re,v=g.child,g.tag){case 0:case 11:case 14:case 15:Ps(4,g,g.return);break;case 1:Ir(g,g.return);var j=g.stateNode;if(typeof j.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,j.props=t.memoizedProps,j.state=t.memoizedState,j.componentWillUnmount()}catch(y){Ye(r,n,y)}}break;case 5:Ir(g,g.return);break;case 22:if(g.memoizedState!==null){Ic(m);continue}}v!==null?(v.return=g,re=v):Ic(m)}h=h.sibling}e:for(h=null,m=e;;){if(m.tag===5){if(h===null){h=m;try{a=m.stateNode,d?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(i=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=_d("display",o))}catch(y){Ye(e,e.return,y)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(y){Ye(e,e.return,y)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Bt(t,e),qt(e),r&4&&Rc(e);break;case 21:break;default:Bt(t,e),qt(e)}}function qt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(dm(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&($s(a,""),r.flags&=-33);var l=$c(e);pi(e,l,a);break;case 3:case 4:var o=r.stateNode.containerInfo,i=$c(e);mi(e,i,o);break;default:throw Error(B(161))}}catch(c){Ye(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function S0(e,t,n){re=e,pm(e)}function pm(e,t,n){for(var r=(e.mode&1)!==0;re!==null;){var a=re,l=a.child;if(a.tag===22&&r){var o=a.memoizedState!==null||ya;if(!o){var i=a.alternate,c=i!==null&&i.memoizedState!==null||ht;i=ya;var d=ht;if(ya=o,(ht=c)&&!d)for(re=a;re!==null;)o=re,c=o.child,o.tag===22&&o.memoizedState!==null?Dc(a):c!==null?(c.return=o,re=c):Dc(a);for(;l!==null;)re=l,pm(l),l=l.sibling;re=a,ya=i,ht=d}Uc(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,re=l):Uc(e)}}function Uc(e){for(;re!==null;){var t=re;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ht||Nl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ht)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:zt(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&yc(t,l,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}yc(t,o,n)}break;case 5:var i=t.stateNode;if(n===null&&t.flags&4){n=i;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&Ds(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}ht||t.flags&512&&fi(t)}catch(g){Ye(t,t.return,g)}}if(t===e){re=null;break}if(n=t.sibling,n!==null){n.return=t.return,re=n;break}re=t.return}}function Ic(e){for(;re!==null;){var t=re;if(t===e){re=null;break}var n=t.sibling;if(n!==null){n.return=t.return,re=n;break}re=t.return}}function Dc(e){for(;re!==null;){var t=re;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Nl(4,t)}catch(c){Ye(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(c){Ye(t,a,c)}}var l=t.return;try{fi(t)}catch(c){Ye(t,l,c)}break;case 5:var o=t.return;try{fi(t)}catch(c){Ye(t,o,c)}}}catch(c){Ye(t,t.return,c)}if(t===e){re=null;break}var i=t.sibling;if(i!==null){i.return=t.return,re=i;break}re=t.return}}var k0=Math.ceil,rl=hn.ReactCurrentDispatcher,xu=hn.ReactCurrentOwner,_t=hn.ReactCurrentBatchConfig,Te=0,ot=null,rt=null,ct=0,Tt=0,Dr=Gn(0),at=0,Ks=null,mr=0,Sl=0,gu=0,Ts=null,St=null,yu=0,Jr=1/0,rn=null,sl=!1,hi=null,Dn=null,va=!1,Tn=null,al=0,Ls=0,xi=null,Ua=-1,Ia=0;function bt(){return Te&6?Xe():Ua!==-1?Ua:Ua=Xe()}function On(e){return e.mode&1?Te&2&&ct!==0?ct&-ct:i0.transition!==null?(Ia===0&&(Ia=Jd()),Ia):(e=_e,e!==0||(e=window.event,e=e===void 0?16:sf(e.type)),e):1}function Vt(e,t,n,r){if(50<Ls)throw Ls=0,xi=null,Error(B(185));Js(e,n,r),(!(Te&2)||e!==ot)&&(e===ot&&(!(Te&2)&&(Sl|=n),at===4&&Cn(e,ct)),Pt(e,r),n===1&&Te===0&&!(t.mode&1)&&(Jr=Xe()+500,wl&&Hn()))}function Pt(e,t){var n=e.callbackNode;ih(e,t);var r=za(e,e===ot?ct:0);if(r===0)n!==null&&Hu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Hu(n),t===1)e.tag===0?o0(Oc.bind(null,e)):Sf(Oc.bind(null,e)),r0(function(){!(Te&6)&&Hn()}),n=null;else{switch(Zd(r)){case 1:n=Gi;break;case 4:n=Qd;break;case 16:n=Ba;break;case 536870912:n=Yd;break;default:n=Ba}n=jm(n,hm.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function hm(e,t){if(Ua=-1,Ia=0,Te&6)throw Error(B(327));var n=e.callbackNode;if(zr()&&e.callbackNode!==n)return null;var r=za(e,e===ot?ct:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ll(e,r);else{t=r;var a=Te;Te|=2;var l=gm();(ot!==e||ct!==t)&&(rn=null,Jr=Xe()+500,or(e,t));do try{P0();break}catch(i){xm(e,i)}while(!0);ru(),rl.current=l,Te=a,rt!==null?t=0:(ot=null,ct=0,t=at)}if(t!==0){if(t===2&&(a=Wo(e),a!==0&&(r=a,t=gi(e,a))),t===1)throw n=Ks,or(e,0),Cn(e,r),Pt(e,Xe()),n;if(t===6)Cn(e,r);else{if(a=e.current.alternate,!(r&30)&&!C0(a)&&(t=ll(e,r),t===2&&(l=Wo(e),l!==0&&(r=l,t=gi(e,l))),t===1))throw n=Ks,or(e,0),Cn(e,r),Pt(e,Xe()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(B(345));case 2:er(e,St,rn);break;case 3:if(Cn(e,r),(r&130023424)===r&&(t=yu+500-Xe(),10<t)){if(za(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){bt(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Jo(er.bind(null,e,St,rn),t);break}er(e,St,rn);break;case 4:if(Cn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-Ht(r);l=1<<o,o=t[o],o>a&&(a=o),r&=~l}if(r=a,r=Xe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*k0(r/1960))-r,10<r){e.timeoutHandle=Jo(er.bind(null,e,St,rn),r);break}er(e,St,rn);break;case 5:er(e,St,rn);break;default:throw Error(B(329))}}}return Pt(e,Xe()),e.callbackNode===n?hm.bind(null,e):null}function gi(e,t){var n=Ts;return e.current.memoizedState.isDehydrated&&(or(e,t).flags|=256),e=ll(e,t),e!==2&&(t=St,St=n,t!==null&&yi(t)),e}function yi(e){St===null?St=e:St.push.apply(St,e)}function C0(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],l=a.getSnapshot;a=a.value;try{if(!Kt(l(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Cn(e,t){for(t&=~gu,t&=~Sl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ht(t),r=1<<n;e[n]=-1,t&=~r}}function Oc(e){if(Te&6)throw Error(B(327));zr();var t=za(e,0);if(!(t&1))return Pt(e,Xe()),null;var n=ll(e,t);if(e.tag!==0&&n===2){var r=Wo(e);r!==0&&(t=r,n=gi(e,r))}if(n===1)throw n=Ks,or(e,0),Cn(e,t),Pt(e,Xe()),n;if(n===6)throw Error(B(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,er(e,St,rn),Pt(e,Xe()),null}function vu(e,t){var n=Te;Te|=1;try{return e(t)}finally{Te=n,Te===0&&(Jr=Xe()+500,wl&&Hn())}}function pr(e){Tn!==null&&Tn.tag===0&&!(Te&6)&&zr();var t=Te;Te|=1;var n=_t.transition,r=_e;try{if(_t.transition=null,_e=1,e)return e()}finally{_e=r,_t.transition=n,Te=t,!(Te&6)&&Hn()}}function wu(){Tt=Dr.current,Be(Dr)}function or(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,n0(n)),rt!==null)for(n=rt.return;n!==null;){var r=n;switch(eu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ka();break;case 3:Qr(),Be(Ct),Be(gt),uu();break;case 5:iu(r);break;case 4:Qr();break;case 13:Be(Ve);break;case 19:Be(Ve);break;case 10:su(r.type._context);break;case 22:case 23:wu()}n=n.return}if(ot=e,rt=e=_n(e.current,null),ct=Tt=t,at=0,Ks=null,gu=Sl=mr=0,St=Ts=null,rr!==null){for(t=0;t<rr.length;t++)if(n=rr[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,l=n.pending;if(l!==null){var o=l.next;l.next=a,r.next=o}n.pending=r}rr=null}return e}function xm(e,t){do{var n=rt;try{if(ru(),Aa.current=nl,tl){for(var r=Ke.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}tl=!1}if(fr=0,lt=st=Ke=null,Es=!1,Gs=0,xu.current=null,n===null||n.return===null){at=1,Ks=t,rt=null;break}e:{var l=e,o=n.return,i=n,c=t;if(t=ct,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=i,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=Sc(o);if(v!==null){v.flags&=-257,kc(v,o,i,l,t),v.mode&1&&Nc(l,d,t),t=v,c=d;var j=t.updateQueue;if(j===null){var y=new Set;y.add(c),t.updateQueue=y}else j.add(c);break e}else{if(!(t&1)){Nc(l,d,t),bu();break e}c=Error(B(426))}}else if(We&&i.mode&1){var S=Sc(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),kc(S,o,i,l,t),tu(Yr(c,i));break e}}l=c=Yr(c,i),at!==4&&(at=2),Ts===null?Ts=[l]:Ts.push(l),l=o;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var f=Xf(l,c,t);gc(l,f);break e;case 1:i=c;var p=l.type,x=l.stateNode;if(!(l.flags&128)&&(typeof p.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Dn===null||!Dn.has(x)))){l.flags|=65536,t&=-t,l.lanes|=t;var N=em(l,i,t);gc(l,N);break e}}l=l.return}while(l!==null)}vm(n)}catch(E){t=E,rt===n&&n!==null&&(rt=n=n.return);continue}break}while(!0)}function gm(){var e=rl.current;return rl.current=nl,e===null?nl:e}function bu(){(at===0||at===3||at===2)&&(at=4),ot===null||!(mr&268435455)&&!(Sl&268435455)||Cn(ot,ct)}function ll(e,t){var n=Te;Te|=2;var r=gm();(ot!==e||ct!==t)&&(rn=null,or(e,t));do try{E0();break}catch(a){xm(e,a)}while(!0);if(ru(),Te=n,rl.current=r,rt!==null)throw Error(B(261));return ot=null,ct=0,at}function E0(){for(;rt!==null;)ym(rt)}function P0(){for(;rt!==null&&!Xp();)ym(rt)}function ym(e){var t=bm(e.alternate,e,Tt);e.memoizedProps=e.pendingProps,t===null?vm(e):rt=t,xu.current=null}function vm(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=b0(n,t),n!==null){n.flags&=32767,rt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{at=6,rt=null;return}}else if(n=w0(n,t,Tt),n!==null){rt=n;return}if(t=t.sibling,t!==null){rt=t;return}rt=t=e}while(t!==null);at===0&&(at=5)}function er(e,t,n){var r=_e,a=_t.transition;try{_t.transition=null,_e=1,T0(e,t,n,r)}finally{_t.transition=a,_e=r}return null}function T0(e,t,n,r){do zr();while(Tn!==null);if(Te&6)throw Error(B(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(B(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(uh(e,l),e===ot&&(rt=ot=null,ct=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||va||(va=!0,jm(Ba,function(){return zr(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=_t.transition,_t.transition=null;var o=_e;_e=1;var i=Te;Te|=4,xu.current=null,N0(e,n),mm(n,e),Qh(Qo),Wa=!!qo,Qo=qo=null,e.current=n,S0(n),eh(),Te=i,_e=o,_t.transition=l}else e.current=n;if(va&&(va=!1,Tn=e,al=a),l=e.pendingLanes,l===0&&(Dn=null),rh(n.stateNode),Pt(e,Xe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(sl)throw sl=!1,e=hi,hi=null,e;return al&1&&e.tag!==0&&zr(),l=e.pendingLanes,l&1?e===xi?Ls++:(Ls=0,xi=e):Ls=0,Hn(),null}function zr(){if(Tn!==null){var e=Zd(al),t=_t.transition,n=_e;try{if(_t.transition=null,_e=16>e?16:e,Tn===null)var r=!1;else{if(e=Tn,Tn=null,al=0,Te&6)throw Error(B(331));var a=Te;for(Te|=4,re=e.current;re!==null;){var l=re,o=l.child;if(re.flags&16){var i=l.deletions;if(i!==null){for(var c=0;c<i.length;c++){var d=i[c];for(re=d;re!==null;){var h=re;switch(h.tag){case 0:case 11:case 15:Ps(8,h,l)}var m=h.child;if(m!==null)m.return=h,re=m;else for(;re!==null;){h=re;var g=h.sibling,v=h.return;if(cm(h),h===d){re=null;break}if(g!==null){g.return=v,re=g;break}re=v}}}var j=l.alternate;if(j!==null){var y=j.child;if(y!==null){j.child=null;do{var S=y.sibling;y.sibling=null,y=S}while(y!==null)}}re=l}}if(l.subtreeFlags&2064&&o!==null)o.return=l,re=o;else e:for(;re!==null;){if(l=re,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Ps(9,l,l.return)}var f=l.sibling;if(f!==null){f.return=l.return,re=f;break e}re=l.return}}var p=e.current;for(re=p;re!==null;){o=re;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,re=x;else e:for(o=p;re!==null;){if(i=re,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:Nl(9,i)}}catch(E){Ye(i,i.return,E)}if(i===o){re=null;break e}var N=i.sibling;if(N!==null){N.return=i.return,re=N;break e}re=i.return}}if(Te=a,Hn(),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(hl,e)}catch{}r=!0}return r}finally{_e=n,_t.transition=t}}return!1}function _c(e,t,n){t=Yr(n,t),t=Xf(e,t,1),e=In(e,t,1),t=bt(),e!==null&&(Js(e,1,t),Pt(e,t))}function Ye(e,t,n){if(e.tag===3)_c(e,e,n);else for(;t!==null;){if(t.tag===3){_c(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Dn===null||!Dn.has(r))){e=Yr(n,e),e=em(t,e,1),t=In(t,e,1),e=bt(),t!==null&&(Js(t,1,e),Pt(t,e));break}}t=t.return}}function L0(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=bt(),e.pingedLanes|=e.suspendedLanes&n,ot===e&&(ct&n)===n&&(at===4||at===3&&(ct&130023424)===ct&&500>Xe()-yu?or(e,0):gu|=n),Pt(e,t)}function wm(e,t){t===0&&(e.mode&1?(t=ua,ua<<=1,!(ua&130023424)&&(ua=4194304)):t=1);var n=bt();e=fn(e,t),e!==null&&(Js(e,t,n),Pt(e,n))}function A0(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),wm(e,n)}function $0(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(t),wm(e,n)}var bm;bm=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ct.current)kt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return kt=!1,v0(e,t,n);kt=!!(e.flags&131072)}else kt=!1,We&&t.flags&1048576&&kf(t,Ya,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ra(e,t),e=t.pendingProps;var a=Vr(t,gt.current);Br(t,n),a=du(null,t,r,e,a,n);var l=fu();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Et(r)?(l=!0,qa(t)):l=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,lu(t),a.updater=jl,t.stateNode=a,a._reactInternals=t,si(t,r,e,n),t=oi(null,t,r,!0,l,n)):(t.tag=0,We&&l&&Xi(t),wt(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ra(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=U0(r),e=zt(r,e),a){case 0:t=li(null,t,r,e,n);break e;case 1:t=Pc(null,t,r,e,n);break e;case 11:t=Cc(null,t,r,e,n);break e;case 14:t=Ec(null,t,r,zt(r.type,e),n);break e}throw Error(B(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:zt(r,a),li(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:zt(r,a),Pc(e,t,r,a,n);case 3:e:{if(sm(t),e===null)throw Error(B(387));r=t.pendingProps,l=t.memoizedState,a=l.element,Af(e,t),Xa(t,r,null,n);var o=t.memoizedState;if(r=o.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){a=Yr(Error(B(423)),t),t=Tc(e,t,r,n,a);break e}else if(r!==a){a=Yr(Error(B(424)),t),t=Tc(e,t,r,n,a);break e}else for(Lt=Un(t.stateNode.containerInfo.firstChild),At=t,We=!0,Gt=null,n=Tf(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Kr(),r===a){t=mn(e,t,n);break e}wt(e,t,r,n)}t=t.child}return t;case 5:return $f(t),e===null&&ti(t),r=t.type,a=t.pendingProps,l=e!==null?e.memoizedProps:null,o=a.children,Yo(r,a)?o=null:l!==null&&Yo(r,l)&&(t.flags|=32),rm(e,t),wt(e,t,o,n),t.child;case 6:return e===null&&ti(t),null;case 13:return am(e,t,n);case 4:return ou(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=qr(t,null,r,n):wt(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:zt(r,a),Cc(e,t,r,a,n);case 7:return wt(e,t,t.pendingProps,n),t.child;case 8:return wt(e,t,t.pendingProps.children,n),t.child;case 12:return wt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,l=t.memoizedProps,o=a.value,Me(Ja,r._currentValue),r._currentValue=o,l!==null)if(Kt(l.value,o)){if(l.children===a.children&&!Ct.current){t=mn(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var i=l.dependencies;if(i!==null){o=l.child;for(var c=i.firstContext;c!==null;){if(c.context===r){if(l.tag===1){c=on(-1,n&-n),c.tag=2;var d=l.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),ni(l.return,n,t),i.lanes|=n;break}c=c.next}}else if(l.tag===10)o=l.type===t.type?null:l.child;else if(l.tag===18){if(o=l.return,o===null)throw Error(B(341));o.lanes|=n,i=o.alternate,i!==null&&(i.lanes|=n),ni(o,n,t),o=l.sibling}else o=l.child;if(o!==null)o.return=l;else for(o=l;o!==null;){if(o===t){o=null;break}if(l=o.sibling,l!==null){l.return=o.return,o=l;break}o=o.return}l=o}wt(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Br(t,n),a=Mt(a),r=r(a),t.flags|=1,wt(e,t,r,n),t.child;case 14:return r=t.type,a=zt(r,t.pendingProps),a=zt(r.type,a),Ec(e,t,r,a,n);case 15:return tm(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:zt(r,a),Ra(e,t),t.tag=1,Et(r)?(e=!0,qa(t)):e=!1,Br(t,n),Zf(t,r,a),si(t,r,a,n),oi(null,t,r,!0,e,n);case 19:return lm(e,t,n);case 22:return nm(e,t,n)}throw Error(B(156,t.tag))};function jm(e,t){return qd(e,t)}function R0(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ot(e,t,n,r){return new R0(e,t,n,r)}function ju(e){return e=e.prototype,!(!e||!e.isReactComponent)}function U0(e){if(typeof e=="function")return ju(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Bi)return 11;if(e===zi)return 14}return 2}function _n(e,t){var n=e.alternate;return n===null?(n=Ot(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Da(e,t,n,r,a,l){var o=2;if(r=e,typeof e=="function")ju(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Cr:return ir(n.children,a,l,t);case Fi:o=8,a|=8;break;case Po:return e=Ot(12,n,t,a|2),e.elementType=Po,e.lanes=l,e;case To:return e=Ot(13,n,t,a),e.elementType=To,e.lanes=l,e;case Lo:return e=Ot(19,n,t,a),e.elementType=Lo,e.lanes=l,e;case Ad:return kl(n,a,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Td:o=10;break e;case Ld:o=9;break e;case Bi:o=11;break e;case zi:o=14;break e;case Nn:o=16,r=null;break e}throw Error(B(130,e==null?e:typeof e,""))}return t=Ot(o,n,t,a),t.elementType=e,t.type=r,t.lanes=l,t}function ir(e,t,n,r){return e=Ot(7,e,r,t),e.lanes=n,e}function kl(e,t,n,r){return e=Ot(22,e,r,t),e.elementType=Ad,e.lanes=n,e.stateNode={isHidden:!1},e}function uo(e,t,n){return e=Ot(6,e,null,t),e.lanes=n,e}function co(e,t,n){return t=Ot(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function I0(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gl(0),this.expirationTimes=Gl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gl(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Nu(e,t,n,r,a,l,o,i,c){return e=new I0(e,t,n,i,c),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Ot(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},lu(l),e}function D0(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:kr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Nm(e){if(!e)return Bn;e=e._reactInternals;e:{if(xr(e)!==e||e.tag!==1)throw Error(B(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Et(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(B(171))}if(e.tag===1){var n=e.type;if(Et(n))return Nf(e,n,t)}return t}function Sm(e,t,n,r,a,l,o,i,c){return e=Nu(n,r,!0,e,a,l,o,i,c),e.context=Nm(null),n=e.current,r=bt(),a=On(n),l=on(r,a),l.callback=t??null,In(n,l,a),e.current.lanes=a,Js(e,a,r),Pt(e,r),e}function Cl(e,t,n,r){var a=t.current,l=bt(),o=On(a);return n=Nm(n),t.context===null?t.context=n:t.pendingContext=n,t=on(l,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=In(a,t,o),e!==null&&(Vt(e,a,o,l),La(e,a,o)),o}function ol(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Mc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Su(e,t){Mc(e,t),(e=e.alternate)&&Mc(e,t)}function O0(){return null}var km=typeof reportError=="function"?reportError:function(e){console.error(e)};function ku(e){this._internalRoot=e}El.prototype.render=ku.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(B(409));Cl(e,t,null,null)};El.prototype.unmount=ku.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;pr(function(){Cl(null,e,null,null)}),t[dn]=null}};function El(e){this._internalRoot=e}El.prototype.unstable_scheduleHydration=function(e){if(e){var t=tf();e={blockedOn:null,target:e,priority:t};for(var n=0;n<kn.length&&t!==0&&t<kn[n].priority;n++);kn.splice(n,0,e),n===0&&rf(e)}};function Cu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Pl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Fc(){}function _0(e,t,n,r,a){if(a){if(typeof r=="function"){var l=r;r=function(){var d=ol(o);l.call(d)}}var o=Sm(t,r,e,0,null,!1,!1,"",Fc);return e._reactRootContainer=o,e[dn]=o.current,Ms(e.nodeType===8?e.parentNode:e),pr(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var i=r;r=function(){var d=ol(c);i.call(d)}}var c=Nu(e,0,!1,null,null,!1,!1,"",Fc);return e._reactRootContainer=c,e[dn]=c.current,Ms(e.nodeType===8?e.parentNode:e),pr(function(){Cl(t,c,n,r)}),c}function Tl(e,t,n,r,a){var l=n._reactRootContainer;if(l){var o=l;if(typeof a=="function"){var i=a;a=function(){var c=ol(o);i.call(c)}}Cl(t,o,e,a)}else o=_0(n,t,e,a,r);return ol(o)}Xd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ys(t.pendingLanes);n!==0&&(Hi(t,n|1),Pt(t,Xe()),!(Te&6)&&(Jr=Xe()+500,Hn()))}break;case 13:pr(function(){var r=fn(e,1);if(r!==null){var a=bt();Vt(r,e,1,a)}}),Su(e,1)}};Vi=function(e){if(e.tag===13){var t=fn(e,134217728);if(t!==null){var n=bt();Vt(t,e,134217728,n)}Su(e,134217728)}};ef=function(e){if(e.tag===13){var t=On(e),n=fn(e,t);if(n!==null){var r=bt();Vt(n,e,t,r)}Su(e,t)}};tf=function(){return _e};nf=function(e,t){var n=_e;try{return _e=e,t()}finally{_e=n}};Fo=function(e,t,n){switch(t){case"input":if(Ro(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=vl(r);if(!a)throw Error(B(90));Rd(r),Ro(r,a)}}}break;case"textarea":Id(e,n);break;case"select":t=n.value,t!=null&&Or(e,!!n.multiple,t,!1)}};zd=vu;Wd=pr;var M0={usingClientEntryPoint:!1,Events:[Xs,Lr,vl,Fd,Bd,vu]},fs={findFiberByHostInstance:nr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},F0={bundleType:fs.bundleType,version:fs.version,rendererPackageName:fs.rendererPackageName,rendererConfig:fs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Vd(e),e===null?null:e.stateNode},findFiberByHostInstance:fs.findFiberByHostInstance||O0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wa.isDisabled&&wa.supportsFiber)try{hl=wa.inject(F0),Jt=wa}catch{}}Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M0;Rt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cu(t))throw Error(B(200));return D0(e,t,null,n)};Rt.createRoot=function(e,t){if(!Cu(e))throw Error(B(299));var n=!1,r="",a=km;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Nu(e,1,!1,null,null,n,!1,r,a),e[dn]=t.current,Ms(e.nodeType===8?e.parentNode:e),new ku(t)};Rt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(B(188)):(e=Object.keys(e).join(","),Error(B(268,e)));return e=Vd(t),e=e===null?null:e.stateNode,e};Rt.flushSync=function(e){return pr(e)};Rt.hydrate=function(e,t,n){if(!Pl(t))throw Error(B(200));return Tl(null,e,t,!0,n)};Rt.hydrateRoot=function(e,t,n){if(!Cu(e))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,a=!1,l="",o=km;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Sm(t,null,e,1,n??null,a,!1,l,o),e[dn]=t.current,Ms(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new El(t)};Rt.render=function(e,t,n){if(!Pl(t))throw Error(B(200));return Tl(null,e,t,!1,n)};Rt.unmountComponentAtNode=function(e){if(!Pl(e))throw Error(B(40));return e._reactRootContainer?(pr(function(){Tl(null,null,e,!1,function(){e._reactRootContainer=null,e[dn]=null})}),!0):!1};Rt.unstable_batchedUpdates=vu;Rt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Pl(n))throw Error(B(200));if(e==null||e._reactInternals===void 0)throw Error(B(38));return Tl(e,t,n,!1,r)};Rt.version="18.3.1-next-f1338f8080-20240426";function Cm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Cm)}catch(e){console.error(e)}}Cm(),kd.exports=Rt;var Em=kd.exports,Bc=Em;Co.createRoot=Bc.createRoot,Co.hydrateRoot=Bc.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qs(){return qs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qs.apply(this,arguments)}var Ln;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ln||(Ln={}));const zc="popstate";function B0(e){e===void 0&&(e={});function t(r,a){let{pathname:l,search:o,hash:i}=r.location;return vi("",{pathname:l,search:o,hash:i},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:il(a)}return W0(t,n,null,e)}function Je(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Eu(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function z0(){return Math.random().toString(36).substr(2,8)}function Wc(e,t){return{usr:e.state,key:e.key,idx:t}}function vi(e,t,n,r){return n===void 0&&(n=null),qs({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ns(t):t,{state:n,key:t&&t.key||r||z0()})}function il(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function ns(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function W0(e,t,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:l=!1}=r,o=a.history,i=Ln.Pop,c=null,d=h();d==null&&(d=0,o.replaceState(qs({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function m(){i=Ln.Pop;let S=h(),f=S==null?null:S-d;d=S,c&&c({action:i,location:y.location,delta:f})}function g(S,f){i=Ln.Push;let p=vi(y.location,S,f);d=h()+1;let x=Wc(p,d),N=y.createHref(p);try{o.pushState(x,"",N)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;a.location.assign(N)}l&&c&&c({action:i,location:y.location,delta:1})}function v(S,f){i=Ln.Replace;let p=vi(y.location,S,f);d=h();let x=Wc(p,d),N=y.createHref(p);o.replaceState(x,"",N),l&&c&&c({action:i,location:y.location,delta:0})}function j(S){let f=a.location.origin!=="null"?a.location.origin:a.location.href,p=typeof S=="string"?S:il(S);return p=p.replace(/ $/,"%20"),Je(f,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,f)}let y={get action(){return i},get location(){return e(a,o)},listen(S){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(zc,m),c=S,()=>{a.removeEventListener(zc,m),c=null}},createHref(S){return t(a,S)},createURL:j,encodeLocation(S){let f=j(S);return{pathname:f.pathname,search:f.search,hash:f.hash}},push:g,replace:v,go(S){return o.go(S)}};return y}var Gc;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Gc||(Gc={}));function G0(e,t,n){return n===void 0&&(n="/"),H0(e,t,n)}function H0(e,t,n,r){let a=typeof t=="string"?ns(t):t,l=Zr(a.pathname||"/",n);if(l==null)return null;let o=Pm(e);V0(o);let i=null;for(let c=0;i==null&&c<o.length;++c){let d=rx(l);i=tx(o[c],d)}return i}function Pm(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(l,o,i)=>{let c={relativePath:i===void 0?l.path||"":i,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};c.relativePath.startsWith("/")&&(Je(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=Mn([r,c.relativePath]),h=n.concat(c);l.children&&l.children.length>0&&(Je(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Pm(l.children,t,h,d)),!(l.path==null&&!l.index)&&t.push({path:d,score:X0(d,l.index),routesMeta:h})};return e.forEach((l,o)=>{var i;if(l.path===""||!((i=l.path)!=null&&i.includes("?")))a(l,o);else for(let c of Tm(l.path))a(l,o,c)}),t}function Tm(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,a=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let o=Tm(r.join("/")),i=[];return i.push(...o.map(c=>c===""?l:[l,c].join("/"))),a&&i.push(...o),i.map(c=>e.startsWith("/")&&c===""?"/":c)}function V0(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:ex(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const K0=/^:[\w-]+$/,q0=3,Q0=2,Y0=1,J0=10,Z0=-2,Hc=e=>e==="*";function X0(e,t){let n=e.split("/"),r=n.length;return n.some(Hc)&&(r+=Z0),t&&(r+=Q0),n.filter(a=>!Hc(a)).reduce((a,l)=>a+(K0.test(l)?q0:l===""?Y0:J0),r)}function ex(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function tx(e,t,n){let{routesMeta:r}=e,a={},l="/",o=[];for(let i=0;i<r.length;++i){let c=r[i],d=i===r.length-1,h=l==="/"?t:t.slice(l.length)||"/",m=wi({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),g=c.route;if(!m)return null;Object.assign(a,m.params),o.push({params:a,pathname:Mn([l,m.pathname]),pathnameBase:ix(Mn([l,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(l=Mn([l,m.pathnameBase]))}return o}function wi(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=nx(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let l=a[0],o=l.replace(/(.)\/+$/,"$1"),i=a.slice(1);return{params:r.reduce((d,h,m)=>{let{paramName:g,isOptional:v}=h;if(g==="*"){let y=i[m]||"";o=l.slice(0,l.length-y.length).replace(/(.)\/+$/,"$1")}const j=i[m];return v&&!j?d[g]=void 0:d[g]=(j||"").replace(/%2F/g,"/"),d},{}),pathname:l,pathnameBase:o,pattern:e}}function nx(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Eu(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,i,c)=>(r.push({paramName:i,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function rx(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Eu(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Zr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const sx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ax=e=>sx.test(e);function lx(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?ns(e):e,l;if(n)if(ax(n))l=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Eu(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?l=Vc(n.substring(1),"/"):l=Vc(n,t)}else l=t;return{pathname:l,search:ux(r),hash:cx(a)}}function Vc(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function fo(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ox(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Lm(e,t){let n=ox(e);return t?n.map((r,a)=>a===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Am(e,t,n,r){r===void 0&&(r=!1);let a;typeof e=="string"?a=ns(e):(a=qs({},e),Je(!a.pathname||!a.pathname.includes("?"),fo("?","pathname","search",a)),Je(!a.pathname||!a.pathname.includes("#"),fo("#","pathname","hash",a)),Je(!a.search||!a.search.includes("#"),fo("#","search","hash",a)));let l=e===""||a.pathname==="",o=l?"/":a.pathname,i;if(o==null)i=n;else{let m=t.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;a.pathname=g.join("/")}i=m>=0?t[m]:"/"}let c=lx(a,i),d=o&&o!=="/"&&o.endsWith("/"),h=(l||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}const Mn=e=>e.join("/").replace(/\/\/+/g,"/"),ix=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ux=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,cx=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function dx(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const $m=["post","put","patch","delete"];new Set($m);const fx=["get",...$m];new Set(fx);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qs(){return Qs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qs.apply(this,arguments)}const Ll=u.createContext(null),Rm=u.createContext(null),Vn=u.createContext(null),Al=u.createContext(null),Kn=u.createContext({outlet:null,matches:[],isDataRoute:!1}),Um=u.createContext(null);function mx(e,t){let{relative:n}=t===void 0?{}:t;ta()||Je(!1);let{basename:r,navigator:a}=u.useContext(Vn),{hash:l,pathname:o,search:i}=Rl(e,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:Mn([r,o])),a.createHref({pathname:c,search:i,hash:l})}function ta(){return u.useContext(Al)!=null}function rs(){return ta()||Je(!1),u.useContext(Al).location}function Im(e){u.useContext(Vn).static||u.useLayoutEffect(e)}function Xt(){let{isDataRoute:e}=u.useContext(Kn);return e?Cx():px()}function px(){ta()||Je(!1);let e=u.useContext(Ll),{basename:t,future:n,navigator:r}=u.useContext(Vn),{matches:a}=u.useContext(Kn),{pathname:l}=rs(),o=JSON.stringify(Lm(a,n.v7_relativeSplatPath)),i=u.useRef(!1);return Im(()=>{i.current=!0}),u.useCallback(function(d,h){if(h===void 0&&(h={}),!i.current)return;if(typeof d=="number"){r.go(d);return}let m=Am(d,JSON.parse(o),l,h.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Mn([t,m.pathname])),(h.replace?r.replace:r.push)(m,h.state,h)},[t,r,o,l,e])}function $l(){let{matches:e}=u.useContext(Kn),t=e[e.length-1];return t?t.params:{}}function Rl(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=u.useContext(Vn),{matches:a}=u.useContext(Kn),{pathname:l}=rs(),o=JSON.stringify(Lm(a,r.v7_relativeSplatPath));return u.useMemo(()=>Am(e,JSON.parse(o),l,n==="path"),[e,o,l,n])}function hx(e,t){return xx(e,t)}function xx(e,t,n,r){ta()||Je(!1);let{navigator:a}=u.useContext(Vn),{matches:l}=u.useContext(Kn),o=l[l.length-1],i=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=rs(),h;if(t){var m;let S=typeof t=="string"?ns(t):t;c==="/"||(m=S.pathname)!=null&&m.startsWith(c)||Je(!1),h=S}else h=d;let g=h.pathname||"/",v=g;if(c!=="/"){let S=c.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(S.length).join("/")}let j=G0(e,{pathname:v}),y=bx(j&&j.map(S=>Object.assign({},S,{params:Object.assign({},i,S.params),pathname:Mn([c,a.encodeLocation?a.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?c:Mn([c,a.encodeLocation?a.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),l,n,r);return t&&y?u.createElement(Al.Provider,{value:{location:Qs({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Ln.Pop}},y):y}function gx(){let e=kx(),t=dx(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},t),n?u.createElement("pre",{style:a},n):null,null)}const yx=u.createElement(gx,null);class vx extends u.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?u.createElement(Kn.Provider,{value:this.props.routeContext},u.createElement(Um.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function wx(e){let{routeContext:t,match:n,children:r}=e,a=u.useContext(Ll);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),u.createElement(Kn.Provider,{value:t},r)}function bx(e,t,n,r){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var l;if(!n)return null;if(n.errors)e=n.matches;else if((l=r)!=null&&l.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,i=(a=n)==null?void 0:a.errors;if(i!=null){let h=o.findIndex(m=>m.route.id&&(i==null?void 0:i[m.route.id])!==void 0);h>=0||Je(!1),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let m=o[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=h),m.route.id){let{loaderData:g,errors:v}=n,j=m.route.loader&&g[m.route.id]===void 0&&(!v||v[m.route.id]===void 0);if(m.route.lazy||j){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,m,g)=>{let v,j=!1,y=null,S=null;n&&(v=i&&m.route.id?i[m.route.id]:void 0,y=m.route.errorElement||yx,c&&(d<0&&g===0?(Ex("route-fallback"),j=!0,S=null):d===g&&(j=!0,S=m.route.hydrateFallbackElement||null)));let f=t.concat(o.slice(0,g+1)),p=()=>{let x;return v?x=y:j?x=S:m.route.Component?x=u.createElement(m.route.Component,null):m.route.element?x=m.route.element:x=h,u.createElement(wx,{match:m,routeContext:{outlet:h,matches:f,isDataRoute:n!=null},children:x})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?u.createElement(vx,{location:n.location,revalidation:n.revalidation,component:y,error:v,children:p(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):p()},null)}var Dm=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Dm||{}),Om=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Om||{});function jx(e){let t=u.useContext(Ll);return t||Je(!1),t}function Nx(e){let t=u.useContext(Rm);return t||Je(!1),t}function Sx(e){let t=u.useContext(Kn);return t||Je(!1),t}function _m(e){let t=Sx(),n=t.matches[t.matches.length-1];return n.route.id||Je(!1),n.route.id}function kx(){var e;let t=u.useContext(Um),n=Nx(),r=_m();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function Cx(){let{router:e}=jx(Dm.UseNavigateStable),t=_m(Om.UseNavigateStable),n=u.useRef(!1);return Im(()=>{n.current=!0}),u.useCallback(function(a,l){l===void 0&&(l={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Qs({fromRouteId:t},l)))},[e,t])}const Kc={};function Ex(e,t,n){Kc[e]||(Kc[e]=!0)}function Px(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function He(e){Je(!1)}function Tx(e){let{basename:t="/",children:n=null,location:r,navigationType:a=Ln.Pop,navigator:l,static:o=!1,future:i}=e;ta()&&Je(!1);let c=t.replace(/^\/*/,"/"),d=u.useMemo(()=>({basename:c,navigator:l,static:o,future:Qs({v7_relativeSplatPath:!1},i)}),[c,i,l,o]);typeof r=="string"&&(r=ns(r));let{pathname:h="/",search:m="",hash:g="",state:v=null,key:j="default"}=r,y=u.useMemo(()=>{let S=Zr(h,c);return S==null?null:{location:{pathname:S,search:m,hash:g,state:v,key:j},navigationType:a}},[c,h,m,g,v,j,a]);return y==null?null:u.createElement(Vn.Provider,{value:d},u.createElement(Al.Provider,{children:n,value:y}))}function Lx(e){let{children:t,location:n}=e;return hx(bi(t),n)}new Promise(()=>{});function bi(e,t){t===void 0&&(t=[]);let n=[];return u.Children.forEach(e,(r,a)=>{if(!u.isValidElement(r))return;let l=[...t,a];if(r.type===u.Fragment){n.push.apply(n,bi(r.props.children,l));return}r.type!==He&&Je(!1),!r.props.index||!r.props.children||Je(!1);let o={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=bi(r.props.children,l)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ul(){return ul=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ul.apply(this,arguments)}function Mm(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,l;for(l=0;l<r.length;l++)a=r[l],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function Ax(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function $x(e,t){return e.button===0&&(!t||t==="_self")&&!Ax(e)}function ji(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(a=>[n,a]):[[n,r]])},[]))}function Rx(e,t){let n=ji(e);return t&&t.forEach((r,a)=>{n.has(a)||t.getAll(a).forEach(l=>{n.append(a,l)})}),n}const Ux=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Ix=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Dx="6";try{window.__reactRouterVersion=Dx}catch{}const Ox=u.createContext({isTransitioning:!1}),_x="startTransition",qc=Gr[_x];function Mx(e){let{basename:t,children:n,future:r,window:a}=e,l=u.useRef();l.current==null&&(l.current=B0({window:a,v5Compat:!0}));let o=l.current,[i,c]=u.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},h=u.useCallback(m=>{d&&qc?qc(()=>c(m)):c(m)},[c,d]);return u.useLayoutEffect(()=>o.listen(h),[o,h]),u.useEffect(()=>Px(r),[r]),u.createElement(Tx,{basename:t,children:n,location:i.location,navigationType:i.action,navigator:o,future:r})}const Fx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Bx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ge=u.forwardRef(function(t,n){let{onClick:r,relative:a,reloadDocument:l,replace:o,state:i,target:c,to:d,preventScrollReset:h,viewTransition:m}=t,g=Mm(t,Ux),{basename:v}=u.useContext(Vn),j,y=!1;if(typeof d=="string"&&Bx.test(d)&&(j=d,Fx))try{let x=new URL(window.location.href),N=d.startsWith("//")?new URL(x.protocol+d):new URL(d),E=Zr(N.pathname,v);N.origin===x.origin&&E!=null?d=E+N.search+N.hash:y=!0}catch{}let S=mx(d,{relative:a}),f=Wx(d,{replace:o,state:i,target:c,preventScrollReset:h,relative:a,viewTransition:m});function p(x){r&&r(x),x.defaultPrevented||f(x)}return u.createElement("a",ul({},g,{href:j||S,onClick:y||l?r:p,ref:n,target:c}))}),wn=u.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:a=!1,className:l="",end:o=!1,style:i,to:c,viewTransition:d,children:h}=t,m=Mm(t,Ix),g=Rl(c,{relative:m.relative}),v=rs(),j=u.useContext(Rm),{navigator:y,basename:S}=u.useContext(Vn),f=j!=null&&Gx(g)&&d===!0,p=y.encodeLocation?y.encodeLocation(g).pathname:g.pathname,x=v.pathname,N=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;a||(x=x.toLowerCase(),N=N?N.toLowerCase():null,p=p.toLowerCase()),N&&S&&(N=Zr(N,S)||N);const E=p!=="/"&&p.endsWith("/")?p.length-1:p.length;let P=x===p||!o&&x.startsWith(p)&&x.charAt(E)==="/",R=N!=null&&(N===p||!o&&N.startsWith(p)&&N.charAt(p.length)==="/"),I={isActive:P,isPending:R,isTransitioning:f},V=P?r:void 0,G;typeof l=="function"?G=l(I):G=[l,P?"active":null,R?"pending":null,f?"transitioning":null].filter(Boolean).join(" ");let te=typeof i=="function"?i(I):i;return u.createElement(ge,ul({},m,{"aria-current":V,className:G,ref:n,style:te,to:c,viewTransition:d}),typeof h=="function"?h(I):h)});var Ni;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ni||(Ni={}));var Qc;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Qc||(Qc={}));function zx(e){let t=u.useContext(Ll);return t||Je(!1),t}function Wx(e,t){let{target:n,replace:r,state:a,preventScrollReset:l,relative:o,viewTransition:i}=t===void 0?{}:t,c=Xt(),d=rs(),h=Rl(e,{relative:o});return u.useCallback(m=>{if($x(m,n)){m.preventDefault();let g=r!==void 0?r:il(d)===il(h);c(e,{replace:g,state:a,preventScrollReset:l,relative:o,viewTransition:i})}},[d,c,h,r,a,n,e,l,o,i])}function qn(e){let t=u.useRef(ji(e)),n=u.useRef(!1),r=rs(),a=u.useMemo(()=>Rx(r.search,n.current?null:t.current),[r.search]),l=Xt(),o=u.useCallback((i,c)=>{const d=ji(typeof i=="function"?i(a):i);n.current=!0,l("?"+d,c)},[l,a]);return[a,o]}function Gx(e,t){t===void 0&&(t={});let n=u.useContext(Ox);n==null&&Je(!1);let{basename:r}=zx(Ni.useViewTransitionState),a=Rl(e,{relative:t.relative});if(!n.isTransitioning)return!1;let l=Zr(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Zr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return wi(a.pathname,o)!=null||wi(a.pathname,l)!=null}function Hx({title:e,titleId:t,...n},r){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?u.createElement("title",{id:t},e):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const it=u.forwardRef(Hx);function Vx({title:e,titleId:t,...n},r){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?u.createElement("title",{id:t},e):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const Pu=u.forwardRef(Vx);function Kx({title:e,titleId:t,...n},r){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?u.createElement("title",{id:t},e):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"}))}const qx=u.forwardRef(Kx);function Qx({title:e,titleId:t,...n},r){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?u.createElement("title",{id:t},e):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const bn=u.forwardRef(Qx);function Yx({title:e,titleId:t,...n},r){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?u.createElement("title",{id:t},e):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const jn=u.forwardRef(Yx);function Jx({title:e,titleId:t,...n},r){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?u.createElement("title",{id:t},e):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))}const Tu=u.forwardRef(Jx);function Zx({title:e,titleId:t,...n},r){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?u.createElement("title",{id:t},e):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const Fm=u.forwardRef(Zx);var Xx=Object.defineProperty,eg=(e,t,n)=>t in e?Xx(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mo=(e,t,n)=>(eg(e,typeof t!="symbol"?t+"":t,n),n);let tg=class{constructor(){mo(this,"current",this.detect()),mo(this,"handoffState","pending"),mo(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},un=new tg,pn=(e,t)=>{un.isServer?u.useEffect(e,t):u.useLayoutEffect(e,t)};function Ul(e){let t=u.useRef(e);return pn(()=>{t.current=e},[e]),t}let xt=function(e){let t=Ul(e);return Ae.useCallback((...n)=>t.current(...n),[t])};function Il(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Dl(){let e=[],t={addEventListener(n,r,a,l){return n.addEventListener(r,a,l),t.add(()=>n.removeEventListener(r,a,l))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return Il(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,a){let l=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:a}),this.add(()=>{Object.assign(n.style,{[r]:l})})},group(n){let r=Dl();return n(r),this.add(()=>r.dispose())},add(n){return e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let a of e.splice(r,1))a()}},dispose(){for(let n of e.splice(0))n()}};return t}function ng(){let[e]=u.useState(Dl);return u.useEffect(()=>()=>e.dispose(),[e]),e}function rg(){let e=typeof document>"u";return"useSyncExternalStore"in Gr?(t=>t.useSyncExternalStore)(Gr)(()=>()=>{},()=>!1,()=>!e):!1}function Ol(){let e=rg(),[t,n]=u.useState(un.isHandoffComplete);return t&&un.isHandoffComplete===!1&&n(!1),u.useEffect(()=>{t!==!0&&n(!0)},[t]),u.useEffect(()=>un.handoff(),[]),e?!1:t}var Yc;let ss=(Yc=Ae.useId)!=null?Yc:function(){let e=Ol(),[t,n]=Ae.useState(e?()=>un.nextId():null);return pn(()=>{t===null&&n(un.nextId())},[t]),t!=null?""+t:void 0};function zn(e,t,...n){if(e in t){let a=t[e];return typeof a=="function"?a(...n):a}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(a=>`"${a}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,zn),r}function Bm(e){return un.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}let Si=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var tr=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(tr||{}),zm=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(zm||{}),sg=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(sg||{});function ag(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Si)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var Wm=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(Wm||{});function lg(e,t=0){var n;return e===((n=Bm(e))==null?void 0:n.body)?!1:zn(t,{0(){return e.matches(Si)},1(){let r=e;for(;r!==null;){if(r.matches(Si))return!0;r=r.parentElement}return!1}})}var og=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(og||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function ur(e){e==null||e.focus({preventScroll:!0})}let ig=["textarea","input"].join(",");function ug(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,ig))!=null?n:!1}function cg(e,t=n=>n){return e.slice().sort((n,r)=>{let a=t(n),l=t(r);if(a===null||l===null)return 0;let o=a.compareDocumentPosition(l);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Oa(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:a=[]}={}){let l=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,o=Array.isArray(e)?n?cg(e):e:ag(e);a.length>0&&o.length>1&&(o=o.filter(v=>!a.includes(v))),r=r??l.activeElement;let i=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,o.indexOf(r))-1;if(t&4)return Math.max(0,o.indexOf(r))+1;if(t&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=t&32?{preventScroll:!0}:{},h=0,m=o.length,g;do{if(h>=m||h+m<=0)return 0;let v=c+h;if(t&16)v=(v+m)%m;else{if(v<0)return 3;if(v>=m)return 1}g=o[v],g==null||g.focus(d),h+=i}while(g!==l.activeElement);return t&6&&ug(g)&&g.select(),2}function Gm(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function dg(){return/Android/gi.test(window.navigator.userAgent)}function fg(){return Gm()||dg()}function ba(e,t,n){let r=Ul(t);u.useEffect(()=>{function a(l){r.current(l)}return document.addEventListener(e,a,n),()=>document.removeEventListener(e,a,n)},[e,n])}function Hm(e,t,n){let r=Ul(t);u.useEffect(()=>{function a(l){r.current(l)}return window.addEventListener(e,a,n),()=>window.removeEventListener(e,a,n)},[e,n])}function mg(e,t,n=!0){let r=u.useRef(!1);u.useEffect(()=>{requestAnimationFrame(()=>{r.current=n})},[n]);function a(o,i){if(!r.current||o.defaultPrevented)return;let c=i(o);if(c===null||!c.getRootNode().contains(c)||!c.isConnected)return;let d=function h(m){return typeof m=="function"?h(m()):Array.isArray(m)||m instanceof Set?m:[m]}(e);for(let h of d){if(h===null)continue;let m=h instanceof HTMLElement?h:h.current;if(m!=null&&m.contains(c)||o.composed&&o.composedPath().includes(m))return}return!lg(c,Wm.Loose)&&c.tabIndex!==-1&&o.preventDefault(),t(o,c)}let l=u.useRef(null);ba("pointerdown",o=>{var i,c;r.current&&(l.current=((c=(i=o.composedPath)==null?void 0:i.call(o))==null?void 0:c[0])||o.target)},!0),ba("mousedown",o=>{var i,c;r.current&&(l.current=((c=(i=o.composedPath)==null?void 0:i.call(o))==null?void 0:c[0])||o.target)},!0),ba("click",o=>{fg()||l.current&&(a(o,()=>l.current),l.current=null)},!0),ba("touchend",o=>a(o,()=>o.target instanceof HTMLElement?o.target:null),!0),Hm("blur",o=>a(o,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function na(...e){return u.useMemo(()=>Bm(...e),[...e])}let Vm=Symbol();function pg(e,t=!0){return Object.assign(e,{[Vm]:t})}function xn(...e){let t=u.useRef(e);u.useEffect(()=>{t.current=e},[e]);let n=xt(r=>{for(let a of t.current)a!=null&&(typeof a=="function"?a(r):a.current=r)});return e.every(r=>r==null||(r==null?void 0:r[Vm]))?void 0:n}function Lu(e,t){let n=u.useRef([]),r=xt(e);u.useEffect(()=>{let a=[...n.current];for(let[l,o]of t.entries())if(n.current[l]!==o){let i=r(t,a);return n.current=t,i}},[r,...t])}function Jc(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}var ki=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(ki||{}),hg=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(hg||{});function en({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:a,visible:l=!0,name:o,mergeRefs:i}){i=i??xg;let c=Km(t,e);if(l)return ja(c,n,r,o,i);let d=a??0;if(d&2){let{static:h=!1,...m}=c;if(h)return ja(m,n,r,o,i)}if(d&1){let{unmount:h=!0,...m}=c;return zn(h?0:1,{0(){return null},1(){return ja({...m,hidden:!0,style:{display:"none"}},n,r,o,i)}})}return ja(c,n,r,o,i)}function ja(e,t={},n,r,a){let{as:l=n,children:o,refName:i="ref",...c}=po(e,["unmount","static"]),d=e.ref!==void 0?{[i]:e.ref}:{},h=typeof o=="function"?o(t):o;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t));let m={};if(t){let g=!1,v=[];for(let[j,y]of Object.entries(t))typeof y=="boolean"&&(g=!0),y===!0&&v.push(j);g&&(m["data-headlessui-state"]=v.join(" "))}if(l===u.Fragment&&Object.keys(Zc(c)).length>0){if(!u.isValidElement(h)||Array.isArray(h)&&h.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(c).map(y=>`  - ${y}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(y=>`  - ${y}`).join(`
`)].join(`
`));let g=h.props,v=typeof(g==null?void 0:g.className)=="function"?(...y)=>Jc(g==null?void 0:g.className(...y),c.className):Jc(g==null?void 0:g.className,c.className),j=v?{className:v}:{};return u.cloneElement(h,Object.assign({},Km(h.props,Zc(po(c,["ref"]))),m,d,{ref:a(h.ref,d.ref)},j))}return u.createElement(l,Object.assign({},po(c,["ref"]),l!==u.Fragment&&d,l!==u.Fragment&&m),h)}function xg(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function Km(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let a in r)a.startsWith("on")&&typeof r[a]=="function"?(n[a]!=null||(n[a]=[]),n[a].push(r[a])):t[a]=r[a];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(n).map(r=>[r,void 0])));for(let r in n)Object.assign(t,{[r](a,...l){let o=n[r];for(let i of o){if((a instanceof Event||(a==null?void 0:a.nativeEvent)instanceof Event)&&a.defaultPrevented)return;i(a,...l)}}});return t}function tn(e){var t;return Object.assign(u.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function Zc(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function po(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}let gg="div";var cl=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(cl||{});function yg(e,t){var n;let{features:r=1,...a}=e,l={ref:t,"aria-hidden":(r&2)===2?!0:(n=a["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return en({ourProps:l,theirProps:a,slot:{},defaultTag:gg,name:"Hidden"})}let Ci=tn(yg),qm=u.createContext(null);qm.displayName="OpenClosedContext";var ws=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(ws||{});function vg(){return u.useContext(qm)}function wg(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let En=[];wg(()=>{function e(t){t.target instanceof HTMLElement&&t.target!==document.body&&En[0]!==t.target&&(En.unshift(t.target),En=En.filter(n=>n!=null&&n.isConnected),En.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function bg(e){let t=e.parentElement,n=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(n=t),t=t.parentElement;let r=(t==null?void 0:t.getAttribute("disabled"))==="";return r&&jg(n)?!1:r}function jg(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}var Qm=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(Qm||{});function Ym(e,t,n,r){let a=Ul(n);u.useEffect(()=>{e=e??window;function l(o){a.current(o)}return e.addEventListener(t,l,r),()=>e.removeEventListener(t,l,r)},[e,t,r])}function Jm(){let e=u.useRef(!1);return pn(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function Zm(e){let t=xt(e),n=u.useRef(!1);u.useEffect(()=>(n.current=!1,()=>{n.current=!0,Il(()=>{n.current&&t()})}),[t])}var bs=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(bs||{});function Ng(){let e=u.useRef(0);return Hm("keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function Xm(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)n.current instanceof HTMLElement&&t.add(n.current);return t}let Sg="div";var ep=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(ep||{});function kg(e,t){let n=u.useRef(null),r=xn(n,t),{initialFocus:a,containers:l,features:o=30,...i}=e;Ol()||(o=1);let c=na(n);Pg({ownerDocument:c},!!(o&16));let d=Tg({ownerDocument:c,container:n,initialFocus:a},!!(o&2));Lg({ownerDocument:c,container:n,containers:l,previousActiveElement:d},!!(o&8));let h=Ng(),m=xt(y=>{let S=n.current;S&&(f=>f())(()=>{zn(h.current,{[bs.Forwards]:()=>{Oa(S,tr.First,{skipElements:[y.relatedTarget]})},[bs.Backwards]:()=>{Oa(S,tr.Last,{skipElements:[y.relatedTarget]})}})})}),g=ng(),v=u.useRef(!1),j={ref:r,onKeyDown(y){y.key=="Tab"&&(v.current=!0,g.requestAnimationFrame(()=>{v.current=!1}))},onBlur(y){let S=Xm(l);n.current instanceof HTMLElement&&S.add(n.current);let f=y.relatedTarget;f instanceof HTMLElement&&f.dataset.headlessuiFocusGuard!=="true"&&(tp(S,f)||(v.current?Oa(n.current,zn(h.current,{[bs.Forwards]:()=>tr.Next,[bs.Backwards]:()=>tr.Previous})|tr.WrapAround,{relativeTo:y.target}):y.target instanceof HTMLElement&&ur(y.target)))}};return Ae.createElement(Ae.Fragment,null,!!(o&4)&&Ae.createElement(Ci,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:m,features:cl.Focusable}),en({ourProps:j,theirProps:i,defaultTag:Sg,name:"FocusTrap"}),!!(o&4)&&Ae.createElement(Ci,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:m,features:cl.Focusable}))}let Cg=tn(kg),ms=Object.assign(Cg,{features:ep});function Eg(e=!0){let t=u.useRef(En.slice());return Lu(([n],[r])=>{r===!0&&n===!1&&Il(()=>{t.current.splice(0)}),r===!1&&n===!0&&(t.current=En.slice())},[e,En,t]),xt(()=>{var n;return(n=t.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function Pg({ownerDocument:e},t){let n=Eg(t);Lu(()=>{t||(e==null?void 0:e.activeElement)===(e==null?void 0:e.body)&&ur(n())},[t]),Zm(()=>{t&&ur(n())})}function Tg({ownerDocument:e,container:t,initialFocus:n},r){let a=u.useRef(null),l=Jm();return Lu(()=>{if(!r)return;let o=t.current;o&&Il(()=>{if(!l.current)return;let i=e==null?void 0:e.activeElement;if(n!=null&&n.current){if((n==null?void 0:n.current)===i){a.current=i;return}}else if(o.contains(i)){a.current=i;return}n!=null&&n.current?ur(n.current):Oa(o,tr.First)===zm.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),a.current=e==null?void 0:e.activeElement})},[r]),a}function Lg({ownerDocument:e,container:t,containers:n,previousActiveElement:r},a){let l=Jm();Ym(e==null?void 0:e.defaultView,"focus",o=>{if(!a||!l.current)return;let i=Xm(n);t.current instanceof HTMLElement&&i.add(t.current);let c=r.current;if(!c)return;let d=o.target;d&&d instanceof HTMLElement?tp(i,d)?(r.current=d,ur(d)):(o.preventDefault(),o.stopPropagation(),ur(c)):ur(r.current)},!0)}function tp(e,t){for(let n of e)if(n.contains(t))return!0;return!1}let np=u.createContext(!1);function Ag(){return u.useContext(np)}function Ei(e){return Ae.createElement(np.Provider,{value:e.force},e.children)}function $g(e){let t=Ag(),n=u.useContext(rp),r=na(e),[a,l]=u.useState(()=>{if(!t&&n!==null||un.isServer)return null;let o=r==null?void 0:r.getElementById("headlessui-portal-root");if(o)return o;if(r===null)return null;let i=r.createElement("div");return i.setAttribute("id","headlessui-portal-root"),r.body.appendChild(i)});return u.useEffect(()=>{a!==null&&(r!=null&&r.body.contains(a)||r==null||r.body.appendChild(a))},[a,r]),u.useEffect(()=>{t||n!==null&&l(n.current)},[n,l,t]),a}let Rg=u.Fragment;function Ug(e,t){let n=e,r=u.useRef(null),a=xn(pg(h=>{r.current=h}),t),l=na(r),o=$g(r),[i]=u.useState(()=>{var h;return un.isServer?null:(h=l==null?void 0:l.createElement("div"))!=null?h:null}),c=u.useContext(Pi),d=Ol();return pn(()=>{!o||!i||o.contains(i)||(i.setAttribute("data-headlessui-portal",""),o.appendChild(i))},[o,i]),pn(()=>{if(i&&c)return c.register(i)},[c,i]),Zm(()=>{var h;!o||!i||(i instanceof Node&&o.contains(i)&&o.removeChild(i),o.childNodes.length<=0&&((h=o.parentElement)==null||h.removeChild(o)))}),d?!o||!i?null:Em.createPortal(en({ourProps:{ref:a},theirProps:n,defaultTag:Rg,name:"Portal"}),i):null}let Ig=u.Fragment,rp=u.createContext(null);function Dg(e,t){let{target:n,...r}=e,a={ref:xn(t)};return Ae.createElement(rp.Provider,{value:n},en({ourProps:a,theirProps:r,defaultTag:Ig,name:"Popover.Group"}))}let Pi=u.createContext(null);function Og(){let e=u.useContext(Pi),t=u.useRef([]),n=xt(l=>(t.current.push(l),e&&e.register(l),()=>r(l))),r=xt(l=>{let o=t.current.indexOf(l);o!==-1&&t.current.splice(o,1),e&&e.unregister(l)}),a=u.useMemo(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,u.useMemo(()=>function({children:l}){return Ae.createElement(Pi.Provider,{value:a},l)},[a])]}let _g=tn(Ug),Mg=tn(Dg),Ti=Object.assign(_g,{Group:Mg});function Fg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}const Bg=typeof Object.is=="function"?Object.is:Fg,{useState:zg,useEffect:Wg,useLayoutEffect:Gg,useDebugValue:Hg}=Gr;function Vg(e,t,n){const r=t(),[{inst:a},l]=zg({inst:{value:r,getSnapshot:t}});return Gg(()=>{a.value=r,a.getSnapshot=t,ho(a)&&l({inst:a})},[e,r,t]),Wg(()=>(ho(a)&&l({inst:a}),e(()=>{ho(a)&&l({inst:a})})),[e]),Hg(r),r}function ho(e){const t=e.getSnapshot,n=e.value;try{const r=t();return!Bg(n,r)}catch{return!0}}function Kg(e,t,n){return t()}const qg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Qg=!qg,Yg=Qg?Kg:Vg,Jg="useSyncExternalStore"in Gr?(e=>e.useSyncExternalStore)(Gr):Yg;function Zg(e){return Jg(e.subscribe,e.getSnapshot,e.getSnapshot)}function Xg(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(a){return r.add(a),()=>r.delete(a)},dispatch(a,...l){let o=t[a].call(n,...l);o&&(n=o,r.forEach(i=>i()))}}}function ey(){let e;return{before({doc:t}){var n;let r=t.documentElement;e=((n=t.defaultView)!=null?n:window).innerWidth-r.clientWidth},after({doc:t,d:n}){let r=t.documentElement,a=r.clientWidth-r.offsetWidth,l=e-a;n.style(r,"paddingRight",`${l}px`)}}}function ty(){return Gm()?{before({doc:e,d:t,meta:n}){function r(a){return n.containers.flatMap(l=>l()).some(l=>l.contains(a))}t.microTask(()=>{var a;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let i=Dl();i.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>i.dispose()))}let l=(a=window.scrollY)!=null?a:window.pageYOffset,o=null;t.addEventListener(e,"click",i=>{if(i.target instanceof HTMLElement)try{let c=i.target.closest("a");if(!c)return;let{hash:d}=new URL(c.href),h=e.querySelector(d);h&&!r(h)&&(o=h)}catch{}},!0),t.addEventListener(e,"touchstart",i=>{if(i.target instanceof HTMLElement)if(r(i.target)){let c=i.target;for(;c.parentElement&&r(c.parentElement);)c=c.parentElement;t.style(c,"overscrollBehavior","contain")}else t.style(i.target,"touchAction","none")}),t.addEventListener(e,"touchmove",i=>{if(i.target instanceof HTMLElement)if(r(i.target)){let c=i.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&i.preventDefault()}else i.preventDefault()},{passive:!1}),t.add(()=>{var i;let c=(i=window.scrollY)!=null?i:window.pageYOffset;l!==c&&window.scrollTo(0,l),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function ny(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function ry(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let ar=Xg(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:Dl(),meta:new Set};return r.count++,r.meta.add(t),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let r={doc:e,d:t,meta:ry(n)},a=[ty(),ey(),ny()];a.forEach(({before:l})=>l==null?void 0:l(r)),a.forEach(({after:l})=>l==null?void 0:l(r))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});ar.subscribe(()=>{let e=ar.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",a=n.count!==0;(a&&!r||!a&&r)&&ar.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&ar.dispatch("TEARDOWN",n)}});function sy(e,t,n){let r=Zg(ar),a=e?r.get(e):void 0,l=a?a.count>0:!1;return pn(()=>{if(!(!e||!t))return ar.dispatch("PUSH",e,n),()=>ar.dispatch("POP",e,n)},[t,e]),l}let xo=new Map,ps=new Map;function Xc(e,t=!0){pn(()=>{var n;if(!t)return;let r=typeof e=="function"?e():e.current;if(!r)return;function a(){var o;if(!r)return;let i=(o=ps.get(r))!=null?o:1;if(i===1?ps.delete(r):ps.set(r,i-1),i!==1)return;let c=xo.get(r);c&&(c["aria-hidden"]===null?r.removeAttribute("aria-hidden"):r.setAttribute("aria-hidden",c["aria-hidden"]),r.inert=c.inert,xo.delete(r))}let l=(n=ps.get(r))!=null?n:0;return ps.set(r,l+1),l!==0||(xo.set(r,{"aria-hidden":r.getAttribute("aria-hidden"),inert:r.inert}),r.setAttribute("aria-hidden","true"),r.inert=!0),a},[e,t])}function ay({defaultContainers:e=[],portals:t,mainTreeNodeRef:n}={}){var r;let a=u.useRef((r=n==null?void 0:n.current)!=null?r:null),l=na(a),o=xt(()=>{var i,c,d;let h=[];for(let m of e)m!==null&&(m instanceof HTMLElement?h.push(m):"current"in m&&m.current instanceof HTMLElement&&h.push(m.current));if(t!=null&&t.current)for(let m of t.current)h.push(m);for(let m of(i=l==null?void 0:l.querySelectorAll("html > *, body > *"))!=null?i:[])m!==document.body&&m!==document.head&&m instanceof HTMLElement&&m.id!=="headlessui-portal-root"&&(m.contains(a.current)||m.contains((d=(c=a.current)==null?void 0:c.getRootNode())==null?void 0:d.host)||h.some(g=>m.contains(g))||h.push(m));return h});return{resolveContainers:o,contains:xt(i=>o().some(c=>c.contains(i))),mainTreeNodeRef:a,MainTreeNode:u.useMemo(()=>function(){return n!=null?null:Ae.createElement(Ci,{features:cl.Hidden,ref:a})},[a,n])}}let Au=u.createContext(()=>{});Au.displayName="StackContext";var Li=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(Li||{});function ly(){return u.useContext(Au)}function oy({children:e,onUpdate:t,type:n,element:r,enabled:a}){let l=ly(),o=xt((...i)=>{t==null||t(...i),l(...i)});return pn(()=>{let i=a===void 0||a===!0;return i&&o(0,n,r),()=>{i&&o(1,n,r)}},[o,n,r,a]),Ae.createElement(Au.Provider,{value:o},e)}let sp=u.createContext(null);function ap(){let e=u.useContext(sp);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,ap),t}return e}function iy(){let[e,t]=u.useState([]);return[e.length>0?e.join(" "):void 0,u.useMemo(()=>function(n){let r=xt(l=>(t(o=>[...o,l]),()=>t(o=>{let i=o.slice(),c=i.indexOf(l);return c!==-1&&i.splice(c,1),i}))),a=u.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props}),[r,n.slot,n.name,n.props]);return Ae.createElement(sp.Provider,{value:a},n.children)},[t])]}let uy="p";function cy(e,t){let n=ss(),{id:r=`headlessui-description-${n}`,...a}=e,l=ap(),o=xn(t);pn(()=>l.register(r),[r,l.register]);let i={ref:o,...l.props,id:r};return en({ourProps:i,theirProps:a,slot:l.slot||{},defaultTag:uy,name:l.name||"Description"})}let dy=tn(cy),fy=Object.assign(dy,{});var my=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(my||{}),py=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(py||{});let hy={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},dl=u.createContext(null);dl.displayName="DialogContext";function ra(e){let t=u.useContext(dl);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ra),n}return t}function xy(e,t,n=()=>[document.body]){sy(e,t,r=>{var a;return{containers:[...(a=r.containers)!=null?a:[],n]}})}function gy(e,t){return zn(t.type,hy,e,t)}let yy="div",vy=ki.RenderStrategy|ki.Static;function wy(e,t){let n=ss(),{id:r=`headlessui-dialog-${n}`,open:a,onClose:l,initialFocus:o,role:i="dialog",__demoMode:c=!1,...d}=e,[h,m]=u.useState(0),g=u.useRef(!1);i=function(){return i==="dialog"||i==="alertdialog"?i:(g.current||(g.current=!0,console.warn(`Invalid role [${i}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let v=vg();a===void 0&&v!==null&&(a=(v&ws.Open)===ws.Open);let j=u.useRef(null),y=xn(j,t),S=na(j),f=e.hasOwnProperty("open")||v!==null,p=e.hasOwnProperty("onClose");if(!f&&!p)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!f)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!p)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(typeof a!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${a}`);if(typeof l!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${l}`);let x=a?0:1,[N,E]=u.useReducer(gy,{titleId:null,descriptionId:null,panelRef:u.createRef()}),P=xt(()=>l(!1)),R=xt(O=>E({type:0,id:O})),I=Ol()?c?!1:x===0:!1,V=h>1,G=u.useContext(dl)!==null,[te,ye]=Og(),de={get current(){var O;return(O=N.panelRef.current)!=null?O:j.current}},{resolveContainers:_,mainTreeNodeRef:$,MainTreeNode:z}=ay({portals:te,defaultContainers:[de]}),Q=V?"parent":"leaf",w=v!==null?(v&ws.Closing)===ws.Closing:!1,b=G||w?!1:I,C=u.useCallback(()=>{var O,Y;return(Y=Array.from((O=S==null?void 0:S.querySelectorAll("body > *"))!=null?O:[]).find(X=>X.id==="headlessui-portal-root"?!1:X.contains($.current)&&X instanceof HTMLElement))!=null?Y:null},[$]);Xc(C,b);let A=V?!0:I,T=u.useCallback(()=>{var O,Y;return(Y=Array.from((O=S==null?void 0:S.querySelectorAll("[data-headlessui-portal]"))!=null?O:[]).find(X=>X.contains($.current)&&X instanceof HTMLElement))!=null?Y:null},[$]);Xc(T,A),mg(_,O=>{O.preventDefault(),P()},!(!I||V));let se=!(V||x!==0);Ym(S==null?void 0:S.defaultView,"keydown",O=>{se&&(O.defaultPrevented||O.key===Qm.Escape&&(O.preventDefault(),O.stopPropagation(),P()))}),xy(S,!(w||x!==0||G),_),u.useEffect(()=>{if(x!==0||!j.current)return;let O=new ResizeObserver(Y=>{for(let X of Y){let ae=X.target.getBoundingClientRect();ae.x===0&&ae.y===0&&ae.width===0&&ae.height===0&&P()}});return O.observe(j.current),()=>O.disconnect()},[x,j,P]);let[J,L]=iy(),K=u.useMemo(()=>[{dialogState:x,close:P,setTitleId:R},N],[x,N,P,R]),le=u.useMemo(()=>({open:x===0}),[x]),be={ref:y,id:r,role:i,"aria-modal":x===0?!0:void 0,"aria-labelledby":N.titleId,"aria-describedby":J};return Ae.createElement(oy,{type:"Dialog",enabled:x===0,element:j,onUpdate:xt((O,Y)=>{Y==="Dialog"&&zn(O,{[Li.Add]:()=>m(X=>X+1),[Li.Remove]:()=>m(X=>X-1)})})},Ae.createElement(Ei,{force:!0},Ae.createElement(Ti,null,Ae.createElement(dl.Provider,{value:K},Ae.createElement(Ti.Group,{target:j},Ae.createElement(Ei,{force:!1},Ae.createElement(L,{slot:le,name:"Dialog.Description"},Ae.createElement(ms,{initialFocus:o,containers:_,features:I?zn(Q,{parent:ms.features.RestoreFocus,leaf:ms.features.All&~ms.features.FocusLock}):ms.features.None},Ae.createElement(ye,null,en({ourProps:be,theirProps:d,slot:le,defaultTag:yy,features:vy,visible:x===0,name:"Dialog"}))))))))),Ae.createElement(z,null))}let by="div";function jy(e,t){let n=ss(),{id:r=`headlessui-dialog-overlay-${n}`,...a}=e,[{dialogState:l,close:o}]=ra("Dialog.Overlay"),i=xn(t),c=xt(h=>{if(h.target===h.currentTarget){if(bg(h.currentTarget))return h.preventDefault();h.preventDefault(),h.stopPropagation(),o()}}),d=u.useMemo(()=>({open:l===0}),[l]);return en({ourProps:{ref:i,id:r,"aria-hidden":!0,onClick:c},theirProps:a,slot:d,defaultTag:by,name:"Dialog.Overlay"})}let Ny="div";function Sy(e,t){let n=ss(),{id:r=`headlessui-dialog-backdrop-${n}`,...a}=e,[{dialogState:l},o]=ra("Dialog.Backdrop"),i=xn(t);u.useEffect(()=>{if(o.panelRef.current===null)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")},[o.panelRef]);let c=u.useMemo(()=>({open:l===0}),[l]);return Ae.createElement(Ei,{force:!0},Ae.createElement(Ti,null,en({ourProps:{ref:i,id:r,"aria-hidden":!0},theirProps:a,slot:c,defaultTag:Ny,name:"Dialog.Backdrop"})))}let ky="div";function Cy(e,t){let n=ss(),{id:r=`headlessui-dialog-panel-${n}`,...a}=e,[{dialogState:l},o]=ra("Dialog.Panel"),i=xn(t,o.panelRef),c=u.useMemo(()=>({open:l===0}),[l]),d=xt(h=>{h.stopPropagation()});return en({ourProps:{ref:i,id:r,onClick:d},theirProps:a,slot:c,defaultTag:ky,name:"Dialog.Panel"})}let Ey="h2";function Py(e,t){let n=ss(),{id:r=`headlessui-dialog-title-${n}`,...a}=e,[{dialogState:l,setTitleId:o}]=ra("Dialog.Title"),i=xn(t);u.useEffect(()=>(o(r),()=>o(null)),[r,o]);let c=u.useMemo(()=>({open:l===0}),[l]);return en({ourProps:{ref:i,id:r},theirProps:a,slot:c,defaultTag:Ey,name:"Dialog.Title"})}let Ty=tn(wy),Ly=tn(Sy),Ay=tn(Cy),$y=tn(jy),Ry=tn(Py),Wr=Object.assign(Ty,{Backdrop:Ly,Panel:Ay,Overlay:$y,Title:Ry,Description:fy});const lp=u.createContext(void 0);function Uy(e){return e.includes("admin")?"superadmin":e.includes("manager")?"manager":e.includes("user")?"user":"guest"}function ed(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Iy=({children:e})=>{const[t,n]=u.useState(null),[r,a]=u.useState(!0),l=Ae.useCallback(async()=>{const c=ed();if(!c){a(!1);return}try{const d=window;if(!d.auth||typeof d.auth.getAccessToken!="function"){a(!1);return}await new Promise(S=>{d.auth.isAuthenticated(f=>{if(!f){n(null),a(!1),S();return}S()})});const h=await new Promise(S=>{window.auth.getAccessToken(f=>S(f))});if(!h){n(null),a(!1);return}const m=await fetch(`${c}/me`,{headers:{Authorization:`Bearer ${h}`}});if(!m.ok){n(null),a(!1);return}const g=await m.json(),v=Array.isArray(g.groups)?g.groups.map(String):[],j=Uy(v),y=Array.isArray(g.customGroups)?g.customGroups.map(String):[];n({userId:String(g.userId||""),email:String(g.email||""),groups:v,role:j,customGroups:y})}catch{n(null)}finally{a(!1)}},[]);u.useEffect(()=>{l()},[l]);const o=Ae.useCallback(async()=>{ed()&&await l()},[l]),i=()=>{const c=window;c.auth&&typeof c.auth.signOut=="function"&&c.auth.signOut(),n(null)};return s.jsx(lp.Provider,{value:{user:t,isLoading:r,signOut:i,refreshAuth:o},children:e})};function et(){const e=u.useContext(lp);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}function yt(e,t){if(t==="guest")return!0;if(!e)return!1;const n=["guest","user","manager","superadmin"];return n.indexOf(e.role)>=n.indexOf(t)}function fl(e){return e!=null&&e.userId?e.role==="superadmin"?!0:(e.customGroups??[]).includes("Squash"):!1}function ml(e){return e!=null&&e.userId?e.role==="superadmin"?!0:e.role!=="manager"?!1:(e.customGroups??[]).includes("Squash"):!1}const op=u.createContext(void 0);function Dy(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Oy=({children:e})=>{const[t,n]=u.useState(null);return u.useEffect(()=>{const r=Dy();if(!r)return;let a=!1;return(async()=>{try{const l=await fetch(`${r}/branding/logo`);if(!l.ok||!(l.headers.get("Content-Type")||"").includes("application/json"))return;const i=await l.json();if(a)return;i&&i.url&&n({url:String(i.url),alt:String(i.alt||"Funkedupshift")})}catch{}})(),()=>{a=!0}},[]),s.jsx(op.Provider,{value:{logo:t},children:e})};function ip(){const e=u.useContext(op);if(!e)throw new Error("useBranding must be used within BrandingProvider");return e}const _y=()=>{const{user:e}=et(),t=fl(e);return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("section",{className:"relative overflow-hidden rounded-2xl border border-slate-800 bg-gradient-to-br from-brand-orange/20 via-brand-navy/10 to-brand-teal/20 px-6 py-10",children:[s.jsxs("div",{className:"max-w-xl space-y-4",children:[s.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-slate-200",children:"Shared internet intelligence"}),s.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold tracking-tight text-slate-50",children:"Discover, rate, and enrich the sites that matter."}),s.jsx("p",{className:"text-sm text-slate-100/80",children:"Funkedupshift is a living index of websites, media, and experiments  curated by admins, enriched by everyone."}),s.jsxs("div",{className:"flex flex-wrap gap-3 pt-2",children:[s.jsx(ge,{to:"/websites",className:"inline-flex items-center rounded-full border border-slate-500/60 px-4 py-2 text-sm font-semibold text-slate-100 hover:border-slate-300/80",children:"Browse websites"}),s.jsx(ge,{to:"/media",className:"inline-flex items-center rounded-full border border-slate-500/60 px-4 py-2 text-sm font-semibold text-slate-100 hover:border-slate-300/80",children:"Explore media"}),s.jsx(ge,{to:"/internet-dashboard",className:"inline-flex items-center rounded-full border border-slate-500/60 px-4 py-2 text-sm font-semibold text-slate-100 hover:border-slate-300/80",children:"Internet Dashboard"}),t&&s.jsx(ge,{to:"/squash",className:"inline-flex items-center rounded-full border border-slate-500/60 px-4 py-2 text-sm font-semibold text-slate-100 hover:border-slate-300/80",children:"Squash"})]})]}),s.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 w-1/2 opacity-60",children:s.jsx("div",{className:"absolute -inset-24 bg-[radial-gradient(circle_at_top,_#f97316_0,_transparent_55%),radial-gradient(circle_at_bottom,_#06d6a0_0,_transparent_55%)]"})})]}),s.jsxs("section",{className:"grid gap-4 sm:grid-cols-3",children:[s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.22em] text-slate-500 mb-2",children:"Everyone"}),s.jsx("p",{className:"text-sm text-slate-200",children:"Browse all sites and media without signing in. Ratings and metadata are public by design."})]}),s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.22em] text-slate-500 mb-2",children:"Users"}),s.jsx("p",{className:"text-sm text-slate-200",children:"Sign in to rate sites, add notes, and personalize your view of the internet."})]}),s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.22em] text-slate-500 mb-2",children:"Admins"}),s.jsx("p",{className:"text-sm text-slate-200",children:"Curate the corpus, manage categories and groups, and control branding from a single admin surface."})]})]})]})};function go(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const yo=10,My=()=>{const{user:e}=et(),[t,n]=qn(),[r,a]=u.useState([]),[l,o]=u.useState(()=>t.get("q")??""),[i,c]=u.useState(()=>{const w=t.get("categoryIds");return w?w.split(",").filter(Boolean):[]}),[d,h]=u.useState(()=>t.get("categoryMode")==="or"?"or":"and"),[m,g]=u.useState(!1),[v,j]=u.useState(""),[y,S]=u.useState("avgDesc"),[f,p]=u.useState(1),[x,N]=u.useState(!1),[E,P]=u.useState(null),R=!!e,I=u.useRef(null),[V,G]=u.useState([]);u.useEffect(()=>{const w=go();if(!w)return;let b=!1;return fetch(`${w}/categories`).then(C=>C.ok?C.json():Promise.reject(new Error("Failed to load categories"))).then(C=>{if(b)return;const A=(C.categories??[]).map(T=>({id:T.PK||T.id||"",name:T.name||T.PK||""}));A.sort((T,Z)=>(T.name||"").localeCompare(Z.name||"")),G(A)}).catch(()=>{}),()=>{b=!0}},[]);const te=u.useMemo(()=>{if(d==="or"&&V.length>0)return V;const w=new Map;r.forEach(C=>(C.categories||[]).forEach(A=>{A.id&&!w.has(A.id)&&w.set(A.id,A)}));const b=[...V];return w.forEach(C=>{b.some(A=>A.id===C.id)||b.push(C)}),b.sort((C,A)=>(C.name||"").localeCompare(A.name||"")),b},[V,d,r]),ye=u.useMemo(()=>te.filter(w=>!i.includes(w.id)&&(!v.trim()||(w.name||"").toLowerCase().includes(v.toLowerCase()))),[te,i,v]),de=l.trim().length>0||i.length>0;u.useEffect(()=>{if(de){const w=new URLSearchParams;l.trim()&&w.set("q",l.trim()),i.length&&(w.set("categoryIds",i.join(",")),w.set("categoryMode",d)),n(w,{replace:!0})}else n({},{replace:!0})},[de,l,i,d,n]),u.useEffect(()=>{if(!de){a([]),p(1),N(!1),P(null);return}const w=go();if(!w){P("API URL not set. Deploy via CI or set window.API_BASE_URL in config.js.");return}let b=!1;async function C(){N(!0),P(null);try{const A=new URLSearchParams;A.set("limit","100"),l.trim()&&A.set("q",l.trim()),i.length>0&&(A.set("categoryIds",i.join(",")),A.set("categoryMode",d));const T=await fetch(`${w}/sites?${A.toString()}`);if(!T.ok){const se=await T.text();throw new Error(`HTTP ${T.status}: ${se}`)}const Z=await T.json();if(b)return;a(Z.sites??[]),p(1)}catch(A){b||P((A==null?void 0:A.message)??"Failed to load sites.")}finally{b||N(!1)}}return C(),()=>{b=!0}},[de,l,i,d]),u.useEffect(()=>{function w(b){I.current&&!I.current.contains(b.target)&&g(!1)}if(m)return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[m]);const _=u.useMemo(()=>{const w=[...r];return w.sort((b,C)=>{const A=(b.title||b.url||b.PK||"").toLowerCase(),T=(C.title||C.url||C.PK||"").toLowerCase(),Z=typeof b.averageRating=="number"?b.averageRating:0,se=typeof C.averageRating=="number"?C.averageRating:0;return y==="avgDesc"?se!==Z?se-Z:A.localeCompare(T):y==="avgAsc"?Z!==se?Z-se:A.localeCompare(T):y==="alphaAsc"?A.localeCompare(T):y==="alphaDesc"?T.localeCompare(A):0}),w},[r,y]),$=Math.max(1,Math.ceil(_.length/yo)),z=_.slice((f-1)*yo,f*yo),Q=async(w,b)=>{const C=go();if(!C)return;const A=window;if(!A.auth||typeof A.auth.getAccessToken!="function")return;const T=await new Promise(Z=>{A.auth.getAccessToken(se=>Z(se))});T&&await fetch(`${C}/stars`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${T}`},body:JSON.stringify({siteId:w,rating:b})}).catch(()=>{})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Websites"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Browse curated sites, see ratings, and jump straight into the interesting corners of the internet."})]}),s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-4","aria-label":"Search and filter",children:[s.jsxs("form",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",onSubmit:w=>{w.preventDefault(),o(l.trim())},children:[s.jsx("input",{type:"text",value:l,onChange:w=>o(w.target.value),placeholder:"Search sites (title, URL, description)",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("button",{type:"submit",className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500",children:"Search"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-4 sm:gap-6",children:[s.jsxs("div",{ref:I,className:"relative flex-shrink-0 min-w-0 max-w-sm",children:[s.jsx("label",{htmlFor:"website-category-filter",className:"block text-xs font-medium text-slate-400 mb-1",children:"Categories (filter by)"}),s.jsx("input",{id:"website-category-filter",type:"text",value:v,onChange:w=>j(w.target.value),onFocus:()=>g(!0),placeholder:"Search and select categories",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",autoComplete:"off"}),m&&s.jsx("div",{className:"absolute left-0 top-full z-10 mt-1 w-full max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",role:"listbox","aria-label":"Category options",children:ye.length>0?ye.map(w=>s.jsx("button",{type:"button",role:"option",onClick:()=>{c(b=>b.includes(w.id)?b:[...b,w.id]),j("")},className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:w.name},w.id)):s.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:te.length===0?"No categories yet.":"No matches or all selected."})}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:i.map(w=>{const b=te.find(C=>C.id===w);return s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(b==null?void 0:b.name)??w,s.jsx("button",{type:"button",onClick:()=>c(C=>C.filter(A=>A!==w)),className:"hover:text-red-400","aria-label":"Remove category filter",children:""})]},w)})}),i.length>0&&s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-slate-500",children:"Match:"}),s.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[s.jsx("button",{type:"button",onClick:()=>h("and"),className:`rounded px-2 py-0.5 text-xs font-medium ${d==="and"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"AND"}),s.jsx("button",{type:"button",onClick:()=>h("or"),className:`rounded px-2 py-0.5 text-xs font-medium ${d==="or"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"OR"})]})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-3 items-center text-xs text-slate-400",children:[s.jsx("span",{className:"font-medium text-slate-200",children:"Sort:"}),s.jsxs("select",{value:y,onChange:w=>{S(w.target.value),p(1)},className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",children:[s.jsx("option",{value:"avgDesc",children:"Avg stars (high first)"}),s.jsx("option",{value:"avgAsc",children:"Avg stars (low first)"}),s.jsx("option",{value:"alphaAsc",children:"Title AZ"}),s.jsx("option",{value:"alphaDesc",children:"Title ZA"})]}),s.jsx("span",{className:"text-slate-500",children:de?_.length===0?"No sites found.":`${_.length} sites`:""})]})]})]}),E&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:E}),de?x?s.jsx("div",{className:"text-sm text-slate-400",children:"Loading sites"}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"rounded-md border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm text-slate-400",children:_.length===0?"No results":`${_.length} results`}),s.jsx("ul",{className:"space-y-2 mt-2",children:z.map(w=>{const b=w.title||w.url||w.PK||"Untitled",C=w.logoUrl;return s.jsxs("li",{className:"flex gap-3 rounded-xl border border-slate-800 bg-slate-950/60 p-3",children:[s.jsx("div",{className:"h-12 w-12 flex-shrink-0 overflow-hidden rounded-lg border border-slate-700 bg-slate-900",children:C?s.jsx("img",{src:C,alt:"",className:"h-full w-full object-cover",onError:A=>{A.currentTarget.style.visibility="hidden"}}):null}),s.jsxs("div",{className:"min-w-0 flex-1 space-y-1",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("h2",{className:"truncate text-sm font-semibold text-slate-50",children:s.jsx(ge,{to:`/websites/${encodeURIComponent(w.PK)}`,className:"hover:text-brand-orange",children:b})}),typeof w.averageRating=="number"&&s.jsxs("span",{className:"inline-flex items-center rounded-full bg-slate-900 px-2 py-0.5 text-[11px] text-amber-300",children:[w.averageRating.toFixed(1),""]})]}),w.url&&s.jsx("a",{href:w.url,target:"_blank",rel:"noopener noreferrer",className:"block truncate text-xs text-slate-400 hover:text-slate-200",children:w.url}),w.description&&s.jsxs("p",{className:"text-xs text-slate-300 line-clamp-3",children:[w.description,w.descriptionAiGenerated&&s.jsx("span",{className:"ml-1 text-[11px] uppercase tracking-wide text-slate-500",children:"AI summary"})]}),w.categories&&w.categories.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1 pt-1",children:w.categories.map(A=>s.jsx("span",{className:"rounded-full bg-slate-900 px-2 py-0.5 text-[11px] text-slate-300",children:A.name},A.id))}),R&&s.jsx("div",{className:"pt-1",children:s.jsxs("label",{className:"inline-flex items-center gap-1 text-[11px] text-slate-400",children:[s.jsx("span",{children:"Rate:"}),s.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-1 py-0.5 text-[11px] text-slate-50",onChange:A=>{const T=Number(A.target.value);T>=1&&T<=5&&Q(w.PK,T)},defaultValue:"",children:[s.jsx("option",{value:"",children:"--"}),s.jsx("option",{value:"1",children:"1"}),s.jsx("option",{value:"2",children:"2"}),s.jsx("option",{value:"3",children:"3"}),s.jsx("option",{value:"4",children:"4"}),s.jsx("option",{value:"5",children:"5"})]})]})})]})]},w.PK)})})]}):s.jsx("div",{className:"flex items-center justify-center min-h-[280px]",children:s.jsx("p",{className:"text-2xl sm:text-3xl font-light text-slate-500/80 tracking-wide animate-pulse",children:"Enter search term or select categories"})}),de&&$>1&&s.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-center gap-2 text-xs",children:[s.jsx("button",{type:"button",disabled:f<=1,onClick:()=>p(w=>Math.max(1,w-1)),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 disabled:opacity-40",children:"Prev"}),s.jsxs("span",{className:"text-slate-500",children:["Page ",f," of ",$]}),s.jsx("button",{type:"button",disabled:f>=$,onClick:()=>p(w=>Math.min($,w+1)),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 disabled:opacity-40",children:"Next"})]})]})};function vo(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Fy=()=>{var v,j;const{id:e}=$l(),{user:t}=et(),n=yt(t??null,"manager"),[r,a]=u.useState(null),[l,o]=u.useState(null),[i,c]=u.useState(!0),[d,h]=u.useState(null);u.useEffect(()=>{const y=vo();if(!y||!e){h(e?"API URL not set.":"Missing site id."),c(!1);return}let S=!1;async function f(){c(!0),h(null);try{const p=new URLSearchParams;p.set("id",decodeURIComponent(e));const x=await fetch(`${y}/sites?${p.toString()}`);if(x.status===404){S||a(null);return}if(!x.ok){const E=await x.text();throw new Error(`HTTP ${x.status}: ${E}`)}const N=await x.json();if(S)return;a(N.site??null)}catch(p){S||h((p==null?void 0:p.message)??"Failed to load site.")}finally{S||c(!1)}}return f(),()=>{S=!0}},[e]),u.useEffect(()=>{if(!t||!(r!=null&&r.PK))return;const y=vo();if(!y)return;const S=window;if(!S.auth||typeof S.auth.getAccessToken!="function")return;let f=!1;return(async()=>{const p=await new Promise(N=>{S.auth.getAccessToken(E=>N(E))});if(!p||f)return;const x=await fetch(`${y}/stars?siteId=${encodeURIComponent(r.PK)}`,{headers:{Authorization:`Bearer ${p}`}});if(!f&&x.ok){const N=await x.json();o(typeof N.rating=="number"?N.rating:null)}})(),()=>{f=!0}},[t,r==null?void 0:r.PK]);const m=async(y,S)=>{const f=vo();if(!f)return;const p=window;if(!p.auth||typeof p.auth.getAccessToken!="function")return;const x=await new Promise(N=>{p.auth.getAccessToken(E=>N(E))});x&&await fetch(`${f}/stars`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${x}`},body:JSON.stringify({siteId:y,rating:S})}).then(()=>o(S)).catch(()=>{})};if(i)return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(ge,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(it,{className:"h-4 w-4"}),"Back to Websites"]}),s.jsx("div",{className:"text-sm text-slate-400",children:"Loading"})]});if(d||!r)return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(ge,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(it,{className:"h-4 w-4"}),"Back to Websites"]}),s.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:d||"Site not found."})]});const g=r.title||r.url||r.PK||"Untitled";return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsxs(ge,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(it,{className:"h-4 w-4"}),"Back to Websites"]}),n&&r&&s.jsxs(ge,{to:`/admin/sites/edit/${encodeURIComponent(r.PK)}`,className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Tu,{className:"h-4 w-4"}),"Edit site"]})]}),s.jsxs("article",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 sm:p-6",children:[s.jsxs("header",{className:"flex flex-wrap gap-4",children:[s.jsx("div",{className:"h-16 w-16 flex-shrink-0 overflow-hidden rounded-lg border border-slate-700 bg-slate-900",children:r.logoUrl?s.jsx("img",{src:r.logoUrl,alt:"",className:"h-full w-full object-cover",onError:y=>{y.currentTarget.style.visibility="hidden"}}):null}),s.jsxs("div",{className:"min-w-0 flex-1 space-y-1",children:[s.jsx("h1",{className:"text-xl font-semibold tracking-tight text-slate-50",children:g}),typeof r.averageRating=="number"&&s.jsxs("span",{className:"inline-flex items-center rounded-full bg-slate-800 px-2 py-0.5 text-sm text-amber-300",children:[r.averageRating.toFixed(1)," average"]}),r.url&&s.jsx("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:"block truncate text-sm text-slate-400 hover:text-slate-200",children:r.url})]})]}),r.description&&s.jsx("div",{className:"mt-4",children:s.jsxs("p",{className:"text-sm text-slate-300",children:[r.description,r.descriptionAiGenerated&&s.jsx("span",{className:"ml-1 text-xs uppercase tracking-wide text-slate-500",children:"AI summary"})]})}),(((v=r.categories)==null?void 0:v.length)??0)>0&&s.jsx("div",{className:"mt-3 flex flex-wrap gap-1",children:r.categories.map(y=>s.jsx("span",{className:"rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-300",children:y.name},y.id))}),(((j=r.tags)==null?void 0:j.length)??0)>0&&s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:r.tags.map(y=>s.jsx("span",{className:"rounded-full bg-slate-900 px-2 py-0.5 text-xs text-slate-400",children:y},y))}),t&&s.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3",children:[l!==null&&s.jsxs("span",{className:"text-xs text-slate-400",children:["Your rating: ",l,""]}),s.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-400",children:[s.jsx("span",{children:"Rate:"}),s.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-2 py-1 text-sm text-slate-50",value:l??"",onChange:y=>{const S=Number(y.target.value);S>=1&&S<=5&&m(r.PK,S)},children:[s.jsx("option",{value:"",children:"--"}),s.jsx("option",{value:"1",children:"1"}),s.jsx("option",{value:"2",children:"2"}),s.jsx("option",{value:"3",children:"3"}),s.jsx("option",{value:"4",children:"4"}),s.jsx("option",{value:"5",children:"5"})]})]})]}),r.scrapedContent&&s.jsxs("section",{className:"mt-6 border-t border-slate-800 pt-4",children:[s.jsx("h2",{className:"text-sm font-medium text-slate-400",children:"About / Scraped content"}),s.jsx("div",{className:"mt-2 overflow-x-auto rounded-lg border border-slate-800 bg-slate-900/60 p-3",children:s.jsx("pre",{className:"whitespace-pre-wrap break-words font-sans text-sm text-slate-300",children:r.scrapedContent})})]})]})]})};function wo(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const bo=10,By=()=>{const{user:e}=et(),[t,n]=qn(),[r,a]=u.useState([]),[l,o]=u.useState(()=>t.get("q")??""),[i,c]=u.useState(()=>{const b=t.get("categoryIds");return b?b.split(",").filter(Boolean):[]}),[d,h]=u.useState(()=>t.get("categoryMode")==="or"?"or":"and"),[m,g]=u.useState(!1),[v,j]=u.useState(""),[y,S]=u.useState("avgDesc"),[f,p]=u.useState(1),[x,N]=u.useState(!1),[E,P]=u.useState(null),R=!!e,I=yt(e??null,"manager"),V=u.useRef(null),[G,te]=u.useState([]);u.useEffect(()=>{const b=wo();if(!b)return;let C=!1;return fetch(`${b}/media-categories`).then(A=>A.ok?A.json():Promise.reject(new Error("Failed to load categories"))).then(A=>{if(C)return;const T=(A.categories??[]).map(Z=>({id:Z.PK||Z.id||"",name:Z.name||Z.PK||""}));T.sort((Z,se)=>(Z.name||"").localeCompare(se.name||"")),te(T)}).catch(()=>{}),()=>{C=!0}},[]);const ye=u.useMemo(()=>{if(d==="or"&&G.length>0)return G;const b=new Map;r.forEach(A=>(A.categories||[]).forEach(T=>{T.id&&!b.has(T.id)&&b.set(T.id,T)}));const C=[...G];return b.forEach(A=>{C.some(T=>T.id===A.id)||C.push(A)}),C.sort((A,T)=>(A.name||"").localeCompare(T.name||"")),C},[G,d,r]),de=u.useMemo(()=>ye.filter(b=>!i.includes(b.id)&&(!v.trim()||(b.name||"").toLowerCase().includes(v.toLowerCase()))),[ye,i,v]),_=l.trim().length>0||i.length>0;u.useEffect(()=>{if(_){const b=new URLSearchParams;l.trim()&&b.set("q",l.trim()),i.length&&(b.set("categoryIds",i.join(",")),b.set("categoryMode",d)),n(b,{replace:!0})}else n({},{replace:!0})},[_,l,i,d,n]),u.useEffect(()=>{if(!_){a([]),p(1),N(!1),P(null);return}const b=wo();if(!b){P("API URL not set. Deploy via CI or set window.API_BASE_URL in config.js.");return}let C=!1;async function A(){N(!0),P(null);try{const T=new URLSearchParams;T.set("limit","100"),l.trim()&&T.set("q",l.trim()),i.length>0&&(T.set("categoryIds",i.join(",")),T.set("categoryMode",d));const Z=await fetch(`${b}/media?${T.toString()}`);if(!Z.ok){const H=await Z.text();throw new Error(`HTTP ${Z.status}: ${H}`)}const se=await Z.json();if(C)return;a(se.media??[]),p(1)}catch(T){C||P((T==null?void 0:T.message)??"Failed to load media.")}finally{C||N(!1)}}return A(),()=>{C=!0}},[_,l,i,d]),u.useEffect(()=>{function b(C){V.current&&!V.current.contains(C.target)&&g(!1)}if(m)return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[m]);const $=u.useMemo(()=>{const b=[...r];return b.sort((C,A)=>{const T=(C.title||C.PK||"").toLowerCase(),Z=(A.title||A.PK||"").toLowerCase(),se=typeof C.averageRating=="number"?C.averageRating:0,H=typeof A.averageRating=="number"?A.averageRating:0;return y==="avgDesc"?H!==se?H-se:T.localeCompare(Z):y==="avgAsc"?se!==H?se-H:T.localeCompare(Z):y==="alphaAsc"?T.localeCompare(Z):y==="alphaDesc"?Z.localeCompare(T):0}),b},[r,y]),z=Math.max(1,Math.ceil($.length/bo)),Q=$.slice((f-1)*bo,f*bo),w=async(b,C)=>{const A=wo();if(!A)return;const T=window;if(!T.auth||typeof T.auth.getAccessToken!="function")return;const Z=await new Promise(se=>{T.auth.getAccessToken(H=>se(H))});Z&&await fetch(`${A}/media/stars`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Z}`},body:JSON.stringify({mediaId:b,rating:C})}).catch(()=>{})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Media"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Images and videos attached to sites and experiments across Funkedupshift."})]}),s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-4","aria-label":"Search and filter",children:[s.jsxs("form",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",onSubmit:b=>{b.preventDefault(),o(l.trim())},children:[s.jsx("input",{type:"text",value:l,onChange:b=>o(b.target.value),placeholder:"Search media by title or description",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("button",{type:"submit",className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500",children:"Search"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-4 sm:gap-6",children:[s.jsxs("div",{ref:V,className:"relative flex-shrink-0 min-w-0 max-w-sm",children:[s.jsx("label",{htmlFor:"media-category-filter",className:"block text-xs font-medium text-slate-400 mb-1",children:"Categories (filter by)"}),s.jsx("input",{id:"media-category-filter",type:"text",value:v,onChange:b=>j(b.target.value),onFocus:()=>g(!0),placeholder:"Search and select categories",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",autoComplete:"off"}),m&&s.jsx("div",{className:"absolute left-0 top-full z-10 mt-1 w-full max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",role:"listbox","aria-label":"Category options",children:de.length>0?de.map(b=>s.jsx("button",{type:"button",role:"option",onClick:()=>{c(C=>C.includes(b.id)?C:[...C,b.id]),j("")},className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:b.name},b.id)):s.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:ye.length===0?"No categories yet.":"No matches or all selected."})}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:i.map(b=>{const C=ye.find(A=>A.id===b);return s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(C==null?void 0:C.name)??b,s.jsx("button",{type:"button",onClick:()=>c(A=>A.filter(T=>T!==b)),className:"hover:text-red-400","aria-label":"Remove category filter",children:""})]},b)})}),i.length>0&&s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-slate-500",children:"Match:"}),s.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[s.jsx("button",{type:"button",onClick:()=>h("and"),className:`rounded px-2 py-0.5 text-xs font-medium ${d==="and"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"AND"}),s.jsx("button",{type:"button",onClick:()=>h("or"),className:`rounded px-2 py-0.5 text-xs font-medium ${d==="or"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"OR"})]})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-3 items-center text-xs text-slate-400",children:[s.jsx("span",{className:"font-medium text-slate-200",children:"Sort:"}),s.jsxs("select",{value:y,onChange:b=>{S(b.target.value),p(1)},className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",children:[s.jsx("option",{value:"avgDesc",children:"Avg stars (high first)"}),s.jsx("option",{value:"avgAsc",children:"Avg stars (low first)"}),s.jsx("option",{value:"alphaAsc",children:"Title AZ"}),s.jsx("option",{value:"alphaDesc",children:"Title ZA"})]}),s.jsx("span",{className:"text-slate-500",children:_?$.length===0?"No media found.":`${$.length} items`:""})]})]})]}),E&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:E}),_?x?s.jsx("div",{className:"text-sm text-slate-400",children:"Loading media"}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"rounded-md border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm text-slate-400",children:$.length===0?"No results":`${$.length} results`}),s.jsx("ul",{className:"space-y-3 mt-2",children:Q.map(b=>{const C=b.thumbnailUrl||(b.mediaType==="image"?b.mediaUrl:void 0),A=b.title||b.PK||"Untitled",T=b.mediaType==="video"?"Video":"Image",Z=`/media/${encodeURIComponent(b.PK)}`;return s.jsxs("li",{className:"flex gap-3 rounded-xl border border-slate-800 bg-slate-950/60 p-3",children:[s.jsx(ge,{to:Z,className:"h-16 w-24 flex-shrink-0 overflow-hidden rounded-lg border border-slate-700 bg-slate-900 flex items-center justify-center text-xl hover:border-slate-600",children:C?s.jsx("img",{src:C,alt:"",className:"h-full w-full object-cover",onError:se=>{se.currentTarget.style.visibility="hidden"}}):s.jsx("span",{children:b.mediaType==="video"?"":""})}),s.jsxs("div",{className:"min-w-0 flex-1 space-y-1",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("h2",{className:"truncate text-sm font-semibold text-slate-50",children:s.jsx(ge,{to:Z,className:"hover:text-brand-orange",children:A})}),typeof b.averageRating=="number"&&s.jsxs("span",{className:"inline-flex items-center rounded-full bg-slate-900 px-2 py-0.5 text-[11px] text-amber-300",children:[b.averageRating.toFixed(1),""]}),s.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-900 px-2 py-0.5 text-[10px] uppercase tracking-wide text-slate-400",children:T})]}),b.description&&s.jsx("p",{className:"text-xs text-slate-300 line-clamp-3",children:b.description}),b.categories&&b.categories.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1 pt-1",children:b.categories.map(se=>s.jsx("span",{className:"rounded-full bg-slate-900 px-2 py-0.5 text-[11px] text-slate-300",children:se.name},se.id))}),I&&s.jsx("div",{className:"pt-1",children:s.jsxs(ge,{to:`/admin/media/edit/${encodeURIComponent(b.PK)}`,className:"inline-flex items-center gap-1 text-[11px] text-slate-400 hover:text-slate-200",children:[s.jsx(Tu,{className:"h-3.5 w-3.5"}),"Edit"]})}),R&&s.jsx("div",{className:"pt-1",children:s.jsxs("label",{className:"inline-flex items-center gap-1 text-[11px] text-slate-400",children:[s.jsx("span",{children:"Rate:"}),s.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-1 py-0.5 text-[11px] text-slate-50",onChange:se=>{const H=Number(se.target.value);H>=1&&H<=5&&w(b.PK,H)},defaultValue:"",children:[s.jsx("option",{value:"",children:"--"}),s.jsx("option",{value:"1",children:"1"}),s.jsx("option",{value:"2",children:"2"}),s.jsx("option",{value:"3",children:"3"}),s.jsx("option",{value:"4",children:"4"}),s.jsx("option",{value:"5",children:"5"})]})]})})]})]},b.PK)})})]}):s.jsx("div",{className:"flex items-center justify-center min-h-[280px]",children:s.jsx("p",{className:"text-2xl sm:text-3xl font-light text-slate-500/80 tracking-wide animate-pulse",children:"Enter search term or select categories"})}),_&&z>1&&s.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-center gap-2 text-xs",children:[s.jsx("button",{type:"button",disabled:f<=1,onClick:()=>p(b=>Math.max(1,b-1)),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 disabled:opacity-40",children:"Prev"}),s.jsxs("span",{className:"text-slate-500",children:["Page ",f," of ",z]}),s.jsx("button",{type:"button",disabled:f>=z,onClick:()=>p(b=>Math.min(z,b+1)),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 disabled:opacity-40",children:"Next"})]})]})};function td(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const zy=()=>{var y;const{id:e}=$l(),{user:t}=et(),[n,r]=u.useState(null),[a,l]=u.useState(null),[o,i]=u.useState(!0),[c,d]=u.useState(null),h=yt(t??null,"manager"),m=e?decodeURIComponent(e):"";u.useEffect(()=>{const S=td();if(!S||!m){d(m?"API URL not set.":"Missing media id."),i(!1);return}let f=!1;async function p(){i(!0),d(null);try{const x=await fetch(`${S}/media?id=${encodeURIComponent(m)}`);if(x.status===404){f||r(null);return}if(!x.ok){const P=await x.text();throw new Error(`HTTP ${x.status}: ${P}`)}const N=await x.json();if(f)return;const E=Array.isArray(N.media)?N.media[0]:N.media;r(E??null)}catch(x){f||d((x==null?void 0:x.message)??"Failed to load media.")}finally{f||i(!1)}}return p(),()=>{f=!0}},[m]);const g=async S=>{var N;const f=td();if(!f||!n)return;const p=window;if(!((N=p.auth)!=null&&N.getAccessToken))return;const x=await new Promise(E=>p.auth.getAccessToken(E));x&&await fetch(`${f}/media/stars`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${x}`},body:JSON.stringify({mediaId:n.PK,rating:S})}).then(()=>l(S)).catch(()=>{})};if(o)return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(ge,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(it,{className:"h-4 w-4"}),"Back to Media"]}),s.jsx("div",{className:"text-sm text-slate-400",children:"Loading"})]});if(c||!n)return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(ge,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(it,{className:"h-4 w-4"}),"Back to Media"]}),s.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:c||"Media not found."})]});const v=n.title||n.PK||"Untitled",j=n.mediaType==="video";return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsxs(ge,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(it,{className:"h-4 w-4"}),"Back to Media"]}),h&&s.jsxs(ge,{to:`/admin/media/edit/${encodeURIComponent(n.PK)}`,className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Tu,{className:"h-4 w-4"}),"Edit"]})]}),s.jsxs("article",{className:"rounded-xl border border-slate-800 bg-slate-950/60 overflow-hidden",children:[s.jsxs("header",{className:"p-4 sm:p-6 border-b border-slate-800",children:[s.jsx("h1",{className:"text-xl font-semibold tracking-tight text-slate-50",children:v}),s.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[typeof n.averageRating=="number"&&s.jsxs("span",{className:"inline-flex items-center rounded-full bg-slate-800 px-2 py-0.5 text-sm text-amber-300",children:[n.averageRating.toFixed(1)," average"]}),s.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-800 px-2 py-0.5 text-xs uppercase tracking-wide text-slate-400",children:j?"Video":"Image"})]}),n.description&&s.jsx("p",{className:"mt-3 text-sm text-slate-300",children:n.description}),(((y=n.categories)==null?void 0:y.length)??0)>0&&s.jsx("div",{className:"mt-3 flex flex-wrap gap-1",children:n.categories.map(S=>s.jsx("span",{className:"rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-300",children:S.name},S.id))}),t&&s.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3",children:[a!==null&&s.jsxs("span",{className:"text-xs text-slate-400",children:["Your rating: ",a,""]}),s.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-400",children:[s.jsx("span",{children:"Rate:"}),s.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-2 py-1 text-sm text-slate-50",value:a??"",onChange:S=>{const f=Number(S.target.value);f>=1&&f<=5&&g(f)},children:[s.jsx("option",{value:"",children:"--"}),s.jsx("option",{value:"1",children:"1"}),s.jsx("option",{value:"2",children:"2"}),s.jsx("option",{value:"3",children:"3"}),s.jsx("option",{value:"4",children:"4"}),s.jsx("option",{value:"5",children:"5"})]})]})]})]}),s.jsx("div",{className:"p-4 sm:p-6 bg-slate-900/40 flex justify-center items-center min-h-[200px]",children:n.mediaUrl?j?s.jsx("video",{src:n.mediaUrl,controls:!0,className:"max-w-full max-h-[70vh] rounded-lg border border-slate-700",playsInline:!0}):s.jsx("img",{src:n.mediaUrl,alt:v,className:"max-w-full max-h-[70vh] w-auto h-auto object-contain rounded-lg border border-slate-700"}):s.jsx("p",{className:"text-sm text-slate-500",children:"No media URL available."})})]})]})},up="funkedupshift_internet_dashboard",Wy=5*60*1e3;function Gy(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function Hy(){try{const e=localStorage.getItem(up);if(!e)return null;const t=JSON.parse(e);return!(t!=null&&t.sites)||!(t!=null&&t.lastFetchTime)||Date.now()-new Date(t.lastFetchTime).getTime()>=Wy?null:t.sites}catch{return null}}function Vy(e){try{localStorage.setItem(up,JSON.stringify({sites:e,lastFetchTime:new Date().toISOString()}))}catch{}}const Ky=()=>{const{user:e}=et(),[t,n]=u.useState([]),[r,a]=u.useState(!0),[l,o]=u.useState(null),i=u.useCallback(async()=>{const c=Gy(),d=Hy();if(d&&d.length>0){n(d),a(!1),o(null);return}if(!c){o("API URL not set."),a(!1);return}a(!0),o(null);try{const h=await fetch(`${c}/internet-dashboard`);if(!h.ok){const v=await h.text();throw new Error(v||`HTTP ${h.status}`)}const m=await h.json(),g=Array.isArray(m.sites)?m.sites:[];g.length>0?(Vy(g),n(g)):(o(d!=null&&d.length?void 0:"No data returned."),d!=null&&d.length&&n(d))}catch(h){const m=h instanceof Error?h.message:"Failed to load dashboard.";d&&d.length>0?(n(d),o(null)):(o(m),n([]))}finally{a(!1)}},[]);return u.useEffect(()=>{i()},[i]),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Internet dashboard"}),s.jsxs("div",{className:"rounded-xl border border-teal-800/60 bg-gradient-to-br from-teal-900/40 to-teal-950/60 p-4 shadow-lg",children:[s.jsx("p",{className:"text-sm font-medium text-teal-100",children:"Live status of popular sites"}),s.jsx("p",{className:"mt-1 text-xs text-teal-200/80",children:"Refreshes when data is older than 5 minutes"}),yt(e??null,"superadmin")&&s.jsx("p",{className:"mt-2",children:s.jsx(ge,{to:"/admin/internet-dashboard",className:"text-brand-orange hover:text-orange-400 text-sm",children:"Edit sites list"})})]}),r&&s.jsx("p",{className:"text-sm text-slate-400",children:"Loading"}),l&&!t.length&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:l}),s.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(140px,1fr))] gap-3",children:t.map(c=>{const d=(c.status||"down").toLowerCase(),h=d==="up"?"border-emerald-500/50 bg-emerald-500/15 text-emerald-200":d==="degraded"?"border-amber-500/50 bg-amber-500/15 text-amber-200":"border-red-500/50 bg-red-500/15 text-red-200",m=c.responseTimeMs!=null?`${c.responseTimeMs} ms`:null;return s.jsxs("div",{className:`rounded-lg border p-3 text-center text-sm ${h}`,children:[s.jsx("a",{href:`https://${c.domain}`,target:"_blank",rel:"noopener noreferrer",className:"font-semibold break-all hover:underline block",children:c.domain}),s.jsx("div",{className:"mt-1 text-xs capitalize opacity-90",children:d}),m&&s.jsx("div",{className:"mt-0.5 text-[11px] opacity-75",children:m})]},c.domain)})})]})},hs="#3d7a3d",nd="#e50203",rd="#fdde13";function qy(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Qy=()=>{const{user:e}=et(),[t,n]=u.useState([]),[r,a]=u.useState(null),[l,o]=u.useState(!0),[i,c]=u.useState(null),d=u.useCallback(async()=>{const m=qy();if(!m){c("API URL not set."),o(!1);return}o(!0),c(null);try{const g=await fetch(`${m}/other-properties/our-properties`);if(!g.ok){const y=await g.text();throw new Error(y||`HTTP ${g.status}`)}const v=await g.json(),j=Array.isArray(v.sites)?v.sites:[];n(j),c(null)}catch(g){const v=g instanceof Error?g.message:"Failed to load.";c(v),n([])}finally{o(!1)}},[]);u.useEffect(()=>{d()},[d]);const h=yt(e??null,"manager");return s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight",style:{color:hs},children:"Our Properties"}),s.jsxs("div",{className:"rounded-xl border-2 p-4 shadow-lg",style:{borderColor:hs,background:hs},children:[s.jsx("p",{className:"text-sm font-medium text-black",children:"Live status of our sites"}),s.jsx("p",{className:"mt-1 text-xs text-black/90",children:"Shows availability and response time for our properties"}),h&&s.jsx("p",{className:"mt-2",children:s.jsx(ge,{to:"/admin/other-properties/our-properties",className:"text-black hover:text-rasta-red font-semibold text-sm",children:"Edit sites list"})})]}),l&&s.jsx("p",{className:"text-sm text-slate-400",children:"Loading"}),i&&!t.length&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:i}),!l&&t.length===0&&!i&&s.jsxs("p",{className:"text-sm text-slate-400",children:["No sites configured yet."," ",h&&s.jsx(ge,{to:"/admin/other-properties/our-properties",className:"text-brand-orange hover:text-orange-400",children:"Add sites"})]}),t.length>0&&s.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(140px,1fr))] gap-3",children:t.map(m=>{const g=(m.status||"down").toLowerCase(),v=g==="up"?{borderColor:hs,background:hs}:g==="degraded"?{borderColor:rd,background:rd}:{borderColor:nd,background:nd},j=m.responseTimeMs!=null?`${m.responseTimeMs} ms`:null,y=(m.description||"").trim().length>0;return s.jsxs("div",{className:"rounded-lg border-2 p-3 text-center text-sm min-w-0 cursor-pointer text-black",style:v,onClick:()=>a(m),role:"button",tabIndex:0,onKeyDown:S=>{(S.key==="Enter"||S.key===" ")&&(S.preventDefault(),a(m))},children:[s.jsx("a",{href:m.url||`https://${m.domain}`,target:"_blank",rel:"noopener noreferrer",className:"font-semibold break-all block text-black hover:text-rasta-red hover:underline",onClick:S=>S.stopPropagation(),children:m.domain}),s.jsx("div",{className:"mt-1 text-xs capitalize font-medium",children:g}),j&&s.jsx("div",{className:"mt-0.5 text-[11px] font-medium",children:j}),y&&s.jsx("div",{className:"mt-0.5 text-[11px] truncate w-full font-medium",title:m.description,children:m.description})]},m.url||m.domain)})}),s.jsxs(Wr,{open:!!r,onClose:()=>a(null),className:"relative z-50",children:[s.jsx("div",{className:"fixed inset-0 bg-black/50","aria-hidden":"true"}),s.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:s.jsx(Wr.Panel,{className:"mx-auto max-w-md w-full rounded-xl border-2 border-slate-700 bg-slate-900 p-4 shadow-xl",children:r&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsx(Wr.Title,{className:"text-lg font-semibold text-slate-100",children:r.domain}),s.jsx("button",{type:"button",onClick:()=>a(null),className:"rounded p-1 text-slate-400 hover:bg-slate-800 hover:text-slate-200","aria-label":"Close modal",children:s.jsx(Fm,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"mt-3 space-y-2 text-sm",children:[s.jsxs("p",{children:[s.jsx("span",{className:"text-slate-500",children:"Status:"})," ",s.jsx("span",{className:"capitalize font-medium text-slate-200",children:r.status})]}),r.responseTimeMs!=null&&s.jsxs("p",{children:[s.jsx("span",{className:"text-slate-500",children:"Response time:"})," ",s.jsxs("span",{className:"text-slate-200",children:[r.responseTimeMs," ms"]})]}),s.jsxs("p",{children:[s.jsx("span",{className:"text-slate-500",children:"URL:"})," ",s.jsx("a",{href:r.url||`https://${r.domain}`,target:"_blank",rel:"noopener noreferrer",className:"text-rasta-red hover:underline break-all",children:r.url||`https://${r.domain}`})]}),(r.description||"").trim().length>0&&s.jsxs("p",{children:[s.jsx("span",{className:"text-slate-500 block mb-0.5",children:"Description:"}),s.jsx("span",{className:"text-slate-200",children:r.description})]})]})]})})})]})]})};function Yy(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Jy=["image/png","image/jpeg","image/jpg","image/gif","image/webp"],Zy=()=>{const{user:e}=et(),{logo:t}=ip(),[n,r]=u.useState(null),[a,l]=u.useState("Funkedupshift"),[o,i]=u.useState(null),[c,d]=u.useState(!1),[h,m]=u.useState(null),[g,v]=u.useState(null);if(!yt(e??null,"superadmin"))return s.jsxs("div",{className:"space-y-3",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Branding"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Only superadmin users can manage global branding assets."})]});const y=f=>{var x;const p=(x=f.target.files)==null?void 0:x[0];r(p??null),m(null),v(null),o&&(URL.revokeObjectURL(o),i(null)),p&&i(URL.createObjectURL(p))},S=async f=>{if(f.preventDefault(),v(null),m(null),!n){v("Choose an image file first.");return}const p=n.type||"image/png";if(!Jy.includes(p)){v("Logo must be PNG, JPEG, GIF, or WEBP.");return}const x=Yy();if(!x){v("API URL not configured.");return}const N=window;if(!N.auth||typeof N.auth.getAccessToken!="function"){v("Auth not initialized.");return}d(!0);try{const E=await new Promise(V=>{N.auth.getAccessToken(G=>V(G))});if(!E)throw new Error("Missing access token.");const P=await fetch(`${x}/branding/logo`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${E}`},body:JSON.stringify({contentType:p,alt:a})});if(!P.ok){const V=await P.text();throw new Error(V||`Metadata request failed with ${P.status}`)}const R=await P.json();if(!R.uploadUrl)throw new Error("uploadUrl missing from response.");const I=await fetch(R.uploadUrl,{method:"PUT",headers:{"Content-Type":p},body:n});if(!I.ok)throw new Error(`Upload failed with ${I.status}`);m("Logo updated. It may take a moment for caches to refresh.")}catch(E){v((E==null?void 0:E.message)??"Failed to update logo.")}finally{d(!1)}};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Branding"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Upload a new global logo for Funkedupshift. This logo is used in the navigation bar and other shared surfaces."})]}),s.jsxs("form",{className:"space-y-4 max-w-md",onSubmit:S,children:[s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsx("label",{className:"block text-slate-200",children:"Logo image"}),t&&!o&&s.jsxs("div",{className:"space-y-1 mb-3",children:[s.jsx("p",{className:"text-slate-200",children:"Current logo"}),s.jsx("div",{className:"inline-flex items-center rounded-lg border border-slate-800 bg-slate-950 p-2",children:s.jsx("img",{src:t.url,alt:t.alt,className:"h-12 w-auto rounded-md object-contain"})})]}),s.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/jpg,image/gif,image/webp",onChange:y,className:"block w-full text-xs text-slate-300 file:mr-3 file:rounded-md file:border-0 file:bg-slate-800 file:px-3 file:py-1.5 file:text-xs file:font-semibold file:text-slate-100 hover:file:bg-slate-700"}),s.jsx("p",{className:"text-xs text-slate-500",children:"PNG, JPEG, GIF, or WEBP. Recommended square or horizontal layout."})]}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsx("label",{className:"block text-slate-200",children:"Alt text"}),s.jsx("input",{type:"text",value:a,onChange:f=>l(f.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),o&&s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsx("p",{className:"text-slate-200",children:"Preview"}),s.jsxs("div",{className:"inline-flex items-center rounded-lg border border-slate-800 bg-slate-950 p-2",children:[s.jsx("img",{src:o,alt:"Preview",className:"h-12 w-auto rounded-md object-contain"}),s.jsx("span",{className:"ml-3 text-xs text-slate-400 truncate max-w-[12rem]",children:n==null?void 0:n.name})]})]}),s.jsx("button",{type:"submit",disabled:c||!n,className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:c?"Updating":"Update logo"}),h&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-xs text-emerald-200",children:h}),g&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:g})]})]})};function sd(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Xy=()=>{const{user:e}=et(),[t,n]=u.useState([]),[r,a]=u.useState("custom"),[l,o]=u.useState(null),[i,c]=u.useState(null),[d,h]=u.useState(""),[m,g]=u.useState(!0),[v,j]=u.useState(!1),[y,S]=u.useState(null),[f,p]=u.useState(null),x=yt(e??null,"superadmin"),N=u.useCallback(async($,z)=>{var C;const Q=window;if(!((C=Q.auth)!=null&&C.getAccessToken))throw new Error("Not signed in");const w=await new Promise(A=>Q.auth.getAccessToken(A));if(!w)throw new Error("Not signed in");const b={...z==null?void 0:z.headers,Authorization:`Bearer ${w}`};return fetch($,{...z,headers:b})},[]),E=u.useCallback(async()=>{const $=sd();if(!$){p("API URL not set."),g(!1);return}g(!0),p(null);try{const z=await N(`${$}/admin/internet-dashboard/sites`);if(!z.ok){const w=await z.json().catch(()=>({}));throw new Error(w.error||"Failed to load")}const Q=await z.json();n(Array.isArray(Q.sites)?Q.sites:[])}catch(z){p((z==null?void 0:z.message)??"Failed to load sites.")}finally{g(!1)}},[N]);u.useEffect(()=>{x&&E()},[x,E]);const P=async $=>{const z=sd();if(z){j(!0),S(null),p(null);try{const Q=await N(`${z}/admin/internet-dashboard/sites`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({sites:$})});if(!Q.ok){const w=await Q.json().catch(()=>({}));throw new Error(w.error||"Failed to save")}n($),S("Sites list saved.")}catch(Q){p((Q==null?void 0:Q.message)??"Failed to save.")}finally{j(!1)}}},R=$=>{$.preventDefault();const z=d.trim().toLowerCase().replace(/^https?:\/\//,"").replace(/\/.*$/,"");if(!z)return;if(t.includes(z)){p("Domain already in list.");return}const Q=[...t,z];h(""),p(null),P(Q)},I=u.useMemo(()=>{if(r==="custom")return[...t];const $=[...t];return $.sort((z,Q)=>r==="a-z"?z.localeCompare(Q):Q.localeCompare(z)),$},[t,r]),V=$=>{o($)},G=($,z)=>{$.preventDefault(),$.dataTransfer.dropEffect="move",c(z)},te=()=>{c(null)},ye=()=>{o(null),c(null)},de=($,z)=>{if($.preventDefault(),c(null),r!=="custom"||l===null||l===z){o(null);return}const Q=[...I],[w]=Q.splice(l,1);Q.splice(z,0,w),n(Q),P(Q),o(null)},_=$=>{const z=t.filter(Q=>Q!==$);if(z.length===0){p("At least one site is required.");return}p(null),P(z)};return x?m?s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Internet Dashboard"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Loading sites"})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ge,{to:"/internet-dashboard",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(it,{className:"h-4 w-4"}),"Back to Internet Dashboard"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Internet Dashboard"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Edit the list of sites shown on the Internet Dashboard. Only SuperAdmin can change this."})]}),s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-4 max-w-2xl",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsxs("h2",{className:"text-base font-semibold text-slate-200",children:["Sites list (",t.length,")"]}),s.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[s.jsx("button",{type:"button",onClick:()=>a("custom"),className:`rounded px-2 py-0.5 text-xs font-medium ${r==="custom"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"Custom"}),s.jsx("button",{type:"button",onClick:()=>a("a-z"),className:`rounded px-2 py-0.5 text-xs font-medium ${r==="a-z"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"AZ"}),s.jsx("button",{type:"button",onClick:()=>a("z-a"),className:`rounded px-2 py-0.5 text-xs font-medium ${r==="z-a"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"ZA"})]})]}),s.jsxs("form",{onSubmit:R,className:"flex gap-2 flex-wrap items-end",children:[s.jsxs("div",{className:"flex-1 min-w-[12rem]",children:[s.jsx("label",{htmlFor:"newDomain",className:"block text-xs font-medium text-slate-400 mb-1",children:"Add domain"}),s.jsx("input",{id:"newDomain",type:"text",value:d,onChange:$=>h($.target.value),placeholder:"example.com",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsx("button",{type:"submit",disabled:v||!d.trim(),className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:"Add"})]}),s.jsx("ul",{className:"space-y-2",children:I.map(($,z)=>s.jsxs("li",{draggable:r==="custom",onDragStart:()=>V(z),onDragOver:Q=>G(Q,z),onDragLeave:te,onDragEnd:ye,onDrop:Q=>de(Q,z),className:`flex items-center gap-2 rounded-md border px-3 py-2 ${l===z?"border-brand-orange bg-slate-800 opacity-60":i===z?"border-brand-orange/70 bg-slate-800/80":"border-slate-700 bg-slate-900"} ${r==="custom"?"cursor-grab active:cursor-grabbing":""}`,children:[r==="custom"&&s.jsx(Pu,{className:"h-4 w-4 flex-shrink-0 text-slate-500","aria-hidden":!0}),s.jsx("span",{className:"font-medium text-slate-200 break-all flex-1",children:$}),s.jsx("button",{type:"button",onClick:()=>_($),disabled:v||t.length<=1,className:"flex-shrink-0 rounded-md border border-red-500/60 bg-red-500/10 px-2 py-1 text-xs font-medium text-red-300 hover:bg-red-500/20 disabled:opacity-50",children:"Remove"})]},$))}),y&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:y}),f&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:f})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Internet Dashboard"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Only SuperAdmin users can edit the dashboard sites list."})]})};function ad(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function ld(e){const t=e.trim();return t?t.toLowerCase().startsWith("http://")||t.toLowerCase().startsWith("https://")?t:`https://${t.replace(/^https?:\/\//i,"")}`:null}function jo(e){try{return new URL(e.startsWith("http")?e:`https://${e}`).hostname}catch{return e}}const ev=()=>{const{user:e}=et(),[t,n]=u.useState([]),[r,a]=u.useState("custom"),[l,o]=u.useState(null),[i,c]=u.useState(null),[d,h]=u.useState(""),[m,g]=u.useState(null),[v,j]=u.useState(""),[y,S]=u.useState(!0),[f,p]=u.useState(!1),[x,N]=u.useState(null),[E,P]=u.useState(null),R=u.useRef([]),I=yt(e??null,"manager");u.useEffect(()=>{R.current=t},[t]);const V=u.useCallback(async(H,J)=>{var be;const L=window;if(!((be=L.auth)!=null&&be.getAccessToken))throw new Error("Not signed in");const K=await new Promise(O=>L.auth.getAccessToken(O));if(!K)throw new Error("Not signed in");const le={...J==null?void 0:J.headers,Authorization:`Bearer ${K}`};return fetch(H,{...J,headers:le})},[]),G=u.useCallback(async()=>{const H=ad();if(!H){P("API URL not set."),S(!1);return}S(!0),P(null);try{const J=await V(`${H}/admin/other-properties/our-properties/sites`);if(!J.ok){const le=await J.json().catch(()=>({}));throw new Error(le.error||"Failed to load")}const L=await J.json(),K=Array.isArray(L.sites)?L.sites:[];n(K.map(le=>({url:typeof le=="string"?le:le.url||"",description:typeof le=="string"?"":le.description||""})))}catch(J){P((J==null?void 0:J.message)??"Failed to load sites.")}finally{S(!1)}},[V]);u.useEffect(()=>{I&&G()},[I,G]);const te=async H=>{const J=ad();if(J){p(!0),N(null),P(null);try{const L=await V(`${J}/admin/other-properties/our-properties/sites`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({sites:H.map(K=>({url:K.url,description:K.description}))})});if(!L.ok){const K=await L.json().catch(()=>({}));throw new Error(K.error||"Failed to save")}n(H),N("Sites list saved.")}catch(L){P((L==null?void 0:L.message)??"Failed to save.")}finally{p(!1)}}},ye=H=>{H.preventDefault();const J=ld(d);if(!J)return;if(t.some(K=>K.url===J)){P("URL already in list.");return}const L=[...t,{url:J,description:""}];h(""),P(null),te(L)},de=H=>{g(H),j(w[H].url)},_=()=>{if(m===null)return;const H=ld(v);if(!H){P("Invalid URL.");return}const J=w[m];if(t.some(K=>K.url===H&&K.url!==J.url)){P("URL already in list.");return}P(null);const L=t.map(K=>K.url===J.url?{...K,url:H}:K);n(L),te(L),g(null),j("")},$=()=>{g(null),j("")},z=(H,J)=>{const L=t.map(K=>K.url===H?{...K,description:J.slice(0,255)}:K);n(L)},Q=()=>{te(R.current)},w=u.useMemo(()=>{if(r==="custom")return[...t];const H=[...t];return H.sort((J,L)=>{const K=jo(J.url),le=jo(L.url);return r==="a-z"?K.localeCompare(le):le.localeCompare(K)}),H},[t,r]),b=H=>{o(H)},C=(H,J)=>{H.preventDefault(),H.dataTransfer.dropEffect="move",c(J)},A=()=>{c(null)},T=()=>{o(null),c(null)},Z=(H,J)=>{if(H.preventDefault(),c(null),r!=="custom"||l===null||l===J){o(null);return}const L=[...w],[K]=L.splice(l,1);L.splice(J,0,K),n(L),te(L),o(null)},se=H=>{const J=t.filter(L=>L.url!==H);P(null),te(J)};return I?y?s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Our Properties"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Loading sites"})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ge,{to:"/other-properties/our-properties",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(it,{className:"h-4 w-4"}),"Back to Our Properties"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Our Properties"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Edit the list of sites shown on the Our Properties dashboard. Manager or SuperAdmin can change this."})]}),s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-4 max-w-2xl",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsxs("h2",{className:"text-base font-semibold text-slate-200",children:["Sites list (",t.length,")"]}),s.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[s.jsx("button",{type:"button",onClick:()=>a("custom"),className:`rounded px-2 py-0.5 text-xs font-medium ${r==="custom"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"Custom"}),s.jsx("button",{type:"button",onClick:()=>a("a-z"),className:`rounded px-2 py-0.5 text-xs font-medium ${r==="a-z"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"AZ"}),s.jsx("button",{type:"button",onClick:()=>a("z-a"),className:`rounded px-2 py-0.5 text-xs font-medium ${r==="z-a"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"ZA"})]})]}),s.jsxs("form",{onSubmit:ye,className:"flex gap-2 flex-wrap items-end",children:[s.jsxs("div",{className:"flex-1 min-w-[12rem]",children:[s.jsx("label",{htmlFor:"newUrl",className:"block text-xs font-medium text-slate-400 mb-1",children:"Add URL"}),s.jsx("input",{id:"newUrl",type:"text",value:d,onChange:H=>h(H.target.value),placeholder:"https://example.com or example.com",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsx("button",{type:"submit",disabled:f||!d.trim(),className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:"Add"})]}),s.jsx("ul",{className:"space-y-3",children:w.map((H,J)=>s.jsxs("li",{draggable:r==="custom"&&m===null,onDragStart:()=>b(J),onDragOver:L=>C(L,J),onDragLeave:A,onDragEnd:T,onDrop:L=>Z(L,J),className:`flex flex-col gap-2 rounded-md border px-3 py-2 ${l===J?"border-brand-orange bg-slate-800 opacity-60":i===J?"border-brand-orange/70 bg-slate-800/80":"border-slate-700 bg-slate-900"} ${r==="custom"&&m===null?"cursor-grab active:cursor-grabbing":""}`,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[r==="custom"&&s.jsx(Pu,{className:"h-4 w-4 flex-shrink-0 text-slate-500","aria-hidden":!0}),m===J?s.jsx("input",{type:"text",value:v,onChange:L=>j(L.target.value),onBlur:_,onKeyDown:L=>{L.key==="Enter"&&_(),L.key==="Escape"&&$()},autoFocus:!0,className:"flex-1 rounded-md border border-slate-600 bg-slate-900 px-2 py-1 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}):s.jsx("button",{type:"button",onClick:()=>de(J),className:"font-medium text-slate-200 break-all flex-1 text-left hover:text-brand-orange hover:underline",children:jo(H.url)}),s.jsx("button",{type:"button",onClick:()=>se(H.url),disabled:f||m!==null,className:"flex-shrink-0 rounded-md border border-red-500/60 bg-red-500/10 px-2 py-1 text-xs font-medium text-red-300 hover:bg-red-500/20 disabled:opacity-50",children:"Remove"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:`desc-${J}`,className:"block text-xs font-medium text-slate-400 mb-0.5",children:"Description"}),s.jsx("input",{id:`desc-${J}`,type:"text",value:H.description,onChange:L=>z(H.url,L.target.value),onBlur:Q,maxLength:255,placeholder:"One-line description (255 chars max)",disabled:f,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange disabled:opacity-50"}),s.jsxs("span",{className:"text-[10px] text-slate-500",children:[H.description.length,"/255"]})]})]},H.url))}),w.length===0&&s.jsx("p",{className:"text-sm text-slate-500",children:"No sites yet. Add a URL above."}),x&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:x}),E&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:E})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Our Properties"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Only Manager or SuperAdmin users can edit the our properties sites list."})]})},tv={admin:"SuperAdmin",manager:"Manager",user:"User"},Ai=[{value:-8,label:"UTC-8"},{value:-5,label:"UTC-5"},{value:0,label:"UTC+0/GMT"}];function jr(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function nv(e,t,n){if(!e&&!n)return"";if(!e)return n?`from ${n}`:"";try{const r=new Date(e);if(isNaN(r.getTime()))return e+(n?` from ${n}`:"");const a=r.getTime()+(t||0)*36e5,l=new Date(a),o=y=>y<10?"0"+y:""+y,i=l.getUTCFullYear(),c=o(l.getUTCMonth()+1),d=o(l.getUTCDate()),h=o(l.getUTCHours()),m=o(l.getUTCMinutes()),g=Ai.find(y=>y.value===t),v=g?g.label:t<0?"UTC"+t:"UTC+"+t;let j=`${i}-${c}-${d} ${h}:${m} ${v}`;return n&&(j+=` from ${n}`),j}catch{return e+(n?` from ${n}`:"")}}const rv=()=>{const{user:e}=et(),t=Xt(),[n,r]=qn(),a=n.get("tab"),l=a==="groups"?"groups":"users",[o,i]=u.useState(l);u.useEffect(()=>{i(a==="groups"?"groups":"users")},[a]);const c=M=>{i(M);const D=new URLSearchParams(n);M==="groups"?D.set("tab","groups"):D.delete("tab"),r(D)},[d,h]=u.useState([]),[m,g]=u.useState(!0),[v,j]=u.useState(null),[y,S]=u.useState(""),[f,p]=u.useState(-8),[x,N]=u.useState([]),[E,P]=u.useState(!0),[R,I]=u.useState(null),[V,G]=u.useState(""),[te,ye]=u.useState(""),[de,_]=u.useState(""),[$,z]=u.useState(!1),[Q,w]=u.useState(null),[b,C]=u.useState(null),[A,T]=u.useState(""),[Z,se]=u.useState(""),[H,J]=u.useState(!1),[L,K]=u.useState(null),[le,be]=u.useState(null),O=yt(e??null,"manager"),Y=async M=>{var oe;const D=jr();if(!D){j("API URL not set."),g(!1);return}const ne=window;if(!((oe=ne.auth)!=null&&oe.getAccessToken)){j("Sign in required."),g(!1);return}g(!0),j(null);try{const pe=await new Promise(Se=>ne.auth.getAccessToken(Se));let me=`${D}/admin/users`;M&&(me+=`?paginationToken=${encodeURIComponent(M)}`);const ie=await fetch(me,{headers:{Authorization:`Bearer ${pe}`}});if(!ie.ok){const Se=await ie.json().catch(()=>({}));throw new Error(Se.error||"Failed to load users")}const je=await ie.json();h(Se=>M?[...Se,...je.users??[]]:je.users??[]),S(je.paginationToken??"")}catch(pe){j((pe==null?void 0:pe.message)??"Failed to load users")}finally{g(!1)}},X=async M=>{var oe;const D=jr();if(!D)return{cognitoGroups:[],customGroups:[]};const ne=window;if(!((oe=ne.auth)!=null&&oe.getAccessToken))return{cognitoGroups:[],customGroups:[]};try{const pe=await new Promise(je=>ne.auth.getAccessToken(je)),me=await fetch(`${D}/admin/users/${encodeURIComponent(M.username)}/groups`,{headers:{Authorization:`Bearer ${pe}`}});if(!me.ok)return{cognitoGroups:[],customGroups:[]};const ie=await me.json();return{cognitoGroups:ie.cognitoGroups??[],customGroups:ie.customGroups??[]}}catch{return{cognitoGroups:[],customGroups:[]}}},ae=async()=>{var ne;const M=jr();if(!M){I("API URL not set."),P(!1);return}const D=window;if(!((ne=D.auth)!=null&&ne.getAccessToken)){I("Sign in required."),P(!1);return}P(!0),I(null);try{const oe=await new Promise(je=>D.auth.getAccessToken(je)),pe=await fetch(`${M}/admin/groups`,{headers:{Authorization:`Bearer ${oe}`}});if(!pe.ok)throw new Error(await pe.text());const ie=((await pe.json()).groups??[]).map(je=>({name:je.name??(je.PK??"").replace("GROUP#",""),description:je.description,permissions:Array.isArray(je.permissions)?je.permissions:[]}));ie.sort((je,Se)=>je.name.toLowerCase().localeCompare(Se.name.toLowerCase())),N(ie)}catch(oe){I((oe==null?void 0:oe.message)??"Failed to load groups")}finally{P(!1)}};u.useEffect(()=>{const M=parseInt(sessionStorage.getItem("funkedupshift_lastlogin_tz")??"-8",10);!isNaN(M)&&Ai.some(D=>D.value===M)&&p(M)},[]),u.useEffect(()=>{O&&o==="users"&&Y()},[O,o]),u.useEffect(()=>{O&&o==="groups"&&ae()},[O,o]);const we=M=>{t(`/admin/users/edit?username=${encodeURIComponent(M.username)}&email=${encodeURIComponent(M.email??"")}&status=${encodeURIComponent(M.status??"")}`)},U=(M,D)=>{const ne=[];return(M||[]).forEach(oe=>{const pe=tv[oe]||oe,me=oe==="admin"?"bg-amber-500/20 text-amber-200":oe==="manager"?"bg-blue-500/20 text-blue-200":"bg-slate-600/30 text-slate-300";ne.push(s.jsx("span",{className:`inline-block px-2 py-0.5 rounded text-xs mr-1 ${me}`,children:pe},`c-${oe}`))}),(D||[]).forEach(oe=>{ne.push(s.jsx("span",{className:"inline-block px-2 py-0.5 rounded text-xs mr-1 bg-emerald-500/20 text-emerald-200",children:oe},`x-${oe}`))}),ne.length?ne:s.jsx("span",{className:"text-slate-500",children:""})},W=M=>{C(M.name),T(M.description??""),se((M.permissions??[]).join(", ")),K(null)},he=()=>{C(null),T(""),se(""),K(null)},fe=async M=>{var me;M.preventDefault();const D=V.trim();if(!D)return;const ne=jr();if(!ne)return;const oe=window;if(!((me=oe.auth)!=null&&me.getAccessToken))return;const pe=de.split(",").map(ie=>ie.trim()).filter(Boolean);z(!0),w(null),I(null);try{const ie=await new Promise(Se=>oe.auth.getAccessToken(Se)),je=await fetch(`${ne}/admin/groups`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ie}`},body:JSON.stringify({name:D,description:te.trim(),permissions:pe})});if(!je.ok){const Se=await je.json().catch(()=>({}));throw new Error(Se.error||"Failed to create group")}G(""),ye(""),_(""),w("Group created."),ae()}catch(ie){I((ie==null?void 0:ie.message)??"Failed to create group")}finally{z(!1)}},ve=async M=>{var pe;if(M.preventDefault(),!b)return;const D=jr();if(!D)return;const ne=window;if(!((pe=ne.auth)!=null&&pe.getAccessToken))return;const oe=Z.split(",").map(me=>me.trim()).filter(Boolean);J(!0),K(null);try{const me=await new Promise(je=>ne.auth.getAccessToken(je)),ie=await fetch(`${D}/admin/groups/${encodeURIComponent(b)}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${me}`},body:JSON.stringify({description:A,permissions:oe})});if(!ie.ok){const je=await ie.json().catch(()=>({}));throw new Error(je.error||"Failed to update group")}N(je=>je.map(Se=>Se.name===b?{...Se,description:A,permissions:oe}:Se)),he()}catch(me){K((me==null?void 0:me.message)??"Failed to update group")}finally{J(!1)}},Ee=async M=>{var oe;if(!window.confirm(`Delete group "${M}"? Members will lose access.`))return;const D=jr();if(!D)return;const ne=window;if((oe=ne.auth)!=null&&oe.getAccessToken){be(M);try{const pe=await new Promise(ie=>ne.auth.getAccessToken(ie)),me=await fetch(`${D}/admin/groups/${encodeURIComponent(M)}`,{method:"DELETE",headers:{Authorization:`Bearer ${pe}`}});if(!me.ok){const ie=await me.json().catch(()=>({}));throw new Error(ie.error||"Failed to delete group")}N(ie=>ie.filter(je=>je.name!==M)),b===M&&he()}catch(pe){I((pe==null?void 0:pe.message)??"Failed to delete group")}finally{be(null)}}},$e=M=>{const D=parseInt(M.target.value,10);p(D),sessionStorage.setItem("funkedupshift_lastlogin_tz",String(D))};return O?s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ge,{to:"/",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(it,{className:"h-4 w-4"}),"Back to Home"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Membership"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manage users and groups."})]}),s.jsxs("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:[s.jsx("button",{type:"button",onClick:()=>c("users"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="users"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Users"}),s.jsx("button",{type:"button",onClick:()=>c("groups"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="groups"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Groups"})]}),o==="users"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("label",{htmlFor:"tz-select",className:"text-slate-500",children:"Last login timezone:"}),s.jsx("select",{id:"tz-select",value:f,onChange:$e,className:"rounded border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 text-sm",children:Ai.map(M=>s.jsx("option",{value:M.value,children:M.label},M.value))})]}),v&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:v}),s.jsx("div",{className:"overflow-x-auto rounded-lg border border-slate-800",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-800",children:[s.jsx("thead",{className:"bg-slate-900/80",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Email"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Status"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Last login"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"System Roles"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Custom Groups"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-800",children:m&&d.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-slate-500",children:"Loading"})}):d.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-slate-500",children:"No users found."})}):d.map(M=>s.jsx(sv,{user:M,tzOffset:f,formatLastLogin:nv,renderGroupBadges:U,loadUserGroups:X,onClick:()=>we(M)},M.username))})]})}),y&&s.jsx("div",{className:"flex justify-center",children:s.jsx("button",{type:"button",onClick:()=>Y(y),disabled:m,className:"rounded-md border border-slate-700 px-4 py-2 text-sm font-medium text-slate-200 hover:bg-slate-800 disabled:opacity-50",children:m?"Loading":"Load more"})})]}),o==="groups"&&s.jsxs(s.Fragment,{children:[s.jsxs("form",{className:"space-y-3 max-w-md",onSubmit:fe,children:[s.jsx("h2",{className:"text-sm font-medium text-slate-300",children:"Create group"}),s.jsx("input",{type:"text",value:V,onChange:M=>G(M.target.value),placeholder:"Name (alphanumeric, underscore, hyphen)",required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("input",{type:"text",value:te,onChange:M=>ye(M.target.value),placeholder:"Description (optional)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("input",{type:"text",value:de,onChange:M=>_(M.target.value),placeholder:"Permissions (comma-separated, e.g. media:edit, sites:add)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("button",{type:"submit",disabled:$||!V.trim(),className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:$?"Creating":"Create"}),Q&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:Q}),R&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:R})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-sm font-medium text-slate-300 mb-2",children:"Custom groups"}),E?s.jsx("p",{className:"text-sm text-slate-500",children:"Loading"}):x.length===0?s.jsx("p",{className:"text-sm text-slate-500",children:"No custom groups yet. Create one above."}):s.jsx("ul",{className:"space-y-2",children:x.map(M=>s.jsx("li",{className:"rounded-lg border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm",children:b===M.name?s.jsxs("form",{onSubmit:ve,className:"space-y-2",children:[s.jsx("span",{className:"font-medium text-slate-200",children:M.name}),s.jsx("input",{type:"text",value:A,onChange:D=>T(D.target.value),placeholder:"Description (optional)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("input",{type:"text",value:Z,onChange:D=>se(D.target.value),placeholder:"Permissions (comma-separated)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsxs("div",{className:"flex gap-2 flex-wrap",children:[s.jsx("button",{type:"submit",disabled:H,className:"rounded-md bg-brand-orange px-3 py-1.5 text-xs font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:H?"Saving":"Save"}),s.jsx("button",{type:"button",onClick:he,className:"rounded-md border border-slate-700 px-3 py-1.5 text-xs font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"}),s.jsx("button",{type:"button",onClick:()=>Ee(M.name),disabled:le===M.name,className:"rounded-md border border-red-500/60 px-3 py-1.5 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:le===M.name?"Deleting":"Delete"})]}),L&&s.jsx("p",{className:"text-xs text-red-400",children:L})]}):s.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("span",{className:"font-medium text-slate-200",children:M.name}),M.description&&s.jsx("span",{className:"text-slate-500 ml-2",children:M.description}),M.permissions&&M.permissions.length>0&&s.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Permissions: ",M.permissions.join(", ")]})]}),s.jsxs("div",{className:"flex gap-2 shrink-0",children:[s.jsx("button",{type:"button",onClick:()=>W(M),className:"rounded-md border border-slate-700 px-2 py-1 text-xs font-medium text-slate-300 hover:bg-slate-800",children:"Edit"}),s.jsx("button",{type:"button",onClick:()=>Ee(M.name),disabled:le===M.name,className:"rounded-md border border-red-500/60 px-2 py-1 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:le===M.name?"Deleting":"Delete"})]})]})},M.name))})]})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Membership"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})},sv=({user:e,tzOffset:t,formatLastLogin:n,renderGroupBadges:r,loadUserGroups:a,onClick:l})=>{const[o,i]=u.useState(null);return u.useEffect(()=>{let c=!1;return a(e).then(d=>{c||i(d)}),()=>{c=!0}},[e.username]),s.jsxs("tr",{className:"cursor-pointer hover:bg-slate-800/50 transition-colors",onClick:l,children:[s.jsx("td",{className:"px-4 py-3 text-sm text-slate-200",children:e.email||e.username||""}),s.jsx("td",{className:"px-4 py-3 text-sm text-slate-400",children:e.status||""}),s.jsx("td",{className:"px-4 py-3 text-sm text-slate-400",children:n(e.lastLoginAt??"",t,e.lastLoginIp)}),s.jsx("td",{className:"px-4 py-3 text-sm",children:o?r(o.cognitoGroups,[]):s.jsx("span",{className:"text-slate-500",children:""})}),s.jsx("td",{className:"px-4 py-3 text-sm",children:o?r([],o.customGroups):s.jsx("span",{className:"text-slate-500",children:""})})]})};function Jn(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const od=100,av=5*1024*1024,lv=()=>{const e=Xt(),{user:t}=et(),[n,r]=qn(),a=n.get("tab"),l=a==="categories"?"categories":"add",[o,i]=u.useState(l);u.useEffect(()=>{i(a==="categories"?"categories":"add")},[a]);const c=F=>{i(F);const ee=new URLSearchParams(n);F==="categories"?ee.set("tab","categories"):ee.delete("tab"),r(ee)},[d,h]=u.useState([]),[m,g]=u.useState(""),[v,j]=u.useState(""),[y,S]=u.useState(""),[f,p]=u.useState(!1),[x,N]=u.useState(null),[E,P]=u.useState(null),[R,I]=u.useState(null),[V,G]=u.useState(""),[te,ye]=u.useState([]),[de,_]=u.useState(""),[$,z]=u.useState(!1),[Q,w]=u.useState(!1),[b,C]=u.useState(null),[A,T]=u.useState(null),[Z,se]=u.useState(!1),H=u.useRef(null),[J,L]=u.useState(!0),[K,le]=u.useState(null),[be,O]=u.useState(""),[Y,X]=u.useState(""),[ae,we]=u.useState(!1),[U,W]=u.useState(null),[he,fe]=u.useState(null),[ve,Ee]=u.useState(""),[$e,M]=u.useState(""),[D,ne]=u.useState(!1),[oe,pe]=u.useState(null),[me,ie]=u.useState(null),je=yt(t??null,"manager");u.useEffect(()=>{var ue;if(!je)return;const F=Jn();if(!F)return;const ee=window;(ue=ee.auth)!=null&&ue.getAccessToken&&(async()=>{const Ue=await new Promise(Ce=>ee.auth.getAccessToken(Ce));if(!Ue)return;const Pe=await fetch(`${F}/categories`,{headers:{Authorization:`Bearer ${Ue}`}});if(!Pe.ok)return;const ze=((await Pe.json()).categories??[]).map(Ce=>({id:Ce.PK||Ce.id||"",name:Ce.name||Ce.PK||"",description:Ce.description}));h(ze)})()},[je]),u.useEffect(()=>{function F(ee){H.current&&!H.current.contains(ee.target)&&z(!1)}if($)return document.addEventListener("mousedown",F),()=>document.removeEventListener("mousedown",F)},[$]);const Se=d.filter(F=>!te.includes(F.id)&&(!de.trim()||(F.name||"").toLowerCase().includes(de.toLowerCase()))),Ze=F=>{var Ue;const ee=(Ue=F.target.files)==null?void 0:Ue[0];if(N(ee??null),ee&&G(""),I(null),E&&(URL.revokeObjectURL(E),P(null)),!ee)return;if(ee.size>av){I("Logo must be 5 MB or smaller.");return}const ue=new Image;ue.onload=()=>{if(ue.naturalWidth<od||ue.naturalHeight<od){I("Logo must be at least 100100 pixels.");return}I(null),P(URL.createObjectURL(ee))},ue.onerror=()=>I("Please choose a valid image file."),ue.src=URL.createObjectURL(ee)},tt=F=>{te.includes(F)||ye([...te,F]),_("")},nt=F=>{ye(te.filter(ee=>ee!==F))},nn=async()=>{var ue;const F=Jn();if(!F){le("API URL not set."),L(!1);return}const ee=window;if(!((ue=ee.auth)!=null&&ue.getAccessToken)){le("Sign in required."),L(!1);return}L(!0),le(null);try{const Ue=await new Promise(Ce=>ee.auth.getAccessToken(Ce)),Pe=await fetch(`${F}/categories`,{headers:{Authorization:`Bearer ${Ue}`}});if(!Pe.ok)throw new Error(await Pe.text());const ze=((await Pe.json()).categories??[]).map(Ce=>({id:Ce.PK||Ce.id||"",name:Ce.name||Ce.PK||"",description:Ce.description}));h(ze)}catch(Ue){le((Ue==null?void 0:Ue.message)??"Failed to load categories.")}finally{L(!1)}};u.useEffect(()=>{je&&o==="categories"&&nn()},[je,o]);const gr=async()=>{var Ue;const F=m.trim();if(!F){T("Enter URL first.");return}const ee=Jn();if(!ee){T("API URL not set.");return}const ue=window;if(!((Ue=ue.auth)!=null&&Ue.getAccessToken)){T("Sign in required.");return}se(!0),T(null);try{const Pe=await new Promise(Ce=>ue.auth.getAccessToken(Ce)),Ie=await fetch(`${ee}/sites/generate-description`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Pe}`},body:JSON.stringify({url:F})});if(!Ie.ok)throw new Error(await Ie.text());const ze=await Ie.json();S(ze.description??""),p(!0)}catch(Pe){T((Pe==null?void 0:Pe.message)??"Failed to generate description.")}finally{se(!1)}},gn=async F=>{var Pe;F.preventDefault();const ee=m.trim();if(!ee){T("URL is required.");return}const ue=Jn();if(!ue){T("API URL not set.");return}const Ue=window;if(!((Pe=Ue.auth)!=null&&Pe.getAccessToken)){T("Sign in required.");return}if(!(x&&R)){w(!0),T(null),C(null);try{const Ie=await new Promise(ft=>Ue.auth.getAccessToken(ft));let ze=null;if(V.trim()){const ft=await fetch(`${ue}/sites/logo-from-url`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ie}`},body:JSON.stringify({siteId:"new",imageUrl:V.trim()})});if(!ft.ok){const vr=await ft.json().catch(()=>({}));throw new Error(vr.error||await ft.text())}const vt=await ft.json();vt.key&&(ze=vt.key)}else if(x){const ft=await fetch(`${ue}/sites/logo-upload`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ie}`},body:JSON.stringify({siteId:"new",contentType:x.type||"image/png"})});if(!ft.ok)throw new Error("Logo upload request failed");const{uploadUrl:vt,key:vr}=await ft.json();if(!(await fetch(vt,{method:"PUT",headers:{"Content-Type":x.type||"image/png"},body:x})).ok)throw new Error("Logo upload failed");ze=vr}const Ce={url:ee,title:v.trim()||ee,description:y.trim(),categoryIds:te};f&&(Ce.descriptionAiGenerated=!0),ze&&(Ce.logoKey=ze);const Qn=await fetch(`${ue}/sites`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ie}`},body:JSON.stringify(Ce)});if(!Qn.ok)throw new Error(await Qn.text());const yr=await Qn.json();C(`Site added: ${yr.title||yr.url||ee}`),g(""),j(""),S(""),p(!1),N(null),E&&URL.revokeObjectURL(E),P(null),ye([]),setTimeout(()=>e("/websites"),1500)}catch(Ie){T((Ie==null?void 0:Ie.message)??"Failed to add site.")}finally{w(!1)}}},q=F=>{fe(F.id),Ee(F.name),M(F.description??"")},xe=()=>{fe(null),Ee(""),M(""),pe(null)},De=async F=>{var Ue;if(F.preventDefault(),!he)return;const ee=Jn();if(!ee)return;const ue=window;if((Ue=ue.auth)!=null&&Ue.getAccessToken){ne(!0),pe(null);try{const Pe=await new Promise(ze=>ue.auth.getAccessToken(ze)),Ie=await fetch(`${ee}/categories`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Pe}`},body:JSON.stringify({id:he,name:ve.trim(),description:$e.trim()||void 0})});if(!Ie.ok)throw new Error(await Ie.text());h(ze=>ze.map(Ce=>Ce.id===he?{...Ce,name:ve.trim(),description:$e.trim()||void 0}:Ce)),xe()}catch(Pe){pe((Pe==null?void 0:Pe.message)??"Failed to update category.")}finally{ne(!1)}}},Oe=async F=>{var Ue;if(!window.confirm("Delete this category? Sites using it will lose this category."))return;const ee=Jn();if(!ee)return;const ue=window;if((Ue=ue.auth)!=null&&Ue.getAccessToken){ie(F);try{const Pe=await new Promise(ze=>ue.auth.getAccessToken(ze)),Ie=await fetch(`${ee}/categories?id=${encodeURIComponent(F)}`,{method:"DELETE",headers:{Authorization:`Bearer ${Pe}`}});if(!Ie.ok)throw new Error(await Ie.text());h(ze=>ze.filter(Ce=>Ce.id!==F)),he===F&&xe()}catch(Pe){le((Pe==null?void 0:Pe.message)??"Failed to delete category.")}finally{ie(null)}}},Re=async F=>{var Pe;F.preventDefault();const ee=be.trim();if(!ee)return;const ue=Jn();if(!ue)return;const Ue=window;if((Pe=Ue.auth)!=null&&Pe.getAccessToken){we(!0),W(null),le(null);try{const Ie=await new Promise(Ce=>Ue.auth.getAccessToken(Ce)),ze=await fetch(`${ue}/categories`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ie}`},body:JSON.stringify({name:ee,description:Y.trim()})});if(!ze.ok)throw new Error(await ze.text());O(""),X(""),W("Category created."),nn()}catch(Ie){le((Ie==null?void 0:Ie.message)??"Failed to create category.")}finally{we(!1)}}};return je?s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ge,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(it,{className:"h-4 w-4"}),"Back to Websites"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Websites"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Add sites and manage website categories."})]}),s.jsxs("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:[s.jsx("button",{type:"button",onClick:()=>c("add"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="add"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Add Site"}),s.jsx("button",{type:"button",onClick:()=>c("categories"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="categories"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Website Categories"})]}),o==="add"&&s.jsxs("form",{className:"space-y-4 max-w-xl",onSubmit:gn,children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"URL *"}),s.jsx("input",{type:"url",value:m,onChange:F=>g(F.target.value),placeholder:"https://example.com",required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Title (optional)"}),s.jsx("input",{type:"text",value:v,onChange:F=>j(F.target.value),placeholder:"Display title",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description (optional)"}),s.jsx("textarea",{value:y,onChange:F=>{S(F.target.value),p(!1)},placeholder:"Short description",rows:4,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("button",{type:"button",onClick:gr,disabled:Z||!m.trim(),className:"mt-2 rounded-md border border-slate-700 bg-slate-800 px-3 py-1.5 text-xs font-medium text-slate-200 hover:bg-slate-700 disabled:opacity-50",children:Z?"Generating":"Generate AI description"}),f&&s.jsx("span",{className:"ml-2 text-xs uppercase tracking-wide text-slate-500",children:"AI summary"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Logo (optional, min 100100, max 5 MB)"}),s.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/gif,image/webp",onChange:Ze,className:"block w-full text-xs text-slate-300 file:mr-3 file:rounded-md file:border-0 file:bg-slate-800 file:px-3 file:py-1.5 file:text-slate-100"}),s.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Or paste image URL (image will be copied to S3 on save):"}),s.jsx("input",{type:"url",value:V,onChange:F=>{G(F.target.value),F.target.value.trim()&&N(null)},placeholder:"https://example.com/logo.png",className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),E&&s.jsx("div",{className:"mt-2",children:s.jsx("img",{src:E,alt:"Preview",className:"h-16 w-16 rounded-lg border border-slate-700 object-cover"})}),R&&s.jsx("p",{className:"mt-1 text-xs text-red-400",children:R})]}),s.jsxs("div",{ref:H,className:"relative",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Categories (optional)"}),s.jsx("input",{type:"text",value:de,onChange:F=>_(F.target.value),onFocus:()=>z(!0),placeholder:"Search and select",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),$&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"absolute left-0 right-0 top-full z-10 mt-1 max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",children:Se.length?Se.map(F=>s.jsx("button",{type:"button",onClick:()=>tt(F.id),className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:F.name},F.id)):s.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:"No matches"})}),d.length===0&&s.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["No categories."," ",s.jsx("button",{type:"button",onClick:()=>c("categories"),className:"text-brand-orange hover:underline",children:"Create categories"})]})]}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:te.map(F=>{const ee=d.find(ue=>ue.id===F);return s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(ee==null?void 0:ee.name)??F,s.jsx("button",{type:"button",onClick:()=>nt(F),className:"hover:text-red-400","aria-label":"Remove",children:""})]},F)})})]}),s.jsx("button",{type:"submit",disabled:Q,className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:Q?"Adding":"Add Site"}),b&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:b}),A&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:A})]}),o==="categories"&&s.jsxs(s.Fragment,{children:[s.jsxs("form",{className:"space-y-3 max-w-md",onSubmit:Re,children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"New category name"}),s.jsx("input",{type:"text",value:be,onChange:F=>O(F.target.value),placeholder:"e.g. Developer tools",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description (optional)"}),s.jsx("input",{type:"text",value:Y,onChange:F=>X(F.target.value),placeholder:"Optional description",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsx("button",{type:"submit",disabled:ae||!be.trim(),className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:ae?"Creating":"Create category"}),U&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:U}),K&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:K})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-sm font-medium text-slate-300 mb-2",children:"Existing categories"}),J?s.jsx("p",{className:"text-sm text-slate-500",children:"Loading"}):d.length===0?s.jsx("p",{className:"text-sm text-slate-500",children:"No categories yet. Create one above."}):s.jsx("ul",{className:"space-y-2",children:d.map(F=>s.jsx("li",{className:"rounded-lg border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm",children:he===F.id?s.jsxs("form",{onSubmit:De,className:"space-y-2",children:[s.jsx("input",{type:"text",value:ve,onChange:ee=>Ee(ee.target.value),placeholder:"Name",required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",autoFocus:!0}),s.jsx("input",{type:"text",value:$e,onChange:ee=>M(ee.target.value),placeholder:"Description (optional)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsxs("div",{className:"flex gap-2 flex-wrap",children:[s.jsx("button",{type:"submit",disabled:D||!ve.trim(),className:"rounded-md bg-brand-orange px-3 py-1.5 text-xs font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:D?"Saving":"Save"}),s.jsx("button",{type:"button",onClick:xe,className:"rounded-md border border-slate-700 px-3 py-1.5 text-xs font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"}),s.jsx("button",{type:"button",onClick:()=>Oe(F.id),disabled:me===F.id,className:"rounded-md border border-red-500/60 px-3 py-1.5 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:me===F.id?"Deleting":"Delete"})]}),oe&&s.jsx("p",{className:"text-xs text-red-400",children:oe})]}):s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>q(F),className:"flex-1 min-w-0 text-left hover:bg-slate-800/50 rounded px-1 -mx-1 py-1 -my-1 transition-colors",children:[s.jsx("span",{className:"font-medium text-slate-200",children:F.name}),F.description&&s.jsx("span",{className:"text-slate-500 truncate max-w-xs ml-2",children:F.description})]}),s.jsx("button",{type:"button",onClick:()=>Oe(F.id),disabled:me===F.id,className:"rounded px-2 py-1 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50 shrink-0","aria-label":"Delete category",children:me===F.id?"":"Delete"})]})},F.id))})]})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Websites"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})};function Nr(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function ov(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}const iv=()=>{const e=Xt(),{user:t}=et(),[n,r]=qn(),a=n.get("tab"),l=a==="categories"?"categories":"add",[o,i]=u.useState(l);u.useEffect(()=>{i(a==="categories"?"categories":"add")},[a]);const c=q=>{i(q);const xe=new URLSearchParams(n);q==="categories"?xe.set("tab","categories"):xe.delete("tab"),r(xe)},[d,h]=u.useState([]),[m,g]=u.useState(""),[v,j]=u.useState(""),[y,S]=u.useState(null),[f,p]=u.useState(null),[x,N]=u.useState(null),[E,P]=u.useState(!1),[R,I]=u.useState([]),[V,G]=u.useState(""),[te,ye]=u.useState(!1),[de,_]=u.useState(!1),[$,z]=u.useState(null),[Q,w]=u.useState(null),b=u.useRef(null),[C,A]=u.useState(!0),[T,Z]=u.useState(null),[se,H]=u.useState(""),[J,L]=u.useState(""),[K,le]=u.useState(!1),[be,O]=u.useState(null),[Y,X]=u.useState(null),[ae,we]=u.useState(""),[U,W]=u.useState(""),[he,fe]=u.useState(!1),[ve,Ee]=u.useState(null),[$e,M]=u.useState(null),D=yt(t??null,"manager");u.useEffect(()=>{var De;if(!D)return;const q=Nr();if(!q)return;const xe=window;(De=xe.auth)!=null&&De.getAccessToken&&(async()=>{const Oe=await new Promise(ue=>xe.auth.getAccessToken(ue));if(!Oe)return;const Re=await fetch(`${q}/media-categories`,{headers:{Authorization:`Bearer ${Oe}`}});if(!Re.ok)return;const ee=((await Re.json()).categories??[]).map(ue=>({id:ue.PK||ue.id||"",name:ue.name||ue.PK||"",description:ue.description}));h(ee)})()},[D]),u.useEffect(()=>{function q(xe){b.current&&!b.current.contains(xe.target)&&ye(!1)}if(te)return document.addEventListener("mousedown",q),()=>document.removeEventListener("mousedown",q)},[te]);const ne=d.filter(q=>!R.includes(q.id)&&(!V.trim()||(q.name||"").toLowerCase().includes(V.toLowerCase()))),oe=q=>{var De;const xe=(De=q.target.files)==null?void 0:De[0];S(xe??null),N(null),w(null),f&&(URL.revokeObjectURL(f),p(null)),xe&&(p(URL.createObjectURL(xe)),xe.type.startsWith("video/")&&P(!0))},pe=u.useRef(null),me=q=>{var De;const xe=(De=q.target.files)==null?void 0:De[0];xe&&xe.type.startsWith("image/")&&(N(xe),P(!1)),q.target.value=""},ie=q=>{R.includes(q)||I([...R,q]),G("")},je=q=>{I(R.filter(xe=>xe!==q))},Se=async()=>{var De;const q=Nr();if(!q){Z("API URL not set."),A(!1);return}const xe=window;if(!((De=xe.auth)!=null&&De.getAccessToken)){Z("Sign in required."),A(!1);return}A(!0),Z(null);try{const Oe=await new Promise(ue=>xe.auth.getAccessToken(ue)),Re=await fetch(`${q}/media-categories`,{headers:{Authorization:`Bearer ${Oe}`}});if(!Re.ok)throw new Error(await Re.text());const ee=((await Re.json()).categories??[]).map(ue=>({id:ue.PK||ue.id||"",name:ue.name||ue.PK||"",description:ue.description}));h(ee)}catch(Oe){Z((Oe==null?void 0:Oe.message)??"Failed to load media categories.")}finally{A(!1)}};u.useEffect(()=>{D&&o==="categories"&&Se()},[D,o]);const Ze=async q=>{var F;if(q.preventDefault(),!y){w("Please select an image or video file.");return}const xe=Nr();if(!xe){w("API URL not set.");return}const De=window;if(!((F=De.auth)!=null&&F.getAccessToken)){w("Sign in required.");return}const Oe=y.type.startsWith("video/")?"video":"image",Re=`MEDIA#${ov()}`;_(!0),w(null),z(null);try{const ee=await new Promise(Ce=>De.auth.getAccessToken(Ce)),ue=await fetch(`${xe}/media/upload`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ee}`},body:JSON.stringify({mediaId:Re,mediaType:Oe,contentType:y.type||(Oe==="image"?"image/png":"video/mp4")})});if(!ue.ok)throw new Error("Upload request failed");const{uploadUrl:Ue,key:Pe}=await ue.json(),Ie=await fetch(`${xe}/media`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ee}`},body:JSON.stringify({id:Re,mediaKey:Pe,title:m.trim()||"Untitled",description:v.trim(),mediaType:Oe,categoryIds:R})});if(!Ie.ok)throw new Error(await Ie.text());if(!(await fetch(Ue,{method:"PUT",headers:{"Content-Type":y.type||(Oe==="image"?"image/png":"video/mp4")},body:y})).ok)throw new Error("File upload failed");if(Oe==="video"&&x){const Ce=await fetch(`${xe}/media/thumbnail-upload`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ee}`},body:JSON.stringify({mediaId:Re,contentType:x.type||"image/jpeg"})});if(Ce.ok){const{uploadUrl:Qn,key:yr}=await Ce.json();(await fetch(Qn,{method:"PUT",headers:{"Content-Type":x.type||"image/jpeg"},body:x})).ok&&((await fetch(`${xe}/media`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ee}`},body:JSON.stringify({id:Re,thumbnailKey:yr})})).ok||console.warn("Thumbnail uploaded but update failed"))}}z("Media added."),g(""),j(""),S(null),N(null),f&&URL.revokeObjectURL(f),p(null),I([]),setTimeout(()=>e("/media"),1500)}catch(ee){w((ee==null?void 0:ee.message)??"Failed to add media.")}finally{_(!1)}},tt=q=>{X(q.id),we(q.name),W(q.description??"")},nt=()=>{X(null),we(""),W(""),Ee(null)},nn=async q=>{var Oe;if(q.preventDefault(),!Y)return;const xe=Nr();if(!xe)return;const De=window;if((Oe=De.auth)!=null&&Oe.getAccessToken){fe(!0),Ee(null);try{const Re=await new Promise(ee=>De.auth.getAccessToken(ee)),F=await fetch(`${xe}/media-categories`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Re}`},body:JSON.stringify({id:Y,name:ae.trim(),description:U.trim()||void 0})});if(!F.ok)throw new Error(await F.text());h(ee=>ee.map(ue=>ue.id===Y?{...ue,name:ae.trim(),description:U.trim()||void 0}:ue)),nt()}catch(Re){Ee((Re==null?void 0:Re.message)??"Failed to update media category.")}finally{fe(!1)}}},gr=async q=>{var Oe;if(!window.confirm("Delete this media category? Media using it will lose this category."))return;const xe=Nr();if(!xe)return;const De=window;if((Oe=De.auth)!=null&&Oe.getAccessToken){M(q);try{const Re=await new Promise(ee=>De.auth.getAccessToken(ee)),F=await fetch(`${xe}/media-categories?id=${encodeURIComponent(q)}`,{method:"DELETE",headers:{Authorization:`Bearer ${Re}`}});if(!F.ok)throw new Error(await F.text());h(ee=>ee.filter(ue=>ue.id!==q)),Y===q&&nt()}catch(Re){Z((Re==null?void 0:Re.message)??"Failed to delete media category.")}finally{M(null)}}},gn=async q=>{var Re;q.preventDefault();const xe=se.trim();if(!xe)return;const De=Nr();if(!De)return;const Oe=window;if((Re=Oe.auth)!=null&&Re.getAccessToken){le(!0),O(null),Z(null);try{const F=await new Promise(ue=>Oe.auth.getAccessToken(ue)),ee=await fetch(`${De}/media-categories`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${F}`},body:JSON.stringify({name:xe,description:J.trim()})});if(!ee.ok)throw new Error(await ee.text());H(""),L(""),O("Media category created."),Se()}catch(F){Z((F==null?void 0:F.message)??"Failed to create media category.")}finally{le(!1)}}};return D?s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ge,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(it,{className:"h-4 w-4"}),"Back to Media"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Media"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Add media and manage media categories."})]}),s.jsxs("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:[s.jsx("button",{type:"button",onClick:()=>c("add"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="add"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Add Media"}),s.jsx("button",{type:"button",onClick:()=>c("categories"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="categories"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Media Categories"})]}),o==="add"&&s.jsxs("form",{className:"space-y-4 max-w-xl",onSubmit:Ze,children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Title (optional)"}),s.jsx("input",{type:"text",value:m,onChange:q=>g(q.target.value),placeholder:"Untitled",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description (optional)"}),s.jsx("textarea",{value:v,onChange:q=>j(q.target.value),placeholder:"Description",rows:3,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Image or video *"}),s.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/gif,image/webp,video/mp4,video/webm",onChange:oe,className:"block w-full text-xs text-slate-300 file:mr-3 file:rounded-md file:border-0 file:bg-slate-800 file:px-3 file:py-1.5 file:text-slate-100"}),s.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Videos get an auto-generated thumbnail from the 34 sec frame. Change it when editing."}),(y==null?void 0:y.type.startsWith("video/"))&&x&&s.jsxs("p",{className:"mt-1 text-xs text-emerald-400",children:["Custom thumbnail: ",x.name," ",s.jsx("button",{type:"button",onClick:()=>P(!0),className:"text-brand-orange hover:underline",children:"Change"})]}),E&&(y==null?void 0:y.type.startsWith("video/"))&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",role:"dialog","aria-modal":"true","aria-labelledby":"thumbnail-dialog-title",onClick:()=>P(!1),children:s.jsxs("div",{className:"rounded-lg border border-slate-700 bg-slate-900 p-6 shadow-xl max-w-sm w-full mx-4",onClick:q=>q.stopPropagation(),children:[s.jsx("h2",{id:"thumbnail-dialog-title",className:"text-lg font-medium text-slate-100 mb-2",children:"Add thumbnail"}),s.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"Choose a custom thumbnail image for this video (optional)."}),s.jsx("input",{ref:pe,type:"file",accept:"image/png,image/jpeg,image/gif,image/webp",onChange:me,className:"hidden"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:()=>{var q;return(q=pe.current)==null?void 0:q.click()},className:"rounded-md bg-slate-700 px-3 py-2 text-sm font-medium text-slate-100 hover:bg-slate-600",children:"Choose file"}),s.jsx("button",{type:"button",onClick:()=>P(!1),className:"rounded-md border border-slate-600 px-3 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Skip"})]})]})}),f&&s.jsx("div",{className:"mt-2",children:y!=null&&y.type.startsWith("video/")?s.jsx("video",{src:f,muted:!0,controls:!0,className:"max-h-32 rounded-lg border border-slate-700"}):s.jsx("img",{src:f,alt:"Preview",className:"h-24 w-auto rounded-lg border border-slate-700 object-cover"})})]}),s.jsxs("div",{ref:b,className:"relative",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Media categories (optional)"}),s.jsx("input",{type:"text",value:V,onChange:q=>G(q.target.value),onFocus:()=>ye(!0),placeholder:"Search and select",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),te&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"absolute left-0 right-0 top-full z-10 mt-1 max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",children:ne.length?ne.map(q=>s.jsx("button",{type:"button",onClick:()=>ie(q.id),className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:q.name},q.id)):s.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:"No matches"})}),d.length===0&&s.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["No categories."," ",s.jsx("button",{type:"button",onClick:()=>c("categories"),className:"text-brand-orange hover:underline",children:"Create media categories"})]})]}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:R.map(q=>{const xe=d.find(De=>De.id===q);return s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(xe==null?void 0:xe.name)??q,s.jsx("button",{type:"button",onClick:()=>je(q),className:"hover:text-red-400","aria-label":"Remove",children:""})]},q)})})]}),s.jsx("button",{type:"submit",disabled:de||!y,className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:de?"Uploading":"Add Media"}),$&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:$}),Q&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:Q})]}),o==="categories"&&s.jsxs(s.Fragment,{children:[s.jsxs("form",{className:"space-y-3 max-w-md",onSubmit:gn,children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"New category name"}),s.jsx("input",{type:"text",value:se,onChange:q=>H(q.target.value),placeholder:"e.g. Tutorials",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description (optional)"}),s.jsx("input",{type:"text",value:J,onChange:q=>L(q.target.value),placeholder:"Optional description",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsx("button",{type:"submit",disabled:K||!se.trim(),className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:K?"Creating":"Create media category"}),be&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:be}),T&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:T})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-sm font-medium text-slate-300 mb-2",children:"Existing media categories"}),C?s.jsx("p",{className:"text-sm text-slate-500",children:"Loading"}):d.length===0?s.jsx("p",{className:"text-sm text-slate-500",children:"No media categories yet. Create one above."}):s.jsx("ul",{className:"space-y-2",children:d.map(q=>s.jsx("li",{className:"rounded-lg border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm",children:Y===q.id?s.jsxs("form",{onSubmit:nn,className:"space-y-2",children:[s.jsx("input",{type:"text",value:ae,onChange:xe=>we(xe.target.value),placeholder:"Name",required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",autoFocus:!0}),s.jsx("input",{type:"text",value:U,onChange:xe=>W(xe.target.value),placeholder:"Description (optional)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsxs("div",{className:"flex gap-2 flex-wrap",children:[s.jsx("button",{type:"submit",disabled:he||!ae.trim(),className:"rounded-md bg-brand-orange px-3 py-1.5 text-xs font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:he?"Saving":"Save"}),s.jsx("button",{type:"button",onClick:nt,className:"rounded-md border border-slate-700 px-3 py-1.5 text-xs font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"}),s.jsx("button",{type:"button",onClick:()=>gr(q.id),disabled:$e===q.id,className:"rounded-md border border-red-500/60 px-3 py-1.5 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:$e===q.id?"Deleting":"Delete"})]}),ve&&s.jsx("p",{className:"text-xs text-red-400",children:ve})]}):s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>tt(q),className:"flex-1 min-w-0 text-left hover:bg-slate-800/50 rounded px-1 -mx-1 py-1 -my-1 transition-colors",children:[s.jsx("span",{className:"font-medium text-slate-200",children:q.name}),q.description&&s.jsx("span",{className:"text-slate-500 truncate max-w-xs ml-2",children:q.description})]}),s.jsx("button",{type:"button",onClick:()=>gr(q.id),disabled:$e===q.id,className:"rounded px-2 py-1 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50 shrink-0","aria-label":"Delete category",children:$e===q.id?"":"Delete"})]})},q.id))})]})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Media"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})};function Na(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const id=100,uv=5*1024*1024,cv=()=>{const{id:e}=$l(),t=Xt(),{user:n}=et(),[r,a]=u.useState(!0),[l,o]=u.useState(""),[i,c]=u.useState(""),[d,h]=u.useState(""),[m,g]=u.useState(!1),[v,j]=u.useState([]),[y,S]=u.useState(""),[f,p]=u.useState(""),[x,N]=u.useState(null),[E,P]=u.useState(!1),[R,I]=u.useState(null),[V,G]=u.useState(""),[te,ye]=u.useState(null),[de,_]=u.useState(null),[$,z]=u.useState([]),[Q,w]=u.useState([]),[b,C]=u.useState(""),[A,T]=u.useState(!1),[Z,se]=u.useState(!1),[H,J]=u.useState(!1),[L,K]=u.useState(!1),[le,be]=u.useState(null),[O,Y]=u.useState(null),X=yt(n??null,"manager"),ae=e?decodeURIComponent(e):"";u.useEffect(()=>{var pe;if(!X||!ae){a(!1);return}const D=Na();if(!D){Y("API URL not set."),a(!1);return}const ne=window;if(!((pe=ne.auth)!=null&&pe.getAccessToken)){Y("Sign in required."),a(!1);return}let oe=!1;return(async()=>{const me=await new Promise(tt=>ne.auth.getAccessToken(tt));if(!me||oe)return;const ie=await fetch(`${D}/sites?id=${encodeURIComponent(ae)}`);if(ie.status===404||!ie.ok){oe||Y("Site not found."),a(!1);return}const Se=(await ie.json()).site;if(oe||!Se){a(!1);return}o(Se.url??""),c(Se.title??""),h(Se.description??""),g(!!Se.descriptionAiGenerated),j(Array.isArray(Se.tags)?Se.tags:[]),S(""),p(Se.scrapedContent??""),N(Se.logoUrl||null),w(Array.isArray(Se.categoryIds)?Se.categoryIds:[]);const Ze=await fetch(`${D}/categories`,{headers:{Authorization:`Bearer ${me}`}});if(Ze.ok&&!oe){const tt=await Ze.json();z((tt.categories??[]).map(nt=>({id:nt.PK||nt.id||"",name:nt.name||nt.PK||""})))}oe||a(!1)})(),()=>{oe=!0}},[X,ae]);const we=D=>{var pe;const ne=(pe=D.target.files)==null?void 0:pe[0];if(I(ne??null),G(""),_(null),P(!1),te&&(URL.revokeObjectURL(te),ye(null)),!ne)return;if(ne.size>uv){_("Logo must be 5 MB or smaller.");return}const oe=new Image;oe.onload=()=>{if(oe.naturalWidth<id||oe.naturalHeight<id){_("Logo must be at least 100100 pixels.");return}_(null),ye(URL.createObjectURL(ne))},oe.onerror=()=>_("Please choose a valid image file."),oe.src=URL.createObjectURL(ne)},U=D=>{Q.includes(D)||w([...Q,D]),C(""),T(!1)},W=D=>{w(Q.filter(ne=>ne!==D))},he=()=>{const D=y.trim();D&&!v.includes(D)&&j([...v,D]),S("")},fe=D=>j(v.filter(ne=>ne!==D)),ve=$.filter(D=>!Q.includes(D.id)&&(!b.trim()||(D.name||"").toLowerCase().includes(b.toLowerCase()))),Ee=async()=>{var pe;const D=l.trim();if(!D){Y("Enter URL first.");return}const ne=Na();if(!ne){Y("API URL not set.");return}const oe=window;if(!((pe=oe.auth)!=null&&pe.getAccessToken)){Y("Sign in required.");return}K(!0),Y(null);try{const me=await new Promise(Se=>oe.auth.getAccessToken(Se)),ie=await fetch(`${ne}/sites/generate-description`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${me}`},body:JSON.stringify({url:D})});if(!ie.ok)throw new Error(await ie.text());const je=await ie.json();h(je.description??""),g(!0)}catch(me){Y((me==null?void 0:me.message)??"Failed to generate description.")}finally{K(!1)}},$e=async D=>{var pe;if(D.preventDefault(),!ae)return;const ne=Na();if(!ne){Y("API URL not set.");return}const oe=window;if(!((pe=oe.auth)!=null&&pe.getAccessToken)){Y("Sign in required.");return}if(!(R&&de)){se(!0),Y(null),be(null);try{const me=await new Promise(Ze=>oe.auth.getAccessToken(Ze));let ie=null;if(R){const Ze=await fetch(`${ne}/sites/logo-upload`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${me}`},body:JSON.stringify({siteId:ae,contentType:R.type||"image/png"})});if(!Ze.ok)throw new Error("Logo upload request failed");const{uploadUrl:tt,key:nt}=await Ze.json();if(!(await fetch(tt,{method:"PUT",headers:{"Content-Type":R.type||"image/png"},body:R})).ok)throw new Error("Logo upload failed");ie=nt}else if(V.trim()){const Ze=await fetch(`${ne}/sites/logo-from-url`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${me}`},body:JSON.stringify({siteId:ae,imageUrl:V.trim()})});if(!Ze.ok){const nt=await Ze.json().catch(()=>({}));throw new Error(nt.error||await Ze.text())}const tt=await Ze.json();tt.key&&(ie=tt.key)}const je={id:ae,url:l.trim(),title:i.trim()||l.trim(),description:d.trim(),descriptionAiGenerated:m,categoryIds:Q,tags:v,scrapedContent:f.trim()||void 0};E?je.deleteLogo=!0:ie&&(je.logoKey=ie);const Se=await fetch(`${ne}/sites`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${me}`},body:JSON.stringify(je)});if(!Se.ok)throw new Error(await Se.text());be("Site updated."),te&&URL.revokeObjectURL(te),I(null),ye(null),G(""),setTimeout(()=>t(`/websites/${encodeURIComponent(ae)}`),1200)}catch(me){Y((me==null?void 0:me.message)??"Failed to update site.")}finally{se(!1)}}},M=async()=>{var oe;if(!ae||!window.confirm("Delete this site? This cannot be undone."))return;const D=Na();if(!D)return;const ne=window;if((oe=ne.auth)!=null&&oe.getAccessToken){J(!0),Y(null);try{const pe=await new Promise(ie=>ne.auth.getAccessToken(ie)),me=await fetch(`${D}/sites`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${pe}`},body:JSON.stringify({id:ae})});if(!me.ok)throw new Error(await me.text());t("/websites")}catch(pe){Y((pe==null?void 0:pe.message)??"Failed to delete site.")}finally{J(!1)}}};return X?r?s.jsxs("div",{className:"space-y-4",children:[s.jsxs(ge,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(it,{className:"h-4 w-4"}),"Back to Websites"]}),s.jsx("p",{className:"text-sm text-slate-400",children:"Loading"})]}):O&&!l&&!i?s.jsxs("div",{className:"space-y-4",children:[s.jsxs(ge,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(it,{className:"h-4 w-4"}),"Back to Websites"]}),s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:O})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ge,{to:`/websites/${encodeURIComponent(ae)}`,className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(it,{className:"h-4 w-4"}),"Back to site"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit Site"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Update URL, title, description, logo, categories, and scraped content."})]}),s.jsxs("form",{className:"space-y-4 max-w-xl",onSubmit:$e,children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"URL *"}),s.jsx("input",{type:"url",value:l,onChange:D=>o(D.target.value),required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Title"}),s.jsx("input",{type:"text",value:i,onChange:D=>c(D.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description"}),s.jsx("textarea",{value:d,onChange:D=>{h(D.target.value),g(!1)},placeholder:"Short description",rows:4,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("button",{type:"button",onClick:Ee,disabled:L||!l.trim(),className:"mt-2 rounded-md border border-slate-700 bg-slate-800 px-3 py-1.5 text-xs font-medium text-slate-200 hover:bg-slate-700 disabled:opacity-50",children:L?"Generating":"Generate AI description"}),m&&s.jsx("span",{className:"ml-2 text-xs uppercase tracking-wide text-slate-500",children:"AI summary"}),s.jsxs("label",{className:"mt-2 block inline-flex items-center gap-2 text-xs text-slate-500",children:[s.jsx("input",{type:"checkbox",checked:m,onChange:D=>g(D.target.checked)}),"AI-generated summary"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Logo"}),x&&!E&&!te&&s.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[s.jsx("img",{src:x,alt:"Current logo",className:"h-12 w-12 rounded-lg border border-slate-700 object-cover"}),s.jsxs("label",{className:"text-xs text-slate-400",children:[s.jsx("input",{type:"checkbox",checked:E,onChange:D=>P(D.target.checked)}),s.jsx("span",{className:"ml-1",children:"Remove logo"})]})]}),s.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/gif,image/webp",onChange:we,className:"block w-full text-xs text-slate-300 file:mr-3 file:rounded-md file:border-0 file:bg-slate-800 file:px-3 file:py-1.5 file:text-slate-100"}),s.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Or paste image URL (image will be copied to S3 on save):"}),s.jsx("input",{type:"url",value:V,onChange:D=>{G(D.target.value),D.target.value.trim()&&I(null)},placeholder:"https://example.com/logo.png",className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),te&&s.jsx("div",{className:"mt-2",children:s.jsx("img",{src:te,alt:"New logo",className:"h-16 w-16 rounded-lg border border-slate-700 object-cover"})}),de&&s.jsx("p",{className:"mt-1 text-xs text-red-400",children:de})]}),s.jsxs("div",{className:"relative",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Categories"}),s.jsx("input",{type:"text",value:b,onChange:D=>C(D.target.value),onFocus:()=>T(!0),placeholder:"Search and select",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),A&&s.jsx("div",{className:"absolute left-0 right-0 top-full z-10 mt-1 max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",children:ve.length?ve.map(D=>s.jsx("button",{type:"button",onClick:()=>U(D.id),className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:D.name},D.id)):s.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:"No matches"})}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:Q.map(D=>{const ne=$.find(oe=>oe.id===D);return s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(ne==null?void 0:ne.name)??D,s.jsx("button",{type:"button",onClick:()=>W(D),className:"hover:text-red-400","aria-label":"Remove",children:""})]},D)})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Tags"}),s.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:v.map(D=>s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[D,s.jsx("button",{type:"button",onClick:()=>fe(D),className:"hover:text-red-400","aria-label":"Remove",children:""})]},D))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:y,onChange:D=>S(D.target.value),onKeyDown:D=>D.key==="Enter"&&(D.preventDefault(),he()),placeholder:"Add tag",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("button",{type:"button",onClick:he,className:"rounded-md border border-slate-700 bg-slate-800 px-3 py-2 text-sm text-slate-200 hover:bg-slate-700",children:"Add"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Scraped content (optional)"}),s.jsx("textarea",{value:f,onChange:D=>p(D.target.value),rows:6,placeholder:"Paste or edit scraped content (e.g. README, about page)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm font-mono text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsx("button",{type:"submit",disabled:Z,className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:Z?"Saving":"Save changes"}),s.jsx("button",{type:"button",onClick:M,disabled:H||Z,className:"rounded-md border border-red-500/60 px-4 py-2 text-sm font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:H?"Deleting":"Delete entry"})]}),le&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:le}),O&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:O})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit Site"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})};function Sr(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const dv=()=>{const{id:e}=$l(),t=Xt(),{user:n}=et(),[r,a]=u.useState(!0),[l,o]=u.useState(""),[i,c]=u.useState(""),[d,h]=u.useState(null),[m,g]=u.useState(null),[v,j]=u.useState("image"),[y,S]=u.useState(!1),[f,p]=u.useState(!1),[x,N]=u.useState(!1),[E,P]=u.useState([]),[R,I]=u.useState([]),[V,G]=u.useState(""),[te,ye]=u.useState(!1),[de,_]=u.useState(!1),[$,z]=u.useState(!1),[Q,w]=u.useState(null),[b,C]=u.useState(null),A=yt(n??null,"manager"),T=e?decodeURIComponent(e):"";u.useEffect(()=>{var ae;if(!A||!T){a(!1);return}const O=Sr();if(!O){C("API URL not set."),a(!1);return}const Y=window;if(!((ae=Y.auth)!=null&&ae.getAccessToken)){C("Sign in required."),a(!1);return}let X=!1;return(async()=>{const we=await new Promise(Ee=>Y.auth.getAccessToken(Ee));if(!we||X)return;const U=await fetch(`${O}/media?id=${encodeURIComponent(T)}`);if(U.status===404||!U.ok){X||C("Media not found."),a(!1);return}const W=await U.json(),he=Array.isArray(W.media)?W.media[0]:W.media;if(X||!he){a(!1);return}const fe=he;o(fe.title??""),c(fe.description??""),h(fe.mediaUrl||null),g(fe.thumbnailUrl||null),j(fe.mediaType||"image"),I(Array.isArray(fe.categoryIds)?fe.categoryIds:[]);const ve=await fetch(`${O}/media-categories`,{headers:{Authorization:`Bearer ${we}`}});if(ve.ok&&!X){const Ee=await ve.json();P((Ee.categories??[]).map($e=>({id:$e.PK||$e.id||"",name:$e.name||$e.PK||""})))}X||a(!1)})(),()=>{X=!0}},[A,T]);const Z=O=>{R.includes(O)||I([...R,O]),G(""),ye(!1)},se=O=>{I(R.filter(Y=>Y!==O))},H=E.filter(O=>!R.includes(O.id)&&(!V.trim()||(O.name||"").toLowerCase().includes(V.toLowerCase()))),J=async O=>{var ae;if(O.preventDefault(),!T)return;const Y=Sr();if(!Y){C("API URL not set.");return}const X=window;if(!((ae=X.auth)!=null&&ae.getAccessToken)){C("Sign in required.");return}_(!0),C(null),w(null);try{const we=await new Promise(W=>X.auth.getAccessToken(W)),U=await fetch(`${Y}/media`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${we}`},body:JSON.stringify({id:T,title:l.trim()||"Untitled",description:i.trim(),categoryIds:R})});if(!U.ok)throw new Error(await U.text());w("Media updated."),setTimeout(()=>t("/media"),1200)}catch(we){C((we==null?void 0:we.message)??"Failed to update media.")}finally{_(!1)}},L=async O=>{var we,U;const Y=(we=O.target.files)==null?void 0:we[0];if(!Y||!T)return;if(!Y.type.startsWith("image/")){C("Please choose an image (PNG, JPEG, GIF, WebP).");return}const X=Sr();if(!X)return;const ae=window;if((U=ae.auth)!=null&&U.getAccessToken){p(!0),C(null),w(null);try{const W=await new Promise(D=>ae.auth.getAccessToken(D)),he=await fetch(`${X}/media/thumbnail-upload`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${W}`},body:JSON.stringify({mediaId:T,contentType:Y.type||"image/png"})});if(!he.ok)throw new Error("Upload request failed");const{uploadUrl:fe,key:ve}=await he.json();if(!(await fetch(fe,{method:"PUT",headers:{"Content-Type":Y.type||"image/png"},body:Y})).ok)throw new Error("File upload failed");const $e=await fetch(`${X}/media`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${W}`},body:JSON.stringify({id:T,thumbnailKey:ve})});if(!$e.ok)throw new Error(await $e.text());const M=await fetch(`${X}/media?id=${encodeURIComponent(T)}`);if(M.ok){const D=await M.json(),ne=Array.isArray(D.media)?D.media[0]:D.media;ne!=null&&ne.thumbnailUrl&&g(ne.thumbnailUrl)}w("Logo/thumbnail updated.")}catch(W){C((W==null?void 0:W.message)??"Failed to upload thumbnail.")}finally{p(!1),O.target.value=""}}},K=async()=>{var X;if(!T||!window.confirm("Remove the custom logo/thumbnail? You can regenerate from video or upload a new one."))return;const O=Sr();if(!O)return;const Y=window;if((X=Y.auth)!=null&&X.getAccessToken){N(!0),C(null),w(null);try{const ae=await new Promise(U=>Y.auth.getAccessToken(U)),we=await fetch(`${O}/media`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ae}`},body:JSON.stringify({id:T,deleteThumbnail:!0})});if(!we.ok)throw new Error(await we.text());g(null),w("Logo/thumbnail removed.")}catch(ae){C((ae==null?void 0:ae.message)??"Failed to remove thumbnail.")}finally{N(!1)}}},le=async()=>{var X;if(!T)return;const O=Sr();if(!O)return;const Y=window;if((X=Y.auth)!=null&&X.getAccessToken){S(!0),C(null),w(null);try{const ae=await new Promise(W=>Y.auth.getAccessToken(W)),we=await fetch(`${O}/media/regenerate-thumbnail`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ae}`},body:JSON.stringify({mediaId:T})});if(!we.ok)throw new Error(await we.text());w("Thumbnail regeneration started. New thumbnail will appear in 3060 seconds.");const U=async W=>{if(W>6)return;await new Promise(fe=>setTimeout(fe,1e4));const he=await fetch(`${O}/media?id=${encodeURIComponent(T)}`);if(he.ok){const fe=await he.json(),ve=Array.isArray(fe.media)?fe.media[0]:fe.media;if(ve!=null&&ve.thumbnailUrl){g(ve.thumbnailUrl),w("Thumbnail updated.");return}}U(W+1)};U(1)}catch(ae){C((ae==null?void 0:ae.message)??"Failed to regenerate thumbnail.")}finally{S(!1)}}},be=async()=>{var X;if(!T||!window.confirm("Delete this media item? This cannot be undone."))return;const O=Sr();if(!O)return;const Y=window;if((X=Y.auth)!=null&&X.getAccessToken){z(!0),C(null);try{const ae=await new Promise(U=>Y.auth.getAccessToken(U)),we=await fetch(`${O}/media?id=${encodeURIComponent(T)}`,{method:"DELETE",headers:{Authorization:`Bearer ${ae}`}});if(!we.ok)throw new Error(await we.text());t("/media")}catch(ae){C((ae==null?void 0:ae.message)??"Failed to delete media.")}finally{z(!1)}}};return A?r?s.jsxs("div",{className:"space-y-4",children:[s.jsxs(ge,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(it,{className:"h-4 w-4"}),"Back to Media"]}),s.jsx("p",{className:"text-sm text-slate-400",children:"Loading"})]}):b&&!l&&!i?s.jsxs("div",{className:"space-y-4",children:[s.jsxs(ge,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(it,{className:"h-4 w-4"}),"Back to Media"]}),s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:b})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ge,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(it,{className:"h-4 w-4"}),"Back to Media"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit Media"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Update title, description, and categories. The file itself cannot be changed here."})]}),d&&s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 overflow-hidden max-w-2xl",children:[s.jsx("p",{className:"px-4 py-2 text-xs font-medium text-slate-400 border-b border-slate-800",children:"Current media"}),s.jsx("div",{className:"p-4 flex justify-center items-center bg-slate-900/40 min-h-[160px]",children:v==="video"?s.jsx("video",{src:d,controls:!0,className:"max-w-full max-h-[50vh] rounded-lg border border-slate-700",playsInline:!0}):s.jsx("img",{src:d,alt:l||"Media",className:"max-w-full max-h-[50vh] w-auto h-auto object-contain rounded-lg border border-slate-700"})}),v==="video"&&s.jsxs("div",{className:"px-4 py-3 border-t border-slate-800 space-y-2",children:[s.jsx("p",{className:"text-xs font-medium text-slate-400",children:"Logo / Thumbnail"}),s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[m&&s.jsx("img",{src:m,alt:"Thumbnail",className:"h-16 w-auto rounded border border-slate-700 object-cover"}),s.jsx("button",{type:"button",onClick:le,disabled:y,className:"rounded-md border border-slate-600 px-3 py-1.5 text-sm font-medium text-slate-200 hover:bg-slate-800 disabled:opacity-50",children:y?"Regenerating":"Take screenshot"}),s.jsxs("label",{className:"cursor-pointer rounded-md border border-slate-600 px-3 py-1.5 text-sm font-medium text-slate-200 hover:bg-slate-800",children:[f?"Uploading":"Add logo",s.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/gif,image/webp",className:"hidden",onChange:L,disabled:f})]}),m&&s.jsx("button",{type:"button",onClick:K,disabled:x,className:"rounded-md border border-red-500/60 px-3 py-1.5 text-sm font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:x?"Removing":"Delete logo"})]})]})]}),s.jsxs("form",{className:"space-y-4 max-w-xl",onSubmit:J,children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Title"}),s.jsx("input",{type:"text",value:l,onChange:O=>o(O.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description"}),s.jsx("textarea",{value:i,onChange:O=>c(O.target.value),rows:4,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Media categories"}),s.jsx("input",{type:"text",value:V,onChange:O=>G(O.target.value),onFocus:()=>ye(!0),placeholder:"Search and select",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),te&&s.jsx("div",{className:"absolute left-0 right-0 top-full z-10 mt-1 max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",children:H.length?H.map(O=>s.jsx("button",{type:"button",onClick:()=>Z(O.id),className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:O.name},O.id)):s.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:"No matches"})}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:R.map(O=>{const Y=E.find(X=>X.id===O);return s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(Y==null?void 0:Y.name)??O,s.jsx("button",{type:"button",onClick:()=>se(O),className:"hover:text-red-400","aria-label":"Remove",children:""})]},O)})})]}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsx("button",{type:"submit",disabled:de,className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:de?"Saving":"Save changes"}),s.jsx("button",{type:"button",onClick:be,disabled:$||de,className:"rounded-md border border-red-500/60 px-4 py-2 text-sm font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:$?"Deleting":"Delete entry"})]}),Q&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:Q}),b&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:b})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit Media"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})},ud={admin:"SuperAdmin",manager:"Manager",user:"User"},$i=[{value:-8,label:"UTC-8"},{value:-5,label:"UTC-5"},{value:0,label:"UTC+0/GMT"}];function No(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function fv(e,t,n){if(!e&&!n)return"";if(!e)return n?`from ${n}`:"";try{const r=new Date(e);if(isNaN(r.getTime()))return e+(n?` from ${n}`:"");const a=r.getTime()+(t||0)*36e5,l=new Date(a),o=y=>y<10?"0"+y:""+y,i=l.getUTCFullYear(),c=o(l.getUTCMonth()+1),d=o(l.getUTCDate()),h=o(l.getUTCHours()),m=o(l.getUTCMinutes()),g=$i.find(y=>y.value===t),v=g?g.label:t<0?"UTC"+t:"UTC+"+t;let j=`${i}-${c}-${d} ${h}:${m} ${v}`;return n&&(j+=` from ${n}`),j}catch{return e+(n?` from ${n}`:"")}}const mv=e=>e==="admin"?"bg-amber-500/20 text-amber-200":e==="manager"?"bg-blue-500/20 text-blue-200":e==="user"?"bg-slate-600/30 text-slate-300":"bg-emerald-500/20 text-emerald-200",pv=()=>{var J;const e=Xt(),[t]=qn(),n=t.get("username")??"",r=t.get("email")??"",a=t.get("status")??"",{user:l}=et(),[o,i]=u.useState(!0),[c,d]=u.useState(null),[h,m]=u.useState(null),[g,v]=u.useState([]),[j,y]=u.useState([]),[S,f]=u.useState([]),[p,x]=u.useState(""),[N,E]=u.useState(!1),[P,R]=u.useState(!1),[I,V]=u.useState(null),[G,te]=u.useState(!1),[ye,de]=u.useState(-8),_=yt(l??null,"manager"),$=((J=l==null?void 0:l.groups)==null?void 0:J.includes("admin"))??!1,z=$?["admin","manager","user"]:["user"],Q=async()=>{var le;if(!n)return;const L=No();if(!L){d("API URL not set."),i(!1);return}const K=window;if(!((le=K.auth)!=null&&le.getAccessToken)){d("Sign in required."),i(!1);return}i(!0),d(null);try{const be=await new Promise(U=>K.auth.getAccessToken(U)),[O,Y]=await Promise.all([fetch(`${L}/admin/users/${encodeURIComponent(n)}/groups`,{headers:{Authorization:`Bearer ${be}`}}),fetch(`${L}/admin/groups`,{headers:{Authorization:`Bearer ${be}`}})]);if(!O.ok){const U=await O.json().catch(()=>({}));throw new Error(U.error||"Failed to load user")}const X=await O.json(),we=((await Y.json()).groups??[]).map(U=>U.name??(U.PK??"").replace("GROUP#","")).filter(Boolean);m({email:X.username??n,status:a,lastLoginAt:X.lastLoginAt??"",lastLoginIp:X.lastLoginIp??"",cognitoGroups:X.cognitoGroups??[],customGroups:X.customGroups??[]}),y([...X.cognitoGroups??[]]),f([...X.customGroups??[]]),v(we)}catch(be){d((be==null?void 0:be.message)??"Failed to load user")}finally{i(!1)}};u.useEffect(()=>{const L=parseInt(sessionStorage.getItem("funkedupshift_lastlogin_tz")??"-8",10);!isNaN(L)&&$i.some(K=>K.value===L)&&de(L)},[]),u.useEffect(()=>{_&&n&&Q()},[_,n]);const w=L=>{L&&!j.includes(L)&&y(K=>[...K,L])},b=L=>{y(K=>K.filter(le=>le!==L))},C=L=>{L&&!S.includes(L)&&(f(K=>[...K,L]),x(""),E(!1))},A=L=>{f(K=>K.filter(le=>le!==L))},T=g.filter(L=>S.includes(L)?!1:p.trim()?L.toLowerCase().includes(p.toLowerCase().trim()):!0),Z=async L=>{var U;if(L.preventDefault(),!n)return;const K=No();if(!K)return;const le=window;if(!((U=le.auth)!=null&&U.getAccessToken))return;const be=(h==null?void 0:h.cognitoGroups)??[],O=(h==null?void 0:h.customGroups)??[];let Y=j.filter(W=>!be.includes(W)),X=be.filter(W=>!j.includes(W));$||(Y=Y.filter(W=>W==="user"),X=X.filter(W=>W==="user"));const ae=S.filter(W=>!O.includes(W)),we=O.filter(W=>!S.includes(W));R(!0),V(null);try{const he={headers:{"Content-Type":"application/json",Authorization:`Bearer ${await new Promise(M=>le.auth.getAccessToken(M))}`}},fe=encodeURIComponent,ve=[];Y.forEach(M=>ve.push(fetch(`${K}/admin/users/${fe(n)}/groups`,{method:"POST",...he,body:JSON.stringify({groupName:M})}))),X.forEach(M=>ve.push(fetch(`${K}/admin/users/${fe(n)}/groups/${fe(M)}`,{method:"DELETE",headers:he.headers}))),ae.forEach(M=>ve.push(fetch(`${K}/admin/users/${fe(n)}/groups`,{method:"POST",...he,body:JSON.stringify({groupName:M})}))),we.forEach(M=>ve.push(fetch(`${K}/admin/users/${fe(n)}/groups/${fe(M)}`,{method:"DELETE",headers:he.headers})));const $e=(await Promise.all(ve)).find(M=>!M.ok);if($e){const M=await $e.json().catch(()=>({}));throw new Error(M.error||"Failed to save")}window.alert("Changes saved"),e("/admin/membership")}catch(W){V((W==null?void 0:W.message)??"Failed to save")}finally{R(!1)}},se=L=>{const K=parseInt(L.target.value,10);de(K),sessionStorage.setItem("funkedupshift_lastlogin_tz",String(K))},H=async()=>{var be;const L=r||(h==null?void 0:h.email)||n;if(!window.confirm(`Delete user "${L}"? This cannot be undone.`))return;const K=No();if(!K)return;const le=window;if((be=le.auth)!=null&&be.getAccessToken){te(!0);try{const O=await new Promise(X=>le.auth.getAccessToken(X)),Y=await fetch(`${K}/admin/users/${encodeURIComponent(n)}`,{method:"DELETE",headers:{Authorization:`Bearer ${O}`}});if(!Y.ok){const X=await Y.json().catch(()=>({}));throw new Error(X.error||"Failed to delete user")}e("/admin/membership")}catch(O){V((O==null?void 0:O.message)??"Failed to delete user")}finally{te(!1)}}};return _?n?o?s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit User"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Loading"})]}):c||!h?s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit User"}),s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:c??"Failed to load user"})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ge,{to:"/admin/membership",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(it,{className:"h-4 w-4"}),"Back to users"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit User"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Adjust system roles and custom groups."}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("label",{htmlFor:"tz-select",className:"text-slate-500",children:"Last login timezone:"}),s.jsx("select",{id:"tz-select",value:ye,onChange:se,className:"rounded border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 text-sm",children:$i.map(L=>s.jsx("option",{value:L.value,children:L.label},L.value))})]})]}),s.jsxs("form",{onSubmit:Z,className:"space-y-6 max-w-2xl",children:[s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("h2",{className:"text-sm font-medium text-slate-300 mb-3",children:"User info"}),s.jsx("table",{className:"text-sm",children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{className:"py-1 pr-4 font-medium text-slate-400 w-28",children:"Email"}),s.jsx("td",{className:"py-1 text-slate-200",children:r||h.email})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"py-1 pr-4 font-medium text-slate-400",children:"Status"}),s.jsx("td",{className:"py-1 text-slate-200",children:a||h.status||""})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"py-1 pr-4 font-medium text-slate-400",children:"Last login"}),s.jsx("td",{className:"py-1 text-slate-200",children:fv(h.lastLoginAt,ye,h.lastLoginIp)})]})]})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200",children:"System roles"}),s.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-200 w-full max-w-xs",onChange:L=>{const K=L.target.value;K&&w(K),L.target.value=""},children:[s.jsx("option",{value:"",children:"Select role to add"}),z.filter(L=>!j.includes(L)).map(L=>s.jsx("option",{value:L,children:ud[L]??L},L))]}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:j.map(L=>{const K=$||L==="user";return s.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded text-sm ${mv(L)}`,children:[ud[L]??L,K&&s.jsx("button",{type:"button",onClick:()=>b(L),className:"ml-0.5 hover:text-red-300","aria-label":"Remove",children:""})]},L)})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200",children:"Custom groups"}),g.length===0?s.jsxs("p",{className:"text-sm text-slate-500",children:["No custom groups. ",s.jsx(ge,{to:"/admin/membership?tab=groups",className:"text-brand-orange hover:underline",children:"Create groups"}),"."]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"relative max-w-xs",children:[s.jsx("input",{type:"text",value:p,onChange:L=>{x(L.target.value),E(!0)},onFocus:()=>E(!0),placeholder:"Search or select groups",className:"w-full rounded border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-200 placeholder:text-slate-500"}),N&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>E(!1),"aria-hidden":"true"}),s.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 max-h-48 overflow-y-auto rounded border border-slate-700 bg-slate-900 shadow-lg z-20",children:T.length===0?s.jsx("div",{className:"px-3 py-2 text-sm text-slate-500",children:"No matches"}):T.map(L=>s.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",onClick:()=>C(L),children:L},L))})]})]}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:S.map(L=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-sm bg-emerald-500/20 text-emerald-200",children:[L,s.jsx("button",{type:"button",onClick:()=>A(L),className:"ml-0.5 hover:text-red-300","aria-label":"Remove",children:""})]},L))})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[s.jsx("button",{type:"submit",disabled:P,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:P?"Saving":"Save"}),s.jsx(ge,{to:"/admin/membership",className:"rounded-md border border-slate-700 px-4 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"}),$&&s.jsx("button",{type:"button",onClick:H,disabled:G||P,className:"rounded-md border border-red-500/60 bg-red-500/10 px-4 py-2 text-sm font-medium text-red-200 hover:bg-red-500/20 disabled:opacity-50",children:G?"Deleting":"Delete user"})]}),I&&s.jsx("p",{className:"text-sm text-red-400",children:I})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit User"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Missing username in URL."})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit User"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})},hv=()=>{const{user:e,refreshAuth:t}=et(),n=Xt(),[r,a]=u.useState("signin"),[l,o]=u.useState(""),[i,c]=u.useState(""),[d,h]=u.useState(!1),[m,g]=u.useState(null),[v,j]=u.useState(null),y=f=>{a(f),g(null),j(null)},S=async f=>{f.preventDefault(),g(null),j(null);const p=l.trim(),x=i.trim();if(!p||!x){g("Email and password are required.");return}const N=window;if(!N.auth){g("Auth is not configured. Check Cognito frontend setup.");return}h(!0);try{r==="signin"?(await new Promise((E,P)=>{N.auth.signIn(p,x,R=>{R?P(R):E()})}),j("Signed in successfully. Redirecting"),await t()):(await new Promise((E,P)=>{N.auth.signUp(p,x,R=>{R?P(R):E()})}),j("Account created successfully. You can now sign in."),a("signin")),r==="signin"&&setTimeout(()=>n("/"),800)}catch(E){const P=(E==null?void 0:E.message)||"Authentication failed. Please try again.";g(P)}finally{h(!1)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Sign in / Sign up"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Use your Funkedupshift account to rate sites, add notes, and manage curated content (based on your role)."})]}),e&&s.jsxs("div",{className:"rounded-xl border border-emerald-600/60 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-100",children:["You're currently signed in as"," ",s.jsx("span",{className:"font-semibold text-emerald-200",children:e.email})," (",e.role==="superadmin"?"SuperAdmin":e.role,"). You can safely close this page or continue browsing websites and media."]}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-[minmax(0,1.3fr)_minmax(0,1fr)] items-start",children:[s.jsxs("section",{className:"rounded-2xl border border-slate-800 bg-slate-950/70 p-5 shadow-lg shadow-slate-950/40",children:[s.jsxs("div",{className:"mb-4 flex gap-2 rounded-full bg-slate-900/70 p-1 text-xs font-medium text-slate-300",children:[s.jsx("button",{type:"button",onClick:()=>y("signin"),className:["flex-1 rounded-full px-3 py-1.5 transition-colors",r==="signin"?"bg-slate-50 text-slate-950":"hover:bg-slate-800/80"].join(" "),children:"Sign in"}),s.jsx("button",{type:"button",onClick:()=>y("signup"),className:["flex-1 rounded-full px-3 py-1.5 transition-colors",r==="signup"?"bg-slate-50 text-slate-950":"hover:bg-slate-800/80"].join(" "),children:"Sign up"})]}),s.jsxs("form",{className:"space-y-4",onSubmit:S,children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{htmlFor:"authEmail",className:"text-xs font-medium uppercase tracking-[0.18em] text-slate-400",children:"Email"}),s.jsx("input",{id:"authEmail",type:"email",autoComplete:"email",value:l,onChange:f=>o(f.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",placeholder:"you@example.com",required:!0})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{htmlFor:"authPassword",className:"text-xs font-medium uppercase tracking-[0.18em] text-slate-400",children:"Password"}),s.jsx("input",{id:"authPassword",type:"password",autoComplete:r==="signin"?"current-password":"new-password",value:i,onChange:f=>c(f.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",placeholder:r==="signup"?"At least 8 characters":"Your password",minLength:8,required:!0})]}),m&&s.jsx("div",{className:"rounded-md border border-red-500/70 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:m}),v&&!m&&s.jsx("div",{className:"rounded-md border border-emerald-500/70 bg-emerald-500/10 px-3 py-2 text-xs text-emerald-100",children:v}),s.jsx("button",{type:"submit",disabled:d,className:"inline-flex w-full items-center justify-center rounded-full bg-brand-orange px-4 py-2.5 text-sm font-semibold text-slate-950 shadow-md shadow-orange-500/40 transition hover:bg-orange-500 disabled:cursor-not-allowed disabled:opacity-70",children:d?r==="signin"?"Signing in":"Creating account":r==="signin"?"Sign in":"Create account"})]})]}),s.jsxs("aside",{className:"space-y-3 rounded-2xl border border-slate-800 bg-slate-950/40 p-4 text-xs text-slate-300",children:[s.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-[0.25em] text-slate-500",children:"How access works"}),s.jsxs("ul",{className:"space-y-2",children:[s.jsxs("li",{children:[s.jsx("span",{className:"font-semibold text-slate-100",children:"Guests"})," can browse all websites and media without signing in."]}),s.jsxs("li",{children:[s.jsx("span",{className:"font-semibold text-slate-100",children:"Signed-in users"})," can star sites and media, and later add their own metadata and comments."]}),s.jsxs("li",{children:[s.jsx("span",{className:"font-semibold text-slate-100",children:"Managers & admins"})," can curate sites, media, and categories, with extra tooling in the admin area."]})]}),s.jsx("p",{className:"text-slate-500",children:"If you don't see expected admin controls after signing in, confirm your Cognito group membership in the AWS Console."})]})]})]})},xv={admin:"SuperAdmin",manager:"Manager",user:"User"},$u=[{value:-8,label:"UTC-8"},{value:-5,label:"UTC-5"},{value:0,label:"UTC+0/GMT"}],cp="funkedupshift_lastlogin_tz";function gv(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function yv(){try{const e=parseInt(sessionStorage.getItem(cp)??"",10);if(!isNaN(e)&&$u.some(t=>t.value===e))return e}catch{}return-8}function vv(e){try{sessionStorage.setItem(cp,String(e))}catch{}}function wv(e,t,n){if(!e)return n?`from ${n}`:"";try{const r=new Date(e);if(isNaN(r.getTime()))return e;const a=r.getTime()+t*36e5,l=new Date(a),o=y=>y<10?"0"+y:""+y,i=l.getUTCFullYear(),c=o(l.getUTCMonth()+1),d=o(l.getUTCDate()),h=o(l.getUTCHours()),m=o(l.getUTCMinutes()),g=$u.find(y=>y.value===t),v=g?g.label:t<0?`UTC${t}`:`UTC+${t}`;let j=`${i}-${c}-${d} ${h}:${m} ${v}`;return n&&(j+=` from ${n}`),j}catch{return e}}const bv=()=>{var G,te,ye,de;const{user:e}=et(),[t,n]=u.useState(null),[r,a]=u.useState(""),[l,o]=u.useState(yv),[i,c]=u.useState(!0),[d,h]=u.useState(!1),[m,g]=u.useState(null),[v,j]=u.useState(""),[y,S]=u.useState(!1),[f,p]=u.useState(null),x=gv(),N=async(_,$)=>{var b;const z=window;if(!((b=z.auth)!=null&&b.getAccessToken))throw new Error("Not signed in");const Q=await new Promise(C=>z.auth.getAccessToken(C)),w={...$==null?void 0:$.headers,Authorization:`Bearer ${Q}`};return fetch(_,{...$,headers:w})};u.useEffect(()=>{if(!e||!x){c(!1);return}let _=!1;return N(`${x}/profile`).then($=>$.ok?$.json():$.json().then(z=>Promise.reject(new Error(z.error||"Failed")))).then($=>{var z;_||(n($),a(((z=$.profile)==null?void 0:z.description)??""))}).catch($=>{_||p({text:`Failed to load profile: ${($==null?void 0:$.message)??"Unknown"}`,error:!0})}).finally(()=>{_||c(!1)}),()=>{_=!0}},[e,x]);const E=async()=>{if(x){h(!0),p(null);try{const _=await N(`${x}/profile`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:r.trim().slice(0,100)})});if(!_.ok){const $=await _.json();throw new Error($.error||"Failed")}p({text:"Saved.",error:!1})}catch(_){p({text:`Error: ${(_==null?void 0:_.message)??"Unknown"}`,error:!0})}finally{h(!1)}}},P=async _=>{var Q,w;const $=(Q=_.target.files)==null?void 0:Q[0];if(_.target.value="",!$||!x)return;if(g(null),!((w=$.type)!=null&&w.match(/^image\/(png|jpeg|jpg|gif|webp)$/))){g("Please choose PNG, JPEG, GIF, or WebP.");return}const z=$.type||"image/png";try{const b=await N(`${x}/profile/avatar-upload`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contentType:z})});if(!b.ok){const H=await b.json();throw new Error(H.error||"Upload failed")}const{uploadUrl:C,key:A}=await b.json();if(!(await fetch(C,{method:"PUT",body:$,headers:{"Content-Type":z}})).ok)throw new Error("Upload failed");const Z=await N(`${x}/profile`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({avatarKey:A})});if(!Z.ok){const H=await Z.json();throw new Error(H.error||"Failed")}const se=await N(`${x}/profile`).then(H=>H.json());n(se)}catch(b){g(`Error: ${(b==null?void 0:b.message)??"Unknown"}`)}},R=async()=>{if(x){g(null);try{const _=await N(`${x}/profile/avatar`,{method:"DELETE"});if(!_.ok){const $=await _.json();throw new Error($.error||"Failed")}n($=>$?{...$,profile:{...$.profile,avatarUrl:void 0,avatarKey:void 0}}:null)}catch(_){g(`Error: ${(_==null?void 0:_.message)??"Unknown"}`)}}},I=async()=>{const _=v.trim();if(!(!_||!x)){g(null),S(!0);try{const $=await N(`${x}/profile/avatar-from-url`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageUrl:_})});if(!$.ok){const b=await $.json();throw new Error(b.error||"Import failed")}const{key:z}=await $.json(),Q=await N(`${x}/profile`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({avatarKey:z})});if(!Q.ok){const b=await Q.json();throw new Error(b.error||"Failed")}const w=await N(`${x}/profile`).then(b=>b.json());n(w),j("")}catch($){g(`Error: ${($==null?void 0:$.message)??"Unknown"}`)}finally{S(!1)}}};if(!e)return s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"My Profile"}),s.jsxs("p",{className:"text-sm text-slate-400",children:[s.jsx(ge,{to:"/auth",className:"text-brand-orange hover:underline",children:"Sign in"})," ","to view and edit your profile."]})]});if(!x)return s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"My Profile"}),s.jsx("p",{className:"text-sm text-red-400",children:"API URL not set."})]});if(i)return s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"My Profile"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Loading profile"})]});const V=t!=null&&t.profile?wv(t.profile.lastLoginAt,l,t.profile.lastLoginIp):"";return s.jsxs("div",{className:"space-y-6 max-w-2xl",children:[s.jsx(ge,{to:"/",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:" Back to Home"}),s.jsx("header",{children:s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"My Profile"})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400",children:"Last login timezone"}),s.jsx("select",{value:l,onChange:_=>{const $=parseInt(_.target.value,10);vv($),o($)},className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",children:$u.map(_=>s.jsx("option",{value:_.value,children:_.label},_.value))})]}),f&&s.jsx("div",{className:`rounded-md px-3 py-2 text-sm ${f.error?"border-red-500/60 bg-red-500/10 text-red-200":"border-green-500/40 bg-green-500/10 text-green-200"}`,children:f.text}),t&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("h2",{className:"text-sm font-semibold text-slate-200 mb-3",children:"User info"}),s.jsx("table",{className:"w-full text-sm",children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{className:"py-1 pr-4 font-medium text-slate-300 w-28",children:"Email"}),s.jsx("td",{className:"text-slate-400",children:t.email??""})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"py-1 pr-4 font-medium text-slate-300",children:"Status"}),s.jsx("td",{className:"text-slate-400",children:t.status??""})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"py-1 pr-4 font-medium text-slate-300",children:"Last login"}),s.jsx("td",{className:"text-slate-400",children:V})]})]})})]}),s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("h2",{className:"text-sm font-semibold text-slate-200 mb-3",children:"System role"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:(((G=t.cognitoGroups)==null?void 0:G.length)??0)>0?t.cognitoGroups.map(_=>{const $=xv[_]??_,z=_==="admin"?"bg-amber-500/20 text-amber-300":_==="manager"?"bg-blue-500/20 text-blue-300":"bg-slate-700 text-slate-200";return s.jsx("span",{className:`rounded-md px-2 py-0.5 text-xs font-medium ${z}`,children:$},_)}):s.jsx("span",{className:"rounded-md px-2 py-0.5 text-xs font-medium bg-slate-700 text-slate-200",children:"User"})})]}),s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("h2",{className:"text-sm font-semibold text-slate-200 mb-3",children:"Custom groups"}),(((te=t.customGroups)==null?void 0:te.length)??0)>0?s.jsx("div",{className:"flex flex-wrap gap-2",children:t.customGroups.map(_=>s.jsx("span",{className:"rounded-md px-2 py-0.5 text-xs font-medium bg-emerald-500/20 text-emerald-300",children:_},_))}):s.jsx("p",{className:"text-sm text-slate-500",children:"Not in any custom groups."})]}),s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("h2",{className:"text-sm font-semibold text-slate-200 mb-3",children:"Edit profile"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Profile icon"}),s.jsxs("div",{className:"flex items-start gap-4",children:[(ye=t.profile)!=null&&ye.avatarUrl?s.jsx("img",{src:t.profile.avatarUrl,alt:"Profile",className:"h-24 w-24 rounded-full border-2 border-slate-700 object-cover"}):s.jsx("div",{className:"h-24 w-24 rounded-full border-2 border-slate-700 bg-slate-800 flex items-center justify-center text-2xl text-slate-500",children:"?"}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/gif,image/webp",onChange:P,className:"block w-full text-xs text-slate-300 file:mr-3 file:rounded-md file:border-0 file:bg-slate-800 file:px-3 file:py-1.5 file:text-slate-100"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Or paste image URL (min 4848, max 5 MB):"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"url",value:v,onChange:_=>j(_.target.value),placeholder:"https://example.com/avatar.png",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("button",{type:"button",onClick:I,disabled:!v.trim()||y,className:"rounded-md border border-slate-600 px-3 py-2 text-sm font-medium text-slate-200 hover:bg-slate-800 disabled:opacity-50",children:y?"Importing":"Use from URL"})]}),((de=t.profile)==null?void 0:de.avatarUrl)&&s.jsx("button",{type:"button",onClick:R,className:"self-start rounded-md border border-red-500/60 bg-red-500/10 px-2 py-1 text-xs font-medium text-red-300 hover:bg-red-500/20",children:"Remove icon"})]})]}),s.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"PNG, JPEG, GIF, or WebP. Same constraints as thumbnail uploads."}),m&&s.jsx("p",{className:"mt-1 text-xs text-red-400",children:m})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"profile-description",className:"block text-xs font-medium text-slate-400 mb-1",children:"Description"}),s.jsx("textarea",{id:"profile-description",value:r,onChange:_=>a(_.target.value),maxLength:100,placeholder:"About you (max 100 characters)",rows:4,className:"w-full max-w-md rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsxs("div",{className:`mt-1 text-xs ${r.length>=100?"text-red-400":"text-slate-500"}`,children:[r.length," / 100"]})]}),s.jsx("button",{type:"button",onClick:E,disabled:d,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:d?"Saving":"Save"})]})]})]})]})},jv=/^\d{4}-\d{2}-\d{2}$/;function cd(e){if(!jv.test(e))return!1;const t=new Date(e);return!isNaN(t.getTime())}const lr=({id:e,value:t,onChange:n,label:r,required:a,className:l="",inputClassName:o=""})=>{const i=u.useRef(null),c=u.useRef(null),d=y=>{const f=y.target.value.replace(/[^\d-]/g,"");n(f)},h=()=>{const y=t.trim();y&&!cd(y)&&n("")},m=y=>{const S=y.target.value;S&&n(S)},g=()=>{const y=i.current;y&&(y.focus(),typeof y.showPicker=="function"&&y.showPicker())},v="rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",j=t&&cd(t);return s.jsxs("div",{className:l,children:[s.jsxs("label",{htmlFor:`${e}-text`,className:"block text-xs font-semibold text-slate-400 mb-1",children:[r,s.jsx("span",{className:"block font-normal text-slate-500 mt-0.5",children:"yyyy-MM-DD or use calendar"})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("input",{ref:c,type:"text",id:`${e}-text`,value:t,onChange:d,onBlur:h,placeholder:"yyyy-MM-DD",required:a,pattern:a?"[0-9]{4}-[0-9]{2}-[0-9]{2}":void 0,title:a?"Enter date as yyyy-MM-DD":void 0,className:`${v} flex-1 min-w-0 ${o}`,inputMode:"numeric",autoComplete:"off"}),s.jsx("input",{ref:i,type:"date",id:e,value:j?t:"",onChange:m,required:a,className:"sr-only","aria-hidden":!0}),s.jsx("button",{type:"button",onClick:g,title:"Open calendar","aria-label":"Open calendar",className:"rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-slate-400 hover:bg-slate-800 hover:text-slate-200 focus:border-brand-orange focus:outline-none shrink-0",children:s.jsx(qx,{className:"h-5 w-5"})})]})]})};function dd(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const So=10,Nv=()=>{const{user:e}=et(),[t,n]=qn(),[r,a]=u.useState([]),[l,o]=u.useState(()=>{const U=t.get("playerIds");return U?U.split(",").filter(Boolean):[]}),[i,c]=u.useState([]),[d,h]=u.useState(1),[m,g]=u.useState(!1),[v,j]=u.useState(()=>t.get("date")??""),[y,S]=u.useState(()=>t.get("dateFrom")??""),[f,p]=u.useState(()=>t.get("dateTo")??""),[x,N]=u.useState(""),[E,P]=u.useState(!1),[R,I]=u.useState(null),[V,G]=u.useState(null),[te,ye]=u.useState(!1),[de,_]=u.useState(()=>t.get("sortOrder")==="oldest"?"oldest":"newest"),[$,z]=u.useState(()=>t.get("playerMode")==="or"?"or":"and"),Q=u.useRef(null),w=fl(e),b=ml(e),C=U=>{const W=r.find(he=>he.id===U||he.PK===U);return W&&(W.name||W.id)||U},A=async(U,W={})=>{var Ee;const he=window;if(!((Ee=he.auth)!=null&&Ee.getAccessToken))throw new Error("Not signed in");const fe=await new Promise($e=>he.auth.getAccessToken($e));if(!fe)throw new Error("Not signed in");const ve={...W.headers,Authorization:`Bearer ${fe}`};return fetch(U,{...W,headers:ve})},T=async()=>{const U=dd();if(U)try{const W=await A(`${U}/squash/players`);if(!W.ok){const ve=await W.json().catch(()=>({}));throw new Error(ve.error||"Failed")}const fe=((await W.json()).players??[]).map(ve=>({...ve,id:ve.id||ve.PK||""}));a(fe)}catch(W){G((W==null?void 0:W.message)??"Failed to load players")}},Z=async()=>{const U=dd();if(!U)return;const W=new URLSearchParams;v&&W.set("date",v),y&&W.set("dateFrom",y),f&&W.set("dateTo",f),l.length&&(W.set("playerIds",l.join(",")),W.set("playerMode",$));const he=W.toString()?`?${W.toString()}`:"";ye(!0),G(null);try{const fe=await A(`${U}/squash/matches${he}`);if(!fe.ok){const $e=await fe.json().catch(()=>({}));throw new Error($e.error||"Failed")}const ve=await fe.json();c(ve.matches??[]),g(!0),h(1);const Ee=new URLSearchParams;v&&Ee.set("date",v),y&&Ee.set("dateFrom",y),f&&Ee.set("dateTo",f),l.length&&(Ee.set("playerIds",l.join(",")),Ee.set("playerMode",$)),Ee.set("sortOrder",de),n(Ee,{replace:!0})}catch(fe){G((fe==null?void 0:fe.message)??"Failed to search matches")}finally{ye(!1)}},se=()=>{j(""),S(""),p(""),o([]),N(""),z("and"),g(!1),c([]),h(1),n({},{replace:!0})},H=U=>{l.includes(U)||o([...l,U]),N("")},J=U=>{o(l.filter(W=>W!==U))},L=r.filter(U=>!l.includes(U.id)&&(!x.trim()||(U.name||"").toLowerCase().includes(x.toLowerCase())));u.useEffect(()=>{w&&T()},[w]);const K=t.get("date")||t.get("dateFrom")||t.get("dateTo")||t.get("playerIds");u.useEffect(()=>{!w||!K||Z()},[]),u.useEffect(()=>{function U(W){Q.current&&!Q.current.contains(W.target)&&P(!1)}if(E)return document.addEventListener("mousedown",U),()=>document.removeEventListener("mousedown",U)},[E]);const le=u.useMemo(()=>{const U=[...i];return U.sort((W,he)=>{const fe=W.date||"",ve=he.date||"";return de==="newest"?ve.localeCompare(fe):fe.localeCompare(ve)}),U},[i,de]),be=Math.max(1,Math.ceil(le.length/So)),O=(d-1)*So,Y=le.slice(O,O+So),X=U=>{const W=U.teamAGames??0,he=U.teamBGames??0,fe=U.winningTeam==="B"?he:W,ve=U.winningTeam==="B"?W:he;return`${fe}-${ve}`},ae=U=>{const W=[C(U.teamAPlayer1Id||""),C(U.teamAPlayer2Id||"")].filter(Boolean).join(" & "),he=[C(U.teamBPlayer1Id||""),C(U.teamBPlayer2Id||"")].filter(Boolean).join(" & "),fe=U.winningTeam==="B"?he:W,ve=U.winningTeam==="B"?W:he;return s.jsxs("li",{className:"flex items-center gap-2 flex-wrap py-2 border-b border-slate-800 last:border-0",children:[s.jsx("span",{className:"font-semibold text-slate-200",children:U.date||""}),s.jsxs("span",{className:"text-slate-300",children:[fe," vs ",ve]}),s.jsx("span",{className:"italic text-slate-400",children:X(U)})]},U.id||U.date+fe)},we=[];if(be<=7)for(let U=1;U<=be;U++)we.push(U);else{const U=d;we.push(1),U>3&&we.push("");for(let W=Math.max(2,U-1);W<=Math.min(be-1,U+1);W++)we.includes(W)||we.push(W);U<be-2&&we.push(""),be>1&&we.push(be)}return e?w?s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Doubles"}),b&&s.jsx("p",{className:"text-sm text-slate-400",children:s.jsx(ge,{to:"/squash-admin",className:"text-brand-orange hover:text-orange-400",children:"Squash Admin"})}),(R||V)&&s.jsx("div",{className:`rounded-md px-4 py-3 text-sm ${V?"bg-red-900/30 border border-red-800/50 text-red-200":"bg-emerald-900/30 border border-emerald-800/50 text-emerald-200"}`,children:V||R}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-base font-semibold text-slate-200 mb-3",children:"Search matches"}),s.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[s.jsx(lr,{id:"searchDate",value:v,onChange:j,label:"Date (exact)",className:"max-w-[12rem]"}),s.jsx(lr,{id:"searchDateFrom",value:y,onChange:S,label:"Date from",className:"max-w-[12rem]"}),s.jsx(lr,{id:"searchDateTo",value:f,onChange:p,label:"Date to",className:"max-w-[12rem]"}),s.jsxs("div",{className:"relative max-w-[14rem] min-w-[12rem]",ref:Q,children:[s.jsx("label",{className:"block text-xs font-semibold text-slate-400 mb-1",children:"Filter by players"}),s.jsx("input",{type:"text",value:x,onChange:U=>N(U.target.value),onFocus:()=>P(!0),placeholder:"Search players...",autoComplete:"off",className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none"}),E&&s.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-slate-900 border border-slate-700 rounded-md max-h-48 overflow-y-auto z-10",children:L.length?L.map(U=>s.jsx("button",{type:"button",onClick:()=>H(U.id),className:"w-full text-left px-3 py-2 text-sm text-slate-200 hover:bg-slate-800",children:U.name||U.id},U.id)):s.jsx("div",{className:"px-3 py-2 text-sm text-slate-500",children:"No matches"})}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:l.map(U=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-slate-700 text-slate-200 text-xs",children:[C(U),s.jsx("button",{type:"button",onClick:()=>J(U),className:"text-slate-400 hover:text-slate-100","aria-label":"Remove",children:""})]},U))}),l.length>0&&s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-slate-500",children:"Match:"}),s.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[s.jsx("button",{type:"button",onClick:()=>z("and"),className:`rounded px-2 py-0.5 text-xs font-medium ${$==="and"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"AND"}),s.jsx("button",{type:"button",onClick:()=>z("or"),className:`rounded px-2 py-0.5 text-xs font-medium ${$==="or"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"OR"})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:Z,disabled:te,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:te?"Searching":"Search"}),s.jsx("button",{type:"button",onClick:se,className:"rounded-md border border-slate-600 px-4 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Clear"})]})]})]}),s.jsxs("section",{children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-3",children:[s.jsx("h2",{className:"text-base font-semibold text-slate-200",children:"Results"}),m&&le.length>0&&s.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[s.jsx("button",{type:"button",onClick:()=>_("newest"),className:`rounded px-2 py-0.5 text-xs font-medium ${de==="newest"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"Newest first"}),s.jsx("button",{type:"button",onClick:()=>_("oldest"),className:`rounded px-2 py-0.5 text-xs font-medium ${de==="oldest"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"Oldest first"})]})]}),m&&s.jsx("div",{className:"rounded-md border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm text-slate-400 mb-3",children:le.length===0?"No results":`${le.length} results`}),m?Y.length===0?s.jsx("ul",{className:"list-none p-0",children:s.jsx("li",{className:"py-2 text-slate-400",children:"No matches found."})}):s.jsxs(s.Fragment,{children:[s.jsx("ul",{className:"list-none p-0",children:Y.map(ae)}),be>1&&s.jsxs("div",{className:"flex items-center gap-2 mt-4 flex-wrap",children:[s.jsx("button",{type:"button",disabled:d<=1,onClick:()=>h(U=>Math.max(1,U-1)),className:"rounded-md border border-slate-600 px-3 py-1 text-sm disabled:opacity-50 disabled:cursor-not-allowed text-slate-300 hover:bg-slate-800",children:"Prev"}),s.jsx("span",{className:"flex items-center gap-1",children:we.map((U,W)=>U===""?s.jsx("span",{className:"px-1 text-slate-500",children:""},`ellipsis-${W}`):U===d?s.jsx("span",{className:"min-w-[2rem] px-2 py-1 text-center font-semibold text-slate-200",children:U},U):s.jsx("button",{type:"button",onClick:()=>h(U),className:"min-w-[2rem] rounded px-2 py-1 text-sm text-slate-300 hover:bg-slate-800 border border-slate-600",children:U},U))}),s.jsx("button",{type:"button",disabled:d>=be,onClick:()=>h(U=>Math.min(be,U+1)),className:"rounded-md border border-slate-600 px-3 py-1 text-sm disabled:opacity-50 disabled:cursor-not-allowed text-slate-300 hover:bg-slate-800",children:"Next"})]})]}):s.jsx("div",{className:"flex items-center justify-center min-h-[280px]",children:s.jsx("p",{className:"text-2xl sm:text-3xl font-light text-slate-500/80 tracking-wide animate-pulse",children:"Enter search criteria and click Search to find matches."})})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Doubles"}),s.jsx("div",{className:"rounded-md bg-amber-900/30 border border-amber-800/50 px-4 py-3 text-sm text-amber-200",children:"You do not have access to the Squash section. Join the Squash group or contact an admin."})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Doubles"}),s.jsxs("div",{className:"rounded-md bg-red-900/30 border border-red-800/50 px-4 py-3 text-sm text-red-200",children:["Sign in required. ",s.jsx(ge,{to:"/auth",className:"underline hover:text-red-100",children:"Sign in"})]})]})};function Zn(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const ko=10,Sv=()=>{const{user:e}=et(),[t,n]=qn(),[r,a]=u.useState("matches"),[l,o]=u.useState([]),[i,c]=u.useState(()=>{const k=t.get("playerIds");return k?k.split(",").filter(Boolean):[]}),[d,h]=u.useState([]),[m,g]=u.useState(1),[v,j]=u.useState(!1),[y,S]=u.useState(()=>t.get("date")??""),[f,p]=u.useState(()=>t.get("dateFrom")??""),[x,N]=u.useState(()=>t.get("dateTo")??""),[E,P]=u.useState(""),[R,I]=u.useState(!1),[V,G]=u.useState(null),[te,ye]=u.useState(""),[de,_]=u.useState(""),[$,z]=u.useState(""),[Q,w]=u.useState(""),[b,C]=u.useState(""),[A,T]=u.useState("A"),[Z,se]=u.useState(0),[H,J]=u.useState(!1),[L,K]=u.useState(!1),[le,be]=u.useState(()=>t.get("sortOrder")==="oldest"?"oldest":"newest"),[O,Y]=u.useState(()=>t.get("playerMode")==="or"?"or":"and"),X=u.useRef(null),[ae,we]=u.useState([]),[U,W]=u.useState([]),[he,fe]=u.useState(null),[ve,Ee]=u.useState(""),[$e,M]=u.useState(""),[D,ne]=u.useState(""),[oe,pe]=u.useState(!1),[me,ie]=u.useState(null),[je,Se]=u.useState(null),Ze=ml(e),tt=async(k,ce={})=>{var Ge;const Ne=window;if(!((Ge=Ne.auth)!=null&&Ge.getAccessToken))throw new Error("Not signed in");const Le=await new Promise(Yn=>Ne.auth.getAccessToken(Yn));if(!Le)throw new Error("Not signed in");const Qe={...ce.headers,Authorization:`Bearer ${Le}`};return fetch(k,{...ce,headers:Qe})},nt=k=>{const ce=l.find(Ne=>Ne.id===k||Ne.PK===k);return ce&&(ce.name||ce.id)||k},nn=async()=>{const k=Zn();if(k)try{const ce=await tt(`${k}/squash/players`);if(!ce.ok){const Qe=await ce.json().catch(()=>({}));throw new Error(Qe.error||"Failed")}const Le=((await ce.json()).players??[]).map(Qe=>({...Qe,id:Qe.id||Qe.PK||""}));o(Le),we(Le)}catch(ce){ie((ce==null?void 0:ce.message)??"Failed to load players")}},gr=async()=>{const k=Zn();if(k)try{const ce=await tt(`${k}/admin/users?limit=60`);if(!ce.ok)return;const Ne=await ce.json();W(Ne.users??[])}catch{W([])}},gn=async()=>{const k=Zn();if(!k)return;const ce=new URLSearchParams;y&&ce.set("date",y),f&&ce.set("dateFrom",f),x&&ce.set("dateTo",x),i.length&&(ce.set("playerIds",i.join(",")),ce.set("playerMode",O));const Ne=ce.toString()?`?${ce.toString()}`:"";K(!0),ie(null);try{const Le=await tt(`${k}/squash/matches${Ne}`);if(!Le.ok){const Yn=await Le.json().catch(()=>({}));throw new Error(Yn.error||"Failed")}const Qe=await Le.json();h(Qe.matches??[]),j(!0),g(1);const Ge=new URLSearchParams;y&&Ge.set("date",y),f&&Ge.set("dateFrom",f),x&&Ge.set("dateTo",x),i.length&&(Ge.set("playerIds",i.join(",")),Ge.set("playerMode",O)),Ge.set("sortOrder",le),n(Ge,{replace:!0})}catch(Le){ie((Le==null?void 0:Le.message)??"Failed to search matches")}finally{K(!1)}},q=()=>{S(""),p(""),N(""),c([]),Y("and"),P(""),j(!1),h([]),g(1),n({},{replace:!0})},xe=k=>{i.includes(k)||c([...i,k]),P("")},De=k=>{c(i.filter(ce=>ce!==k))},Oe=l.filter(k=>!i.includes(k.id)&&(!E.trim()||(k.name||"").toLowerCase().includes(E.toLowerCase()))),Re=[de,$,Q,b],F=k=>{const ce=k==="p1"?0:k==="p2"?1:k==="p3"?2:3,Ne=Re.filter((Le,Qe)=>Qe!==ce);return l.filter(Le=>!Ne.includes(Le.id))},ee=async k=>{if(k.preventDefault(),!te||!de||!$||!Q||!b){ie("All fields are required.");return}const ce=[de,$,Q,b];if(new Set(ce).size!==4){ie("Each player can only be on one team.");return}const Ne=Zn();if(!Ne)return;const Ge={date:te,teamAPlayer1Id:de,teamAPlayer2Id:$,teamBPlayer1Id:Q,teamBPlayer2Id:b,winningTeam:A,teamAGames:A==="A"?3:Z,teamBGames:A==="B"?3:Z},Yn=V?"PUT":"POST";V&&(Ge.id=V),J(!0),ie(null);try{const wr=await tt(`${Ne}/squash/matches`,{method:Yn,headers:{"Content-Type":"application/json"},body:JSON.stringify(Ge)});if(!wr.ok){const mp=await wr.json().catch(()=>({}));throw new Error(mp.error||"Failed")}G(null),ye(""),_(""),z(""),w(""),C(""),T("A"),se(0),gn()}catch(wr){ie((wr==null?void 0:wr.message)??"Failed")}finally{J(!1)}},ue=()=>{G(null),ye(""),_(""),z(""),w(""),C(""),T("A"),se(0)},Ue=k=>{var Ne,Le;const ce=k.id||((Le=(Ne=k.PK)==null?void 0:Ne.replace)==null?void 0:Le.call(Ne,"SQUASH#MATCH#",""))||"";G(ce),ye(k.date||""),_(k.teamAPlayer1Id||""),z(k.teamAPlayer2Id||""),w(k.teamBPlayer1Id||""),C(k.teamBPlayer2Id||""),T(k.winningTeam||"A"),se(k.winningTeam==="A"?k.teamBGames??0:k.teamAGames??0)},Pe=async k=>{if(!confirm("Delete this match?"))return;const ce=Zn();if(ce)try{const Ne=await tt(`${ce}/squash/matches?id=${encodeURIComponent(k)}`,{method:"DELETE"});if(!Ne.ok){const Le=await Ne.json().catch(()=>({}));throw new Error(Le.error||"Failed")}gn()}catch(Ne){ie((Ne==null?void 0:Ne.message)??"Delete failed")}},Ie=async k=>{k.preventDefault();const ce=ve.trim();if(!ce){ie("Name is required.");return}const Ne=Zn();if(!Ne)return;const Le={name:ce,email:$e.trim()||void 0,userId:D||void 0},Qe=he?"PUT":"POST";he&&(Le.id=he),pe(!0),ie(null);try{const Ge=await tt(`${Ne}/squash/players`,{method:Qe,headers:{"Content-Type":"application/json"},body:JSON.stringify(Le)});if(!Ge.ok){const Yn=await Ge.json().catch(()=>({}));throw new Error(Yn.error||"Failed")}fe(null),Ee(""),M(""),ne(""),nn()}catch(Ge){ie((Ge==null?void 0:Ge.message)??"Failed")}finally{pe(!1)}},ze=()=>{fe(null),Ee(""),M(""),ne("")},Ce=k=>{fe(k.id),Ee(k.name||""),M(k.email||""),ne(k.userId||"")},Qn=async k=>{if(!confirm("Delete this player?"))return;const ce=Zn();if(ce)try{const Ne=await tt(`${ce}/squash/players?id=${encodeURIComponent(k)}`,{method:"DELETE"});if(!Ne.ok){const Le=await Ne.json().catch(()=>({}));throw new Error(Le.error||"Failed")}nn()}catch(Ne){ie((Ne==null?void 0:Ne.message)??"Delete failed")}};u.useEffect(()=>{Ze&&(nn(),r==="players"&&gr())},[Ze,r]);const yr=t.get("date")||t.get("dateFrom")||t.get("dateTo")||t.get("playerIds");u.useEffect(()=>{!Ze||!yr||gn()},[]),u.useEffect(()=>{function k(ce){X.current&&!X.current.contains(ce.target)&&I(!1)}if(R)return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[R]);const ft=u.useMemo(()=>{const k=[...d];return k.sort((ce,Ne)=>{const Le=ce.date||"",Qe=Ne.date||"";return le==="newest"?Qe.localeCompare(Le):Le.localeCompare(Qe)}),k},[d,le]),vt=Math.max(1,Math.ceil(ft.length/ko)),vr=(m-1)*ko,_l=ft.slice(vr,vr+ko),fp=k=>{const ce=k.teamAGames??0,Ne=k.teamBGames??0;return k.winningTeam==="A"?`${ce}-${Ne}`:`${Ne}-${ce}`},yn=[];if(vt<=7)for(let k=1;k<=vt;k++)yn.push(k);else{const k=m;yn.push(1),k>3&&yn.push("");for(let ce=Math.max(2,k-1);ce<=Math.min(vt-1,k+1);ce++)yn.includes(ce)||yn.push(ce);k<vt-2&&yn.push(""),vt>1&&yn.push(vt)}return e?Ze?s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Admin"}),s.jsx("p",{className:"text-sm text-slate-400",children:s.jsx(ge,{to:"/squash",className:"text-brand-orange hover:text-orange-400",children:"Squash"})}),(je||me)&&s.jsx("div",{className:`rounded-md px-4 py-3 text-sm ${me?"bg-red-900/30 border border-red-800/50 text-red-200":"bg-emerald-900/30 border border-emerald-800/50 text-emerald-200"}`,children:me||je}),s.jsxs("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:[s.jsx("button",{type:"button",onClick:()=>a("matches"),className:`px-4 py-2 rounded-md text-sm font-medium ${r==="matches"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Matches"}),s.jsx("button",{type:"button",onClick:()=>a("players"),className:`px-4 py-2 rounded-md text-sm font-medium ${r==="players"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Players"})]}),r==="matches"&&s.jsxs(s.Fragment,{children:[s.jsxs("section",{children:[s.jsx("h2",{className:"text-base font-semibold text-slate-200 mb-3",children:"Add match"}),s.jsxs("form",{onSubmit:ee,className:"grid grid-cols-2 gap-4 max-w-2xl",children:[s.jsx("div",{className:"col-span-2",children:s.jsx(lr,{id:"matchDate",value:te,onChange:ye,label:"Date",required:!0})}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"matchTeamAP1",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Team A  Player 1"}),s.jsxs("select",{id:"matchTeamAP1",value:de,onChange:k=>_(k.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[s.jsx("option",{value:"",children:" Select "}),F("p1").map(k=>s.jsx("option",{value:k.id,children:k.name||k.id},k.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"matchTeamAP2",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Team A  Player 2"}),s.jsxs("select",{id:"matchTeamAP2",value:$,onChange:k=>z(k.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[s.jsx("option",{value:"",children:" Select "}),F("p2").map(k=>s.jsx("option",{value:k.id,children:k.name||k.id},k.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"matchTeamBP1",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Team B  Player 1"}),s.jsxs("select",{id:"matchTeamBP1",value:Q,onChange:k=>w(k.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[s.jsx("option",{value:"",children:" Select "}),F("p3").map(k=>s.jsx("option",{value:k.id,children:k.name||k.id},k.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"matchTeamBP2",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Team B  Player 2"}),s.jsxs("select",{id:"matchTeamBP2",value:b,onChange:k=>C(k.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[s.jsx("option",{value:"",children:" Select "}),F("p4").map(k=>s.jsx("option",{value:k.id,children:k.name||k.id},k.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"matchWinningTeam",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Winning team"}),s.jsxs("select",{id:"matchWinningTeam",value:A,onChange:k=>T(k.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[s.jsx("option",{value:"A",children:"Team A"}),s.jsx("option",{value:"B",children:"Team B"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"matchLoserGames",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Games won by losing team"}),s.jsxs("select",{id:"matchLoserGames",value:Z,onChange:k=>se(parseInt(k.target.value,10)),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[s.jsx("option",{value:0,children:"0"}),s.jsx("option",{value:1,children:"1"}),s.jsx("option",{value:2,children:"2"})]})]}),s.jsxs("div",{className:"col-span-2 flex gap-2",children:[s.jsx("button",{type:"submit",disabled:H,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:V?"Update match":"Add match"}),s.jsx("button",{type:"button",onClick:ue,className:"rounded-md border border-slate-600 px-4 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"})]})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-base font-semibold text-slate-200 mb-3",children:"Search matches"}),s.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[s.jsx(lr,{id:"searchDate",value:y,onChange:S,label:"Date (exact)",className:"max-w-[12rem]"}),s.jsx(lr,{id:"searchDateFrom",value:f,onChange:p,label:"Date from",className:"max-w-[12rem]"}),s.jsx(lr,{id:"searchDateTo",value:x,onChange:N,label:"Date to",className:"max-w-[12rem]"}),s.jsxs("div",{className:"relative max-w-[14rem] min-w-[12rem]",ref:X,children:[s.jsx("label",{className:"block text-xs font-semibold text-slate-400 mb-1",children:"Filter by players"}),s.jsx("input",{type:"text",value:E,onChange:k=>P(k.target.value),onFocus:()=>I(!0),placeholder:"Search players...",autoComplete:"off",className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none"}),R&&s.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-slate-900 border border-slate-700 rounded-md max-h-48 overflow-y-auto z-10",children:Oe.length?Oe.map(k=>s.jsx("button",{type:"button",onClick:()=>xe(k.id),className:"w-full text-left px-3 py-2 text-sm text-slate-200 hover:bg-slate-800",children:k.name||k.id},k.id)):s.jsx("div",{className:"px-3 py-2 text-sm text-slate-500",children:"No matches"})}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:i.map(k=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-slate-700 text-slate-200 text-xs",children:[nt(k),s.jsx("button",{type:"button",onClick:()=>De(k),className:"text-slate-400 hover:text-slate-100","aria-label":"Remove",children:""})]},k))}),i.length>0&&s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-slate-500",children:"Match:"}),s.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[s.jsx("button",{type:"button",onClick:()=>Y("and"),className:`rounded px-2 py-0.5 text-xs font-medium ${O==="and"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"AND"}),s.jsx("button",{type:"button",onClick:()=>Y("or"),className:`rounded px-2 py-0.5 text-xs font-medium ${O==="or"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"OR"})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:gn,disabled:L,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:L?"Searching":"Search"}),s.jsx("button",{type:"button",onClick:q,className:"rounded-md border border-slate-600 px-4 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Clear"})]})]})]}),s.jsxs("section",{children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-3",children:[s.jsx("h2",{className:"text-base font-semibold text-slate-200",children:"Search results"}),v&&ft.length>0&&s.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[s.jsx("button",{type:"button",onClick:()=>be("newest"),className:`rounded px-2 py-0.5 text-xs font-medium ${le==="newest"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"Newest first"}),s.jsx("button",{type:"button",onClick:()=>be("oldest"),className:`rounded px-2 py-0.5 text-xs font-medium ${le==="oldest"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"Oldest first"})]})]}),v&&s.jsx("div",{className:"rounded-md border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm text-slate-400 mb-3",children:ft.length===0?"No results":`${ft.length} results`}),v?_l.length===0?s.jsx("ul",{className:"list-none p-0",children:s.jsx("li",{className:"py-2 text-slate-400",children:"No matches found."})}):s.jsxs(s.Fragment,{children:[s.jsx("ul",{className:"list-none p-0",children:_l.map(k=>{var Qe,Ge;const ce=k.id||((Ge=(Qe=k.PK)==null?void 0:Qe.replace)==null?void 0:Ge.call(Qe,"SQUASH#MATCH#",""))||"",Ne=[nt(k.teamAPlayer1Id||""),nt(k.teamAPlayer2Id||"")].filter(Boolean).join(" & "),Le=[nt(k.teamBPlayer1Id||""),nt(k.teamBPlayer2Id||"")].filter(Boolean).join(" & ");return s.jsxs("li",{className:"flex items-center gap-2 flex-wrap py-2 border-b border-slate-800 last:border-0",children:[s.jsx("span",{className:"font-semibold text-slate-200",children:k.date||""}),s.jsxs("span",{className:"text-slate-300",children:[Ne," vs ",Le]}),s.jsx("span",{className:"italic text-slate-400",children:fp(k)}),s.jsx("button",{type:"button",onClick:()=>Ue(k),className:"rounded-md border border-slate-600 px-2 py-1 text-xs text-slate-300 hover:bg-slate-800",children:"Edit"}),s.jsx("button",{type:"button",onClick:()=>Pe(ce),className:"rounded-md border border-red-800/50 px-2 py-1 text-xs text-red-300 hover:bg-red-900/30",children:"Delete"})]},ce)})}),vt>1&&s.jsxs("div",{className:"flex items-center gap-2 mt-4 flex-wrap",children:[s.jsx("button",{type:"button",disabled:m<=1,onClick:()=>g(k=>Math.max(1,k-1)),className:"rounded-md border border-slate-600 px-3 py-1 text-sm disabled:opacity-50 disabled:cursor-not-allowed text-slate-300 hover:bg-slate-800",children:"Prev"}),s.jsx("span",{className:"flex items-center gap-1",children:yn.map((k,ce)=>k===""?s.jsx("span",{className:"px-1 text-slate-500",children:""},`ellipsis-${ce}`):k===m?s.jsx("span",{className:"min-w-[2rem] px-2 py-1 text-center font-semibold text-slate-200",children:k},k):s.jsx("button",{type:"button",onClick:()=>g(k),className:"min-w-[2rem] rounded px-2 py-1 text-sm text-slate-300 hover:bg-slate-800 border border-slate-600",children:k},k))}),s.jsx("button",{type:"button",disabled:m>=vt,onClick:()=>g(k=>Math.min(vt,k+1)),className:"rounded-md border border-slate-600 px-3 py-1 text-sm disabled:opacity-50 disabled:cursor-not-allowed text-slate-300 hover:bg-slate-800",children:"Next"})]})]}):s.jsx("div",{className:"flex items-center justify-center min-h-[280px]",children:s.jsx("p",{className:"text-2xl sm:text-3xl font-light text-slate-500/80 tracking-wide animate-pulse",children:"Enter search criteria and click Search to find matches."})})]})]}),r==="players"&&s.jsxs(s.Fragment,{children:[s.jsxs("section",{children:[s.jsx("h2",{className:"text-base font-semibold text-slate-200 mb-3",children:"Players"}),s.jsxs("form",{onSubmit:Ie,className:"space-y-4 max-w-md",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"playerName",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Name"}),s.jsx("input",{type:"text",id:"playerName",value:ve,onChange:k=>Ee(k.target.value),required:!0,placeholder:"Player name",className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"playerEmail",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Email (optional)"}),s.jsx("input",{type:"email",id:"playerEmail",value:$e,onChange:k=>M(k.target.value),placeholder:"player@example.com",className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"playerUserId",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Link to user (optional)"}),s.jsxs("select",{id:"playerUserId",value:D,onChange:k=>ne(k.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[s.jsx("option",{value:"",children:" None "}),U.map(k=>s.jsx("option",{value:k.sub||"",children:k.email||k.username||k.sub},k.sub||k.username))]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"submit",disabled:oe,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:he?"Update player":"Add player"}),s.jsx("button",{type:"button",onClick:ze,className:"rounded-md border border-slate-600 px-4 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"})]})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-base font-semibold text-slate-200 mb-3",children:"Player list"}),ae.length===0?s.jsx("p",{className:"text-sm text-slate-500",children:"No players yet. Add players above."}):s.jsx("ul",{className:"list-none p-0",children:ae.map(k=>s.jsxs("li",{className:"flex items-center gap-2 flex-wrap py-2 border-b border-slate-800 last:border-0",children:[s.jsx("span",{className:"font-semibold text-slate-200",children:k.name||k.id}),k.email&&s.jsxs("span",{className:"text-slate-500 text-sm",children:["(",k.email,")"]}),s.jsx("button",{type:"button",onClick:()=>Ce(k),className:"rounded-md border border-slate-600 px-2 py-1 text-xs text-slate-300 hover:bg-slate-800",children:"Edit"}),s.jsx("button",{type:"button",onClick:()=>Qn(k.id),className:"rounded-md border border-red-800/50 px-2 py-1 text-xs text-red-300 hover:bg-red-900/30",children:"Delete"})]},k.id))})]})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Admin"}),s.jsx("div",{className:"rounded-md bg-amber-900/30 border border-amber-800/50 px-4 py-3 text-sm text-amber-200",children:"Squash Admin requires manager (in Squash group) or SuperAdmin access."})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Admin"}),s.jsxs("div",{className:"rounded-md bg-red-900/30 border border-red-800/50 px-4 py-3 text-sm text-red-200",children:["Sign in required. ",s.jsx(ge,{to:"/auth",className:"underline hover:text-red-100",children:"Sign in"})]})]})},fd=[{label:"Websites",to:"/websites",section:"discover",minRole:"guest"},{label:"Media",to:"/media",section:"discover",minRole:"guest"},{label:"Internet Dashboard",to:"/internet-dashboard",section:"discover",minRole:"guest"},{label:"Profile",to:"/profile",section:"discover",minRole:"user"},{label:"Squash",to:"/squash",section:"squash",minRole:"user"},{label:"Squash Admin",to:"/squash-admin",section:"squash",minRole:"manager"},{label:"Our Properties",to:"/other-properties/our-properties",section:"otherProperties",minRole:"guest"},{label:"Our Properties",to:"/admin/other-properties/our-properties",section:"admin",minRole:"manager"},{label:"Membership",to:"/admin/membership",section:"admin",minRole:"manager"},{label:"Websites",to:"/admin/websites",section:"admin",minRole:"manager"},{label:"Media",to:"/admin/media",section:"admin",minRole:"manager"},{label:"Branding",to:"/admin/branding",section:"admin",minRole:"superadmin"},{label:"Internet Dashboard",to:"/admin/internet-dashboard",section:"admin",minRole:"superadmin"}],dp="funkedupshift_sectionOpen";function Sa(){return{discover:!0,squash:!1,otherProperties:!0,admin:!1}}function kv(){try{const e=sessionStorage.getItem(dp);if(!e)return Sa();const t=JSON.parse(e);return typeof t!="object"||t===null?Sa():{...Sa(),...t}}catch{return Sa()}}function Cv(e){try{sessionStorage.setItem(dp,JSON.stringify(e))}catch{}}const Ev=()=>{const{user:e,isLoading:t,signOut:n}=et(),{logo:r}=ip(),a=Xt(),[l,o]=Ae.useState(!1),[i,c]=Ae.useState(kv),d=f=>{c(p=>{const x={...p,[f]:!p[f]};return Cv(x),x})},h=()=>{n(),o(!1),a("/")};e==null||e.role;const m=fd.filter(f=>yt(e??null,f.minRole)),g=m.filter(f=>f.section==="discover"),v=m.filter(f=>f.section==="otherProperties"),j=fd.filter(f=>f.section==="squash").filter(f=>f.to==="/squash"?fl(e):ml(e)),y=m.filter(f=>f.section==="admin"),S=({isActive:f})=>["flex items-center rounded-md px-3 py-2 text-sm font-medium",f?"bg-slate-800 text-white":"text-slate-300 hover:bg-slate-800/70 hover:text-white"].join(" ");return s.jsxs("div",{className:"min-h-screen bg-slate-950 text-slate-50 flex flex-col",children:[s.jsx("header",{className:"border-b border-slate-800 bg-slate-950/80 backdrop-blur z-20 sticky top-0",children:s.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-3 flex items-center justify-between gap-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-md p-2 text-slate-200 hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-brand-orange lg:hidden",onClick:()=>o(!0),"aria-label":"Open main navigation",children:s.jsx(Pu,{className:"h-6 w-6"})}),s.jsxs(ge,{to:"/",className:"flex items-center gap-2",children:[r?s.jsx("img",{src:r.url,alt:r.alt,className:"h-8 w-auto rounded-md border border-slate-700 object-contain"}):s.jsx("div",{className:"h-8 w-8 rounded-md border border-slate-700 bg-gradient-to-br from-brand-orange to-brand-navy"}),s.jsx("span",{className:"text-sm font-semibold tracking-[0.2em] uppercase text-slate-100",children:"Funked Up Shift"})]})]}),s.jsx("div",{className:"flex items-center gap-3",children:e?s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"hidden sm:inline text-xs text-slate-300",children:[e.email," ",s.jsxs("span",{className:"text-slate-500",children:["(",e.role==="superadmin"?"SuperAdmin":e.role,")"]})]}),s.jsx("button",{type:"button",onClick:h,className:"rounded-full border border-slate-700 px-3 py-1 text-xs font-medium text-slate-200 hover:bg-slate-800",children:"Sign out"})]}):t?s.jsx("span",{className:"text-xs text-slate-400",children:"Loading..."}):s.jsx(ge,{to:"/auth",className:"rounded-full bg-brand-orange px-3 py-1 text-xs font-semibold text-slate-950 hover:bg-orange-500",children:"Sign in"})})]})}),s.jsxs("div",{className:"flex-1 flex",children:[s.jsx("aside",{className:"hidden lg:block w-64 border-r border-slate-800 bg-slate-950/80",children:s.jsxs("nav",{className:"h-full overflow-y-auto px-4 py-6 space-y-6 text-sm",children:[s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("discover"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Discover",i.discover??!0?s.jsx(bn,{className:"h-4 w-4 shrink-0"}):s.jsx(jn,{className:"h-4 w-4 shrink-0"})]}),(i.discover??!0)&&s.jsx("div",{className:"space-y-1",children:g.map(f=>s.jsx(wn,{to:f.to,className:S,children:f.label},f.to))})]}),v.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("otherProperties"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Other Properties",i.otherProperties??!0?s.jsx(bn,{className:"h-4 w-4 shrink-0"}):s.jsx(jn,{className:"h-4 w-4 shrink-0"})]}),(i.otherProperties??!0)&&s.jsx("div",{className:"space-y-1",children:v.map(f=>s.jsx(wn,{to:f.to,className:S,children:f.label},f.to))})]}),j.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("squash"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Squash",i.squash??!1?s.jsx(bn,{className:"h-4 w-4 shrink-0"}):s.jsx(jn,{className:"h-4 w-4 shrink-0"})]}),(i.squash??!1)&&s.jsx("div",{className:"space-y-1",children:j.map(f=>s.jsx(wn,{to:f.to,className:S,children:f.label},f.to))})]}),y.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("admin"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Admin",i.admin??!1?s.jsx(bn,{className:"h-4 w-4 shrink-0"}):s.jsx(jn,{className:"h-4 w-4 shrink-0"})]}),(i.admin??!1)&&s.jsx("div",{className:"space-y-1",children:y.map(f=>s.jsx(wn,{to:f.to,className:S,children:f.label},f.to))})]})]})}),s.jsxs(Wr,{open:l,onClose:o,className:"lg:hidden",children:[s.jsx("div",{className:"fixed inset-0 bg-black/40","aria-hidden":"true"}),s.jsxs(Wr.Panel,{className:"fixed inset-y-0 left-0 w-72 bg-slate-950 border-r border-slate-800 p-4 flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx(Wr.Title,{className:"text-sm font-semibold tracking-[0.15em] uppercase text-slate-100",children:"Funked Up Shift"}),s.jsx("button",{type:"button",className:"rounded-md p-1 text-slate-200 hover:bg-slate-800",onClick:()=>o(!1),"aria-label":"Close main navigation",children:s.jsx(Fm,{className:"h-5 w-5"})})]}),s.jsxs("nav",{className:"flex-1 overflow-y-auto space-y-6 text-sm",children:[s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("discover"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Discover",i.discover??!0?s.jsx(bn,{className:"h-4 w-4 shrink-0"}):s.jsx(jn,{className:"h-4 w-4 shrink-0"})]}),(i.discover??!0)&&s.jsx("div",{className:"space-y-1",children:g.map(f=>s.jsx(wn,{to:f.to,className:S,onClick:()=>o(!1),children:f.label},f.to))})]}),v.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("otherProperties"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Other Properties",i.otherProperties??!0?s.jsx(bn,{className:"h-4 w-4 shrink-0"}):s.jsx(jn,{className:"h-4 w-4 shrink-0"})]}),(i.otherProperties??!0)&&s.jsx("div",{className:"space-y-1",children:v.map(f=>s.jsx(wn,{to:f.to,className:S,onClick:()=>o(!1),children:f.label},f.to))})]}),j.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("squash"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Squash",i.squash??!1?s.jsx(bn,{className:"h-4 w-4 shrink-0"}):s.jsx(jn,{className:"h-4 w-4 shrink-0"})]}),(i.squash??!1)&&s.jsx("div",{className:"space-y-1",children:j.map(f=>s.jsx(wn,{to:f.to,className:S,onClick:()=>o(!1),children:f.label},f.to))})]}),y.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("admin"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Admin",i.admin??!1?s.jsx(bn,{className:"h-4 w-4 shrink-0"}):s.jsx(jn,{className:"h-4 w-4 shrink-0"})]}),(i.admin??!1)&&s.jsx("div",{className:"space-y-1",children:y.map(f=>s.jsx(wn,{to:f.to,className:S,onClick:()=>o(!1),children:f.label},f.to))})]})]})]})]}),s.jsx("main",{className:"flex-1 min-w-0",children:s.jsx("div",{className:"mx-auto max-w-6xl px-4 py-6",children:s.jsxs(Lx,{children:[s.jsx(He,{path:"/",element:s.jsx(_y,{})}),s.jsx(He,{path:"/websites",element:s.jsx(My,{})}),s.jsx(He,{path:"/websites/:id",element:s.jsx(Fy,{})}),s.jsx(He,{path:"/media",element:s.jsx(By,{})}),s.jsx(He,{path:"/media/:id",element:s.jsx(zy,{})}),s.jsx(He,{path:"/internet-dashboard",element:s.jsx(Ky,{})}),s.jsx(He,{path:"/other-properties/our-properties",element:s.jsx(Qy,{})}),s.jsx(He,{path:"/squash",element:s.jsx(Nv,{})}),s.jsx(He,{path:"/squash-admin",element:s.jsx(Sv,{})}),s.jsx(He,{path:"/admin/branding",element:s.jsx(Zy,{})}),s.jsx(He,{path:"/admin/internet-dashboard",element:s.jsx(Xy,{})}),s.jsx(He,{path:"/admin/other-properties/our-properties",element:s.jsx(ev,{})}),s.jsx(He,{path:"/admin/membership",element:s.jsx(rv,{})}),s.jsx(He,{path:"/admin/users/edit",element:s.jsx(pv,{})}),s.jsx(He,{path:"/admin/websites",element:s.jsx(lv,{})}),s.jsx(He,{path:"/admin/sites/edit/:id",element:s.jsx(cv,{})}),s.jsx(He,{path:"/admin/media",element:s.jsx(iv,{})}),s.jsx(He,{path:"/admin/media/edit/:id",element:s.jsx(dv,{})}),s.jsx(He,{path:"/admin/*",element:s.jsx("div",{children:"Admin area"})}),s.jsx(He,{path:"/profile",element:s.jsx(bv,{})}),s.jsx(He,{path:"/auth",element:s.jsx(hv,{})}),s.jsx(He,{path:"*",element:s.jsx("div",{children:"Not found"})})]})})})]}),s.jsx("footer",{className:"border-t border-slate-800 bg-slate-950",children:s.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-4 flex flex-col sm:flex-row items-center justify-between gap-3 text-xs text-slate-500",children:[s.jsxs("nav",{className:"flex flex-wrap gap-3 justify-center sm:justify-start",children:[s.jsx(ge,{to:"/",className:"hover:text-slate-300",children:"Home"}),s.jsx(ge,{to:"/websites",className:"hover:text-slate-300",children:"Websites"}),s.jsx(ge,{to:"/media",className:"hover:text-slate-300",children:"Media"}),s.jsx(ge,{to:"/internet-dashboard",className:"hover:text-slate-300",children:"Internet dashboard"}),s.jsx(ge,{to:"/other-properties/our-properties",className:"hover:text-slate-300",children:"Our Properties"}),e&&s.jsx(ge,{to:"/profile",className:"hover:text-slate-300",children:"Profile"}),yt(e??null,"superadmin")&&s.jsx(ge,{to:"/admin/branding",className:"hover:text-slate-300",children:"Branding"}),fl(e)&&s.jsx(ge,{to:"/squash",className:"hover:text-slate-300",children:"Squash"}),ml(e)&&s.jsx(ge,{to:"/squash-admin",className:"hover:text-slate-300",children:"Squash Admin"})]}),s.jsxs("div",{className:"text-slate-600",children:[s.jsx("span",{className:"font-mono text-[11px]",children:"funkedupshift"})," ",s.jsx("span",{className:"text-slate-700",children:""})," ",s.jsx("span",{children:"All data public, admin-managed curation"})]})]})})]})},md=document.getElementById("root");md&&Co.createRoot(md).render(s.jsx(Ae.StrictMode,{children:s.jsx(Mx,{children:s.jsx(Iy,{children:s.jsx(Oy,{children:s.jsx(Ev,{})})})})}));

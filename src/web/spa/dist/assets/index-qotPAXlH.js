function Wp(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const l=Object.getOwnPropertyDescriptor(r,a);l&&Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function Hp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _d={exports:{}},El={},Bd={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ra=Symbol.for("react.element"),Kp=Symbol.for("react.portal"),Vp=Symbol.for("react.fragment"),qp=Symbol.for("react.strict_mode"),Jp=Symbol.for("react.profiler"),Qp=Symbol.for("react.provider"),Yp=Symbol.for("react.context"),Zp=Symbol.for("react.forward_ref"),Xp=Symbol.for("react.suspense"),eh=Symbol.for("react.memo"),th=Symbol.for("react.lazy"),Xc=Symbol.iterator;function nh(e){return e===null||typeof e!="object"?null:(e=Xc&&e[Xc]||e["@@iterator"],typeof e=="function"?e:null)}var zd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Gd=Object.assign,Wd={};function sr(e,t,n){this.props=e,this.context=t,this.refs=Wd,this.updater=n||zd}sr.prototype.isReactComponent={};sr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};sr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Hd(){}Hd.prototype=sr.prototype;function Yi(e,t,n){this.props=e,this.context=t,this.refs=Wd,this.updater=n||zd}var Zi=Yi.prototype=new Hd;Zi.constructor=Yi;Gd(Zi,sr.prototype);Zi.isPureReactComponent=!0;var eu=Array.isArray,Kd=Object.prototype.hasOwnProperty,Xi={current:null},Vd={key:!0,ref:!0,__self:!0,__source:!0};function qd(e,t,n){var r,a={},l=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(l=""+t.key),t)Kd.call(t,r)&&!Vd.hasOwnProperty(r)&&(a[r]=t[r]);var c=arguments.length-2;if(c===1)a.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];a.children=u}if(e&&e.defaultProps)for(r in c=e.defaultProps,c)a[r]===void 0&&(a[r]=c[r]);return{$$typeof:ra,type:e,key:l,ref:o,props:a,_owner:Xi.current}}function sh(e,t){return{$$typeof:ra,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ec(e){return typeof e=="object"&&e!==null&&e.$$typeof===ra}function rh(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var tu=/\/+/g;function Zl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?rh(""+e.key):t.toString(36)}function Ma(e,t,n,r,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case ra:case Kp:o=!0}}if(o)return o=e,a=a(o),e=r===""?"."+Zl(o,0):r,eu(a)?(n="",e!=null&&(n=e.replace(tu,"$&/")+"/"),Ma(a,t,n,"",function(d){return d})):a!=null&&(ec(a)&&(a=sh(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(tu,"$&/")+"/")+e)),t.push(a)),1;if(o=0,r=r===""?".":r+":",eu(e))for(var c=0;c<e.length;c++){l=e[c];var u=r+Zl(l,c);o+=Ma(l,t,n,u,a)}else if(u=nh(e),typeof u=="function")for(e=u.call(e),c=0;!(l=e.next()).done;)l=l.value,u=r+Zl(l,c++),o+=Ma(l,t,n,u,a);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function fa(e,t,n){if(e==null)return e;var r=[],a=0;return Ma(e,r,"","",function(l){return t.call(n,l,a++)}),r}function ah(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var kt={current:null},Oa={transition:null},lh={ReactCurrentDispatcher:kt,ReactCurrentBatchConfig:Oa,ReactCurrentOwner:Xi};function Jd(){throw Error("act(...) is not supported in production builds of React.")}Ce.Children={map:fa,forEach:function(e,t,n){fa(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return fa(e,function(){t++}),t},toArray:function(e){return fa(e,function(t){return t})||[]},only:function(e){if(!ec(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ce.Component=sr;Ce.Fragment=Vp;Ce.Profiler=Jp;Ce.PureComponent=Yi;Ce.StrictMode=qp;Ce.Suspense=Xp;Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lh;Ce.act=Jd;Ce.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Gd({},e.props),a=e.key,l=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,o=Xi.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)Kd.call(t,u)&&!Vd.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&c!==void 0?c[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:ra,type:e.type,key:a,ref:l,props:r,_owner:o}};Ce.createContext=function(e){return e={$$typeof:Yp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Qp,_context:e},e.Consumer=e};Ce.createElement=qd;Ce.createFactory=function(e){var t=qd.bind(null,e);return t.type=e,t};Ce.createRef=function(){return{current:null}};Ce.forwardRef=function(e){return{$$typeof:Zp,render:e}};Ce.isValidElement=ec;Ce.lazy=function(e){return{$$typeof:th,_payload:{_status:-1,_result:e},_init:ah}};Ce.memo=function(e,t){return{$$typeof:eh,type:e,compare:t===void 0?null:t}};Ce.startTransition=function(e){var t=Oa.transition;Oa.transition={};try{e()}finally{Oa.transition=t}};Ce.unstable_act=Jd;Ce.useCallback=function(e,t){return kt.current.useCallback(e,t)};Ce.useContext=function(e){return kt.current.useContext(e)};Ce.useDebugValue=function(){};Ce.useDeferredValue=function(e){return kt.current.useDeferredValue(e)};Ce.useEffect=function(e,t){return kt.current.useEffect(e,t)};Ce.useId=function(){return kt.current.useId()};Ce.useImperativeHandle=function(e,t,n){return kt.current.useImperativeHandle(e,t,n)};Ce.useInsertionEffect=function(e,t){return kt.current.useInsertionEffect(e,t)};Ce.useLayoutEffect=function(e,t){return kt.current.useLayoutEffect(e,t)};Ce.useMemo=function(e,t){return kt.current.useMemo(e,t)};Ce.useReducer=function(e,t,n){return kt.current.useReducer(e,t,n)};Ce.useRef=function(e){return kt.current.useRef(e)};Ce.useState=function(e){return kt.current.useState(e)};Ce.useSyncExternalStore=function(e,t,n){return kt.current.useSyncExternalStore(e,t,n)};Ce.useTransition=function(){return kt.current.useTransition()};Ce.version="18.3.1";Bd.exports=Ce;var i=Bd.exports;const Ae=Hp(i),Vs=Wp({__proto__:null,default:Ae},[i]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oh=i,ih=Symbol.for("react.element"),ch=Symbol.for("react.fragment"),uh=Object.prototype.hasOwnProperty,dh=oh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mh={key:!0,ref:!0,__self:!0,__source:!0};function Qd(e,t,n){var r,a={},l=null,o=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)uh.call(t,r)&&!mh.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:ih,type:e,key:l,ref:o,props:a,_owner:dh.current}}El.Fragment=ch;El.jsx=Qd;El.jsxs=Qd;_d.exports=El;var s=_d.exports,Go={},Yd={exports:{}},Ot={},Zd={exports:{}},Xd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(j,E){var U=j.length;j.push(E);e:for(;0<U;){var B=U-1>>>1,N=j[B];if(0<a(N,E))j[B]=E,j[U]=N,U=B;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var E=j[0],U=j.pop();if(U!==E){j[0]=U;e:for(var B=0,N=j.length,H=N>>>1;B<H;){var ne=2*(B+1)-1,_=j[ne],W=ne+1,A=j[W];if(0>a(_,U))W<N&&0>a(A,_)?(j[B]=A,j[W]=U,B=W):(j[B]=_,j[ne]=U,B=ne);else if(W<N&&0>a(A,U))j[B]=A,j[W]=U,B=W;else break e}}return E}function a(j,E){var U=j.sortIndex-E.sortIndex;return U!==0?U:j.id-E.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var o=Date,c=o.now();e.unstable_now=function(){return o.now()-c}}var u=[],d=[],p=1,f=null,g=3,v=!1,b=!1,y=!1,S=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(j){for(var E=n(d);E!==null;){if(E.callback===null)r(d);else if(E.startTime<=j)r(d),E.sortIndex=E.expirationTime,t(u,E);else break;E=n(d)}}function k(j){if(y=!1,m(j),!b)if(n(u)!==null)b=!0,oe(C);else{var E=n(d);E!==null&&fe(k,E.startTime-j)}}function C(j,E){b=!1,y&&(y=!1,x($),$=-1),v=!0;var U=g;try{for(m(E),f=n(u);f!==null&&(!(f.expirationTime>E)||j&&!q());){var B=f.callback;if(typeof B=="function"){f.callback=null,g=f.priorityLevel;var N=B(f.expirationTime<=E);E=e.unstable_now(),typeof N=="function"?f.callback=N:f===n(u)&&r(u),m(E)}else r(u);f=n(u)}if(f!==null)var H=!0;else{var ne=n(d);ne!==null&&fe(k,ne.startTime-E),H=!1}return H}finally{f=null,g=U,v=!1}}var P=!1,I=null,$=-1,K=5,F=-1;function q(){return!(e.unstable_now()-F<K)}function G(){if(I!==null){var j=e.unstable_now();F=j;var E=!0;try{E=I(!0,j)}finally{E?re():(P=!1,I=null)}}else P=!1}var re;if(typeof h=="function")re=function(){h(G)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,V=J.port2;J.port1.onmessage=G,re=function(){V.postMessage(null)}}else re=function(){S(G,0)};function oe(j){I=j,P||(P=!0,re())}function fe(j,E){$=S(function(){j(e.unstable_now())},E)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_continueExecution=function(){b||v||(b=!0,oe(C))},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(j){switch(g){case 1:case 2:case 3:var E=3;break;default:E=g}var U=g;g=E;try{return j()}finally{g=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(j,E){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var U=g;g=j;try{return E()}finally{g=U}},e.unstable_scheduleCallback=function(j,E,U){var B=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?B+U:B):U=B,j){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=U+N,j={id:p++,callback:E,priorityLevel:j,startTime:U,expirationTime:N,sortIndex:-1},U>B?(j.sortIndex=U,t(d,j),n(u)===null&&j===n(d)&&(y?(x($),$=-1):y=!0,fe(k,U-B))):(j.sortIndex=N,t(u,j),b||v||(b=!0,oe(C))),j},e.unstable_shouldYield=q,e.unstable_wrapCallback=function(j){var E=g;return function(){var U=g;g=E;try{return j.apply(this,arguments)}finally{g=U}}}})(Xd);Zd.exports=Xd;var fh=Zd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ph=i,Mt=fh;function se(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var em=new Set,Or={};function Ss(e,t){qs(e,t),qs(e+"Capture",t)}function qs(e,t){for(Or[e]=t,e=0;e<t.length;e++)em.add(t[e])}var En=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wo=Object.prototype.hasOwnProperty,hh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nu={},su={};function xh(e){return Wo.call(su,e)?!0:Wo.call(nu,e)?!1:hh.test(e)?su[e]=!0:(nu[e]=!0,!1)}function gh(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function yh(e,t,n,r){if(t===null||typeof t>"u"||gh(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ct(e,t,n,r,a,l,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=o}var xt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){xt[e]=new Ct(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];xt[t]=new Ct(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){xt[e]=new Ct(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){xt[e]=new Ct(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){xt[e]=new Ct(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){xt[e]=new Ct(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){xt[e]=new Ct(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){xt[e]=new Ct(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){xt[e]=new Ct(e,5,!1,e.toLowerCase(),null,!1,!1)});var tc=/[\-:]([a-z])/g;function nc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(tc,nc);xt[t]=new Ct(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(tc,nc);xt[t]=new Ct(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(tc,nc);xt[t]=new Ct(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){xt[e]=new Ct(e,1,!1,e.toLowerCase(),null,!1,!1)});xt.xlinkHref=new Ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){xt[e]=new Ct(e,1,!1,e.toLowerCase(),null,!0,!0)});function sc(e,t,n,r){var a=xt.hasOwnProperty(t)?xt[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(yh(t,n,a,r)&&(n=null),r||a===null?xh(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var An=ph.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pa=Symbol.for("react.element"),Ts=Symbol.for("react.portal"),Rs=Symbol.for("react.fragment"),rc=Symbol.for("react.strict_mode"),Ho=Symbol.for("react.profiler"),tm=Symbol.for("react.provider"),nm=Symbol.for("react.context"),ac=Symbol.for("react.forward_ref"),Ko=Symbol.for("react.suspense"),Vo=Symbol.for("react.suspense_list"),lc=Symbol.for("react.memo"),Un=Symbol.for("react.lazy"),sm=Symbol.for("react.offscreen"),ru=Symbol.iterator;function dr(e){return e===null||typeof e!="object"?null:(e=ru&&e[ru]||e["@@iterator"],typeof e=="function"?e:null)}var Ze=Object.assign,Xl;function Nr(e){if(Xl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Xl=t&&t[1]||""}return`
`+Xl+e}var eo=!1;function to(e,t){if(!e||eo)return"";eo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),l=r.stack.split(`
`),o=a.length-1,c=l.length-1;1<=o&&0<=c&&a[o]!==l[c];)c--;for(;1<=o&&0<=c;o--,c--)if(a[o]!==l[c]){if(o!==1||c!==1)do if(o--,c--,0>c||a[o]!==l[c]){var u=`
`+a[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=c);break}}}finally{eo=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Nr(e):""}function vh(e){switch(e.tag){case 5:return Nr(e.type);case 16:return Nr("Lazy");case 13:return Nr("Suspense");case 19:return Nr("SuspenseList");case 0:case 2:case 15:return e=to(e.type,!1),e;case 11:return e=to(e.type.render,!1),e;case 1:return e=to(e.type,!0),e;default:return""}}function qo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Rs:return"Fragment";case Ts:return"Portal";case Ho:return"Profiler";case rc:return"StrictMode";case Ko:return"Suspense";case Vo:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case nm:return(e.displayName||"Context")+".Consumer";case tm:return(e._context.displayName||"Context")+".Provider";case ac:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case lc:return t=e.displayName||null,t!==null?t:qo(e.type)||"Memo";case Un:t=e._payload,e=e._init;try{return qo(e(t))}catch{}}return null}function bh(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qo(t);case 8:return t===rc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Zn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function rm(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function wh(e){var t=rm(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,l.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ha(e){e._valueTracker||(e._valueTracker=wh(e))}function am(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=rm(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Qa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Jo(e,t){var n=t.checked;return Ze({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function au(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Zn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function lm(e,t){t=t.checked,t!=null&&sc(e,"checked",t,!1)}function Qo(e,t){lm(e,t);var n=Zn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Yo(e,t.type,n):t.hasOwnProperty("defaultValue")&&Yo(e,t.type,Zn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function lu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Yo(e,t,n){(t!=="number"||Qa(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Sr=Array.isArray;function Bs(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Zn(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Zo(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(se(91));return Ze({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ou(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(se(92));if(Sr(n)){if(1<n.length)throw Error(se(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Zn(n)}}function om(e,t){var n=Zn(t.value),r=Zn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function iu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function im(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xo(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?im(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var xa,cm=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(xa=xa||document.createElement("div"),xa.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=xa.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Fr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Tr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jh=["Webkit","ms","Moz","O"];Object.keys(Tr).forEach(function(e){jh.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Tr[t]=Tr[e]})});function um(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Tr.hasOwnProperty(e)&&Tr[e]?(""+t).trim():t+"px"}function dm(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=um(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var Nh=Ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ei(e,t){if(t){if(Nh[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(se(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(se(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(se(61))}if(t.style!=null&&typeof t.style!="object")throw Error(se(62))}}function ti(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ni=null;function oc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var si=null,zs=null,Gs=null;function cu(e){if(e=oa(e)){if(typeof si!="function")throw Error(se(280));var t=e.stateNode;t&&(t=Al(t),si(e.stateNode,e.type,t))}}function mm(e){zs?Gs?Gs.push(e):Gs=[e]:zs=e}function fm(){if(zs){var e=zs,t=Gs;if(Gs=zs=null,cu(e),t)for(e=0;e<t.length;e++)cu(t[e])}}function pm(e,t){return e(t)}function hm(){}var no=!1;function xm(e,t,n){if(no)return e(t,n);no=!0;try{return pm(e,t,n)}finally{no=!1,(zs!==null||Gs!==null)&&(hm(),fm())}}function _r(e,t){var n=e.stateNode;if(n===null)return null;var r=Al(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(se(231,t,typeof n));return n}var ri=!1;if(En)try{var mr={};Object.defineProperty(mr,"passive",{get:function(){ri=!0}}),window.addEventListener("test",mr,mr),window.removeEventListener("test",mr,mr)}catch{ri=!1}function Sh(e,t,n,r,a,l,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(p){this.onError(p)}}var Rr=!1,Ya=null,Za=!1,ai=null,kh={onError:function(e){Rr=!0,Ya=e}};function Ch(e,t,n,r,a,l,o,c,u){Rr=!1,Ya=null,Sh.apply(kh,arguments)}function Eh(e,t,n,r,a,l,o,c,u){if(Ch.apply(this,arguments),Rr){if(Rr){var d=Ya;Rr=!1,Ya=null}else throw Error(se(198));Za||(Za=!0,ai=d)}}function ks(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function gm(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function uu(e){if(ks(e)!==e)throw Error(se(188))}function Ph(e){var t=e.alternate;if(!t){if(t=ks(e),t===null)throw Error(se(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var l=a.alternate;if(l===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===n)return uu(a),e;if(l===r)return uu(a),t;l=l.sibling}throw Error(se(188))}if(n.return!==r.return)n=a,r=l;else{for(var o=!1,c=a.child;c;){if(c===n){o=!0,n=a,r=l;break}if(c===r){o=!0,r=a,n=l;break}c=c.sibling}if(!o){for(c=l.child;c;){if(c===n){o=!0,n=l,r=a;break}if(c===r){o=!0,r=l,n=a;break}c=c.sibling}if(!o)throw Error(se(189))}}if(n.alternate!==r)throw Error(se(190))}if(n.tag!==3)throw Error(se(188));return n.stateNode.current===n?e:t}function ym(e){return e=Ph(e),e!==null?vm(e):null}function vm(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=vm(e);if(t!==null)return t;e=e.sibling}return null}var bm=Mt.unstable_scheduleCallback,du=Mt.unstable_cancelCallback,Th=Mt.unstable_shouldYield,Rh=Mt.unstable_requestPaint,st=Mt.unstable_now,Lh=Mt.unstable_getCurrentPriorityLevel,ic=Mt.unstable_ImmediatePriority,wm=Mt.unstable_UserBlockingPriority,Xa=Mt.unstable_NormalPriority,Ah=Mt.unstable_LowPriority,jm=Mt.unstable_IdlePriority,Pl=null,mn=null;function $h(e){if(mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(Pl,e,void 0,(e.current.flags&128)===128)}catch{}}var sn=Math.clz32?Math.clz32:Dh,Ih=Math.log,Uh=Math.LN2;function Dh(e){return e>>>=0,e===0?32:31-(Ih(e)/Uh|0)|0}var ga=64,ya=4194304;function kr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function el(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,l=e.pingedLanes,o=n&268435455;if(o!==0){var c=o&~a;c!==0?r=kr(c):(l&=o,l!==0&&(r=kr(l)))}else o=n&~a,o!==0?r=kr(o):l!==0&&(r=kr(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,l=t&-t,a>=l||a===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-sn(t),a=1<<n,r|=e[n],t&=~a;return r}function Mh(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Oh(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var o=31-sn(l),c=1<<o,u=a[o];u===-1?(!(c&n)||c&r)&&(a[o]=Mh(c,t)):u<=t&&(e.expiredLanes|=c),l&=~c}}function li(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Nm(){var e=ga;return ga<<=1,!(ga&4194240)&&(ga=64),e}function so(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function aa(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-sn(t),e[t]=n}function Fh(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-sn(n),l=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~l}}function cc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-sn(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var ze=0;function Sm(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var km,uc,Cm,Em,Pm,oi=!1,va=[],Gn=null,Wn=null,Hn=null,Br=new Map,zr=new Map,Mn=[],_h="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mu(e,t){switch(e){case"focusin":case"focusout":Gn=null;break;case"dragenter":case"dragleave":Wn=null;break;case"mouseover":case"mouseout":Hn=null;break;case"pointerover":case"pointerout":Br.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":zr.delete(t.pointerId)}}function fr(e,t,n,r,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[a]},t!==null&&(t=oa(t),t!==null&&uc(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Bh(e,t,n,r,a){switch(t){case"focusin":return Gn=fr(Gn,e,t,n,r,a),!0;case"dragenter":return Wn=fr(Wn,e,t,n,r,a),!0;case"mouseover":return Hn=fr(Hn,e,t,n,r,a),!0;case"pointerover":var l=a.pointerId;return Br.set(l,fr(Br.get(l)||null,e,t,n,r,a)),!0;case"gotpointercapture":return l=a.pointerId,zr.set(l,fr(zr.get(l)||null,e,t,n,r,a)),!0}return!1}function Tm(e){var t=ds(e.target);if(t!==null){var n=ks(t);if(n!==null){if(t=n.tag,t===13){if(t=gm(n),t!==null){e.blockedOn=t,Pm(e.priority,function(){Cm(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Fa(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ii(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ni=r,n.target.dispatchEvent(r),ni=null}else return t=oa(n),t!==null&&uc(t),e.blockedOn=n,!1;t.shift()}return!0}function fu(e,t,n){Fa(e)&&n.delete(t)}function zh(){oi=!1,Gn!==null&&Fa(Gn)&&(Gn=null),Wn!==null&&Fa(Wn)&&(Wn=null),Hn!==null&&Fa(Hn)&&(Hn=null),Br.forEach(fu),zr.forEach(fu)}function pr(e,t){e.blockedOn===t&&(e.blockedOn=null,oi||(oi=!0,Mt.unstable_scheduleCallback(Mt.unstable_NormalPriority,zh)))}function Gr(e){function t(a){return pr(a,e)}if(0<va.length){pr(va[0],e);for(var n=1;n<va.length;n++){var r=va[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Gn!==null&&pr(Gn,e),Wn!==null&&pr(Wn,e),Hn!==null&&pr(Hn,e),Br.forEach(t),zr.forEach(t),n=0;n<Mn.length;n++)r=Mn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Mn.length&&(n=Mn[0],n.blockedOn===null);)Tm(n),n.blockedOn===null&&Mn.shift()}var Ws=An.ReactCurrentBatchConfig,tl=!0;function Gh(e,t,n,r){var a=ze,l=Ws.transition;Ws.transition=null;try{ze=1,dc(e,t,n,r)}finally{ze=a,Ws.transition=l}}function Wh(e,t,n,r){var a=ze,l=Ws.transition;Ws.transition=null;try{ze=4,dc(e,t,n,r)}finally{ze=a,Ws.transition=l}}function dc(e,t,n,r){if(tl){var a=ii(e,t,n,r);if(a===null)po(e,t,r,nl,n),mu(e,r);else if(Bh(a,e,t,n,r))r.stopPropagation();else if(mu(e,r),t&4&&-1<_h.indexOf(e)){for(;a!==null;){var l=oa(a);if(l!==null&&km(l),l=ii(e,t,n,r),l===null&&po(e,t,r,nl,n),l===a)break;a=l}a!==null&&r.stopPropagation()}else po(e,t,r,null,n)}}var nl=null;function ii(e,t,n,r){if(nl=null,e=oc(r),e=ds(e),e!==null)if(t=ks(e),t===null)e=null;else if(n=t.tag,n===13){if(e=gm(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return nl=e,null}function Rm(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Lh()){case ic:return 1;case wm:return 4;case Xa:case Ah:return 16;case jm:return 536870912;default:return 16}default:return 16}}var _n=null,mc=null,_a=null;function Lm(){if(_a)return _a;var e,t=mc,n=t.length,r,a="value"in _n?_n.value:_n.textContent,l=a.length;for(e=0;e<n&&t[e]===a[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===a[l-r];r++);return _a=a.slice(e,1<r?1-r:void 0)}function Ba(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ba(){return!0}function pu(){return!1}function Ft(e){function t(n,r,a,l,o){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(n=e[c],this[c]=n?n(l):l[c]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?ba:pu,this.isPropagationStopped=pu,this}return Ze(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ba)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ba)},persist:function(){},isPersistent:ba}),t}var rr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fc=Ft(rr),la=Ze({},rr,{view:0,detail:0}),Hh=Ft(la),ro,ao,hr,Tl=Ze({},la,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hr&&(hr&&e.type==="mousemove"?(ro=e.screenX-hr.screenX,ao=e.screenY-hr.screenY):ao=ro=0,hr=e),ro)},movementY:function(e){return"movementY"in e?e.movementY:ao}}),hu=Ft(Tl),Kh=Ze({},Tl,{dataTransfer:0}),Vh=Ft(Kh),qh=Ze({},la,{relatedTarget:0}),lo=Ft(qh),Jh=Ze({},rr,{animationName:0,elapsedTime:0,pseudoElement:0}),Qh=Ft(Jh),Yh=Ze({},rr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Zh=Ft(Yh),Xh=Ze({},rr,{data:0}),xu=Ft(Xh),e0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},t0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},n0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function s0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=n0[e])?!!t[e]:!1}function pc(){return s0}var r0=Ze({},la,{key:function(e){if(e.key){var t=e0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ba(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?t0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pc,charCode:function(e){return e.type==="keypress"?Ba(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ba(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),a0=Ft(r0),l0=Ze({},Tl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gu=Ft(l0),o0=Ze({},la,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pc}),i0=Ft(o0),c0=Ze({},rr,{propertyName:0,elapsedTime:0,pseudoElement:0}),u0=Ft(c0),d0=Ze({},Tl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),m0=Ft(d0),f0=[9,13,27,32],hc=En&&"CompositionEvent"in window,Lr=null;En&&"documentMode"in document&&(Lr=document.documentMode);var p0=En&&"TextEvent"in window&&!Lr,Am=En&&(!hc||Lr&&8<Lr&&11>=Lr),yu=" ",vu=!1;function $m(e,t){switch(e){case"keyup":return f0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Im(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ls=!1;function h0(e,t){switch(e){case"compositionend":return Im(t);case"keypress":return t.which!==32?null:(vu=!0,yu);case"textInput":return e=t.data,e===yu&&vu?null:e;default:return null}}function x0(e,t){if(Ls)return e==="compositionend"||!hc&&$m(e,t)?(e=Lm(),_a=mc=_n=null,Ls=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Am&&t.locale!=="ko"?null:t.data;default:return null}}var g0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!g0[e.type]:t==="textarea"}function Um(e,t,n,r){mm(r),t=sl(t,"onChange"),0<t.length&&(n=new fc("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ar=null,Wr=null;function y0(e){Km(e,0)}function Rl(e){var t=Is(e);if(am(t))return e}function v0(e,t){if(e==="change")return t}var Dm=!1;if(En){var oo;if(En){var io="oninput"in document;if(!io){var wu=document.createElement("div");wu.setAttribute("oninput","return;"),io=typeof wu.oninput=="function"}oo=io}else oo=!1;Dm=oo&&(!document.documentMode||9<document.documentMode)}function ju(){Ar&&(Ar.detachEvent("onpropertychange",Mm),Wr=Ar=null)}function Mm(e){if(e.propertyName==="value"&&Rl(Wr)){var t=[];Um(t,Wr,e,oc(e)),xm(y0,t)}}function b0(e,t,n){e==="focusin"?(ju(),Ar=t,Wr=n,Ar.attachEvent("onpropertychange",Mm)):e==="focusout"&&ju()}function w0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Rl(Wr)}function j0(e,t){if(e==="click")return Rl(t)}function N0(e,t){if(e==="input"||e==="change")return Rl(t)}function S0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var an=typeof Object.is=="function"?Object.is:S0;function Hr(e,t){if(an(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Wo.call(t,a)||!an(e[a],t[a]))return!1}return!0}function Nu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Su(e,t){var n=Nu(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Nu(n)}}function Om(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Om(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Fm(){for(var e=window,t=Qa();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Qa(e.document)}return t}function xc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function k0(e){var t=Fm(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Om(n.ownerDocument.documentElement,n)){if(r!==null&&xc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,l=Math.min(r.start,a);r=r.end===void 0?l:Math.min(r.end,a),!e.extend&&l>r&&(a=r,r=l,l=a),a=Su(n,l);var o=Su(n,r);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var C0=En&&"documentMode"in document&&11>=document.documentMode,As=null,ci=null,$r=null,ui=!1;function ku(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ui||As==null||As!==Qa(r)||(r=As,"selectionStart"in r&&xc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),$r&&Hr($r,r)||($r=r,r=sl(ci,"onSelect"),0<r.length&&(t=new fc("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=As)))}function wa(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var $s={animationend:wa("Animation","AnimationEnd"),animationiteration:wa("Animation","AnimationIteration"),animationstart:wa("Animation","AnimationStart"),transitionend:wa("Transition","TransitionEnd")},co={},_m={};En&&(_m=document.createElement("div").style,"AnimationEvent"in window||(delete $s.animationend.animation,delete $s.animationiteration.animation,delete $s.animationstart.animation),"TransitionEvent"in window||delete $s.transitionend.transition);function Ll(e){if(co[e])return co[e];if(!$s[e])return e;var t=$s[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in _m)return co[e]=t[n];return e}var Bm=Ll("animationend"),zm=Ll("animationiteration"),Gm=Ll("animationstart"),Wm=Ll("transitionend"),Hm=new Map,Cu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ts(e,t){Hm.set(e,t),Ss(t,[e])}for(var uo=0;uo<Cu.length;uo++){var mo=Cu[uo],E0=mo.toLowerCase(),P0=mo[0].toUpperCase()+mo.slice(1);ts(E0,"on"+P0)}ts(Bm,"onAnimationEnd");ts(zm,"onAnimationIteration");ts(Gm,"onAnimationStart");ts("dblclick","onDoubleClick");ts("focusin","onFocus");ts("focusout","onBlur");ts(Wm,"onTransitionEnd");qs("onMouseEnter",["mouseout","mouseover"]);qs("onMouseLeave",["mouseout","mouseover"]);qs("onPointerEnter",["pointerout","pointerover"]);qs("onPointerLeave",["pointerout","pointerover"]);Ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ss("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),T0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cr));function Eu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Eh(r,t,void 0,e),e.currentTarget=null}function Km(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==l&&a.isPropagationStopped())break e;Eu(a,c,d),l=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==l&&a.isPropagationStopped())break e;Eu(a,c,d),l=u}}}if(Za)throw e=ai,Za=!1,ai=null,e}function Ve(e,t){var n=t[hi];n===void 0&&(n=t[hi]=new Set);var r=e+"__bubble";n.has(r)||(Vm(t,e,2,!1),n.add(r))}function fo(e,t,n){var r=0;t&&(r|=4),Vm(n,e,r,t)}var ja="_reactListening"+Math.random().toString(36).slice(2);function Kr(e){if(!e[ja]){e[ja]=!0,em.forEach(function(n){n!=="selectionchange"&&(T0.has(n)||fo(n,!1,e),fo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ja]||(t[ja]=!0,fo("selectionchange",!1,t))}}function Vm(e,t,n,r){switch(Rm(t)){case 1:var a=Gh;break;case 4:a=Wh;break;default:a=dc}n=a.bind(null,t,n,e),a=void 0,!ri||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function po(e,t,n,r,a){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===a||c.nodeType===8&&c.parentNode===a)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===a||u.nodeType===8&&u.parentNode===a))return;o=o.return}for(;c!==null;){if(o=ds(c),o===null)return;if(u=o.tag,u===5||u===6){r=l=o;continue e}c=c.parentNode}}r=r.return}xm(function(){var d=l,p=oc(n),f=[];e:{var g=Hm.get(e);if(g!==void 0){var v=fc,b=e;switch(e){case"keypress":if(Ba(n)===0)break e;case"keydown":case"keyup":v=a0;break;case"focusin":b="focus",v=lo;break;case"focusout":b="blur",v=lo;break;case"beforeblur":case"afterblur":v=lo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=hu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=Vh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=i0;break;case Bm:case zm:case Gm:v=Qh;break;case Wm:v=u0;break;case"scroll":v=Hh;break;case"wheel":v=m0;break;case"copy":case"cut":case"paste":v=Zh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=gu}var y=(t&4)!==0,S=!y&&e==="scroll",x=y?g!==null?g+"Capture":null:g;y=[];for(var h=d,m;h!==null;){m=h;var k=m.stateNode;if(m.tag===5&&k!==null&&(m=k,x!==null&&(k=_r(h,x),k!=null&&y.push(Vr(h,k,m)))),S)break;h=h.return}0<y.length&&(g=new v(g,b,null,n,p),f.push({event:g,listeners:y}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",g&&n!==ni&&(b=n.relatedTarget||n.fromElement)&&(ds(b)||b[Pn]))break e;if((v||g)&&(g=p.window===p?p:(g=p.ownerDocument)?g.defaultView||g.parentWindow:window,v?(b=n.relatedTarget||n.toElement,v=d,b=b?ds(b):null,b!==null&&(S=ks(b),b!==S||b.tag!==5&&b.tag!==6)&&(b=null)):(v=null,b=d),v!==b)){if(y=hu,k="onMouseLeave",x="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(y=gu,k="onPointerLeave",x="onPointerEnter",h="pointer"),S=v==null?g:Is(v),m=b==null?g:Is(b),g=new y(k,h+"leave",v,n,p),g.target=S,g.relatedTarget=m,k=null,ds(p)===d&&(y=new y(x,h+"enter",b,n,p),y.target=m,y.relatedTarget=S,k=y),S=k,v&&b)t:{for(y=v,x=b,h=0,m=y;m;m=Cs(m))h++;for(m=0,k=x;k;k=Cs(k))m++;for(;0<h-m;)y=Cs(y),h--;for(;0<m-h;)x=Cs(x),m--;for(;h--;){if(y===x||x!==null&&y===x.alternate)break t;y=Cs(y),x=Cs(x)}y=null}else y=null;v!==null&&Pu(f,g,v,y,!1),b!==null&&S!==null&&Pu(f,S,b,y,!0)}}e:{if(g=d?Is(d):window,v=g.nodeName&&g.nodeName.toLowerCase(),v==="select"||v==="input"&&g.type==="file")var C=v0;else if(bu(g))if(Dm)C=N0;else{C=w0;var P=b0}else(v=g.nodeName)&&v.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(C=j0);if(C&&(C=C(e,d))){Um(f,C,n,p);break e}P&&P(e,g,d),e==="focusout"&&(P=g._wrapperState)&&P.controlled&&g.type==="number"&&Yo(g,"number",g.value)}switch(P=d?Is(d):window,e){case"focusin":(bu(P)||P.contentEditable==="true")&&(As=P,ci=d,$r=null);break;case"focusout":$r=ci=As=null;break;case"mousedown":ui=!0;break;case"contextmenu":case"mouseup":case"dragend":ui=!1,ku(f,n,p);break;case"selectionchange":if(C0)break;case"keydown":case"keyup":ku(f,n,p)}var I;if(hc)e:{switch(e){case"compositionstart":var $="onCompositionStart";break e;case"compositionend":$="onCompositionEnd";break e;case"compositionupdate":$="onCompositionUpdate";break e}$=void 0}else Ls?$m(e,n)&&($="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&($="onCompositionStart");$&&(Am&&n.locale!=="ko"&&(Ls||$!=="onCompositionStart"?$==="onCompositionEnd"&&Ls&&(I=Lm()):(_n=p,mc="value"in _n?_n.value:_n.textContent,Ls=!0)),P=sl(d,$),0<P.length&&($=new xu($,e,null,n,p),f.push({event:$,listeners:P}),I?$.data=I:(I=Im(n),I!==null&&($.data=I)))),(I=p0?h0(e,n):x0(e,n))&&(d=sl(d,"onBeforeInput"),0<d.length&&(p=new xu("onBeforeInput","beforeinput",null,n,p),f.push({event:p,listeners:d}),p.data=I))}Km(f,t)})}function Vr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function sl(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=_r(e,n),l!=null&&r.unshift(Vr(e,l,a)),l=_r(e,t),l!=null&&r.push(Vr(e,l,a))),e=e.return}return r}function Cs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Pu(e,t,n,r,a){for(var l=t._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,a?(u=_r(n,l),u!=null&&o.unshift(Vr(n,u,c))):a||(u=_r(n,l),u!=null&&o.push(Vr(n,u,c)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var R0=/\r\n?/g,L0=/\u0000|\uFFFD/g;function Tu(e){return(typeof e=="string"?e:""+e).replace(R0,`
`).replace(L0,"")}function Na(e,t,n){if(t=Tu(t),Tu(e)!==t&&n)throw Error(se(425))}function rl(){}var di=null,mi=null;function fi(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var pi=typeof setTimeout=="function"?setTimeout:void 0,A0=typeof clearTimeout=="function"?clearTimeout:void 0,Ru=typeof Promise=="function"?Promise:void 0,$0=typeof queueMicrotask=="function"?queueMicrotask:typeof Ru<"u"?function(e){return Ru.resolve(null).then(e).catch(I0)}:pi;function I0(e){setTimeout(function(){throw e})}function ho(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),Gr(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);Gr(t)}function Kn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Lu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ar=Math.random().toString(36).slice(2),dn="__reactFiber$"+ar,qr="__reactProps$"+ar,Pn="__reactContainer$"+ar,hi="__reactEvents$"+ar,U0="__reactListeners$"+ar,D0="__reactHandles$"+ar;function ds(e){var t=e[dn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Pn]||n[dn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Lu(e);e!==null;){if(n=e[dn])return n;e=Lu(e)}return t}e=n,n=e.parentNode}return null}function oa(e){return e=e[dn]||e[Pn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Is(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(se(33))}function Al(e){return e[qr]||null}var xi=[],Us=-1;function ns(e){return{current:e}}function qe(e){0>Us||(e.current=xi[Us],xi[Us]=null,Us--)}function He(e,t){Us++,xi[Us]=e.current,e.current=t}var Xn={},jt=ns(Xn),Rt=ns(!1),vs=Xn;function Js(e,t){var n=e.type.contextTypes;if(!n)return Xn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in n)a[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Lt(e){return e=e.childContextTypes,e!=null}function al(){qe(Rt),qe(jt)}function Au(e,t,n){if(jt.current!==Xn)throw Error(se(168));He(jt,t),He(Rt,n)}function qm(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(se(108,bh(e)||"Unknown",a));return Ze({},n,r)}function ll(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Xn,vs=jt.current,He(jt,e),He(Rt,Rt.current),!0}function $u(e,t,n){var r=e.stateNode;if(!r)throw Error(se(169));n?(e=qm(e,t,vs),r.__reactInternalMemoizedMergedChildContext=e,qe(Rt),qe(jt),He(jt,e)):qe(Rt),He(Rt,n)}var jn=null,$l=!1,xo=!1;function Jm(e){jn===null?jn=[e]:jn.push(e)}function M0(e){$l=!0,Jm(e)}function ss(){if(!xo&&jn!==null){xo=!0;var e=0,t=ze;try{var n=jn;for(ze=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}jn=null,$l=!1}catch(a){throw jn!==null&&(jn=jn.slice(e+1)),bm(ic,ss),a}finally{ze=t,xo=!1}}return null}var Ds=[],Ms=0,ol=null,il=0,Bt=[],zt=0,bs=null,Nn=1,Sn="";function is(e,t){Ds[Ms++]=il,Ds[Ms++]=ol,ol=e,il=t}function Qm(e,t,n){Bt[zt++]=Nn,Bt[zt++]=Sn,Bt[zt++]=bs,bs=e;var r=Nn;e=Sn;var a=32-sn(r)-1;r&=~(1<<a),n+=1;var l=32-sn(t)+a;if(30<l){var o=a-a%5;l=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Nn=1<<32-sn(t)+a|n<<a|r,Sn=l+e}else Nn=1<<l|n<<a|r,Sn=e}function gc(e){e.return!==null&&(is(e,1),Qm(e,1,0))}function yc(e){for(;e===ol;)ol=Ds[--Ms],Ds[Ms]=null,il=Ds[--Ms],Ds[Ms]=null;for(;e===bs;)bs=Bt[--zt],Bt[zt]=null,Sn=Bt[--zt],Bt[zt]=null,Nn=Bt[--zt],Bt[zt]=null}var Dt=null,Ut=null,Je=!1,nn=null;function Ym(e,t){var n=Gt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Iu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Dt=e,Ut=Kn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Dt=e,Ut=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=bs!==null?{id:Nn,overflow:Sn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Gt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Dt=e,Ut=null,!0):!1;default:return!1}}function gi(e){return(e.mode&1)!==0&&(e.flags&128)===0}function yi(e){if(Je){var t=Ut;if(t){var n=t;if(!Iu(e,t)){if(gi(e))throw Error(se(418));t=Kn(n.nextSibling);var r=Dt;t&&Iu(e,t)?Ym(r,n):(e.flags=e.flags&-4097|2,Je=!1,Dt=e)}}else{if(gi(e))throw Error(se(418));e.flags=e.flags&-4097|2,Je=!1,Dt=e}}}function Uu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Dt=e}function Sa(e){if(e!==Dt)return!1;if(!Je)return Uu(e),Je=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!fi(e.type,e.memoizedProps)),t&&(t=Ut)){if(gi(e))throw Zm(),Error(se(418));for(;t;)Ym(e,t),t=Kn(t.nextSibling)}if(Uu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(se(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ut=Kn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ut=null}}else Ut=Dt?Kn(e.stateNode.nextSibling):null;return!0}function Zm(){for(var e=Ut;e;)e=Kn(e.nextSibling)}function Qs(){Ut=Dt=null,Je=!1}function vc(e){nn===null?nn=[e]:nn.push(e)}var O0=An.ReactCurrentBatchConfig;function xr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(se(309));var r=n.stateNode}if(!r)throw Error(se(147,e));var a=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(o){var c=a.refs;o===null?delete c[l]:c[l]=o},t._stringRef=l,t)}if(typeof e!="string")throw Error(se(284));if(!n._owner)throw Error(se(290,e))}return e}function ka(e,t){throw e=Object.prototype.toString.call(t),Error(se(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Du(e){var t=e._init;return t(e._payload)}function Xm(e){function t(x,h){if(e){var m=x.deletions;m===null?(x.deletions=[h],x.flags|=16):m.push(h)}}function n(x,h){if(!e)return null;for(;h!==null;)t(x,h),h=h.sibling;return null}function r(x,h){for(x=new Map;h!==null;)h.key!==null?x.set(h.key,h):x.set(h.index,h),h=h.sibling;return x}function a(x,h){return x=Qn(x,h),x.index=0,x.sibling=null,x}function l(x,h,m){return x.index=m,e?(m=x.alternate,m!==null?(m=m.index,m<h?(x.flags|=2,h):m):(x.flags|=2,h)):(x.flags|=1048576,h)}function o(x){return e&&x.alternate===null&&(x.flags|=2),x}function c(x,h,m,k){return h===null||h.tag!==6?(h=No(m,x.mode,k),h.return=x,h):(h=a(h,m),h.return=x,h)}function u(x,h,m,k){var C=m.type;return C===Rs?p(x,h,m.props.children,k,m.key):h!==null&&(h.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Un&&Du(C)===h.type)?(k=a(h,m.props),k.ref=xr(x,h,m),k.return=x,k):(k=qa(m.type,m.key,m.props,null,x.mode,k),k.ref=xr(x,h,m),k.return=x,k)}function d(x,h,m,k){return h===null||h.tag!==4||h.stateNode.containerInfo!==m.containerInfo||h.stateNode.implementation!==m.implementation?(h=So(m,x.mode,k),h.return=x,h):(h=a(h,m.children||[]),h.return=x,h)}function p(x,h,m,k,C){return h===null||h.tag!==7?(h=gs(m,x.mode,k,C),h.return=x,h):(h=a(h,m),h.return=x,h)}function f(x,h,m){if(typeof h=="string"&&h!==""||typeof h=="number")return h=No(""+h,x.mode,m),h.return=x,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case pa:return m=qa(h.type,h.key,h.props,null,x.mode,m),m.ref=xr(x,null,h),m.return=x,m;case Ts:return h=So(h,x.mode,m),h.return=x,h;case Un:var k=h._init;return f(x,k(h._payload),m)}if(Sr(h)||dr(h))return h=gs(h,x.mode,m,null),h.return=x,h;ka(x,h)}return null}function g(x,h,m,k){var C=h!==null?h.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return C!==null?null:c(x,h,""+m,k);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case pa:return m.key===C?u(x,h,m,k):null;case Ts:return m.key===C?d(x,h,m,k):null;case Un:return C=m._init,g(x,h,C(m._payload),k)}if(Sr(m)||dr(m))return C!==null?null:p(x,h,m,k,null);ka(x,m)}return null}function v(x,h,m,k,C){if(typeof k=="string"&&k!==""||typeof k=="number")return x=x.get(m)||null,c(h,x,""+k,C);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case pa:return x=x.get(k.key===null?m:k.key)||null,u(h,x,k,C);case Ts:return x=x.get(k.key===null?m:k.key)||null,d(h,x,k,C);case Un:var P=k._init;return v(x,h,m,P(k._payload),C)}if(Sr(k)||dr(k))return x=x.get(m)||null,p(h,x,k,C,null);ka(h,k)}return null}function b(x,h,m,k){for(var C=null,P=null,I=h,$=h=0,K=null;I!==null&&$<m.length;$++){I.index>$?(K=I,I=null):K=I.sibling;var F=g(x,I,m[$],k);if(F===null){I===null&&(I=K);break}e&&I&&F.alternate===null&&t(x,I),h=l(F,h,$),P===null?C=F:P.sibling=F,P=F,I=K}if($===m.length)return n(x,I),Je&&is(x,$),C;if(I===null){for(;$<m.length;$++)I=f(x,m[$],k),I!==null&&(h=l(I,h,$),P===null?C=I:P.sibling=I,P=I);return Je&&is(x,$),C}for(I=r(x,I);$<m.length;$++)K=v(I,x,$,m[$],k),K!==null&&(e&&K.alternate!==null&&I.delete(K.key===null?$:K.key),h=l(K,h,$),P===null?C=K:P.sibling=K,P=K);return e&&I.forEach(function(q){return t(x,q)}),Je&&is(x,$),C}function y(x,h,m,k){var C=dr(m);if(typeof C!="function")throw Error(se(150));if(m=C.call(m),m==null)throw Error(se(151));for(var P=C=null,I=h,$=h=0,K=null,F=m.next();I!==null&&!F.done;$++,F=m.next()){I.index>$?(K=I,I=null):K=I.sibling;var q=g(x,I,F.value,k);if(q===null){I===null&&(I=K);break}e&&I&&q.alternate===null&&t(x,I),h=l(q,h,$),P===null?C=q:P.sibling=q,P=q,I=K}if(F.done)return n(x,I),Je&&is(x,$),C;if(I===null){for(;!F.done;$++,F=m.next())F=f(x,F.value,k),F!==null&&(h=l(F,h,$),P===null?C=F:P.sibling=F,P=F);return Je&&is(x,$),C}for(I=r(x,I);!F.done;$++,F=m.next())F=v(I,x,$,F.value,k),F!==null&&(e&&F.alternate!==null&&I.delete(F.key===null?$:F.key),h=l(F,h,$),P===null?C=F:P.sibling=F,P=F);return e&&I.forEach(function(G){return t(x,G)}),Je&&is(x,$),C}function S(x,h,m,k){if(typeof m=="object"&&m!==null&&m.type===Rs&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case pa:e:{for(var C=m.key,P=h;P!==null;){if(P.key===C){if(C=m.type,C===Rs){if(P.tag===7){n(x,P.sibling),h=a(P,m.props.children),h.return=x,x=h;break e}}else if(P.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Un&&Du(C)===P.type){n(x,P.sibling),h=a(P,m.props),h.ref=xr(x,P,m),h.return=x,x=h;break e}n(x,P);break}else t(x,P);P=P.sibling}m.type===Rs?(h=gs(m.props.children,x.mode,k,m.key),h.return=x,x=h):(k=qa(m.type,m.key,m.props,null,x.mode,k),k.ref=xr(x,h,m),k.return=x,x=k)}return o(x);case Ts:e:{for(P=m.key;h!==null;){if(h.key===P)if(h.tag===4&&h.stateNode.containerInfo===m.containerInfo&&h.stateNode.implementation===m.implementation){n(x,h.sibling),h=a(h,m.children||[]),h.return=x,x=h;break e}else{n(x,h);break}else t(x,h);h=h.sibling}h=So(m,x.mode,k),h.return=x,x=h}return o(x);case Un:return P=m._init,S(x,h,P(m._payload),k)}if(Sr(m))return b(x,h,m,k);if(dr(m))return y(x,h,m,k);ka(x,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,h!==null&&h.tag===6?(n(x,h.sibling),h=a(h,m),h.return=x,x=h):(n(x,h),h=No(m,x.mode,k),h.return=x,x=h),o(x)):n(x,h)}return S}var Ys=Xm(!0),ef=Xm(!1),cl=ns(null),ul=null,Os=null,bc=null;function wc(){bc=Os=ul=null}function jc(e){var t=cl.current;qe(cl),e._currentValue=t}function vi(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Hs(e,t){ul=e,bc=Os=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Tt=!0),e.firstContext=null)}function Ht(e){var t=e._currentValue;if(bc!==e)if(e={context:e,memoizedValue:t,next:null},Os===null){if(ul===null)throw Error(se(308));Os=e,ul.dependencies={lanes:0,firstContext:e}}else Os=Os.next=e;return t}var ms=null;function Nc(e){ms===null?ms=[e]:ms.push(e)}function tf(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,Nc(t)):(n.next=a.next,a.next=n),t.interleaved=n,Tn(e,r)}function Tn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Dn=!1;function Sc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function kn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Re&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Tn(e,n)}return a=r.interleaved,a===null?(t.next=t,Nc(r)):(t.next=a.next,a.next=t),r.interleaved=t,Tn(e,n)}function za(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,cc(e,n)}}function Mu(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?a=l=o:l=l.next=o,n=n.next}while(n!==null);l===null?a=l=t:l=l.next=t}else a=l=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function dl(e,t,n,r){var a=e.updateQueue;Dn=!1;var l=a.firstBaseUpdate,o=a.lastBaseUpdate,c=a.shared.pending;if(c!==null){a.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?l=d:o.next=d,o=u;var p=e.alternate;p!==null&&(p=p.updateQueue,c=p.lastBaseUpdate,c!==o&&(c===null?p.firstBaseUpdate=d:c.next=d,p.lastBaseUpdate=u))}if(l!==null){var f=a.baseState;o=0,p=d=u=null,c=l;do{var g=c.lane,v=c.eventTime;if((r&g)===g){p!==null&&(p=p.next={eventTime:v,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var b=e,y=c;switch(g=t,v=n,y.tag){case 1:if(b=y.payload,typeof b=="function"){f=b.call(v,f,g);break e}f=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=y.payload,g=typeof b=="function"?b.call(v,f,g):b,g==null)break e;f=Ze({},f,g);break e;case 2:Dn=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,g=a.effects,g===null?a.effects=[c]:g.push(c))}else v={eventTime:v,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},p===null?(d=p=v,u=f):p=p.next=v,o|=g;if(c=c.next,c===null){if(c=a.shared.pending,c===null)break;g=c,c=g.next,g.next=null,a.lastBaseUpdate=g,a.shared.pending=null}}while(!0);if(p===null&&(u=f),a.baseState=u,a.firstBaseUpdate=d,a.lastBaseUpdate=p,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else l===null&&(a.shared.lanes=0);js|=o,e.lanes=o,e.memoizedState=f}}function Ou(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(se(191,a));a.call(r)}}}var ia={},fn=ns(ia),Jr=ns(ia),Qr=ns(ia);function fs(e){if(e===ia)throw Error(se(174));return e}function kc(e,t){switch(He(Qr,t),He(Jr,e),He(fn,ia),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Xo(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Xo(t,e)}qe(fn),He(fn,t)}function Zs(){qe(fn),qe(Jr),qe(Qr)}function sf(e){fs(Qr.current);var t=fs(fn.current),n=Xo(t,e.type);t!==n&&(He(Jr,e),He(fn,n))}function Cc(e){Jr.current===e&&(qe(fn),qe(Jr))}var Qe=ns(0);function ml(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var go=[];function Ec(){for(var e=0;e<go.length;e++)go[e]._workInProgressVersionPrimary=null;go.length=0}var Ga=An.ReactCurrentDispatcher,yo=An.ReactCurrentBatchConfig,ws=0,Ye=null,ot=null,mt=null,fl=!1,Ir=!1,Yr=0,F0=0;function yt(){throw Error(se(321))}function Pc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!an(e[n],t[n]))return!1;return!0}function Tc(e,t,n,r,a,l){if(ws=l,Ye=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ga.current=e===null||e.memoizedState===null?G0:W0,e=n(r,a),Ir){l=0;do{if(Ir=!1,Yr=0,25<=l)throw Error(se(301));l+=1,mt=ot=null,t.updateQueue=null,Ga.current=H0,e=n(r,a)}while(Ir)}if(Ga.current=pl,t=ot!==null&&ot.next!==null,ws=0,mt=ot=Ye=null,fl=!1,t)throw Error(se(300));return e}function Rc(){var e=Yr!==0;return Yr=0,e}function un(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?Ye.memoizedState=mt=e:mt=mt.next=e,mt}function Kt(){if(ot===null){var e=Ye.alternate;e=e!==null?e.memoizedState:null}else e=ot.next;var t=mt===null?Ye.memoizedState:mt.next;if(t!==null)mt=t,ot=e;else{if(e===null)throw Error(se(310));ot=e,e={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},mt===null?Ye.memoizedState=mt=e:mt=mt.next=e}return mt}function Zr(e,t){return typeof t=="function"?t(e):t}function vo(e){var t=Kt(),n=t.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=e;var r=ot,a=r.baseQueue,l=n.pending;if(l!==null){if(a!==null){var o=a.next;a.next=l.next,l.next=o}r.baseQueue=a=l,n.pending=null}if(a!==null){l=a.next,r=r.baseState;var c=o=null,u=null,d=l;do{var p=d.lane;if((ws&p)===p)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var f={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=f,o=r):u=u.next=f,Ye.lanes|=p,js|=p}d=d.next}while(d!==null&&d!==l);u===null?o=r:u.next=c,an(r,t.memoizedState)||(Tt=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do l=a.lane,Ye.lanes|=l,js|=l,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function bo(e){var t=Kt(),n=t.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,l=t.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do l=e(l,o.action),o=o.next;while(o!==a);an(l,t.memoizedState)||(Tt=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function rf(){}function af(e,t){var n=Ye,r=Kt(),a=t(),l=!an(r.memoizedState,a);if(l&&(r.memoizedState=a,Tt=!0),r=r.queue,Lc(cf.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||mt!==null&&mt.memoizedState.tag&1){if(n.flags|=2048,Xr(9,of.bind(null,n,r,a,t),void 0,null),ft===null)throw Error(se(349));ws&30||lf(n,t,a)}return a}function lf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ye.updateQueue,t===null?(t={lastEffect:null,stores:null},Ye.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function of(e,t,n,r){t.value=n,t.getSnapshot=r,uf(t)&&df(e)}function cf(e,t,n){return n(function(){uf(t)&&df(e)})}function uf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!an(e,n)}catch{return!0}}function df(e){var t=Tn(e,1);t!==null&&rn(t,e,1,-1)}function Fu(e){var t=un();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zr,lastRenderedState:e},t.queue=e,e=e.dispatch=z0.bind(null,Ye,e),[t.memoizedState,e]}function Xr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ye.updateQueue,t===null?(t={lastEffect:null,stores:null},Ye.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function mf(){return Kt().memoizedState}function Wa(e,t,n,r){var a=un();Ye.flags|=e,a.memoizedState=Xr(1|t,n,void 0,r===void 0?null:r)}function Il(e,t,n,r){var a=Kt();r=r===void 0?null:r;var l=void 0;if(ot!==null){var o=ot.memoizedState;if(l=o.destroy,r!==null&&Pc(r,o.deps)){a.memoizedState=Xr(t,n,l,r);return}}Ye.flags|=e,a.memoizedState=Xr(1|t,n,l,r)}function _u(e,t){return Wa(8390656,8,e,t)}function Lc(e,t){return Il(2048,8,e,t)}function ff(e,t){return Il(4,2,e,t)}function pf(e,t){return Il(4,4,e,t)}function hf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function xf(e,t,n){return n=n!=null?n.concat([e]):null,Il(4,4,hf.bind(null,t,e),n)}function Ac(){}function gf(e,t){var n=Kt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Pc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function yf(e,t){var n=Kt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Pc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function vf(e,t,n){return ws&21?(an(n,t)||(n=Nm(),Ye.lanes|=n,js|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Tt=!0),e.memoizedState=n)}function _0(e,t){var n=ze;ze=n!==0&&4>n?n:4,e(!0);var r=yo.transition;yo.transition={};try{e(!1),t()}finally{ze=n,yo.transition=r}}function bf(){return Kt().memoizedState}function B0(e,t,n){var r=Jn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},wf(e))jf(t,n);else if(n=tf(e,t,n,r),n!==null){var a=St();rn(n,e,r,a),Nf(n,t,r)}}function z0(e,t,n){var r=Jn(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(wf(e))jf(t,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var o=t.lastRenderedState,c=l(o,n);if(a.hasEagerState=!0,a.eagerState=c,an(c,o)){var u=t.interleaved;u===null?(a.next=a,Nc(t)):(a.next=u.next,u.next=a),t.interleaved=a;return}}catch{}finally{}n=tf(e,t,a,r),n!==null&&(a=St(),rn(n,e,r,a),Nf(n,t,r))}}function wf(e){var t=e.alternate;return e===Ye||t!==null&&t===Ye}function jf(e,t){Ir=fl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Nf(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,cc(e,n)}}var pl={readContext:Ht,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},G0={readContext:Ht,useCallback:function(e,t){return un().memoizedState=[e,t===void 0?null:t],e},useContext:Ht,useEffect:_u,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Wa(4194308,4,hf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Wa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Wa(4,2,e,t)},useMemo:function(e,t){var n=un();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=un();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=B0.bind(null,Ye,e),[r.memoizedState,e]},useRef:function(e){var t=un();return e={current:e},t.memoizedState=e},useState:Fu,useDebugValue:Ac,useDeferredValue:function(e){return un().memoizedState=e},useTransition:function(){var e=Fu(!1),t=e[0];return e=_0.bind(null,e[1]),un().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ye,a=un();if(Je){if(n===void 0)throw Error(se(407));n=n()}else{if(n=t(),ft===null)throw Error(se(349));ws&30||lf(r,t,n)}a.memoizedState=n;var l={value:n,getSnapshot:t};return a.queue=l,_u(cf.bind(null,r,l,e),[e]),r.flags|=2048,Xr(9,of.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=un(),t=ft.identifierPrefix;if(Je){var n=Sn,r=Nn;n=(r&~(1<<32-sn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Yr++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=F0++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},W0={readContext:Ht,useCallback:gf,useContext:Ht,useEffect:Lc,useImperativeHandle:xf,useInsertionEffect:ff,useLayoutEffect:pf,useMemo:yf,useReducer:vo,useRef:mf,useState:function(){return vo(Zr)},useDebugValue:Ac,useDeferredValue:function(e){var t=Kt();return vf(t,ot.memoizedState,e)},useTransition:function(){var e=vo(Zr)[0],t=Kt().memoizedState;return[e,t]},useMutableSource:rf,useSyncExternalStore:af,useId:bf,unstable_isNewReconciler:!1},H0={readContext:Ht,useCallback:gf,useContext:Ht,useEffect:Lc,useImperativeHandle:xf,useInsertionEffect:ff,useLayoutEffect:pf,useMemo:yf,useReducer:bo,useRef:mf,useState:function(){return bo(Zr)},useDebugValue:Ac,useDeferredValue:function(e){var t=Kt();return ot===null?t.memoizedState=e:vf(t,ot.memoizedState,e)},useTransition:function(){var e=bo(Zr)[0],t=Kt().memoizedState;return[e,t]},useMutableSource:rf,useSyncExternalStore:af,useId:bf,unstable_isNewReconciler:!1};function en(e,t){if(e&&e.defaultProps){t=Ze({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function bi(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ze({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ul={isMounted:function(e){return(e=e._reactInternals)?ks(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=St(),a=Jn(e),l=kn(r,a);l.payload=t,n!=null&&(l.callback=n),t=Vn(e,l,a),t!==null&&(rn(t,e,a,r),za(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=St(),a=Jn(e),l=kn(r,a);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=Vn(e,l,a),t!==null&&(rn(t,e,a,r),za(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=St(),r=Jn(e),a=kn(n,r);a.tag=2,t!=null&&(a.callback=t),t=Vn(e,a,r),t!==null&&(rn(t,e,r,n),za(t,e,r))}};function Bu(e,t,n,r,a,l,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,o):t.prototype&&t.prototype.isPureReactComponent?!Hr(n,r)||!Hr(a,l):!0}function Sf(e,t,n){var r=!1,a=Xn,l=t.contextType;return typeof l=="object"&&l!==null?l=Ht(l):(a=Lt(t)?vs:jt.current,r=t.contextTypes,l=(r=r!=null)?Js(e,a):Xn),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ul,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),t}function zu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ul.enqueueReplaceState(t,t.state,null)}function wi(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Sc(e);var l=t.contextType;typeof l=="object"&&l!==null?a.context=Ht(l):(l=Lt(t)?vs:jt.current,a.context=Js(e,l)),a.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(bi(e,t,l,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Ul.enqueueReplaceState(a,a.state,null),dl(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Xs(e,t){try{var n="",r=t;do n+=vh(r),r=r.return;while(r);var a=n}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:a,digest:null}}function wo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ji(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var K0=typeof WeakMap=="function"?WeakMap:Map;function kf(e,t,n){n=kn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){xl||(xl=!0,Ai=r),ji(e,t)},n}function Cf(e,t,n){n=kn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){ji(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){ji(e,t),typeof r!="function"&&(qn===null?qn=new Set([this]):qn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Gu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new K0;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=lx.bind(null,e,t,n),t.then(e,e))}function Wu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Hu(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=kn(-1,1),t.tag=2,Vn(n,t,1))),n.lanes|=1),e)}var V0=An.ReactCurrentOwner,Tt=!1;function Nt(e,t,n,r){t.child=e===null?ef(t,null,n,r):Ys(t,e.child,n,r)}function Ku(e,t,n,r,a){n=n.render;var l=t.ref;return Hs(t,a),r=Tc(e,t,n,r,l,a),n=Rc(),e!==null&&!Tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Rn(e,t,a)):(Je&&n&&gc(t),t.flags|=1,Nt(e,t,r,a),t.child)}function Vu(e,t,n,r,a){if(e===null){var l=n.type;return typeof l=="function"&&!_c(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,Ef(e,t,l,r,a)):(e=qa(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&a)){var o=l.memoizedProps;if(n=n.compare,n=n!==null?n:Hr,n(o,r)&&e.ref===t.ref)return Rn(e,t,a)}return t.flags|=1,e=Qn(l,r),e.ref=t.ref,e.return=t,t.child=e}function Ef(e,t,n,r,a){if(e!==null){var l=e.memoizedProps;if(Hr(l,r)&&e.ref===t.ref)if(Tt=!1,t.pendingProps=r=l,(e.lanes&a)!==0)e.flags&131072&&(Tt=!0);else return t.lanes=e.lanes,Rn(e,t,a)}return Ni(e,t,n,r,a)}function Pf(e,t,n){var r=t.pendingProps,a=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(_s,It),It|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,He(_s,It),It|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,He(_s,It),It|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,He(_s,It),It|=r;return Nt(e,t,a,n),t.child}function Tf(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ni(e,t,n,r,a){var l=Lt(n)?vs:jt.current;return l=Js(t,l),Hs(t,a),n=Tc(e,t,n,r,l,a),r=Rc(),e!==null&&!Tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Rn(e,t,a)):(Je&&r&&gc(t),t.flags|=1,Nt(e,t,n,a),t.child)}function qu(e,t,n,r,a){if(Lt(n)){var l=!0;ll(t)}else l=!1;if(Hs(t,a),t.stateNode===null)Ha(e,t),Sf(t,n,r),wi(t,n,r,a),r=!0;else if(e===null){var o=t.stateNode,c=t.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Ht(d):(d=Lt(n)?vs:jt.current,d=Js(t,d));var p=n.getDerivedStateFromProps,f=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&zu(t,o,r,d),Dn=!1;var g=t.memoizedState;o.state=g,dl(t,r,o,a),u=t.memoizedState,c!==r||g!==u||Rt.current||Dn?(typeof p=="function"&&(bi(t,n,p,r),u=t.memoizedState),(c=Dn||Bu(t,n,c,r,g,u,d))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,nf(e,t),c=t.memoizedProps,d=t.type===t.elementType?c:en(t.type,c),o.props=d,f=t.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Ht(u):(u=Lt(n)?vs:jt.current,u=Js(t,u));var v=n.getDerivedStateFromProps;(p=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==f||g!==u)&&zu(t,o,r,u),Dn=!1,g=t.memoizedState,o.state=g,dl(t,r,o,a);var b=t.memoizedState;c!==f||g!==b||Rt.current||Dn?(typeof v=="function"&&(bi(t,n,v,r),b=t.memoizedState),(d=Dn||Bu(t,n,d,r,g,b,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=b),o.props=r,o.state=b,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return Si(e,t,n,r,l,a)}function Si(e,t,n,r,a,l){Tf(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return a&&$u(t,n,!1),Rn(e,t,l);r=t.stateNode,V0.current=t;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Ys(t,e.child,null,l),t.child=Ys(t,null,c,l)):Nt(e,t,c,l),t.memoizedState=r.state,a&&$u(t,n,!0),t.child}function Rf(e){var t=e.stateNode;t.pendingContext?Au(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Au(e,t.context,!1),kc(e,t.containerInfo)}function Ju(e,t,n,r,a){return Qs(),vc(a),t.flags|=256,Nt(e,t,n,r),t.child}var ki={dehydrated:null,treeContext:null,retryLane:0};function Ci(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lf(e,t,n){var r=t.pendingProps,a=Qe.current,l=!1,o=(t.flags&128)!==0,c;if((c=o)||(c=e!==null&&e.memoizedState===null?!1:(a&2)!==0),c?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),He(Qe,a&1),e===null)return yi(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,l?(r=t.mode,l=t.child,o={mode:"hidden",children:o},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=o):l=Ol(o,r,0,null),e=gs(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Ci(n),t.memoizedState=ki,e):$c(t,o));if(a=e.memoizedState,a!==null&&(c=a.dehydrated,c!==null))return q0(e,t,o,r,c,a,n);if(l){l=r.fallback,o=t.mode,a=e.child,c=a.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=Qn(a,u),r.subtreeFlags=a.subtreeFlags&14680064),c!==null?l=Qn(c,l):(l=gs(l,o,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,o=e.child.memoizedState,o=o===null?Ci(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=e.childLanes&~n,t.memoizedState=ki,r}return l=e.child,e=l.sibling,r=Qn(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function $c(e,t){return t=Ol({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ca(e,t,n,r){return r!==null&&vc(r),Ys(t,e.child,null,n),e=$c(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function q0(e,t,n,r,a,l,o){if(n)return t.flags&256?(t.flags&=-257,r=wo(Error(se(422))),Ca(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,a=t.mode,r=Ol({mode:"visible",children:r.children},a,0,null),l=gs(l,a,o,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&Ys(t,e.child,null,o),t.child.memoizedState=Ci(o),t.memoizedState=ki,l);if(!(t.mode&1))return Ca(e,t,o,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var c=r.dgst;return r=c,l=Error(se(419)),r=wo(l,r,void 0),Ca(e,t,o,r)}if(c=(o&e.childLanes)!==0,Tt||c){if(r=ft,r!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|o)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,Tn(e,a),rn(r,e,a,-1))}return Fc(),r=wo(Error(se(421))),Ca(e,t,o,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=ox.bind(null,e),a._reactRetry=t,null):(e=l.treeContext,Ut=Kn(a.nextSibling),Dt=t,Je=!0,nn=null,e!==null&&(Bt[zt++]=Nn,Bt[zt++]=Sn,Bt[zt++]=bs,Nn=e.id,Sn=e.overflow,bs=t),t=$c(t,r.children),t.flags|=4096,t)}function Qu(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),vi(e.return,t,n)}function jo(e,t,n,r,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=a)}function Af(e,t,n){var r=t.pendingProps,a=r.revealOrder,l=r.tail;if(Nt(e,t,r.children,n),r=Qe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Qu(e,n,t);else if(e.tag===19)Qu(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(He(Qe,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&ml(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),jo(t,!1,a,n,l);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&ml(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}jo(t,!0,n,null,l);break;case"together":jo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ha(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Rn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),js|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(se(153));if(t.child!==null){for(e=t.child,n=Qn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Qn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function J0(e,t,n){switch(t.tag){case 3:Rf(t),Qs();break;case 5:sf(t);break;case 1:Lt(t.type)&&ll(t);break;case 4:kc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;He(cl,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(He(Qe,Qe.current&1),t.flags|=128,null):n&t.child.childLanes?Lf(e,t,n):(He(Qe,Qe.current&1),e=Rn(e,t,n),e!==null?e.sibling:null);He(Qe,Qe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Af(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),He(Qe,Qe.current),r)break;return null;case 22:case 23:return t.lanes=0,Pf(e,t,n)}return Rn(e,t,n)}var $f,Ei,If,Uf;$f=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ei=function(){};If=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,fs(fn.current);var l=null;switch(n){case"input":a=Jo(e,a),r=Jo(e,r),l=[];break;case"select":a=Ze({},a,{value:void 0}),r=Ze({},r,{value:void 0}),l=[];break;case"textarea":a=Zo(e,a),r=Zo(e,r),l=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=rl)}ei(n,r);var o;n=null;for(d in a)if(!r.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var c=a[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Or.hasOwnProperty(d)?l||(l=[]):(l=l||[]).push(d,null));for(d in r){var u=r[d];if(c=a!=null?a[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(l||(l=[]),l.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(l=l||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(l=l||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Or.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Ve("scroll",e),l||c===u||(l=[])):(l=l||[]).push(d,u))}n&&(l=l||[]).push("style",n);var d=l;(t.updateQueue=d)&&(t.flags|=4)}};Uf=function(e,t,n,r){n!==r&&(t.flags|=4)};function gr(e,t){if(!Je)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function vt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Q0(e,t,n){var r=t.pendingProps;switch(yc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(t),null;case 1:return Lt(t.type)&&al(),vt(t),null;case 3:return r=t.stateNode,Zs(),qe(Rt),qe(jt),Ec(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Sa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,nn!==null&&(Ui(nn),nn=null))),Ei(e,t),vt(t),null;case 5:Cc(t);var a=fs(Qr.current);if(n=t.type,e!==null&&t.stateNode!=null)If(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(se(166));return vt(t),null}if(e=fs(fn.current),Sa(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[dn]=t,r[qr]=l,e=(t.mode&1)!==0,n){case"dialog":Ve("cancel",r),Ve("close",r);break;case"iframe":case"object":case"embed":Ve("load",r);break;case"video":case"audio":for(a=0;a<Cr.length;a++)Ve(Cr[a],r);break;case"source":Ve("error",r);break;case"img":case"image":case"link":Ve("error",r),Ve("load",r);break;case"details":Ve("toggle",r);break;case"input":au(r,l),Ve("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},Ve("invalid",r);break;case"textarea":ou(r,l),Ve("invalid",r)}ei(n,l),a=null;for(var o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="children"?typeof c=="string"?r.textContent!==c&&(l.suppressHydrationWarning!==!0&&Na(r.textContent,c,e),a=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(l.suppressHydrationWarning!==!0&&Na(r.textContent,c,e),a=["children",""+c]):Or.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Ve("scroll",r)}switch(n){case"input":ha(r),lu(r,l,!0);break;case"textarea":ha(r),iu(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=rl)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=im(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[dn]=t,e[qr]=r,$f(e,t,!1,!1),t.stateNode=e;e:{switch(o=ti(n,r),n){case"dialog":Ve("cancel",e),Ve("close",e),a=r;break;case"iframe":case"object":case"embed":Ve("load",e),a=r;break;case"video":case"audio":for(a=0;a<Cr.length;a++)Ve(Cr[a],e);a=r;break;case"source":Ve("error",e),a=r;break;case"img":case"image":case"link":Ve("error",e),Ve("load",e),a=r;break;case"details":Ve("toggle",e),a=r;break;case"input":au(e,r),a=Jo(e,r),Ve("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=Ze({},r,{value:void 0}),Ve("invalid",e);break;case"textarea":ou(e,r),a=Zo(e,r),Ve("invalid",e);break;default:a=r}ei(n,a),c=a;for(l in c)if(c.hasOwnProperty(l)){var u=c[l];l==="style"?dm(e,u):l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&cm(e,u)):l==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Fr(e,u):typeof u=="number"&&Fr(e,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Or.hasOwnProperty(l)?u!=null&&l==="onScroll"&&Ve("scroll",e):u!=null&&sc(e,l,u,o))}switch(n){case"input":ha(e),lu(e,r,!1);break;case"textarea":ha(e),iu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Zn(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?Bs(e,!!r.multiple,l,!1):r.defaultValue!=null&&Bs(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=rl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return vt(t),null;case 6:if(e&&t.stateNode!=null)Uf(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(se(166));if(n=fs(Qr.current),fs(fn.current),Sa(t)){if(r=t.stateNode,n=t.memoizedProps,r[dn]=t,(l=r.nodeValue!==n)&&(e=Dt,e!==null))switch(e.tag){case 3:Na(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Na(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[dn]=t,t.stateNode=r}return vt(t),null;case 13:if(qe(Qe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Je&&Ut!==null&&t.mode&1&&!(t.flags&128))Zm(),Qs(),t.flags|=98560,l=!1;else if(l=Sa(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(se(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(se(317));l[dn]=t}else Qs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;vt(t),l=!1}else nn!==null&&(Ui(nn),nn=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Qe.current&1?it===0&&(it=3):Fc())),t.updateQueue!==null&&(t.flags|=4),vt(t),null);case 4:return Zs(),Ei(e,t),e===null&&Kr(t.stateNode.containerInfo),vt(t),null;case 10:return jc(t.type._context),vt(t),null;case 17:return Lt(t.type)&&al(),vt(t),null;case 19:if(qe(Qe),l=t.memoizedState,l===null)return vt(t),null;if(r=(t.flags&128)!==0,o=l.rendering,o===null)if(r)gr(l,!1);else{if(it!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=ml(e),o!==null){for(t.flags|=128,gr(l,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,o=l.alternate,o===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,e=o.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return He(Qe,Qe.current&1|2),t.child}e=e.sibling}l.tail!==null&&st()>er&&(t.flags|=128,r=!0,gr(l,!1),t.lanes=4194304)}else{if(!r)if(e=ml(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),gr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!Je)return vt(t),null}else 2*st()-l.renderingStartTime>er&&n!==1073741824&&(t.flags|=128,r=!0,gr(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(n=l.last,n!==null?n.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=st(),t.sibling=null,n=Qe.current,He(Qe,r?n&1|2:n&1),t):(vt(t),null);case 22:case 23:return Oc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?It&1073741824&&(vt(t),t.subtreeFlags&6&&(t.flags|=8192)):vt(t),null;case 24:return null;case 25:return null}throw Error(se(156,t.tag))}function Y0(e,t){switch(yc(t),t.tag){case 1:return Lt(t.type)&&al(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Zs(),qe(Rt),qe(jt),Ec(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Cc(t),null;case 13:if(qe(Qe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(se(340));Qs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return qe(Qe),null;case 4:return Zs(),null;case 10:return jc(t.type._context),null;case 22:case 23:return Oc(),null;case 24:return null;default:return null}}var Ea=!1,bt=!1,Z0=typeof WeakSet=="function"?WeakSet:Set,me=null;function Fs(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){et(e,t,r)}else n.current=null}function Pi(e,t,n){try{n()}catch(r){et(e,t,r)}}var Yu=!1;function X0(e,t){if(di=tl,e=Fm(),xc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,p=0,f=e,g=null;t:for(;;){for(var v;f!==n||a!==0&&f.nodeType!==3||(c=o+a),f!==l||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(v=f.firstChild)!==null;)g=f,f=v;for(;;){if(f===e)break t;if(g===n&&++d===a&&(c=o),g===l&&++p===r&&(u=o),(v=f.nextSibling)!==null)break;f=g,g=f.parentNode}f=v}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(mi={focusedElem:e,selectionRange:n},tl=!1,me=t;me!==null;)if(t=me,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,me=e;else for(;me!==null;){t=me;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var y=b.memoizedProps,S=b.memoizedState,x=t.stateNode,h=x.getSnapshotBeforeUpdate(t.elementType===t.type?y:en(t.type,y),S);x.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var m=t.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(se(163))}}catch(k){et(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,me=e;break}me=t.return}return b=Yu,Yu=!1,b}function Ur(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&Pi(t,n,l)}a=a.next}while(a!==r)}}function Dl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Ti(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Df(e){var t=e.alternate;t!==null&&(e.alternate=null,Df(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[dn],delete t[qr],delete t[hi],delete t[U0],delete t[D0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Mf(e){return e.tag===5||e.tag===3||e.tag===4}function Zu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Mf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ri(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=rl));else if(r!==4&&(e=e.child,e!==null))for(Ri(e,t,n),e=e.sibling;e!==null;)Ri(e,t,n),e=e.sibling}function Li(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Li(e,t,n),e=e.sibling;e!==null;)Li(e,t,n),e=e.sibling}var pt=null,tn=!1;function In(e,t,n){for(n=n.child;n!==null;)Of(e,t,n),n=n.sibling}function Of(e,t,n){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(Pl,n)}catch{}switch(n.tag){case 5:bt||Fs(n,t);case 6:var r=pt,a=tn;pt=null,In(e,t,n),pt=r,tn=a,pt!==null&&(tn?(e=pt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):pt.removeChild(n.stateNode));break;case 18:pt!==null&&(tn?(e=pt,n=n.stateNode,e.nodeType===8?ho(e.parentNode,n):e.nodeType===1&&ho(e,n),Gr(e)):ho(pt,n.stateNode));break;case 4:r=pt,a=tn,pt=n.stateNode.containerInfo,tn=!0,In(e,t,n),pt=r,tn=a;break;case 0:case 11:case 14:case 15:if(!bt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var l=a,o=l.destroy;l=l.tag,o!==void 0&&(l&2||l&4)&&Pi(n,t,o),a=a.next}while(a!==r)}In(e,t,n);break;case 1:if(!bt&&(Fs(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){et(n,t,c)}In(e,t,n);break;case 21:In(e,t,n);break;case 22:n.mode&1?(bt=(r=bt)||n.memoizedState!==null,In(e,t,n),bt=r):In(e,t,n);break;default:In(e,t,n)}}function Xu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Z0),t.forEach(function(r){var a=ix.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function Qt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var l=e,o=t,c=o;e:for(;c!==null;){switch(c.tag){case 5:pt=c.stateNode,tn=!1;break e;case 3:pt=c.stateNode.containerInfo,tn=!0;break e;case 4:pt=c.stateNode.containerInfo,tn=!0;break e}c=c.return}if(pt===null)throw Error(se(160));Of(l,o,a),pt=null,tn=!1;var u=a.alternate;u!==null&&(u.return=null),a.return=null}catch(d){et(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ff(t,e),t=t.sibling}function Ff(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Qt(t,e),on(e),r&4){try{Ur(3,e,e.return),Dl(3,e)}catch(y){et(e,e.return,y)}try{Ur(5,e,e.return)}catch(y){et(e,e.return,y)}}break;case 1:Qt(t,e),on(e),r&512&&n!==null&&Fs(n,n.return);break;case 5:if(Qt(t,e),on(e),r&512&&n!==null&&Fs(n,n.return),e.flags&32){var a=e.stateNode;try{Fr(a,"")}catch(y){et(e,e.return,y)}}if(r&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,o=n!==null?n.memoizedProps:l,c=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{c==="input"&&l.type==="radio"&&l.name!=null&&lm(a,l),ti(c,o);var d=ti(c,l);for(o=0;o<u.length;o+=2){var p=u[o],f=u[o+1];p==="style"?dm(a,f):p==="dangerouslySetInnerHTML"?cm(a,f):p==="children"?Fr(a,f):sc(a,p,f,d)}switch(c){case"input":Qo(a,l);break;case"textarea":om(a,l);break;case"select":var g=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var v=l.value;v!=null?Bs(a,!!l.multiple,v,!1):g!==!!l.multiple&&(l.defaultValue!=null?Bs(a,!!l.multiple,l.defaultValue,!0):Bs(a,!!l.multiple,l.multiple?[]:"",!1))}a[qr]=l}catch(y){et(e,e.return,y)}}break;case 6:if(Qt(t,e),on(e),r&4){if(e.stateNode===null)throw Error(se(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(y){et(e,e.return,y)}}break;case 3:if(Qt(t,e),on(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Gr(t.containerInfo)}catch(y){et(e,e.return,y)}break;case 4:Qt(t,e),on(e);break;case 13:Qt(t,e),on(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(Dc=st())),r&4&&Xu(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(bt=(d=bt)||p,Qt(t,e),bt=d):Qt(t,e),on(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!p&&e.mode&1)for(me=e,p=e.child;p!==null;){for(f=me=p;me!==null;){switch(g=me,v=g.child,g.tag){case 0:case 11:case 14:case 15:Ur(4,g,g.return);break;case 1:Fs(g,g.return);var b=g.stateNode;if(typeof b.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(y){et(r,n,y)}}break;case 5:Fs(g,g.return);break;case 22:if(g.memoizedState!==null){td(f);continue}}v!==null?(v.return=g,me=v):td(f)}p=p.sibling}e:for(p=null,f=e;;){if(f.tag===5){if(p===null){p=f;try{a=f.stateNode,d?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(c=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=um("display",o))}catch(y){et(e,e.return,y)}}}else if(f.tag===6){if(p===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(y){et(e,e.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;p===f&&(p=null),f=f.return}p===f&&(p=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Qt(t,e),on(e),r&4&&Xu(e);break;case 21:break;default:Qt(t,e),on(e)}}function on(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Mf(n)){var r=n;break e}n=n.return}throw Error(se(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Fr(a,""),r.flags&=-33);var l=Zu(e);Li(e,l,a);break;case 3:case 4:var o=r.stateNode.containerInfo,c=Zu(e);Ri(e,c,o);break;default:throw Error(se(161))}}catch(u){et(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ex(e,t,n){me=e,_f(e)}function _f(e,t,n){for(var r=(e.mode&1)!==0;me!==null;){var a=me,l=a.child;if(a.tag===22&&r){var o=a.memoizedState!==null||Ea;if(!o){var c=a.alternate,u=c!==null&&c.memoizedState!==null||bt;c=Ea;var d=bt;if(Ea=o,(bt=u)&&!d)for(me=a;me!==null;)o=me,u=o.child,o.tag===22&&o.memoizedState!==null?nd(a):u!==null?(u.return=o,me=u):nd(a);for(;l!==null;)me=l,_f(l),l=l.sibling;me=a,Ea=c,bt=d}ed(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,me=l):ed(e)}}function ed(e){for(;me!==null;){var t=me;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:bt||Dl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!bt)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:en(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Ou(t,l,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Ou(t,o,n)}break;case 5:var c=t.stateNode;if(n===null&&t.flags&4){n=c;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var f=p.dehydrated;f!==null&&Gr(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(se(163))}bt||t.flags&512&&Ti(t)}catch(g){et(t,t.return,g)}}if(t===e){me=null;break}if(n=t.sibling,n!==null){n.return=t.return,me=n;break}me=t.return}}function td(e){for(;me!==null;){var t=me;if(t===e){me=null;break}var n=t.sibling;if(n!==null){n.return=t.return,me=n;break}me=t.return}}function nd(e){for(;me!==null;){var t=me;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Dl(4,t)}catch(u){et(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(u){et(t,a,u)}}var l=t.return;try{Ti(t)}catch(u){et(t,l,u)}break;case 5:var o=t.return;try{Ti(t)}catch(u){et(t,o,u)}}}catch(u){et(t,t.return,u)}if(t===e){me=null;break}var c=t.sibling;if(c!==null){c.return=t.return,me=c;break}me=t.return}}var tx=Math.ceil,hl=An.ReactCurrentDispatcher,Ic=An.ReactCurrentOwner,Wt=An.ReactCurrentBatchConfig,Re=0,ft=null,rt=null,ht=0,It=0,_s=ns(0),it=0,ea=null,js=0,Ml=0,Uc=0,Dr=null,Pt=null,Dc=0,er=1/0,wn=null,xl=!1,Ai=null,qn=null,Pa=!1,Bn=null,gl=0,Mr=0,$i=null,Ka=-1,Va=0;function St(){return Re&6?st():Ka!==-1?Ka:Ka=st()}function Jn(e){return e.mode&1?Re&2&&ht!==0?ht&-ht:O0.transition!==null?(Va===0&&(Va=Nm()),Va):(e=ze,e!==0||(e=window.event,e=e===void 0?16:Rm(e.type)),e):1}function rn(e,t,n,r){if(50<Mr)throw Mr=0,$i=null,Error(se(185));aa(e,n,r),(!(Re&2)||e!==ft)&&(e===ft&&(!(Re&2)&&(Ml|=n),it===4&&On(e,ht)),At(e,r),n===1&&Re===0&&!(t.mode&1)&&(er=st()+500,$l&&ss()))}function At(e,t){var n=e.callbackNode;Oh(e,t);var r=el(e,e===ft?ht:0);if(r===0)n!==null&&du(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&du(n),t===1)e.tag===0?M0(sd.bind(null,e)):Jm(sd.bind(null,e)),$0(function(){!(Re&6)&&ss()}),n=null;else{switch(Sm(r)){case 1:n=ic;break;case 4:n=wm;break;case 16:n=Xa;break;case 536870912:n=jm;break;default:n=Xa}n=qf(n,Bf.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Bf(e,t){if(Ka=-1,Va=0,Re&6)throw Error(se(327));var n=e.callbackNode;if(Ks()&&e.callbackNode!==n)return null;var r=el(e,e===ft?ht:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=yl(e,r);else{t=r;var a=Re;Re|=2;var l=Gf();(ft!==e||ht!==t)&&(wn=null,er=st()+500,xs(e,t));do try{rx();break}catch(c){zf(e,c)}while(!0);wc(),hl.current=l,Re=a,rt!==null?t=0:(ft=null,ht=0,t=it)}if(t!==0){if(t===2&&(a=li(e),a!==0&&(r=a,t=Ii(e,a))),t===1)throw n=ea,xs(e,0),On(e,r),At(e,st()),n;if(t===6)On(e,r);else{if(a=e.current.alternate,!(r&30)&&!nx(a)&&(t=yl(e,r),t===2&&(l=li(e),l!==0&&(r=l,t=Ii(e,l))),t===1))throw n=ea,xs(e,0),On(e,r),At(e,st()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(se(345));case 2:cs(e,Pt,wn);break;case 3:if(On(e,r),(r&130023424)===r&&(t=Dc+500-st(),10<t)){if(el(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){St(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=pi(cs.bind(null,e,Pt,wn),t);break}cs(e,Pt,wn);break;case 4:if(On(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-sn(r);l=1<<o,o=t[o],o>a&&(a=o),r&=~l}if(r=a,r=st()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*tx(r/1960))-r,10<r){e.timeoutHandle=pi(cs.bind(null,e,Pt,wn),r);break}cs(e,Pt,wn);break;case 5:cs(e,Pt,wn);break;default:throw Error(se(329))}}}return At(e,st()),e.callbackNode===n?Bf.bind(null,e):null}function Ii(e,t){var n=Dr;return e.current.memoizedState.isDehydrated&&(xs(e,t).flags|=256),e=yl(e,t),e!==2&&(t=Pt,Pt=n,t!==null&&Ui(t)),e}function Ui(e){Pt===null?Pt=e:Pt.push.apply(Pt,e)}function nx(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],l=a.getSnapshot;a=a.value;try{if(!an(l(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function On(e,t){for(t&=~Uc,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-sn(t),r=1<<n;e[n]=-1,t&=~r}}function sd(e){if(Re&6)throw Error(se(327));Ks();var t=el(e,0);if(!(t&1))return At(e,st()),null;var n=yl(e,t);if(e.tag!==0&&n===2){var r=li(e);r!==0&&(t=r,n=Ii(e,r))}if(n===1)throw n=ea,xs(e,0),On(e,t),At(e,st()),n;if(n===6)throw Error(se(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,cs(e,Pt,wn),At(e,st()),null}function Mc(e,t){var n=Re;Re|=1;try{return e(t)}finally{Re=n,Re===0&&(er=st()+500,$l&&ss())}}function Ns(e){Bn!==null&&Bn.tag===0&&!(Re&6)&&Ks();var t=Re;Re|=1;var n=Wt.transition,r=ze;try{if(Wt.transition=null,ze=1,e)return e()}finally{ze=r,Wt.transition=n,Re=t,!(Re&6)&&ss()}}function Oc(){It=_s.current,qe(_s)}function xs(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,A0(n)),rt!==null)for(n=rt.return;n!==null;){var r=n;switch(yc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&al();break;case 3:Zs(),qe(Rt),qe(jt),Ec();break;case 5:Cc(r);break;case 4:Zs();break;case 13:qe(Qe);break;case 19:qe(Qe);break;case 10:jc(r.type._context);break;case 22:case 23:Oc()}n=n.return}if(ft=e,rt=e=Qn(e.current,null),ht=It=t,it=0,ea=null,Uc=Ml=js=0,Pt=Dr=null,ms!==null){for(t=0;t<ms.length;t++)if(n=ms[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,l=n.pending;if(l!==null){var o=l.next;l.next=a,r.next=o}n.pending=r}ms=null}return e}function zf(e,t){do{var n=rt;try{if(wc(),Ga.current=pl,fl){for(var r=Ye.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}fl=!1}if(ws=0,mt=ot=Ye=null,Ir=!1,Yr=0,Ic.current=null,n===null||n.return===null){it=1,ea=t,rt=null;break}e:{var l=e,o=n.return,c=n,u=t;if(t=ht,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,p=c,f=p.tag;if(!(p.mode&1)&&(f===0||f===11||f===15)){var g=p.alternate;g?(p.updateQueue=g.updateQueue,p.memoizedState=g.memoizedState,p.lanes=g.lanes):(p.updateQueue=null,p.memoizedState=null)}var v=Wu(o);if(v!==null){v.flags&=-257,Hu(v,o,c,l,t),v.mode&1&&Gu(l,d,t),t=v,u=d;var b=t.updateQueue;if(b===null){var y=new Set;y.add(u),t.updateQueue=y}else b.add(u);break e}else{if(!(t&1)){Gu(l,d,t),Fc();break e}u=Error(se(426))}}else if(Je&&c.mode&1){var S=Wu(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Hu(S,o,c,l,t),vc(Xs(u,c));break e}}l=u=Xs(u,c),it!==4&&(it=2),Dr===null?Dr=[l]:Dr.push(l),l=o;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var x=kf(l,u,t);Mu(l,x);break e;case 1:c=u;var h=l.type,m=l.stateNode;if(!(l.flags&128)&&(typeof h.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(qn===null||!qn.has(m)))){l.flags|=65536,t&=-t,l.lanes|=t;var k=Cf(l,c,t);Mu(l,k);break e}}l=l.return}while(l!==null)}Hf(n)}catch(C){t=C,rt===n&&n!==null&&(rt=n=n.return);continue}break}while(!0)}function Gf(){var e=hl.current;return hl.current=pl,e===null?pl:e}function Fc(){(it===0||it===3||it===2)&&(it=4),ft===null||!(js&268435455)&&!(Ml&268435455)||On(ft,ht)}function yl(e,t){var n=Re;Re|=2;var r=Gf();(ft!==e||ht!==t)&&(wn=null,xs(e,t));do try{sx();break}catch(a){zf(e,a)}while(!0);if(wc(),Re=n,hl.current=r,rt!==null)throw Error(se(261));return ft=null,ht=0,it}function sx(){for(;rt!==null;)Wf(rt)}function rx(){for(;rt!==null&&!Th();)Wf(rt)}function Wf(e){var t=Vf(e.alternate,e,It);e.memoizedProps=e.pendingProps,t===null?Hf(e):rt=t,Ic.current=null}function Hf(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Y0(n,t),n!==null){n.flags&=32767,rt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{it=6,rt=null;return}}else if(n=Q0(n,t,It),n!==null){rt=n;return}if(t=t.sibling,t!==null){rt=t;return}rt=t=e}while(t!==null);it===0&&(it=5)}function cs(e,t,n){var r=ze,a=Wt.transition;try{Wt.transition=null,ze=1,ax(e,t,n,r)}finally{Wt.transition=a,ze=r}return null}function ax(e,t,n,r){do Ks();while(Bn!==null);if(Re&6)throw Error(se(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(se(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(Fh(e,l),e===ft&&(rt=ft=null,ht=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Pa||(Pa=!0,qf(Xa,function(){return Ks(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Wt.transition,Wt.transition=null;var o=ze;ze=1;var c=Re;Re|=4,Ic.current=null,X0(e,n),Ff(n,e),k0(mi),tl=!!di,mi=di=null,e.current=n,ex(n),Rh(),Re=c,ze=o,Wt.transition=l}else e.current=n;if(Pa&&(Pa=!1,Bn=e,gl=a),l=e.pendingLanes,l===0&&(qn=null),$h(n.stateNode),At(e,st()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(xl)throw xl=!1,e=Ai,Ai=null,e;return gl&1&&e.tag!==0&&Ks(),l=e.pendingLanes,l&1?e===$i?Mr++:(Mr=0,$i=e):Mr=0,ss(),null}function Ks(){if(Bn!==null){var e=Sm(gl),t=Wt.transition,n=ze;try{if(Wt.transition=null,ze=16>e?16:e,Bn===null)var r=!1;else{if(e=Bn,Bn=null,gl=0,Re&6)throw Error(se(331));var a=Re;for(Re|=4,me=e.current;me!==null;){var l=me,o=l.child;if(me.flags&16){var c=l.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(me=d;me!==null;){var p=me;switch(p.tag){case 0:case 11:case 15:Ur(8,p,l)}var f=p.child;if(f!==null)f.return=p,me=f;else for(;me!==null;){p=me;var g=p.sibling,v=p.return;if(Df(p),p===d){me=null;break}if(g!==null){g.return=v,me=g;break}me=v}}}var b=l.alternate;if(b!==null){var y=b.child;if(y!==null){b.child=null;do{var S=y.sibling;y.sibling=null,y=S}while(y!==null)}}me=l}}if(l.subtreeFlags&2064&&o!==null)o.return=l,me=o;else e:for(;me!==null;){if(l=me,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Ur(9,l,l.return)}var x=l.sibling;if(x!==null){x.return=l.return,me=x;break e}me=l.return}}var h=e.current;for(me=h;me!==null;){o=me;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,me=m;else e:for(o=h;me!==null;){if(c=me,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Dl(9,c)}}catch(C){et(c,c.return,C)}if(c===o){me=null;break e}var k=c.sibling;if(k!==null){k.return=c.return,me=k;break e}me=c.return}}if(Re=a,ss(),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(Pl,e)}catch{}r=!0}return r}finally{ze=n,Wt.transition=t}}return!1}function rd(e,t,n){t=Xs(n,t),t=kf(e,t,1),e=Vn(e,t,1),t=St(),e!==null&&(aa(e,1,t),At(e,t))}function et(e,t,n){if(e.tag===3)rd(e,e,n);else for(;t!==null;){if(t.tag===3){rd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(qn===null||!qn.has(r))){e=Xs(n,e),e=Cf(t,e,1),t=Vn(t,e,1),e=St(),t!==null&&(aa(t,1,e),At(t,e));break}}t=t.return}}function lx(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=St(),e.pingedLanes|=e.suspendedLanes&n,ft===e&&(ht&n)===n&&(it===4||it===3&&(ht&130023424)===ht&&500>st()-Dc?xs(e,0):Uc|=n),At(e,t)}function Kf(e,t){t===0&&(e.mode&1?(t=ya,ya<<=1,!(ya&130023424)&&(ya=4194304)):t=1);var n=St();e=Tn(e,t),e!==null&&(aa(e,t,n),At(e,n))}function ox(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Kf(e,n)}function ix(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(se(314))}r!==null&&r.delete(t),Kf(e,n)}var Vf;Vf=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Rt.current)Tt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Tt=!1,J0(e,t,n);Tt=!!(e.flags&131072)}else Tt=!1,Je&&t.flags&1048576&&Qm(t,il,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ha(e,t),e=t.pendingProps;var a=Js(t,jt.current);Hs(t,n),a=Tc(null,t,r,e,a,n);var l=Rc();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Lt(r)?(l=!0,ll(t)):l=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Sc(t),a.updater=Ul,t.stateNode=a,a._reactInternals=t,wi(t,r,e,n),t=Si(null,t,r,!0,l,n)):(t.tag=0,Je&&l&&gc(t),Nt(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ha(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=ux(r),e=en(r,e),a){case 0:t=Ni(null,t,r,e,n);break e;case 1:t=qu(null,t,r,e,n);break e;case 11:t=Ku(null,t,r,e,n);break e;case 14:t=Vu(null,t,r,en(r.type,e),n);break e}throw Error(se(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:en(r,a),Ni(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:en(r,a),qu(e,t,r,a,n);case 3:e:{if(Rf(t),e===null)throw Error(se(387));r=t.pendingProps,l=t.memoizedState,a=l.element,nf(e,t),dl(t,r,null,n);var o=t.memoizedState;if(r=o.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){a=Xs(Error(se(423)),t),t=Ju(e,t,r,n,a);break e}else if(r!==a){a=Xs(Error(se(424)),t),t=Ju(e,t,r,n,a);break e}else for(Ut=Kn(t.stateNode.containerInfo.firstChild),Dt=t,Je=!0,nn=null,n=ef(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qs(),r===a){t=Rn(e,t,n);break e}Nt(e,t,r,n)}t=t.child}return t;case 5:return sf(t),e===null&&yi(t),r=t.type,a=t.pendingProps,l=e!==null?e.memoizedProps:null,o=a.children,fi(r,a)?o=null:l!==null&&fi(r,l)&&(t.flags|=32),Tf(e,t),Nt(e,t,o,n),t.child;case 6:return e===null&&yi(t),null;case 13:return Lf(e,t,n);case 4:return kc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ys(t,null,r,n):Nt(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:en(r,a),Ku(e,t,r,a,n);case 7:return Nt(e,t,t.pendingProps,n),t.child;case 8:return Nt(e,t,t.pendingProps.children,n),t.child;case 12:return Nt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,l=t.memoizedProps,o=a.value,He(cl,r._currentValue),r._currentValue=o,l!==null)if(an(l.value,o)){if(l.children===a.children&&!Rt.current){t=Rn(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var c=l.dependencies;if(c!==null){o=l.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(l.tag===1){u=kn(-1,n&-n),u.tag=2;var d=l.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?u.next=u:(u.next=p.next,p.next=u),d.pending=u}}l.lanes|=n,u=l.alternate,u!==null&&(u.lanes|=n),vi(l.return,n,t),c.lanes|=n;break}u=u.next}}else if(l.tag===10)o=l.type===t.type?null:l.child;else if(l.tag===18){if(o=l.return,o===null)throw Error(se(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),vi(o,n,t),o=l.sibling}else o=l.child;if(o!==null)o.return=l;else for(o=l;o!==null;){if(o===t){o=null;break}if(l=o.sibling,l!==null){l.return=o.return,o=l;break}o=o.return}l=o}Nt(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Hs(t,n),a=Ht(a),r=r(a),t.flags|=1,Nt(e,t,r,n),t.child;case 14:return r=t.type,a=en(r,t.pendingProps),a=en(r.type,a),Vu(e,t,r,a,n);case 15:return Ef(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:en(r,a),Ha(e,t),t.tag=1,Lt(r)?(e=!0,ll(t)):e=!1,Hs(t,n),Sf(t,r,a),wi(t,r,a,n),Si(null,t,r,!0,e,n);case 19:return Af(e,t,n);case 22:return Pf(e,t,n)}throw Error(se(156,t.tag))};function qf(e,t){return bm(e,t)}function cx(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gt(e,t,n,r){return new cx(e,t,n,r)}function _c(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ux(e){if(typeof e=="function")return _c(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ac)return 11;if(e===lc)return 14}return 2}function Qn(e,t){var n=e.alternate;return n===null?(n=Gt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function qa(e,t,n,r,a,l){var o=2;if(r=e,typeof e=="function")_c(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Rs:return gs(n.children,a,l,t);case rc:o=8,a|=8;break;case Ho:return e=Gt(12,n,t,a|2),e.elementType=Ho,e.lanes=l,e;case Ko:return e=Gt(13,n,t,a),e.elementType=Ko,e.lanes=l,e;case Vo:return e=Gt(19,n,t,a),e.elementType=Vo,e.lanes=l,e;case sm:return Ol(n,a,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case tm:o=10;break e;case nm:o=9;break e;case ac:o=11;break e;case lc:o=14;break e;case Un:o=16,r=null;break e}throw Error(se(130,e==null?e:typeof e,""))}return t=Gt(o,n,t,a),t.elementType=e,t.type=r,t.lanes=l,t}function gs(e,t,n,r){return e=Gt(7,e,r,t),e.lanes=n,e}function Ol(e,t,n,r){return e=Gt(22,e,r,t),e.elementType=sm,e.lanes=n,e.stateNode={isHidden:!1},e}function No(e,t,n){return e=Gt(6,e,null,t),e.lanes=n,e}function So(e,t,n){return t=Gt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function dx(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=so(0),this.expirationTimes=so(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=so(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,a,l,o,c,u){return e=new dx(e,t,n,c,u),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Gt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sc(l),e}function mx(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ts,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Jf(e){if(!e)return Xn;e=e._reactInternals;e:{if(ks(e)!==e||e.tag!==1)throw Error(se(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Lt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(se(171))}if(e.tag===1){var n=e.type;if(Lt(n))return qm(e,n,t)}return t}function Qf(e,t,n,r,a,l,o,c,u){return e=Bc(n,r,!0,e,a,l,o,c,u),e.context=Jf(null),n=e.current,r=St(),a=Jn(n),l=kn(r,a),l.callback=t??null,Vn(n,l,a),e.current.lanes=a,aa(e,a,r),At(e,r),e}function Fl(e,t,n,r){var a=t.current,l=St(),o=Jn(a);return n=Jf(n),t.context===null?t.context=n:t.pendingContext=n,t=kn(l,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Vn(a,t,o),e!==null&&(rn(e,a,o,l),za(e,a,o)),o}function vl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ad(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function zc(e,t){ad(e,t),(e=e.alternate)&&ad(e,t)}function fx(){return null}var Yf=typeof reportError=="function"?reportError:function(e){console.error(e)};function Gc(e){this._internalRoot=e}_l.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(se(409));Fl(e,t,null,null)};_l.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ns(function(){Fl(null,e,null,null)}),t[Pn]=null}};function _l(e){this._internalRoot=e}_l.prototype.unstable_scheduleHydration=function(e){if(e){var t=Em();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Mn.length&&t!==0&&t<Mn[n].priority;n++);Mn.splice(n,0,e),n===0&&Tm(e)}};function Wc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Bl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ld(){}function px(e,t,n,r,a){if(a){if(typeof r=="function"){var l=r;r=function(){var d=vl(o);l.call(d)}}var o=Qf(t,r,e,0,null,!1,!1,"",ld);return e._reactRootContainer=o,e[Pn]=o.current,Kr(e.nodeType===8?e.parentNode:e),Ns(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var c=r;r=function(){var d=vl(u);c.call(d)}}var u=Bc(e,0,!1,null,null,!1,!1,"",ld);return e._reactRootContainer=u,e[Pn]=u.current,Kr(e.nodeType===8?e.parentNode:e),Ns(function(){Fl(t,u,n,r)}),u}function zl(e,t,n,r,a){var l=n._reactRootContainer;if(l){var o=l;if(typeof a=="function"){var c=a;a=function(){var u=vl(o);c.call(u)}}Fl(t,o,e,a)}else o=px(n,t,e,a,r);return vl(o)}km=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=kr(t.pendingLanes);n!==0&&(cc(t,n|1),At(t,st()),!(Re&6)&&(er=st()+500,ss()))}break;case 13:Ns(function(){var r=Tn(e,1);if(r!==null){var a=St();rn(r,e,1,a)}}),zc(e,1)}};uc=function(e){if(e.tag===13){var t=Tn(e,134217728);if(t!==null){var n=St();rn(t,e,134217728,n)}zc(e,134217728)}};Cm=function(e){if(e.tag===13){var t=Jn(e),n=Tn(e,t);if(n!==null){var r=St();rn(n,e,t,r)}zc(e,t)}};Em=function(){return ze};Pm=function(e,t){var n=ze;try{return ze=e,t()}finally{ze=n}};si=function(e,t,n){switch(t){case"input":if(Qo(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=Al(r);if(!a)throw Error(se(90));am(r),Qo(r,a)}}}break;case"textarea":om(e,n);break;case"select":t=n.value,t!=null&&Bs(e,!!n.multiple,t,!1)}};pm=Mc;hm=Ns;var hx={usingClientEntryPoint:!1,Events:[oa,Is,Al,mm,fm,Mc]},yr={findFiberByHostInstance:ds,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xx={bundleType:yr.bundleType,version:yr.version,rendererPackageName:yr.rendererPackageName,rendererConfig:yr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:An.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ym(e),e===null?null:e.stateNode},findFiberByHostInstance:yr.findFiberByHostInstance||fx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ta=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ta.isDisabled&&Ta.supportsFiber)try{Pl=Ta.inject(xx),mn=Ta}catch{}}Ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hx;Ot.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wc(t))throw Error(se(200));return mx(e,t,null,n)};Ot.createRoot=function(e,t){if(!Wc(e))throw Error(se(299));var n=!1,r="",a=Yf;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Bc(e,1,!1,null,null,n,!1,r,a),e[Pn]=t.current,Kr(e.nodeType===8?e.parentNode:e),new Gc(t)};Ot.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(se(188)):(e=Object.keys(e).join(","),Error(se(268,e)));return e=ym(t),e=e===null?null:e.stateNode,e};Ot.flushSync=function(e){return Ns(e)};Ot.hydrate=function(e,t,n){if(!Bl(t))throw Error(se(200));return zl(null,e,t,!0,n)};Ot.hydrateRoot=function(e,t,n){if(!Wc(e))throw Error(se(405));var r=n!=null&&n.hydratedSources||null,a=!1,l="",o=Yf;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Qf(t,null,e,1,n??null,a,!1,l,o),e[Pn]=t.current,Kr(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new _l(t)};Ot.render=function(e,t,n){if(!Bl(t))throw Error(se(200));return zl(null,e,t,!1,n)};Ot.unmountComponentAtNode=function(e){if(!Bl(e))throw Error(se(40));return e._reactRootContainer?(Ns(function(){zl(null,null,e,!1,function(){e._reactRootContainer=null,e[Pn]=null})}),!0):!1};Ot.unstable_batchedUpdates=Mc;Ot.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Bl(n))throw Error(se(200));if(e==null||e._reactInternals===void 0)throw Error(se(38));return zl(e,t,n,!1,r)};Ot.version="18.3.1-next-f1338f8080-20240426";function Zf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Zf)}catch(e){console.error(e)}}Zf(),Yd.exports=Ot;var Xf=Yd.exports,od=Xf;Go.createRoot=od.createRoot,Go.hydrateRoot=od.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ta(){return ta=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ta.apply(this,arguments)}var zn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(zn||(zn={}));const id="popstate";function gx(e){e===void 0&&(e={});function t(r,a){let{pathname:l,search:o,hash:c}=r.location;return Di("",{pathname:l,search:o,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:bl(a)}return vx(t,n,null,e)}function tt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Hc(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function yx(){return Math.random().toString(36).substr(2,8)}function cd(e,t){return{usr:e.state,key:e.key,idx:t}}function Di(e,t,n,r){return n===void 0&&(n=null),ta({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?lr(t):t,{state:n,key:t&&t.key||r||yx()})}function bl(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function lr(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function vx(e,t,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:l=!1}=r,o=a.history,c=zn.Pop,u=null,d=p();d==null&&(d=0,o.replaceState(ta({},o.state,{idx:d}),""));function p(){return(o.state||{idx:null}).idx}function f(){c=zn.Pop;let S=p(),x=S==null?null:S-d;d=S,u&&u({action:c,location:y.location,delta:x})}function g(S,x){c=zn.Push;let h=Di(y.location,S,x);d=p()+1;let m=cd(h,d),k=y.createHref(h);try{o.pushState(m,"",k)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;a.location.assign(k)}l&&u&&u({action:c,location:y.location,delta:1})}function v(S,x){c=zn.Replace;let h=Di(y.location,S,x);d=p();let m=cd(h,d),k=y.createHref(h);o.replaceState(m,"",k),l&&u&&u({action:c,location:y.location,delta:0})}function b(S){let x=a.location.origin!=="null"?a.location.origin:a.location.href,h=typeof S=="string"?S:bl(S);return h=h.replace(/ $/,"%20"),tt(x,"No window.location.(origin|href) available to create URL for href: "+h),new URL(h,x)}let y={get action(){return c},get location(){return e(a,o)},listen(S){if(u)throw new Error("A history only accepts one active listener");return a.addEventListener(id,f),u=S,()=>{a.removeEventListener(id,f),u=null}},createHref(S){return t(a,S)},createURL:b,encodeLocation(S){let x=b(S);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:g,replace:v,go(S){return o.go(S)}};return y}var ud;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ud||(ud={}));function bx(e,t,n){return n===void 0&&(n="/"),wx(e,t,n)}function wx(e,t,n,r){let a=typeof t=="string"?lr(t):t,l=tr(a.pathname||"/",n);if(l==null)return null;let o=ep(e);jx(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=$x(l);c=Lx(o[u],d)}return c}function ep(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(l,o,c)=>{let u={relativePath:c===void 0?l.path||"":c,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};u.relativePath.startsWith("/")&&(tt(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=Yn([r,u.relativePath]),p=n.concat(u);l.children&&l.children.length>0&&(tt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),ep(l.children,t,p,d)),!(l.path==null&&!l.index)&&t.push({path:d,score:Tx(d,l.index),routesMeta:p})};return e.forEach((l,o)=>{var c;if(l.path===""||!((c=l.path)!=null&&c.includes("?")))a(l,o);else for(let u of tp(l.path))a(l,o,u)}),t}function tp(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,a=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let o=tp(r.join("/")),c=[];return c.push(...o.map(u=>u===""?l:[l,u].join("/"))),a&&c.push(...o),c.map(u=>e.startsWith("/")&&u===""?"/":u)}function jx(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Rx(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Nx=/^:[\w-]+$/,Sx=3,kx=2,Cx=1,Ex=10,Px=-2,dd=e=>e==="*";function Tx(e,t){let n=e.split("/"),r=n.length;return n.some(dd)&&(r+=Px),t&&(r+=kx),n.filter(a=>!dd(a)).reduce((a,l)=>a+(Nx.test(l)?Sx:l===""?Cx:Ex),r)}function Rx(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function Lx(e,t,n){let{routesMeta:r}=e,a={},l="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,p=l==="/"?t:t.slice(l.length)||"/",f=Mi({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},p),g=u.route;if(!f)return null;Object.assign(a,f.params),o.push({params:a,pathname:Yn([l,f.pathname]),pathnameBase:Ox(Yn([l,f.pathnameBase])),route:g}),f.pathnameBase!=="/"&&(l=Yn([l,f.pathnameBase]))}return o}function Mi(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Ax(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let l=a[0],o=l.replace(/(.)\/+$/,"$1"),c=a.slice(1);return{params:r.reduce((d,p,f)=>{let{paramName:g,isOptional:v}=p;if(g==="*"){let y=c[f]||"";o=l.slice(0,l.length-y.length).replace(/(.)\/+$/,"$1")}const b=c[f];return v&&!b?d[g]=void 0:d[g]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:l,pathnameBase:o,pattern:e}}function Ax(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Hc(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function $x(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Hc(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function tr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const Ix=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ux=e=>Ix.test(e);function Dx(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?lr(e):e,l;if(n)if(Ux(n))l=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Hc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?l=md(n.substring(1),"/"):l=md(n,t)}else l=t;return{pathname:l,search:Fx(r),hash:_x(a)}}function md(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function ko(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Mx(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function np(e,t){let n=Mx(e);return t?n.map((r,a)=>a===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function sp(e,t,n,r){r===void 0&&(r=!1);let a;typeof e=="string"?a=lr(e):(a=ta({},e),tt(!a.pathname||!a.pathname.includes("?"),ko("?","pathname","search",a)),tt(!a.pathname||!a.pathname.includes("#"),ko("#","pathname","hash",a)),tt(!a.search||!a.search.includes("#"),ko("#","search","hash",a)));let l=e===""||a.pathname==="",o=l?"/":a.pathname,c;if(o==null)c=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),f-=1;a.pathname=g.join("/")}c=f>=0?t[f]:"/"}let u=Dx(a,c),d=o&&o!=="/"&&o.endsWith("/"),p=(l||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||p)&&(u.pathname+="/"),u}const Yn=e=>e.join("/").replace(/\/\/+/g,"/"),Ox=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Fx=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,_x=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Bx(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const rp=["post","put","patch","delete"];new Set(rp);const zx=["get",...rp];new Set(zx);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function na(){return na=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},na.apply(this,arguments)}const Gl=i.createContext(null),ap=i.createContext(null),rs=i.createContext(null),Wl=i.createContext(null),as=i.createContext({outlet:null,matches:[],isDataRoute:!1}),lp=i.createContext(null);function Gx(e,t){let{relative:n}=t===void 0?{}:t;ca()||tt(!1);let{basename:r,navigator:a}=i.useContext(rs),{hash:l,pathname:o,search:c}=Hl(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Yn([r,o])),a.createHref({pathname:u,search:c,hash:l})}function ca(){return i.useContext(Wl)!=null}function or(){return ca()||tt(!1),i.useContext(Wl).location}function op(e){i.useContext(rs).static||i.useLayoutEffect(e)}function Vt(){let{isDataRoute:e}=i.useContext(as);return e?ng():Wx()}function Wx(){ca()||tt(!1);let e=i.useContext(Gl),{basename:t,future:n,navigator:r}=i.useContext(rs),{matches:a}=i.useContext(as),{pathname:l}=or(),o=JSON.stringify(np(a,n.v7_relativeSplatPath)),c=i.useRef(!1);return op(()=>{c.current=!0}),i.useCallback(function(d,p){if(p===void 0&&(p={}),!c.current)return;if(typeof d=="number"){r.go(d);return}let f=sp(d,JSON.parse(o),l,p.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Yn([t,f.pathname])),(p.replace?r.replace:r.push)(f,p.state,p)},[t,r,o,l,e])}function ir(){let{matches:e}=i.useContext(as),t=e[e.length-1];return t?t.params:{}}function Hl(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=i.useContext(rs),{matches:a}=i.useContext(as),{pathname:l}=or(),o=JSON.stringify(np(a,r.v7_relativeSplatPath));return i.useMemo(()=>sp(e,JSON.parse(o),l,n==="path"),[e,o,l,n])}function Hx(e,t){return Kx(e,t)}function Kx(e,t,n,r){ca()||tt(!1);let{navigator:a}=i.useContext(rs),{matches:l}=i.useContext(as),o=l[l.length-1],c=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=or(),p;if(t){var f;let S=typeof t=="string"?lr(t):t;u==="/"||(f=S.pathname)!=null&&f.startsWith(u)||tt(!1),p=S}else p=d;let g=p.pathname||"/",v=g;if(u!=="/"){let S=u.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(S.length).join("/")}let b=bx(e,{pathname:v}),y=Yx(b&&b.map(S=>Object.assign({},S,{params:Object.assign({},c,S.params),pathname:Yn([u,a.encodeLocation?a.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?u:Yn([u,a.encodeLocation?a.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),l,n,r);return t&&y?i.createElement(Wl.Provider,{value:{location:na({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:zn.Pop}},y):y}function Vx(){let e=tg(),t=Bx(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:a},n):null,null)}const qx=i.createElement(Vx,null);class Jx extends i.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?i.createElement(as.Provider,{value:this.props.routeContext},i.createElement(lp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Qx(e){let{routeContext:t,match:n,children:r}=e,a=i.useContext(Gl);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(as.Provider,{value:t},r)}function Yx(e,t,n,r){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var l;if(!n)return null;if(n.errors)e=n.matches;else if((l=r)!=null&&l.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,c=(a=n)==null?void 0:a.errors;if(c!=null){let p=o.findIndex(f=>f.route.id&&(c==null?void 0:c[f.route.id])!==void 0);p>=0||tt(!1),o=o.slice(0,Math.min(o.length,p+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<o.length;p++){let f=o[p];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=p),f.route.id){let{loaderData:g,errors:v}=n,b=f.route.loader&&g[f.route.id]===void 0&&(!v||v[f.route.id]===void 0);if(f.route.lazy||b){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((p,f,g)=>{let v,b=!1,y=null,S=null;n&&(v=c&&f.route.id?c[f.route.id]:void 0,y=f.route.errorElement||qx,u&&(d<0&&g===0?(sg("route-fallback"),b=!0,S=null):d===g&&(b=!0,S=f.route.hydrateFallbackElement||null)));let x=t.concat(o.slice(0,g+1)),h=()=>{let m;return v?m=y:b?m=S:f.route.Component?m=i.createElement(f.route.Component,null):f.route.element?m=f.route.element:m=p,i.createElement(Qx,{match:f,routeContext:{outlet:p,matches:x,isDataRoute:n!=null},children:m})};return n&&(f.route.ErrorBoundary||f.route.errorElement||g===0)?i.createElement(Jx,{location:n.location,revalidation:n.revalidation,component:y,error:v,children:h(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):h()},null)}var ip=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ip||{}),cp=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(cp||{});function Zx(e){let t=i.useContext(Gl);return t||tt(!1),t}function Xx(e){let t=i.useContext(ap);return t||tt(!1),t}function eg(e){let t=i.useContext(as);return t||tt(!1),t}function up(e){let t=eg(),n=t.matches[t.matches.length-1];return n.route.id||tt(!1),n.route.id}function tg(){var e;let t=i.useContext(lp),n=Xx(),r=up();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function ng(){let{router:e}=Zx(ip.UseNavigateStable),t=up(cp.UseNavigateStable),n=i.useRef(!1);return op(()=>{n.current=!0}),i.useCallback(function(a,l){l===void 0&&(l={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,na({fromRouteId:t},l)))},[e,t])}const fd={};function sg(e,t,n){fd[e]||(fd[e]=!0)}function rg(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Me(e){tt(!1)}function ag(e){let{basename:t="/",children:n=null,location:r,navigationType:a=zn.Pop,navigator:l,static:o=!1,future:c}=e;ca()&&tt(!1);let u=t.replace(/^\/*/,"/"),d=i.useMemo(()=>({basename:u,navigator:l,static:o,future:na({v7_relativeSplatPath:!1},c)}),[u,c,l,o]);typeof r=="string"&&(r=lr(r));let{pathname:p="/",search:f="",hash:g="",state:v=null,key:b="default"}=r,y=i.useMemo(()=>{let S=tr(p,u);return S==null?null:{location:{pathname:S,search:f,hash:g,state:v,key:b},navigationType:a}},[u,p,f,g,v,b,a]);return y==null?null:i.createElement(rs.Provider,{value:d},i.createElement(Wl.Provider,{children:n,value:y}))}function lg(e){let{children:t,location:n}=e;return Hx(Oi(t),n)}new Promise(()=>{});function Oi(e,t){t===void 0&&(t=[]);let n=[];return i.Children.forEach(e,(r,a)=>{if(!i.isValidElement(r))return;let l=[...t,a];if(r.type===i.Fragment){n.push.apply(n,Oi(r.props.children,l));return}r.type!==Me&&tt(!1),!r.props.index||!r.props.children||tt(!1);let o={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Oi(r.props.children,l)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wl(){return wl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wl.apply(this,arguments)}function dp(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,l;for(l=0;l<r.length;l++)a=r[l],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function og(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function ig(e,t){return e.button===0&&(!t||t==="_self")&&!og(e)}function Fi(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(a=>[n,a]):[[n,r]])},[]))}function cg(e,t){let n=Fi(e);return t&&t.forEach((r,a)=>{n.has(a)||t.getAll(a).forEach(l=>{n.append(a,l)})}),n}const ug=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],dg=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],mg="6";try{window.__reactRouterVersion=mg}catch{}const fg=i.createContext({isTransitioning:!1}),pg="startTransition",pd=Vs[pg];function hg(e){let{basename:t,children:n,future:r,window:a}=e,l=i.useRef();l.current==null&&(l.current=gx({window:a,v5Compat:!0}));let o=l.current,[c,u]=i.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},p=i.useCallback(f=>{d&&pd?pd(()=>u(f)):u(f)},[u,d]);return i.useLayoutEffect(()=>o.listen(p),[o,p]),i.useEffect(()=>rg(r),[r]),i.createElement(ag,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:o,future:r})}const xg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ie=i.forwardRef(function(t,n){let{onClick:r,relative:a,reloadDocument:l,replace:o,state:c,target:u,to:d,preventScrollReset:p,viewTransition:f}=t,g=dp(t,ug),{basename:v}=i.useContext(rs),b,y=!1;if(typeof d=="string"&&gg.test(d)&&(b=d,xg))try{let m=new URL(window.location.href),k=d.startsWith("//")?new URL(m.protocol+d):new URL(d),C=tr(k.pathname,v);k.origin===m.origin&&C!=null?d=C+k.search+k.hash:y=!0}catch{}let S=Gx(d,{relative:a}),x=vg(d,{replace:o,state:c,target:u,preventScrollReset:p,relative:a,viewTransition:f});function h(m){r&&r(m),m.defaultPrevented||x(m)}return i.createElement("a",wl({},g,{href:b||S,onClick:y||l?r:h,ref:n,target:u}))}),Yt=i.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:a=!1,className:l="",end:o=!1,style:c,to:u,viewTransition:d,children:p}=t,f=dp(t,dg),g=Hl(u,{relative:f.relative}),v=or(),b=i.useContext(ap),{navigator:y,basename:S}=i.useContext(rs),x=b!=null&&bg(g)&&d===!0,h=y.encodeLocation?y.encodeLocation(g).pathname:g.pathname,m=v.pathname,k=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;a||(m=m.toLowerCase(),k=k?k.toLowerCase():null,h=h.toLowerCase()),k&&S&&(k=tr(k,S)||k);const C=h!=="/"&&h.endsWith("/")?h.length-1:h.length;let P=m===h||!o&&m.startsWith(h)&&m.charAt(C)==="/",I=k!=null&&(k===h||!o&&k.startsWith(h)&&k.charAt(h.length)==="/"),$={isActive:P,isPending:I,isTransitioning:x},K=P?r:void 0,F;typeof l=="function"?F=l($):F=[l,P?"active":null,I?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let q=typeof c=="function"?c($):c;return i.createElement(ie,wl({},f,{"aria-current":K,className:F,ref:n,style:q,to:u,viewTransition:d}),typeof p=="function"?p($):p)});var _i;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(_i||(_i={}));var hd;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(hd||(hd={}));function yg(e){let t=i.useContext(Gl);return t||tt(!1),t}function vg(e,t){let{target:n,replace:r,state:a,preventScrollReset:l,relative:o,viewTransition:c}=t===void 0?{}:t,u=Vt(),d=or(),p=Hl(e,{relative:o});return i.useCallback(f=>{if(ig(f,n)){f.preventDefault();let g=r!==void 0?r:bl(d)===bl(p);u(e,{replace:g,state:a,preventScrollReset:l,relative:o,viewTransition:c})}},[d,u,p,r,a,n,e,l,o,c])}function qt(e){let t=i.useRef(Fi(e)),n=i.useRef(!1),r=or(),a=i.useMemo(()=>cg(r.search,n.current?null:t.current),[r.search]),l=Vt(),o=i.useCallback((c,u)=>{const d=Fi(typeof c=="function"?c(a):c);n.current=!0,l("?"+d,u)},[l,a]);return[a,o]}function bg(e,t){t===void 0&&(t={});let n=i.useContext(fg);n==null&&tt(!1);let{basename:r}=yg(_i.useViewTransitionState),a=Hl(e,{relative:t.relative});if(!n.isTransitioning)return!1;let l=tr(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=tr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Mi(a.pathname,o)!=null||Mi(a.pathname,l)!=null}function wg({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const Ge=i.forwardRef(wg);function jg({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const Kc=i.forwardRef(jg);function Ng({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"}))}const Sg=i.forwardRef(Ng);function kg({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const Zt=i.forwardRef(kg);function Cg({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const Xt=i.forwardRef(Cg);function Eg({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.057 1.123-.08M15.75 18H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08M15.75 18.75v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5A3.375 3.375 0 0 0 6.375 7.5H5.25m11.9-3.664A2.251 2.251 0 0 0 15 2.25h-1.5a2.251 2.251 0 0 0-2.15 1.586m5.8 0c.065.21.1.433.1.664v.75h-6V4.5c0-.231.035-.454.1-.664M6.75 7.5H4.875c-.621 0-1.125.504-1.125 1.125v12c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V16.5a9 9 0 0 0-9-9Z"}))}const mp=i.forwardRef(Eg);function Pg({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"}))}const Vc=i.forwardRef(Pg);function Tg({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))}const ua=i.forwardRef(Tg);function Rg({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const Lg=i.forwardRef(Rg);function Ag({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const Kl=i.forwardRef(Ag);var $g=Object.defineProperty,Ig=(e,t,n)=>t in e?$g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Co=(e,t,n)=>(Ig(e,typeof t!="symbol"?t+"":t,n),n);let Ug=class{constructor(){Co(this,"current",this.detect()),Co(this,"handoffState","pending"),Co(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Cn=new Ug,Ln=(e,t)=>{Cn.isServer?i.useEffect(e,t):i.useLayoutEffect(e,t)};function Vl(e){let t=i.useRef(e);return Ln(()=>{t.current=e},[e]),t}let wt=function(e){let t=Vl(e);return Ae.useCallback((...n)=>t.current(...n),[t])};function ql(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Jl(){let e=[],t={addEventListener(n,r,a,l){return n.addEventListener(r,a,l),t.add(()=>n.removeEventListener(r,a,l))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return ql(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,a){let l=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:a}),this.add(()=>{Object.assign(n.style,{[r]:l})})},group(n){let r=Jl();return n(r),this.add(()=>r.dispose())},add(n){return e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let a of e.splice(r,1))a()}},dispose(){for(let n of e.splice(0))n()}};return t}function Dg(){let[e]=i.useState(Jl);return i.useEffect(()=>()=>e.dispose(),[e]),e}function Mg(){let e=typeof document>"u";return"useSyncExternalStore"in Vs?(t=>t.useSyncExternalStore)(Vs)(()=>()=>{},()=>!1,()=>!e):!1}function Ql(){let e=Mg(),[t,n]=i.useState(Cn.isHandoffComplete);return t&&Cn.isHandoffComplete===!1&&n(!1),i.useEffect(()=>{t!==!0&&n(!0)},[t]),i.useEffect(()=>Cn.handoff(),[]),e?!1:t}var xd;let cr=(xd=Ae.useId)!=null?xd:function(){let e=Ql(),[t,n]=Ae.useState(e?()=>Cn.nextId():null);return Ln(()=>{t===null&&n(Cn.nextId())},[t]),t!=null?""+t:void 0};function es(e,t,...n){if(e in t){let a=t[e];return typeof a=="function"?a(...n):a}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(a=>`"${a}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,es),r}function fp(e){return Cn.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}let Bi=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var us=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(us||{}),pp=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(pp||{}),Og=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(Og||{});function Fg(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Bi)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var hp=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(hp||{});function _g(e,t=0){var n;return e===((n=fp(e))==null?void 0:n.body)?!1:es(t,{0(){return e.matches(Bi)},1(){let r=e;for(;r!==null;){if(r.matches(Bi))return!0;r=r.parentElement}return!1}})}var Bg=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(Bg||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function ys(e){e==null||e.focus({preventScroll:!0})}let zg=["textarea","input"].join(",");function Gg(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,zg))!=null?n:!1}function Wg(e,t=n=>n){return e.slice().sort((n,r)=>{let a=t(n),l=t(r);if(a===null||l===null)return 0;let o=a.compareDocumentPosition(l);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Ja(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:a=[]}={}){let l=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,o=Array.isArray(e)?n?Wg(e):e:Fg(e);a.length>0&&o.length>1&&(o=o.filter(v=>!a.includes(v))),r=r??l.activeElement;let c=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,o.indexOf(r))-1;if(t&4)return Math.max(0,o.indexOf(r))+1;if(t&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=t&32?{preventScroll:!0}:{},p=0,f=o.length,g;do{if(p>=f||p+f<=0)return 0;let v=u+p;if(t&16)v=(v+f)%f;else{if(v<0)return 3;if(v>=f)return 1}g=o[v],g==null||g.focus(d),p+=c}while(g!==l.activeElement);return t&6&&Gg(g)&&g.select(),2}function xp(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function Hg(){return/Android/gi.test(window.navigator.userAgent)}function Kg(){return xp()||Hg()}function Ra(e,t,n){let r=Vl(t);i.useEffect(()=>{function a(l){r.current(l)}return document.addEventListener(e,a,n),()=>document.removeEventListener(e,a,n)},[e,n])}function gp(e,t,n){let r=Vl(t);i.useEffect(()=>{function a(l){r.current(l)}return window.addEventListener(e,a,n),()=>window.removeEventListener(e,a,n)},[e,n])}function Vg(e,t,n=!0){let r=i.useRef(!1);i.useEffect(()=>{requestAnimationFrame(()=>{r.current=n})},[n]);function a(o,c){if(!r.current||o.defaultPrevented)return;let u=c(o);if(u===null||!u.getRootNode().contains(u)||!u.isConnected)return;let d=function p(f){return typeof f=="function"?p(f()):Array.isArray(f)||f instanceof Set?f:[f]}(e);for(let p of d){if(p===null)continue;let f=p instanceof HTMLElement?p:p.current;if(f!=null&&f.contains(u)||o.composed&&o.composedPath().includes(f))return}return!_g(u,hp.Loose)&&u.tabIndex!==-1&&o.preventDefault(),t(o,u)}let l=i.useRef(null);Ra("pointerdown",o=>{var c,u;r.current&&(l.current=((u=(c=o.composedPath)==null?void 0:c.call(o))==null?void 0:u[0])||o.target)},!0),Ra("mousedown",o=>{var c,u;r.current&&(l.current=((u=(c=o.composedPath)==null?void 0:c.call(o))==null?void 0:u[0])||o.target)},!0),Ra("click",o=>{Kg()||l.current&&(a(o,()=>l.current),l.current=null)},!0),Ra("touchend",o=>a(o,()=>o.target instanceof HTMLElement?o.target:null),!0),gp("blur",o=>a(o,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function da(...e){return i.useMemo(()=>fp(...e),[...e])}let yp=Symbol();function qg(e,t=!0){return Object.assign(e,{[yp]:t})}function $n(...e){let t=i.useRef(e);i.useEffect(()=>{t.current=e},[e]);let n=wt(r=>{for(let a of t.current)a!=null&&(typeof a=="function"?a(r):a.current=r)});return e.every(r=>r==null||(r==null?void 0:r[yp]))?void 0:n}function qc(e,t){let n=i.useRef([]),r=wt(e);i.useEffect(()=>{let a=[...n.current];for(let[l,o]of t.entries())if(n.current[l]!==o){let c=r(t,a);return n.current=t,c}},[r,...t])}function gd(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}var zi=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(zi||{}),Jg=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Jg||{});function hn({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:a,visible:l=!0,name:o,mergeRefs:c}){c=c??Qg;let u=vp(t,e);if(l)return La(u,n,r,o,c);let d=a??0;if(d&2){let{static:p=!1,...f}=u;if(p)return La(f,n,r,o,c)}if(d&1){let{unmount:p=!0,...f}=u;return es(p?0:1,{0(){return null},1(){return La({...f,hidden:!0,style:{display:"none"}},n,r,o,c)}})}return La(u,n,r,o,c)}function La(e,t={},n,r,a){let{as:l=n,children:o,refName:c="ref",...u}=Eo(e,["unmount","static"]),d=e.ref!==void 0?{[c]:e.ref}:{},p=typeof o=="function"?o(t):o;"className"in u&&u.className&&typeof u.className=="function"&&(u.className=u.className(t));let f={};if(t){let g=!1,v=[];for(let[b,y]of Object.entries(t))typeof y=="boolean"&&(g=!0),y===!0&&v.push(b);g&&(f["data-headlessui-state"]=v.join(" "))}if(l===i.Fragment&&Object.keys(yd(u)).length>0){if(!i.isValidElement(p)||Array.isArray(p)&&p.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(u).map(y=>`  - ${y}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(y=>`  - ${y}`).join(`
`)].join(`
`));let g=p.props,v=typeof(g==null?void 0:g.className)=="function"?(...y)=>gd(g==null?void 0:g.className(...y),u.className):gd(g==null?void 0:g.className,u.className),b=v?{className:v}:{};return i.cloneElement(p,Object.assign({},vp(p.props,yd(Eo(u,["ref"]))),f,d,{ref:a(p.ref,d.ref)},b))}return i.createElement(l,Object.assign({},Eo(u,["ref"]),l!==i.Fragment&&d,l!==i.Fragment&&f),p)}function Qg(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function vp(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let a in r)a.startsWith("on")&&typeof r[a]=="function"?(n[a]!=null||(n[a]=[]),n[a].push(r[a])):t[a]=r[a];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(n).map(r=>[r,void 0])));for(let r in n)Object.assign(t,{[r](a,...l){let o=n[r];for(let c of o){if((a instanceof Event||(a==null?void 0:a.nativeEvent)instanceof Event)&&a.defaultPrevented)return;c(a,...l)}}});return t}function xn(e){var t;return Object.assign(i.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function yd(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function Eo(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}let Yg="div";var jl=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(jl||{});function Zg(e,t){var n;let{features:r=1,...a}=e,l={ref:t,"aria-hidden":(r&2)===2?!0:(n=a["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return hn({ourProps:l,theirProps:a,slot:{},defaultTag:Yg,name:"Hidden"})}let Gi=xn(Zg),bp=i.createContext(null);bp.displayName="OpenClosedContext";var Er=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Er||{});function Xg(){return i.useContext(bp)}function ey(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Fn=[];ey(()=>{function e(t){t.target instanceof HTMLElement&&t.target!==document.body&&Fn[0]!==t.target&&(Fn.unshift(t.target),Fn=Fn.filter(n=>n!=null&&n.isConnected),Fn.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function ty(e){let t=e.parentElement,n=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(n=t),t=t.parentElement;let r=(t==null?void 0:t.getAttribute("disabled"))==="";return r&&ny(n)?!1:r}function ny(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}var wp=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(wp||{});function jp(e,t,n,r){let a=Vl(n);i.useEffect(()=>{e=e??window;function l(o){a.current(o)}return e.addEventListener(t,l,r),()=>e.removeEventListener(t,l,r)},[e,t,r])}function Np(){let e=i.useRef(!1);return Ln(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function Sp(e){let t=wt(e),n=i.useRef(!1);i.useEffect(()=>(n.current=!1,()=>{n.current=!0,ql(()=>{n.current&&t()})}),[t])}var Pr=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Pr||{});function sy(){let e=i.useRef(0);return gp("keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function kp(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)n.current instanceof HTMLElement&&t.add(n.current);return t}let ry="div";var Cp=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(Cp||{});function ay(e,t){let n=i.useRef(null),r=$n(n,t),{initialFocus:a,containers:l,features:o=30,...c}=e;Ql()||(o=1);let u=da(n);iy({ownerDocument:u},!!(o&16));let d=cy({ownerDocument:u,container:n,initialFocus:a},!!(o&2));uy({ownerDocument:u,container:n,containers:l,previousActiveElement:d},!!(o&8));let p=sy(),f=wt(y=>{let S=n.current;S&&(x=>x())(()=>{es(p.current,{[Pr.Forwards]:()=>{Ja(S,us.First,{skipElements:[y.relatedTarget]})},[Pr.Backwards]:()=>{Ja(S,us.Last,{skipElements:[y.relatedTarget]})}})})}),g=Dg(),v=i.useRef(!1),b={ref:r,onKeyDown(y){y.key=="Tab"&&(v.current=!0,g.requestAnimationFrame(()=>{v.current=!1}))},onBlur(y){let S=kp(l);n.current instanceof HTMLElement&&S.add(n.current);let x=y.relatedTarget;x instanceof HTMLElement&&x.dataset.headlessuiFocusGuard!=="true"&&(Ep(S,x)||(v.current?Ja(n.current,es(p.current,{[Pr.Forwards]:()=>us.Next,[Pr.Backwards]:()=>us.Previous})|us.WrapAround,{relativeTo:y.target}):y.target instanceof HTMLElement&&ys(y.target)))}};return Ae.createElement(Ae.Fragment,null,!!(o&4)&&Ae.createElement(Gi,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:f,features:jl.Focusable}),hn({ourProps:b,theirProps:c,defaultTag:ry,name:"FocusTrap"}),!!(o&4)&&Ae.createElement(Gi,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:f,features:jl.Focusable}))}let ly=xn(ay),vr=Object.assign(ly,{features:Cp});function oy(e=!0){let t=i.useRef(Fn.slice());return qc(([n],[r])=>{r===!0&&n===!1&&ql(()=>{t.current.splice(0)}),r===!1&&n===!0&&(t.current=Fn.slice())},[e,Fn,t]),wt(()=>{var n;return(n=t.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function iy({ownerDocument:e},t){let n=oy(t);qc(()=>{t||(e==null?void 0:e.activeElement)===(e==null?void 0:e.body)&&ys(n())},[t]),Sp(()=>{t&&ys(n())})}function cy({ownerDocument:e,container:t,initialFocus:n},r){let a=i.useRef(null),l=Np();return qc(()=>{if(!r)return;let o=t.current;o&&ql(()=>{if(!l.current)return;let c=e==null?void 0:e.activeElement;if(n!=null&&n.current){if((n==null?void 0:n.current)===c){a.current=c;return}}else if(o.contains(c)){a.current=c;return}n!=null&&n.current?ys(n.current):Ja(o,us.First)===pp.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),a.current=e==null?void 0:e.activeElement})},[r]),a}function uy({ownerDocument:e,container:t,containers:n,previousActiveElement:r},a){let l=Np();jp(e==null?void 0:e.defaultView,"focus",o=>{if(!a||!l.current)return;let c=kp(n);t.current instanceof HTMLElement&&c.add(t.current);let u=r.current;if(!u)return;let d=o.target;d&&d instanceof HTMLElement?Ep(c,d)?(r.current=d,ys(d)):(o.preventDefault(),o.stopPropagation(),ys(u)):ys(r.current)},!0)}function Ep(e,t){for(let n of e)if(n.contains(t))return!0;return!1}let Pp=i.createContext(!1);function dy(){return i.useContext(Pp)}function Wi(e){return Ae.createElement(Pp.Provider,{value:e.force},e.children)}function my(e){let t=dy(),n=i.useContext(Tp),r=da(e),[a,l]=i.useState(()=>{if(!t&&n!==null||Cn.isServer)return null;let o=r==null?void 0:r.getElementById("headlessui-portal-root");if(o)return o;if(r===null)return null;let c=r.createElement("div");return c.setAttribute("id","headlessui-portal-root"),r.body.appendChild(c)});return i.useEffect(()=>{a!==null&&(r!=null&&r.body.contains(a)||r==null||r.body.appendChild(a))},[a,r]),i.useEffect(()=>{t||n!==null&&l(n.current)},[n,l,t]),a}let fy=i.Fragment;function py(e,t){let n=e,r=i.useRef(null),a=$n(qg(p=>{r.current=p}),t),l=da(r),o=my(r),[c]=i.useState(()=>{var p;return Cn.isServer?null:(p=l==null?void 0:l.createElement("div"))!=null?p:null}),u=i.useContext(Hi),d=Ql();return Ln(()=>{!o||!c||o.contains(c)||(c.setAttribute("data-headlessui-portal",""),o.appendChild(c))},[o,c]),Ln(()=>{if(c&&u)return u.register(c)},[u,c]),Sp(()=>{var p;!o||!c||(c instanceof Node&&o.contains(c)&&o.removeChild(c),o.childNodes.length<=0&&((p=o.parentElement)==null||p.removeChild(o)))}),d?!o||!c?null:Xf.createPortal(hn({ourProps:{ref:a},theirProps:n,defaultTag:fy,name:"Portal"}),c):null}let hy=i.Fragment,Tp=i.createContext(null);function xy(e,t){let{target:n,...r}=e,a={ref:$n(t)};return Ae.createElement(Tp.Provider,{value:n},hn({ourProps:a,theirProps:r,defaultTag:hy,name:"Popover.Group"}))}let Hi=i.createContext(null);function gy(){let e=i.useContext(Hi),t=i.useRef([]),n=wt(l=>(t.current.push(l),e&&e.register(l),()=>r(l))),r=wt(l=>{let o=t.current.indexOf(l);o!==-1&&t.current.splice(o,1),e&&e.unregister(l)}),a=i.useMemo(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,i.useMemo(()=>function({children:l}){return Ae.createElement(Hi.Provider,{value:a},l)},[a])]}let yy=xn(py),vy=xn(xy),Ki=Object.assign(yy,{Group:vy});function by(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}const wy=typeof Object.is=="function"?Object.is:by,{useState:jy,useEffect:Ny,useLayoutEffect:Sy,useDebugValue:ky}=Vs;function Cy(e,t,n){const r=t(),[{inst:a},l]=jy({inst:{value:r,getSnapshot:t}});return Sy(()=>{a.value=r,a.getSnapshot=t,Po(a)&&l({inst:a})},[e,r,t]),Ny(()=>(Po(a)&&l({inst:a}),e(()=>{Po(a)&&l({inst:a})})),[e]),ky(r),r}function Po(e){const t=e.getSnapshot,n=e.value;try{const r=t();return!wy(n,r)}catch{return!0}}function Ey(e,t,n){return t()}const Py=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ty=!Py,Ry=Ty?Ey:Cy,Ly="useSyncExternalStore"in Vs?(e=>e.useSyncExternalStore)(Vs):Ry;function Ay(e){return Ly(e.subscribe,e.getSnapshot,e.getSnapshot)}function $y(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(a){return r.add(a),()=>r.delete(a)},dispatch(a,...l){let o=t[a].call(n,...l);o&&(n=o,r.forEach(c=>c()))}}}function Iy(){let e;return{before({doc:t}){var n;let r=t.documentElement;e=((n=t.defaultView)!=null?n:window).innerWidth-r.clientWidth},after({doc:t,d:n}){let r=t.documentElement,a=r.clientWidth-r.offsetWidth,l=e-a;n.style(r,"paddingRight",`${l}px`)}}}function Uy(){return xp()?{before({doc:e,d:t,meta:n}){function r(a){return n.containers.flatMap(l=>l()).some(l=>l.contains(a))}t.microTask(()=>{var a;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let c=Jl();c.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>c.dispose()))}let l=(a=window.scrollY)!=null?a:window.pageYOffset,o=null;t.addEventListener(e,"click",c=>{if(c.target instanceof HTMLElement)try{let u=c.target.closest("a");if(!u)return;let{hash:d}=new URL(u.href),p=e.querySelector(d);p&&!r(p)&&(o=p)}catch{}},!0),t.addEventListener(e,"touchstart",c=>{if(c.target instanceof HTMLElement)if(r(c.target)){let u=c.target;for(;u.parentElement&&r(u.parentElement);)u=u.parentElement;t.style(u,"overscrollBehavior","contain")}else t.style(c.target,"touchAction","none")}),t.addEventListener(e,"touchmove",c=>{if(c.target instanceof HTMLElement)if(r(c.target)){let u=c.target;for(;u.parentElement&&u.dataset.headlessuiPortal!==""&&!(u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth);)u=u.parentElement;u.dataset.headlessuiPortal===""&&c.preventDefault()}else c.preventDefault()},{passive:!1}),t.add(()=>{var c;let u=(c=window.scrollY)!=null?c:window.pageYOffset;l!==u&&window.scrollTo(0,l),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function Dy(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function My(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let ps=$y(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:Jl(),meta:new Set};return r.count++,r.meta.add(t),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let r={doc:e,d:t,meta:My(n)},a=[Uy(),Iy(),Dy()];a.forEach(({before:l})=>l==null?void 0:l(r)),a.forEach(({after:l})=>l==null?void 0:l(r))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});ps.subscribe(()=>{let e=ps.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",a=n.count!==0;(a&&!r||!a&&r)&&ps.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&ps.dispatch("TEARDOWN",n)}});function Oy(e,t,n){let r=Ay(ps),a=e?r.get(e):void 0,l=a?a.count>0:!1;return Ln(()=>{if(!(!e||!t))return ps.dispatch("PUSH",e,n),()=>ps.dispatch("POP",e,n)},[t,e]),l}let To=new Map,br=new Map;function vd(e,t=!0){Ln(()=>{var n;if(!t)return;let r=typeof e=="function"?e():e.current;if(!r)return;function a(){var o;if(!r)return;let c=(o=br.get(r))!=null?o:1;if(c===1?br.delete(r):br.set(r,c-1),c!==1)return;let u=To.get(r);u&&(u["aria-hidden"]===null?r.removeAttribute("aria-hidden"):r.setAttribute("aria-hidden",u["aria-hidden"]),r.inert=u.inert,To.delete(r))}let l=(n=br.get(r))!=null?n:0;return br.set(r,l+1),l!==0||(To.set(r,{"aria-hidden":r.getAttribute("aria-hidden"),inert:r.inert}),r.setAttribute("aria-hidden","true"),r.inert=!0),a},[e,t])}function Fy({defaultContainers:e=[],portals:t,mainTreeNodeRef:n}={}){var r;let a=i.useRef((r=n==null?void 0:n.current)!=null?r:null),l=da(a),o=wt(()=>{var c,u,d;let p=[];for(let f of e)f!==null&&(f instanceof HTMLElement?p.push(f):"current"in f&&f.current instanceof HTMLElement&&p.push(f.current));if(t!=null&&t.current)for(let f of t.current)p.push(f);for(let f of(c=l==null?void 0:l.querySelectorAll("html > *, body > *"))!=null?c:[])f!==document.body&&f!==document.head&&f instanceof HTMLElement&&f.id!=="headlessui-portal-root"&&(f.contains(a.current)||f.contains((d=(u=a.current)==null?void 0:u.getRootNode())==null?void 0:d.host)||p.some(g=>f.contains(g))||p.push(f));return p});return{resolveContainers:o,contains:wt(c=>o().some(u=>u.contains(c))),mainTreeNodeRef:a,MainTreeNode:i.useMemo(()=>function(){return n!=null?null:Ae.createElement(Gi,{features:jl.Hidden,ref:a})},[a,n])}}let Jc=i.createContext(()=>{});Jc.displayName="StackContext";var Vi=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(Vi||{});function _y(){return i.useContext(Jc)}function By({children:e,onUpdate:t,type:n,element:r,enabled:a}){let l=_y(),o=wt((...c)=>{t==null||t(...c),l(...c)});return Ln(()=>{let c=a===void 0||a===!0;return c&&o(0,n,r),()=>{c&&o(1,n,r)}},[o,n,r,a]),Ae.createElement(Jc.Provider,{value:o},e)}let Rp=i.createContext(null);function Lp(){let e=i.useContext(Rp);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Lp),t}return e}function zy(){let[e,t]=i.useState([]);return[e.length>0?e.join(" "):void 0,i.useMemo(()=>function(n){let r=wt(l=>(t(o=>[...o,l]),()=>t(o=>{let c=o.slice(),u=c.indexOf(l);return u!==-1&&c.splice(u,1),c}))),a=i.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props}),[r,n.slot,n.name,n.props]);return Ae.createElement(Rp.Provider,{value:a},n.children)},[t])]}let Gy="p";function Wy(e,t){let n=cr(),{id:r=`headlessui-description-${n}`,...a}=e,l=Lp(),o=$n(t);Ln(()=>l.register(r),[r,l.register]);let c={ref:o,...l.props,id:r};return hn({ourProps:c,theirProps:a,slot:l.slot||{},defaultTag:Gy,name:l.name||"Description"})}let Hy=xn(Wy),Ky=Object.assign(Hy,{});var Vy=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Vy||{}),qy=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(qy||{});let Jy={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},Nl=i.createContext(null);Nl.displayName="DialogContext";function ma(e){let t=i.useContext(Nl);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ma),n}return t}function Qy(e,t,n=()=>[document.body]){Oy(e,t,r=>{var a;return{containers:[...(a=r.containers)!=null?a:[],n]}})}function Yy(e,t){return es(t.type,Jy,e,t)}let Zy="div",Xy=zi.RenderStrategy|zi.Static;function ev(e,t){let n=cr(),{id:r=`headlessui-dialog-${n}`,open:a,onClose:l,initialFocus:o,role:c="dialog",__demoMode:u=!1,...d}=e,[p,f]=i.useState(0),g=i.useRef(!1);c=function(){return c==="dialog"||c==="alertdialog"?c:(g.current||(g.current=!0,console.warn(`Invalid role [${c}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let v=Xg();a===void 0&&v!==null&&(a=(v&Er.Open)===Er.Open);let b=i.useRef(null),y=$n(b,t),S=da(b),x=e.hasOwnProperty("open")||v!==null,h=e.hasOwnProperty("onClose");if(!x&&!h)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!x)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!h)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(typeof a!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${a}`);if(typeof l!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${l}`);let m=a?0:1,[k,C]=i.useReducer(Yy,{titleId:null,descriptionId:null,panelRef:i.createRef()}),P=wt(()=>l(!1)),I=wt(w=>C({type:0,id:w})),$=Ql()?u?!1:m===0:!1,K=p>1,F=i.useContext(Nl)!==null,[q,G]=gy(),re={get current(){var w;return(w=k.panelRef.current)!=null?w:b.current}},{resolveContainers:J,mainTreeNodeRef:V,MainTreeNode:oe}=Fy({portals:q,defaultContainers:[re]}),fe=K?"parent":"leaf",j=v!==null?(v&Er.Closing)===Er.Closing:!1,E=F||j?!1:$,U=i.useCallback(()=>{var w,T;return(T=Array.from((w=S==null?void 0:S.querySelectorAll("body > *"))!=null?w:[]).find(z=>z.id==="headlessui-portal-root"?!1:z.contains(V.current)&&z instanceof HTMLElement))!=null?T:null},[V]);vd(U,E);let B=K?!0:$,N=i.useCallback(()=>{var w,T;return(T=Array.from((w=S==null?void 0:S.querySelectorAll("[data-headlessui-portal]"))!=null?w:[]).find(z=>z.contains(V.current)&&z instanceof HTMLElement))!=null?T:null},[V]);vd(N,B),Vg(J,w=>{w.preventDefault(),P()},!(!$||K));let ne=!(K||m!==0);jp(S==null?void 0:S.defaultView,"keydown",w=>{ne&&(w.defaultPrevented||w.key===wp.Escape&&(w.preventDefault(),w.stopPropagation(),P()))}),Qy(S,!(j||m!==0||F),J),i.useEffect(()=>{if(m!==0||!b.current)return;let w=new ResizeObserver(T=>{for(let z of T){let Y=z.target.getBoundingClientRect();Y.x===0&&Y.y===0&&Y.width===0&&Y.height===0&&P()}});return w.observe(b.current),()=>w.disconnect()},[m,b,P]);let[W,A]=zy(),D=i.useMemo(()=>[{dialogState:m,close:P,setTitleId:I},k],[m,k,P,I]),M=i.useMemo(()=>({open:m===0}),[m]),ee={ref:y,id:r,role:c,"aria-modal":m===0?!0:void 0,"aria-labelledby":k.titleId,"aria-describedby":W};return Ae.createElement(By,{type:"Dialog",enabled:m===0,element:b,onUpdate:wt((w,T)=>{T==="Dialog"&&es(w,{[Vi.Add]:()=>f(z=>z+1),[Vi.Remove]:()=>f(z=>z-1)})})},Ae.createElement(Wi,{force:!0},Ae.createElement(Ki,null,Ae.createElement(Nl.Provider,{value:D},Ae.createElement(Ki.Group,{target:b},Ae.createElement(Wi,{force:!1},Ae.createElement(A,{slot:M,name:"Dialog.Description"},Ae.createElement(vr,{initialFocus:o,containers:J,features:$?es(fe,{parent:vr.features.RestoreFocus,leaf:vr.features.All&~vr.features.FocusLock}):vr.features.None},Ae.createElement(G,null,hn({ourProps:ee,theirProps:d,slot:M,defaultTag:Zy,features:Xy,visible:m===0,name:"Dialog"}))))))))),Ae.createElement(oe,null))}let tv="div";function nv(e,t){let n=cr(),{id:r=`headlessui-dialog-overlay-${n}`,...a}=e,[{dialogState:l,close:o}]=ma("Dialog.Overlay"),c=$n(t),u=wt(p=>{if(p.target===p.currentTarget){if(ty(p.currentTarget))return p.preventDefault();p.preventDefault(),p.stopPropagation(),o()}}),d=i.useMemo(()=>({open:l===0}),[l]);return hn({ourProps:{ref:c,id:r,"aria-hidden":!0,onClick:u},theirProps:a,slot:d,defaultTag:tv,name:"Dialog.Overlay"})}let sv="div";function rv(e,t){let n=cr(),{id:r=`headlessui-dialog-backdrop-${n}`,...a}=e,[{dialogState:l},o]=ma("Dialog.Backdrop"),c=$n(t);i.useEffect(()=>{if(o.panelRef.current===null)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")},[o.panelRef]);let u=i.useMemo(()=>({open:l===0}),[l]);return Ae.createElement(Wi,{force:!0},Ae.createElement(Ki,null,hn({ourProps:{ref:c,id:r,"aria-hidden":!0},theirProps:a,slot:u,defaultTag:sv,name:"Dialog.Backdrop"})))}let av="div";function lv(e,t){let n=cr(),{id:r=`headlessui-dialog-panel-${n}`,...a}=e,[{dialogState:l},o]=ma("Dialog.Panel"),c=$n(t,o.panelRef),u=i.useMemo(()=>({open:l===0}),[l]),d=wt(p=>{p.stopPropagation()});return hn({ourProps:{ref:c,id:r,onClick:d},theirProps:a,slot:u,defaultTag:av,name:"Dialog.Panel"})}let ov="h2";function iv(e,t){let n=cr(),{id:r=`headlessui-dialog-title-${n}`,...a}=e,[{dialogState:l,setTitleId:o}]=ma("Dialog.Title"),c=$n(t);i.useEffect(()=>(o(r),()=>o(null)),[r,o]);let u=i.useMemo(()=>({open:l===0}),[l]);return hn({ourProps:{ref:c,id:r},theirProps:a,slot:u,defaultTag:ov,name:"Dialog.Title"})}let cv=xn(ev),uv=xn(rv),dv=xn(lv),mv=xn(nv),fv=xn(iv),pn=Object.assign(cv,{Backdrop:uv,Panel:dv,Overlay:mv,Title:fv,Description:Ky});const qi="funkedupshift_impersonation",Ap=i.createContext(void 0);function Aa(){try{const e=sessionStorage.getItem(qi);if(!e)return null;const t=JSON.parse(e);if(t!=null&&t.type&&(t!=null&&t.id))return t}catch{}return null}function bd(e){try{e?sessionStorage.setItem(qi,JSON.stringify(e)):sessionStorage.removeItem(qi)}catch{}}const pv=({children:e})=>{const[t,n]=i.useState(Aa);i.useEffect(()=>{const c=Aa();n(c)},[]);const r=i.useCallback(c=>{n(c),bd(c)},[]),a=i.useCallback(()=>{n(null),bd(null)},[]),l=i.useCallback(()=>{const c=t??Aa();return c?c.type==="user"?{"X-Impersonate-User":c.id}:{"X-Impersonate-Role":c.id}:{}},[t]),o={impersonation:t??Aa(),setImpersonation:r,clearImpersonation:a,getImpersonationHeaders:l};return s.jsx(Ap.Provider,{value:o,children:e})};function Qc(){const e=i.useContext(Ap);return e||{impersonation:null,setImpersonation:()=>{},clearImpersonation:()=>{},getImpersonationHeaders:()=>({})}}const $p=i.createContext(void 0);function hv(e){return e.includes("admin")?"superadmin":e.includes("manager")?"manager":e.includes("user")?"user":"guest"}function wd(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const xv=({children:e})=>{const[t,n]=i.useState(null),[r,a]=i.useState(!0),{getImpersonationHeaders:l}=Qc(),o=Ae.useCallback(async()=>{const d=wd();if(!d){a(!1);return}try{const p=window;if(!p.auth||typeof p.auth.getAccessToken!="function"){a(!1);return}await new Promise(x=>{p.auth.isAuthenticated(h=>{if(!h){n(null),a(!1),x();return}x()})});const f=await new Promise(x=>{window.auth.getAccessToken(h=>x(h))});if(!f){n(null),a(!1);return}const g=await fetch(`${d}/me`,{headers:{Authorization:`Bearer ${f}`,...l()}});if(!g.ok){n(null),a(!1);return}const v=await g.json(),b=Array.isArray(v.groups)?v.groups.map(String):[],y=hv(b),S=Array.isArray(v.customGroups)?v.customGroups.map(String):[];n({userId:String(v.userId||""),email:String(v.email||""),groups:b,role:y,customGroups:S,impersonated:!!v.impersonated,impersonatedAs:v.impersonatedAs})}catch{n(null)}finally{a(!1)}},[l]);i.useEffect(()=>{o()},[o]);const c=Ae.useCallback(async()=>{wd()&&await o()},[o]),u=()=>{const d=window;d.auth&&typeof d.auth.signOut=="function"&&d.auth.signOut(),n(null)};return s.jsx($p.Provider,{value:{user:t,isLoading:r,signOut:u,refreshAuth:c},children:e})};function Oe(){const e=i.useContext($p);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}function ct(e,t){if(t==="guest")return!0;if(!e)return!1;const n=["guest","user","manager","superadmin"];return n.indexOf(e.role)>=n.indexOf(t)}function Sl(e){return e!=null&&e.userId?e.role==="superadmin"?!0:(e.customGroups??[]).includes("Squash"):!1}function kl(e){return e!=null&&e.userId?e.role==="superadmin"?!0:e.role!=="manager"?!1:(e.customGroups??[]).includes("Squash"):!1}function gv(e){return!0}function yv(e){return e!=null&&e.userId?e.role==="user"||e.role==="manager"||e.role==="superadmin":!1}function Cl(e){return e!=null&&e.userId?e.role==="superadmin":!1}function sa(e){return e!=null&&e.userId?e.role==="superadmin"?!0:(e.customGroups??[]).includes("Memes"):!1}function Ip(e){return e!=null&&e.userId?e.role==="superadmin"?!0:(e.customGroups??[]).includes("Memes"):!1}function nr(e){return e!=null&&e.userId?e.role==="superadmin"?!0:e.role==="guest"?!1:(e.customGroups??[]).includes("Memes"):!1}function Yc(e){return e!=null&&e.userId?e.role==="superadmin"?!0:e.role!=="manager"?!1:(e.customGroups??[]).includes("Memes"):!1}function Up(){try{const e=sessionStorage.getItem("funkedupshift_impersonation");if(!e)return{};const t=JSON.parse(e);if((t==null?void 0:t.type)==="user"&&(t!=null&&t.id))return{"X-Impersonate-User":t.id};if((t==null?void 0:t.type)==="role"&&(t!=null&&t.id))return{"X-Impersonate-Role":t.id}}catch{}return{}}async function Q(e,t){var l;const n=window;if(!((l=n.auth)!=null&&l.getAccessToken))throw new Error("Not signed in");const r=await new Promise(o=>n.auth.getAccessToken(o)),a={...t==null?void 0:t.headers,Authorization:`Bearer ${r}`,...Up()};return fetch(e,{...t,headers:a})}async function ut(e,t){var l;const n=window;if(!((l=n.auth)!=null&&l.getAccessToken))return fetch(e,t);const r=await new Promise(o=>n.auth.getAccessToken(o));if(!r)return fetch(e,t);const a={...t==null?void 0:t.headers,Authorization:`Bearer ${r}`,...Up()};return fetch(e,{...t,headers:a})}const Dp=i.createContext(void 0);function vv(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const bv=({children:e})=>{const[t,n]=i.useState(null);return i.useEffect(()=>{const r=vv();if(!r)return;let a=!1;return(async()=>{try{const l=await ut(`${r}/branding/logo`);if(!l.ok||!(l.headers.get("Content-Type")||"").includes("application/json"))return;const c=await l.json();if(a)return;c&&c.url&&n({url:String(c.url),alt:String(c.alt||"Funkedupshift")})}catch{}})(),()=>{a=!0}},[]),s.jsx(Dp.Provider,{value:{logo:t},children:e})};function Mp(){const e=i.useContext(Dp);if(!e)throw new Error("useBranding must be used within BrandingProvider");return e}const wv=()=>{const{impersonation:e,clearImpersonation:t}=Qc(),{user:n,refreshAuth:r}=Oe();if(!e)return null;const a=n!=null&&n.impersonated?n.impersonatedAs||n.email:e.label,l=()=>{t(),r()};return s.jsxs("div",{className:"sticky top-0 z-50 flex items-center justify-between gap-4 bg-amber-600 px-4 py-2 text-sm font-medium text-amber-950 shadow-md",children:[s.jsxs("span",{children:["Viewing as: ",s.jsx("strong",{children:a||e.id})]}),s.jsxs("button",{type:"button",onClick:l,className:"flex items-center gap-1 rounded-md px-2 py-1 font-semibold hover:bg-amber-500/50","aria-label":"Stop impersonating",children:[s.jsx(Kl,{className:"h-4 w-4"}),"Stop impersonating"]})]})};function jv(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Nv=()=>{const{user:e,refreshAuth:t}=Oe(),{impersonation:n,setImpersonation:r,clearImpersonation:a}=Qc(),[l,o]=i.useState(!1),[c,u]=i.useState([]),[d,p]=i.useState([]),[f,g]=i.useState(!1),[v,b]=i.useState(null),y=jv();if(i.useEffect(()=>{var C;if(!l||!y||!((C=window.auth)!=null&&C.getAccessToken))return;g(!0),b(null),(async()=>{try{const[P,I]=await Promise.all([Q(`${y}/admin/users?limit=100`),Q(`${y}/admin/roles`)]),$=P.ok?await P.json():null,K=I.ok?await I.json():null;if(!P.ok)throw new Error("Failed to load users");if(!I.ok)throw new Error("Failed to load roles");u(($==null?void 0:$.users)??[]),p((K==null?void 0:K.roles)??[])}catch(P){b((P==null?void 0:P.message)??"Failed to load")}finally{g(!1)}})()},[l,y]),(e==null?void 0:e.role)!=="superadmin")return null;const S=m=>{r({type:"user",id:m.username,label:m.email||m.username}),o(!1),t()},x=m=>{r({type:"role",id:m.name,label:m.name}),o(!1),t()},h=()=>{a(),o(!1),t()};return s.jsxs(s.Fragment,{children:[s.jsxs("button",{type:"button",onClick:()=>o(!0),className:"flex items-center gap-1.5 rounded-md px-2 py-1.5 text-xs font-medium text-amber-200 hover:bg-amber-500/20",title:"Impersonate user or role",children:[s.jsx(Lg,{className:"h-4 w-4"}),n?"Change":"Impersonate"]}),s.jsxs(pn,{open:l,onClose:()=>o(!1),className:"relative z-50",children:[s.jsx("div",{className:"fixed inset-0 bg-black/60","aria-hidden":"true"}),s.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:s.jsxs(pn.Panel,{className:"mx-auto max-h-[80vh] w-full max-w-md overflow-y-auto rounded-xl border border-slate-700 bg-slate-900 p-4 shadow-xl",children:[s.jsx(pn.Title,{className:"text-lg font-semibold text-slate-100",children:"User impersonation"}),s.jsx("p",{className:"mt-1 text-sm text-slate-400",children:"View the site as another user or a defined role."}),v&&s.jsx("div",{className:"mt-2 rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:v}),f?s.jsx("p",{className:"mt-4 text-sm text-slate-500",children:"Loading"}):s.jsxs("div",{className:"mt-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-300",children:"Users"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Superadmins cannot be impersonated."}),s.jsxs("ul",{className:"mt-2 max-h-40 overflow-y-auto space-y-1",children:[c.map(m=>s.jsx("li",{children:s.jsx("button",{type:"button",onClick:()=>S(m),className:"w-full rounded-md px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:m.email||m.username})},m.username)),c.length===0&&s.jsx("li",{className:"px-3 py-2 text-sm text-slate-500",children:"No users"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-300",children:"Roles"}),s.jsxs("ul",{className:"mt-2 max-h-40 overflow-y-auto space-y-1",children:[d.map(m=>s.jsx("li",{children:s.jsx("button",{type:"button",onClick:()=>x(m),className:"w-full rounded-md px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:m.name})},m.name)),d.length===0&&s.jsx("li",{className:"px-3 py-2 text-sm text-slate-500",children:"No roles defined"})]})]}),n&&s.jsx("button",{type:"button",onClick:h,className:"rounded-md border border-slate-600 px-3 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Stop impersonating"})]})]})})]})]})},Sv=()=>{const{user:e}=Oe(),t=Sl(e),n=sa(e);return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("section",{className:"relative overflow-hidden rounded-2xl border border-slate-800 bg-gradient-to-br from-brand-orange/20 via-brand-navy/10 to-brand-teal/20 px-6 py-10",children:[s.jsxs("div",{className:"max-w-xl space-y-4",children:[s.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-slate-200",children:"Shared internet intelligence"}),s.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold tracking-tight text-slate-50",children:"Discover, rate, and enrich the sites that matter."}),s.jsx("p",{className:"text-sm text-slate-100/80",children:"Funkedupshift is a living index of websites, media, and experiments  curated by admins, enriched by everyone."}),s.jsxs("div",{className:"flex flex-wrap gap-3 pt-2",children:[s.jsx(ie,{to:"/websites",className:"inline-flex items-center rounded-full border border-slate-500/60 px-4 py-2 text-sm font-semibold text-slate-100 hover:border-slate-300/80",children:"Browse websites"}),s.jsx(ie,{to:"/media",className:"inline-flex items-center rounded-full border border-slate-500/60 px-4 py-2 text-sm font-semibold text-slate-100 hover:border-slate-300/80",children:"Explore media"}),s.jsx(ie,{to:"/internet-dashboard",className:"inline-flex items-center rounded-full border border-slate-500/60 px-4 py-2 text-sm font-semibold text-slate-100 hover:border-slate-300/80",children:"Internet Dashboard"}),t&&s.jsx(ie,{to:"/squash",className:"inline-flex items-center rounded-full border border-slate-500/60 px-4 py-2 text-sm font-semibold text-slate-100 hover:border-slate-300/80",children:"Squash"}),n&&s.jsx(ie,{to:"/memes",className:"inline-flex items-center rounded-full border border-slate-500/60 px-4 py-2 text-sm font-semibold text-slate-100 hover:border-slate-300/80",children:"Memes"})]})]}),s.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 w-1/2 opacity-60",children:s.jsx("div",{className:"absolute -inset-24 bg-[radial-gradient(circle_at_top,_#f97316_0,_transparent_55%),radial-gradient(circle_at_bottom,_#06d6a0_0,_transparent_55%)]"})})]}),s.jsxs("section",{className:"grid gap-4 sm:grid-cols-3",children:[s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.22em] text-slate-500 mb-2",children:"Everyone"}),s.jsx("p",{className:"text-sm text-slate-200",children:"Browse all sites and media without signing in. Ratings and metadata are public by design."})]}),s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.22em] text-slate-500 mb-2",children:"Users"}),s.jsx("p",{className:"text-sm text-slate-200",children:"Sign in to rate sites, add notes, and personalize your view of the internet."})]}),s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.22em] text-slate-500 mb-2",children:"Admins"}),s.jsx("p",{className:"text-sm text-slate-200",children:"Curate the corpus, manage categories and groups, and control branding from a single admin surface."})]})]})]})};function Ro(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Lo=10,kv=()=>{const{user:e}=Oe(),[t,n]=qt(),[r,a]=i.useState([]),[l,o]=i.useState(()=>t.get("q")??""),[c,u]=i.useState(()=>{const j=t.get("categoryIds");return j?j.split(",").filter(Boolean):[]}),[d,p]=i.useState(()=>t.get("categoryMode")==="or"?"or":"and"),[f,g]=i.useState(!1),[v,b]=i.useState(""),[y,S]=i.useState("avgDesc"),[x,h]=i.useState(1),[m,k]=i.useState(!1),[C,P]=i.useState(null),I=!!e,$=i.useRef(null),[K,F]=i.useState([]);i.useEffect(()=>{const j=Ro();if(!j)return;let E=!1;return ut(`${j}/categories`).then(U=>U.ok?U.json():Promise.reject(new Error("Failed to load categories"))).then(U=>{if(E)return;const B=(U.categories??[]).map(N=>({id:N.PK||N.id||"",name:N.name||N.PK||""}));B.sort((N,H)=>(N.name||"").localeCompare(H.name||"")),F(B)}).catch(()=>{}),()=>{E=!0}},[]);const q=i.useMemo(()=>{if(d==="or"&&K.length>0)return K;const j=new Map;r.forEach(U=>(U.categories||[]).forEach(B=>{B.id&&!j.has(B.id)&&j.set(B.id,B)}));const E=[...K];return j.forEach(U=>{E.some(B=>B.id===U.id)||E.push(U)}),E.sort((U,B)=>(U.name||"").localeCompare(B.name||"")),E},[K,d,r]),G=i.useMemo(()=>q.filter(j=>!c.includes(j.id)&&(!v.trim()||(j.name||"").toLowerCase().includes(v.toLowerCase()))),[q,c,v]),re=l.trim().length>0||c.length>0;i.useEffect(()=>{if(re){const j=new URLSearchParams;l.trim()&&j.set("q",l.trim()),c.length&&(j.set("categoryIds",c.join(",")),j.set("categoryMode",d)),n(j,{replace:!0})}else n({},{replace:!0})},[re,l,c,d,n]),i.useEffect(()=>{if(!re){a([]),h(1),k(!1),P(null);return}const j=Ro();if(!j){P("API URL not set. Deploy via CI or set window.API_BASE_URL in config.js.");return}let E=!1;async function U(){k(!0),P(null);try{const B=new URLSearchParams;B.set("limit","100"),l.trim()&&B.set("q",l.trim()),c.length>0&&(B.set("categoryIds",c.join(",")),B.set("categoryMode",d));const N=await ut(`${j}/sites?${B.toString()}`);if(!N.ok){const ne=await N.text();throw new Error(`HTTP ${N.status}: ${ne}`)}const H=await N.json();if(E)return;a(H.sites??[]),h(1)}catch(B){E||P((B==null?void 0:B.message)??"Failed to load sites.")}finally{E||k(!1)}}return U(),()=>{E=!0}},[re,l,c,d]),i.useEffect(()=>{function j(E){$.current&&!$.current.contains(E.target)&&g(!1)}if(f)return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[f]);const J=i.useMemo(()=>{const j=[...r];return j.sort((E,U)=>{const B=(E.title||E.url||E.PK||"").toLowerCase(),N=(U.title||U.url||U.PK||"").toLowerCase(),H=typeof E.averageRating=="number"?E.averageRating:0,ne=typeof U.averageRating=="number"?U.averageRating:0;return y==="avgDesc"?ne!==H?ne-H:B.localeCompare(N):y==="avgAsc"?H!==ne?H-ne:B.localeCompare(N):y==="alphaAsc"?B.localeCompare(N):y==="alphaDesc"?N.localeCompare(B):0}),j},[r,y]),V=Math.max(1,Math.ceil(J.length/Lo)),oe=J.slice((x-1)*Lo,x*Lo),fe=async(j,E)=>{const U=Ro();if(!U)return;const B=window;if(!B.auth||typeof B.auth.getAccessToken!="function")return;const N=await new Promise(H=>{B.auth.getAccessToken(ne=>H(ne))});N&&await ut(`${U}/stars`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${N}`},body:JSON.stringify({siteId:j,rating:E})}).catch(()=>{})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Websites"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Browse curated sites, see ratings, and jump straight into the interesting corners of the internet."})]}),s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-4","aria-label":"Search and filter",children:[s.jsxs("form",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",onSubmit:j=>{j.preventDefault(),o(l.trim())},children:[s.jsx("input",{type:"text",value:l,onChange:j=>o(j.target.value),placeholder:"Search sites (title, URL, description)",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("button",{type:"submit",className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500",children:"Search"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-4 sm:gap-6",children:[s.jsxs("div",{ref:$,className:"relative flex-shrink-0 min-w-0 max-w-sm",children:[s.jsx("label",{htmlFor:"website-category-filter",className:"block text-xs font-medium text-slate-400 mb-1",children:"Categories (filter by)"}),s.jsx("input",{id:"website-category-filter",type:"text",value:v,onChange:j=>b(j.target.value),onFocus:()=>g(!0),placeholder:"Search and select categories",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",autoComplete:"off"}),f&&s.jsx("div",{className:"absolute left-0 top-full z-10 mt-1 w-full max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",role:"listbox","aria-label":"Category options",children:G.length>0?G.map(j=>s.jsx("button",{type:"button",role:"option",onClick:()=>{u(E=>E.includes(j.id)?E:[...E,j.id]),b("")},className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:j.name},j.id)):s.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:q.length===0?"No categories yet.":"No matches or all selected."})}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:c.map(j=>{const E=q.find(U=>U.id===j);return s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(E==null?void 0:E.name)??j,s.jsx("button",{type:"button",onClick:()=>u(U=>U.filter(B=>B!==j)),className:"hover:text-red-400","aria-label":"Remove category filter",children:""})]},j)})}),c.length>0&&s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-slate-500",children:"Match:"}),s.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[s.jsx("button",{type:"button",onClick:()=>p("and"),className:`rounded px-2 py-0.5 text-xs font-medium ${d==="and"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"AND"}),s.jsx("button",{type:"button",onClick:()=>p("or"),className:`rounded px-2 py-0.5 text-xs font-medium ${d==="or"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"OR"})]})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-3 items-center text-xs text-slate-400",children:[s.jsx("span",{className:"font-medium text-slate-200",children:"Sort:"}),s.jsxs("select",{value:y,onChange:j=>{S(j.target.value),h(1)},className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",children:[s.jsx("option",{value:"avgDesc",children:"Avg stars (high first)"}),s.jsx("option",{value:"avgAsc",children:"Avg stars (low first)"}),s.jsx("option",{value:"alphaAsc",children:"Title AZ"}),s.jsx("option",{value:"alphaDesc",children:"Title ZA"})]}),s.jsx("span",{className:"text-slate-500",children:re?J.length===0?"No sites found.":`${J.length} sites`:""})]})]})]}),C&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:C}),re?m?s.jsx("div",{className:"text-sm text-slate-400",children:"Loading sites"}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"rounded-md border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm text-slate-400",children:J.length===0?"No results":`${J.length} results`}),s.jsx("ul",{className:"space-y-2 mt-2",children:oe.map(j=>{const E=j.title||j.url||j.PK||"Untitled",U=j.logoUrl;return s.jsxs("li",{className:"flex gap-3 rounded-xl border border-slate-800 bg-slate-950/60 p-3",children:[s.jsx("div",{className:"h-12 w-12 flex-shrink-0 overflow-hidden rounded-lg border border-slate-700 bg-slate-900",children:U?s.jsx("img",{src:U,alt:"",className:"h-full w-full object-cover",onError:B=>{B.currentTarget.style.visibility="hidden"}}):null}),s.jsxs("div",{className:"min-w-0 flex-1 space-y-1",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("h2",{className:"truncate text-sm font-semibold text-slate-50",children:s.jsx(ie,{to:`/websites/${encodeURIComponent(j.PK)}`,className:"hover:text-brand-orange",children:E})}),typeof j.averageRating=="number"&&s.jsxs("span",{className:"inline-flex items-center rounded-full bg-slate-900 px-2 py-0.5 text-[11px] text-amber-300",children:[j.averageRating.toFixed(1),""]})]}),j.url&&s.jsx("a",{href:j.url,target:"_blank",rel:"noopener noreferrer",className:"block truncate text-xs text-slate-400 hover:text-slate-200",children:j.url}),j.description&&s.jsxs("p",{className:"text-xs text-slate-300 line-clamp-3",children:[j.description,j.descriptionAiGenerated&&s.jsx("span",{className:"ml-1 text-[11px] uppercase tracking-wide text-slate-500",children:"AI summary"})]}),j.categories&&j.categories.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1 pt-1",children:j.categories.map(B=>s.jsx("span",{className:"rounded-full bg-slate-900 px-2 py-0.5 text-[11px] text-slate-300",children:B.name},B.id))}),I&&s.jsx("div",{className:"pt-1",children:s.jsxs("label",{className:"inline-flex items-center gap-1 text-[11px] text-slate-400",children:[s.jsx("span",{children:"Rate:"}),s.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-1 py-0.5 text-[11px] text-slate-50",onChange:B=>{const N=Number(B.target.value);N>=1&&N<=5&&fe(j.PK,N)},defaultValue:"",children:[s.jsx("option",{value:"",children:"--"}),s.jsx("option",{value:"1",children:"1"}),s.jsx("option",{value:"2",children:"2"}),s.jsx("option",{value:"3",children:"3"}),s.jsx("option",{value:"4",children:"4"}),s.jsx("option",{value:"5",children:"5"})]})]})})]})]},j.PK)})})]}):s.jsx("div",{className:"flex items-center justify-center min-h-[280px]",children:s.jsx("p",{className:"text-2xl sm:text-3xl font-light text-slate-500/80 tracking-wide animate-pulse",children:"Enter search term or select categories"})}),re&&V>1&&s.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-center gap-2 text-xs",children:[s.jsx("button",{type:"button",disabled:x<=1,onClick:()=>h(j=>Math.max(1,j-1)),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 disabled:opacity-40",children:"Prev"}),s.jsxs("span",{className:"text-slate-500",children:["Page ",x," of ",V]}),s.jsx("button",{type:"button",disabled:x>=V,onClick:()=>h(j=>Math.min(V,j+1)),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 disabled:opacity-40",children:"Next"})]})]})};function Ao(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Cv=()=>{var v,b;const{id:e}=ir(),{user:t}=Oe(),n=ct(t??null,"manager"),[r,a]=i.useState(null),[l,o]=i.useState(null),[c,u]=i.useState(!0),[d,p]=i.useState(null);i.useEffect(()=>{const y=Ao();if(!y||!e){p(e?"API URL not set.":"Missing site id."),u(!1);return}let S=!1;async function x(){u(!0),p(null);try{const h=new URLSearchParams;h.set("id",decodeURIComponent(e));const m=await ut(`${y}/sites?${h.toString()}`);if(m.status===404){S||a(null);return}if(!m.ok){const C=await m.text();throw new Error(`HTTP ${m.status}: ${C}`)}const k=await m.json();if(S)return;a(k.site??null)}catch(h){S||p((h==null?void 0:h.message)??"Failed to load site.")}finally{S||u(!1)}}return x(),()=>{S=!0}},[e]),i.useEffect(()=>{if(!t||!(r!=null&&r.PK))return;const y=Ao();if(!y)return;let S=!1;return(async()=>{try{const x=await Q(`${y}/stars?siteId=${encodeURIComponent(r.PK)}`);if(S)return;if(x.ok){const h=await x.json();o(typeof h.rating=="number"?h.rating:null)}}catch{}})(),()=>{S=!0}},[t,r==null?void 0:r.PK]);const f=async(y,S)=>{const x=Ao();if(x)try{await Q(`${x}/stars`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({siteId:y,rating:S})}),o(S)}catch{}};if(c)return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(ie,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Websites"]}),s.jsx("div",{className:"text-sm text-slate-400",children:"Loading"})]});if(d||!r)return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(ie,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Websites"]}),s.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:d||"Site not found."})]});const g=r.title||r.url||r.PK||"Untitled";return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsxs(ie,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Websites"]}),n&&r&&s.jsxs(ie,{to:`/admin/sites/edit/${encodeURIComponent(r.PK)}`,className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(ua,{className:"h-4 w-4"}),"Edit site"]})]}),s.jsxs("article",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 sm:p-6",children:[s.jsxs("header",{className:"flex flex-wrap gap-4",children:[s.jsx("div",{className:"h-16 w-16 flex-shrink-0 overflow-hidden rounded-lg border border-slate-700 bg-slate-900",children:r.logoUrl?s.jsx("img",{src:r.logoUrl,alt:"",className:"h-full w-full object-cover",onError:y=>{y.currentTarget.style.visibility="hidden"}}):null}),s.jsxs("div",{className:"min-w-0 flex-1 space-y-1",children:[s.jsx("h1",{className:"text-xl font-semibold tracking-tight text-slate-50",children:g}),typeof r.averageRating=="number"&&s.jsxs("span",{className:"inline-flex items-center rounded-full bg-slate-800 px-2 py-0.5 text-sm text-amber-300",children:[r.averageRating.toFixed(1)," average"]}),r.url&&s.jsx("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:"block truncate text-sm text-slate-400 hover:text-slate-200",children:r.url})]})]}),r.description&&s.jsx("div",{className:"mt-4",children:s.jsxs("p",{className:"text-sm text-slate-300",children:[r.description,r.descriptionAiGenerated&&s.jsx("span",{className:"ml-1 text-xs uppercase tracking-wide text-slate-500",children:"AI summary"})]})}),(((v=r.categories)==null?void 0:v.length)??0)>0&&s.jsx("div",{className:"mt-3 flex flex-wrap gap-1",children:r.categories.map(y=>s.jsx("span",{className:"rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-300",children:y.name},y.id))}),(((b=r.tags)==null?void 0:b.length)??0)>0&&s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:r.tags.map(y=>s.jsx("span",{className:"rounded-full bg-slate-900 px-2 py-0.5 text-xs text-slate-400",children:y},y))}),t&&s.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3",children:[l!==null&&s.jsxs("span",{className:"text-xs text-slate-400",children:["Your rating: ",l,""]}),s.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-400",children:[s.jsx("span",{children:"Rate:"}),s.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-2 py-1 text-sm text-slate-50",value:l??"",onChange:y=>{const S=Number(y.target.value);S>=1&&S<=5&&f(r.PK,S)},children:[s.jsx("option",{value:"",children:"--"}),s.jsx("option",{value:"1",children:"1"}),s.jsx("option",{value:"2",children:"2"}),s.jsx("option",{value:"3",children:"3"}),s.jsx("option",{value:"4",children:"4"}),s.jsx("option",{value:"5",children:"5"})]})]})]}),r.scrapedContent&&s.jsxs("section",{className:"mt-6 border-t border-slate-800 pt-4",children:[s.jsx("h2",{className:"text-sm font-medium text-slate-400",children:"About / Scraped content"}),s.jsx("div",{className:"mt-2 overflow-x-auto rounded-lg border border-slate-800 bg-slate-900/60 p-3",children:s.jsx("pre",{className:"whitespace-pre-wrap break-words font-sans text-sm text-slate-300",children:r.scrapedContent})})]})]})]})};function $o(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Io=10,Ev=()=>{const{user:e}=Oe(),[t,n]=qt(),[r,a]=i.useState([]),[l,o]=i.useState(()=>t.get("q")??""),[c,u]=i.useState(()=>{const E=t.get("categoryIds");return E?E.split(",").filter(Boolean):[]}),[d,p]=i.useState(()=>t.get("categoryMode")==="or"?"or":"and"),[f,g]=i.useState(!1),[v,b]=i.useState(""),[y,S]=i.useState("avgDesc"),[x,h]=i.useState(1),[m,k]=i.useState(!1),[C,P]=i.useState(null),I=!!e,$=ct(e??null,"manager"),K=i.useRef(null),[F,q]=i.useState([]);i.useEffect(()=>{const E=$o();if(!E)return;let U=!1;return ut(`${E}/media-categories`).then(B=>B.ok?B.json():Promise.reject(new Error("Failed to load categories"))).then(B=>{if(U)return;const N=(B.categories??[]).map(H=>({id:H.PK||H.id||"",name:H.name||H.PK||""}));N.sort((H,ne)=>(H.name||"").localeCompare(ne.name||"")),q(N)}).catch(()=>{}),()=>{U=!0}},[]);const G=i.useMemo(()=>{if(d==="or"&&F.length>0)return F;const E=new Map;r.forEach(B=>(B.categories||[]).forEach(N=>{N.id&&!E.has(N.id)&&E.set(N.id,N)}));const U=[...F];return E.forEach(B=>{U.some(N=>N.id===B.id)||U.push(B)}),U.sort((B,N)=>(B.name||"").localeCompare(N.name||"")),U},[F,d,r]),re=i.useMemo(()=>G.filter(E=>!c.includes(E.id)&&(!v.trim()||(E.name||"").toLowerCase().includes(v.toLowerCase()))),[G,c,v]),J=l.trim().length>0||c.length>0;i.useEffect(()=>{if(J){const E=new URLSearchParams;l.trim()&&E.set("q",l.trim()),c.length&&(E.set("categoryIds",c.join(",")),E.set("categoryMode",d)),n(E,{replace:!0})}else n({},{replace:!0})},[J,l,c,d,n]),i.useEffect(()=>{if(!J){a([]),h(1),k(!1),P(null);return}const E=$o();if(!E){P("API URL not set. Deploy via CI or set window.API_BASE_URL in config.js.");return}let U=!1;async function B(){k(!0),P(null);try{const N=new URLSearchParams;N.set("limit","100"),l.trim()&&N.set("q",l.trim()),c.length>0&&(N.set("categoryIds",c.join(",")),N.set("categoryMode",d));const H=await ut(`${E}/media?${N.toString()}`);if(!H.ok){const _=await H.text();throw new Error(`HTTP ${H.status}: ${_}`)}const ne=await H.json();if(U)return;a(ne.media??[]),h(1)}catch(N){U||P((N==null?void 0:N.message)??"Failed to load media.")}finally{U||k(!1)}}return B(),()=>{U=!0}},[J,l,c,d]),i.useEffect(()=>{function E(U){K.current&&!K.current.contains(U.target)&&g(!1)}if(f)return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[f]);const V=i.useMemo(()=>{const E=[...r];return E.sort((U,B)=>{const N=(U.title||U.PK||"").toLowerCase(),H=(B.title||B.PK||"").toLowerCase(),ne=typeof U.averageRating=="number"?U.averageRating:0,_=typeof B.averageRating=="number"?B.averageRating:0;return y==="avgDesc"?_!==ne?_-ne:N.localeCompare(H):y==="avgAsc"?ne!==_?ne-_:N.localeCompare(H):y==="alphaAsc"?N.localeCompare(H):y==="alphaDesc"?H.localeCompare(N):0}),E},[r,y]),oe=Math.max(1,Math.ceil(V.length/Io)),fe=V.slice((x-1)*Io,x*Io),j=async(E,U)=>{const B=$o();if(!B)return;const N=window;if(!N.auth||typeof N.auth.getAccessToken!="function")return;const H=await new Promise(ne=>{N.auth.getAccessToken(_=>ne(_))});H&&await ut(`${B}/media/stars`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${H}`},body:JSON.stringify({mediaId:E,rating:U})}).catch(()=>{})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Media"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Images and videos attached to sites and experiments across Funkedupshift."})]}),s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-4","aria-label":"Search and filter",children:[s.jsxs("form",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",onSubmit:E=>{E.preventDefault(),o(l.trim())},children:[s.jsx("input",{type:"text",value:l,onChange:E=>o(E.target.value),placeholder:"Search media by title or description",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("button",{type:"submit",className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500",children:"Search"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-4 sm:gap-6",children:[s.jsxs("div",{ref:K,className:"relative flex-shrink-0 min-w-0 max-w-sm",children:[s.jsx("label",{htmlFor:"media-category-filter",className:"block text-xs font-medium text-slate-400 mb-1",children:"Categories (filter by)"}),s.jsx("input",{id:"media-category-filter",type:"text",value:v,onChange:E=>b(E.target.value),onFocus:()=>g(!0),placeholder:"Search and select categories",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",autoComplete:"off"}),f&&s.jsx("div",{className:"absolute left-0 top-full z-10 mt-1 w-full max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",role:"listbox","aria-label":"Category options",children:re.length>0?re.map(E=>s.jsx("button",{type:"button",role:"option",onClick:()=>{u(U=>U.includes(E.id)?U:[...U,E.id]),b("")},className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:E.name},E.id)):s.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:G.length===0?"No categories yet.":"No matches or all selected."})}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:c.map(E=>{const U=G.find(B=>B.id===E);return s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(U==null?void 0:U.name)??E,s.jsx("button",{type:"button",onClick:()=>u(B=>B.filter(N=>N!==E)),className:"hover:text-red-400","aria-label":"Remove category filter",children:""})]},E)})}),c.length>0&&s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-slate-500",children:"Match:"}),s.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[s.jsx("button",{type:"button",onClick:()=>p("and"),className:`rounded px-2 py-0.5 text-xs font-medium ${d==="and"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"AND"}),s.jsx("button",{type:"button",onClick:()=>p("or"),className:`rounded px-2 py-0.5 text-xs font-medium ${d==="or"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"OR"})]})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-3 items-center text-xs text-slate-400",children:[s.jsx("span",{className:"font-medium text-slate-200",children:"Sort:"}),s.jsxs("select",{value:y,onChange:E=>{S(E.target.value),h(1)},className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",children:[s.jsx("option",{value:"avgDesc",children:"Avg stars (high first)"}),s.jsx("option",{value:"avgAsc",children:"Avg stars (low first)"}),s.jsx("option",{value:"alphaAsc",children:"Title AZ"}),s.jsx("option",{value:"alphaDesc",children:"Title ZA"})]}),s.jsx("span",{className:"text-slate-500",children:J?V.length===0?"No media found.":`${V.length} items`:""})]})]})]}),C&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:C}),J?m?s.jsx("div",{className:"text-sm text-slate-400",children:"Loading media"}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"rounded-md border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm text-slate-400",children:V.length===0?"No results":`${V.length} results`}),s.jsx("ul",{className:"space-y-3 mt-2",children:fe.map(E=>{const U=E.thumbnailUrl||(E.mediaType==="image"?E.mediaUrl:void 0),B=E.title||E.PK||"Untitled",N=E.mediaType==="video"?"Video":"Image",H=`/media/${encodeURIComponent(E.PK)}`;return s.jsxs("li",{className:"flex gap-3 rounded-xl border border-slate-800 bg-slate-950/60 p-3",children:[s.jsx(ie,{to:H,className:"h-16 w-24 flex-shrink-0 overflow-hidden rounded-lg border border-slate-700 bg-slate-900 flex items-center justify-center text-xl hover:border-slate-600",children:U?s.jsx("img",{src:U,alt:"",className:"h-full w-full object-cover",onError:ne=>{ne.currentTarget.style.visibility="hidden"}}):s.jsx("span",{children:E.mediaType==="video"?"":""})}),s.jsxs("div",{className:"min-w-0 flex-1 space-y-1",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("h2",{className:"truncate text-sm font-semibold text-slate-50",children:s.jsx(ie,{to:H,className:"hover:text-brand-orange",children:B})}),typeof E.averageRating=="number"&&s.jsxs("span",{className:"inline-flex items-center rounded-full bg-slate-900 px-2 py-0.5 text-[11px] text-amber-300",children:[E.averageRating.toFixed(1),""]}),s.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-900 px-2 py-0.5 text-[10px] uppercase tracking-wide text-slate-400",children:N})]}),E.description&&s.jsx("p",{className:"text-xs text-slate-300 line-clamp-3",children:E.description}),E.categories&&E.categories.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1 pt-1",children:E.categories.map(ne=>s.jsx("span",{className:"rounded-full bg-slate-900 px-2 py-0.5 text-[11px] text-slate-300",children:ne.name},ne.id))}),$&&s.jsx("div",{className:"pt-1",children:s.jsxs(ie,{to:`/admin/media/edit/${encodeURIComponent(E.PK)}`,className:"inline-flex items-center gap-1 text-[11px] text-slate-400 hover:text-slate-200",children:[s.jsx(ua,{className:"h-3.5 w-3.5"}),"Edit"]})}),I&&s.jsx("div",{className:"pt-1",children:s.jsxs("label",{className:"inline-flex items-center gap-1 text-[11px] text-slate-400",children:[s.jsx("span",{children:"Rate:"}),s.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-1 py-0.5 text-[11px] text-slate-50",onChange:ne=>{const _=Number(ne.target.value);_>=1&&_<=5&&j(E.PK,_)},defaultValue:"",children:[s.jsx("option",{value:"",children:"--"}),s.jsx("option",{value:"1",children:"1"}),s.jsx("option",{value:"2",children:"2"}),s.jsx("option",{value:"3",children:"3"}),s.jsx("option",{value:"4",children:"4"}),s.jsx("option",{value:"5",children:"5"})]})]})})]})]},E.PK)})})]}):s.jsx("div",{className:"flex items-center justify-center min-h-[280px]",children:s.jsx("p",{className:"text-2xl sm:text-3xl font-light text-slate-500/80 tracking-wide animate-pulse",children:"Enter search term or select categories"})}),J&&oe>1&&s.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-center gap-2 text-xs",children:[s.jsx("button",{type:"button",disabled:x<=1,onClick:()=>h(E=>Math.max(1,E-1)),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 disabled:opacity-40",children:"Prev"}),s.jsxs("span",{className:"text-slate-500",children:["Page ",x," of ",oe]}),s.jsx("button",{type:"button",disabled:x>=oe,onClick:()=>h(E=>Math.min(oe,E+1)),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 disabled:opacity-40",children:"Next"})]})]})};function jd(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Pv=()=>{var y;const{id:e}=ir(),{user:t}=Oe(),[n,r]=i.useState(null),[a,l]=i.useState(null),[o,c]=i.useState(!0),[u,d]=i.useState(null),p=ct(t??null,"manager"),f=e?decodeURIComponent(e):"";i.useEffect(()=>{const S=jd();if(!S||!f){d(f?"API URL not set.":"Missing media id."),c(!1);return}let x=!1;async function h(){c(!0),d(null);try{const m=await ut(`${S}/media?id=${encodeURIComponent(f)}`);if(m.status===404){x||r(null);return}if(!m.ok){const P=await m.text();throw new Error(`HTTP ${m.status}: ${P}`)}const k=await m.json();if(x)return;const C=Array.isArray(k.media)?k.media[0]:k.media;r(C??null)}catch(m){x||d((m==null?void 0:m.message)??"Failed to load media.")}finally{x||c(!1)}}return h(),()=>{x=!0}},[f]);const g=async S=>{const x=jd();if(!(!x||!n))try{await Q(`${x}/media/stars`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mediaId:n.PK,rating:S})}),l(S)}catch{}};if(o)return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(ie,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Media"]}),s.jsx("div",{className:"text-sm text-slate-400",children:"Loading"})]});if(u||!n)return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(ie,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Media"]}),s.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:u||"Media not found."})]});const v=n.title||n.PK||"Untitled",b=n.mediaType==="video";return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsxs(ie,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Media"]}),p&&s.jsxs(ie,{to:`/admin/media/edit/${encodeURIComponent(n.PK)}`,className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(ua,{className:"h-4 w-4"}),"Edit"]})]}),s.jsxs("article",{className:"rounded-xl border border-slate-800 bg-slate-950/60 overflow-hidden",children:[s.jsxs("header",{className:"p-4 sm:p-6 border-b border-slate-800",children:[s.jsx("h1",{className:"text-xl font-semibold tracking-tight text-slate-50",children:v}),s.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[typeof n.averageRating=="number"&&s.jsxs("span",{className:"inline-flex items-center rounded-full bg-slate-800 px-2 py-0.5 text-sm text-amber-300",children:[n.averageRating.toFixed(1)," average"]}),s.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-800 px-2 py-0.5 text-xs uppercase tracking-wide text-slate-400",children:b?"Video":"Image"})]}),n.description&&s.jsx("p",{className:"mt-3 text-sm text-slate-300",children:n.description}),(((y=n.categories)==null?void 0:y.length)??0)>0&&s.jsx("div",{className:"mt-3 flex flex-wrap gap-1",children:n.categories.map(S=>s.jsx("span",{className:"rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-300",children:S.name},S.id))}),t&&s.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3",children:[a!==null&&s.jsxs("span",{className:"text-xs text-slate-400",children:["Your rating: ",a,""]}),s.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-400",children:[s.jsx("span",{children:"Rate:"}),s.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-2 py-1 text-sm text-slate-50",value:a??"",onChange:S=>{const x=Number(S.target.value);x>=1&&x<=5&&g(x)},children:[s.jsx("option",{value:"",children:"--"}),s.jsx("option",{value:"1",children:"1"}),s.jsx("option",{value:"2",children:"2"}),s.jsx("option",{value:"3",children:"3"}),s.jsx("option",{value:"4",children:"4"}),s.jsx("option",{value:"5",children:"5"})]})]})]})]}),s.jsx("div",{className:"p-4 sm:p-6 bg-slate-900/40 flex justify-center items-center min-h-[200px]",children:n.mediaUrl?b?s.jsx("video",{src:n.mediaUrl,controls:!0,className:"max-w-full max-h-[70vh] rounded-lg border border-slate-700",playsInline:!0}):s.jsx("img",{src:n.mediaUrl,alt:v,className:"max-w-full max-h-[70vh] w-auto h-auto object-contain rounded-lg border border-slate-700"}):s.jsx("p",{className:"text-sm text-slate-500",children:"No media URL available."})})]})]})},Op="funkedupshift_internet_dashboard",Tv=5*60*1e3;function Rv(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function Lv(){try{const e=localStorage.getItem(Op);if(!e)return null;const t=JSON.parse(e);return!(t!=null&&t.sites)||!(t!=null&&t.lastFetchTime)||Date.now()-new Date(t.lastFetchTime).getTime()>=Tv?null:t.sites}catch{return null}}function Av(e){try{localStorage.setItem(Op,JSON.stringify({sites:e,lastFetchTime:new Date().toISOString()}))}catch{}}const $v=()=>{const{user:e}=Oe(),[t,n]=i.useState([]),[r,a]=i.useState(!0),[l,o]=i.useState(null),c=i.useCallback(async()=>{const u=Rv(),d=Lv();if(d&&d.length>0){n(d),a(!1),o(null);return}if(!u){o("API URL not set."),a(!1);return}a(!0),o(null);try{const p=await ut(`${u}/internet-dashboard`);if(!p.ok){const v=await p.text();throw new Error(v||`HTTP ${p.status}`)}const f=await p.json(),g=Array.isArray(f.sites)?f.sites:[];g.length>0?(Av(g),n(g)):(o(d!=null&&d.length?void 0:"No data returned."),d!=null&&d.length&&n(d))}catch(p){const f=p instanceof Error?p.message:"Failed to load dashboard.";d&&d.length>0?(n(d),o(null)):(o(f),n([]))}finally{a(!1)}},[]);return i.useEffect(()=>{c()},[c]),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Internet dashboard"}),s.jsxs("div",{className:"rounded-xl border border-teal-800/60 bg-gradient-to-br from-teal-900/40 to-teal-950/60 p-4 shadow-lg",children:[s.jsx("p",{className:"text-sm font-medium text-teal-100",children:"Live status of popular sites"}),s.jsx("p",{className:"mt-1 text-xs text-teal-200/80",children:"Refreshes when data is older than 5 minutes"}),ct(e??null,"superadmin")&&s.jsx("p",{className:"mt-2",children:s.jsx(ie,{to:"/admin/internet-dashboard",className:"text-brand-orange hover:text-orange-400 text-sm",children:"Edit sites list"})})]}),r&&s.jsx("p",{className:"text-sm text-slate-400",children:"Loading"}),l&&!t.length&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:l}),s.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(140px,1fr))] gap-3",children:t.map(u=>{const d=(u.status||"down").toLowerCase(),p=d==="up"?"border-emerald-500/50 bg-emerald-500/15 text-emerald-200":d==="degraded"?"border-amber-500/50 bg-amber-500/15 text-amber-200":"border-red-500/50 bg-red-500/15 text-red-200",f=u.responseTimeMs!=null?`${u.responseTimeMs} ms`:null;return s.jsxs("div",{className:`rounded-lg border p-3 text-center text-sm transition-all duration-200 hover:scale-[1.02] hover:shadow-lg ${p}`,children:[s.jsx("a",{href:`https://${u.domain}`,target:"_blank",rel:"noopener noreferrer",className:"font-semibold break-all hover:underline block",children:u.domain}),s.jsx("div",{className:"mt-1 text-xs capitalize opacity-90",children:d}),f&&s.jsx("div",{className:"mt-0.5 text-[11px] opacity-75",children:f})]},u.domain)})})]})};function Iv(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return!e||e==="API_URL_PLACEHOLDER"||!e.startsWith("http")?null:e.replace(/\/$/,"")}const Uv=()=>{const{user:e}=Oe(),[t,n]=i.useState([]),[r,a]=i.useState(null),[l,o]=i.useState(!0),[c,u]=i.useState(null),d=i.useCallback(async()=>{const f=Iv();if(!f){u("API URL not set. For local dev, edit public/config.js and set window.API_BASE_URL to your staging API (e.g. terraform -chdir=infra output -raw apiInvokeUrl)."),o(!1);return}o(!0),u(null);try{const g=await ut(`${f}/recommended/highlights`),v=await g.text();if(!g.ok)throw new Error(v||`HTTP ${g.status}`);if(v.trim().startsWith("<"))throw new Error("API returned HTML instead of JSON. For local dev, set window.API_BASE_URL in public/config.js to your staging API URL (e.g. terraform -chdir=infra output -raw apiInvokeUrl)");let b;try{b=JSON.parse(v)}catch{throw new Error("API returned invalid JSON.")}const y=Array.isArray(b.sites)?b.sites:[];n(y),u(null)}catch(g){const v=g instanceof Error?g.message:"Failed to load.";u(v),n([])}finally{o(!1)}},[]);i.useEffect(()=>{d()},[d]);const p=ct(e??null,"manager");return s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-violet-200",children:"Highlights and faves"}),s.jsxs("div",{className:"rounded-xl border border-violet-800/60 bg-gradient-to-br from-violet-900/40 to-violet-950/60 p-4 shadow-lg",children:[s.jsx("p",{className:"text-sm font-medium text-violet-100",children:"Our curated list of exceptional sites"}),s.jsx("p",{className:"mt-1 text-xs text-violet-200/80",children:"Click a card below for more detail"}),p&&s.jsx("p",{className:"mt-2",children:s.jsx(ie,{to:"/admin/recommended?tab=highlights",className:"text-violet-300 hover:text-violet-200 font-semibold text-sm",children:"Edit sites list"})})]}),l&&s.jsx("p",{className:"text-sm text-slate-400",children:"Loading"}),c&&!t.length&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:c}),!l&&t.length===0&&!c&&s.jsxs("p",{className:"text-sm text-slate-400",children:["No sites configured yet."," ",p&&s.jsx(ie,{to:"/admin/recommended?tab=highlights",className:"text-violet-400 hover:text-violet-300",children:"Add sites"})]}),t.length>0&&s.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(260px,1fr))] gap-4",children:t.map(f=>{const g=(f.status||"up").toLowerCase(),v=g==="up"?"border-violet-400/50 bg-violet-400/20 text-violet-200":g==="degraded"?"border-violet-500/50 bg-violet-500/15 text-violet-200":"border-violet-600/50 bg-violet-600/15 text-violet-200",b=(f.description||"").trim().length>0,y=f.title||f.domain,S=f.url||`https://${f.domain}`;return s.jsxs("div",{className:`rounded-lg border p-4 text-left text-sm min-w-0 cursor-pointer transition-all duration-200 hover:scale-[1.01] hover:shadow-lg ${v}`,onClick:()=>a(f),role:"button",tabIndex:0,onKeyDown:x=>{(x.key==="Enter"||x.key===" ")&&(x.preventDefault(),a(f))},children:[s.jsxs("span",{className:"relative group block",children:[s.jsx("a",{href:S,target:"_blank",rel:"noopener noreferrer",className:"font-semibold block hover:underline break-all",onClick:x=>x.stopPropagation(),children:y}),s.jsx("span",{className:"absolute left-0 top-full mt-1 px-2 py-1.5 rounded bg-slate-900 border border-violet-700/60 text-xs text-violet-200 break-all max-w-[280px] shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-opacity z-10 pointer-events-none",role:"tooltip",children:S})]}),b&&s.jsx("div",{className:"mt-2 text-xs text-violet-200/90 leading-relaxed break-words",children:f.description})]},f.url||f.domain)})}),s.jsxs(pn,{open:!!r,onClose:()=>a(null),className:"relative z-50",children:[s.jsx("div",{className:"fixed inset-0 bg-black/50","aria-hidden":"true"}),s.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:s.jsx(pn.Panel,{className:"mx-auto w-full max-w-xl rounded-xl border border-violet-800/60 bg-gradient-to-br from-violet-900/40 to-violet-950/60 p-6 shadow-xl",children:r&&s.jsxs("div",{className:"relative flex min-h-[12rem] items-center justify-center",children:[s.jsx("button",{type:"button",onClick:()=>a(null),className:"absolute right-0 top-0 rounded p-1 text-violet-400 hover:bg-violet-800/40 hover:text-violet-200","aria-label":"Close modal",children:s.jsx(Kl,{className:"h-6 w-6"})}),r.logoUrl?s.jsx("img",{src:r.logoUrl,alt:"",className:"max-h-48 max-w-full object-contain",onError:f=>{f.currentTarget.style.visibility="hidden"}}):s.jsx("div",{className:"h-24 w-24 rounded-lg border border-violet-700/60 bg-violet-900/40"})]})})})]})]})};function Dv({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{fillRule:"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.006 5.404.434c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.434 2.082-5.005Z",clipRule:"evenodd"}))}const Fp=i.forwardRef(Dv);function Mv(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return!e||e==="API_URL_PLACEHOLDER"||!e.startsWith("http")?null:e.replace(/\/$/,"")}const Ov=()=>{const{user:e}=Oe(),[t,n]=i.useState([]),[r,a]=i.useState(null),[l,o]=i.useState(!0),[c,u]=i.useState(null),d=i.useCallback(async()=>{const f=Mv();if(!f){u("API URL not set. For local dev, edit public/config.js and set window.API_BASE_URL to your staging API (e.g. terraform -chdir=infra output -raw apiInvokeUrl)."),o(!1);return}o(!0),u(null);try{const g=await ut(`${f}/recommended/highest-rated`),v=await g.text();if(!g.ok)throw new Error(v||`HTTP ${g.status}`);if(v.trim().startsWith("<"))throw new Error("API returned HTML instead of JSON. For local dev, set window.API_BASE_URL in public/config.js to your staging API URL (e.g. terraform -chdir=infra output -raw apiInvokeUrl)");let b;try{b=JSON.parse(v)}catch{throw new Error("API returned invalid JSON.")}const y=Array.isArray(b.sites)?b.sites:[];n(y),u(null)}catch(g){const v=g instanceof Error?g.message:"Failed to load.";u(v),n([])}finally{o(!1)}},[]);i.useEffect(()=>{d()},[d]);const p=ct(e??null,"manager");return s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-amber-200",children:"Highest rated"}),s.jsxs("div",{className:"rounded-xl border border-amber-800/60 bg-gradient-to-br from-amber-900/40 to-amber-950/60 p-4 shadow-lg",children:[s.jsx("p",{className:"text-sm font-medium text-amber-100",children:"Top sites and media rated by our community"}),s.jsx("p",{className:"mt-1 text-xs text-amber-200/80",children:"Click a card below for more detail"}),p&&s.jsx("p",{className:"mt-2",children:s.jsx(ie,{to:"/admin/recommended?tab=highest-rated",className:"text-amber-300 hover:text-amber-200 font-semibold text-sm",children:"Edit list"})})]}),l&&s.jsx("p",{className:"text-sm text-slate-400",children:"Loading"}),c&&!t.length&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:c}),!l&&t.length===0&&!c&&s.jsxs("p",{className:"text-sm text-slate-400",children:["No items configured yet."," ",p&&s.jsx(ie,{to:"/admin/recommended?tab=highest-rated",className:"text-amber-400 hover:text-amber-300",children:"Generate cache"})]}),t.length>0&&s.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(260px,1fr))] gap-4",children:t.map(f=>{const g=(f.status||"up").toLowerCase(),v=g==="up"?"border-amber-400/50 bg-amber-400/20 text-amber-200":g==="degraded"?"border-amber-500/50 bg-amber-500/15 text-amber-200":"border-amber-600/50 bg-amber-600/15 text-amber-200",b=(f.description||"").trim().length>0,y=f.title||f.domain,S=f.type==="media",x=f.id||f.url||f.domain;return s.jsxs("div",{className:`rounded-lg border p-4 text-left text-sm min-w-0 cursor-pointer transition-all duration-200 hover:scale-[1.01] hover:shadow-lg ${v}`,onClick:()=>a(f),role:"button",tabIndex:0,onKeyDown:h=>{(h.key==="Enter"||h.key===" ")&&(h.preventDefault(),a(f))},children:[s.jsxs("span",{className:"relative group block",children:[S?s.jsx(ie,{to:f.link,className:"font-semibold block hover:underline break-all",onClick:h=>h.stopPropagation(),children:y}):s.jsx("a",{href:f.link,target:"_blank",rel:"noopener noreferrer",className:"font-semibold block hover:underline break-all",onClick:h=>h.stopPropagation(),children:y}),s.jsx("span",{className:"absolute left-0 top-full mt-1 px-2 py-1.5 rounded bg-slate-900 border border-amber-700/60 text-xs text-amber-200 break-all max-w-[280px] shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-opacity z-10 pointer-events-none",role:"tooltip",children:f.link})]}),f.averageRating!=null&&s.jsxs("div",{className:"mt-1 flex items-center gap-0.5 text-amber-300",children:[s.jsx(Fp,{className:"h-3.5 w-3.5"}),s.jsx("span",{className:"font-medium",children:f.averageRating})]}),b&&s.jsx("div",{className:"mt-2 text-xs text-amber-200/90 leading-relaxed break-words",children:f.description})]},x)})}),s.jsxs(pn,{open:!!r,onClose:()=>a(null),className:"relative z-50",children:[s.jsx("div",{className:"fixed inset-0 bg-black/50","aria-hidden":"true"}),s.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:s.jsx(pn.Panel,{className:"mx-auto w-full max-w-xl rounded-xl border border-amber-800/60 bg-gradient-to-br from-amber-900/40 to-amber-950/60 p-6 shadow-xl",children:r&&s.jsxs("div",{className:"relative flex min-h-[12rem] items-center justify-center",children:[s.jsx("button",{type:"button",onClick:()=>a(null),className:"absolute right-0 top-0 rounded p-1 text-amber-400 hover:bg-amber-800/40 hover:text-amber-200","aria-label":"Close modal",children:s.jsx(Kl,{className:"h-6 w-6"})}),r.logoUrl?s.jsx("img",{src:r.logoUrl,alt:"",className:"max-h-48 max-w-full object-contain",onError:f=>{f.currentTarget.style.visibility="hidden"}}):s.jsx("div",{className:"h-24 w-24 rounded-lg border border-amber-700/60 bg-amber-900/40"})]})})})]})]})};function Fv(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const _v=["image/png","image/jpeg","image/jpg","image/gif","image/webp"],Bv=()=>{const{user:e}=Oe(),{logo:t}=Mp(),[n,r]=i.useState(null),[a,l]=i.useState("Funkedupshift"),[o,c]=i.useState(null),[u,d]=i.useState(!1),[p,f]=i.useState(null),[g,v]=i.useState(null);if(!ct(e??null,"superadmin"))return s.jsxs("div",{className:"space-y-3",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Branding"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Only superadmin users can manage global branding assets."})]});const y=x=>{var m;const h=(m=x.target.files)==null?void 0:m[0];r(h??null),f(null),v(null),o&&(URL.revokeObjectURL(o),c(null)),h&&c(URL.createObjectURL(h))},S=async x=>{if(x.preventDefault(),v(null),f(null),!n){v("Choose an image file first.");return}const h=n.type||"image/png";if(!_v.includes(h)){v("Logo must be PNG, JPEG, GIF, or WEBP.");return}const m=Fv();if(!m){v("API URL not configured.");return}const k=window;if(!k.auth||typeof k.auth.getAccessToken!="function"){v("Auth not initialized.");return}d(!0);try{const C=await Q(`${m}/branding/logo`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contentType:h,alt:a})});if(!C.ok){const $=await C.text();throw new Error($||`Metadata request failed with ${C.status}`)}const P=await C.json();if(!P.uploadUrl)throw new Error("uploadUrl missing from response.");const I=await fetch(P.uploadUrl,{method:"PUT",headers:{"Content-Type":h},body:n});if(!I.ok)throw new Error(`Upload failed with ${I.status}`);f("Logo updated. It may take a moment for caches to refresh.")}catch(C){v((C==null?void 0:C.message)??"Failed to update logo.")}finally{d(!1)}};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Branding"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Upload a new global logo for Funkedupshift. This logo is used in the navigation bar and other shared surfaces."})]}),s.jsxs("form",{className:"space-y-4 max-w-md",onSubmit:S,children:[s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsx("label",{className:"block text-slate-200",children:"Logo image"}),t&&!o&&s.jsxs("div",{className:"space-y-1 mb-3",children:[s.jsx("p",{className:"text-slate-200",children:"Current logo"}),s.jsx("div",{className:"inline-flex items-center rounded-lg border border-slate-800 bg-slate-950 p-2",children:s.jsx("img",{src:t.url,alt:t.alt,className:"h-12 w-auto rounded-md object-contain"})})]}),s.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/jpg,image/gif,image/webp",onChange:y,className:"block w-full text-xs text-slate-300 file:mr-3 file:rounded-md file:border-0 file:bg-slate-800 file:px-3 file:py-1.5 file:text-xs file:font-semibold file:text-slate-100 hover:file:bg-slate-700"}),s.jsx("p",{className:"text-xs text-slate-500",children:"PNG, JPEG, GIF, or WEBP. Recommended square or horizontal layout."})]}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsx("label",{className:"block text-slate-200",children:"Alt text"}),s.jsx("input",{type:"text",value:a,onChange:x=>l(x.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),o&&s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsx("p",{className:"text-slate-200",children:"Preview"}),s.jsxs("div",{className:"inline-flex items-center rounded-lg border border-slate-800 bg-slate-950 p-2",children:[s.jsx("img",{src:o,alt:"Preview",className:"h-12 w-auto rounded-md object-contain"}),s.jsx("span",{className:"ml-3 text-xs text-slate-400 truncate max-w-[12rem]",children:n==null?void 0:n.name})]})]}),s.jsx("button",{type:"submit",disabled:u||!n,className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:u?"Updating":"Update logo"}),p&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-xs text-emerald-200",children:p}),g&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:g})]})]})};function Nd(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const zv=()=>{const{user:e}=Oe(),[t,n]=i.useState([]),[r,a]=i.useState("custom"),[l,o]=i.useState(null),[c,u]=i.useState(null),[d,p]=i.useState(""),[f,g]=i.useState(!0),[v,b]=i.useState(!1),[y,S]=i.useState(null),[x,h]=i.useState(null),m=ct(e??null,"superadmin"),k=i.useCallback(async()=>{const J=Nd();if(!J){h("API URL not set."),g(!1);return}g(!0),h(null);try{const V=await Q(`${J}/admin/internet-dashboard/sites`);if(!V.ok){const fe=await V.json().catch(()=>({}));throw new Error(fe.error||"Failed to load")}const oe=await V.json();n(Array.isArray(oe.sites)?oe.sites:[])}catch(V){h((V==null?void 0:V.message)??"Failed to load sites.")}finally{g(!1)}},[Q]);i.useEffect(()=>{m&&k()},[m,k]);const C=async J=>{const V=Nd();if(V){b(!0),S(null),h(null);try{const oe=await Q(`${V}/admin/internet-dashboard/sites`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({sites:J})});if(!oe.ok){const fe=await oe.json().catch(()=>({}));throw new Error(fe.error||"Failed to save")}n(J),S("Sites list saved.")}catch(oe){h((oe==null?void 0:oe.message)??"Failed to save.")}finally{b(!1)}}},P=J=>{J.preventDefault();const V=d.trim().toLowerCase().replace(/^https?:\/\//,"").replace(/\/.*$/,"");if(!V)return;if(t.includes(V)){h("Domain already in list.");return}const oe=[...t,V];p(""),h(null),C(oe)},I=i.useMemo(()=>{if(r==="custom")return[...t];const J=[...t];return J.sort((V,oe)=>r==="a-z"?V.localeCompare(oe):oe.localeCompare(V)),J},[t,r]),$=J=>{o(J)},K=(J,V)=>{J.preventDefault(),J.dataTransfer.dropEffect="move",u(V)},F=()=>{u(null)},q=()=>{o(null),u(null)},G=(J,V)=>{if(J.preventDefault(),u(null),r!=="custom"||l===null||l===V){o(null);return}const oe=[...I],[fe]=oe.splice(l,1);oe.splice(V,0,fe),n(oe),C(oe),o(null)},re=J=>{const V=t.filter(oe=>oe!==J);if(V.length===0){h("At least one site is required.");return}h(null),C(V)};return m?f?s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Internet Dashboard"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Loading sites"})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ie,{to:"/internet-dashboard",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Internet Dashboard"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Internet Dashboard"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Edit the list of sites shown on the Internet Dashboard. Only SuperAdmin can change this."})]}),s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-4 max-w-2xl",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsxs("h2",{className:"text-base font-semibold text-slate-200",children:["Sites list (",t.length,")"]}),s.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[s.jsx("button",{type:"button",onClick:()=>a("custom"),className:`rounded px-2 py-0.5 text-xs font-medium ${r==="custom"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"Custom"}),s.jsx("button",{type:"button",onClick:()=>a("a-z"),className:`rounded px-2 py-0.5 text-xs font-medium ${r==="a-z"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"AZ"}),s.jsx("button",{type:"button",onClick:()=>a("z-a"),className:`rounded px-2 py-0.5 text-xs font-medium ${r==="z-a"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"ZA"})]})]}),s.jsxs("form",{onSubmit:P,className:"flex gap-2 flex-wrap items-end",children:[s.jsxs("div",{className:"flex-1 min-w-[12rem]",children:[s.jsx("label",{htmlFor:"newDomain",className:"block text-xs font-medium text-slate-400 mb-1",children:"Add domain"}),s.jsx("input",{id:"newDomain",type:"text",value:d,onChange:J=>p(J.target.value),placeholder:"example.com",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsx("button",{type:"submit",disabled:v||!d.trim(),className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:"Add"})]}),s.jsx("ul",{className:"space-y-2",children:I.map((J,V)=>s.jsxs("li",{draggable:r==="custom",onDragStart:()=>$(V),onDragOver:oe=>K(oe,V),onDragLeave:F,onDragEnd:q,onDrop:oe=>G(oe,V),className:`flex items-center gap-2 rounded-md border px-3 py-2 ${l===V?"border-brand-orange bg-slate-800 opacity-60":c===V?"border-brand-orange/70 bg-slate-800/80":"border-slate-700 bg-slate-900"} ${r==="custom"?"cursor-grab active:cursor-grabbing":""}`,children:[r==="custom"&&s.jsx(Kc,{className:"h-4 w-4 flex-shrink-0 text-slate-500","aria-hidden":!0}),s.jsx("span",{className:"font-medium text-slate-200 break-all flex-1",children:J}),s.jsx("button",{type:"button",onClick:()=>re(J),disabled:v||t.length<=1,className:"flex-shrink-0 rounded-md border border-red-500/60 bg-red-500/10 px-2 py-1 text-xs font-medium text-red-300 hover:bg-red-500/20 disabled:opacity-50",children:"Remove"})]},J))}),y&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:y}),x&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:x})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Internet Dashboard"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Only SuperAdmin users can edit the dashboard sites list."})]})};function Uo(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function Sd(e){const t=e.trim();return t?t.toLowerCase().startsWith("http://")||t.toLowerCase().startsWith("https://")?t:`https://${t.replace(/^https?:\/\//i,"")}`:null}function kd(e){try{return new URL(e.startsWith("http")?e:`https://${e}`).hostname}catch{return e}}const wr=[{id:"highlights",label:"Highlights",fetchPath:"/admin/recommended/highlights/sites",savePath:"/admin/recommended/highlights/sites",generatePath:"/admin/recommended/highlights/generate",generateLabel:"Generate new cache",listLabel:"Highlights list",emptyMessage:"No highlights yet. Generate from the highlight category or add a URL above.",generateSuccessMessage:"Cache generated from sites in the highlight category.",saveSuccessMessage:"Highlights list saved.",buttonClass:"bg-violet-600 hover:bg-violet-500",viewPath:"/recommended/highlights"},{id:"highestRated",label:"Highest Rated",fetchPath:"/admin/recommended/highest-rated/sites",savePath:"/admin/recommended/highest-rated/sites",generatePath:"/admin/recommended/highest-rated/generate",generateLabel:"Generate new cache",listLabel:"Highest rated list",emptyMessage:"No items yet. Generate from top 12 by star rating or add a URL above.",generateSuccessMessage:"Cache generated from top 12 sites and media by star rating.",saveSuccessMessage:"Highest rated list saved.",buttonClass:"bg-amber-600 hover:bg-amber-500",viewPath:"/recommended/highest-rated"}],Cd=({config:e})=>{const[t,n]=i.useState([]),[r,a]=i.useState(null),[l,o]=i.useState(!1),[c,u]=i.useState("custom"),[d,p]=i.useState(null),[f,g]=i.useState(null),[v,b]=i.useState(""),[y,S]=i.useState(null),[x,h]=i.useState(""),[m,k]=i.useState(!1),[C,P]=i.useState(null),[I,$]=i.useState(null),K=i.useRef([]);i.useEffect(()=>{K.current=t},[t]);const F=i.useCallback(async()=>{const D=Uo();if(D){$(null);try{const M=await Q(`${D}${e.fetchPath}`);if(!M.ok){const T=await M.json().catch(()=>({}));throw new Error(T.error||"Failed to load")}const ee=await M.json(),w=Array.isArray(ee.sites)?ee.sites:[];n(w.map(T=>typeof T=="string"?{type:"site",url:T,description:""}:(T.type||"site")==="media"?{type:"media",id:T.id||"",description:T.description||"",title:T.title,thumbnailKey:T.thumbnailKey,averageRating:T.averageRating}:{type:"site",url:T.url||"",description:T.description||"",title:T.title,logoKey:T.logoKey,averageRating:T.averageRating})),a(ee.updatedAt??null)}catch(M){$((M==null?void 0:M.message)??"Failed to load sites.")}}},[Q,e.fetchPath]);i.useEffect(()=>{F()},[F]);const q=async()=>{const D=Uo();if(D){o(!0),P(null),$(null);try{const M=await Q(`${D}${e.generatePath}`,{method:"POST"}),ee=await M.json();if(!M.ok)throw new Error(ee.error||"Failed to generate");const w=Array.isArray(ee.sites)?ee.sites:[];n(w.map(T=>typeof T=="string"?{type:"site",url:T,description:""}:(T.type||"site")==="media"?{type:"media",id:T.id||"",description:T.description||"",title:T.title,thumbnailKey:T.thumbnailKey,averageRating:T.averageRating}:{type:"site",url:T.url||"",description:T.description||"",title:T.title,logoKey:T.logoKey,averageRating:T.averageRating})),a(ee.updatedAt??null),P(e.generateSuccessMessage)}catch(M){$((M==null?void 0:M.message)??"Failed to generate cache.")}finally{o(!1)}}},G=async D=>{const M=Uo();if(M){k(!0),P(null),$(null);try{const ee={sites:D.map(z=>z.type==="media"?{type:"media",id:z.id,description:z.description,...z.title&&{title:z.title},...z.thumbnailKey&&{thumbnailKey:z.thumbnailKey},...z.averageRating!=null&&{averageRating:z.averageRating}}:{type:"site",url:z.url,description:z.description,...z.title&&{title:z.title},...z.logoKey&&{logoKey:z.logoKey},...z.averageRating!=null&&{averageRating:z.averageRating}})},w=await Q(`${M}${e.savePath}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ee)}),T=await w.json();if(!w.ok)throw new Error(T.error||"Failed to save");n(D),P(e.saveSuccessMessage),a(T.updatedAt??null)}catch(ee){$((ee==null?void 0:ee.message)??"Failed to save.")}finally{k(!1)}}},re=D=>{D.preventDefault();const M=Sd(v);if(M){if(t.some(ee=>ee.url===M)){$("URL already in list.");return}b(""),$(null),G([...t,{type:"site",url:M,description:""}])}},J=D=>D.type==="media"?(D.title||D.id||"").toLowerCase():kd(D.url||"").toLowerCase(),V=i.useMemo(()=>{if(c==="custom")return[...t];const D=[...t];return D.sort((M,ee)=>{const w=J(M),T=J(ee);return c==="a-z"?w.localeCompare(T):T.localeCompare(w)}),D},[t,c]),oe=D=>{const M=V[D];M.type!=="media"&&(S(D),h(M.url||""))},fe=()=>{if(y===null)return;const D=Sd(x);if(!D){$("Invalid URL.");return}const M=V[y];if(M.type==="media")return;if(t.some(w=>w.type==="site"&&w.url===D&&w.url!==M.url)){$("URL already in list.");return}$(null);const ee=t.map(w=>w.type==="site"&&w.url===M.url?{...w,url:D}:w);n(ee),G(ee),S(null),h("")},j=()=>{S(null),h("")},E=(D,M)=>{n(ee=>ee.map(w=>(w.type==="media"?w.id===D.id:w.url===D.url)?{...w,description:M.slice(0,255)}:w))},U=()=>{G(K.current)},B=D=>p(D),N=(D,M)=>{D.preventDefault(),D.dataTransfer.dropEffect="move",g(M)},H=()=>g(null),ne=()=>{p(null),g(null)},_=(D,M)=>{if(D.preventDefault(),g(null),c!=="custom"||d===null||d===M){p(null);return}const ee=[...V],[w]=ee.splice(d,1);ee.splice(M,0,w),n(ee),G(ee),p(null)},W=D=>{$(null),G(t.filter(M=>M.type==="media"?M.id!==D.id:M.url!==D.url))},A=r?new Date(r).toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"}):null;return s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-4 max-w-2xl",children:[s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsxs("h2",{className:"text-base font-semibold text-slate-200",children:[e.listLabel," (",t.length,")"]}),A&&s.jsxs("span",{className:"text-xs text-slate-500",children:["Cache was last updated ",A]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ie,{to:e.viewPath,className:"text-sm text-slate-400 hover:text-slate-200",children:"View"}),s.jsx("button",{type:"button",onClick:q,disabled:l,className:`rounded-md px-4 py-2 text-sm font-medium text-white disabled:opacity-50 ${e.buttonClass}`,children:l?"Generating":e.generateLabel})]})]}),s.jsx("div",{className:"flex flex-wrap items-center gap-3",children:s.jsx("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:["custom","a-z","z-a"].map(D=>s.jsx("button",{type:"button",onClick:()=>u(D),className:`rounded px-2 py-0.5 text-xs font-medium ${c===D?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:D==="custom"?"Custom":D==="a-z"?"AZ":"ZA"},D))})}),s.jsxs("form",{onSubmit:re,className:"flex gap-2 flex-wrap items-end",children:[s.jsxs("div",{className:"flex-1 min-w-[12rem]",children:[s.jsx("label",{htmlFor:"newUrl",className:"block text-xs font-medium text-slate-400 mb-1",children:"Add URL"}),s.jsx("input",{id:"newUrl",type:"text",value:v,onChange:D=>b(D.target.value),placeholder:"https://example.com or example.com",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsx("button",{type:"submit",disabled:m||!v.trim(),className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:"Add"})]}),s.jsx("ul",{className:"space-y-3",children:V.map((D,M)=>s.jsxs("li",{draggable:c==="custom"&&y===null,onDragStart:()=>B(M),onDragOver:ee=>N(ee,M),onDragLeave:H,onDragEnd:ne,onDrop:ee=>_(ee,M),className:`flex flex-col gap-2 rounded-md border px-3 py-2 ${d===M?"border-brand-orange bg-slate-800 opacity-60":f===M?"border-brand-orange/70 bg-slate-800/80":"border-slate-700 bg-slate-900"} ${c==="custom"&&y===null?"cursor-grab active:cursor-grabbing":""}`,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[c==="custom"&&s.jsx(Kc,{className:"h-4 w-4 flex-shrink-0 text-slate-500","aria-hidden":!0}),y===M?s.jsx("input",{type:"text",value:x,onChange:ee=>h(ee.target.value),onBlur:fe,onKeyDown:ee=>{ee.key==="Enter"&&fe(),ee.key==="Escape"&&j()},autoFocus:!0,className:"flex-1 rounded-md border border-slate-600 bg-slate-900 px-2 py-1 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}):D.type==="media"?s.jsx("span",{className:"font-medium text-slate-200 break-all flex-1",children:D.title||D.id}):s.jsx("button",{type:"button",onClick:()=>oe(M),className:"font-medium text-slate-200 break-all flex-1 text-left hover:text-brand-orange hover:underline",children:kd(D.url||"")}),e.id==="highestRated"&&D.averageRating!=null&&s.jsxs("span",{className:"flex items-center gap-0.5 text-amber-400 text-xs",children:[s.jsx(Fp,{className:"h-3.5 w-3.5"}),D.averageRating]}),s.jsx("button",{type:"button",onClick:()=>W(D),disabled:m||y!==null,className:"flex-shrink-0 rounded-md border border-red-500/60 bg-red-500/10 px-2 py-1 text-xs font-medium text-red-300 hover:bg-red-500/20 disabled:opacity-50",children:"Remove"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:`desc-${e.id}-${M}`,className:"block text-xs font-medium text-slate-400 mb-0.5",children:"Description"}),s.jsx("input",{id:`desc-${e.id}-${M}`,type:"text",value:D.description,onChange:ee=>E(D,ee.target.value),onBlur:U,maxLength:255,placeholder:"One-line description (255 chars max)",disabled:m,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange disabled:opacity-50"}),s.jsxs("span",{className:"text-[10px] text-slate-500",children:[D.description.length,"/255"]})]})]},D.id||D.url||M))}),V.length===0&&s.jsx("p",{className:"text-sm text-slate-500",children:e.emptyMessage}),C&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:C}),I&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:I})]})},Gv=()=>{const{user:e}=Oe(),[t,n]=qt(),r=t.get("tab"),a=r==="highest-rated"||r==="highestRated"?"highestRated":"highlights",[l,o]=i.useState(a);i.useEffect(()=>{o(r==="highest-rated"||r==="highestRated"?"highestRated":"highlights")},[r]);const c=d=>{o(d),n({tab:d==="highestRated"?"highest-rated":d},{replace:!0})},u=ct(e??null,"manager");return wr.find(d=>d.id===l)??wr[0],u?s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ie,{to:"/recommended/highlights",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Recommended"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Recommended Admin"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manage highlighted and highest-rated site lists. Generate from categories or star ratings, or edit manually."})]}),s.jsx("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:wr.map(d=>s.jsx("button",{type:"button",onClick:()=>c(d.id),className:`px-4 py-2 rounded-md text-sm font-medium ${l===d.id?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:d.label},d.id))}),l==="highlights"&&s.jsx(Cd,{config:wr[0]}),l==="highestRated"&&s.jsx(Cd,{config:wr[1]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Recommended Admin"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Only Manager or SuperAdmin users can edit the recommended caches."})]})},$a={admin:"SuperAdmin",manager:"Manager",user:"User"},Ed=["admin","manager","user"],Ji=[{value:-8,label:"UTC-8"},{value:-5,label:"UTC-5"},{value:0,label:"UTC+0/GMT"}];function cn(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function Wv(e,t,n){if(!e&&!n)return"";if(!e)return n?`from ${n}`:"";try{const r=new Date(e);if(isNaN(r.getTime()))return e+(n?` from ${n}`:"");const a=r.getTime()+(t||0)*36e5,l=new Date(a),o=y=>y<10?"0"+y:""+y,c=l.getUTCFullYear(),u=o(l.getUTCMonth()+1),d=o(l.getUTCDate()),p=o(l.getUTCHours()),f=o(l.getUTCMinutes()),g=Ji.find(y=>y.value===t),v=g?g.label:t<0?"UTC"+t:"UTC+"+t;let b=`${c}-${u}-${d} ${p}:${f} ${v}`;return n&&(b+=` from ${n}`),b}catch{return e+(n?` from ${n}`:"")}}const Hv=()=>{const{user:e}=Oe(),t=Vt(),[n,r]=qt(),a=n.get("tab"),l=a==="groups"?"groups":a==="roles"?"roles":"users",[o,c]=i.useState(l);i.useEffect(()=>{c(a==="groups"?"groups":a==="roles"?"roles":"users")},[a]);const u=R=>{c(R);const X=new URLSearchParams(n);R==="groups"?X.set("tab","groups"):R==="roles"?X.set("tab","roles"):X.delete("tab"),r(X)},[d,p]=i.useState([]),[f,g]=i.useState(!0),[v,b]=i.useState(null),[y,S]=i.useState(""),[x,h]=i.useState(-8),[m,k]=i.useState([]),[C,P]=i.useState(!0),[I,$]=i.useState(null),[K,F]=i.useState(""),[q,G]=i.useState(""),[re,J]=i.useState(""),[V,oe]=i.useState(!1),[fe,j]=i.useState(null),[E,U]=i.useState(null),[B,N]=i.useState(""),[H,ne]=i.useState(""),[_,W]=i.useState(!1),[A,D]=i.useState(null),[M,ee]=i.useState(null),[w,T]=i.useState([]),[z,Y]=i.useState(!0),[O,te]=i.useState(null),[ce,pe]=i.useState(""),[be,Ne]=i.useState([]),[je,Ke]=i.useState([]),[at,ae]=i.useState(!1),[we,Fe]=i.useState(null),[Te,Se]=i.useState(null),[_e,Be]=i.useState([]),[Xe,lt]=i.useState([]),[nt,$t]=i.useState(!1),[gn,Et]=i.useState(null),[ln,le]=i.useState(null),xe=ct(e??null,"manager"),We=(e==null?void 0:e.role)==="superadmin",$e=async R=>{var ue;const X=cn();if(!X){b("API URL not set."),g(!1);return}if(!((ue=window.auth)!=null&&ue.getAccessToken)){b("Sign in required."),g(!1);return}g(!0),b(null);try{let ve=`${X}/admin/users`;R&&(ve+=`?paginationToken=${encodeURIComponent(R)}`);const ye=await Q(ve);if(!ye.ok){const Jt=await ye.json().catch(()=>({}));throw new Error(Jt.error||"Failed to load users")}const Pe=await ye.json();p(Jt=>R?[...Jt,...Pe.users??[]]:Pe.users??[]),S(Pe.paginationToken??"")}catch(ve){b((ve==null?void 0:ve.message)??"Failed to load users")}finally{g(!1)}},ke=async R=>{const X=cn();if(!X)return{cognitoGroups:[],customGroups:[]};try{const ge=await Q(`${X}/admin/users/${encodeURIComponent(R.username)}/groups`);if(!ge.ok)return{cognitoGroups:[],customGroups:[]};const ue=await ge.json();return{cognitoGroups:ue.cognitoGroups??[],customGroups:ue.customGroups??[]}}catch{return{cognitoGroups:[],customGroups:[]}}},Z=async()=>{var ge;const R=cn();if(!R){$("API URL not set."),P(!1);return}if(!((ge=window.auth)!=null&&ge.getAccessToken)){$("Sign in required."),P(!1);return}P(!0),$(null);try{const ue=await Q(`${R}/admin/groups`);if(!ue.ok)throw new Error(await ue.text());const ye=((await ue.json()).groups??[]).map(Pe=>({name:Pe.name??(Pe.PK??"").replace("GROUP#",""),description:Pe.description,permissions:Array.isArray(Pe.permissions)?Pe.permissions:[]}));ye.sort((Pe,Jt)=>Pe.name.toLowerCase().localeCompare(Jt.name.toLowerCase())),k(ye)}catch(ue){$((ue==null?void 0:ue.message)??"Failed to load groups")}finally{P(!1)}};i.useEffect(()=>{const R=parseInt(sessionStorage.getItem("funkedupshift_lastlogin_tz")??"-8",10);!isNaN(R)&&Ji.some(X=>X.value===R)&&h(R)},[]),i.useEffect(()=>{xe&&o==="users"&&$e()},[xe,o]),i.useEffect(()=>{xe&&(o==="groups"||o==="roles")&&Z()},[xe,o]);const de=async()=>{var ge;const R=cn();if(!R){te("API URL not set."),Y(!1);return}if(!((ge=window.auth)!=null&&ge.getAccessToken)){te("Sign in required."),Y(!1);return}Y(!0),te(null);try{const ue=await Q(`${R}/admin/roles`);if(!ue.ok){const ye=await ue.json().catch(()=>({}));throw new Error(ye.error||"Failed to load roles")}const ve=await ue.json();T(ve.roles??[])}catch(ue){te((ue==null?void 0:ue.message)??"Failed to load roles")}finally{Y(!1)}};i.useEffect(()=>{We&&o==="roles"&&de()},[We,o]);const Ie=R=>{t(`/admin/users/edit?username=${encodeURIComponent(R.username)}&email=${encodeURIComponent(R.email??"")}&status=${encodeURIComponent(R.status??"")}`)},Ue=(R,X)=>{const ge=[];return(R||[]).forEach(ue=>{const ve=$a[ue]||ue,ye=ue==="admin"?"bg-amber-500/20 text-amber-200":ue==="manager"?"bg-blue-500/20 text-blue-200":"bg-slate-600/30 text-slate-300";ge.push(s.jsx("span",{className:`inline-block px-2 py-0.5 rounded text-xs mr-1 ${ye}`,children:ve},`c-${ue}`))}),(X||[]).forEach(ue=>{ge.push(s.jsx("span",{className:"inline-block px-2 py-0.5 rounded text-xs mr-1 bg-emerald-500/20 text-emerald-200",children:ue},`x-${ue}`))}),ge.length?ge:s.jsx("span",{className:"text-slate-500",children:""})},Ee=R=>{U(R.name),N(R.description??""),ne((R.permissions??[]).join(", ")),D(null)},Le=()=>{U(null),N(""),ne(""),D(null)},De=async R=>{var ye;R.preventDefault();const X=K.trim();if(!X)return;const ge=cn();if(!ge||!((ye=window.auth)!=null&&ye.getAccessToken))return;const ve=re.split(",").map(Pe=>Pe.trim()).filter(Boolean);oe(!0),j(null),$(null);try{const Pe=await Q(`${ge}/admin/groups`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:X,description:q.trim(),permissions:ve})});if(!Pe.ok){const Jt=await Pe.json().catch(()=>({}));throw new Error(Jt.error||"Failed to create group")}F(""),G(""),J(""),j("Group created."),Z()}catch(Pe){$((Pe==null?void 0:Pe.message)??"Failed to create group")}finally{oe(!1)}},yn=async R=>{var ve;if(R.preventDefault(),!E)return;const X=cn();if(!X||!((ve=window.auth)!=null&&ve.getAccessToken))return;const ue=H.split(",").map(ye=>ye.trim()).filter(Boolean);W(!0),D(null);try{const ye=await Q(`${X}/admin/groups/${encodeURIComponent(E)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:B,permissions:ue})});if(!ye.ok){const Pe=await ye.json().catch(()=>({}));throw new Error(Pe.error||"Failed to update group")}k(Pe=>Pe.map(Jt=>Jt.name===E?{...Jt,description:B,permissions:ue}:Jt)),Le()}catch(ye){D((ye==null?void 0:ye.message)??"Failed to update group")}finally{W(!1)}},vn=async R=>{var ue;if(!window.confirm(`Delete group "${R}"? Members will lose access.`))return;const X=cn();if(!(!X||!((ue=window.auth)!=null&&ue.getAccessToken))){ee(R);try{const ve=await Q(`${X}/admin/groups/${encodeURIComponent(R)}`,{method:"DELETE"});if(!ve.ok){const ye=await ve.json().catch(()=>({}));throw new Error(ye.error||"Failed to delete group")}k(ye=>ye.filter(Pe=>Pe.name!==R)),E===R&&Le()}catch(ve){$((ve==null?void 0:ve.message)??"Failed to delete group")}finally{ee(null)}}},gt=R=>{const X=parseInt(R.target.value,10);h(X),sessionStorage.setItem("funkedupshift_lastlogin_tz",String(X))},dt=(R,X,ge)=>{X.includes(R)?ge(X.filter(ue=>ue!==R)):ge([...X,R])},bn=(R,X,ge)=>{X.includes(R)?ge(X.filter(ue=>ue!==R)):ge([...X,R])},ur=async R=>{var ve;R.preventDefault();const X=ce.trim();if(!X)return;const ge=cn();if(!(!ge||!((ve=window.auth)!=null&&ve.getAccessToken))){ae(!0),Fe(null),te(null);try{const ye=await Q(`${ge}/admin/roles`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:X,cognitoGroups:be,customGroups:je})});if(!ye.ok){const Pe=await ye.json().catch(()=>({}));throw new Error(Pe.error||"Failed to create role")}pe(""),Ne([]),Ke([]),Fe("Role created."),de()}catch(ye){te((ye==null?void 0:ye.message)??"Failed to create role")}finally{ae(!1)}}},Yl=R=>{Se(R.name),Be(R.cognitoGroups??[]),lt(R.customGroups??[]),Et(null)},_t=()=>{Se(null),Be([]),lt([]),Et(null)},L=async R=>{var ue;if(R.preventDefault(),!Te)return;const X=cn();if(!(!X||!((ue=window.auth)!=null&&ue.getAccessToken))){$t(!0),Et(null);try{const ve=await Q(`${X}/admin/roles/${encodeURIComponent(Te)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({cognitoGroups:_e,customGroups:Xe})});if(!ve.ok){const ye=await ve.json().catch(()=>({}));throw new Error(ye.error||"Failed to update role")}T(ye=>ye.map(Pe=>Pe.name===Te?{...Pe,cognitoGroups:_e,customGroups:Xe}:Pe)),_t()}catch(ve){Et((ve==null?void 0:ve.message)??"Failed to update role")}finally{$t(!1)}}},he=async R=>{var ue;if(!window.confirm(`Delete role "${R}"?`))return;const X=cn();if(!(!X||!((ue=window.auth)!=null&&ue.getAccessToken))){le(R);try{const ve=await Q(`${X}/admin/roles/${encodeURIComponent(R)}`,{method:"DELETE"});if(!ve.ok){const ye=await ve.json().catch(()=>({}));throw new Error(ye.error||"Failed to delete role")}T(ye=>ye.filter(Pe=>Pe.name!==R)),Te===R&&_t()}catch(ve){te((ve==null?void 0:ve.message)??"Failed to delete role")}finally{le(null)}}};return xe?s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ie,{to:"/",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Home"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Membership"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manage users and groups."})]}),s.jsxs("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:[s.jsx("button",{type:"button",onClick:()=>u("users"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="users"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Users"}),s.jsx("button",{type:"button",onClick:()=>u("groups"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="groups"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Groups"}),We&&s.jsx("button",{type:"button",onClick:()=>u("roles"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="roles"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Roles"})]}),o==="users"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("label",{htmlFor:"tz-select",className:"text-slate-500",children:"Last login timezone:"}),s.jsx("select",{id:"tz-select",value:x,onChange:gt,className:"rounded border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 text-sm",children:Ji.map(R=>s.jsx("option",{value:R.value,children:R.label},R.value))})]}),v&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:v}),s.jsx("div",{className:"overflow-x-auto rounded-lg border border-slate-800",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-800",children:[s.jsx("thead",{className:"bg-slate-900/80",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Email"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Status"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Last login"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"System Roles"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Custom Groups"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-800",children:f&&d.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-slate-500",children:"Loading"})}):d.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-slate-500",children:"No users found."})}):d.map(R=>s.jsx(Kv,{user:R,tzOffset:x,formatLastLogin:Wv,renderGroupBadges:Ue,loadUserGroups:ke,onClick:()=>Ie(R)},R.username))})]})}),y&&s.jsx("div",{className:"flex justify-center",children:s.jsx("button",{type:"button",onClick:()=>$e(y),disabled:f,className:"rounded-md border border-slate-700 px-4 py-2 text-sm font-medium text-slate-200 hover:bg-slate-800 disabled:opacity-50",children:f?"Loading":"Load more"})})]}),o==="groups"&&s.jsxs(s.Fragment,{children:[s.jsxs("form",{className:"space-y-3 max-w-md",onSubmit:De,children:[s.jsx("h2",{className:"text-sm font-medium text-slate-300",children:"Create group"}),s.jsx("input",{type:"text",value:K,onChange:R=>F(R.target.value),placeholder:"Name (alphanumeric, underscore, hyphen)",required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("input",{type:"text",value:q,onChange:R=>G(R.target.value),placeholder:"Description (optional)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("input",{type:"text",value:re,onChange:R=>J(R.target.value),placeholder:"Permissions (comma-separated, e.g. media:edit, sites:add)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("button",{type:"submit",disabled:V||!K.trim(),className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:V?"Creating":"Create"}),fe&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:fe}),I&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:I})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-sm font-medium text-slate-300 mb-2",children:"Custom groups"}),C?s.jsx("p",{className:"text-sm text-slate-500",children:"Loading"}):m.length===0?s.jsx("p",{className:"text-sm text-slate-500",children:"No custom groups yet. Create one above."}):s.jsx("ul",{className:"space-y-2",children:m.map(R=>s.jsx("li",{className:"rounded-lg border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm",children:E===R.name?s.jsxs("form",{onSubmit:yn,className:"space-y-2",children:[s.jsx("span",{className:"font-medium text-slate-200",children:R.name}),s.jsx("input",{type:"text",value:B,onChange:X=>N(X.target.value),placeholder:"Description (optional)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("input",{type:"text",value:H,onChange:X=>ne(X.target.value),placeholder:"Permissions (comma-separated)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsxs("div",{className:"flex gap-2 flex-wrap",children:[s.jsx("button",{type:"submit",disabled:_,className:"rounded-md bg-brand-orange px-3 py-1.5 text-xs font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:_?"Saving":"Save"}),s.jsx("button",{type:"button",onClick:Le,className:"rounded-md border border-slate-700 px-3 py-1.5 text-xs font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"}),s.jsx("button",{type:"button",onClick:()=>vn(R.name),disabled:M===R.name,className:"rounded-md border border-red-500/60 px-3 py-1.5 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:M===R.name?"Deleting":"Delete"})]}),A&&s.jsx("p",{className:"text-xs text-red-400",children:A})]}):s.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("span",{className:"font-medium text-slate-200",children:R.name}),R.description&&s.jsx("span",{className:"text-slate-500 ml-2",children:R.description}),R.permissions&&R.permissions.length>0&&s.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Permissions: ",R.permissions.join(", ")]})]}),s.jsxs("div",{className:"flex gap-2 shrink-0",children:[s.jsx("button",{type:"button",onClick:()=>Ee(R),className:"rounded-md border border-slate-700 px-2 py-1 text-xs font-medium text-slate-300 hover:bg-slate-800",children:"Edit"}),s.jsx("button",{type:"button",onClick:()=>vn(R.name),disabled:M===R.name,className:"rounded-md border border-red-500/60 px-2 py-1 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:M===R.name?"Deleting":"Delete"})]})]})},R.name))})]})]}),o==="roles"&&We&&s.jsxs(s.Fragment,{children:[s.jsxs("form",{className:"space-y-3 max-w-md",onSubmit:ur,children:[s.jsx("h2",{className:"text-sm font-medium text-slate-300",children:"Create role"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Define a named role by selecting Cognito groups and custom groups. Use for impersonation."}),s.jsx("input",{type:"text",value:ce,onChange:R=>pe(R.target.value),placeholder:"Role name (e.g. Squash Manager)",required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Cognito groups"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:Ed.map(R=>s.jsx("button",{type:"button",onClick:()=>dt(R,be,Ne),className:`rounded-md px-2 py-1 text-xs font-medium ${be.includes(R)?"bg-blue-500/30 text-blue-200":"border border-slate-600 text-slate-400 hover:bg-slate-800"}`,children:$a[R]||R},R))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Custom groups"}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.map(R=>s.jsx("button",{type:"button",onClick:()=>bn(R.name,je,Ke),className:`rounded-md px-2 py-1 text-xs font-medium ${je.includes(R.name)?"bg-emerald-500/30 text-emerald-200":"border border-slate-600 text-slate-400 hover:bg-slate-800"}`,children:R.name},R.name)),m.length===0&&s.jsx("span",{className:"text-xs text-slate-500",children:"Create groups first."})]})]}),s.jsx("button",{type:"submit",disabled:at||!ce.trim(),className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:at?"Creating":"Create"}),we&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:we}),O&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:O})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-sm font-medium text-slate-300 mb-2",children:"Defined roles"}),z?s.jsx("p",{className:"text-sm text-slate-500",children:"Loading"}):w.length===0?s.jsx("p",{className:"text-sm text-slate-500",children:"No roles yet. Create one above."}):s.jsx("ul",{className:"space-y-2",children:w.map(R=>s.jsx("li",{className:"rounded-lg border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm",children:Te===R.name?s.jsxs("form",{onSubmit:L,className:"space-y-2",children:[s.jsx("span",{className:"font-medium text-slate-200",children:R.name}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Cognito groups"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:Ed.map(X=>s.jsx("button",{type:"button",onClick:()=>dt(X,_e,Be),className:`rounded-md px-2 py-1 text-xs ${_e.includes(X)?"bg-blue-500/30 text-blue-200":"border border-slate-600 text-slate-400"}`,children:$a[X]||X},X))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Custom groups"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:m.map(X=>s.jsx("button",{type:"button",onClick:()=>bn(X.name,Xe,lt),className:`rounded-md px-2 py-1 text-xs ${Xe.includes(X.name)?"bg-emerald-500/30 text-emerald-200":"border border-slate-600 text-slate-400"}`,children:X.name},X.name))})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"submit",disabled:nt,className:"rounded-md bg-brand-orange px-3 py-1.5 text-xs font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:nt?"Saving":"Save"}),s.jsx("button",{type:"button",onClick:_t,className:"rounded-md border border-slate-700 px-3 py-1.5 text-xs text-slate-300 hover:bg-slate-800",children:"Cancel"}),s.jsx("button",{type:"button",onClick:()=>he(R.name),disabled:ln===R.name,className:"rounded-md border border-red-500/60 px-3 py-1.5 text-xs text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:ln===R.name?"Deleting":"Delete"})]}),gn&&s.jsx("p",{className:"text-xs text-red-400",children:gn})]}):s.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("span",{className:"font-medium text-slate-200",children:R.name}),s.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[(R.cognitoGroups??[]).map(X=>s.jsx("span",{className:"inline-block px-2 py-0.5 rounded text-xs bg-blue-500/20 text-blue-200",children:$a[X]||X},`c-${X}`)),(R.customGroups??[]).map(X=>s.jsx("span",{className:"inline-block px-2 py-0.5 rounded text-xs bg-emerald-500/20 text-emerald-200",children:X},`x-${X}`))]})]}),s.jsxs("div",{className:"flex gap-2 shrink-0",children:[s.jsx("button",{type:"button",onClick:()=>Yl(R),className:"rounded-md border border-slate-700 px-2 py-1 text-xs text-slate-300 hover:bg-slate-800",children:"Edit"}),s.jsx("button",{type:"button",onClick:()=>he(R.name),disabled:ln===R.name,className:"rounded-md border border-red-500/60 px-2 py-1 text-xs text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:ln===R.name?"Deleting":"Delete"})]})]})},R.name))})]})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Membership"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})},Kv=({user:e,tzOffset:t,formatLastLogin:n,renderGroupBadges:r,loadUserGroups:a,onClick:l})=>{const[o,c]=i.useState(null);return i.useEffect(()=>{let u=!1;return a(e).then(d=>{u||c(d)}),()=>{u=!0}},[e.username]),s.jsxs("tr",{className:"cursor-pointer hover:bg-slate-800/50 transition-colors",onClick:l,children:[s.jsx("td",{className:"px-4 py-3 text-sm text-slate-200",children:e.email||e.username||""}),s.jsx("td",{className:"px-4 py-3 text-sm text-slate-400",children:e.status||""}),s.jsx("td",{className:"px-4 py-3 text-sm text-slate-400",children:n(e.lastLoginAt??"",t,e.lastLoginIp)}),s.jsx("td",{className:"px-4 py-3 text-sm",children:o?r(o.cognitoGroups,[]):s.jsx("span",{className:"text-slate-500",children:""})}),s.jsx("td",{className:"px-4 py-3 text-sm",children:o?r([],o.customGroups):s.jsx("span",{className:"text-slate-500",children:""})})]})};function ls(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Pd=100,Vv=5*1024*1024,qv=()=>{const e=Vt(),{user:t}=Oe(),[n,r]=qt(),a=n.get("tab"),l=a==="categories"?"categories":"add",[o,c]=i.useState(l);i.useEffect(()=>{c(a==="categories"?"categories":"add")},[a]);const u=Z=>{c(Z);const de=new URLSearchParams(n);Z==="categories"?de.set("tab","categories"):de.delete("tab"),r(de)},[d,p]=i.useState([]),[f,g]=i.useState(""),[v,b]=i.useState(""),[y,S]=i.useState(""),[x,h]=i.useState(!1),[m,k]=i.useState(null),[C,P]=i.useState(null),[I,$]=i.useState(null),[K,F]=i.useState(""),[q,G]=i.useState([]),[re,J]=i.useState(""),[V,oe]=i.useState(!1),[fe,j]=i.useState(!1),[E,U]=i.useState(null),[B,N]=i.useState(null),[H,ne]=i.useState(!1),_=i.useRef(null),[W,A]=i.useState(!0),[D,M]=i.useState(null),[ee,w]=i.useState(""),[T,z]=i.useState(""),[Y,O]=i.useState(!1),[te,ce]=i.useState(null),[pe,be]=i.useState(null),[Ne,je]=i.useState(""),[Ke,at]=i.useState(""),[ae,we]=i.useState(!1),[Fe,Te]=i.useState(null),[Se,_e]=i.useState(null),Be=ct(t??null,"manager");i.useEffect(()=>{var Ie;if(!Be)return;const Z=ls();if(!Z)return;const de=window;(Ie=de.auth)!=null&&Ie.getAccessToken&&(async()=>{if(!await new Promise(De=>de.auth.getAccessToken(De)))return;const Ue=await Q(`${Z}/categories`);if(!Ue.ok)return;const Le=((await Ue.json()).categories??[]).map(De=>({id:De.PK||De.id||"",name:De.name||De.PK||"",description:De.description}));p(Le)})()},[Be]),i.useEffect(()=>{function Z(de){_.current&&!_.current.contains(de.target)&&oe(!1)}if(V)return document.addEventListener("mousedown",Z),()=>document.removeEventListener("mousedown",Z)},[V]);const Xe=d.filter(Z=>!q.includes(Z.id)&&(!re.trim()||(Z.name||"").toLowerCase().includes(re.toLowerCase()))),lt=Z=>{var Ue;const de=(Ue=Z.target.files)==null?void 0:Ue[0];if(k(de??null),de&&F(""),$(null),C&&(URL.revokeObjectURL(C),P(null)),!de)return;if(de.size>Vv){$("Logo must be 5 MB or smaller.");return}const Ie=new Image;Ie.onload=()=>{if(Ie.naturalWidth<Pd||Ie.naturalHeight<Pd){$("Logo must be at least 100100 pixels.");return}$(null),P(URL.createObjectURL(de))},Ie.onerror=()=>$("Please choose a valid image file."),Ie.src=URL.createObjectURL(de)},nt=Z=>{q.includes(Z)||G([...q,Z]),J("")},$t=Z=>{G(q.filter(de=>de!==Z))},gn=async()=>{var Ie;const Z=ls();if(!Z){M("API URL not set."),A(!1);return}if(!((Ie=window.auth)!=null&&Ie.getAccessToken)){M("Sign in required."),A(!1);return}A(!0),M(null);try{const Ue=await Q(`${Z}/categories`);if(!Ue.ok)throw new Error(await Ue.text());const Le=((await Ue.json()).categories??[]).map(De=>({id:De.PK||De.id||"",name:De.name||De.PK||"",description:De.description}));p(Le)}catch(Ue){M((Ue==null?void 0:Ue.message)??"Failed to load categories.")}finally{A(!1)}};i.useEffect(()=>{Be&&o==="categories"&&gn()},[Be,o]);const Et=async()=>{var Ue;const Z=f.trim();if(!Z){N("Enter URL first.");return}const de=ls();if(!de){N("API URL not set.");return}if(!((Ue=window.auth)!=null&&Ue.getAccessToken)){N("Sign in required.");return}ne(!0),N(null);try{const Ee=await Q(`${de}/sites/generate-description`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:Z})});if(!Ee.ok)throw new Error(await Ee.text());const Le=await Ee.json();S(Le.description??""),h(!0)}catch(Ee){N((Ee==null?void 0:Ee.message)??"Failed to generate description.")}finally{ne(!1)}},ln=async Z=>{var Ee;Z.preventDefault();const de=f.trim();if(!de){N("URL is required.");return}const Ie=ls();if(!Ie){N("API URL not set.");return}if(!((Ee=window.auth)!=null&&Ee.getAccessToken)){N("Sign in required.");return}if(!(m&&I)){j(!0),N(null),U(null);try{let Le=null;if(K.trim()){const gt=await Q(`${Ie}/sites/logo-from-url`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({siteId:"new",imageUrl:K.trim()})});if(!gt.ok){const bn=await gt.json().catch(()=>({}));throw new Error(bn.error||await gt.text())}const dt=await gt.json();dt.key&&(Le=dt.key)}else if(m){const gt=await Q(`${Ie}/sites/logo-upload`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({siteId:"new",contentType:m.type||"image/png"})});if(!gt.ok)throw new Error("Logo upload request failed");const{uploadUrl:dt,key:bn}=await gt.json();if(!(await fetch(dt,{method:"PUT",headers:{"Content-Type":m.type||"image/png"},body:m})).ok)throw new Error("Logo upload failed");Le=bn}const De={url:de,title:v.trim()||de,description:y.trim(),categoryIds:q};x&&(De.descriptionAiGenerated=!0),Le&&(De.logoKey=Le);const yn=await Q(`${Ie}/sites`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(De)});if(!yn.ok)throw new Error(await yn.text());const vn=await yn.json();U(`Site added: ${vn.title||vn.url||de}`),g(""),b(""),S(""),h(!1),k(null),C&&URL.revokeObjectURL(C),P(null),G([]),setTimeout(()=>e("/websites"),1500)}catch(Le){N((Le==null?void 0:Le.message)??"Failed to add site.")}finally{j(!1)}}},le=Z=>{be(Z.id),je(Z.name),at(Z.description??"")},xe=()=>{be(null),je(""),at(""),Te(null)},We=async Z=>{var Ue;if(Z.preventDefault(),!pe)return;const de=ls();if(!(!de||!((Ue=window.auth)!=null&&Ue.getAccessToken))){we(!0),Te(null);try{const Ee=await Q(`${de}/categories`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:pe,name:Ne.trim(),description:Ke.trim()||void 0})});if(!Ee.ok)throw new Error(await Ee.text());p(Le=>Le.map(De=>De.id===pe?{...De,name:Ne.trim(),description:Ke.trim()||void 0}:De)),xe()}catch(Ee){Te((Ee==null?void 0:Ee.message)??"Failed to update category.")}finally{we(!1)}}},$e=async Z=>{var Ue;if(!window.confirm("Delete this category? Sites using it will lose this category."))return;const de=ls();if(!(!de||!((Ue=window.auth)!=null&&Ue.getAccessToken))){_e(Z);try{const Ee=await Q(`${de}/categories?id=${encodeURIComponent(Z)}`,{method:"DELETE"});if(!Ee.ok)throw new Error(await Ee.text());p(Le=>Le.filter(De=>De.id!==Z)),pe===Z&&xe()}catch(Ee){M((Ee==null?void 0:Ee.message)??"Failed to delete category.")}finally{_e(null)}}},ke=async Z=>{var Ee;Z.preventDefault();const de=ee.trim();if(!de)return;const Ie=ls();if(!(!Ie||!((Ee=window.auth)!=null&&Ee.getAccessToken))){O(!0),ce(null),M(null);try{const Le=await Q(`${Ie}/categories`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:de,description:T.trim()})});if(!Le.ok)throw new Error(await Le.text());w(""),z(""),ce("Category created."),gn()}catch(Le){M((Le==null?void 0:Le.message)??"Failed to create category.")}finally{O(!1)}}};return Be?s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ie,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Websites"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Websites"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Add sites and manage website categories."})]}),s.jsxs("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:[s.jsx("button",{type:"button",onClick:()=>u("add"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="add"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Add Site"}),s.jsx("button",{type:"button",onClick:()=>u("categories"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="categories"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Website Categories"})]}),o==="add"&&s.jsxs("form",{className:"space-y-4 max-w-xl",onSubmit:ln,children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"URL *"}),s.jsx("input",{type:"url",value:f,onChange:Z=>g(Z.target.value),placeholder:"https://example.com",required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Title (optional)"}),s.jsx("input",{type:"text",value:v,onChange:Z=>b(Z.target.value),placeholder:"Display title",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description (optional)"}),s.jsx("textarea",{value:y,onChange:Z=>{S(Z.target.value),h(!1)},placeholder:"Short description",rows:4,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("button",{type:"button",onClick:Et,disabled:H||!f.trim(),className:"mt-2 rounded-md border border-slate-700 bg-slate-800 px-3 py-1.5 text-xs font-medium text-slate-200 hover:bg-slate-700 disabled:opacity-50",children:H?"Generating":"Generate AI description"}),x&&s.jsx("span",{className:"ml-2 text-xs uppercase tracking-wide text-slate-500",children:"AI summary"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Logo (optional, min 100100, max 5 MB)"}),s.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/gif,image/webp",onChange:lt,className:"block w-full text-xs text-slate-300 file:mr-3 file:rounded-md file:border-0 file:bg-slate-800 file:px-3 file:py-1.5 file:text-slate-100"}),s.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Or paste image URL (image will be copied to S3 on save):"}),s.jsx("input",{type:"url",value:K,onChange:Z=>{F(Z.target.value),Z.target.value.trim()&&k(null)},placeholder:"https://example.com/logo.png",className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),C&&s.jsx("div",{className:"mt-2",children:s.jsx("img",{src:C,alt:"Preview",className:"h-16 w-16 rounded-lg border border-slate-700 object-cover"})}),I&&s.jsx("p",{className:"mt-1 text-xs text-red-400",children:I})]}),s.jsxs("div",{ref:_,className:"relative",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Categories (optional)"}),s.jsx("input",{type:"text",value:re,onChange:Z=>J(Z.target.value),onFocus:()=>oe(!0),placeholder:"Search and select",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),V&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"absolute left-0 right-0 top-full z-10 mt-1 max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",children:Xe.length?Xe.map(Z=>s.jsx("button",{type:"button",onClick:()=>nt(Z.id),className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:Z.name},Z.id)):s.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:"No matches"})}),d.length===0&&s.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["No categories."," ",s.jsx("button",{type:"button",onClick:()=>u("categories"),className:"text-brand-orange hover:underline",children:"Create categories"})]})]}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:q.map(Z=>{const de=d.find(Ie=>Ie.id===Z);return s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(de==null?void 0:de.name)??Z,s.jsx("button",{type:"button",onClick:()=>$t(Z),className:"hover:text-red-400","aria-label":"Remove",children:""})]},Z)})})]}),s.jsx("button",{type:"submit",disabled:fe,className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:fe?"Adding":"Add Site"}),E&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:E}),B&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:B})]}),o==="categories"&&s.jsxs(s.Fragment,{children:[s.jsxs("form",{className:"space-y-3 max-w-md",onSubmit:ke,children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"New category name"}),s.jsx("input",{type:"text",value:ee,onChange:Z=>w(Z.target.value),placeholder:"e.g. Developer tools",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description (optional)"}),s.jsx("input",{type:"text",value:T,onChange:Z=>z(Z.target.value),placeholder:"Optional description",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsx("button",{type:"submit",disabled:Y||!ee.trim(),className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:Y?"Creating":"Create category"}),te&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:te}),D&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:D})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-sm font-medium text-slate-300 mb-2",children:"Existing categories"}),W?s.jsx("p",{className:"text-sm text-slate-500",children:"Loading"}):d.length===0?s.jsx("p",{className:"text-sm text-slate-500",children:"No categories yet. Create one above."}):s.jsx("ul",{className:"space-y-2",children:d.map(Z=>s.jsx("li",{className:"rounded-lg border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm",children:pe===Z.id?s.jsxs("form",{onSubmit:We,className:"space-y-2",children:[s.jsx("input",{type:"text",value:Ne,onChange:de=>je(de.target.value),placeholder:"Name",required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",autoFocus:!0}),s.jsx("input",{type:"text",value:Ke,onChange:de=>at(de.target.value),placeholder:"Description (optional)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsxs("div",{className:"flex gap-2 flex-wrap",children:[s.jsx("button",{type:"submit",disabled:ae||!Ne.trim(),className:"rounded-md bg-brand-orange px-3 py-1.5 text-xs font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:ae?"Saving":"Save"}),s.jsx("button",{type:"button",onClick:xe,className:"rounded-md border border-slate-700 px-3 py-1.5 text-xs font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"}),s.jsx("button",{type:"button",onClick:()=>$e(Z.id),disabled:Se===Z.id,className:"rounded-md border border-red-500/60 px-3 py-1.5 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:Se===Z.id?"Deleting":"Delete"})]}),Fe&&s.jsx("p",{className:"text-xs text-red-400",children:Fe})]}):s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>le(Z),className:"flex-1 min-w-0 text-left hover:bg-slate-800/50 rounded px-1 -mx-1 py-1 -my-1 transition-colors",children:[s.jsx("span",{className:"font-medium text-slate-200",children:Z.name}),Z.description&&s.jsx("span",{className:"text-slate-500 truncate max-w-xs ml-2",children:Z.description})]}),s.jsx("button",{type:"button",onClick:()=>$e(Z.id),disabled:Se===Z.id,className:"rounded px-2 py-1 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50 shrink-0","aria-label":"Delete category",children:Se===Z.id?"":"Delete"})]})},Z.id))})]})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Websites"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})};function Es(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function Jv(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}const Qv=()=>{const e=Vt(),{user:t}=Oe(),[n,r]=qt(),a=n.get("tab"),l=a==="categories"?"categories":"add",[o,c]=i.useState(l);i.useEffect(()=>{c(a==="categories"?"categories":"add")},[a]);const u=le=>{c(le);const xe=new URLSearchParams(n);le==="categories"?xe.set("tab","categories"):xe.delete("tab"),r(xe)},[d,p]=i.useState([]),[f,g]=i.useState(""),[v,b]=i.useState(""),[y,S]=i.useState(null),[x,h]=i.useState(null),[m,k]=i.useState(null),[C,P]=i.useState(!1),[I,$]=i.useState([]),[K,F]=i.useState(""),[q,G]=i.useState(!1),[re,J]=i.useState(!1),[V,oe]=i.useState(null),[fe,j]=i.useState(null),E=i.useRef(null),[U,B]=i.useState(!0),[N,H]=i.useState(null),[ne,_]=i.useState(""),[W,A]=i.useState(""),[D,M]=i.useState(!1),[ee,w]=i.useState(null),[T,z]=i.useState(null),[Y,O]=i.useState(""),[te,ce]=i.useState(""),[pe,be]=i.useState(!1),[Ne,je]=i.useState(null),[Ke,at]=i.useState(null),ae=ct(t??null,"manager");i.useEffect(()=>{if(!ae)return;const le=Es();le&&(async()=>{try{const xe=await Q(`${le}/media-categories`);if(!xe.ok)return;const $e=((await xe.json()).categories??[]).map(ke=>({id:ke.PK||ke.id||"",name:ke.name||ke.PK||"",description:ke.description}));p($e)}catch{}})()},[ae]),i.useEffect(()=>{function le(xe){E.current&&!E.current.contains(xe.target)&&G(!1)}if(q)return document.addEventListener("mousedown",le),()=>document.removeEventListener("mousedown",le)},[q]);const we=d.filter(le=>!I.includes(le.id)&&(!K.trim()||(le.name||"").toLowerCase().includes(K.toLowerCase()))),Fe=le=>{var We;const xe=(We=le.target.files)==null?void 0:We[0];S(xe??null),k(null),j(null),x&&(URL.revokeObjectURL(x),h(null)),xe&&(h(URL.createObjectURL(xe)),xe.type.startsWith("video/")&&P(!0))},Te=i.useRef(null),Se=le=>{var We;const xe=(We=le.target.files)==null?void 0:We[0];xe&&xe.type.startsWith("image/")&&(k(xe),P(!1)),le.target.value=""},_e=le=>{I.includes(le)||$([...I,le]),F("")},Be=le=>{$(I.filter(xe=>xe!==le))},Xe=async()=>{var We;const le=Es();if(!le){H("API URL not set."),B(!1);return}if(!((We=window.auth)!=null&&We.getAccessToken)){H("Sign in required."),B(!1);return}B(!0),H(null);try{const $e=await Q(`${le}/media-categories`);if(!$e.ok)throw new Error(await $e.text());const Z=((await $e.json()).categories??[]).map(de=>({id:de.PK||de.id||"",name:de.name||de.PK||"",description:de.description}));p(Z)}catch($e){H(($e==null?void 0:$e.message)??"Failed to load media categories.")}finally{B(!1)}};i.useEffect(()=>{ae&&o==="categories"&&Xe()},[ae,o]);const lt=async le=>{var Z;if(le.preventDefault(),!y){j("Please select an image or video file.");return}const xe=Es();if(!xe){j("API URL not set.");return}if(!((Z=window.auth)!=null&&Z.getAccessToken)){j("Sign in required.");return}const $e=y.type.startsWith("video/")?"video":"image",ke=`MEDIA#${Jv()}`;J(!0),j(null),oe(null);try{const de=await Q(`${xe}/media/upload`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mediaId:ke,mediaType:$e,contentType:y.type||($e==="image"?"image/png":"video/mp4")})});if(!de.ok)throw new Error("Upload request failed");const{uploadUrl:Ie,key:Ue}=await de.json(),Ee=await Q(`${xe}/media`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:ke,mediaKey:Ue,title:f.trim()||"Untitled",description:v.trim(),mediaType:$e,categoryIds:I})});if(!Ee.ok)throw new Error(await Ee.text());if(!(await fetch(Ie,{method:"PUT",headers:{"Content-Type":y.type||($e==="image"?"image/png":"video/mp4")},body:y})).ok)throw new Error("File upload failed");if($e==="video"&&m){const De=await Q(`${xe}/media/thumbnail-upload`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mediaId:ke,contentType:m.type||"image/jpeg"})});if(De.ok){const{uploadUrl:yn,key:vn}=await De.json();(await fetch(yn,{method:"PUT",headers:{"Content-Type":m.type||"image/jpeg"},body:m})).ok&&((await Q(`${xe}/media`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:ke,thumbnailKey:vn})})).ok||console.warn("Thumbnail uploaded but update failed"))}}oe("Media added."),g(""),b(""),S(null),k(null),x&&URL.revokeObjectURL(x),h(null),$([]),setTimeout(()=>e("/media"),1500)}catch(de){j((de==null?void 0:de.message)??"Failed to add media.")}finally{J(!1)}},nt=le=>{z(le.id),O(le.name),ce(le.description??"")},$t=()=>{z(null),O(""),ce(""),je(null)},gn=async le=>{var $e;if(le.preventDefault(),!T)return;const xe=Es();if(!(!xe||!(($e=window.auth)!=null&&$e.getAccessToken))){be(!0),je(null);try{const ke=await Q(`${xe}/media-categories`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:T,name:Y.trim(),description:te.trim()||void 0})});if(!ke.ok)throw new Error(await ke.text());p(Z=>Z.map(de=>de.id===T?{...de,name:Y.trim(),description:te.trim()||void 0}:de)),$t()}catch(ke){je((ke==null?void 0:ke.message)??"Failed to update media category.")}finally{be(!1)}}},Et=async le=>{var $e;if(!window.confirm("Delete this media category? Media using it will lose this category."))return;const xe=Es();if(!(!xe||!(($e=window.auth)!=null&&$e.getAccessToken))){at(le);try{const ke=await Q(`${xe}/media-categories?id=${encodeURIComponent(le)}`,{method:"DELETE"});if(!ke.ok)throw new Error(await ke.text());p(Z=>Z.filter(de=>de.id!==le)),T===le&&$t()}catch(ke){H((ke==null?void 0:ke.message)??"Failed to delete media category.")}finally{at(null)}}},ln=async le=>{var ke;le.preventDefault();const xe=ne.trim();if(!xe)return;const We=Es();if(!(!We||!((ke=window.auth)!=null&&ke.getAccessToken))){M(!0),w(null),H(null);try{const Z=await Q(`${We}/media-categories`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:xe,description:W.trim()})});if(!Z.ok)throw new Error(await Z.text());_(""),A(""),w("Media category created."),Xe()}catch(Z){H((Z==null?void 0:Z.message)??"Failed to create media category.")}finally{M(!1)}}};return ae?s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ie,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Media"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Media"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Add media and manage media categories."})]}),s.jsxs("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:[s.jsx("button",{type:"button",onClick:()=>u("add"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="add"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Add Media"}),s.jsx("button",{type:"button",onClick:()=>u("categories"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="categories"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Media Categories"})]}),o==="add"&&s.jsxs("form",{className:"space-y-4 max-w-xl",onSubmit:lt,children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Title (optional)"}),s.jsx("input",{type:"text",value:f,onChange:le=>g(le.target.value),placeholder:"Untitled",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description (optional)"}),s.jsx("textarea",{value:v,onChange:le=>b(le.target.value),placeholder:"Description",rows:3,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Image or video *"}),s.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/gif,image/webp,video/mp4,video/webm",onChange:Fe,className:"block w-full text-xs text-slate-300 file:mr-3 file:rounded-md file:border-0 file:bg-slate-800 file:px-3 file:py-1.5 file:text-slate-100"}),s.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Videos get an auto-generated thumbnail from the 34 sec frame. Change it when editing."}),(y==null?void 0:y.type.startsWith("video/"))&&m&&s.jsxs("p",{className:"mt-1 text-xs text-emerald-400",children:["Custom thumbnail: ",m.name," ",s.jsx("button",{type:"button",onClick:()=>P(!0),className:"text-brand-orange hover:underline",children:"Change"})]}),C&&(y==null?void 0:y.type.startsWith("video/"))&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",role:"dialog","aria-modal":"true","aria-labelledby":"thumbnail-dialog-title",onClick:()=>P(!1),children:s.jsxs("div",{className:"rounded-lg border border-slate-700 bg-slate-900 p-6 shadow-xl max-w-sm w-full mx-4",onClick:le=>le.stopPropagation(),children:[s.jsx("h2",{id:"thumbnail-dialog-title",className:"text-lg font-medium text-slate-100 mb-2",children:"Add thumbnail"}),s.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"Choose a custom thumbnail image for this video (optional)."}),s.jsx("input",{ref:Te,type:"file",accept:"image/png,image/jpeg,image/gif,image/webp",onChange:Se,className:"hidden"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:()=>{var le;return(le=Te.current)==null?void 0:le.click()},className:"rounded-md bg-slate-700 px-3 py-2 text-sm font-medium text-slate-100 hover:bg-slate-600",children:"Choose file"}),s.jsx("button",{type:"button",onClick:()=>P(!1),className:"rounded-md border border-slate-600 px-3 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Skip"})]})]})}),x&&s.jsx("div",{className:"mt-2",children:y!=null&&y.type.startsWith("video/")?s.jsx("video",{src:x,muted:!0,controls:!0,className:"max-h-32 rounded-lg border border-slate-700"}):s.jsx("img",{src:x,alt:"Preview",className:"h-24 w-auto rounded-lg border border-slate-700 object-cover"})})]}),s.jsxs("div",{ref:E,className:"relative",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Media categories (optional)"}),s.jsx("input",{type:"text",value:K,onChange:le=>F(le.target.value),onFocus:()=>G(!0),placeholder:"Search and select",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),q&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"absolute left-0 right-0 top-full z-10 mt-1 max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",children:we.length?we.map(le=>s.jsx("button",{type:"button",onClick:()=>_e(le.id),className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:le.name},le.id)):s.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:"No matches"})}),d.length===0&&s.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["No categories."," ",s.jsx("button",{type:"button",onClick:()=>u("categories"),className:"text-brand-orange hover:underline",children:"Create media categories"})]})]}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:I.map(le=>{const xe=d.find(We=>We.id===le);return s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(xe==null?void 0:xe.name)??le,s.jsx("button",{type:"button",onClick:()=>Be(le),className:"hover:text-red-400","aria-label":"Remove",children:""})]},le)})})]}),s.jsx("button",{type:"submit",disabled:re||!y,className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:re?"Uploading":"Add Media"}),V&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:V}),fe&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:fe})]}),o==="categories"&&s.jsxs(s.Fragment,{children:[s.jsxs("form",{className:"space-y-3 max-w-md",onSubmit:ln,children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"New category name"}),s.jsx("input",{type:"text",value:ne,onChange:le=>_(le.target.value),placeholder:"e.g. Tutorials",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description (optional)"}),s.jsx("input",{type:"text",value:W,onChange:le=>A(le.target.value),placeholder:"Optional description",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsx("button",{type:"submit",disabled:D||!ne.trim(),className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:D?"Creating":"Create media category"}),ee&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:ee}),N&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:N})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-sm font-medium text-slate-300 mb-2",children:"Existing media categories"}),U?s.jsx("p",{className:"text-sm text-slate-500",children:"Loading"}):d.length===0?s.jsx("p",{className:"text-sm text-slate-500",children:"No media categories yet. Create one above."}):s.jsx("ul",{className:"space-y-2",children:d.map(le=>s.jsx("li",{className:"rounded-lg border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm",children:T===le.id?s.jsxs("form",{onSubmit:gn,className:"space-y-2",children:[s.jsx("input",{type:"text",value:Y,onChange:xe=>O(xe.target.value),placeholder:"Name",required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",autoFocus:!0}),s.jsx("input",{type:"text",value:te,onChange:xe=>ce(xe.target.value),placeholder:"Description (optional)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsxs("div",{className:"flex gap-2 flex-wrap",children:[s.jsx("button",{type:"submit",disabled:pe||!Y.trim(),className:"rounded-md bg-brand-orange px-3 py-1.5 text-xs font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:pe?"Saving":"Save"}),s.jsx("button",{type:"button",onClick:$t,className:"rounded-md border border-slate-700 px-3 py-1.5 text-xs font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"}),s.jsx("button",{type:"button",onClick:()=>Et(le.id),disabled:Ke===le.id,className:"rounded-md border border-red-500/60 px-3 py-1.5 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:Ke===le.id?"Deleting":"Delete"})]}),Ne&&s.jsx("p",{className:"text-xs text-red-400",children:Ne})]}):s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>nt(le),className:"flex-1 min-w-0 text-left hover:bg-slate-800/50 rounded px-1 -mx-1 py-1 -my-1 transition-colors",children:[s.jsx("span",{className:"font-medium text-slate-200",children:le.name}),le.description&&s.jsx("span",{className:"text-slate-500 truncate max-w-xs ml-2",children:le.description})]}),s.jsx("button",{type:"button",onClick:()=>Et(le.id),disabled:Ke===le.id,className:"rounded px-2 py-1 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50 shrink-0","aria-label":"Delete category",children:Ke===le.id?"":"Delete"})]})},le.id))})]})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Media"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})};function Ia(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Td=100,Yv=5*1024*1024,Zv=()=>{const{id:e}=ir(),t=Vt(),{user:n}=Oe(),[r,a]=i.useState(!0),[l,o]=i.useState(""),[c,u]=i.useState(""),[d,p]=i.useState(""),[f,g]=i.useState(!1),[v,b]=i.useState([]),[y,S]=i.useState(""),[x,h]=i.useState(""),[m,k]=i.useState(null),[C,P]=i.useState(!1),[I,$]=i.useState(null),[K,F]=i.useState(""),[q,G]=i.useState(null),[re,J]=i.useState(null),[V,oe]=i.useState([]),[fe,j]=i.useState([]),[E,U]=i.useState(""),[B,N]=i.useState(!1),[H,ne]=i.useState(!1),[_,W]=i.useState(!1),[A,D]=i.useState(!1),[M,ee]=i.useState(null),[w,T]=i.useState(null),z=ct(n??null,"manager"),Y=e?decodeURIComponent(e):"";i.useEffect(()=>{var Te;if(!z||!Y){a(!1);return}const ae=Ia();if(!ae){T("API URL not set."),a(!1);return}if(!((Te=window.auth)!=null&&Te.getAccessToken)){T("Sign in required."),a(!1);return}let Fe=!1;return(async()=>{try{const Se=await Q(`${ae}/sites?id=${encodeURIComponent(Y)}`);if(Se.status===404||!Se.ok){Fe||T("Site not found.");return}const Be=(await Se.json()).site;if(Fe||!Be)return;o(Be.url??""),u(Be.title??""),p(Be.description??""),g(!!Be.descriptionAiGenerated),b(Array.isArray(Be.tags)?Be.tags:[]),S(""),h(Be.scrapedContent??""),k(Be.logoUrl||null),j(Array.isArray(Be.categoryIds)?Be.categoryIds:[]);const Xe=await Q(`${ae}/categories`);if(Xe.ok&&!Fe){const lt=await Xe.json();oe((lt.categories??[]).map(nt=>({id:nt.PK||nt.id||"",name:nt.name||nt.PK||""})))}}catch(Se){Fe||T((Se==null?void 0:Se.message)??"Failed to load.")}finally{Fe||a(!1)}})(),()=>{Fe=!0}},[z,Y]);const O=ae=>{var Te;const we=(Te=ae.target.files)==null?void 0:Te[0];if($(we??null),F(""),J(null),P(!1),q&&(URL.revokeObjectURL(q),G(null)),!we)return;if(we.size>Yv){J("Logo must be 5 MB or smaller.");return}const Fe=new Image;Fe.onload=()=>{if(Fe.naturalWidth<Td||Fe.naturalHeight<Td){J("Logo must be at least 100100 pixels.");return}J(null),G(URL.createObjectURL(we))},Fe.onerror=()=>J("Please choose a valid image file."),Fe.src=URL.createObjectURL(we)},te=ae=>{fe.includes(ae)||j([...fe,ae]),U(""),N(!1)},ce=ae=>{j(fe.filter(we=>we!==ae))},pe=()=>{const ae=y.trim();ae&&!v.includes(ae)&&b([...v,ae]),S("")},be=ae=>b(v.filter(we=>we!==ae)),Ne=V.filter(ae=>!fe.includes(ae.id)&&(!E.trim()||(ae.name||"").toLowerCase().includes(E.toLowerCase()))),je=async()=>{var Te;const ae=l.trim();if(!ae){T("Enter URL first.");return}const we=Ia();if(!we){T("API URL not set.");return}if(!((Te=window.auth)!=null&&Te.getAccessToken)){T("Sign in required.");return}D(!0),T(null);try{const Se=await Q(`${we}/sites/generate-description`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:ae})});if(!Se.ok)throw new Error(await Se.text());const _e=await Se.json();p(_e.description??""),g(!0)}catch(Se){T((Se==null?void 0:Se.message)??"Failed to generate description.")}finally{D(!1)}},Ke=async ae=>{var Te;if(ae.preventDefault(),!Y)return;const we=Ia();if(!we){T("API URL not set.");return}if(!((Te=window.auth)!=null&&Te.getAccessToken)){T("Sign in required.");return}if(!(I&&re)){ne(!0),T(null),ee(null);try{let Se=null;if(I){const Xe=await Q(`${we}/sites/logo-upload`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({siteId:Y,contentType:I.type||"image/png"})});if(!Xe.ok)throw new Error("Logo upload request failed");const{uploadUrl:lt,key:nt}=await Xe.json();if(!(await fetch(lt,{method:"PUT",headers:{"Content-Type":I.type||"image/png"},body:I})).ok)throw new Error("Logo upload failed");Se=nt}else if(K.trim()){const Xe=await Q(`${we}/sites/logo-from-url`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({siteId:Y,imageUrl:K.trim()})});if(!Xe.ok){const nt=await Xe.json().catch(()=>({}));throw new Error(nt.error||await Xe.text())}const lt=await Xe.json();lt.key&&(Se=lt.key)}const _e={id:Y,url:l.trim(),title:c.trim()||l.trim(),description:d.trim(),descriptionAiGenerated:f,categoryIds:fe,tags:v,scrapedContent:x.trim()||void 0};C?_e.deleteLogo=!0:Se&&(_e.logoKey=Se);const Be=await Q(`${we}/sites`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(_e)});if(!Be.ok)throw new Error(await Be.text());ee("Site updated."),q&&URL.revokeObjectURL(q),$(null),G(null),F(""),setTimeout(()=>t(`/websites/${encodeURIComponent(Y)}`),1200)}catch(Se){T((Se==null?void 0:Se.message)??"Failed to update site.")}finally{ne(!1)}}},at=async()=>{var Fe;if(!Y||!window.confirm("Delete this site? This cannot be undone."))return;const ae=Ia();if(!(!ae||!((Fe=window.auth)!=null&&Fe.getAccessToken))){W(!0),T(null);try{const Te=await Q(`${ae}/sites`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:Y})});if(!Te.ok)throw new Error(await Te.text());t("/websites")}catch(Te){T((Te==null?void 0:Te.message)??"Failed to delete site.")}finally{W(!1)}}};return z?r?s.jsxs("div",{className:"space-y-4",children:[s.jsxs(ie,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Websites"]}),s.jsx("p",{className:"text-sm text-slate-400",children:"Loading"})]}):w&&!l&&!c?s.jsxs("div",{className:"space-y-4",children:[s.jsxs(ie,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Websites"]}),s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:w})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ie,{to:`/websites/${encodeURIComponent(Y)}`,className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to site"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit Site"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Update URL, title, description, logo, categories, and scraped content."})]}),s.jsxs("form",{className:"space-y-4 max-w-xl",onSubmit:Ke,children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"URL *"}),s.jsx("input",{type:"url",value:l,onChange:ae=>o(ae.target.value),required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Title"}),s.jsx("input",{type:"text",value:c,onChange:ae=>u(ae.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description"}),s.jsx("textarea",{value:d,onChange:ae=>{p(ae.target.value),g(!1)},placeholder:"Short description",rows:4,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("button",{type:"button",onClick:je,disabled:A||!l.trim(),className:"mt-2 rounded-md border border-slate-700 bg-slate-800 px-3 py-1.5 text-xs font-medium text-slate-200 hover:bg-slate-700 disabled:opacity-50",children:A?"Generating":"Generate AI description"}),f&&s.jsx("span",{className:"ml-2 text-xs uppercase tracking-wide text-slate-500",children:"AI summary"}),s.jsxs("label",{className:"mt-2 block inline-flex items-center gap-2 text-xs text-slate-500",children:[s.jsx("input",{type:"checkbox",checked:f,onChange:ae=>g(ae.target.checked)}),"AI-generated summary"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Logo"}),m&&!C&&!q&&s.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[s.jsx("img",{src:m,alt:"Current logo",className:"h-12 w-12 rounded-lg border border-slate-700 object-cover"}),s.jsxs("label",{className:"text-xs text-slate-400",children:[s.jsx("input",{type:"checkbox",checked:C,onChange:ae=>P(ae.target.checked)}),s.jsx("span",{className:"ml-1",children:"Remove logo"})]})]}),s.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/gif,image/webp",onChange:O,className:"block w-full text-xs text-slate-300 file:mr-3 file:rounded-md file:border-0 file:bg-slate-800 file:px-3 file:py-1.5 file:text-slate-100"}),s.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Or paste image URL (image will be copied to S3 on save):"}),s.jsx("input",{type:"url",value:K,onChange:ae=>{F(ae.target.value),ae.target.value.trim()&&$(null)},placeholder:"https://example.com/logo.png",className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),q&&s.jsx("div",{className:"mt-2",children:s.jsx("img",{src:q,alt:"New logo",className:"h-16 w-16 rounded-lg border border-slate-700 object-cover"})}),re&&s.jsx("p",{className:"mt-1 text-xs text-red-400",children:re})]}),s.jsxs("div",{className:"relative",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Categories"}),s.jsx("input",{type:"text",value:E,onChange:ae=>U(ae.target.value),onFocus:()=>N(!0),placeholder:"Search and select",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),B&&s.jsx("div",{className:"absolute left-0 right-0 top-full z-10 mt-1 max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",children:Ne.length?Ne.map(ae=>s.jsx("button",{type:"button",onClick:()=>te(ae.id),className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:ae.name},ae.id)):s.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:"No matches"})}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:fe.map(ae=>{const we=V.find(Fe=>Fe.id===ae);return s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(we==null?void 0:we.name)??ae,s.jsx("button",{type:"button",onClick:()=>ce(ae),className:"hover:text-red-400","aria-label":"Remove",children:""})]},ae)})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Tags"}),s.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:v.map(ae=>s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[ae,s.jsx("button",{type:"button",onClick:()=>be(ae),className:"hover:text-red-400","aria-label":"Remove",children:""})]},ae))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:y,onChange:ae=>S(ae.target.value),onKeyDown:ae=>ae.key==="Enter"&&(ae.preventDefault(),pe()),placeholder:"Add tag",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("button",{type:"button",onClick:pe,className:"rounded-md border border-slate-700 bg-slate-800 px-3 py-2 text-sm text-slate-200 hover:bg-slate-700",children:"Add"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Scraped content (optional)"}),s.jsx("textarea",{value:x,onChange:ae=>h(ae.target.value),rows:6,placeholder:"Paste or edit scraped content (e.g. README, about page)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm font-mono text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsx("button",{type:"submit",disabled:H,className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:H?"Saving":"Save changes"}),s.jsx("button",{type:"button",onClick:at,disabled:_||H,className:"rounded-md border border-red-500/60 px-4 py-2 text-sm font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:_?"Deleting":"Delete entry"})]}),M&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:M}),w&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:w})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit Site"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})};function Ps(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Xv=()=>{const{id:e}=ir(),t=Vt(),{user:n}=Oe(),[r,a]=i.useState(!0),[l,o]=i.useState(""),[c,u]=i.useState(""),[d,p]=i.useState(null),[f,g]=i.useState(null),[v,b]=i.useState("image"),[y,S]=i.useState(!1),[x,h]=i.useState(!1),[m,k]=i.useState(!1),[C,P]=i.useState([]),[I,$]=i.useState([]),[K,F]=i.useState(""),[q,G]=i.useState(!1),[re,J]=i.useState(!1),[V,oe]=i.useState(!1),[fe,j]=i.useState(null),[E,U]=i.useState(null),B=ct(n??null,"manager"),N=e?decodeURIComponent(e):"";i.useEffect(()=>{var Y;if(!B||!N){a(!1);return}const w=Ps();if(!w){U("API URL not set."),a(!1);return}if(!((Y=window.auth)!=null&&Y.getAccessToken)){U("Sign in required."),a(!1);return}let z=!1;return(async()=>{try{const O=await Q(`${w}/media?id=${encodeURIComponent(N)}`);if(O.status===404||!O.ok){z||U("Media not found.");return}const te=await O.json(),ce=Array.isArray(te.media)?te.media[0]:te.media;if(z||!ce)return;const pe=ce;o(pe.title??""),u(pe.description??""),p(pe.mediaUrl||null),g(pe.thumbnailUrl||null),b(pe.mediaType||"image"),$(Array.isArray(pe.categoryIds)?pe.categoryIds:[]);const be=await Q(`${w}/media-categories`);if(be.ok&&!z){const Ne=await be.json();P((Ne.categories??[]).map(je=>({id:je.PK||je.id||"",name:je.name||je.PK||""})))}}catch(O){z||U((O==null?void 0:O.message)??"Failed to load.")}finally{z||a(!1)}})(),()=>{z=!0}},[B,N]);const H=w=>{I.includes(w)||$([...I,w]),F(""),G(!1)},ne=w=>{$(I.filter(T=>T!==w))},_=C.filter(w=>!I.includes(w.id)&&(!K.trim()||(w.name||"").toLowerCase().includes(K.toLowerCase()))),W=async w=>{var Y;if(w.preventDefault(),!N)return;const T=Ps();if(!T){U("API URL not set.");return}const z=window;if(!((Y=z.auth)!=null&&Y.getAccessToken)){U("Sign in required.");return}J(!0),U(null),j(null);try{const O=await new Promise(ce=>z.auth.getAccessToken(ce)),te=await Q(`${T}/media`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${O}`},body:JSON.stringify({id:N,title:l.trim()||"Untitled",description:c.trim(),categoryIds:I})});if(!te.ok)throw new Error(await te.text());j("Media updated."),setTimeout(()=>t("/media"),1200)}catch(O){U((O==null?void 0:O.message)??"Failed to update media.")}finally{J(!1)}},A=async w=>{var O,te;const T=(O=w.target.files)==null?void 0:O[0];if(!T||!N)return;if(!T.type.startsWith("image/")){U("Please choose an image (PNG, JPEG, GIF, WebP).");return}const z=Ps();if(!z)return;const Y=window;if((te=Y.auth)!=null&&te.getAccessToken){h(!0),U(null),j(null);try{const ce=await new Promise(ae=>Y.auth.getAccessToken(ae)),pe=await Q(`${z}/media/thumbnail-upload`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ce}`},body:JSON.stringify({mediaId:N,contentType:T.type||"image/png"})});if(!pe.ok)throw new Error("Upload request failed");const{uploadUrl:be,key:Ne}=await pe.json();if(!(await fetch(be,{method:"PUT",headers:{"Content-Type":T.type||"image/png"},body:T})).ok)throw new Error("File upload failed");const Ke=await Q(`${z}/media`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ce}`},body:JSON.stringify({id:N,thumbnailKey:Ne})});if(!Ke.ok)throw new Error(await Ke.text());const at=await Q(`${z}/media?id=${encodeURIComponent(N)}`);if(at.ok){const ae=await at.json(),we=Array.isArray(ae.media)?ae.media[0]:ae.media;we!=null&&we.thumbnailUrl&&g(we.thumbnailUrl)}j("Logo/thumbnail updated.")}catch(ce){U((ce==null?void 0:ce.message)??"Failed to upload thumbnail.")}finally{h(!1),w.target.value=""}}},D=async()=>{var z;if(!N||!window.confirm("Remove the custom logo/thumbnail? You can regenerate from video or upload a new one."))return;const w=Ps();if(!w)return;const T=window;if((z=T.auth)!=null&&z.getAccessToken){k(!0),U(null),j(null);try{const Y=await new Promise(te=>T.auth.getAccessToken(te)),O=await Q(`${w}/media`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Y}`},body:JSON.stringify({id:N,deleteThumbnail:!0})});if(!O.ok)throw new Error(await O.text());g(null),j("Logo/thumbnail removed.")}catch(Y){U((Y==null?void 0:Y.message)??"Failed to remove thumbnail.")}finally{k(!1)}}},M=async()=>{var z;if(!N)return;const w=Ps();if(!w)return;const T=window;if((z=T.auth)!=null&&z.getAccessToken){S(!0),U(null),j(null);try{const Y=await new Promise(ce=>T.auth.getAccessToken(ce)),O=await Q(`${w}/media/regenerate-thumbnail`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Y}`},body:JSON.stringify({mediaId:N})});if(!O.ok)throw new Error(await O.text());j("Thumbnail regeneration started. New thumbnail will appear in 3060 seconds.");const te=async ce=>{if(ce>6)return;await new Promise(be=>setTimeout(be,1e4));const pe=await Q(`${w}/media?id=${encodeURIComponent(N)}`);if(pe.ok){const be=await pe.json(),Ne=Array.isArray(be.media)?be.media[0]:be.media;if(Ne!=null&&Ne.thumbnailUrl){g(Ne.thumbnailUrl),j("Thumbnail updated.");return}}te(ce+1)};te(1)}catch(Y){U((Y==null?void 0:Y.message)??"Failed to regenerate thumbnail.")}finally{S(!1)}}},ee=async()=>{var z;if(!N||!window.confirm("Delete this media item? This cannot be undone."))return;const w=Ps();if(!w)return;const T=window;if((z=T.auth)!=null&&z.getAccessToken){oe(!0),U(null);try{const Y=await new Promise(te=>T.auth.getAccessToken(te)),O=await Q(`${w}/media?id=${encodeURIComponent(N)}`,{method:"DELETE",headers:{Authorization:`Bearer ${Y}`}});if(!O.ok)throw new Error(await O.text());t("/media")}catch(Y){U((Y==null?void 0:Y.message)??"Failed to delete media.")}finally{oe(!1)}}};return B?r?s.jsxs("div",{className:"space-y-4",children:[s.jsxs(ie,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Media"]}),s.jsx("p",{className:"text-sm text-slate-400",children:"Loading"})]}):E&&!l&&!c?s.jsxs("div",{className:"space-y-4",children:[s.jsxs(ie,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Media"]}),s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:E})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ie,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Media"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit Media"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Update title, description, and categories. The file itself cannot be changed here."})]}),d&&s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 overflow-hidden max-w-2xl",children:[s.jsx("p",{className:"px-4 py-2 text-xs font-medium text-slate-400 border-b border-slate-800",children:"Current media"}),s.jsx("div",{className:"p-4 flex justify-center items-center bg-slate-900/40 min-h-[160px]",children:v==="video"?s.jsx("video",{src:d,controls:!0,className:"max-w-full max-h-[50vh] rounded-lg border border-slate-700",playsInline:!0}):s.jsx("img",{src:d,alt:l||"Media",className:"max-w-full max-h-[50vh] w-auto h-auto object-contain rounded-lg border border-slate-700"})}),v==="video"&&s.jsxs("div",{className:"px-4 py-3 border-t border-slate-800 space-y-2",children:[s.jsx("p",{className:"text-xs font-medium text-slate-400",children:"Logo / Thumbnail"}),s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[f&&s.jsx("img",{src:f,alt:"Thumbnail",className:"h-16 w-auto rounded border border-slate-700 object-cover"}),s.jsx("button",{type:"button",onClick:M,disabled:y,className:"rounded-md border border-slate-600 px-3 py-1.5 text-sm font-medium text-slate-200 hover:bg-slate-800 disabled:opacity-50",children:y?"Regenerating":"Take screenshot"}),s.jsxs("label",{className:"cursor-pointer rounded-md border border-slate-600 px-3 py-1.5 text-sm font-medium text-slate-200 hover:bg-slate-800",children:[x?"Uploading":"Add logo",s.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/gif,image/webp",className:"hidden",onChange:A,disabled:x})]}),f&&s.jsx("button",{type:"button",onClick:D,disabled:m,className:"rounded-md border border-red-500/60 px-3 py-1.5 text-sm font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:m?"Removing":"Delete logo"})]})]})]}),s.jsxs("form",{className:"space-y-4 max-w-xl",onSubmit:W,children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Title"}),s.jsx("input",{type:"text",value:l,onChange:w=>o(w.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description"}),s.jsx("textarea",{value:c,onChange:w=>u(w.target.value),rows:4,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Media categories"}),s.jsx("input",{type:"text",value:K,onChange:w=>F(w.target.value),onFocus:()=>G(!0),placeholder:"Search and select",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),q&&s.jsx("div",{className:"absolute left-0 right-0 top-full z-10 mt-1 max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",children:_.length?_.map(w=>s.jsx("button",{type:"button",onClick:()=>H(w.id),className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:w.name},w.id)):s.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:"No matches"})}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:I.map(w=>{const T=C.find(z=>z.id===w);return s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(T==null?void 0:T.name)??w,s.jsx("button",{type:"button",onClick:()=>ne(w),className:"hover:text-red-400","aria-label":"Remove",children:""})]},w)})})]}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsx("button",{type:"submit",disabled:re,className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:re?"Saving":"Save changes"}),s.jsx("button",{type:"button",onClick:ee,disabled:V||re,className:"rounded-md border border-red-500/60 px-4 py-2 text-sm font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:V?"Deleting":"Delete entry"})]}),fe&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:fe}),E&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:E})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit Media"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})},Rd={admin:"SuperAdmin",manager:"Manager",user:"User"},Qi=[{value:-8,label:"UTC-8"},{value:-5,label:"UTC-5"},{value:0,label:"UTC+0/GMT"}];function Do(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function eb(e,t,n){if(!e&&!n)return"";if(!e)return n?`from ${n}`:"";try{const r=new Date(e);if(isNaN(r.getTime()))return e+(n?` from ${n}`:"");const a=r.getTime()+(t||0)*36e5,l=new Date(a),o=y=>y<10?"0"+y:""+y,c=l.getUTCFullYear(),u=o(l.getUTCMonth()+1),d=o(l.getUTCDate()),p=o(l.getUTCHours()),f=o(l.getUTCMinutes()),g=Qi.find(y=>y.value===t),v=g?g.label:t<0?"UTC"+t:"UTC+"+t;let b=`${c}-${u}-${d} ${p}:${f} ${v}`;return n&&(b+=` from ${n}`),b}catch{return e+(n?` from ${n}`:"")}}const tb=e=>e==="admin"?"bg-amber-500/20 text-amber-200":e==="manager"?"bg-blue-500/20 text-blue-200":e==="user"?"bg-slate-600/30 text-slate-300":"bg-emerald-500/20 text-emerald-200",nb=()=>{var W;const e=Vt(),[t]=qt(),n=t.get("username")??"",r=t.get("email")??"",a=t.get("status")??"",{user:l}=Oe(),[o,c]=i.useState(!0),[u,d]=i.useState(null),[p,f]=i.useState(null),[g,v]=i.useState([]),[b,y]=i.useState([]),[S,x]=i.useState([]),[h,m]=i.useState(""),[k,C]=i.useState(!1),[P,I]=i.useState(!1),[$,K]=i.useState(null),[F,q]=i.useState(!1),[G,re]=i.useState(-8),J=ct(l??null,"manager"),V=((W=l==null?void 0:l.groups)==null?void 0:W.includes("admin"))??!1,oe=V?["admin","manager","user"]:["user"],fe=async()=>{var M;if(!n)return;const A=Do();if(!A){d("API URL not set."),c(!1);return}if(!((M=window.auth)!=null&&M.getAccessToken)){d("Sign in required."),c(!1);return}c(!0),d(null);try{const[ee,w]=await Promise.all([Q(`${A}/admin/users/${encodeURIComponent(n)}/groups`),Q(`${A}/admin/groups`)]);if(!ee.ok){const O=await ee.json().catch(()=>({}));throw new Error(O.error||"Failed to load user")}const T=await ee.json(),Y=((await w.json()).groups??[]).map(O=>O.name??(O.PK??"").replace("GROUP#","")).filter(Boolean);f({email:T.username??n,status:a,lastLoginAt:T.lastLoginAt??"",lastLoginIp:T.lastLoginIp??"",cognitoGroups:T.cognitoGroups??[],customGroups:T.customGroups??[]}),y([...T.cognitoGroups??[]]),x([...T.customGroups??[]]),v(Y)}catch(ee){d((ee==null?void 0:ee.message)??"Failed to load user")}finally{c(!1)}};i.useEffect(()=>{const A=parseInt(sessionStorage.getItem("funkedupshift_lastlogin_tz")??"-8",10);!isNaN(A)&&Qi.some(D=>D.value===A)&&re(A)},[]),i.useEffect(()=>{J&&n&&fe()},[J,n]);const j=A=>{A&&!b.includes(A)&&y(D=>[...D,A])},E=A=>{y(D=>D.filter(M=>M!==A))},U=A=>{A&&!S.includes(A)&&(x(D=>[...D,A]),m(""),C(!1))},B=A=>{x(D=>D.filter(M=>M!==A))},N=g.filter(A=>S.includes(A)?!1:h.trim()?A.toLowerCase().includes(h.toLowerCase().trim()):!0),H=async A=>{var te;if(A.preventDefault(),!n)return;const D=Do();if(!D||!((te=window.auth)!=null&&te.getAccessToken))return;const ee=(p==null?void 0:p.cognitoGroups)??[],w=(p==null?void 0:p.customGroups)??[];let T=b.filter(ce=>!ee.includes(ce)),z=ee.filter(ce=>!b.includes(ce));V||(T=T.filter(ce=>ce==="user"),z=z.filter(ce=>ce==="user"));const Y=S.filter(ce=>!w.includes(ce)),O=w.filter(ce=>!S.includes(ce));I(!0),K(null);try{const ce=encodeURIComponent,pe=[];T.forEach(je=>pe.push(Q(`${D}/admin/users/${ce(n)}/groups`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groupName:je})}))),z.forEach(je=>pe.push(Q(`${D}/admin/users/${ce(n)}/groups/${ce(je)}`,{method:"DELETE"}))),Y.forEach(je=>pe.push(Q(`${D}/admin/users/${ce(n)}/groups`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groupName:je})}))),O.forEach(je=>pe.push(Q(`${D}/admin/users/${ce(n)}/groups/${ce(je)}`,{method:"DELETE"})));const Ne=(await Promise.all(pe)).find(je=>!je.ok);if(Ne){const je=await Ne.json().catch(()=>({}));throw new Error(je.error||"Failed to save")}window.alert("Changes saved"),e("/admin/membership")}catch(ce){K((ce==null?void 0:ce.message)??"Failed to save")}finally{I(!1)}},ne=A=>{const D=parseInt(A.target.value,10);re(D),sessionStorage.setItem("funkedupshift_lastlogin_tz",String(D))},_=async()=>{var ee;const A=r||(p==null?void 0:p.email)||n;if(!window.confirm(`Delete user "${A}"? This cannot be undone.`))return;const D=Do();if(!(!D||!((ee=window.auth)!=null&&ee.getAccessToken))){q(!0);try{const w=await Q(`${D}/admin/users/${encodeURIComponent(n)}`,{method:"DELETE"});if(!w.ok){const T=await w.json().catch(()=>({}));throw new Error(T.error||"Failed to delete user")}e("/admin/membership")}catch(w){K((w==null?void 0:w.message)??"Failed to delete user")}finally{q(!1)}}};return J?n?o?s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit User"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Loading"})]}):u||!p?s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit User"}),s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:u??"Failed to load user"})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ie,{to:"/admin/membership",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to users"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit User"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Adjust system roles and custom groups."}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("label",{htmlFor:"tz-select",className:"text-slate-500",children:"Last login timezone:"}),s.jsx("select",{id:"tz-select",value:G,onChange:ne,className:"rounded border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 text-sm",children:Qi.map(A=>s.jsx("option",{value:A.value,children:A.label},A.value))})]})]}),s.jsxs("form",{onSubmit:H,className:"space-y-6 max-w-2xl",children:[s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("h2",{className:"text-sm font-medium text-slate-300 mb-3",children:"User info"}),s.jsx("table",{className:"text-sm",children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{className:"py-1 pr-4 font-medium text-slate-400 w-28",children:"Email"}),s.jsx("td",{className:"py-1 text-slate-200",children:r||p.email})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"py-1 pr-4 font-medium text-slate-400",children:"Status"}),s.jsx("td",{className:"py-1 text-slate-200",children:a||p.status||""})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"py-1 pr-4 font-medium text-slate-400",children:"Last login"}),s.jsx("td",{className:"py-1 text-slate-200",children:eb(p.lastLoginAt,G,p.lastLoginIp)})]})]})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200",children:"System roles"}),s.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-200 w-full max-w-xs",onChange:A=>{const D=A.target.value;D&&j(D),A.target.value=""},children:[s.jsx("option",{value:"",children:"Select role to add"}),oe.filter(A=>!b.includes(A)).map(A=>s.jsx("option",{value:A,children:Rd[A]??A},A))]}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:b.map(A=>{const D=V||A==="user";return s.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded text-sm ${tb(A)}`,children:[Rd[A]??A,D&&s.jsx("button",{type:"button",onClick:()=>E(A),className:"ml-0.5 hover:text-red-300","aria-label":"Remove",children:""})]},A)})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200",children:"Custom groups"}),g.length===0?s.jsxs("p",{className:"text-sm text-slate-500",children:["No custom groups. ",s.jsx(ie,{to:"/admin/membership?tab=groups",className:"text-brand-orange hover:underline",children:"Create groups"}),"."]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"relative max-w-xs",children:[s.jsx("input",{type:"text",value:h,onChange:A=>{m(A.target.value),C(!0)},onFocus:()=>C(!0),placeholder:"Search or select groups",className:"w-full rounded border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-200 placeholder:text-slate-500"}),k&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>C(!1),"aria-hidden":"true"}),s.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 max-h-48 overflow-y-auto rounded border border-slate-700 bg-slate-900 shadow-lg z-20",children:N.length===0?s.jsx("div",{className:"px-3 py-2 text-sm text-slate-500",children:"No matches"}):N.map(A=>s.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",onClick:()=>U(A),children:A},A))})]})]}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:S.map(A=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-sm bg-emerald-500/20 text-emerald-200",children:[A,s.jsx("button",{type:"button",onClick:()=>B(A),className:"ml-0.5 hover:text-red-300","aria-label":"Remove",children:""})]},A))})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[s.jsx("button",{type:"submit",disabled:P,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:P?"Saving":"Save"}),s.jsx(ie,{to:"/admin/membership",className:"rounded-md border border-slate-700 px-4 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"}),V&&s.jsx("button",{type:"button",onClick:_,disabled:F||P,className:"rounded-md border border-red-500/60 bg-red-500/10 px-4 py-2 text-sm font-medium text-red-200 hover:bg-red-500/20 disabled:opacity-50",children:F?"Deleting":"Delete user"})]}),$&&s.jsx("p",{className:"text-sm text-red-400",children:$})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit User"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Missing username in URL."})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit User"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})},sb=()=>{const{user:e,refreshAuth:t}=Oe(),n=Vt(),[r,a]=i.useState("signin"),[l,o]=i.useState(""),[c,u]=i.useState(""),[d,p]=i.useState(!1),[f,g]=i.useState(null),[v,b]=i.useState(null),y=x=>{a(x),g(null),b(null)},S=async x=>{x.preventDefault(),g(null),b(null);const h=l.trim(),m=c.trim();if(!h||!m){g("Email and password are required.");return}const k=window;if(!k.auth){g("Auth is not configured. Check Cognito frontend setup.");return}p(!0);try{r==="signin"?(await new Promise((C,P)=>{k.auth.signIn(h,m,I=>{I?P(I):C()})}),b("Signed in successfully. Redirecting"),await t()):(await new Promise((C,P)=>{k.auth.signUp(h,m,I=>{I?P(I):C()})}),b("Account created successfully. You can now sign in."),a("signin")),r==="signin"&&setTimeout(()=>n("/"),800)}catch(C){const P=(C==null?void 0:C.message)||"Authentication failed. Please try again.";g(P)}finally{p(!1)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Sign in / Sign up"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Use your Funkedupshift account to rate sites, add notes, and manage curated content (based on your role)."})]}),e&&s.jsxs("div",{className:"rounded-xl border border-emerald-600/60 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-100",children:["You're currently signed in as"," ",s.jsx("span",{className:"font-semibold text-emerald-200",children:e.email})," (",e.role==="superadmin"?"SuperAdmin":e.role,"). You can safely close this page or continue browsing websites and media."]}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-[minmax(0,1.3fr)_minmax(0,1fr)] items-start",children:[s.jsxs("section",{className:"rounded-2xl border border-slate-800 bg-slate-950/70 p-5 shadow-lg shadow-slate-950/40",children:[s.jsxs("div",{className:"mb-4 flex gap-2 rounded-full bg-slate-900/70 p-1 text-xs font-medium text-slate-300",children:[s.jsx("button",{type:"button",onClick:()=>y("signin"),className:["flex-1 rounded-full px-3 py-1.5 transition-colors",r==="signin"?"bg-slate-50 text-slate-950":"hover:bg-slate-800/80"].join(" "),children:"Sign in"}),s.jsx("button",{type:"button",onClick:()=>y("signup"),className:["flex-1 rounded-full px-3 py-1.5 transition-colors",r==="signup"?"bg-slate-50 text-slate-950":"hover:bg-slate-800/80"].join(" "),children:"Sign up"})]}),s.jsxs("form",{className:"space-y-4",onSubmit:S,children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{htmlFor:"authEmail",className:"text-xs font-medium uppercase tracking-[0.18em] text-slate-400",children:"Email"}),s.jsx("input",{id:"authEmail",type:"email",autoComplete:"email",value:l,onChange:x=>o(x.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",placeholder:"you@example.com",required:!0})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{htmlFor:"authPassword",className:"text-xs font-medium uppercase tracking-[0.18em] text-slate-400",children:"Password"}),s.jsx("input",{id:"authPassword",type:"password",autoComplete:r==="signin"?"current-password":"new-password",value:c,onChange:x=>u(x.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",placeholder:r==="signup"?"At least 8 characters":"Your password",minLength:8,required:!0})]}),f&&s.jsx("div",{className:"rounded-md border border-red-500/70 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:f}),v&&!f&&s.jsx("div",{className:"rounded-md border border-emerald-500/70 bg-emerald-500/10 px-3 py-2 text-xs text-emerald-100",children:v}),s.jsx("button",{type:"submit",disabled:d,className:"inline-flex w-full items-center justify-center rounded-full bg-brand-orange px-4 py-2.5 text-sm font-semibold text-slate-950 shadow-md shadow-orange-500/40 transition hover:bg-orange-500 disabled:cursor-not-allowed disabled:opacity-70",children:d?r==="signin"?"Signing in":"Creating account":r==="signin"?"Sign in":"Create account"})]})]}),s.jsxs("aside",{className:"space-y-3 rounded-2xl border border-slate-800 bg-slate-950/40 p-4 text-xs text-slate-300",children:[s.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-[0.25em] text-slate-500",children:"How access works"}),s.jsxs("ul",{className:"space-y-2",children:[s.jsxs("li",{children:[s.jsx("span",{className:"font-semibold text-slate-100",children:"Guests"})," can browse all websites and media without signing in."]}),s.jsxs("li",{children:[s.jsx("span",{className:"font-semibold text-slate-100",children:"Signed-in users"})," can star sites and media, and later add their own metadata and comments."]}),s.jsxs("li",{children:[s.jsx("span",{className:"font-semibold text-slate-100",children:"Managers & admins"})," can curate sites, media, and categories, with extra tooling in the admin area."]})]}),s.jsx("p",{className:"text-slate-500",children:"If you don't see expected admin controls after signing in, confirm your Cognito group membership in the AWS Console."})]})]})]})},rb={admin:"SuperAdmin",manager:"Manager",user:"User"},Zc=[{value:-8,label:"UTC-8"},{value:-5,label:"UTC-5"},{value:0,label:"UTC+0/GMT"}],_p="funkedupshift_lastlogin_tz";function ab(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function lb(){try{const e=parseInt(sessionStorage.getItem(_p)??"",10);if(!isNaN(e)&&Zc.some(t=>t.value===e))return e}catch{}return-8}function ob(e){try{sessionStorage.setItem(_p,String(e))}catch{}}function ib(e,t,n){if(!e)return n?`from ${n}`:"";try{const r=new Date(e);if(isNaN(r.getTime()))return e;const a=r.getTime()+t*36e5,l=new Date(a),o=y=>y<10?"0"+y:""+y,c=l.getUTCFullYear(),u=o(l.getUTCMonth()+1),d=o(l.getUTCDate()),p=o(l.getUTCHours()),f=o(l.getUTCMinutes()),g=Zc.find(y=>y.value===t),v=g?g.label:t<0?`UTC${t}`:`UTC+${t}`;let b=`${c}-${u}-${d} ${p}:${f} ${v}`;return n&&(b+=` from ${n}`),b}catch{return e}}const cb=()=>{var A,D,M,ee;const{user:e,refreshAuth:t}=Oe(),[n,r]=qt(),a=n.get("tab"),l=a==="groups"?"groups":"profile",[o,c]=i.useState(l),[u,d]=i.useState(null),[p,f]=i.useState(""),[g,v]=i.useState(lb),[b,y]=i.useState(!0),[S,x]=i.useState(!1),[h,m]=i.useState(null),[k,C]=i.useState(""),[P,I]=i.useState(!1),[$,K]=i.useState(null),[F,q]=i.useState([]),[G,re]=i.useState(!1),[J,V]=i.useState(null),[oe,fe]=i.useState(null),j=ab();i.useEffect(()=>{c(a==="groups"?"groups":"profile")},[a]);const E=w=>{c(w);const T=new URLSearchParams(n);w==="groups"?T.set("tab","groups"):T.delete("tab"),r(T)};i.useEffect(()=>{if(!e||!j){y(!1);return}let w=!1;return Q(`${j}/profile`).then(T=>T.ok?T.json():T.json().then(z=>Promise.reject(new Error(z.error||"Failed")))).then(T=>{var z;w||(d(T),f(((z=T.profile)==null?void 0:z.description)??""))}).catch(T=>{w||K({text:`Failed to load profile: ${(T==null?void 0:T.message)??"Unknown"}`,error:!0})}).finally(()=>{w||y(!1)}),()=>{w=!0}},[e,j]);const U=Ae.useCallback(async()=>{if(j){re(!0),V(null);try{const w=await Q(`${j}/groups`);if(!w.ok){const z=await w.json().catch(()=>({}));throw new Error(z.error||"Failed to load groups")}const T=await w.json();q(T.groups??[])}catch(w){V({text:`Failed: ${(w==null?void 0:w.message)??"Unknown"}`,error:!0})}finally{re(!1)}}},[j]);i.useEffect(()=>{o==="groups"&&e&&j&&U()},[o,e,j,U]);const B=async(w,T)=>{if(j){fe(w),V(null);try{if(T){const z=await Q(`${j}/me/groups/${encodeURIComponent(w)}`,{method:"DELETE"});if(!z.ok){const Y=await z.json().catch(()=>({}));throw new Error(Y.error||"Failed to leave")}d(Y=>Y?{...Y,customGroups:(Y.customGroups??[]).filter(O=>O!==w)}:null),V({text:`Left ${w}.`,error:!1})}else{const z=await Q(`${j}/me/groups`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groupName:w})});if(!z.ok){const Y=await z.json().catch(()=>({}));throw new Error(Y.error||"Failed to join")}d(Y=>Y?{...Y,customGroups:[...Y.customGroups??[],w]}:null),V({text:`Joined ${w}.`,error:!1})}await t()}catch(z){V({text:`Error: ${(z==null?void 0:z.message)??"Unknown"}`,error:!0})}finally{fe(null)}}},N=async()=>{if(j){x(!0),K(null);try{const w=await Q(`${j}/profile`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:p.trim().slice(0,100)})});if(!w.ok){const T=await w.json();throw new Error(T.error||"Failed")}K({text:"Saved.",error:!1})}catch(w){K({text:`Error: ${(w==null?void 0:w.message)??"Unknown"}`,error:!0})}finally{x(!1)}}},H=async w=>{var Y,O;const T=(Y=w.target.files)==null?void 0:Y[0];if(w.target.value="",!T||!j)return;if(m(null),!((O=T.type)!=null&&O.match(/^image\/(png|jpeg|jpg|gif|webp)$/))){m("Please choose PNG, JPEG, GIF, or WebP.");return}const z=T.type||"image/png";try{const te=await Q(`${j}/profile/avatar-upload`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contentType:z})});if(!te.ok){const Ke=await te.json();throw new Error(Ke.error||"Upload failed")}const{uploadUrl:ce,key:pe}=await te.json();if(!(await fetch(ce,{method:"PUT",body:T,headers:{"Content-Type":z}})).ok)throw new Error("Upload failed");const Ne=await Q(`${j}/profile`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({avatarKey:pe})});if(!Ne.ok){const Ke=await Ne.json();throw new Error(Ke.error||"Failed")}const je=await Q(`${j}/profile`).then(Ke=>Ke.json());d(je)}catch(te){m(`Error: ${(te==null?void 0:te.message)??"Unknown"}`)}},ne=async()=>{if(j){m(null);try{const w=await Q(`${j}/profile/avatar`,{method:"DELETE"});if(!w.ok){const T=await w.json();throw new Error(T.error||"Failed")}d(T=>T?{...T,profile:{...T.profile,avatarUrl:void 0,avatarKey:void 0}}:null)}catch(w){m(`Error: ${(w==null?void 0:w.message)??"Unknown"}`)}}},_=async()=>{const w=k.trim();if(!(!w||!j)){m(null),I(!0);try{const T=await Q(`${j}/profile/avatar-from-url`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageUrl:w})});if(!T.ok){const te=await T.json();throw new Error(te.error||"Import failed")}const{key:z}=await T.json(),Y=await Q(`${j}/profile`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({avatarKey:z})});if(!Y.ok){const te=await Y.json();throw new Error(te.error||"Failed")}const O=await Q(`${j}/profile`).then(te=>te.json());d(O),C("")}catch(T){m(`Error: ${(T==null?void 0:T.message)??"Unknown"}`)}finally{I(!1)}}};if(!e)return s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"My Profile"}),s.jsxs("p",{className:"text-sm text-slate-400",children:[s.jsx(ie,{to:"/auth",className:"text-brand-orange hover:underline",children:"Sign in"})," ","to view and edit your profile."]})]});if(!j)return s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"My Profile"}),s.jsx("p",{className:"text-sm text-red-400",children:"API URL not set."})]});if(b)return s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"My Profile"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Loading profile"})]});const W=u!=null&&u.profile?ib(u.profile.lastLoginAt,g,u.profile.lastLoginIp):"";return s.jsxs("div",{className:"space-y-6 max-w-2xl",children:[s.jsx(ie,{to:"/",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:" Back to Home"}),s.jsx("header",{children:s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"My Profile"})}),s.jsxs("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:[s.jsx("button",{type:"button",onClick:()=>E("profile"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="profile"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Profile"}),s.jsx("button",{type:"button",onClick:()=>E("groups"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="groups"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Custom groups"})]}),o==="groups"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-slate-400",children:"Add or remove yourself from custom groups. Changes take effect immediately."}),J&&s.jsx("div",{className:`rounded-md px-3 py-2 text-sm ${J.error?"border-red-500/60 bg-red-500/10 text-red-200":"border-green-500/40 bg-green-500/10 text-green-200"}`,children:J.text}),G?s.jsx("p",{className:"text-sm text-slate-500",children:"Loading groups"}):F.length===0?s.jsx("p",{className:"text-sm text-slate-500",children:"No custom groups available. Admins can create groups in Membership."}):s.jsx("ul",{className:"space-y-2",children:F.map(w=>{const T=((u==null?void 0:u.customGroups)??[]).includes(w.name);return s.jsxs("li",{className:"flex items-center justify-between rounded-lg border border-slate-800 bg-slate-950/60 px-3 py-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-slate-200",children:w.name}),w.description&&s.jsx("span",{className:"text-slate-500 ml-2 text-sm",children:w.description})]}),s.jsx("button",{type:"button",onClick:()=>B(w.name,T),disabled:oe===w.name,className:`rounded-md px-3 py-1.5 text-xs font-medium ${T?"border border-amber-500/60 bg-amber-500/10 text-amber-300 hover:bg-amber-500/20":"border border-emerald-500/60 bg-emerald-500/10 text-emerald-300 hover:bg-emerald-500/20"} disabled:opacity-50`,children:oe===w.name?"":T?"Leave":"Join"})]},w.name)})})]}),o==="profile"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400",children:"Last login timezone"}),s.jsx("select",{value:g,onChange:w=>{const T=parseInt(w.target.value,10);ob(T),v(T)},className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",children:Zc.map(w=>s.jsx("option",{value:w.value,children:w.label},w.value))})]}),$&&s.jsx("div",{className:`rounded-md px-3 py-2 text-sm ${$.error?"border-red-500/60 bg-red-500/10 text-red-200":"border-green-500/40 bg-green-500/10 text-green-200"}`,children:$.text}),u&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("h2",{className:"text-sm font-semibold text-slate-200 mb-3",children:"User info"}),s.jsx("table",{className:"w-full text-sm",children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{className:"py-1 pr-4 font-medium text-slate-300 w-28",children:"Email"}),s.jsx("td",{className:"text-slate-400",children:u.email??""})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"py-1 pr-4 font-medium text-slate-300",children:"Status"}),s.jsx("td",{className:"text-slate-400",children:u.status??""})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"py-1 pr-4 font-medium text-slate-300",children:"Last login"}),s.jsx("td",{className:"text-slate-400",children:W})]})]})})]}),s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("h2",{className:"text-sm font-semibold text-slate-200 mb-3",children:"System role"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:(((A=u.cognitoGroups)==null?void 0:A.length)??0)>0?u.cognitoGroups.map(w=>{const T=rb[w]??w,z=w==="admin"?"bg-amber-500/20 text-amber-300":w==="manager"?"bg-blue-500/20 text-blue-300":"bg-slate-700 text-slate-200";return s.jsx("span",{className:`rounded-md px-2 py-0.5 text-xs font-medium ${z}`,children:T},w)}):s.jsx("span",{className:"rounded-md px-2 py-0.5 text-xs font-medium bg-slate-700 text-slate-200",children:"User"})})]}),s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("h2",{className:"text-sm font-semibold text-slate-200 mb-3",children:"Custom groups"}),(((D=u.customGroups)==null?void 0:D.length)??0)>0?s.jsx("div",{className:"flex flex-wrap gap-2",children:u.customGroups.map(w=>s.jsx("span",{className:"rounded-md px-2 py-0.5 text-xs font-medium bg-emerald-500/20 text-emerald-300",children:w},w))}):s.jsx("p",{className:"text-sm text-slate-500",children:"Not in any custom groups."})]}),s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("h2",{className:"text-sm font-semibold text-slate-200 mb-3",children:"Edit profile"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Profile icon"}),s.jsxs("div",{className:"flex items-start gap-4",children:[(M=u.profile)!=null&&M.avatarUrl?s.jsx("img",{src:u.profile.avatarUrl,alt:"Profile",className:"h-24 w-24 rounded-full border-2 border-slate-700 object-cover"}):s.jsx("div",{className:"h-24 w-24 rounded-full border-2 border-slate-700 bg-slate-800 flex items-center justify-center text-2xl text-slate-500",children:"?"}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/gif,image/webp",onChange:H,className:"block w-full text-xs text-slate-300 file:mr-3 file:rounded-md file:border-0 file:bg-slate-800 file:px-3 file:py-1.5 file:text-slate-100"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Or paste image URL (min 4848, max 5 MB):"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"url",value:k,onChange:w=>C(w.target.value),placeholder:"https://example.com/avatar.png",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("button",{type:"button",onClick:_,disabled:!k.trim()||P,className:"rounded-md border border-slate-600 px-3 py-2 text-sm font-medium text-slate-200 hover:bg-slate-800 disabled:opacity-50",children:P?"Importing":"Use from URL"})]}),((ee=u.profile)==null?void 0:ee.avatarUrl)&&s.jsx("button",{type:"button",onClick:ne,className:"self-start rounded-md border border-red-500/60 bg-red-500/10 px-2 py-1 text-xs font-medium text-red-300 hover:bg-red-500/20",children:"Remove icon"})]})]}),s.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"PNG, JPEG, GIF, or WebP. Same constraints as thumbnail uploads."}),h&&s.jsx("p",{className:"mt-1 text-xs text-red-400",children:h})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"profile-description",className:"block text-xs font-medium text-slate-400 mb-1",children:"Description"}),s.jsx("textarea",{id:"profile-description",value:p,onChange:w=>f(w.target.value),maxLength:100,placeholder:"About you (max 100 characters)",rows:4,className:"w-full max-w-md rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsxs("div",{className:`mt-1 text-xs ${p.length>=100?"text-red-400":"text-slate-500"}`,children:[p.length," / 100"]})]}),s.jsx("button",{type:"button",onClick:N,disabled:S,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:S?"Saving":"Save"})]})]})]})]})]})},ub=/^\d{4}-\d{2}-\d{2}$/;function Ld(e){if(!ub.test(e))return!1;const t=new Date(e);return!isNaN(t.getTime())}const hs=({id:e,value:t,onChange:n,label:r,required:a,className:l="",inputClassName:o=""})=>{const c=i.useRef(null),u=i.useRef(null),d=y=>{const x=y.target.value.replace(/[^\d-]/g,"");n(x)},p=()=>{const y=t.trim();y&&!Ld(y)&&n("")},f=y=>{const S=y.target.value;S&&n(S)},g=()=>{const y=c.current;y&&(y.focus(),typeof y.showPicker=="function"&&y.showPicker())},v="rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",b=t&&Ld(t);return s.jsxs("div",{className:l,children:[s.jsxs("label",{htmlFor:`${e}-text`,className:"block text-xs font-semibold text-slate-400 mb-1",children:[r,s.jsx("span",{className:"block font-normal text-slate-500 mt-0.5",children:"yyyy-MM-DD or use calendar"})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("input",{ref:u,type:"text",id:`${e}-text`,value:t,onChange:d,onBlur:p,placeholder:"yyyy-MM-DD",required:a,pattern:a?"[0-9]{4}-[0-9]{2}-[0-9]{2}":void 0,title:a?"Enter date as yyyy-MM-DD":void 0,className:`${v} flex-1 min-w-0 ${o}`,inputMode:"numeric",autoComplete:"off"}),s.jsx("input",{ref:c,type:"date",id:e,value:b?t:"",onChange:f,required:a,className:"sr-only","aria-hidden":!0}),s.jsx("button",{type:"button",onClick:g,title:"Open calendar","aria-label":"Open calendar",className:"rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-slate-400 hover:bg-slate-800 hover:text-slate-200 focus:border-brand-orange focus:outline-none shrink-0",children:s.jsx(Sg,{className:"h-5 w-5"})})]})]})};function Ad(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Mo=10,db=()=>{const{user:e}=Oe(),[t,n]=qt(),[r,a]=i.useState([]),[l,o]=i.useState(()=>{const O=t.get("playerIds");return O?O.split(",").filter(Boolean):[]}),[c,u]=i.useState([]),[d,p]=i.useState(1),[f,g]=i.useState(!1),[v,b]=i.useState(()=>t.get("date")??""),[y,S]=i.useState(()=>t.get("dateFrom")??""),[x,h]=i.useState(()=>t.get("dateTo")??""),[m,k]=i.useState(""),[C,P]=i.useState(!1),[I,$]=i.useState(null),[K,F]=i.useState(null),[q,G]=i.useState(!1),[re,J]=i.useState(()=>t.get("sortOrder")==="oldest"?"oldest":"newest"),[V,oe]=i.useState(()=>t.get("playerMode")==="or"?"or":"and"),fe=i.useRef(null),j=Sl(e),E=kl(e),U=O=>{const te=r.find(ce=>ce.id===O||ce.PK===O);return te&&(te.name||te.id)||O},B=async()=>{const O=Ad();if(O)try{const te=await Q(`${O}/squash/players`);if(!te.ok){const be=await te.json().catch(()=>({}));throw new Error(be.error||"Failed")}const pe=((await te.json()).players??[]).map(be=>({...be,id:be.id||be.PK||""}));a(pe)}catch(te){F((te==null?void 0:te.message)??"Failed to load players")}},N=async()=>{const O=Ad();if(!O)return;const te=new URLSearchParams;v&&te.set("date",v),y&&te.set("dateFrom",y),x&&te.set("dateTo",x),l.length&&(te.set("playerIds",l.join(",")),te.set("playerMode",V));const ce=te.toString()?`?${te.toString()}`:"";G(!0),F(null);try{const pe=await Q(`${O}/squash/matches${ce}`);if(!pe.ok){const je=await pe.json().catch(()=>({}));throw new Error(je.error||"Failed")}const be=await pe.json();u(be.matches??[]),g(!0),p(1);const Ne=new URLSearchParams;v&&Ne.set("date",v),y&&Ne.set("dateFrom",y),x&&Ne.set("dateTo",x),l.length&&(Ne.set("playerIds",l.join(",")),Ne.set("playerMode",V)),Ne.set("sortOrder",re),n(Ne,{replace:!0})}catch(pe){F((pe==null?void 0:pe.message)??"Failed to search matches")}finally{G(!1)}},H=()=>{b(""),S(""),h(""),o([]),k(""),oe("and"),g(!1),u([]),p(1),n({},{replace:!0})},ne=O=>{l.includes(O)||o([...l,O]),k("")},_=O=>{o(l.filter(te=>te!==O))},W=r.filter(O=>!l.includes(O.id)&&(!m.trim()||(O.name||"").toLowerCase().includes(m.toLowerCase())));i.useEffect(()=>{j&&B()},[j]);const A=t.get("date")||t.get("dateFrom")||t.get("dateTo")||t.get("playerIds");i.useEffect(()=>{!j||!A||N()},[]),i.useEffect(()=>{function O(te){fe.current&&!fe.current.contains(te.target)&&P(!1)}if(C)return document.addEventListener("mousedown",O),()=>document.removeEventListener("mousedown",O)},[C]);const D=i.useMemo(()=>{const O=[...c];return O.sort((te,ce)=>{const pe=te.date||"",be=ce.date||"";return re==="newest"?be.localeCompare(pe):pe.localeCompare(be)}),O},[c,re]),M=Math.max(1,Math.ceil(D.length/Mo)),ee=(d-1)*Mo,w=D.slice(ee,ee+Mo),T=O=>{const te=O.teamAGames??0,ce=O.teamBGames??0,pe=O.winningTeam==="B"?ce:te,be=O.winningTeam==="B"?te:ce;return`${pe}-${be}`},z=O=>{const te=[U(O.teamAPlayer1Id||""),U(O.teamAPlayer2Id||"")].filter(Boolean).join(" & "),ce=[U(O.teamBPlayer1Id||""),U(O.teamBPlayer2Id||"")].filter(Boolean).join(" & "),pe=O.winningTeam==="B"?ce:te,be=O.winningTeam==="B"?te:ce;return s.jsxs("li",{className:"flex items-center gap-2 flex-wrap py-2 border-b border-slate-800 last:border-0",children:[s.jsx("span",{className:"font-semibold text-slate-200",children:O.date||""}),s.jsxs("span",{className:"text-slate-300",children:[pe," vs ",be]}),s.jsx("span",{className:"italic text-slate-400",children:T(O)})]},O.id||O.date+pe)},Y=[];if(M<=7)for(let O=1;O<=M;O++)Y.push(O);else{const O=d;Y.push(1),O>3&&Y.push("");for(let te=Math.max(2,O-1);te<=Math.min(M-1,O+1);te++)Y.includes(te)||Y.push(te);O<M-2&&Y.push(""),M>1&&Y.push(M)}return e?j?s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Doubles"}),E&&s.jsx("p",{className:"text-sm text-slate-400",children:s.jsx(ie,{to:"/squash-admin",className:"text-brand-orange hover:text-orange-400",children:"Squash Admin"})}),(I||K)&&s.jsx("div",{className:`rounded-md px-4 py-3 text-sm ${K?"bg-red-900/30 border border-red-800/50 text-red-200":"bg-emerald-900/30 border border-emerald-800/50 text-emerald-200"}`,children:K||I}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-base font-semibold text-slate-200 mb-3",children:"Search matches"}),s.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[s.jsx(hs,{id:"searchDate",value:v,onChange:b,label:"Date (exact)",className:"max-w-[12rem]"}),s.jsx(hs,{id:"searchDateFrom",value:y,onChange:S,label:"Date from",className:"max-w-[12rem]"}),s.jsx(hs,{id:"searchDateTo",value:x,onChange:h,label:"Date to",className:"max-w-[12rem]"}),s.jsxs("div",{className:"relative max-w-[14rem] min-w-[12rem]",ref:fe,children:[s.jsx("label",{className:"block text-xs font-semibold text-slate-400 mb-1",children:"Filter by players"}),s.jsx("input",{type:"text",value:m,onChange:O=>k(O.target.value),onFocus:()=>P(!0),placeholder:"Search players...",autoComplete:"off",className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none"}),C&&s.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-slate-900 border border-slate-700 rounded-md max-h-48 overflow-y-auto z-10",children:W.length?W.map(O=>s.jsx("button",{type:"button",onClick:()=>ne(O.id),className:"w-full text-left px-3 py-2 text-sm text-slate-200 hover:bg-slate-800",children:O.name||O.id},O.id)):s.jsx("div",{className:"px-3 py-2 text-sm text-slate-500",children:"No matches"})}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:l.map(O=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-slate-700 text-slate-200 text-xs",children:[U(O),s.jsx("button",{type:"button",onClick:()=>_(O),className:"text-slate-400 hover:text-slate-100","aria-label":"Remove",children:""})]},O))}),l.length>0&&s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-slate-500",children:"Match:"}),s.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[s.jsx("button",{type:"button",onClick:()=>oe("and"),className:`rounded px-2 py-0.5 text-xs font-medium ${V==="and"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"AND"}),s.jsx("button",{type:"button",onClick:()=>oe("or"),className:`rounded px-2 py-0.5 text-xs font-medium ${V==="or"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"OR"})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:N,disabled:q,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:q?"Searching":"Search"}),s.jsx("button",{type:"button",onClick:H,className:"rounded-md border border-slate-600 px-4 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Clear"})]})]})]}),s.jsxs("section",{children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-3",children:[s.jsx("h2",{className:"text-base font-semibold text-slate-200",children:"Results"}),f&&D.length>0&&s.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[s.jsx("button",{type:"button",onClick:()=>J("newest"),className:`rounded px-2 py-0.5 text-xs font-medium ${re==="newest"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"Newest first"}),s.jsx("button",{type:"button",onClick:()=>J("oldest"),className:`rounded px-2 py-0.5 text-xs font-medium ${re==="oldest"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"Oldest first"})]})]}),f&&s.jsx("div",{className:"rounded-md border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm text-slate-400 mb-3",children:D.length===0?"No results":`${D.length} results`}),f?w.length===0?s.jsx("ul",{className:"list-none p-0",children:s.jsx("li",{className:"py-2 text-slate-400",children:"No matches found."})}):s.jsxs(s.Fragment,{children:[s.jsx("ul",{className:"list-none p-0",children:w.map(z)}),M>1&&s.jsxs("div",{className:"flex items-center gap-2 mt-4 flex-wrap",children:[s.jsx("button",{type:"button",disabled:d<=1,onClick:()=>p(O=>Math.max(1,O-1)),className:"rounded-md border border-slate-600 px-3 py-1 text-sm disabled:opacity-50 disabled:cursor-not-allowed text-slate-300 hover:bg-slate-800",children:"Prev"}),s.jsx("span",{className:"flex items-center gap-1",children:Y.map((O,te)=>O===""?s.jsx("span",{className:"px-1 text-slate-500",children:""},`ellipsis-${te}`):O===d?s.jsx("span",{className:"min-w-[2rem] px-2 py-1 text-center font-semibold text-slate-200",children:O},O):s.jsx("button",{type:"button",onClick:()=>p(O),className:"min-w-[2rem] rounded px-2 py-1 text-sm text-slate-300 hover:bg-slate-800 border border-slate-600",children:O},O))}),s.jsx("button",{type:"button",disabled:d>=M,onClick:()=>p(O=>Math.min(M,O+1)),className:"rounded-md border border-slate-600 px-3 py-1 text-sm disabled:opacity-50 disabled:cursor-not-allowed text-slate-300 hover:bg-slate-800",children:"Next"})]})]}):s.jsx("div",{className:"flex items-center justify-center min-h-[280px]",children:s.jsx("p",{className:"text-2xl sm:text-3xl font-light text-slate-500/80 tracking-wide animate-pulse",children:"Enter search criteria and click Search to find matches."})})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Doubles"}),s.jsx("div",{className:"rounded-md bg-amber-900/30 border border-amber-800/50 px-4 py-3 text-sm text-amber-200",children:"You do not have access to the Squash section. Join the Squash group or contact an admin."})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Doubles"}),s.jsxs("div",{className:"rounded-md bg-red-900/30 border border-red-800/50 px-4 py-3 text-sm text-red-200",children:["Sign in required. ",s.jsx(ie,{to:"/auth",className:"underline hover:text-red-100",children:"Sign in"})]})]})};function os(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Oo=10,mb=()=>{const{user:e}=Oe(),[t,n]=qt(),[r,a]=i.useState("matches"),[l,o]=i.useState([]),[c,u]=i.useState(()=>{const L=t.get("playerIds");return L?L.split(",").filter(Boolean):[]}),[d,p]=i.useState([]),[f,g]=i.useState(1),[v,b]=i.useState(!1),[y,S]=i.useState(()=>t.get("date")??""),[x,h]=i.useState(()=>t.get("dateFrom")??""),[m,k]=i.useState(()=>t.get("dateTo")??""),[C,P]=i.useState(""),[I,$]=i.useState(!1),[K,F]=i.useState(null),[q,G]=i.useState(""),[re,J]=i.useState(""),[V,oe]=i.useState(""),[fe,j]=i.useState(""),[E,U]=i.useState(""),[B,N]=i.useState("A"),[H,ne]=i.useState(0),[_,W]=i.useState(!1),[A,D]=i.useState(!1),[M,ee]=i.useState(()=>t.get("sortOrder")==="oldest"?"oldest":"newest"),[w,T]=i.useState(()=>t.get("playerMode")==="or"?"or":"and"),z=i.useRef(null),[Y,O]=i.useState([]),[te,ce]=i.useState([]),[pe,be]=i.useState(null),[Ne,je]=i.useState(""),[Ke,at]=i.useState(""),[ae,we]=i.useState(""),[Fe,Te]=i.useState(!1),[Se,_e]=i.useState(null),[Be,Xe]=i.useState(null),lt=kl(e),nt=L=>{const he=l.find(R=>R.id===L||R.PK===L);return he&&(he.name||he.id)||L},$t=async()=>{const L=os();if(L)try{const he=await Q(`${L}/squash/players`);if(!he.ok){const ge=await he.json().catch(()=>({}));throw new Error(ge.error||"Failed")}const X=((await he.json()).players??[]).map(ge=>({...ge,id:ge.id||ge.PK||""}));o(X),O(X)}catch(he){_e((he==null?void 0:he.message)??"Failed to load players")}},gn=async()=>{const L=os();if(L)try{const he=await Q(`${L}/admin/users?limit=60`);if(!he.ok)return;const R=await he.json();ce(R.users??[])}catch{ce([])}},Et=async()=>{const L=os();if(!L)return;const he=new URLSearchParams;y&&he.set("date",y),x&&he.set("dateFrom",x),m&&he.set("dateTo",m),c.length&&(he.set("playerIds",c.join(",")),he.set("playerMode",w));const R=he.toString()?`?${he.toString()}`:"";D(!0),_e(null);try{const X=await Q(`${L}/squash/matches${R}`);if(!X.ok){const ve=await X.json().catch(()=>({}));throw new Error(ve.error||"Failed")}const ge=await X.json();p(ge.matches??[]),b(!0),g(1);const ue=new URLSearchParams;y&&ue.set("date",y),x&&ue.set("dateFrom",x),m&&ue.set("dateTo",m),c.length&&(ue.set("playerIds",c.join(",")),ue.set("playerMode",w)),ue.set("sortOrder",M),n(ue,{replace:!0})}catch(X){_e((X==null?void 0:X.message)??"Failed to search matches")}finally{D(!1)}},ln=()=>{S(""),h(""),k(""),u([]),T("and"),P(""),b(!1),p([]),g(1),n({},{replace:!0})},le=L=>{c.includes(L)||u([...c,L]),P("")},xe=L=>{u(c.filter(he=>he!==L))},We=l.filter(L=>!c.includes(L.id)&&(!C.trim()||(L.name||"").toLowerCase().includes(C.toLowerCase()))),$e=[re,V,fe,E],ke=L=>{const he=L==="p1"?0:L==="p2"?1:L==="p3"?2:3,R=$e.filter((X,ge)=>ge!==he);return l.filter(X=>!R.includes(X.id))},Z=async L=>{if(L.preventDefault(),!q||!re||!V||!fe||!E){_e("All fields are required.");return}const he=[re,V,fe,E];if(new Set(he).size!==4){_e("Each player can only be on one team.");return}const R=os();if(!R)return;const ue={date:q,teamAPlayer1Id:re,teamAPlayer2Id:V,teamBPlayer1Id:fe,teamBPlayer2Id:E,winningTeam:B,teamAGames:B==="A"?3:H,teamBGames:B==="B"?3:H},ve=K?"PUT":"POST";K&&(ue.id=K),W(!0),_e(null);try{const ye=await Q(`${R}/squash/matches`,{method:ve,headers:{"Content-Type":"application/json"},body:JSON.stringify(ue)});if(!ye.ok){const Pe=await ye.json().catch(()=>({}));throw new Error(Pe.error||"Failed")}F(null),G(""),J(""),oe(""),j(""),U(""),N("A"),ne(0),Et()}catch(ye){_e((ye==null?void 0:ye.message)??"Failed")}finally{W(!1)}},de=()=>{F(null),G(""),J(""),oe(""),j(""),U(""),N("A"),ne(0)},Ie=L=>{var R,X;const he=L.id||((X=(R=L.PK)==null?void 0:R.replace)==null?void 0:X.call(R,"SQUASH#MATCH#",""))||"";F(he),G(L.date||""),J(L.teamAPlayer1Id||""),oe(L.teamAPlayer2Id||""),j(L.teamBPlayer1Id||""),U(L.teamBPlayer2Id||""),N(L.winningTeam||"A"),ne(L.winningTeam==="A"?L.teamBGames??0:L.teamAGames??0)},Ue=async L=>{if(!confirm("Delete this match?"))return;const he=os();if(he)try{const R=await Q(`${he}/squash/matches?id=${encodeURIComponent(L)}`,{method:"DELETE"});if(!R.ok){const X=await R.json().catch(()=>({}));throw new Error(X.error||"Failed")}Et()}catch(R){_e((R==null?void 0:R.message)??"Delete failed")}},Ee=async L=>{L.preventDefault();const he=Ne.trim();if(!he){_e("Name is required.");return}const R=os();if(!R)return;const X={name:he,email:Ke.trim()||void 0,userId:ae||void 0},ge=pe?"PUT":"POST";pe&&(X.id=pe),Te(!0),_e(null);try{const ue=await Q(`${R}/squash/players`,{method:ge,headers:{"Content-Type":"application/json"},body:JSON.stringify(X)});if(!ue.ok){const ve=await ue.json().catch(()=>({}));throw new Error(ve.error||"Failed")}be(null),je(""),at(""),we(""),$t()}catch(ue){_e((ue==null?void 0:ue.message)??"Failed")}finally{Te(!1)}},Le=()=>{be(null),je(""),at(""),we("")},De=L=>{be(L.id),je(L.name||""),at(L.email||""),we(L.userId||"")},yn=async L=>{if(!confirm("Delete this player?"))return;const he=os();if(he)try{const R=await Q(`${he}/squash/players?id=${encodeURIComponent(L)}`,{method:"DELETE"});if(!R.ok){const X=await R.json().catch(()=>({}));throw new Error(X.error||"Failed")}$t()}catch(R){_e((R==null?void 0:R.message)??"Delete failed")}};i.useEffect(()=>{lt&&($t(),r==="players"&&gn())},[lt,r]);const vn=t.get("date")||t.get("dateFrom")||t.get("dateTo")||t.get("playerIds");i.useEffect(()=>{!lt||!vn||Et()},[]),i.useEffect(()=>{function L(he){z.current&&!z.current.contains(he.target)&&$(!1)}if(I)return document.addEventListener("mousedown",L),()=>document.removeEventListener("mousedown",L)},[I]);const gt=i.useMemo(()=>{const L=[...d];return L.sort((he,R)=>{const X=he.date||"",ge=R.date||"";return M==="newest"?ge.localeCompare(X):X.localeCompare(ge)}),L},[d,M]),dt=Math.max(1,Math.ceil(gt.length/Oo)),bn=(f-1)*Oo,ur=gt.slice(bn,bn+Oo),Yl=L=>{const he=L.teamAGames??0,R=L.teamBGames??0;return L.winningTeam==="A"?`${he}-${R}`:`${R}-${he}`},_t=[];if(dt<=7)for(let L=1;L<=dt;L++)_t.push(L);else{const L=f;_t.push(1),L>3&&_t.push("");for(let he=Math.max(2,L-1);he<=Math.min(dt-1,L+1);he++)_t.includes(he)||_t.push(he);L<dt-2&&_t.push(""),dt>1&&_t.push(dt)}return e?lt?s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Admin"}),s.jsx("p",{className:"text-sm text-slate-400",children:s.jsx(ie,{to:"/squash",className:"text-brand-orange hover:text-orange-400",children:"Squash"})}),(Be||Se)&&s.jsx("div",{className:`rounded-md px-4 py-3 text-sm ${Se?"bg-red-900/30 border border-red-800/50 text-red-200":"bg-emerald-900/30 border border-emerald-800/50 text-emerald-200"}`,children:Se||Be}),s.jsxs("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:[s.jsx("button",{type:"button",onClick:()=>a("matches"),className:`px-4 py-2 rounded-md text-sm font-medium ${r==="matches"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Matches"}),s.jsx("button",{type:"button",onClick:()=>a("players"),className:`px-4 py-2 rounded-md text-sm font-medium ${r==="players"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Players"})]}),r==="matches"&&s.jsxs(s.Fragment,{children:[s.jsxs("section",{children:[s.jsx("h2",{className:"text-base font-semibold text-slate-200 mb-3",children:"Add match"}),s.jsxs("form",{onSubmit:Z,className:"grid grid-cols-2 gap-4 max-w-2xl",children:[s.jsx("div",{className:"col-span-2",children:s.jsx(hs,{id:"matchDate",value:q,onChange:G,label:"Date",required:!0})}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"matchTeamAP1",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Team A  Player 1"}),s.jsxs("select",{id:"matchTeamAP1",value:re,onChange:L=>J(L.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[s.jsx("option",{value:"",children:" Select "}),ke("p1").map(L=>s.jsx("option",{value:L.id,children:L.name||L.id},L.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"matchTeamAP2",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Team A  Player 2"}),s.jsxs("select",{id:"matchTeamAP2",value:V,onChange:L=>oe(L.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[s.jsx("option",{value:"",children:" Select "}),ke("p2").map(L=>s.jsx("option",{value:L.id,children:L.name||L.id},L.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"matchTeamBP1",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Team B  Player 1"}),s.jsxs("select",{id:"matchTeamBP1",value:fe,onChange:L=>j(L.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[s.jsx("option",{value:"",children:" Select "}),ke("p3").map(L=>s.jsx("option",{value:L.id,children:L.name||L.id},L.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"matchTeamBP2",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Team B  Player 2"}),s.jsxs("select",{id:"matchTeamBP2",value:E,onChange:L=>U(L.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[s.jsx("option",{value:"",children:" Select "}),ke("p4").map(L=>s.jsx("option",{value:L.id,children:L.name||L.id},L.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"matchWinningTeam",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Winning team"}),s.jsxs("select",{id:"matchWinningTeam",value:B,onChange:L=>N(L.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[s.jsx("option",{value:"A",children:"Team A"}),s.jsx("option",{value:"B",children:"Team B"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"matchLoserGames",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Games won by losing team"}),s.jsxs("select",{id:"matchLoserGames",value:H,onChange:L=>ne(parseInt(L.target.value,10)),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[s.jsx("option",{value:0,children:"0"}),s.jsx("option",{value:1,children:"1"}),s.jsx("option",{value:2,children:"2"})]})]}),s.jsxs("div",{className:"col-span-2 flex gap-2",children:[s.jsx("button",{type:"submit",disabled:_,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:K?"Update match":"Add match"}),s.jsx("button",{type:"button",onClick:de,className:"rounded-md border border-slate-600 px-4 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"})]})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-base font-semibold text-slate-200 mb-3",children:"Search matches"}),s.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[s.jsx(hs,{id:"searchDate",value:y,onChange:S,label:"Date (exact)",className:"max-w-[12rem]"}),s.jsx(hs,{id:"searchDateFrom",value:x,onChange:h,label:"Date from",className:"max-w-[12rem]"}),s.jsx(hs,{id:"searchDateTo",value:m,onChange:k,label:"Date to",className:"max-w-[12rem]"}),s.jsxs("div",{className:"relative max-w-[14rem] min-w-[12rem]",ref:z,children:[s.jsx("label",{className:"block text-xs font-semibold text-slate-400 mb-1",children:"Filter by players"}),s.jsx("input",{type:"text",value:C,onChange:L=>P(L.target.value),onFocus:()=>$(!0),placeholder:"Search players...",autoComplete:"off",className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none"}),I&&s.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-slate-900 border border-slate-700 rounded-md max-h-48 overflow-y-auto z-10",children:We.length?We.map(L=>s.jsx("button",{type:"button",onClick:()=>le(L.id),className:"w-full text-left px-3 py-2 text-sm text-slate-200 hover:bg-slate-800",children:L.name||L.id},L.id)):s.jsx("div",{className:"px-3 py-2 text-sm text-slate-500",children:"No matches"})}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:c.map(L=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-slate-700 text-slate-200 text-xs",children:[nt(L),s.jsx("button",{type:"button",onClick:()=>xe(L),className:"text-slate-400 hover:text-slate-100","aria-label":"Remove",children:""})]},L))}),c.length>0&&s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-slate-500",children:"Match:"}),s.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[s.jsx("button",{type:"button",onClick:()=>T("and"),className:`rounded px-2 py-0.5 text-xs font-medium ${w==="and"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"AND"}),s.jsx("button",{type:"button",onClick:()=>T("or"),className:`rounded px-2 py-0.5 text-xs font-medium ${w==="or"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"OR"})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:Et,disabled:A,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:A?"Searching":"Search"}),s.jsx("button",{type:"button",onClick:ln,className:"rounded-md border border-slate-600 px-4 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Clear"})]})]})]}),s.jsxs("section",{children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-3",children:[s.jsx("h2",{className:"text-base font-semibold text-slate-200",children:"Search results"}),v&&gt.length>0&&s.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[s.jsx("button",{type:"button",onClick:()=>ee("newest"),className:`rounded px-2 py-0.5 text-xs font-medium ${M==="newest"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"Newest first"}),s.jsx("button",{type:"button",onClick:()=>ee("oldest"),className:`rounded px-2 py-0.5 text-xs font-medium ${M==="oldest"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"Oldest first"})]})]}),v&&s.jsx("div",{className:"rounded-md border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm text-slate-400 mb-3",children:gt.length===0?"No results":`${gt.length} results`}),v?ur.length===0?s.jsx("ul",{className:"list-none p-0",children:s.jsx("li",{className:"py-2 text-slate-400",children:"No matches found."})}):s.jsxs(s.Fragment,{children:[s.jsx("ul",{className:"list-none p-0",children:ur.map(L=>{var ge,ue;const he=L.id||((ue=(ge=L.PK)==null?void 0:ge.replace)==null?void 0:ue.call(ge,"SQUASH#MATCH#",""))||"",R=[nt(L.teamAPlayer1Id||""),nt(L.teamAPlayer2Id||"")].filter(Boolean).join(" & "),X=[nt(L.teamBPlayer1Id||""),nt(L.teamBPlayer2Id||"")].filter(Boolean).join(" & ");return s.jsxs("li",{className:"flex items-center gap-2 flex-wrap py-2 border-b border-slate-800 last:border-0",children:[s.jsx("span",{className:"font-semibold text-slate-200",children:L.date||""}),s.jsxs("span",{className:"text-slate-300",children:[R," vs ",X]}),s.jsx("span",{className:"italic text-slate-400",children:Yl(L)}),s.jsx("button",{type:"button",onClick:()=>Ie(L),className:"rounded-md border border-slate-600 px-2 py-1 text-xs text-slate-300 hover:bg-slate-800",children:"Edit"}),s.jsx("button",{type:"button",onClick:()=>Ue(he),className:"rounded-md border border-red-800/50 px-2 py-1 text-xs text-red-300 hover:bg-red-900/30",children:"Delete"})]},he)})}),dt>1&&s.jsxs("div",{className:"flex items-center gap-2 mt-4 flex-wrap",children:[s.jsx("button",{type:"button",disabled:f<=1,onClick:()=>g(L=>Math.max(1,L-1)),className:"rounded-md border border-slate-600 px-3 py-1 text-sm disabled:opacity-50 disabled:cursor-not-allowed text-slate-300 hover:bg-slate-800",children:"Prev"}),s.jsx("span",{className:"flex items-center gap-1",children:_t.map((L,he)=>L===""?s.jsx("span",{className:"px-1 text-slate-500",children:""},`ellipsis-${he}`):L===f?s.jsx("span",{className:"min-w-[2rem] px-2 py-1 text-center font-semibold text-slate-200",children:L},L):s.jsx("button",{type:"button",onClick:()=>g(L),className:"min-w-[2rem] rounded px-2 py-1 text-sm text-slate-300 hover:bg-slate-800 border border-slate-600",children:L},L))}),s.jsx("button",{type:"button",disabled:f>=dt,onClick:()=>g(L=>Math.min(dt,L+1)),className:"rounded-md border border-slate-600 px-3 py-1 text-sm disabled:opacity-50 disabled:cursor-not-allowed text-slate-300 hover:bg-slate-800",children:"Next"})]})]}):s.jsx("div",{className:"flex items-center justify-center min-h-[280px]",children:s.jsx("p",{className:"text-2xl sm:text-3xl font-light text-slate-500/80 tracking-wide animate-pulse",children:"Enter search criteria and click Search to find matches."})})]})]}),r==="players"&&s.jsxs(s.Fragment,{children:[s.jsxs("section",{children:[s.jsx("h2",{className:"text-base font-semibold text-slate-200 mb-3",children:"Players"}),s.jsxs("form",{onSubmit:Ee,className:"space-y-4 max-w-md",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"playerName",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Name"}),s.jsx("input",{type:"text",id:"playerName",value:Ne,onChange:L=>je(L.target.value),required:!0,placeholder:"Player name",className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"playerEmail",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Email (optional)"}),s.jsx("input",{type:"email",id:"playerEmail",value:Ke,onChange:L=>at(L.target.value),placeholder:"player@example.com",className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"playerUserId",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Link to user (optional)"}),s.jsxs("select",{id:"playerUserId",value:ae,onChange:L=>we(L.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[s.jsx("option",{value:"",children:" None "}),te.map(L=>s.jsx("option",{value:L.sub||"",children:L.email||L.username||L.sub},L.sub||L.username))]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"submit",disabled:Fe,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:pe?"Update player":"Add player"}),s.jsx("button",{type:"button",onClick:Le,className:"rounded-md border border-slate-600 px-4 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"})]})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-base font-semibold text-slate-200 mb-3",children:"Player list"}),Y.length===0?s.jsx("p",{className:"text-sm text-slate-500",children:"No players yet. Add players above."}):s.jsx("ul",{className:"list-none p-0",children:Y.map(L=>s.jsxs("li",{className:"flex items-center gap-2 flex-wrap py-2 border-b border-slate-800 last:border-0",children:[s.jsx("span",{className:"font-semibold text-slate-200",children:L.name||L.id}),L.email&&s.jsxs("span",{className:"text-slate-500 text-sm",children:["(",L.email,")"]}),s.jsx("button",{type:"button",onClick:()=>De(L),className:"rounded-md border border-slate-600 px-2 py-1 text-xs text-slate-300 hover:bg-slate-800",children:"Edit"}),s.jsx("button",{type:"button",onClick:()=>yn(L.id),className:"rounded-md border border-red-800/50 px-2 py-1 text-xs text-red-300 hover:bg-red-900/30",children:"Delete"})]},L.id))})]})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Admin"}),s.jsx("div",{className:"rounded-md bg-amber-900/30 border border-amber-800/50 px-4 py-3 text-sm text-amber-200",children:"Squash Admin requires manager (in Squash group) or SuperAdmin access."})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Admin"}),s.jsxs("div",{className:"rounded-md bg-red-900/30 border border-red-800/50 px-4 py-3 text-sm text-red-200",children:["Sign in required. ",s.jsx(ie,{to:"/auth",className:"underline hover:text-red-100",children:"Sign in"})]})]})};function Fo(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const _o="funkedupshift_financial_guest_symbols",fb=()=>{const{user:e}=Oe(),t=yv(e),n=Cl(e),[r,a]=i.useState([]),[l,o]=i.useState({}),[c,u]=i.useState("yahoo"),[d,p]=i.useState([]),[f,g]=i.useState(!0),[v,b]=i.useState(!1),[y,S]=i.useState(""),[x,h]=i.useState(null),[m,k]=i.useState(null),C=i.useCallback(async()=>{const F=Fo();if(F){g(!0),h(null);try{const q=await ut(`${F}/financial/config`),G=q.ok?await q.json():{symbols:[],source:"yahoo",availableSources:["yahoo"]},re=G.symbols??[];if(u(G.source??"yahoo"),p(G.availableSources??["yahoo"]),t&&(e!=null&&e.userId)){const J=await Q(`${F}/financial/watchlist`);if(J.ok){const oe=(await J.json()).symbols??[];a(oe.length>0?oe:re)}else a(re)}else{const J=(()=>{try{const V=sessionStorage.getItem(_o);return V?JSON.parse(V):[]}catch{return[]}})();a(J.length>0?J:re)}}catch(q){h((q==null?void 0:q.message)??"Failed to load watchlist")}finally{g(!1)}}},[t,e==null?void 0:e.userId]),P=i.useCallback(async()=>{const F=Fo();if(!F||r.length===0)return;const q={};for(const G of r)try{const re=await ut(`${F}/financial/quote?symbol=${encodeURIComponent(G)}&source=${encodeURIComponent(c)}`);if(re.ok){const J=await re.json();q[G]=J}else q[G]=null}catch{q[G]=null}o(q)},[r,c]);i.useEffect(()=>{C()},[C]),i.useEffect(()=>{r.length>0?P():o({})},[r,c,P]);const I=()=>{const F=y.trim().toUpperCase();!F||r.includes(F)||(a(q=>{const G=[...q,F];if(!t)try{sessionStorage.setItem(_o,JSON.stringify(G))}catch{}return G}),S(""))},$=F=>{a(q=>{const G=q.filter(re=>re!==F);if(!t)try{sessionStorage.setItem(_o,JSON.stringify(G))}catch{}return G}),o(q=>{const G={...q};return delete G[F],G})},K=async()=>{const F=Fo();if(F){b(!0),h(null),k(null);try{const q=await Q(`${F}/financial/watchlist`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbols:r})});if(!q.ok){const G=await q.json().catch(()=>({}));throw new Error(G.error??"Failed to save")}k("Watchlist saved.")}catch(q){h((q==null?void 0:q.message)??"Failed to save")}finally{b(!1)}}};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Financial"}),n&&s.jsx("p",{className:"text-sm text-slate-400",children:s.jsx(ie,{to:"/admin/financial",className:"text-brand-orange hover:text-orange-400",children:"Financial Admin"})}),f?s.jsx("p",{className:"text-sm text-slate-500",children:"Loading"}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-wrap gap-2 items-end",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"newSymbol",className:"block text-xs text-slate-500 mb-1",children:"Add symbol"}),s.jsx("input",{id:"newSymbol",type:"text",value:y,onChange:F=>S(F.target.value.toUpperCase()),onKeyDown:F=>F.key==="Enter"&&(F.preventDefault(),I()),placeholder:"AAPL",className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 w-24"})]}),s.jsx("button",{type:"button",onClick:I,disabled:!y.trim(),className:"rounded-md bg-brand-orange px-3 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:"Add"}),d.length>1&&s.jsxs("div",{className:"ml-4",children:[s.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Data source"}),s.jsx("select",{value:c,onChange:F=>u(F.target.value),className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50",children:d.map(F=>s.jsx("option",{value:F,children:F==="yahoo"?"Yahoo Finance":"Alpha Vantage"},F))})]})]}),r.length>0&&s.jsx("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-800",children:[s.jsx("thead",{className:"bg-slate-900/80",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Symbol"}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase",children:"Price"}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase",children:"Change"}),s.jsx("th",{className:"px-4 py-3 w-10"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-800",children:r.map(F=>{const q=l[F];return s.jsxs("tr",{className:"hover:bg-slate-800/50",children:[s.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-200",children:F}),s.jsx("td",{className:"px-4 py-3 text-sm text-right text-slate-300",children:q?`$${q.price.toFixed(2)}`:""}),s.jsx("td",{className:"px-4 py-3 text-sm text-right",children:q?s.jsxs("span",{className:q.change>=0?"text-emerald-400":"text-red-400",children:[q.change>=0?"+":"",q.change.toFixed(2)," (",q.changePercent>=0?"+":"",q.changePercent.toFixed(2),"%)"]}):s.jsx("span",{className:"text-slate-500",children:""})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("button",{type:"button",onClick:()=>$(F),className:"text-slate-500 hover:text-red-400","aria-label":`Remove ${F}`,children:""})})]},F)})})]})}),t&&r.length>0&&s.jsx("button",{type:"button",onClick:K,disabled:v,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:v?"Saving":"Save watchlist"}),!t&&s.jsx("p",{className:"text-sm text-slate-500",children:"Sign in to save your watchlist. Guest symbols are temporary and expire when you close the browser."}),r.length===0&&s.jsx("p",{className:"text-sm text-slate-500",children:"Add symbols above to build your watchlist. Default symbols from admin may appear when you first load."})]}),m&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:m}),x&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:x})]})};function $d(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const pb=()=>{const{user:e}=Oe(),[t,n]=qt(),r=t.get("tab"),a=r==="members"?"members":r==="symbols"?"symbols":"overview",[l,o]=i.useState(a),[c,u]=i.useState([]),[d,p]=i.useState("yahoo"),[f,g]=i.useState(!1),[v,b]=i.useState(!1),[y,S]=i.useState(null),[x,h]=i.useState(null),[m,k]=i.useState(""),[C]=i.useState(["yahoo","alpha_vantage"]);i.useEffect(()=>{o(r==="members"?"members":r==="symbols"?"symbols":"overview")},[r]);const P=G=>{o(G),n(G==="overview"?{}:{tab:G},{replace:!0})},I=i.useCallback(async()=>{const G=$d();if(G){g(!0),S(null);try{const re=await Q(`${G}/admin/financial/default-symbols`);if(!re.ok)throw new Error("Failed to load");const J=await re.json();u(J.symbols??[]),p(J.source??"yahoo")}catch(re){S((re==null?void 0:re.message)??"Failed to load")}finally{g(!1)}}},[]);i.useEffect(()=>{l==="symbols"&&I()},[l,I]);const $=()=>{const G=m.trim().toUpperCase();!G||c.includes(G)||(u(re=>[...re,G]),k(""))},K=G=>{u(re=>re.filter(J=>J!==G))},F=async()=>{const G=$d();if(G){b(!0),S(null),h(null);try{const re=await Q(`${G}/admin/financial/default-symbols`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbols:c,source:d})});if(!re.ok){const J=await re.json().catch(()=>({}));throw new Error(J.error??"Failed to save")}h("Default symbols saved.")}catch(re){S((re==null?void 0:re.message)??"Failed to save")}finally{b(!1)}}};return Cl(e)?s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ie,{to:"/financial",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Financial"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Financial Admin"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manage Financial section settings, members, and data sources."})]}),s.jsxs("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:[s.jsx("button",{type:"button",onClick:()=>P("overview"),className:`px-4 py-2 rounded-md text-sm font-medium ${l==="overview"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Overview"}),s.jsx("button",{type:"button",onClick:()=>P("symbols"),className:`px-4 py-2 rounded-md text-sm font-medium ${l==="symbols"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Tracked Symbols"}),s.jsx("button",{type:"button",onClick:()=>P("members"),className:`px-4 py-2 rounded-md text-sm font-medium ${l==="members"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Members"})]}),l==="overview"&&s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-6 text-sm text-slate-400",children:[s.jsx("p",{className:"mb-2",children:"Admin configuration:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 text-slate-500",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Tracked symbols"}),"  Default symbols for new users' watchlists"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Data source"}),"  Yahoo Finance (no key) or Alpha Vantage (API key in Terraform)"]})]})]}),l==="symbols"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-wrap gap-2 items-end",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"newSymbol",className:"block text-xs text-slate-500 mb-1",children:"Add symbol"}),s.jsx("input",{id:"newSymbol",type:"text",value:m,onChange:G=>k(G.target.value.toUpperCase()),onKeyDown:G=>G.key==="Enter"&&(G.preventDefault(),$()),placeholder:"AAPL",className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 w-24"})]}),s.jsx("button",{type:"button",onClick:$,disabled:!m.trim(),className:"rounded-md bg-brand-orange px-3 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:"Add"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Default data source"}),s.jsx("select",{value:d,onChange:G=>p(G.target.value),className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50",children:C.map(G=>s.jsx("option",{value:G,children:G==="yahoo"?"Yahoo Finance":"Alpha Vantage"},G))})]}),c.length>0&&s.jsx("ul",{className:"flex flex-wrap gap-2",children:c.map(G=>s.jsxs("li",{className:"inline-flex items-center gap-1 rounded-md bg-slate-800 px-2 py-1 text-sm text-slate-200",children:[G,s.jsx("button",{type:"button",onClick:()=>K(G),className:"text-slate-500 hover:text-red-400","aria-label":`Remove ${G}`,children:""})]},G))}),s.jsx("button",{type:"button",onClick:F,disabled:v||f,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:v?"Saving":"Save defaults"}),x&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:x}),y&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:y})]}),l==="members"&&s.jsx("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-6 text-sm text-slate-400",children:s.jsx("p",{className:"mb-2",children:"Financial access is RBAC-based: guests view default symbols (session-only custom symbols); logged-in users can save their watchlist. No custom group required."})})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Financial Admin"}),s.jsx("p",{className:"text-sm text-slate-400",children:"SuperAdmin access is required."})]})};function hb(e){return typeof window>"u"?e:`${window.location.origin}${e.startsWith("/")?e:`/${e}`}`}const xb=({memeId:e,title:t="",trigger:n,className:r=""})=>{const[a,l]=i.useState(!1),[o,c]=i.useState(!1),u=i.useRef(null),d=hb(`/memes/${encodeURIComponent(e)}`),p=encodeURIComponent(d),f=encodeURIComponent(t||"Meme"),g=async()=>{try{await navigator.clipboard.writeText(d),c(!0),setTimeout(()=>c(!1),2e3)}catch{}};return i.useEffect(()=>{function v(b){u.current&&!u.current.contains(b.target)&&l(!1)}if(a)return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[a]),s.jsxs("div",{className:`relative inline-block ${r}`,ref:u,children:[s.jsx("button",{type:"button",onClick:()=>l(v=>!v),className:"inline-flex items-center gap-1 text-[11px] text-slate-400 hover:text-slate-200",children:n}),a&&s.jsxs("div",{className:"absolute left-0 top-full z-20 mt-1 min-w-[180px] rounded-lg border border-slate-700 bg-slate-900 p-2 shadow-xl",children:[s.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 mb-2 text-xs font-medium text-slate-500 uppercase",children:[s.jsx(Vc,{className:"h-3.5 w-3.5"}),"Share"]}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsxs("button",{type:"button",onClick:g,className:"flex items-center gap-2 rounded px-2 py-1.5 text-left text-sm text-slate-200 hover:bg-slate-800",children:[s.jsx(mp,{className:"h-4 w-4 text-slate-500"}),"Copy link",o&&s.jsx("span",{className:"text-emerald-400 text-xs",children:""})]}),s.jsx("a",{href:"https://www.instagram.com/",target:"_blank",rel:"noopener noreferrer",title:"Open Instagram",className:"flex items-center gap-2 rounded px-2 py-1.5 text-left text-sm text-slate-200 hover:bg-slate-800",onClick:()=>l(!1),children:"Instagram"}),s.jsx("a",{href:`https://www.facebook.com/sharer/sharer.php?u=${p}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 rounded px-2 py-1.5 text-left text-sm text-slate-200 hover:bg-slate-800",onClick:()=>l(!1),children:"Facebook"}),s.jsx("a",{href:`https://bsky.app/intent/compose?text=${p}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 rounded px-2 py-1.5 text-left text-sm text-slate-200 hover:bg-slate-800",onClick:()=>l(!1),children:"Bluesky"}),s.jsx("a",{href:`https://www.reddit.com/submit?url=${p}&title=${f}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 rounded px-2 py-1.5 text-left text-sm text-slate-200 hover:bg-slate-800",onClick:()=>l(!1),children:"Reddit"})]})]})]})};function Bo(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Id="memes_my_cache_invalidate",gb=()=>{const{user:e}=Oe(),[t,n]=qt(),r=(t.get("tab")||"all")==="mine"?"mine":"all",[a,l]=i.useState([]),[o,c]=i.useState(()=>t.get("q")??""),[u,d]=i.useState(()=>{const N=t.get("tagIds");return N?N.split(",").filter(Boolean):[]}),[p,f]=i.useState(()=>t.get("tagMode")==="and"?"and":"or"),[g,v]=i.useState(!1),[b,y]=i.useState(""),[S,x]=i.useState("newest"),[h,m]=i.useState(!1),[k,C]=i.useState(null),P=i.useRef(null),[I,$]=i.useState([]),K=i.useRef(null),[F,q]=i.useState(!1),G=Ip(e),re=nr(e),J=Yc(e),V=e&&nr(e),oe=N=>J||re&&N.userId===(e==null?void 0:e.userId),fe=o.trim().length>0||u.length>0;i.useEffect(()=>{try{const N=sessionStorage.getItem(Id);if(!N)return;sessionStorage.removeItem(Id);const H=JSON.parse(N);if(H.tagOnly&&H.memeId&&H.tags){const ne=(K.current??[]).map(_=>_.PK===H.memeId?{..._,tags:H.tags}:_);if(K.current=ne,r==="mine"){let _=ne;u.length>0&&(_=p==="and"?ne.filter(W=>u.every(A=>(W.tags??[]).includes(A))):ne.filter(W=>u.some(A=>(W.tags??[]).includes(A)))),l(_)}}else q(!0)}catch{}},[]),i.useEffect(()=>{const N=Bo();if(!N)return;let H=!1;return ut(`${N}/memes/tags`).then(ne=>ne.ok?ne.json():Promise.reject(new Error("Failed to load tags"))).then(ne=>{H||$((ne.tags??[]).sort((_,W)=>_.localeCompare(W)))}).catch(()=>{}),()=>{H=!0}},[]),i.useEffect(()=>{const N=new URLSearchParams;r==="mine"&&N.set("tab","mine"),fe&&(o.trim()&&N.set("q",o.trim()),u.length&&(N.set("tagIds",u.join(",")),N.set("tagMode",p))),n(N,{replace:!0})},[r,fe,o,u,p,n]),i.useEffect(()=>{const N=Bo();if(!N){C("API URL not set.");return}let H=!1;if(r==="mine"&&V){const _=K.current,W=u.length>0;if(_&&!F&&!o.trim()){q(!1);let A=_;W&&(p==="and"?A=_.filter(D=>u.every(M=>(D.tags??[]).includes(M))):A=_.filter(D=>u.some(M=>(D.tags??[]).includes(M)))),l(A),m(!1);return}}async function ne(){m(!0),C(null);const _=r==="mine"&&V;try{const W=new URLSearchParams;W.set("limit",_?"100":"20"),_&&W.set("mine","1"),o.trim()&&W.set("q",o.trim()),u.length>0&&!_&&(W.set("tagIds",u.join(",")),W.set("tagMode",p));const D=await ut(`${N}${e?"/memes":"/memes/cache"}?${W.toString()}`);if(!D.ok){const w=await D.text();throw new Error(`HTTP ${D.status}: ${w}`)}const M=await D.json();if(H)return;const ee=M.memes??[];if(_)if(K.current=ee,q(!1),u.length>0){const w=p==="and"?ee.filter(T=>u.every(z=>(T.tags??[]).includes(z))):ee.filter(T=>u.some(z=>(T.tags??[]).includes(z)));l(w)}else l(ee);else l(ee)}catch(W){H||C((W==null?void 0:W.message)??"Failed to load memes.")}finally{H||m(!1)}}return ne(),()=>{H=!0}},[r,o,u,p,F,V,e]),i.useEffect(()=>{function N(H){P.current&&!P.current.contains(H.target)&&v(!1)}if(g)return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[g]);const j=i.useMemo(()=>I.filter(N=>!u.includes(N)&&(!b.trim()||N.toLowerCase().includes(b.toLowerCase()))),[I,u,b]),E=i.useMemo(()=>{const N=[...a];return N.sort((H,ne)=>{const _=(H.title||H.PK||"").toLowerCase(),W=(ne.title||ne.PK||"").toLowerCase(),A=typeof H.averageRating=="number"?H.averageRating:0,D=typeof ne.averageRating=="number"?ne.averageRating:0,M=H.createdAt||"",ee=ne.createdAt||"";if(S==="newest"){const w=ee.localeCompare(M);return w!==0?w:_.localeCompare(W)}if(S==="oldest"){const w=M.localeCompare(ee);return w!==0?w:_.localeCompare(W)}return S==="avgDesc"?D!==A?D-A:_.localeCompare(W):S==="avgAsc"?A!==D?A-D:_.localeCompare(W):S==="alphaAsc"?_.localeCompare(W):S==="alphaDesc"?W.localeCompare(_):0}),N},[a,S]),U=async(N,H)=>{const ne=Bo();if(ne)try{await ut(`${ne}/memes/stars`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({memeId:N,rating:H})}),l(_=>_.map(W=>W.PK===N?{...W,averageRating:H}:W))}catch{}};if(e&&!sa(e))return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Memes"}),s.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:"You do not have access to Memes. Join the Memes custom group or contact an admin."})]});const B=N=>{const H=new URLSearchParams(t);N==="mine"?H.set("tab","mine"):H.delete("tab"),n(H,{replace:!0})};return i.useEffect(()=>{r==="mine"&&!V&&n(N=>{const H=new URLSearchParams(N);return H.delete("tab"),H},{replace:!0})},[r,V,n]),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("header",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Memes"}),V&&s.jsxs("div",{className:"flex rounded-lg border border-slate-700 bg-slate-900/60 p-0.5",children:[s.jsx("button",{type:"button",onClick:()=>B("all"),className:`rounded-md px-3 py-1 text-sm font-medium transition-colors ${r==="all"?"bg-slate-700 text-slate-50":"text-slate-400 hover:text-slate-200"}`,children:"All"}),s.jsx("button",{type:"button",onClick:()=>B("mine"),className:`rounded-md px-3 py-1 text-sm font-medium transition-colors ${r==="mine"?"bg-slate-700 text-slate-50":"text-slate-400 hover:text-slate-200"}`,children:"My Memes"})]})]}),s.jsx("p",{className:"text-sm text-slate-400",children:r==="mine"?"Your memes, newest first. Filter by tags below.":e?"Browse and rate memes. Latest 20 shown by default.":"Cached memes. Sign in to rate or create."})]}),e&&s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-4","aria-label":"Search and filter",children:[s.jsxs("form",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",onSubmit:N=>{N.preventDefault(),c(o.trim())},children:[s.jsx("input",{type:"text",value:o,onChange:N=>c(N.target.value),placeholder:"Search memes (title, description)",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("button",{type:"submit",className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500",children:"Search"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-4 sm:gap-6",children:[s.jsxs("div",{ref:P,className:"relative flex-shrink-0 min-w-0 max-w-sm",children:[s.jsx("label",{htmlFor:"meme-tag-filter",className:"block text-xs font-medium text-slate-400 mb-1",children:"Tags (filter by)"}),s.jsx("input",{id:"meme-tag-filter",type:"text",value:b,onChange:N=>y(N.target.value),onFocus:()=>v(!0),placeholder:"Search and select tags",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",autoComplete:"off"}),g&&s.jsx("div",{className:"absolute left-0 top-full z-10 mt-1 w-full max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",role:"listbox",children:j.length>0?j.map(N=>s.jsx("button",{type:"button",role:"option",onClick:()=>{d(H=>H.includes(N)?H:[...H,N]),y("")},className:"block w-full text-left px-3 py-2 text-sm text-slate-200 hover:bg-slate-800",children:N},N)):s.jsx("div",{className:"px-3 py-2 text-xs text-slate-500",children:"No matching tags"})}),u.length>0&&s.jsxs("div",{className:"mt-2 flex flex-wrap gap-1",children:[u.map(N=>s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-300",children:[N,s.jsx("button",{type:"button",onClick:()=>d(H=>H.filter(ne=>ne!==N)),className:"hover:text-slate-100","aria-label":`Remove ${N}`,children:""})]},N)),s.jsxs("select",{value:p,onChange:N=>f(N.target.value),className:"rounded border border-slate-700 bg-slate-950 px-2 py-0.5 text-[11px] text-slate-400",children:[s.jsx("option",{value:"or",children:"OR"}),s.jsx("option",{value:"and",children:"AND"})]})]})]}),s.jsxs("div",{className:"flex items-end gap-2",children:[s.jsx("label",{className:"text-xs font-medium text-slate-400",children:"Sort"}),s.jsxs("select",{value:S,onChange:N=>x(N.target.value),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",children:[s.jsx("option",{value:"newest",children:"Newest first"}),s.jsx("option",{value:"oldest",children:"Oldest first"}),s.jsx("option",{value:"avgDesc",children:"Avg stars (high first)"}),s.jsx("option",{value:"avgAsc",children:"Avg stars (low first)"}),s.jsx("option",{value:"alphaAsc",children:"Title AZ"}),s.jsx("option",{value:"alphaDesc",children:"Title ZA"})]}),s.jsx("span",{className:"text-slate-500",children:E.length===0?"No memes":`${E.length} memes`})]})]})]}),k&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:k}),h?s.jsx("div",{className:"text-sm text-slate-400",children:"Loading memes"}):s.jsxs(s.Fragment,{children:[s.jsx("ul",{className:"space-y-3 mt-2",children:E.map(N=>{const H=N.thumbnailUrl||N.mediaUrl,ne=N.title||N.PK||"Untitled",_=`/memes/${encodeURIComponent(N.PK)}`;return s.jsxs("li",{className:"flex gap-3 rounded-xl border border-slate-800 bg-slate-950/60 p-3",children:[s.jsx(ie,{to:_,className:"h-16 w-24 flex-shrink-0 overflow-hidden rounded-lg border border-slate-700 bg-slate-900 flex items-center justify-center text-xl hover:border-slate-600",children:H?s.jsx("img",{src:H,alt:"",className:"h-full w-full object-cover",onError:W=>{W.currentTarget.style.visibility="hidden"}}):s.jsx("span",{children:""})}),s.jsxs("div",{className:"min-w-0 flex-1 space-y-1",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("h2",{className:"truncate text-sm font-semibold text-slate-50",children:s.jsx(ie,{to:_,className:"hover:text-brand-orange",children:ne})}),N.isPrivate&&s.jsx("span",{className:"inline-flex rounded-full bg-slate-900 px-2 py-0.5 text-[10px] uppercase text-slate-500",children:"Private"}),typeof N.averageRating=="number"&&s.jsxs("span",{className:"inline-flex rounded-full bg-slate-900 px-2 py-0.5 text-[11px] text-amber-300",children:[N.averageRating.toFixed(1),""]})]}),N.description&&s.jsx("p",{className:"text-xs text-slate-300 line-clamp-3",children:N.description}),N.tags&&N.tags.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1 pt-1",children:N.tags.map(W=>s.jsx("span",{className:"rounded-full bg-slate-900 px-2 py-0.5 text-[11px] text-slate-300",children:W},W))}),s.jsxs("div",{className:"pt-1 flex items-center gap-3 flex-wrap",children:[s.jsx(xb,{memeId:N.PK,title:ne,trigger:s.jsxs(s.Fragment,{children:[s.jsx(Vc,{className:"h-3.5 w-3.5"}),"Share"]})}),oe(N)&&s.jsxs(ie,{to:`/memes/${encodeURIComponent(N.PK)}/edit`,className:"inline-flex items-center gap-1 text-[11px] text-slate-400 hover:text-slate-200",children:[s.jsx(ua,{className:"h-3.5 w-3.5"}),"Edit"]}),G&&s.jsxs("label",{className:"inline-flex items-center gap-1 text-[11px] text-slate-400",children:[s.jsx("span",{children:"Rate:"}),s.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-1 py-0.5 text-[11px] text-slate-50",onChange:W=>{const A=Number(W.target.value);A>=1&&A<=5&&U(N.PK,A)},defaultValue:"",children:[s.jsx("option",{value:"",children:"--"}),s.jsx("option",{value:"5",children:"5"}),s.jsx("option",{value:"4",children:"4"}),s.jsx("option",{value:"3",children:"3"}),s.jsx("option",{value:"2",children:"2"}),s.jsx("option",{value:"1",children:"1"})]})]})]})]})]},N.PK)})}),E.length===0&&!h&&s.jsx("div",{className:"flex items-center justify-center min-h-[200px]",children:s.jsx("p",{className:"text-lg text-slate-500",children:r==="mine"?fe?"No memes match the selected tags.":"You haven't created any memes yet. Create one!":fe?"No memes found.":"No memes yet. Create one!"})})]})]})},Bp=({tags:e,onTagsChange:t,allTags:n,fetchTags:r,placeholder:a="Type to suggest or create tag, Tab to autocomplete",className:l=""})=>{const[o,c]=i.useState(""),[u,d]=i.useState(!1),[p,f]=i.useState(0),[g,v]=i.useState(null),b=i.useRef(null),y=i.useRef(null),S=i.useRef(null);i.useEffect(()=>{function C(P){S.current&&!S.current.contains(P.target)&&d(!1)}return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),i.useEffect(()=>{if(!r){v(null);return}const C=o.trim();if(C.length===0){v(null);return}b.current&&b.current.abort();const P=new AbortController;b.current=P;const I=setTimeout(()=>{r(C).then($=>{P.signal.aborted||v($)}).catch(()=>{P.signal.aborted||v(null)})},80);return()=>{clearTimeout(I),P.abort()}},[o,r]);const x=i.useMemo(()=>{const C=o.trim().toLowerCase();return r&&g!==null?g.filter(P=>!e.includes(P)):C?n.filter(P=>!e.includes(P)&&P.toLowerCase().includes(C)):n.filter(P=>!e.includes(P))},[n,e,o,r,g]),h=C=>{const P=C.trim();P&&!e.includes(P)&&t([...e,P]),c(""),f(0)},m=C=>{t(e.filter(P=>P!==C))},k=C=>{if(C.key==="Tab"||C.key==="Enter"){if(C.preventDefault(),x.length>0)h(x[p]??x[0]);else{const P=o.trim();P&&h(P)}return}if(C.key==="ArrowDown"){C.preventDefault(),f(P=>(P+1)%Math.max(1,x.length));return}if(C.key==="ArrowUp"){C.preventDefault(),f(P=>P<=0?Math.max(0,x.length-1):P-1);return}C.key==="Escape"&&(d(!1),f(0))};return s.jsxs("div",{ref:S,className:`relative ${l}`,children:[s.jsx("input",{ref:y,type:"text",value:o,onChange:C=>{c(C.target.value),d(!0),f(0)},onFocus:()=>d(!0),onKeyDown:k,placeholder:a,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",autoComplete:"off"}),u&&(x.length>0||o.trim())&&s.jsx("div",{className:"absolute left-0 top-full z-10 mt-1 w-full max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",role:"listbox",children:x.length>0?x.map((C,P)=>s.jsx("button",{type:"button",role:"option","aria-selected":P===p,onClick:()=>h(C),onMouseEnter:()=>f(P),className:`block w-full text-left px-3 py-2 text-sm text-slate-200 hover:bg-slate-800 ${P===p?"bg-slate-800":""}`,children:C},C)):s.jsxs("button",{type:"button",onClick:()=>o.trim()&&h(o.trim()),className:"block w-full text-left px-3 py-2 text-sm text-slate-200 hover:bg-slate-800",children:['Create "',o.trim(),'"']})}),e.length>0&&s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:e.map(C=>s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-300",children:[C,s.jsx("button",{type:"button",onClick:()=>m(C),className:"hover:text-slate-100","aria-label":`Remove ${C}`,children:""})]},C))})]})},Ud=["Impact","Arial Black","Comic Sans MS","Georgia","Verdana","Times New Roman","Courier New"],Dd=[{id:"top-left",x:.05,y:.05,align:"left"},{id:"top-center",x:.5,y:.05,align:"center"},{id:"top-right",x:.95,y:.05,align:"right"},{id:"center",x:.5,y:.5,align:"center"},{id:"bottom-left",x:.05,y:.95,align:"left"},{id:"bottom-center",x:.5,y:.95,align:"center"},{id:"bottom-right",x:.95,y:.95,align:"right"}],Md=500,yb=10*1024*1024;function jr(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const vb=()=>{const{user:e}=Oe(),t=Vt(),n=i.useRef(null),r=i.useRef([]),[a,l]=i.useState(null),[o,c]=i.useState(null),[u,d]=i.useState(""),[p,f]=i.useState([]),[g,v]=i.useState(null),[b,y]=i.useState(""),[S,x]=i.useState(""),[h,m]=i.useState(!1),[k,C]=i.useState("resize"),[P,I]=i.useState(!1),[$,K]=i.useState(null),[F,q]=i.useState(!1),[G,re]=i.useState([]),[J,V]=i.useState([]),oe=_=>{const W=r.current;if(W.some(D=>D.zoneId===_))return;const A=[...W,{zoneId:_,text:"",font:Ud[0],color:"#ffffff",size:32}];r.current=A,f(A),v(_)},fe=_=>{const A=r.current.filter(D=>D.zoneId!==_);r.current=A,f(A),g===_&&v(null)},j=(_,W)=>{const D=r.current.map(M=>M.zoneId===_?{...M,...W}:M);r.current=D,f(D)},E=_=>{if(_.size>yb){K("File too large (max 10MB)");return}if(!["image/jpeg","image/png","image/gif","image/webp","image/bmp"].includes(_.type)){K("Invalid image type");return}K(null);const A=new FileReader;A.onload=()=>l(A.result),A.readAsDataURL(_),c(_),d("")},U=async()=>{const _=u.trim();if(_){K(null);try{const A=await(await Q(`${jr()}/memes/import-from-url`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:_})})).json();if(!A.presignedUrl){K(A.error||"Failed to load image from URL");return}l(A.presignedUrl),c(null)}catch(W){K((W==null?void 0:W.message)??"Failed to load image from URL")}}},B=async()=>{const _=jr();if(_){q(!0),K(null);try{const A=await(await Q(`${_}/memes/generate-title`,{method:"POST"})).json();A.title&&y(A.title)}catch{y(`Meme ${Date.now().toString(36)}`)}finally{q(!1)}}},N=i.useCallback(()=>{const _=n.current;if(!_||!a)return Promise.resolve();const W=_.getContext("2d");return W?new Promise((A,D)=>{const M=new Image;M.crossOrigin="anonymous",M.onload=()=>{const ee=_.width,w=_.height;if(W.clearRect(0,0,ee,w),k==="resize"){const T=Math.min(ee/M.width,w/M.height),z=M.width*T,Y=M.height*T,O=(ee-z)/2,te=(w-Y)/2;W.drawImage(M,O,te,z,Y)}else W.drawImage(M,0,0,ee,w);r.current.forEach(T=>{const z=Dd.find(te=>te.id===T.zoneId);if(!z||!T.text)return;W.font=`${T.size}px ${T.font}`,W.fillStyle=T.color,W.textAlign=z.align,W.textBaseline=z.y<.5?"top":"bottom";const Y=z.x*ee,O=z.y*w;W.fillText(T.text,Y,O)}),A()},M.onerror=()=>{K("Failed to load image"),D(new Error("Failed to load image"))},M.src=a}):Promise.resolve()},[a,p,k]);i.useEffect(()=>{N().catch(()=>{})},[N]),i.useEffect(()=>{const _=jr();if(!_)return;let W=!1;return fetch(`${_}/memes/tags`).then(A=>A.ok?A.json():Promise.reject(new Error("Failed to load tags"))).then(A=>{W||V((A.tags??[]).sort((D,M)=>D.localeCompare(M)))}).catch(()=>{}),()=>{W=!0}},[]);const H=async()=>{if(!a){K("Add an image first");return}const _=n.current;if(!_)return;const W=jr();if(!W){K("API not configured");return}I(!0),K(null);try{await N(),await new Promise(z=>requestAnimationFrame(z));const A=await new Promise(z=>{_.toBlob(Y=>z(Y),"image/png",.95)});if(!A)throw new Error("Failed to export canvas");const M=await(await Q(`${W}/memes/upload`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contentType:"image/png"})})).json();if(!M.uploadUrl||!M.key)throw new Error(M.error||"Failed to get upload URL");const ee=M.key;await fetch(M.uploadUrl,{method:"PUT",body:A,headers:{"Content-Type":"image/png"}});const w=await Q(`${W}/memes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mediaKey:ee,title:b.trim()||void 0,description:S.trim()||void 0,isPrivate:h,textBoxes:r.current,sizeMode:k,tags:G})});if(!w.ok){const z=await w.json();throw new Error(z.error||"Failed to save meme")}const T=await w.json();try{sessionStorage.setItem("memes_my_cache_invalidate",JSON.stringify({tagOnly:!1}))}catch{}t(T.id?`/memes/${encodeURIComponent(T.id)}`:"/memes")}catch(A){K((A==null?void 0:A.message)??"Failed to save meme")}finally{I(!1)}},ne=nr(e)||!!(e!=null&&e.impersonated);return e?ne?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("header",{className:"flex items-center gap-4",children:[s.jsxs(ie,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Memes"]}),s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Meme Generator"})]}),s.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1fr,320px]",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-2",children:"Image"}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("input",{type:"file",accept:"image/jpeg,image/png,image/gif,image/webp,image/bmp",onChange:_=>{var W;return((W=_.target.files)==null?void 0:W[0])&&E(_.target.files[0])},className:"text-sm text-slate-300 file:mr-2 file:rounded file:border-0 file:bg-brand-orange file:px-3 file:py-1 file:text-slate-950"}),s.jsx("span",{className:"text-xs text-slate-500",children:"or"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"url",value:u,onChange:_=>d(_.target.value),placeholder:"Paste image URL",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500"}),s.jsx("button",{type:"button",onClick:U,className:"rounded-md bg-slate-700 px-3 py-2 text-sm text-slate-200 hover:bg-slate-600",children:"Load"})]})]})]}),a&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{className:"text-xs font-medium text-slate-400",children:"Preview"}),s.jsxs("select",{value:k,onChange:_=>C(_.target.value),className:"rounded border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-300",children:[s.jsx("option",{value:"resize",children:"Resize to fit"}),s.jsx("option",{value:"original",children:"Original"})]})]}),s.jsx("canvas",{ref:n,width:Md,height:Md,className:"w-full max-w-[500px] border border-slate-700 rounded-lg bg-slate-900"})]}),s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-2",children:"Text boxes (fixed zones)"}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:Dd.map(_=>{const W=p.find(A=>A.zoneId===_.id);return s.jsxs("div",{className:"rounded border border-slate-700 p-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"text-xs text-slate-400",children:_.id}),W?s.jsx("button",{type:"button",onClick:()=>fe(_.id),className:"text-red-400 hover:text-red-300 text-xs",children:"Remove"}):s.jsx("button",{type:"button",onClick:()=>oe(_.id),className:"text-brand-orange hover:text-orange-400 text-xs",children:"Add"})]}),W&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("input",{type:"text",value:W.text,onChange:A=>j(_.id,{text:A.target.value}),placeholder:"Text",className:"w-full rounded border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-50"}),s.jsx("select",{value:W.font,onChange:A=>j(_.id,{font:A.target.value}),className:"w-full rounded border border-slate-700 bg-slate-950 px-2 py-1 text-[11px] text-slate-300",children:Ud.map(A=>s.jsx("option",{value:A,children:A},A))}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("input",{type:"color",value:W.color,onChange:A=>j(_.id,{color:A.target.value}),className:"h-6 w-8 cursor-pointer rounded border border-slate-700"}),s.jsx("input",{type:"number",value:W.size,onChange:A=>j(_.id,{size:Number(A.target.value)||32}),min:12,max:72,className:"w-14 rounded border border-slate-700 bg-slate-950 px-1 py-0.5 text-[11px] text-slate-50"})]})]})]},_.id)})})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Title (optional)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:b,onChange:_=>y(_.target.value),placeholder:"Generate or type",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500"}),s.jsx("button",{type:"button",onClick:B,disabled:F,className:"rounded-md bg-brand-orange px-3 py-2 text-sm font-medium text-slate-950 disabled:opacity-50",children:F?"":"Generate"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Description (optional)"}),s.jsx("textarea",{value:S,onChange:_=>x(_.target.value),placeholder:"Optional description",rows:3,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Tags"}),s.jsx(Bp,{tags:G,onTagsChange:re,allTags:J,fetchTags:async _=>{const W=jr();if(!W)return[];const A=await Q(`${W}/memes/tags?q=${encodeURIComponent(_)}`);return A.ok?(await A.json()).tags??[]:[]},placeholder:"Type to suggest or create tag, Tab to autocomplete"})]}),s.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:[s.jsx("input",{type:"checkbox",checked:h,onChange:_=>m(_.target.checked),className:"rounded border-slate-600"}),"Private (only you can see)"]})]}),$&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:$}),s.jsx("button",{type:"button",onClick:H,disabled:!a||P,className:"w-full rounded-md bg-brand-orange px-4 py-3 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50 disabled:cursor-not-allowed",children:P?"Saving":"Save meme"})]})]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-2xl font-semibold text-slate-50",children:"Meme Generator"}),s.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:"Meme creator access required (user + Memes group). Join the Memes custom group or contact an admin."})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-2xl font-semibold text-slate-50",children:"Meme Generator"}),s.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:"Sign in to create memes."})]})};function bb(e){return typeof window>"u"?e:`${window.location.origin}${e.startsWith("/")?e:`/${e}`}`}const zp=({memeId:e,title:t="",className:n=""})=>{const[r,a]=i.useState(!1),l=bb(`/memes/${encodeURIComponent(e)}`),o=encodeURIComponent(l),c=encodeURIComponent(t||"Meme"),d=[{label:"Copy link",icon:r?"":null,onClick:async()=>{try{await navigator.clipboard.writeText(l),a(!0),setTimeout(()=>a(!1),2e3)}catch{}},href:null},{label:"Instagram",href:"https://www.instagram.com/",title:"Open Instagram (copy link first to share)"},{label:"Facebook",href:`https://www.facebook.com/sharer/sharer.php?u=${o}`},{label:"Bluesky",href:`https://bsky.app/intent/compose?text=${o}`},{label:"Reddit",href:`https://www.reddit.com/submit?url=${o}&title=${c}`}];return s.jsxs("div",{className:`rounded-xl border border-slate-800 bg-slate-950/60 p-4 ${n}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Vc,{className:"h-4 w-4 text-slate-400"}),s.jsx("span",{className:"text-xs font-medium text-slate-400 uppercase",children:"Share"})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(p=>p.onClick?s.jsxs("button",{type:"button",onClick:p.onClick,className:"inline-flex items-center gap-1.5 rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 hover:bg-slate-800 hover:border-slate-600",children:[p.icon?s.jsx("span",{className:"text-emerald-400",children:p.icon}):s.jsx(mp,{className:"h-4 w-4 text-slate-400"}),p.label]},p.label):s.jsx("a",{href:p.href,target:"_blank",rel:"noopener noreferrer",title:p.title,className:"inline-flex items-center gap-1.5 rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 hover:bg-slate-800 hover:border-slate-600",children:p.label},p.label))})]})};function Od(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const wb=()=>{const{id:e}=ir(),{user:t}=Oe(),[n,r]=i.useState(null),[a,l]=i.useState(!0),[o,c]=i.useState(null),u=!!n&&(Yc(t)||nr(t)&&n.userId===(t==null?void 0:t.userId)),d=e?decodeURIComponent(e):"";i.useEffect(()=>{const v=Od();if(!v||!d){c(d?"API URL not set.":"Missing meme id."),l(!1);return}let b=!1;async function y(){l(!0),c(null);try{const x=await ut(`${v}${t?"/memes":"/memes/cache"}?id=${encodeURIComponent(d)}`);if(x.status===404){b||r(null);return}if(!x.ok){const m=await x.text();throw new Error(`HTTP ${x.status}: ${m}`)}const h=await x.json();if(b)return;r(h.meme??null)}catch(S){b||c((S==null?void 0:S.message)??"Failed to load meme.")}finally{b||l(!1)}}return y(),()=>{b=!0}},[d,t]);const p=async v=>{const b=Od();if(!(!b||!n))try{const y=await ut(`${b}/memes/stars`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({memeId:n.PK,rating:v})});if(y.ok){const S=await y.json();r(x=>x?{...x,averageRating:S.averageRating??v}:null)}}catch{}};if(!t||sa(t),t&&!sa(t))return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ie,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Memes"]}),s.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:"Sign in and join Memes group to view."})]});if(a)return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(ie,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Memes"]}),s.jsx("div",{className:"text-sm text-slate-400",children:"Loading"})]});if(o||!n)return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(ie,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Memes"]}),s.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:o||"Meme not found."})]});const f=n.title||n.PK||"Untitled",g=n.mediaUrl||n.thumbnailUrl;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("header",{className:"flex items-center justify-between gap-4",children:[s.jsxs(ie,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Memes"]}),u&&s.jsxs(ie,{to:`/memes/${encodeURIComponent(n.PK)}/edit`,className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(ua,{className:"h-4 w-4"}),"Edit"]})]}),s.jsx("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 overflow-hidden min-h-[200px] flex items-center justify-center p-4",children:g?s.jsxs(s.Fragment,{children:[s.jsx("img",{src:g,alt:f,className:"w-full max-w-2xl mx-auto block object-contain max-h-[70vh]",onError:v=>{v.currentTarget.style.display="none";const b=v.currentTarget.nextElementSibling;b&&b.classList.remove("hidden")}}),s.jsx("div",{className:"hidden py-12 text-slate-500","aria-hidden":!0,children:"Image failed to load"})]}):s.jsx("div",{className:"py-12 text-slate-500",children:"No image"})}),s.jsx(zp,{memeId:n.PK,title:f}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-50",children:f}),n.isPrivate&&s.jsx("span",{className:"inline-flex rounded-full bg-slate-900 px-2 py-0.5 text-xs uppercase text-slate-500",children:"Private"}),n.description&&s.jsx("p",{className:"text-sm text-slate-300",children:n.description}),s.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[s.jsx("span",{className:"text-xs text-slate-500",children:"Tags:"}),n.tags&&n.tags.length>0?n.tags.map(v=>s.jsx("span",{className:"rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-300",children:v},v)):s.jsx("span",{className:"text-xs text-slate-500",children:""})]}),t&&Ip(t)&&s.jsx("div",{className:"pt-2",children:s.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-400",children:[s.jsx("span",{children:"Rate:"}),s.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-2 py-1 text-sm text-slate-50",onChange:v=>{const b=Number(v.target.value);b>=1&&b<=5&&p(b)},defaultValue:"",children:[s.jsx("option",{value:"",children:"--"}),s.jsx("option",{value:"5",children:"5"}),s.jsx("option",{value:"4",children:"4"}),s.jsx("option",{value:"3",children:"3"}),s.jsx("option",{value:"2",children:"2"}),s.jsx("option",{value:"1",children:"1"})]}),typeof n.averageRating=="number"&&s.jsxs("span",{className:"text-amber-300",children:[n.averageRating.toFixed(1),""]})]})})]})]})};function zo(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const jb=()=>{const{id:e}=ir(),t=Vt(),{user:n}=Oe(),[r,a]=i.useState(null),[l,o]=i.useState([]),[c,u]=i.useState(!1),[d,p]=i.useState(!0),[f,g]=i.useState(!1),[v,b]=i.useState(null),[y,S]=i.useState([]),x=e?decodeURIComponent(e):"",h=!!(n&&(nr(n)||Yc(n)));i.useEffect(()=>{const I=zo();if(!I||!x){b(x?"API URL not set.":"Missing meme id."),p(!1);return}let $=!1;async function K(){var F,q;p(!0),b(null);try{const[G,re]=await Promise.all([Q(`${I}/memes?id=${encodeURIComponent(x)}`),Q(`${I}/memes/tags`)]);if(G.status===404||!G.ok){$||a(null);return}const J=await G.json(),V=await re.json();if($)return;a(J.meme??null),o(((F=J.meme)==null?void 0:F.tags)??[]),u(((q=J.meme)==null?void 0:q.isPrivate)??!1),S((V.tags??[]).sort((oe,fe)=>oe.localeCompare(fe)))}catch(G){$||b((G==null?void 0:G.message)??"Failed to load meme.")}finally{$||p(!1)}}return K(),()=>{$=!0}},[x]);const m=i.useRef(null);i.useEffect(()=>{r&&m.current===null&&(m.current=r.isPrivate??!1)},[r]);const k=async()=>{const I=zo();if(!(!I||!r)){g(!0),b(null);try{const $=await Q(`${I}/memes`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r.PK,tags:l,isPrivate:c})});if(!$.ok){const F=await $.json();throw new Error(F.error||"Failed to save")}const K=m.current===(c??!1);try{sessionStorage.setItem("memes_my_cache_invalidate",JSON.stringify({memeId:r.PK,tagOnly:K,tags:l}))}catch{}t(`/memes/${encodeURIComponent(r.PK)}`)}catch($){b(($==null?void 0:$.message)??"Failed to save")}finally{g(!1)}}};if(!n||!h)return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ie,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Memes"]}),s.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:"Sign in and join Memes group to edit."})]});if(d)return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(ie,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Memes"]}),s.jsx("div",{className:"text-sm text-slate-400",children:"Loading"})]});if(v||!r)return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(ie,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Memes"]}),s.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:v||"Meme not found."})]});const C=r.mediaUrl||r.thumbnailUrl,P=r.title||r.PK||"Untitled";return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("header",{className:"flex items-center gap-4",children:[s.jsxs(ie,{to:`/memes/${encodeURIComponent(r.PK)}`,className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Meme"]}),s.jsx("h1",{className:"text-xl font-semibold text-slate-50",children:"Edit meme"})]}),s.jsx("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 overflow-hidden min-h-[200px] flex items-center justify-center p-4",children:C?s.jsxs(s.Fragment,{children:[s.jsx("img",{src:C,alt:P,className:"w-full max-w-2xl mx-auto block object-contain max-h-[70vh]",onError:I=>{I.currentTarget.style.display="none";const $=I.currentTarget.nextElementSibling;$&&$.classList.remove("hidden")}}),s.jsx("div",{className:"hidden py-12 text-slate-500","aria-hidden":!0,children:"Image failed to load"})]}):s.jsx("div",{className:"py-12 text-slate-500",children:"No image"})}),s.jsx(zp,{memeId:r.PK,title:P}),s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-4 max-w-xl",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Tags"}),s.jsx(Bp,{tags:l,onTagsChange:o,allTags:y,fetchTags:async I=>{const $=zo();if(!$)return[];const K=await Q(`${$}/memes/tags?q=${encodeURIComponent(I)}`);return K.ok?(await K.json()).tags??[]:[]},placeholder:"Type to suggest or create tag, Tab to autocomplete"})]}),s.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:[s.jsx("input",{type:"checkbox",checked:c,onChange:I=>u(I.target.checked),className:"rounded border-slate-600"}),"Private (only you can see)"]}),v&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:v}),s.jsx("button",{type:"button",onClick:k,disabled:f,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:f?"Saving":"Save"})]})]})},Ua=[{label:"Websites",to:"/websites",section:"discover",minRole:"guest"},{label:"Media",to:"/media",section:"discover",minRole:"guest"},{label:"Internet Dashboard",to:"/internet-dashboard",section:"discover",minRole:"guest"},{label:"Profile",to:"/profile",section:"discover",minRole:"user",authOnly:!0},{label:"Squash",to:"/squash",section:"squash",minRole:"user"},{label:"Squash Admin",to:"/squash-admin",section:"squash",minRole:"manager"},{label:"Memes",to:"/memes",section:"memes",minRole:"guest"},{label:"Meme Generator",to:"/memes/create",section:"memes",minRole:"user",memesCreate:!0},{label:"Financial",to:"/financial",section:"financial",minRole:"guest"},{label:"Financial Admin",to:"/admin/financial",section:"financial",minRole:"superadmin"},{label:"Highlights",to:"/recommended/highlights",section:"recommended",minRole:"guest"},{label:"Highest Rated",to:"/recommended/highest-rated",section:"recommended",minRole:"guest"},{label:"Recommended",to:"/admin/recommended",section:"admin",minRole:"manager"},{label:"Membership",to:"/admin/membership",section:"admin",minRole:"manager"},{label:"Websites",to:"/admin/websites",section:"admin",minRole:"manager"},{label:"Media",to:"/admin/media",section:"admin",minRole:"manager"},{label:"Branding",to:"/admin/branding",section:"admin",minRole:"superadmin"},{label:"Internet Dashboard",to:"/admin/internet-dashboard",section:"admin",minRole:"superadmin"}],Gp="funkedupshift_sectionOpen";function Da(){return{discover:!0,squash:!1,memes:!1,financial:!1,recommended:!0,admin:!1}}function Nb(){try{const e=sessionStorage.getItem(Gp);if(!e)return Da();const t=JSON.parse(e);return typeof t!="object"||t===null?Da():{...Da(),...t}}catch{return Da()}}function Sb(e){try{sessionStorage.setItem(Gp,JSON.stringify(e))}catch{}}const kb=()=>{const{user:e,isLoading:t,signOut:n}=Oe(),{logo:r}=Mp(),a=Vt(),[l,o]=Ae.useState(!1),[c,u]=Ae.useState(Nb),d=m=>{u(k=>{const C={...k,[m]:!k[m]};return Sb(C),C})},p=()=>{n(),o(!1),a("/")};e==null||e.role;const f=Ua.filter(m=>m.authOnly?e!==null:ct(e??null,m.minRole)),g=f.filter(m=>m.section==="discover"),v=f.filter(m=>m.section==="recommended"),b=Ua.filter(m=>m.section==="squash").filter(m=>m.to==="/squash"?Sl(e):kl(e)),y=Ua.filter(m=>m.section==="memes").filter(m=>ct(e??null,m.minRole)?m.memesCreate?nr(e):!0:!1),S=Ua.filter(m=>m.section==="financial").filter(m=>ct(e??null,m.minRole)).filter(m=>m.to==="/financial"?gv():Cl(e)),x=f.filter(m=>m.section==="admin"),h=({isActive:m})=>["flex items-center rounded-md px-3 py-2 text-sm font-medium",m?"bg-slate-800 text-white":"text-slate-300 hover:bg-slate-800/70 hover:text-white"].join(" ");return s.jsxs("div",{className:"min-h-screen bg-slate-950 text-slate-50 flex flex-col",children:[s.jsx(wv,{}),s.jsx("header",{className:"border-b border-slate-800 bg-slate-950/80 backdrop-blur z-20 sticky top-0",children:s.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-3 flex items-center justify-between gap-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-md p-2 text-slate-200 hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-brand-orange lg:hidden",onClick:()=>o(!0),"aria-label":"Open main navigation",children:s.jsx(Kc,{className:"h-6 w-6"})}),s.jsxs(ie,{to:"/",className:"flex items-center gap-2",children:[r?s.jsx("img",{src:r.url,alt:r.alt,className:"h-8 w-auto rounded-md border border-slate-700 object-contain"}):s.jsx("div",{className:"h-8 w-8 rounded-md border border-slate-700 bg-gradient-to-br from-brand-orange to-brand-navy"}),s.jsx("span",{className:"text-sm font-semibold tracking-[0.2em] uppercase text-slate-100",children:"Funked Up Shift"})]})]}),s.jsx("div",{className:"flex items-center gap-3",children:e?s.jsxs(s.Fragment,{children:[s.jsx(Nv,{}),s.jsxs("span",{className:"hidden sm:inline text-xs text-slate-300",children:[e.email," ",s.jsxs("span",{className:"text-slate-500",children:["(",e.role==="superadmin"?"SuperAdmin":e.role,")"]})]}),s.jsx("button",{type:"button",onClick:p,className:"rounded-full border border-slate-700 px-3 py-1 text-xs font-medium text-slate-200 hover:bg-slate-800",children:"Sign out"})]}):t?s.jsx("span",{className:"text-xs text-slate-400",children:"Loading..."}):s.jsx(ie,{to:"/auth",className:"rounded-full bg-brand-orange px-3 py-1 text-xs font-semibold text-slate-950 hover:bg-orange-500",children:"Sign in"})})]})}),s.jsxs("div",{className:"flex-1 flex",children:[s.jsx("aside",{className:"hidden lg:block w-64 border-r border-slate-800 bg-slate-950/80",children:s.jsxs("nav",{className:"h-full overflow-y-auto px-4 py-6 space-y-6 text-sm",children:[s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("discover"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Discover",c.discover??!0?s.jsx(Zt,{className:"h-4 w-4 shrink-0"}):s.jsx(Xt,{className:"h-4 w-4 shrink-0"})]}),(c.discover??!0)&&s.jsx("div",{className:"space-y-1",children:g.map(m=>s.jsx(Yt,{to:m.to,className:h,children:m.label},m.to))})]}),b.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("squash"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Squash",c.squash??!1?s.jsx(Zt,{className:"h-4 w-4 shrink-0"}):s.jsx(Xt,{className:"h-4 w-4 shrink-0"})]}),(c.squash??!1)&&s.jsx("div",{className:"space-y-1",children:b.map(m=>s.jsx(Yt,{to:m.to,className:h,children:m.label},m.to))})]}),y.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("memes"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Memes",c.memes??!1?s.jsx(Zt,{className:"h-4 w-4 shrink-0"}):s.jsx(Xt,{className:"h-4 w-4 shrink-0"})]}),(c.memes??!1)&&s.jsx("div",{className:"space-y-1",children:y.map(m=>s.jsx(Yt,{to:m.to,className:h,children:m.label},m.to))})]}),v.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("recommended"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Recommended",c.recommended??!0?s.jsx(Zt,{className:"h-4 w-4 shrink-0"}):s.jsx(Xt,{className:"h-4 w-4 shrink-0"})]}),(c.recommended??!0)&&s.jsx("div",{className:"space-y-1",children:v.map(m=>s.jsx(Yt,{to:m.to,className:h,children:m.label},m.to))})]}),S.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("financial"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Financial",c.financial??!1?s.jsx(Zt,{className:"h-4 w-4 shrink-0"}):s.jsx(Xt,{className:"h-4 w-4 shrink-0"})]}),(c.financial??!1)&&s.jsx("div",{className:"space-y-1",children:S.map(m=>s.jsx(Yt,{to:m.to,className:h,children:m.label},m.to))})]}),x.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("admin"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Admin",c.admin??!1?s.jsx(Zt,{className:"h-4 w-4 shrink-0"}):s.jsx(Xt,{className:"h-4 w-4 shrink-0"})]}),(c.admin??!1)&&s.jsx("div",{className:"space-y-1",children:x.map(m=>s.jsx(Yt,{to:m.to,className:h,children:m.label},m.to))})]})]})}),s.jsxs(pn,{open:l,onClose:o,className:"lg:hidden",children:[s.jsx("div",{className:"fixed inset-0 bg-black/40","aria-hidden":"true"}),s.jsxs(pn.Panel,{className:"fixed inset-y-0 left-0 w-72 bg-slate-950 border-r border-slate-800 p-4 flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx(pn.Title,{className:"text-sm font-semibold tracking-[0.15em] uppercase text-slate-100",children:"Funked Up Shift"}),s.jsx("button",{type:"button",className:"rounded-md p-1 text-slate-200 hover:bg-slate-800",onClick:()=>o(!1),"aria-label":"Close main navigation",children:s.jsx(Kl,{className:"h-5 w-5"})})]}),s.jsxs("nav",{className:"flex-1 overflow-y-auto space-y-6 text-sm",children:[s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("discover"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Discover",c.discover??!0?s.jsx(Zt,{className:"h-4 w-4 shrink-0"}):s.jsx(Xt,{className:"h-4 w-4 shrink-0"})]}),(c.discover??!0)&&s.jsx("div",{className:"space-y-1",children:g.map(m=>s.jsx(Yt,{to:m.to,className:h,onClick:()=>o(!1),children:m.label},m.to))})]}),v.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("recommended"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Recommended",c.recommended??!0?s.jsx(Zt,{className:"h-4 w-4 shrink-0"}):s.jsx(Xt,{className:"h-4 w-4 shrink-0"})]}),(c.recommended??!0)&&s.jsx("div",{className:"space-y-1",children:v.map(m=>s.jsx(Yt,{to:m.to,className:h,onClick:()=>o(!1),children:m.label},m.to))})]}),b.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("squash"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Squash",c.squash??!1?s.jsx(Zt,{className:"h-4 w-4 shrink-0"}):s.jsx(Xt,{className:"h-4 w-4 shrink-0"})]}),(c.squash??!1)&&s.jsx("div",{className:"space-y-1",children:b.map(m=>s.jsx(Yt,{to:m.to,className:h,onClick:()=>o(!1),children:m.label},m.to))})]}),S.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("financial"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Financial",c.financial??!1?s.jsx(Zt,{className:"h-4 w-4 shrink-0"}):s.jsx(Xt,{className:"h-4 w-4 shrink-0"})]}),(c.financial??!1)&&s.jsx("div",{className:"space-y-1",children:S.map(m=>s.jsx(Yt,{to:m.to,className:h,onClick:()=>o(!1),children:m.label},m.to))})]}),x.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("admin"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Admin",c.admin??!1?s.jsx(Zt,{className:"h-4 w-4 shrink-0"}):s.jsx(Xt,{className:"h-4 w-4 shrink-0"})]}),(c.admin??!1)&&s.jsx("div",{className:"space-y-1",children:x.map(m=>s.jsx(Yt,{to:m.to,className:h,onClick:()=>o(!1),children:m.label},m.to))})]})]})]})]}),s.jsx("main",{className:"flex-1 min-w-0",children:s.jsx("div",{className:"mx-auto max-w-6xl px-4 py-6",children:s.jsxs(lg,{children:[s.jsx(Me,{path:"/",element:s.jsx(Sv,{})}),s.jsx(Me,{path:"/websites",element:s.jsx(kv,{})}),s.jsx(Me,{path:"/websites/:id",element:s.jsx(Cv,{})}),s.jsx(Me,{path:"/media",element:s.jsx(Ev,{})}),s.jsx(Me,{path:"/media/:id",element:s.jsx(Pv,{})}),s.jsx(Me,{path:"/internet-dashboard",element:s.jsx($v,{})}),s.jsx(Me,{path:"/recommended/highlights",element:s.jsx(Uv,{})}),s.jsx(Me,{path:"/recommended/highest-rated",element:s.jsx(Ov,{})}),s.jsx(Me,{path:"/squash",element:s.jsx(db,{})}),s.jsx(Me,{path:"/squash-admin",element:s.jsx(mb,{})}),s.jsx(Me,{path:"/memes",element:s.jsx(gb,{})}),s.jsx(Me,{path:"/memes/create",element:s.jsx(vb,{})}),s.jsx(Me,{path:"/memes/:id/edit",element:s.jsx(jb,{})}),s.jsx(Me,{path:"/memes/:id",element:s.jsx(wb,{})}),s.jsx(Me,{path:"/financial",element:s.jsx(fb,{})}),s.jsx(Me,{path:"/admin/financial",element:s.jsx(pb,{})}),s.jsx(Me,{path:"/admin/branding",element:s.jsx(Bv,{})}),s.jsx(Me,{path:"/admin/internet-dashboard",element:s.jsx(zv,{})}),s.jsx(Me,{path:"/admin/recommended",element:s.jsx(Gv,{})}),s.jsx(Me,{path:"/admin/membership",element:s.jsx(Hv,{})}),s.jsx(Me,{path:"/admin/users/edit",element:s.jsx(nb,{})}),s.jsx(Me,{path:"/admin/websites",element:s.jsx(qv,{})}),s.jsx(Me,{path:"/admin/sites/edit/:id",element:s.jsx(Zv,{})}),s.jsx(Me,{path:"/admin/media",element:s.jsx(Qv,{})}),s.jsx(Me,{path:"/admin/media/edit/:id",element:s.jsx(Xv,{})}),s.jsx(Me,{path:"/admin/*",element:s.jsx("div",{children:"Admin area"})}),s.jsx(Me,{path:"/profile",element:s.jsx(cb,{})}),s.jsx(Me,{path:"/auth",element:s.jsx(sb,{})}),s.jsx(Me,{path:"*",element:s.jsx("div",{children:"Not found"})})]})})})]}),s.jsx("footer",{className:"border-t border-slate-800 bg-slate-950",children:s.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-4 flex flex-col sm:flex-row items-center justify-between gap-3 text-xs text-slate-500",children:[s.jsxs("nav",{className:"flex flex-wrap gap-3 justify-center sm:justify-start",children:[s.jsx(ie,{to:"/",className:"hover:text-slate-300",children:"Home"}),s.jsx(ie,{to:"/websites",className:"hover:text-slate-300",children:"Websites"}),s.jsx(ie,{to:"/media",className:"hover:text-slate-300",children:"Media"}),s.jsx(ie,{to:"/internet-dashboard",className:"hover:text-slate-300",children:"Internet dashboard"}),s.jsx(ie,{to:"/recommended/highlights",className:"hover:text-slate-300",children:"Highlights"}),s.jsx(ie,{to:"/recommended/highest-rated",className:"hover:text-slate-300",children:"Highest rated"}),e&&s.jsx(ie,{to:"/profile",className:"hover:text-slate-300",children:"Profile"}),ct(e??null,"superadmin")&&s.jsx(ie,{to:"/admin/branding",className:"hover:text-slate-300",children:"Branding"}),Sl(e)&&s.jsx(ie,{to:"/squash",className:"hover:text-slate-300",children:"Squash"}),kl(e)&&s.jsx(ie,{to:"/squash-admin",className:"hover:text-slate-300",children:"Squash Admin"}),(!e||sa(e))&&s.jsx(ie,{to:"/memes",className:"hover:text-slate-300",children:"Memes"}),s.jsx(ie,{to:"/financial",className:"hover:text-slate-300",children:"Financial"}),Cl(e)&&s.jsx(ie,{to:"/admin/financial",className:"hover:text-slate-300",children:"Financial Admin"})]}),s.jsxs("div",{className:"text-slate-600",children:[s.jsx("span",{className:"font-mono text-[11px]",children:"funkedupshift"})," ",s.jsx("span",{className:"text-slate-700",children:""})," ",s.jsx("span",{children:"All data public, admin-managed curation"})]})]})})]})},Fd=document.getElementById("root");Fd&&Go.createRoot(Fd).render(s.jsx(Ae.StrictMode,{children:s.jsx(hg,{children:s.jsx(pv,{children:s.jsx(xv,{children:s.jsx(bv,{children:s.jsx(kb,{})})})})})}));

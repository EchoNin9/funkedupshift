function Bp(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const l=Object.getOwnPropertyDescriptor(r,a);l&&Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function zp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Od={exports:{}},El={},Fd={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ra=Symbol.for("react.element"),Gp=Symbol.for("react.portal"),Wp=Symbol.for("react.fragment"),Hp=Symbol.for("react.strict_mode"),Kp=Symbol.for("react.profiler"),Vp=Symbol.for("react.provider"),qp=Symbol.for("react.context"),Jp=Symbol.for("react.forward_ref"),Qp=Symbol.for("react.suspense"),Yp=Symbol.for("react.memo"),Zp=Symbol.for("react.lazy"),Yc=Symbol.iterator;function Xp(e){return e===null||typeof e!="object"?null:(e=Yc&&e[Yc]||e["@@iterator"],typeof e=="function"?e:null)}var _d={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Bd=Object.assign,zd={};function sr(e,t,n){this.props=e,this.context=t,this.refs=zd,this.updater=n||_d}sr.prototype.isReactComponent={};sr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};sr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Gd(){}Gd.prototype=sr.prototype;function Qi(e,t,n){this.props=e,this.context=t,this.refs=zd,this.updater=n||_d}var Yi=Qi.prototype=new Gd;Yi.constructor=Qi;Bd(Yi,sr.prototype);Yi.isPureReactComponent=!0;var Zc=Array.isArray,Wd=Object.prototype.hasOwnProperty,Zi={current:null},Hd={key:!0,ref:!0,__self:!0,__source:!0};function Kd(e,t,n){var r,a={},l=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(l=""+t.key),t)Wd.call(t,r)&&!Hd.hasOwnProperty(r)&&(a[r]=t[r]);var c=arguments.length-2;if(c===1)a.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];a.children=u}if(e&&e.defaultProps)for(r in c=e.defaultProps,c)a[r]===void 0&&(a[r]=c[r]);return{$$typeof:ra,type:e,key:l,ref:o,props:a,_owner:Zi.current}}function eh(e,t){return{$$typeof:ra,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Xi(e){return typeof e=="object"&&e!==null&&e.$$typeof===ra}function th(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Xc=/\/+/g;function Zl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?th(""+e.key):t.toString(36)}function Ma(e,t,n,r,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case ra:case Gp:o=!0}}if(o)return o=e,a=a(o),e=r===""?"."+Zl(o,0):r,Zc(a)?(n="",e!=null&&(n=e.replace(Xc,"$&/")+"/"),Ma(a,t,n,"",function(d){return d})):a!=null&&(Xi(a)&&(a=eh(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(Xc,"$&/")+"/")+e)),t.push(a)),1;if(o=0,r=r===""?".":r+":",Zc(e))for(var c=0;c<e.length;c++){l=e[c];var u=r+Zl(l,c);o+=Ma(l,t,n,u,a)}else if(u=Xp(e),typeof u=="function")for(e=u.call(e),c=0;!(l=e.next()).done;)l=l.value,u=r+Zl(l,c++),o+=Ma(l,t,n,u,a);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function fa(e,t,n){if(e==null)return e;var r=[],a=0;return Ma(e,r,"","",function(l){return t.call(n,l,a++)}),r}function nh(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var kt={current:null},Oa={transition:null},sh={ReactCurrentDispatcher:kt,ReactCurrentBatchConfig:Oa,ReactCurrentOwner:Zi};function Vd(){throw Error("act(...) is not supported in production builds of React.")}Ce.Children={map:fa,forEach:function(e,t,n){fa(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return fa(e,function(){t++}),t},toArray:function(e){return fa(e,function(t){return t})||[]},only:function(e){if(!Xi(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ce.Component=sr;Ce.Fragment=Wp;Ce.Profiler=Kp;Ce.PureComponent=Qi;Ce.StrictMode=Hp;Ce.Suspense=Qp;Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sh;Ce.act=Vd;Ce.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Bd({},e.props),a=e.key,l=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,o=Zi.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)Wd.call(t,u)&&!Hd.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&c!==void 0?c[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:ra,type:e.type,key:a,ref:l,props:r,_owner:o}};Ce.createContext=function(e){return e={$$typeof:qp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Vp,_context:e},e.Consumer=e};Ce.createElement=Kd;Ce.createFactory=function(e){var t=Kd.bind(null,e);return t.type=e,t};Ce.createRef=function(){return{current:null}};Ce.forwardRef=function(e){return{$$typeof:Jp,render:e}};Ce.isValidElement=Xi;Ce.lazy=function(e){return{$$typeof:Zp,_payload:{_status:-1,_result:e},_init:nh}};Ce.memo=function(e,t){return{$$typeof:Yp,type:e,compare:t===void 0?null:t}};Ce.startTransition=function(e){var t=Oa.transition;Oa.transition={};try{e()}finally{Oa.transition=t}};Ce.unstable_act=Vd;Ce.useCallback=function(e,t){return kt.current.useCallback(e,t)};Ce.useContext=function(e){return kt.current.useContext(e)};Ce.useDebugValue=function(){};Ce.useDeferredValue=function(e){return kt.current.useDeferredValue(e)};Ce.useEffect=function(e,t){return kt.current.useEffect(e,t)};Ce.useId=function(){return kt.current.useId()};Ce.useImperativeHandle=function(e,t,n){return kt.current.useImperativeHandle(e,t,n)};Ce.useInsertionEffect=function(e,t){return kt.current.useInsertionEffect(e,t)};Ce.useLayoutEffect=function(e,t){return kt.current.useLayoutEffect(e,t)};Ce.useMemo=function(e,t){return kt.current.useMemo(e,t)};Ce.useReducer=function(e,t,n){return kt.current.useReducer(e,t,n)};Ce.useRef=function(e){return kt.current.useRef(e)};Ce.useState=function(e){return kt.current.useState(e)};Ce.useSyncExternalStore=function(e,t,n){return kt.current.useSyncExternalStore(e,t,n)};Ce.useTransition=function(){return kt.current.useTransition()};Ce.version="18.3.1";Fd.exports=Ce;var i=Fd.exports;const Ae=zp(i),Vs=Bp({__proto__:null,default:Ae},[i]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rh=i,ah=Symbol.for("react.element"),lh=Symbol.for("react.fragment"),oh=Object.prototype.hasOwnProperty,ih=rh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ch={key:!0,ref:!0,__self:!0,__source:!0};function qd(e,t,n){var r,a={},l=null,o=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)oh.call(t,r)&&!ch.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:ah,type:e,key:l,ref:o,props:a,_owner:ih.current}}El.Fragment=lh;El.jsx=qd;El.jsxs=qd;Od.exports=El;var s=Od.exports,zo={},Jd={exports:{}},Ot={},Qd={exports:{}},Yd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(j,P){var $=j.length;j.push(P);e:for(;0<$;){var F=$-1>>>1,S=j[F];if(0<a(S,P))j[F]=P,j[$]=S,$=F;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var P=j[0],$=j.pop();if($!==P){j[0]=$;e:for(var F=0,S=j.length,H=S>>>1;F<H;){var U=2*(F+1)-1,G=j[U],_=U+1,B=j[_];if(0>a(G,$))_<S&&0>a(B,G)?(j[F]=B,j[_]=$,F=_):(j[F]=G,j[U]=$,F=U);else if(_<S&&0>a(B,$))j[F]=B,j[_]=$,F=_;else break e}}return P}function a(j,P){var $=j.sortIndex-P.sortIndex;return $!==0?$:j.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var o=Date,c=o.now();e.unstable_now=function(){return o.now()-c}}var u=[],d=[],h=1,f=null,g=3,v=!1,b=!1,y=!1,N=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(j){for(var P=n(d);P!==null;){if(P.callback===null)r(d);else if(P.startTime<=j)r(d),P.sortIndex=P.expirationTime,t(u,P);else break;P=n(d)}}function E(j){if(y=!1,m(j),!b)if(n(u)!==null)b=!0,ie(k);else{var P=n(d);P!==null&&fe(E,P.startTime-j)}}function k(j,P){b=!1,y&&(y=!1,x(A),A=-1),v=!0;var $=g;try{for(m(P),f=n(u);f!==null&&(!(f.expirationTime>P)||j&&!q());){var F=f.callback;if(typeof F=="function"){f.callback=null,g=f.priorityLevel;var S=F(f.expirationTime<=P);P=e.unstable_now(),typeof S=="function"?f.callback=S:f===n(u)&&r(u),m(P)}else r(u);f=n(u)}if(f!==null)var H=!0;else{var U=n(d);U!==null&&fe(E,U.startTime-P),H=!1}return H}finally{f=null,g=$,v=!1}}var C=!1,I=null,A=-1,Z=5,M=-1;function q(){return!(e.unstable_now()-M<Z)}function V(){if(I!==null){var j=e.unstable_now();M=j;var P=!0;try{P=I(!0,j)}finally{P?se():(C=!1,I=null)}}else C=!1}var se;if(typeof p=="function")se=function(){p(V)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,K=Y.port2;Y.port1.onmessage=V,se=function(){K.postMessage(null)}}else se=function(){N(V,0)};function ie(j){I=j,C||(C=!0,se())}function fe(j,P){A=N(function(){j(e.unstable_now())},P)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_continueExecution=function(){b||v||(b=!0,ie(k))},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(j){switch(g){case 1:case 2:case 3:var P=3;break;default:P=g}var $=g;g=P;try{return j()}finally{g=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(j,P){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var $=g;g=j;try{return P()}finally{g=$}},e.unstable_scheduleCallback=function(j,P,$){var F=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?F+$:F):$=F,j){case 1:var S=-1;break;case 2:S=250;break;case 5:S=1073741823;break;case 4:S=1e4;break;default:S=5e3}return S=$+S,j={id:h++,callback:P,priorityLevel:j,startTime:$,expirationTime:S,sortIndex:-1},$>F?(j.sortIndex=$,t(d,j),n(u)===null&&j===n(d)&&(y?(x(A),A=-1):y=!0,fe(E,$-F))):(j.sortIndex=S,t(u,j),b||v||(b=!0,ie(k))),j},e.unstable_shouldYield=q,e.unstable_wrapCallback=function(j){var P=g;return function(){var $=g;g=P;try{return j.apply(this,arguments)}finally{g=$}}}})(Yd);Qd.exports=Yd;var uh=Qd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dh=i,Mt=uh;function te(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Zd=new Set,Or={};function Ss(e,t){qs(e,t),qs(e+"Capture",t)}function qs(e,t){for(Or[e]=t,e=0;e<t.length;e++)Zd.add(t[e])}var En=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Go=Object.prototype.hasOwnProperty,mh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,eu={},tu={};function fh(e){return Go.call(tu,e)?!0:Go.call(eu,e)?!1:mh.test(e)?tu[e]=!0:(eu[e]=!0,!1)}function ph(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function hh(e,t,n,r){if(t===null||typeof t>"u"||ph(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ct(e,t,n,r,a,l,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=o}var xt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){xt[e]=new Ct(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];xt[t]=new Ct(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){xt[e]=new Ct(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){xt[e]=new Ct(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){xt[e]=new Ct(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){xt[e]=new Ct(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){xt[e]=new Ct(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){xt[e]=new Ct(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){xt[e]=new Ct(e,5,!1,e.toLowerCase(),null,!1,!1)});var ec=/[\-:]([a-z])/g;function tc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ec,tc);xt[t]=new Ct(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ec,tc);xt[t]=new Ct(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ec,tc);xt[t]=new Ct(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){xt[e]=new Ct(e,1,!1,e.toLowerCase(),null,!1,!1)});xt.xlinkHref=new Ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){xt[e]=new Ct(e,1,!1,e.toLowerCase(),null,!0,!0)});function nc(e,t,n,r){var a=xt.hasOwnProperty(t)?xt[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(hh(t,n,a,r)&&(n=null),r||a===null?fh(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var An=dh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pa=Symbol.for("react.element"),Ts=Symbol.for("react.portal"),Rs=Symbol.for("react.fragment"),sc=Symbol.for("react.strict_mode"),Wo=Symbol.for("react.profiler"),Xd=Symbol.for("react.provider"),em=Symbol.for("react.context"),rc=Symbol.for("react.forward_ref"),Ho=Symbol.for("react.suspense"),Ko=Symbol.for("react.suspense_list"),ac=Symbol.for("react.memo"),Un=Symbol.for("react.lazy"),tm=Symbol.for("react.offscreen"),nu=Symbol.iterator;function dr(e){return e===null||typeof e!="object"?null:(e=nu&&e[nu]||e["@@iterator"],typeof e=="function"?e:null)}var Ze=Object.assign,Xl;function Nr(e){if(Xl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Xl=t&&t[1]||""}return`
`+Xl+e}var eo=!1;function to(e,t){if(!e||eo)return"";eo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),l=r.stack.split(`
`),o=a.length-1,c=l.length-1;1<=o&&0<=c&&a[o]!==l[c];)c--;for(;1<=o&&0<=c;o--,c--)if(a[o]!==l[c]){if(o!==1||c!==1)do if(o--,c--,0>c||a[o]!==l[c]){var u=`
`+a[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=c);break}}}finally{eo=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Nr(e):""}function xh(e){switch(e.tag){case 5:return Nr(e.type);case 16:return Nr("Lazy");case 13:return Nr("Suspense");case 19:return Nr("SuspenseList");case 0:case 2:case 15:return e=to(e.type,!1),e;case 11:return e=to(e.type.render,!1),e;case 1:return e=to(e.type,!0),e;default:return""}}function Vo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Rs:return"Fragment";case Ts:return"Portal";case Wo:return"Profiler";case sc:return"StrictMode";case Ho:return"Suspense";case Ko:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case em:return(e.displayName||"Context")+".Consumer";case Xd:return(e._context.displayName||"Context")+".Provider";case rc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ac:return t=e.displayName||null,t!==null?t:Vo(e.type)||"Memo";case Un:t=e._payload,e=e._init;try{return Vo(e(t))}catch{}}return null}function gh(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Vo(t);case 8:return t===sc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Zn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function nm(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function yh(e){var t=nm(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,l.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ha(e){e._valueTracker||(e._valueTracker=yh(e))}function sm(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=nm(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Qa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function qo(e,t){var n=t.checked;return Ze({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function su(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Zn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function rm(e,t){t=t.checked,t!=null&&nc(e,"checked",t,!1)}function Jo(e,t){rm(e,t);var n=Zn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Qo(e,t.type,n):t.hasOwnProperty("defaultValue")&&Qo(e,t.type,Zn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ru(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Qo(e,t,n){(t!=="number"||Qa(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Sr=Array.isArray;function Bs(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Zn(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Yo(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(te(91));return Ze({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function au(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(te(92));if(Sr(n)){if(1<n.length)throw Error(te(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Zn(n)}}function am(e,t){var n=Zn(t.value),r=Zn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function lu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function lm(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zo(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?lm(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var xa,om=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(xa=xa||document.createElement("div"),xa.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=xa.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Fr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Tr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vh=["Webkit","ms","Moz","O"];Object.keys(Tr).forEach(function(e){vh.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Tr[t]=Tr[e]})});function im(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Tr.hasOwnProperty(e)&&Tr[e]?(""+t).trim():t+"px"}function cm(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=im(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var bh=Ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xo(e,t){if(t){if(bh[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(te(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(te(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(te(61))}if(t.style!=null&&typeof t.style!="object")throw Error(te(62))}}function ei(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ti=null;function lc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ni=null,zs=null,Gs=null;function ou(e){if(e=oa(e)){if(typeof ni!="function")throw Error(te(280));var t=e.stateNode;t&&(t=Al(t),ni(e.stateNode,e.type,t))}}function um(e){zs?Gs?Gs.push(e):Gs=[e]:zs=e}function dm(){if(zs){var e=zs,t=Gs;if(Gs=zs=null,ou(e),t)for(e=0;e<t.length;e++)ou(t[e])}}function mm(e,t){return e(t)}function fm(){}var no=!1;function pm(e,t,n){if(no)return e(t,n);no=!0;try{return mm(e,t,n)}finally{no=!1,(zs!==null||Gs!==null)&&(fm(),dm())}}function _r(e,t){var n=e.stateNode;if(n===null)return null;var r=Al(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(te(231,t,typeof n));return n}var si=!1;if(En)try{var mr={};Object.defineProperty(mr,"passive",{get:function(){si=!0}}),window.addEventListener("test",mr,mr),window.removeEventListener("test",mr,mr)}catch{si=!1}function wh(e,t,n,r,a,l,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(h){this.onError(h)}}var Rr=!1,Ya=null,Za=!1,ri=null,jh={onError:function(e){Rr=!0,Ya=e}};function Nh(e,t,n,r,a,l,o,c,u){Rr=!1,Ya=null,wh.apply(jh,arguments)}function Sh(e,t,n,r,a,l,o,c,u){if(Nh.apply(this,arguments),Rr){if(Rr){var d=Ya;Rr=!1,Ya=null}else throw Error(te(198));Za||(Za=!0,ri=d)}}function ks(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function hm(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function iu(e){if(ks(e)!==e)throw Error(te(188))}function kh(e){var t=e.alternate;if(!t){if(t=ks(e),t===null)throw Error(te(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var l=a.alternate;if(l===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===n)return iu(a),e;if(l===r)return iu(a),t;l=l.sibling}throw Error(te(188))}if(n.return!==r.return)n=a,r=l;else{for(var o=!1,c=a.child;c;){if(c===n){o=!0,n=a,r=l;break}if(c===r){o=!0,r=a,n=l;break}c=c.sibling}if(!o){for(c=l.child;c;){if(c===n){o=!0,n=l,r=a;break}if(c===r){o=!0,r=l,n=a;break}c=c.sibling}if(!o)throw Error(te(189))}}if(n.alternate!==r)throw Error(te(190))}if(n.tag!==3)throw Error(te(188));return n.stateNode.current===n?e:t}function xm(e){return e=kh(e),e!==null?gm(e):null}function gm(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=gm(e);if(t!==null)return t;e=e.sibling}return null}var ym=Mt.unstable_scheduleCallback,cu=Mt.unstable_cancelCallback,Ch=Mt.unstable_shouldYield,Eh=Mt.unstable_requestPaint,st=Mt.unstable_now,Ph=Mt.unstable_getCurrentPriorityLevel,oc=Mt.unstable_ImmediatePriority,vm=Mt.unstable_UserBlockingPriority,Xa=Mt.unstable_NormalPriority,Th=Mt.unstable_LowPriority,bm=Mt.unstable_IdlePriority,Pl=null,mn=null;function Rh(e){if(mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(Pl,e,void 0,(e.current.flags&128)===128)}catch{}}var sn=Math.clz32?Math.clz32:$h,Lh=Math.log,Ah=Math.LN2;function $h(e){return e>>>=0,e===0?32:31-(Lh(e)/Ah|0)|0}var ga=64,ya=4194304;function kr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function el(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,l=e.pingedLanes,o=n&268435455;if(o!==0){var c=o&~a;c!==0?r=kr(c):(l&=o,l!==0&&(r=kr(l)))}else o=n&~a,o!==0?r=kr(o):l!==0&&(r=kr(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,l=t&-t,a>=l||a===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-sn(t),a=1<<n,r|=e[n],t&=~a;return r}function Ih(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Uh(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var o=31-sn(l),c=1<<o,u=a[o];u===-1?(!(c&n)||c&r)&&(a[o]=Ih(c,t)):u<=t&&(e.expiredLanes|=c),l&=~c}}function ai(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function wm(){var e=ga;return ga<<=1,!(ga&4194240)&&(ga=64),e}function so(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function aa(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-sn(t),e[t]=n}function Dh(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-sn(n),l=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~l}}function ic(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-sn(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var ze=0;function jm(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Nm,cc,Sm,km,Cm,li=!1,va=[],Gn=null,Wn=null,Hn=null,Br=new Map,zr=new Map,Mn=[],Mh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uu(e,t){switch(e){case"focusin":case"focusout":Gn=null;break;case"dragenter":case"dragleave":Wn=null;break;case"mouseover":case"mouseout":Hn=null;break;case"pointerover":case"pointerout":Br.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":zr.delete(t.pointerId)}}function fr(e,t,n,r,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[a]},t!==null&&(t=oa(t),t!==null&&cc(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Oh(e,t,n,r,a){switch(t){case"focusin":return Gn=fr(Gn,e,t,n,r,a),!0;case"dragenter":return Wn=fr(Wn,e,t,n,r,a),!0;case"mouseover":return Hn=fr(Hn,e,t,n,r,a),!0;case"pointerover":var l=a.pointerId;return Br.set(l,fr(Br.get(l)||null,e,t,n,r,a)),!0;case"gotpointercapture":return l=a.pointerId,zr.set(l,fr(zr.get(l)||null,e,t,n,r,a)),!0}return!1}function Em(e){var t=ds(e.target);if(t!==null){var n=ks(t);if(n!==null){if(t=n.tag,t===13){if(t=hm(n),t!==null){e.blockedOn=t,Cm(e.priority,function(){Sm(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Fa(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=oi(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ti=r,n.target.dispatchEvent(r),ti=null}else return t=oa(n),t!==null&&cc(t),e.blockedOn=n,!1;t.shift()}return!0}function du(e,t,n){Fa(e)&&n.delete(t)}function Fh(){li=!1,Gn!==null&&Fa(Gn)&&(Gn=null),Wn!==null&&Fa(Wn)&&(Wn=null),Hn!==null&&Fa(Hn)&&(Hn=null),Br.forEach(du),zr.forEach(du)}function pr(e,t){e.blockedOn===t&&(e.blockedOn=null,li||(li=!0,Mt.unstable_scheduleCallback(Mt.unstable_NormalPriority,Fh)))}function Gr(e){function t(a){return pr(a,e)}if(0<va.length){pr(va[0],e);for(var n=1;n<va.length;n++){var r=va[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Gn!==null&&pr(Gn,e),Wn!==null&&pr(Wn,e),Hn!==null&&pr(Hn,e),Br.forEach(t),zr.forEach(t),n=0;n<Mn.length;n++)r=Mn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Mn.length&&(n=Mn[0],n.blockedOn===null);)Em(n),n.blockedOn===null&&Mn.shift()}var Ws=An.ReactCurrentBatchConfig,tl=!0;function _h(e,t,n,r){var a=ze,l=Ws.transition;Ws.transition=null;try{ze=1,uc(e,t,n,r)}finally{ze=a,Ws.transition=l}}function Bh(e,t,n,r){var a=ze,l=Ws.transition;Ws.transition=null;try{ze=4,uc(e,t,n,r)}finally{ze=a,Ws.transition=l}}function uc(e,t,n,r){if(tl){var a=oi(e,t,n,r);if(a===null)po(e,t,r,nl,n),uu(e,r);else if(Oh(a,e,t,n,r))r.stopPropagation();else if(uu(e,r),t&4&&-1<Mh.indexOf(e)){for(;a!==null;){var l=oa(a);if(l!==null&&Nm(l),l=oi(e,t,n,r),l===null&&po(e,t,r,nl,n),l===a)break;a=l}a!==null&&r.stopPropagation()}else po(e,t,r,null,n)}}var nl=null;function oi(e,t,n,r){if(nl=null,e=lc(r),e=ds(e),e!==null)if(t=ks(e),t===null)e=null;else if(n=t.tag,n===13){if(e=hm(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return nl=e,null}function Pm(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ph()){case oc:return 1;case vm:return 4;case Xa:case Th:return 16;case bm:return 536870912;default:return 16}default:return 16}}var _n=null,dc=null,_a=null;function Tm(){if(_a)return _a;var e,t=dc,n=t.length,r,a="value"in _n?_n.value:_n.textContent,l=a.length;for(e=0;e<n&&t[e]===a[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===a[l-r];r++);return _a=a.slice(e,1<r?1-r:void 0)}function Ba(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ba(){return!0}function mu(){return!1}function Ft(e){function t(n,r,a,l,o){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(n=e[c],this[c]=n?n(l):l[c]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?ba:mu,this.isPropagationStopped=mu,this}return Ze(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ba)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ba)},persist:function(){},isPersistent:ba}),t}var rr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mc=Ft(rr),la=Ze({},rr,{view:0,detail:0}),zh=Ft(la),ro,ao,hr,Tl=Ze({},la,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hr&&(hr&&e.type==="mousemove"?(ro=e.screenX-hr.screenX,ao=e.screenY-hr.screenY):ao=ro=0,hr=e),ro)},movementY:function(e){return"movementY"in e?e.movementY:ao}}),fu=Ft(Tl),Gh=Ze({},Tl,{dataTransfer:0}),Wh=Ft(Gh),Hh=Ze({},la,{relatedTarget:0}),lo=Ft(Hh),Kh=Ze({},rr,{animationName:0,elapsedTime:0,pseudoElement:0}),Vh=Ft(Kh),qh=Ze({},rr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jh=Ft(qh),Qh=Ze({},rr,{data:0}),pu=Ft(Qh),Yh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function e0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Xh[e])?!!t[e]:!1}function fc(){return e0}var t0=Ze({},la,{key:function(e){if(e.key){var t=Yh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ba(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Zh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fc,charCode:function(e){return e.type==="keypress"?Ba(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ba(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),n0=Ft(t0),s0=Ze({},Tl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hu=Ft(s0),r0=Ze({},la,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fc}),a0=Ft(r0),l0=Ze({},rr,{propertyName:0,elapsedTime:0,pseudoElement:0}),o0=Ft(l0),i0=Ze({},Tl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),c0=Ft(i0),u0=[9,13,27,32],pc=En&&"CompositionEvent"in window,Lr=null;En&&"documentMode"in document&&(Lr=document.documentMode);var d0=En&&"TextEvent"in window&&!Lr,Rm=En&&(!pc||Lr&&8<Lr&&11>=Lr),xu=" ",gu=!1;function Lm(e,t){switch(e){case"keyup":return u0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Am(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ls=!1;function m0(e,t){switch(e){case"compositionend":return Am(t);case"keypress":return t.which!==32?null:(gu=!0,xu);case"textInput":return e=t.data,e===xu&&gu?null:e;default:return null}}function f0(e,t){if(Ls)return e==="compositionend"||!pc&&Lm(e,t)?(e=Tm(),_a=dc=_n=null,Ls=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Rm&&t.locale!=="ko"?null:t.data;default:return null}}var p0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!p0[e.type]:t==="textarea"}function $m(e,t,n,r){um(r),t=sl(t,"onChange"),0<t.length&&(n=new mc("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ar=null,Wr=null;function h0(e){Wm(e,0)}function Rl(e){var t=Is(e);if(sm(t))return e}function x0(e,t){if(e==="change")return t}var Im=!1;if(En){var oo;if(En){var io="oninput"in document;if(!io){var vu=document.createElement("div");vu.setAttribute("oninput","return;"),io=typeof vu.oninput=="function"}oo=io}else oo=!1;Im=oo&&(!document.documentMode||9<document.documentMode)}function bu(){Ar&&(Ar.detachEvent("onpropertychange",Um),Wr=Ar=null)}function Um(e){if(e.propertyName==="value"&&Rl(Wr)){var t=[];$m(t,Wr,e,lc(e)),pm(h0,t)}}function g0(e,t,n){e==="focusin"?(bu(),Ar=t,Wr=n,Ar.attachEvent("onpropertychange",Um)):e==="focusout"&&bu()}function y0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Rl(Wr)}function v0(e,t){if(e==="click")return Rl(t)}function b0(e,t){if(e==="input"||e==="change")return Rl(t)}function w0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var an=typeof Object.is=="function"?Object.is:w0;function Hr(e,t){if(an(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Go.call(t,a)||!an(e[a],t[a]))return!1}return!0}function wu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ju(e,t){var n=wu(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=wu(n)}}function Dm(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Dm(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Mm(){for(var e=window,t=Qa();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Qa(e.document)}return t}function hc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function j0(e){var t=Mm(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Dm(n.ownerDocument.documentElement,n)){if(r!==null&&hc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,l=Math.min(r.start,a);r=r.end===void 0?l:Math.min(r.end,a),!e.extend&&l>r&&(a=r,r=l,l=a),a=ju(n,l);var o=ju(n,r);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var N0=En&&"documentMode"in document&&11>=document.documentMode,As=null,ii=null,$r=null,ci=!1;function Nu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ci||As==null||As!==Qa(r)||(r=As,"selectionStart"in r&&hc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),$r&&Hr($r,r)||($r=r,r=sl(ii,"onSelect"),0<r.length&&(t=new mc("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=As)))}function wa(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var $s={animationend:wa("Animation","AnimationEnd"),animationiteration:wa("Animation","AnimationIteration"),animationstart:wa("Animation","AnimationStart"),transitionend:wa("Transition","TransitionEnd")},co={},Om={};En&&(Om=document.createElement("div").style,"AnimationEvent"in window||(delete $s.animationend.animation,delete $s.animationiteration.animation,delete $s.animationstart.animation),"TransitionEvent"in window||delete $s.transitionend.transition);function Ll(e){if(co[e])return co[e];if(!$s[e])return e;var t=$s[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Om)return co[e]=t[n];return e}var Fm=Ll("animationend"),_m=Ll("animationiteration"),Bm=Ll("animationstart"),zm=Ll("transitionend"),Gm=new Map,Su="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ts(e,t){Gm.set(e,t),Ss(t,[e])}for(var uo=0;uo<Su.length;uo++){var mo=Su[uo],S0=mo.toLowerCase(),k0=mo[0].toUpperCase()+mo.slice(1);ts(S0,"on"+k0)}ts(Fm,"onAnimationEnd");ts(_m,"onAnimationIteration");ts(Bm,"onAnimationStart");ts("dblclick","onDoubleClick");ts("focusin","onFocus");ts("focusout","onBlur");ts(zm,"onTransitionEnd");qs("onMouseEnter",["mouseout","mouseover"]);qs("onMouseLeave",["mouseout","mouseover"]);qs("onPointerEnter",["pointerout","pointerover"]);qs("onPointerLeave",["pointerout","pointerover"]);Ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ss("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),C0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cr));function ku(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Sh(r,t,void 0,e),e.currentTarget=null}function Wm(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==l&&a.isPropagationStopped())break e;ku(a,c,d),l=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==l&&a.isPropagationStopped())break e;ku(a,c,d),l=u}}}if(Za)throw e=ri,Za=!1,ri=null,e}function Ve(e,t){var n=t[pi];n===void 0&&(n=t[pi]=new Set);var r=e+"__bubble";n.has(r)||(Hm(t,e,2,!1),n.add(r))}function fo(e,t,n){var r=0;t&&(r|=4),Hm(n,e,r,t)}var ja="_reactListening"+Math.random().toString(36).slice(2);function Kr(e){if(!e[ja]){e[ja]=!0,Zd.forEach(function(n){n!=="selectionchange"&&(C0.has(n)||fo(n,!1,e),fo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ja]||(t[ja]=!0,fo("selectionchange",!1,t))}}function Hm(e,t,n,r){switch(Pm(t)){case 1:var a=_h;break;case 4:a=Bh;break;default:a=uc}n=a.bind(null,t,n,e),a=void 0,!si||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function po(e,t,n,r,a){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===a||c.nodeType===8&&c.parentNode===a)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===a||u.nodeType===8&&u.parentNode===a))return;o=o.return}for(;c!==null;){if(o=ds(c),o===null)return;if(u=o.tag,u===5||u===6){r=l=o;continue e}c=c.parentNode}}r=r.return}pm(function(){var d=l,h=lc(n),f=[];e:{var g=Gm.get(e);if(g!==void 0){var v=mc,b=e;switch(e){case"keypress":if(Ba(n)===0)break e;case"keydown":case"keyup":v=n0;break;case"focusin":b="focus",v=lo;break;case"focusout":b="blur",v=lo;break;case"beforeblur":case"afterblur":v=lo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=fu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=Wh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=a0;break;case Fm:case _m:case Bm:v=Vh;break;case zm:v=o0;break;case"scroll":v=zh;break;case"wheel":v=c0;break;case"copy":case"cut":case"paste":v=Jh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=hu}var y=(t&4)!==0,N=!y&&e==="scroll",x=y?g!==null?g+"Capture":null:g;y=[];for(var p=d,m;p!==null;){m=p;var E=m.stateNode;if(m.tag===5&&E!==null&&(m=E,x!==null&&(E=_r(p,x),E!=null&&y.push(Vr(p,E,m)))),N)break;p=p.return}0<y.length&&(g=new v(g,b,null,n,h),f.push({event:g,listeners:y}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",g&&n!==ti&&(b=n.relatedTarget||n.fromElement)&&(ds(b)||b[Pn]))break e;if((v||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,v?(b=n.relatedTarget||n.toElement,v=d,b=b?ds(b):null,b!==null&&(N=ks(b),b!==N||b.tag!==5&&b.tag!==6)&&(b=null)):(v=null,b=d),v!==b)){if(y=fu,E="onMouseLeave",x="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(y=hu,E="onPointerLeave",x="onPointerEnter",p="pointer"),N=v==null?g:Is(v),m=b==null?g:Is(b),g=new y(E,p+"leave",v,n,h),g.target=N,g.relatedTarget=m,E=null,ds(h)===d&&(y=new y(x,p+"enter",b,n,h),y.target=m,y.relatedTarget=N,E=y),N=E,v&&b)t:{for(y=v,x=b,p=0,m=y;m;m=Cs(m))p++;for(m=0,E=x;E;E=Cs(E))m++;for(;0<p-m;)y=Cs(y),p--;for(;0<m-p;)x=Cs(x),m--;for(;p--;){if(y===x||x!==null&&y===x.alternate)break t;y=Cs(y),x=Cs(x)}y=null}else y=null;v!==null&&Cu(f,g,v,y,!1),b!==null&&N!==null&&Cu(f,N,b,y,!0)}}e:{if(g=d?Is(d):window,v=g.nodeName&&g.nodeName.toLowerCase(),v==="select"||v==="input"&&g.type==="file")var k=x0;else if(yu(g))if(Im)k=b0;else{k=y0;var C=g0}else(v=g.nodeName)&&v.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(k=v0);if(k&&(k=k(e,d))){$m(f,k,n,h);break e}C&&C(e,g,d),e==="focusout"&&(C=g._wrapperState)&&C.controlled&&g.type==="number"&&Qo(g,"number",g.value)}switch(C=d?Is(d):window,e){case"focusin":(yu(C)||C.contentEditable==="true")&&(As=C,ii=d,$r=null);break;case"focusout":$r=ii=As=null;break;case"mousedown":ci=!0;break;case"contextmenu":case"mouseup":case"dragend":ci=!1,Nu(f,n,h);break;case"selectionchange":if(N0)break;case"keydown":case"keyup":Nu(f,n,h)}var I;if(pc)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Ls?Lm(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(Rm&&n.locale!=="ko"&&(Ls||A!=="onCompositionStart"?A==="onCompositionEnd"&&Ls&&(I=Tm()):(_n=h,dc="value"in _n?_n.value:_n.textContent,Ls=!0)),C=sl(d,A),0<C.length&&(A=new pu(A,e,null,n,h),f.push({event:A,listeners:C}),I?A.data=I:(I=Am(n),I!==null&&(A.data=I)))),(I=d0?m0(e,n):f0(e,n))&&(d=sl(d,"onBeforeInput"),0<d.length&&(h=new pu("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:d}),h.data=I))}Wm(f,t)})}function Vr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function sl(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=_r(e,n),l!=null&&r.unshift(Vr(e,l,a)),l=_r(e,t),l!=null&&r.push(Vr(e,l,a))),e=e.return}return r}function Cs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Cu(e,t,n,r,a){for(var l=t._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,a?(u=_r(n,l),u!=null&&o.unshift(Vr(n,u,c))):a||(u=_r(n,l),u!=null&&o.push(Vr(n,u,c)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var E0=/\r\n?/g,P0=/\u0000|\uFFFD/g;function Eu(e){return(typeof e=="string"?e:""+e).replace(E0,`
`).replace(P0,"")}function Na(e,t,n){if(t=Eu(t),Eu(e)!==t&&n)throw Error(te(425))}function rl(){}var ui=null,di=null;function mi(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var fi=typeof setTimeout=="function"?setTimeout:void 0,T0=typeof clearTimeout=="function"?clearTimeout:void 0,Pu=typeof Promise=="function"?Promise:void 0,R0=typeof queueMicrotask=="function"?queueMicrotask:typeof Pu<"u"?function(e){return Pu.resolve(null).then(e).catch(L0)}:fi;function L0(e){setTimeout(function(){throw e})}function ho(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),Gr(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);Gr(t)}function Kn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Tu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ar=Math.random().toString(36).slice(2),dn="__reactFiber$"+ar,qr="__reactProps$"+ar,Pn="__reactContainer$"+ar,pi="__reactEvents$"+ar,A0="__reactListeners$"+ar,$0="__reactHandles$"+ar;function ds(e){var t=e[dn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Pn]||n[dn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Tu(e);e!==null;){if(n=e[dn])return n;e=Tu(e)}return t}e=n,n=e.parentNode}return null}function oa(e){return e=e[dn]||e[Pn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Is(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(te(33))}function Al(e){return e[qr]||null}var hi=[],Us=-1;function ns(e){return{current:e}}function qe(e){0>Us||(e.current=hi[Us],hi[Us]=null,Us--)}function He(e,t){Us++,hi[Us]=e.current,e.current=t}var Xn={},jt=ns(Xn),Rt=ns(!1),vs=Xn;function Js(e,t){var n=e.type.contextTypes;if(!n)return Xn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in n)a[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Lt(e){return e=e.childContextTypes,e!=null}function al(){qe(Rt),qe(jt)}function Ru(e,t,n){if(jt.current!==Xn)throw Error(te(168));He(jt,t),He(Rt,n)}function Km(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(te(108,gh(e)||"Unknown",a));return Ze({},n,r)}function ll(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Xn,vs=jt.current,He(jt,e),He(Rt,Rt.current),!0}function Lu(e,t,n){var r=e.stateNode;if(!r)throw Error(te(169));n?(e=Km(e,t,vs),r.__reactInternalMemoizedMergedChildContext=e,qe(Rt),qe(jt),He(jt,e)):qe(Rt),He(Rt,n)}var jn=null,$l=!1,xo=!1;function Vm(e){jn===null?jn=[e]:jn.push(e)}function I0(e){$l=!0,Vm(e)}function ss(){if(!xo&&jn!==null){xo=!0;var e=0,t=ze;try{var n=jn;for(ze=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}jn=null,$l=!1}catch(a){throw jn!==null&&(jn=jn.slice(e+1)),ym(oc,ss),a}finally{ze=t,xo=!1}}return null}var Ds=[],Ms=0,ol=null,il=0,Bt=[],zt=0,bs=null,Nn=1,Sn="";function is(e,t){Ds[Ms++]=il,Ds[Ms++]=ol,ol=e,il=t}function qm(e,t,n){Bt[zt++]=Nn,Bt[zt++]=Sn,Bt[zt++]=bs,bs=e;var r=Nn;e=Sn;var a=32-sn(r)-1;r&=~(1<<a),n+=1;var l=32-sn(t)+a;if(30<l){var o=a-a%5;l=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Nn=1<<32-sn(t)+a|n<<a|r,Sn=l+e}else Nn=1<<l|n<<a|r,Sn=e}function xc(e){e.return!==null&&(is(e,1),qm(e,1,0))}function gc(e){for(;e===ol;)ol=Ds[--Ms],Ds[Ms]=null,il=Ds[--Ms],Ds[Ms]=null;for(;e===bs;)bs=Bt[--zt],Bt[zt]=null,Sn=Bt[--zt],Bt[zt]=null,Nn=Bt[--zt],Bt[zt]=null}var Dt=null,Ut=null,Je=!1,nn=null;function Jm(e,t){var n=Gt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Au(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Dt=e,Ut=Kn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Dt=e,Ut=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=bs!==null?{id:Nn,overflow:Sn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Gt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Dt=e,Ut=null,!0):!1;default:return!1}}function xi(e){return(e.mode&1)!==0&&(e.flags&128)===0}function gi(e){if(Je){var t=Ut;if(t){var n=t;if(!Au(e,t)){if(xi(e))throw Error(te(418));t=Kn(n.nextSibling);var r=Dt;t&&Au(e,t)?Jm(r,n):(e.flags=e.flags&-4097|2,Je=!1,Dt=e)}}else{if(xi(e))throw Error(te(418));e.flags=e.flags&-4097|2,Je=!1,Dt=e}}}function $u(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Dt=e}function Sa(e){if(e!==Dt)return!1;if(!Je)return $u(e),Je=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!mi(e.type,e.memoizedProps)),t&&(t=Ut)){if(xi(e))throw Qm(),Error(te(418));for(;t;)Jm(e,t),t=Kn(t.nextSibling)}if($u(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(te(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ut=Kn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ut=null}}else Ut=Dt?Kn(e.stateNode.nextSibling):null;return!0}function Qm(){for(var e=Ut;e;)e=Kn(e.nextSibling)}function Qs(){Ut=Dt=null,Je=!1}function yc(e){nn===null?nn=[e]:nn.push(e)}var U0=An.ReactCurrentBatchConfig;function xr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(te(309));var r=n.stateNode}if(!r)throw Error(te(147,e));var a=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(o){var c=a.refs;o===null?delete c[l]:c[l]=o},t._stringRef=l,t)}if(typeof e!="string")throw Error(te(284));if(!n._owner)throw Error(te(290,e))}return e}function ka(e,t){throw e=Object.prototype.toString.call(t),Error(te(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Iu(e){var t=e._init;return t(e._payload)}function Ym(e){function t(x,p){if(e){var m=x.deletions;m===null?(x.deletions=[p],x.flags|=16):m.push(p)}}function n(x,p){if(!e)return null;for(;p!==null;)t(x,p),p=p.sibling;return null}function r(x,p){for(x=new Map;p!==null;)p.key!==null?x.set(p.key,p):x.set(p.index,p),p=p.sibling;return x}function a(x,p){return x=Qn(x,p),x.index=0,x.sibling=null,x}function l(x,p,m){return x.index=m,e?(m=x.alternate,m!==null?(m=m.index,m<p?(x.flags|=2,p):m):(x.flags|=2,p)):(x.flags|=1048576,p)}function o(x){return e&&x.alternate===null&&(x.flags|=2),x}function c(x,p,m,E){return p===null||p.tag!==6?(p=No(m,x.mode,E),p.return=x,p):(p=a(p,m),p.return=x,p)}function u(x,p,m,E){var k=m.type;return k===Rs?h(x,p,m.props.children,E,m.key):p!==null&&(p.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Un&&Iu(k)===p.type)?(E=a(p,m.props),E.ref=xr(x,p,m),E.return=x,E):(E=qa(m.type,m.key,m.props,null,x.mode,E),E.ref=xr(x,p,m),E.return=x,E)}function d(x,p,m,E){return p===null||p.tag!==4||p.stateNode.containerInfo!==m.containerInfo||p.stateNode.implementation!==m.implementation?(p=So(m,x.mode,E),p.return=x,p):(p=a(p,m.children||[]),p.return=x,p)}function h(x,p,m,E,k){return p===null||p.tag!==7?(p=gs(m,x.mode,E,k),p.return=x,p):(p=a(p,m),p.return=x,p)}function f(x,p,m){if(typeof p=="string"&&p!==""||typeof p=="number")return p=No(""+p,x.mode,m),p.return=x,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case pa:return m=qa(p.type,p.key,p.props,null,x.mode,m),m.ref=xr(x,null,p),m.return=x,m;case Ts:return p=So(p,x.mode,m),p.return=x,p;case Un:var E=p._init;return f(x,E(p._payload),m)}if(Sr(p)||dr(p))return p=gs(p,x.mode,m,null),p.return=x,p;ka(x,p)}return null}function g(x,p,m,E){var k=p!==null?p.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return k!==null?null:c(x,p,""+m,E);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case pa:return m.key===k?u(x,p,m,E):null;case Ts:return m.key===k?d(x,p,m,E):null;case Un:return k=m._init,g(x,p,k(m._payload),E)}if(Sr(m)||dr(m))return k!==null?null:h(x,p,m,E,null);ka(x,m)}return null}function v(x,p,m,E,k){if(typeof E=="string"&&E!==""||typeof E=="number")return x=x.get(m)||null,c(p,x,""+E,k);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case pa:return x=x.get(E.key===null?m:E.key)||null,u(p,x,E,k);case Ts:return x=x.get(E.key===null?m:E.key)||null,d(p,x,E,k);case Un:var C=E._init;return v(x,p,m,C(E._payload),k)}if(Sr(E)||dr(E))return x=x.get(m)||null,h(p,x,E,k,null);ka(p,E)}return null}function b(x,p,m,E){for(var k=null,C=null,I=p,A=p=0,Z=null;I!==null&&A<m.length;A++){I.index>A?(Z=I,I=null):Z=I.sibling;var M=g(x,I,m[A],E);if(M===null){I===null&&(I=Z);break}e&&I&&M.alternate===null&&t(x,I),p=l(M,p,A),C===null?k=M:C.sibling=M,C=M,I=Z}if(A===m.length)return n(x,I),Je&&is(x,A),k;if(I===null){for(;A<m.length;A++)I=f(x,m[A],E),I!==null&&(p=l(I,p,A),C===null?k=I:C.sibling=I,C=I);return Je&&is(x,A),k}for(I=r(x,I);A<m.length;A++)Z=v(I,x,A,m[A],E),Z!==null&&(e&&Z.alternate!==null&&I.delete(Z.key===null?A:Z.key),p=l(Z,p,A),C===null?k=Z:C.sibling=Z,C=Z);return e&&I.forEach(function(q){return t(x,q)}),Je&&is(x,A),k}function y(x,p,m,E){var k=dr(m);if(typeof k!="function")throw Error(te(150));if(m=k.call(m),m==null)throw Error(te(151));for(var C=k=null,I=p,A=p=0,Z=null,M=m.next();I!==null&&!M.done;A++,M=m.next()){I.index>A?(Z=I,I=null):Z=I.sibling;var q=g(x,I,M.value,E);if(q===null){I===null&&(I=Z);break}e&&I&&q.alternate===null&&t(x,I),p=l(q,p,A),C===null?k=q:C.sibling=q,C=q,I=Z}if(M.done)return n(x,I),Je&&is(x,A),k;if(I===null){for(;!M.done;A++,M=m.next())M=f(x,M.value,E),M!==null&&(p=l(M,p,A),C===null?k=M:C.sibling=M,C=M);return Je&&is(x,A),k}for(I=r(x,I);!M.done;A++,M=m.next())M=v(I,x,A,M.value,E),M!==null&&(e&&M.alternate!==null&&I.delete(M.key===null?A:M.key),p=l(M,p,A),C===null?k=M:C.sibling=M,C=M);return e&&I.forEach(function(V){return t(x,V)}),Je&&is(x,A),k}function N(x,p,m,E){if(typeof m=="object"&&m!==null&&m.type===Rs&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case pa:e:{for(var k=m.key,C=p;C!==null;){if(C.key===k){if(k=m.type,k===Rs){if(C.tag===7){n(x,C.sibling),p=a(C,m.props.children),p.return=x,x=p;break e}}else if(C.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Un&&Iu(k)===C.type){n(x,C.sibling),p=a(C,m.props),p.ref=xr(x,C,m),p.return=x,x=p;break e}n(x,C);break}else t(x,C);C=C.sibling}m.type===Rs?(p=gs(m.props.children,x.mode,E,m.key),p.return=x,x=p):(E=qa(m.type,m.key,m.props,null,x.mode,E),E.ref=xr(x,p,m),E.return=x,x=E)}return o(x);case Ts:e:{for(C=m.key;p!==null;){if(p.key===C)if(p.tag===4&&p.stateNode.containerInfo===m.containerInfo&&p.stateNode.implementation===m.implementation){n(x,p.sibling),p=a(p,m.children||[]),p.return=x,x=p;break e}else{n(x,p);break}else t(x,p);p=p.sibling}p=So(m,x.mode,E),p.return=x,x=p}return o(x);case Un:return C=m._init,N(x,p,C(m._payload),E)}if(Sr(m))return b(x,p,m,E);if(dr(m))return y(x,p,m,E);ka(x,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,p!==null&&p.tag===6?(n(x,p.sibling),p=a(p,m),p.return=x,x=p):(n(x,p),p=No(m,x.mode,E),p.return=x,x=p),o(x)):n(x,p)}return N}var Ys=Ym(!0),Zm=Ym(!1),cl=ns(null),ul=null,Os=null,vc=null;function bc(){vc=Os=ul=null}function wc(e){var t=cl.current;qe(cl),e._currentValue=t}function yi(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Hs(e,t){ul=e,vc=Os=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Tt=!0),e.firstContext=null)}function Ht(e){var t=e._currentValue;if(vc!==e)if(e={context:e,memoizedValue:t,next:null},Os===null){if(ul===null)throw Error(te(308));Os=e,ul.dependencies={lanes:0,firstContext:e}}else Os=Os.next=e;return t}var ms=null;function jc(e){ms===null?ms=[e]:ms.push(e)}function Xm(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,jc(t)):(n.next=a.next,a.next=n),t.interleaved=n,Tn(e,r)}function Tn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Dn=!1;function Nc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ef(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function kn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Re&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Tn(e,n)}return a=r.interleaved,a===null?(t.next=t,jc(r)):(t.next=a.next,a.next=t),r.interleaved=t,Tn(e,n)}function za(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ic(e,n)}}function Uu(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?a=l=o:l=l.next=o,n=n.next}while(n!==null);l===null?a=l=t:l=l.next=t}else a=l=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function dl(e,t,n,r){var a=e.updateQueue;Dn=!1;var l=a.firstBaseUpdate,o=a.lastBaseUpdate,c=a.shared.pending;if(c!==null){a.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?l=d:o.next=d,o=u;var h=e.alternate;h!==null&&(h=h.updateQueue,c=h.lastBaseUpdate,c!==o&&(c===null?h.firstBaseUpdate=d:c.next=d,h.lastBaseUpdate=u))}if(l!==null){var f=a.baseState;o=0,h=d=u=null,c=l;do{var g=c.lane,v=c.eventTime;if((r&g)===g){h!==null&&(h=h.next={eventTime:v,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var b=e,y=c;switch(g=t,v=n,y.tag){case 1:if(b=y.payload,typeof b=="function"){f=b.call(v,f,g);break e}f=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=y.payload,g=typeof b=="function"?b.call(v,f,g):b,g==null)break e;f=Ze({},f,g);break e;case 2:Dn=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,g=a.effects,g===null?a.effects=[c]:g.push(c))}else v={eventTime:v,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},h===null?(d=h=v,u=f):h=h.next=v,o|=g;if(c=c.next,c===null){if(c=a.shared.pending,c===null)break;g=c,c=g.next,g.next=null,a.lastBaseUpdate=g,a.shared.pending=null}}while(!0);if(h===null&&(u=f),a.baseState=u,a.firstBaseUpdate=d,a.lastBaseUpdate=h,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else l===null&&(a.shared.lanes=0);js|=o,e.lanes=o,e.memoizedState=f}}function Du(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(te(191,a));a.call(r)}}}var ia={},fn=ns(ia),Jr=ns(ia),Qr=ns(ia);function fs(e){if(e===ia)throw Error(te(174));return e}function Sc(e,t){switch(He(Qr,t),He(Jr,e),He(fn,ia),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Zo(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Zo(t,e)}qe(fn),He(fn,t)}function Zs(){qe(fn),qe(Jr),qe(Qr)}function tf(e){fs(Qr.current);var t=fs(fn.current),n=Zo(t,e.type);t!==n&&(He(Jr,e),He(fn,n))}function kc(e){Jr.current===e&&(qe(fn),qe(Jr))}var Qe=ns(0);function ml(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var go=[];function Cc(){for(var e=0;e<go.length;e++)go[e]._workInProgressVersionPrimary=null;go.length=0}var Ga=An.ReactCurrentDispatcher,yo=An.ReactCurrentBatchConfig,ws=0,Ye=null,ot=null,dt=null,fl=!1,Ir=!1,Yr=0,D0=0;function yt(){throw Error(te(321))}function Ec(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!an(e[n],t[n]))return!1;return!0}function Pc(e,t,n,r,a,l){if(ws=l,Ye=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ga.current=e===null||e.memoizedState===null?_0:B0,e=n(r,a),Ir){l=0;do{if(Ir=!1,Yr=0,25<=l)throw Error(te(301));l+=1,dt=ot=null,t.updateQueue=null,Ga.current=z0,e=n(r,a)}while(Ir)}if(Ga.current=pl,t=ot!==null&&ot.next!==null,ws=0,dt=ot=Ye=null,fl=!1,t)throw Error(te(300));return e}function Tc(){var e=Yr!==0;return Yr=0,e}function un(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dt===null?Ye.memoizedState=dt=e:dt=dt.next=e,dt}function Kt(){if(ot===null){var e=Ye.alternate;e=e!==null?e.memoizedState:null}else e=ot.next;var t=dt===null?Ye.memoizedState:dt.next;if(t!==null)dt=t,ot=e;else{if(e===null)throw Error(te(310));ot=e,e={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},dt===null?Ye.memoizedState=dt=e:dt=dt.next=e}return dt}function Zr(e,t){return typeof t=="function"?t(e):t}function vo(e){var t=Kt(),n=t.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=e;var r=ot,a=r.baseQueue,l=n.pending;if(l!==null){if(a!==null){var o=a.next;a.next=l.next,l.next=o}r.baseQueue=a=l,n.pending=null}if(a!==null){l=a.next,r=r.baseState;var c=o=null,u=null,d=l;do{var h=d.lane;if((ws&h)===h)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=f,o=r):u=u.next=f,Ye.lanes|=h,js|=h}d=d.next}while(d!==null&&d!==l);u===null?o=r:u.next=c,an(r,t.memoizedState)||(Tt=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do l=a.lane,Ye.lanes|=l,js|=l,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function bo(e){var t=Kt(),n=t.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,l=t.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do l=e(l,o.action),o=o.next;while(o!==a);an(l,t.memoizedState)||(Tt=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function nf(){}function sf(e,t){var n=Ye,r=Kt(),a=t(),l=!an(r.memoizedState,a);if(l&&(r.memoizedState=a,Tt=!0),r=r.queue,Rc(lf.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||dt!==null&&dt.memoizedState.tag&1){if(n.flags|=2048,Xr(9,af.bind(null,n,r,a,t),void 0,null),mt===null)throw Error(te(349));ws&30||rf(n,t,a)}return a}function rf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ye.updateQueue,t===null?(t={lastEffect:null,stores:null},Ye.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function af(e,t,n,r){t.value=n,t.getSnapshot=r,of(t)&&cf(e)}function lf(e,t,n){return n(function(){of(t)&&cf(e)})}function of(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!an(e,n)}catch{return!0}}function cf(e){var t=Tn(e,1);t!==null&&rn(t,e,1,-1)}function Mu(e){var t=un();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zr,lastRenderedState:e},t.queue=e,e=e.dispatch=F0.bind(null,Ye,e),[t.memoizedState,e]}function Xr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ye.updateQueue,t===null?(t={lastEffect:null,stores:null},Ye.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function uf(){return Kt().memoizedState}function Wa(e,t,n,r){var a=un();Ye.flags|=e,a.memoizedState=Xr(1|t,n,void 0,r===void 0?null:r)}function Il(e,t,n,r){var a=Kt();r=r===void 0?null:r;var l=void 0;if(ot!==null){var o=ot.memoizedState;if(l=o.destroy,r!==null&&Ec(r,o.deps)){a.memoizedState=Xr(t,n,l,r);return}}Ye.flags|=e,a.memoizedState=Xr(1|t,n,l,r)}function Ou(e,t){return Wa(8390656,8,e,t)}function Rc(e,t){return Il(2048,8,e,t)}function df(e,t){return Il(4,2,e,t)}function mf(e,t){return Il(4,4,e,t)}function ff(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function pf(e,t,n){return n=n!=null?n.concat([e]):null,Il(4,4,ff.bind(null,t,e),n)}function Lc(){}function hf(e,t){var n=Kt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ec(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function xf(e,t){var n=Kt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ec(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function gf(e,t,n){return ws&21?(an(n,t)||(n=wm(),Ye.lanes|=n,js|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Tt=!0),e.memoizedState=n)}function M0(e,t){var n=ze;ze=n!==0&&4>n?n:4,e(!0);var r=yo.transition;yo.transition={};try{e(!1),t()}finally{ze=n,yo.transition=r}}function yf(){return Kt().memoizedState}function O0(e,t,n){var r=Jn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},vf(e))bf(t,n);else if(n=Xm(e,t,n,r),n!==null){var a=St();rn(n,e,r,a),wf(n,t,r)}}function F0(e,t,n){var r=Jn(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(vf(e))bf(t,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var o=t.lastRenderedState,c=l(o,n);if(a.hasEagerState=!0,a.eagerState=c,an(c,o)){var u=t.interleaved;u===null?(a.next=a,jc(t)):(a.next=u.next,u.next=a),t.interleaved=a;return}}catch{}finally{}n=Xm(e,t,a,r),n!==null&&(a=St(),rn(n,e,r,a),wf(n,t,r))}}function vf(e){var t=e.alternate;return e===Ye||t!==null&&t===Ye}function bf(e,t){Ir=fl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function wf(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ic(e,n)}}var pl={readContext:Ht,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},_0={readContext:Ht,useCallback:function(e,t){return un().memoizedState=[e,t===void 0?null:t],e},useContext:Ht,useEffect:Ou,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Wa(4194308,4,ff.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Wa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Wa(4,2,e,t)},useMemo:function(e,t){var n=un();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=un();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=O0.bind(null,Ye,e),[r.memoizedState,e]},useRef:function(e){var t=un();return e={current:e},t.memoizedState=e},useState:Mu,useDebugValue:Lc,useDeferredValue:function(e){return un().memoizedState=e},useTransition:function(){var e=Mu(!1),t=e[0];return e=M0.bind(null,e[1]),un().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ye,a=un();if(Je){if(n===void 0)throw Error(te(407));n=n()}else{if(n=t(),mt===null)throw Error(te(349));ws&30||rf(r,t,n)}a.memoizedState=n;var l={value:n,getSnapshot:t};return a.queue=l,Ou(lf.bind(null,r,l,e),[e]),r.flags|=2048,Xr(9,af.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=un(),t=mt.identifierPrefix;if(Je){var n=Sn,r=Nn;n=(r&~(1<<32-sn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Yr++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=D0++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},B0={readContext:Ht,useCallback:hf,useContext:Ht,useEffect:Rc,useImperativeHandle:pf,useInsertionEffect:df,useLayoutEffect:mf,useMemo:xf,useReducer:vo,useRef:uf,useState:function(){return vo(Zr)},useDebugValue:Lc,useDeferredValue:function(e){var t=Kt();return gf(t,ot.memoizedState,e)},useTransition:function(){var e=vo(Zr)[0],t=Kt().memoizedState;return[e,t]},useMutableSource:nf,useSyncExternalStore:sf,useId:yf,unstable_isNewReconciler:!1},z0={readContext:Ht,useCallback:hf,useContext:Ht,useEffect:Rc,useImperativeHandle:pf,useInsertionEffect:df,useLayoutEffect:mf,useMemo:xf,useReducer:bo,useRef:uf,useState:function(){return bo(Zr)},useDebugValue:Lc,useDeferredValue:function(e){var t=Kt();return ot===null?t.memoizedState=e:gf(t,ot.memoizedState,e)},useTransition:function(){var e=bo(Zr)[0],t=Kt().memoizedState;return[e,t]},useMutableSource:nf,useSyncExternalStore:sf,useId:yf,unstable_isNewReconciler:!1};function en(e,t){if(e&&e.defaultProps){t=Ze({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function vi(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ze({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ul={isMounted:function(e){return(e=e._reactInternals)?ks(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=St(),a=Jn(e),l=kn(r,a);l.payload=t,n!=null&&(l.callback=n),t=Vn(e,l,a),t!==null&&(rn(t,e,a,r),za(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=St(),a=Jn(e),l=kn(r,a);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=Vn(e,l,a),t!==null&&(rn(t,e,a,r),za(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=St(),r=Jn(e),a=kn(n,r);a.tag=2,t!=null&&(a.callback=t),t=Vn(e,a,r),t!==null&&(rn(t,e,r,n),za(t,e,r))}};function Fu(e,t,n,r,a,l,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,o):t.prototype&&t.prototype.isPureReactComponent?!Hr(n,r)||!Hr(a,l):!0}function jf(e,t,n){var r=!1,a=Xn,l=t.contextType;return typeof l=="object"&&l!==null?l=Ht(l):(a=Lt(t)?vs:jt.current,r=t.contextTypes,l=(r=r!=null)?Js(e,a):Xn),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ul,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),t}function _u(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ul.enqueueReplaceState(t,t.state,null)}function bi(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Nc(e);var l=t.contextType;typeof l=="object"&&l!==null?a.context=Ht(l):(l=Lt(t)?vs:jt.current,a.context=Js(e,l)),a.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(vi(e,t,l,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Ul.enqueueReplaceState(a,a.state,null),dl(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Xs(e,t){try{var n="",r=t;do n+=xh(r),r=r.return;while(r);var a=n}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:a,digest:null}}function wo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function wi(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var G0=typeof WeakMap=="function"?WeakMap:Map;function Nf(e,t,n){n=kn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){xl||(xl=!0,Li=r),wi(e,t)},n}function Sf(e,t,n){n=kn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){wi(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){wi(e,t),typeof r!="function"&&(qn===null?qn=new Set([this]):qn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Bu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new G0;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=sx.bind(null,e,t,n),t.then(e,e))}function zu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Gu(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=kn(-1,1),t.tag=2,Vn(n,t,1))),n.lanes|=1),e)}var W0=An.ReactCurrentOwner,Tt=!1;function Nt(e,t,n,r){t.child=e===null?Zm(t,null,n,r):Ys(t,e.child,n,r)}function Wu(e,t,n,r,a){n=n.render;var l=t.ref;return Hs(t,a),r=Pc(e,t,n,r,l,a),n=Tc(),e!==null&&!Tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Rn(e,t,a)):(Je&&n&&xc(t),t.flags|=1,Nt(e,t,r,a),t.child)}function Hu(e,t,n,r,a){if(e===null){var l=n.type;return typeof l=="function"&&!Fc(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,kf(e,t,l,r,a)):(e=qa(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&a)){var o=l.memoizedProps;if(n=n.compare,n=n!==null?n:Hr,n(o,r)&&e.ref===t.ref)return Rn(e,t,a)}return t.flags|=1,e=Qn(l,r),e.ref=t.ref,e.return=t,t.child=e}function kf(e,t,n,r,a){if(e!==null){var l=e.memoizedProps;if(Hr(l,r)&&e.ref===t.ref)if(Tt=!1,t.pendingProps=r=l,(e.lanes&a)!==0)e.flags&131072&&(Tt=!0);else return t.lanes=e.lanes,Rn(e,t,a)}return ji(e,t,n,r,a)}function Cf(e,t,n){var r=t.pendingProps,a=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(_s,It),It|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,He(_s,It),It|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,He(_s,It),It|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,He(_s,It),It|=r;return Nt(e,t,a,n),t.child}function Ef(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ji(e,t,n,r,a){var l=Lt(n)?vs:jt.current;return l=Js(t,l),Hs(t,a),n=Pc(e,t,n,r,l,a),r=Tc(),e!==null&&!Tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Rn(e,t,a)):(Je&&r&&xc(t),t.flags|=1,Nt(e,t,n,a),t.child)}function Ku(e,t,n,r,a){if(Lt(n)){var l=!0;ll(t)}else l=!1;if(Hs(t,a),t.stateNode===null)Ha(e,t),jf(t,n,r),bi(t,n,r,a),r=!0;else if(e===null){var o=t.stateNode,c=t.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Ht(d):(d=Lt(n)?vs:jt.current,d=Js(t,d));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&_u(t,o,r,d),Dn=!1;var g=t.memoizedState;o.state=g,dl(t,r,o,a),u=t.memoizedState,c!==r||g!==u||Rt.current||Dn?(typeof h=="function"&&(vi(t,n,h,r),u=t.memoizedState),(c=Dn||Fu(t,n,c,r,g,u,d))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ef(e,t),c=t.memoizedProps,d=t.type===t.elementType?c:en(t.type,c),o.props=d,f=t.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Ht(u):(u=Lt(n)?vs:jt.current,u=Js(t,u));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==f||g!==u)&&_u(t,o,r,u),Dn=!1,g=t.memoizedState,o.state=g,dl(t,r,o,a);var b=t.memoizedState;c!==f||g!==b||Rt.current||Dn?(typeof v=="function"&&(vi(t,n,v,r),b=t.memoizedState),(d=Dn||Fu(t,n,d,r,g,b,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=b),o.props=r,o.state=b,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return Ni(e,t,n,r,l,a)}function Ni(e,t,n,r,a,l){Ef(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return a&&Lu(t,n,!1),Rn(e,t,l);r=t.stateNode,W0.current=t;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Ys(t,e.child,null,l),t.child=Ys(t,null,c,l)):Nt(e,t,c,l),t.memoizedState=r.state,a&&Lu(t,n,!0),t.child}function Pf(e){var t=e.stateNode;t.pendingContext?Ru(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ru(e,t.context,!1),Sc(e,t.containerInfo)}function Vu(e,t,n,r,a){return Qs(),yc(a),t.flags|=256,Nt(e,t,n,r),t.child}var Si={dehydrated:null,treeContext:null,retryLane:0};function ki(e){return{baseLanes:e,cachePool:null,transitions:null}}function Tf(e,t,n){var r=t.pendingProps,a=Qe.current,l=!1,o=(t.flags&128)!==0,c;if((c=o)||(c=e!==null&&e.memoizedState===null?!1:(a&2)!==0),c?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),He(Qe,a&1),e===null)return gi(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,l?(r=t.mode,l=t.child,o={mode:"hidden",children:o},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=o):l=Ol(o,r,0,null),e=gs(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=ki(n),t.memoizedState=Si,e):Ac(t,o));if(a=e.memoizedState,a!==null&&(c=a.dehydrated,c!==null))return H0(e,t,o,r,c,a,n);if(l){l=r.fallback,o=t.mode,a=e.child,c=a.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=Qn(a,u),r.subtreeFlags=a.subtreeFlags&14680064),c!==null?l=Qn(c,l):(l=gs(l,o,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,o=e.child.memoizedState,o=o===null?ki(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=e.childLanes&~n,t.memoizedState=Si,r}return l=e.child,e=l.sibling,r=Qn(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ac(e,t){return t=Ol({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ca(e,t,n,r){return r!==null&&yc(r),Ys(t,e.child,null,n),e=Ac(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function H0(e,t,n,r,a,l,o){if(n)return t.flags&256?(t.flags&=-257,r=wo(Error(te(422))),Ca(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,a=t.mode,r=Ol({mode:"visible",children:r.children},a,0,null),l=gs(l,a,o,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&Ys(t,e.child,null,o),t.child.memoizedState=ki(o),t.memoizedState=Si,l);if(!(t.mode&1))return Ca(e,t,o,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var c=r.dgst;return r=c,l=Error(te(419)),r=wo(l,r,void 0),Ca(e,t,o,r)}if(c=(o&e.childLanes)!==0,Tt||c){if(r=mt,r!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|o)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,Tn(e,a),rn(r,e,a,-1))}return Oc(),r=wo(Error(te(421))),Ca(e,t,o,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=rx.bind(null,e),a._reactRetry=t,null):(e=l.treeContext,Ut=Kn(a.nextSibling),Dt=t,Je=!0,nn=null,e!==null&&(Bt[zt++]=Nn,Bt[zt++]=Sn,Bt[zt++]=bs,Nn=e.id,Sn=e.overflow,bs=t),t=Ac(t,r.children),t.flags|=4096,t)}function qu(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),yi(e.return,t,n)}function jo(e,t,n,r,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=a)}function Rf(e,t,n){var r=t.pendingProps,a=r.revealOrder,l=r.tail;if(Nt(e,t,r.children,n),r=Qe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&qu(e,n,t);else if(e.tag===19)qu(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(He(Qe,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&ml(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),jo(t,!1,a,n,l);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&ml(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}jo(t,!0,n,null,l);break;case"together":jo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ha(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Rn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),js|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(te(153));if(t.child!==null){for(e=t.child,n=Qn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Qn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function K0(e,t,n){switch(t.tag){case 3:Pf(t),Qs();break;case 5:tf(t);break;case 1:Lt(t.type)&&ll(t);break;case 4:Sc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;He(cl,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(He(Qe,Qe.current&1),t.flags|=128,null):n&t.child.childLanes?Tf(e,t,n):(He(Qe,Qe.current&1),e=Rn(e,t,n),e!==null?e.sibling:null);He(Qe,Qe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Rf(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),He(Qe,Qe.current),r)break;return null;case 22:case 23:return t.lanes=0,Cf(e,t,n)}return Rn(e,t,n)}var Lf,Ci,Af,$f;Lf=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ci=function(){};Af=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,fs(fn.current);var l=null;switch(n){case"input":a=qo(e,a),r=qo(e,r),l=[];break;case"select":a=Ze({},a,{value:void 0}),r=Ze({},r,{value:void 0}),l=[];break;case"textarea":a=Yo(e,a),r=Yo(e,r),l=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=rl)}Xo(n,r);var o;n=null;for(d in a)if(!r.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var c=a[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Or.hasOwnProperty(d)?l||(l=[]):(l=l||[]).push(d,null));for(d in r){var u=r[d];if(c=a!=null?a[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(l||(l=[]),l.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(l=l||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(l=l||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Or.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Ve("scroll",e),l||c===u||(l=[])):(l=l||[]).push(d,u))}n&&(l=l||[]).push("style",n);var d=l;(t.updateQueue=d)&&(t.flags|=4)}};$f=function(e,t,n,r){n!==r&&(t.flags|=4)};function gr(e,t){if(!Je)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function vt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function V0(e,t,n){var r=t.pendingProps;switch(gc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(t),null;case 1:return Lt(t.type)&&al(),vt(t),null;case 3:return r=t.stateNode,Zs(),qe(Rt),qe(jt),Cc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Sa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,nn!==null&&(Ii(nn),nn=null))),Ci(e,t),vt(t),null;case 5:kc(t);var a=fs(Qr.current);if(n=t.type,e!==null&&t.stateNode!=null)Af(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(te(166));return vt(t),null}if(e=fs(fn.current),Sa(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[dn]=t,r[qr]=l,e=(t.mode&1)!==0,n){case"dialog":Ve("cancel",r),Ve("close",r);break;case"iframe":case"object":case"embed":Ve("load",r);break;case"video":case"audio":for(a=0;a<Cr.length;a++)Ve(Cr[a],r);break;case"source":Ve("error",r);break;case"img":case"image":case"link":Ve("error",r),Ve("load",r);break;case"details":Ve("toggle",r);break;case"input":su(r,l),Ve("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},Ve("invalid",r);break;case"textarea":au(r,l),Ve("invalid",r)}Xo(n,l),a=null;for(var o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="children"?typeof c=="string"?r.textContent!==c&&(l.suppressHydrationWarning!==!0&&Na(r.textContent,c,e),a=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(l.suppressHydrationWarning!==!0&&Na(r.textContent,c,e),a=["children",""+c]):Or.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Ve("scroll",r)}switch(n){case"input":ha(r),ru(r,l,!0);break;case"textarea":ha(r),lu(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=rl)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=lm(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[dn]=t,e[qr]=r,Lf(e,t,!1,!1),t.stateNode=e;e:{switch(o=ei(n,r),n){case"dialog":Ve("cancel",e),Ve("close",e),a=r;break;case"iframe":case"object":case"embed":Ve("load",e),a=r;break;case"video":case"audio":for(a=0;a<Cr.length;a++)Ve(Cr[a],e);a=r;break;case"source":Ve("error",e),a=r;break;case"img":case"image":case"link":Ve("error",e),Ve("load",e),a=r;break;case"details":Ve("toggle",e),a=r;break;case"input":su(e,r),a=qo(e,r),Ve("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=Ze({},r,{value:void 0}),Ve("invalid",e);break;case"textarea":au(e,r),a=Yo(e,r),Ve("invalid",e);break;default:a=r}Xo(n,a),c=a;for(l in c)if(c.hasOwnProperty(l)){var u=c[l];l==="style"?cm(e,u):l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&om(e,u)):l==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Fr(e,u):typeof u=="number"&&Fr(e,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Or.hasOwnProperty(l)?u!=null&&l==="onScroll"&&Ve("scroll",e):u!=null&&nc(e,l,u,o))}switch(n){case"input":ha(e),ru(e,r,!1);break;case"textarea":ha(e),lu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Zn(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?Bs(e,!!r.multiple,l,!1):r.defaultValue!=null&&Bs(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=rl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return vt(t),null;case 6:if(e&&t.stateNode!=null)$f(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(te(166));if(n=fs(Qr.current),fs(fn.current),Sa(t)){if(r=t.stateNode,n=t.memoizedProps,r[dn]=t,(l=r.nodeValue!==n)&&(e=Dt,e!==null))switch(e.tag){case 3:Na(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Na(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[dn]=t,t.stateNode=r}return vt(t),null;case 13:if(qe(Qe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Je&&Ut!==null&&t.mode&1&&!(t.flags&128))Qm(),Qs(),t.flags|=98560,l=!1;else if(l=Sa(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(te(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(te(317));l[dn]=t}else Qs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;vt(t),l=!1}else nn!==null&&(Ii(nn),nn=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Qe.current&1?it===0&&(it=3):Oc())),t.updateQueue!==null&&(t.flags|=4),vt(t),null);case 4:return Zs(),Ci(e,t),e===null&&Kr(t.stateNode.containerInfo),vt(t),null;case 10:return wc(t.type._context),vt(t),null;case 17:return Lt(t.type)&&al(),vt(t),null;case 19:if(qe(Qe),l=t.memoizedState,l===null)return vt(t),null;if(r=(t.flags&128)!==0,o=l.rendering,o===null)if(r)gr(l,!1);else{if(it!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=ml(e),o!==null){for(t.flags|=128,gr(l,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,o=l.alternate,o===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,e=o.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return He(Qe,Qe.current&1|2),t.child}e=e.sibling}l.tail!==null&&st()>er&&(t.flags|=128,r=!0,gr(l,!1),t.lanes=4194304)}else{if(!r)if(e=ml(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),gr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!Je)return vt(t),null}else 2*st()-l.renderingStartTime>er&&n!==1073741824&&(t.flags|=128,r=!0,gr(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(n=l.last,n!==null?n.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=st(),t.sibling=null,n=Qe.current,He(Qe,r?n&1|2:n&1),t):(vt(t),null);case 22:case 23:return Mc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?It&1073741824&&(vt(t),t.subtreeFlags&6&&(t.flags|=8192)):vt(t),null;case 24:return null;case 25:return null}throw Error(te(156,t.tag))}function q0(e,t){switch(gc(t),t.tag){case 1:return Lt(t.type)&&al(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Zs(),qe(Rt),qe(jt),Cc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return kc(t),null;case 13:if(qe(Qe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(te(340));Qs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return qe(Qe),null;case 4:return Zs(),null;case 10:return wc(t.type._context),null;case 22:case 23:return Mc(),null;case 24:return null;default:return null}}var Ea=!1,bt=!1,J0=typeof WeakSet=="function"?WeakSet:Set,me=null;function Fs(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){et(e,t,r)}else n.current=null}function Ei(e,t,n){try{n()}catch(r){et(e,t,r)}}var Ju=!1;function Q0(e,t){if(ui=tl,e=Mm(),hc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,h=0,f=e,g=null;t:for(;;){for(var v;f!==n||a!==0&&f.nodeType!==3||(c=o+a),f!==l||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(v=f.firstChild)!==null;)g=f,f=v;for(;;){if(f===e)break t;if(g===n&&++d===a&&(c=o),g===l&&++h===r&&(u=o),(v=f.nextSibling)!==null)break;f=g,g=f.parentNode}f=v}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(di={focusedElem:e,selectionRange:n},tl=!1,me=t;me!==null;)if(t=me,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,me=e;else for(;me!==null;){t=me;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var y=b.memoizedProps,N=b.memoizedState,x=t.stateNode,p=x.getSnapshotBeforeUpdate(t.elementType===t.type?y:en(t.type,y),N);x.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var m=t.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(te(163))}}catch(E){et(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,me=e;break}me=t.return}return b=Ju,Ju=!1,b}function Ur(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&Ei(t,n,l)}a=a.next}while(a!==r)}}function Dl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Pi(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function If(e){var t=e.alternate;t!==null&&(e.alternate=null,If(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[dn],delete t[qr],delete t[pi],delete t[A0],delete t[$0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Uf(e){return e.tag===5||e.tag===3||e.tag===4}function Qu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Uf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ti(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=rl));else if(r!==4&&(e=e.child,e!==null))for(Ti(e,t,n),e=e.sibling;e!==null;)Ti(e,t,n),e=e.sibling}function Ri(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Ri(e,t,n),e=e.sibling;e!==null;)Ri(e,t,n),e=e.sibling}var ft=null,tn=!1;function In(e,t,n){for(n=n.child;n!==null;)Df(e,t,n),n=n.sibling}function Df(e,t,n){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(Pl,n)}catch{}switch(n.tag){case 5:bt||Fs(n,t);case 6:var r=ft,a=tn;ft=null,In(e,t,n),ft=r,tn=a,ft!==null&&(tn?(e=ft,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ft.removeChild(n.stateNode));break;case 18:ft!==null&&(tn?(e=ft,n=n.stateNode,e.nodeType===8?ho(e.parentNode,n):e.nodeType===1&&ho(e,n),Gr(e)):ho(ft,n.stateNode));break;case 4:r=ft,a=tn,ft=n.stateNode.containerInfo,tn=!0,In(e,t,n),ft=r,tn=a;break;case 0:case 11:case 14:case 15:if(!bt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var l=a,o=l.destroy;l=l.tag,o!==void 0&&(l&2||l&4)&&Ei(n,t,o),a=a.next}while(a!==r)}In(e,t,n);break;case 1:if(!bt&&(Fs(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){et(n,t,c)}In(e,t,n);break;case 21:In(e,t,n);break;case 22:n.mode&1?(bt=(r=bt)||n.memoizedState!==null,In(e,t,n),bt=r):In(e,t,n);break;default:In(e,t,n)}}function Yu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new J0),t.forEach(function(r){var a=ax.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function Qt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var l=e,o=t,c=o;e:for(;c!==null;){switch(c.tag){case 5:ft=c.stateNode,tn=!1;break e;case 3:ft=c.stateNode.containerInfo,tn=!0;break e;case 4:ft=c.stateNode.containerInfo,tn=!0;break e}c=c.return}if(ft===null)throw Error(te(160));Df(l,o,a),ft=null,tn=!1;var u=a.alternate;u!==null&&(u.return=null),a.return=null}catch(d){et(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Mf(t,e),t=t.sibling}function Mf(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Qt(t,e),on(e),r&4){try{Ur(3,e,e.return),Dl(3,e)}catch(y){et(e,e.return,y)}try{Ur(5,e,e.return)}catch(y){et(e,e.return,y)}}break;case 1:Qt(t,e),on(e),r&512&&n!==null&&Fs(n,n.return);break;case 5:if(Qt(t,e),on(e),r&512&&n!==null&&Fs(n,n.return),e.flags&32){var a=e.stateNode;try{Fr(a,"")}catch(y){et(e,e.return,y)}}if(r&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,o=n!==null?n.memoizedProps:l,c=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{c==="input"&&l.type==="radio"&&l.name!=null&&rm(a,l),ei(c,o);var d=ei(c,l);for(o=0;o<u.length;o+=2){var h=u[o],f=u[o+1];h==="style"?cm(a,f):h==="dangerouslySetInnerHTML"?om(a,f):h==="children"?Fr(a,f):nc(a,h,f,d)}switch(c){case"input":Jo(a,l);break;case"textarea":am(a,l);break;case"select":var g=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var v=l.value;v!=null?Bs(a,!!l.multiple,v,!1):g!==!!l.multiple&&(l.defaultValue!=null?Bs(a,!!l.multiple,l.defaultValue,!0):Bs(a,!!l.multiple,l.multiple?[]:"",!1))}a[qr]=l}catch(y){et(e,e.return,y)}}break;case 6:if(Qt(t,e),on(e),r&4){if(e.stateNode===null)throw Error(te(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(y){et(e,e.return,y)}}break;case 3:if(Qt(t,e),on(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Gr(t.containerInfo)}catch(y){et(e,e.return,y)}break;case 4:Qt(t,e),on(e);break;case 13:Qt(t,e),on(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(Uc=st())),r&4&&Yu(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(bt=(d=bt)||h,Qt(t,e),bt=d):Qt(t,e),on(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!h&&e.mode&1)for(me=e,h=e.child;h!==null;){for(f=me=h;me!==null;){switch(g=me,v=g.child,g.tag){case 0:case 11:case 14:case 15:Ur(4,g,g.return);break;case 1:Fs(g,g.return);var b=g.stateNode;if(typeof b.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(y){et(r,n,y)}}break;case 5:Fs(g,g.return);break;case 22:if(g.memoizedState!==null){Xu(f);continue}}v!==null?(v.return=g,me=v):Xu(f)}h=h.sibling}e:for(h=null,f=e;;){if(f.tag===5){if(h===null){h=f;try{a=f.stateNode,d?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(c=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=im("display",o))}catch(y){et(e,e.return,y)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(y){et(e,e.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Qt(t,e),on(e),r&4&&Yu(e);break;case 21:break;default:Qt(t,e),on(e)}}function on(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Uf(n)){var r=n;break e}n=n.return}throw Error(te(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Fr(a,""),r.flags&=-33);var l=Qu(e);Ri(e,l,a);break;case 3:case 4:var o=r.stateNode.containerInfo,c=Qu(e);Ti(e,c,o);break;default:throw Error(te(161))}}catch(u){et(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Y0(e,t,n){me=e,Of(e)}function Of(e,t,n){for(var r=(e.mode&1)!==0;me!==null;){var a=me,l=a.child;if(a.tag===22&&r){var o=a.memoizedState!==null||Ea;if(!o){var c=a.alternate,u=c!==null&&c.memoizedState!==null||bt;c=Ea;var d=bt;if(Ea=o,(bt=u)&&!d)for(me=a;me!==null;)o=me,u=o.child,o.tag===22&&o.memoizedState!==null?ed(a):u!==null?(u.return=o,me=u):ed(a);for(;l!==null;)me=l,Of(l),l=l.sibling;me=a,Ea=c,bt=d}Zu(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,me=l):Zu(e)}}function Zu(e){for(;me!==null;){var t=me;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:bt||Dl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!bt)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:en(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Du(t,l,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Du(t,o,n)}break;case 5:var c=t.stateNode;if(n===null&&t.flags&4){n=c;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Gr(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(te(163))}bt||t.flags&512&&Pi(t)}catch(g){et(t,t.return,g)}}if(t===e){me=null;break}if(n=t.sibling,n!==null){n.return=t.return,me=n;break}me=t.return}}function Xu(e){for(;me!==null;){var t=me;if(t===e){me=null;break}var n=t.sibling;if(n!==null){n.return=t.return,me=n;break}me=t.return}}function ed(e){for(;me!==null;){var t=me;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Dl(4,t)}catch(u){et(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(u){et(t,a,u)}}var l=t.return;try{Pi(t)}catch(u){et(t,l,u)}break;case 5:var o=t.return;try{Pi(t)}catch(u){et(t,o,u)}}}catch(u){et(t,t.return,u)}if(t===e){me=null;break}var c=t.sibling;if(c!==null){c.return=t.return,me=c;break}me=t.return}}var Z0=Math.ceil,hl=An.ReactCurrentDispatcher,$c=An.ReactCurrentOwner,Wt=An.ReactCurrentBatchConfig,Re=0,mt=null,rt=null,pt=0,It=0,_s=ns(0),it=0,ea=null,js=0,Ml=0,Ic=0,Dr=null,Pt=null,Uc=0,er=1/0,wn=null,xl=!1,Li=null,qn=null,Pa=!1,Bn=null,gl=0,Mr=0,Ai=null,Ka=-1,Va=0;function St(){return Re&6?st():Ka!==-1?Ka:Ka=st()}function Jn(e){return e.mode&1?Re&2&&pt!==0?pt&-pt:U0.transition!==null?(Va===0&&(Va=wm()),Va):(e=ze,e!==0||(e=window.event,e=e===void 0?16:Pm(e.type)),e):1}function rn(e,t,n,r){if(50<Mr)throw Mr=0,Ai=null,Error(te(185));aa(e,n,r),(!(Re&2)||e!==mt)&&(e===mt&&(!(Re&2)&&(Ml|=n),it===4&&On(e,pt)),At(e,r),n===1&&Re===0&&!(t.mode&1)&&(er=st()+500,$l&&ss()))}function At(e,t){var n=e.callbackNode;Uh(e,t);var r=el(e,e===mt?pt:0);if(r===0)n!==null&&cu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&cu(n),t===1)e.tag===0?I0(td.bind(null,e)):Vm(td.bind(null,e)),R0(function(){!(Re&6)&&ss()}),n=null;else{switch(jm(r)){case 1:n=oc;break;case 4:n=vm;break;case 16:n=Xa;break;case 536870912:n=bm;break;default:n=Xa}n=Kf(n,Ff.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ff(e,t){if(Ka=-1,Va=0,Re&6)throw Error(te(327));var n=e.callbackNode;if(Ks()&&e.callbackNode!==n)return null;var r=el(e,e===mt?pt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=yl(e,r);else{t=r;var a=Re;Re|=2;var l=Bf();(mt!==e||pt!==t)&&(wn=null,er=st()+500,xs(e,t));do try{tx();break}catch(c){_f(e,c)}while(!0);bc(),hl.current=l,Re=a,rt!==null?t=0:(mt=null,pt=0,t=it)}if(t!==0){if(t===2&&(a=ai(e),a!==0&&(r=a,t=$i(e,a))),t===1)throw n=ea,xs(e,0),On(e,r),At(e,st()),n;if(t===6)On(e,r);else{if(a=e.current.alternate,!(r&30)&&!X0(a)&&(t=yl(e,r),t===2&&(l=ai(e),l!==0&&(r=l,t=$i(e,l))),t===1))throw n=ea,xs(e,0),On(e,r),At(e,st()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(te(345));case 2:cs(e,Pt,wn);break;case 3:if(On(e,r),(r&130023424)===r&&(t=Uc+500-st(),10<t)){if(el(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){St(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=fi(cs.bind(null,e,Pt,wn),t);break}cs(e,Pt,wn);break;case 4:if(On(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-sn(r);l=1<<o,o=t[o],o>a&&(a=o),r&=~l}if(r=a,r=st()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Z0(r/1960))-r,10<r){e.timeoutHandle=fi(cs.bind(null,e,Pt,wn),r);break}cs(e,Pt,wn);break;case 5:cs(e,Pt,wn);break;default:throw Error(te(329))}}}return At(e,st()),e.callbackNode===n?Ff.bind(null,e):null}function $i(e,t){var n=Dr;return e.current.memoizedState.isDehydrated&&(xs(e,t).flags|=256),e=yl(e,t),e!==2&&(t=Pt,Pt=n,t!==null&&Ii(t)),e}function Ii(e){Pt===null?Pt=e:Pt.push.apply(Pt,e)}function X0(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],l=a.getSnapshot;a=a.value;try{if(!an(l(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function On(e,t){for(t&=~Ic,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-sn(t),r=1<<n;e[n]=-1,t&=~r}}function td(e){if(Re&6)throw Error(te(327));Ks();var t=el(e,0);if(!(t&1))return At(e,st()),null;var n=yl(e,t);if(e.tag!==0&&n===2){var r=ai(e);r!==0&&(t=r,n=$i(e,r))}if(n===1)throw n=ea,xs(e,0),On(e,t),At(e,st()),n;if(n===6)throw Error(te(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,cs(e,Pt,wn),At(e,st()),null}function Dc(e,t){var n=Re;Re|=1;try{return e(t)}finally{Re=n,Re===0&&(er=st()+500,$l&&ss())}}function Ns(e){Bn!==null&&Bn.tag===0&&!(Re&6)&&Ks();var t=Re;Re|=1;var n=Wt.transition,r=ze;try{if(Wt.transition=null,ze=1,e)return e()}finally{ze=r,Wt.transition=n,Re=t,!(Re&6)&&ss()}}function Mc(){It=_s.current,qe(_s)}function xs(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,T0(n)),rt!==null)for(n=rt.return;n!==null;){var r=n;switch(gc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&al();break;case 3:Zs(),qe(Rt),qe(jt),Cc();break;case 5:kc(r);break;case 4:Zs();break;case 13:qe(Qe);break;case 19:qe(Qe);break;case 10:wc(r.type._context);break;case 22:case 23:Mc()}n=n.return}if(mt=e,rt=e=Qn(e.current,null),pt=It=t,it=0,ea=null,Ic=Ml=js=0,Pt=Dr=null,ms!==null){for(t=0;t<ms.length;t++)if(n=ms[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,l=n.pending;if(l!==null){var o=l.next;l.next=a,r.next=o}n.pending=r}ms=null}return e}function _f(e,t){do{var n=rt;try{if(bc(),Ga.current=pl,fl){for(var r=Ye.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}fl=!1}if(ws=0,dt=ot=Ye=null,Ir=!1,Yr=0,$c.current=null,n===null||n.return===null){it=1,ea=t,rt=null;break}e:{var l=e,o=n.return,c=n,u=t;if(t=pt,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,h=c,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=zu(o);if(v!==null){v.flags&=-257,Gu(v,o,c,l,t),v.mode&1&&Bu(l,d,t),t=v,u=d;var b=t.updateQueue;if(b===null){var y=new Set;y.add(u),t.updateQueue=y}else b.add(u);break e}else{if(!(t&1)){Bu(l,d,t),Oc();break e}u=Error(te(426))}}else if(Je&&c.mode&1){var N=zu(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),Gu(N,o,c,l,t),yc(Xs(u,c));break e}}l=u=Xs(u,c),it!==4&&(it=2),Dr===null?Dr=[l]:Dr.push(l),l=o;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var x=Nf(l,u,t);Uu(l,x);break e;case 1:c=u;var p=l.type,m=l.stateNode;if(!(l.flags&128)&&(typeof p.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(qn===null||!qn.has(m)))){l.flags|=65536,t&=-t,l.lanes|=t;var E=Sf(l,c,t);Uu(l,E);break e}}l=l.return}while(l!==null)}Gf(n)}catch(k){t=k,rt===n&&n!==null&&(rt=n=n.return);continue}break}while(!0)}function Bf(){var e=hl.current;return hl.current=pl,e===null?pl:e}function Oc(){(it===0||it===3||it===2)&&(it=4),mt===null||!(js&268435455)&&!(Ml&268435455)||On(mt,pt)}function yl(e,t){var n=Re;Re|=2;var r=Bf();(mt!==e||pt!==t)&&(wn=null,xs(e,t));do try{ex();break}catch(a){_f(e,a)}while(!0);if(bc(),Re=n,hl.current=r,rt!==null)throw Error(te(261));return mt=null,pt=0,it}function ex(){for(;rt!==null;)zf(rt)}function tx(){for(;rt!==null&&!Ch();)zf(rt)}function zf(e){var t=Hf(e.alternate,e,It);e.memoizedProps=e.pendingProps,t===null?Gf(e):rt=t,$c.current=null}function Gf(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=q0(n,t),n!==null){n.flags&=32767,rt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{it=6,rt=null;return}}else if(n=V0(n,t,It),n!==null){rt=n;return}if(t=t.sibling,t!==null){rt=t;return}rt=t=e}while(t!==null);it===0&&(it=5)}function cs(e,t,n){var r=ze,a=Wt.transition;try{Wt.transition=null,ze=1,nx(e,t,n,r)}finally{Wt.transition=a,ze=r}return null}function nx(e,t,n,r){do Ks();while(Bn!==null);if(Re&6)throw Error(te(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(te(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(Dh(e,l),e===mt&&(rt=mt=null,pt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Pa||(Pa=!0,Kf(Xa,function(){return Ks(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Wt.transition,Wt.transition=null;var o=ze;ze=1;var c=Re;Re|=4,$c.current=null,Q0(e,n),Mf(n,e),j0(di),tl=!!ui,di=ui=null,e.current=n,Y0(n),Eh(),Re=c,ze=o,Wt.transition=l}else e.current=n;if(Pa&&(Pa=!1,Bn=e,gl=a),l=e.pendingLanes,l===0&&(qn=null),Rh(n.stateNode),At(e,st()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(xl)throw xl=!1,e=Li,Li=null,e;return gl&1&&e.tag!==0&&Ks(),l=e.pendingLanes,l&1?e===Ai?Mr++:(Mr=0,Ai=e):Mr=0,ss(),null}function Ks(){if(Bn!==null){var e=jm(gl),t=Wt.transition,n=ze;try{if(Wt.transition=null,ze=16>e?16:e,Bn===null)var r=!1;else{if(e=Bn,Bn=null,gl=0,Re&6)throw Error(te(331));var a=Re;for(Re|=4,me=e.current;me!==null;){var l=me,o=l.child;if(me.flags&16){var c=l.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(me=d;me!==null;){var h=me;switch(h.tag){case 0:case 11:case 15:Ur(8,h,l)}var f=h.child;if(f!==null)f.return=h,me=f;else for(;me!==null;){h=me;var g=h.sibling,v=h.return;if(If(h),h===d){me=null;break}if(g!==null){g.return=v,me=g;break}me=v}}}var b=l.alternate;if(b!==null){var y=b.child;if(y!==null){b.child=null;do{var N=y.sibling;y.sibling=null,y=N}while(y!==null)}}me=l}}if(l.subtreeFlags&2064&&o!==null)o.return=l,me=o;else e:for(;me!==null;){if(l=me,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Ur(9,l,l.return)}var x=l.sibling;if(x!==null){x.return=l.return,me=x;break e}me=l.return}}var p=e.current;for(me=p;me!==null;){o=me;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,me=m;else e:for(o=p;me!==null;){if(c=me,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Dl(9,c)}}catch(k){et(c,c.return,k)}if(c===o){me=null;break e}var E=c.sibling;if(E!==null){E.return=c.return,me=E;break e}me=c.return}}if(Re=a,ss(),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(Pl,e)}catch{}r=!0}return r}finally{ze=n,Wt.transition=t}}return!1}function nd(e,t,n){t=Xs(n,t),t=Nf(e,t,1),e=Vn(e,t,1),t=St(),e!==null&&(aa(e,1,t),At(e,t))}function et(e,t,n){if(e.tag===3)nd(e,e,n);else for(;t!==null;){if(t.tag===3){nd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(qn===null||!qn.has(r))){e=Xs(n,e),e=Sf(t,e,1),t=Vn(t,e,1),e=St(),t!==null&&(aa(t,1,e),At(t,e));break}}t=t.return}}function sx(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=St(),e.pingedLanes|=e.suspendedLanes&n,mt===e&&(pt&n)===n&&(it===4||it===3&&(pt&130023424)===pt&&500>st()-Uc?xs(e,0):Ic|=n),At(e,t)}function Wf(e,t){t===0&&(e.mode&1?(t=ya,ya<<=1,!(ya&130023424)&&(ya=4194304)):t=1);var n=St();e=Tn(e,t),e!==null&&(aa(e,t,n),At(e,n))}function rx(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Wf(e,n)}function ax(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(te(314))}r!==null&&r.delete(t),Wf(e,n)}var Hf;Hf=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Rt.current)Tt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Tt=!1,K0(e,t,n);Tt=!!(e.flags&131072)}else Tt=!1,Je&&t.flags&1048576&&qm(t,il,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ha(e,t),e=t.pendingProps;var a=Js(t,jt.current);Hs(t,n),a=Pc(null,t,r,e,a,n);var l=Tc();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Lt(r)?(l=!0,ll(t)):l=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Nc(t),a.updater=Ul,t.stateNode=a,a._reactInternals=t,bi(t,r,e,n),t=Ni(null,t,r,!0,l,n)):(t.tag=0,Je&&l&&xc(t),Nt(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ha(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=ox(r),e=en(r,e),a){case 0:t=ji(null,t,r,e,n);break e;case 1:t=Ku(null,t,r,e,n);break e;case 11:t=Wu(null,t,r,e,n);break e;case 14:t=Hu(null,t,r,en(r.type,e),n);break e}throw Error(te(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:en(r,a),ji(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:en(r,a),Ku(e,t,r,a,n);case 3:e:{if(Pf(t),e===null)throw Error(te(387));r=t.pendingProps,l=t.memoizedState,a=l.element,ef(e,t),dl(t,r,null,n);var o=t.memoizedState;if(r=o.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){a=Xs(Error(te(423)),t),t=Vu(e,t,r,n,a);break e}else if(r!==a){a=Xs(Error(te(424)),t),t=Vu(e,t,r,n,a);break e}else for(Ut=Kn(t.stateNode.containerInfo.firstChild),Dt=t,Je=!0,nn=null,n=Zm(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qs(),r===a){t=Rn(e,t,n);break e}Nt(e,t,r,n)}t=t.child}return t;case 5:return tf(t),e===null&&gi(t),r=t.type,a=t.pendingProps,l=e!==null?e.memoizedProps:null,o=a.children,mi(r,a)?o=null:l!==null&&mi(r,l)&&(t.flags|=32),Ef(e,t),Nt(e,t,o,n),t.child;case 6:return e===null&&gi(t),null;case 13:return Tf(e,t,n);case 4:return Sc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ys(t,null,r,n):Nt(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:en(r,a),Wu(e,t,r,a,n);case 7:return Nt(e,t,t.pendingProps,n),t.child;case 8:return Nt(e,t,t.pendingProps.children,n),t.child;case 12:return Nt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,l=t.memoizedProps,o=a.value,He(cl,r._currentValue),r._currentValue=o,l!==null)if(an(l.value,o)){if(l.children===a.children&&!Rt.current){t=Rn(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var c=l.dependencies;if(c!==null){o=l.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(l.tag===1){u=kn(-1,n&-n),u.tag=2;var d=l.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?u.next=u:(u.next=h.next,h.next=u),d.pending=u}}l.lanes|=n,u=l.alternate,u!==null&&(u.lanes|=n),yi(l.return,n,t),c.lanes|=n;break}u=u.next}}else if(l.tag===10)o=l.type===t.type?null:l.child;else if(l.tag===18){if(o=l.return,o===null)throw Error(te(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),yi(o,n,t),o=l.sibling}else o=l.child;if(o!==null)o.return=l;else for(o=l;o!==null;){if(o===t){o=null;break}if(l=o.sibling,l!==null){l.return=o.return,o=l;break}o=o.return}l=o}Nt(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Hs(t,n),a=Ht(a),r=r(a),t.flags|=1,Nt(e,t,r,n),t.child;case 14:return r=t.type,a=en(r,t.pendingProps),a=en(r.type,a),Hu(e,t,r,a,n);case 15:return kf(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:en(r,a),Ha(e,t),t.tag=1,Lt(r)?(e=!0,ll(t)):e=!1,Hs(t,n),jf(t,r,a),bi(t,r,a,n),Ni(null,t,r,!0,e,n);case 19:return Rf(e,t,n);case 22:return Cf(e,t,n)}throw Error(te(156,t.tag))};function Kf(e,t){return ym(e,t)}function lx(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gt(e,t,n,r){return new lx(e,t,n,r)}function Fc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ox(e){if(typeof e=="function")return Fc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===rc)return 11;if(e===ac)return 14}return 2}function Qn(e,t){var n=e.alternate;return n===null?(n=Gt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function qa(e,t,n,r,a,l){var o=2;if(r=e,typeof e=="function")Fc(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Rs:return gs(n.children,a,l,t);case sc:o=8,a|=8;break;case Wo:return e=Gt(12,n,t,a|2),e.elementType=Wo,e.lanes=l,e;case Ho:return e=Gt(13,n,t,a),e.elementType=Ho,e.lanes=l,e;case Ko:return e=Gt(19,n,t,a),e.elementType=Ko,e.lanes=l,e;case tm:return Ol(n,a,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Xd:o=10;break e;case em:o=9;break e;case rc:o=11;break e;case ac:o=14;break e;case Un:o=16,r=null;break e}throw Error(te(130,e==null?e:typeof e,""))}return t=Gt(o,n,t,a),t.elementType=e,t.type=r,t.lanes=l,t}function gs(e,t,n,r){return e=Gt(7,e,r,t),e.lanes=n,e}function Ol(e,t,n,r){return e=Gt(22,e,r,t),e.elementType=tm,e.lanes=n,e.stateNode={isHidden:!1},e}function No(e,t,n){return e=Gt(6,e,null,t),e.lanes=n,e}function So(e,t,n){return t=Gt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ix(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=so(0),this.expirationTimes=so(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=so(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function _c(e,t,n,r,a,l,o,c,u){return e=new ix(e,t,n,c,u),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Gt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nc(l),e}function cx(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ts,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Vf(e){if(!e)return Xn;e=e._reactInternals;e:{if(ks(e)!==e||e.tag!==1)throw Error(te(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Lt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(te(171))}if(e.tag===1){var n=e.type;if(Lt(n))return Km(e,n,t)}return t}function qf(e,t,n,r,a,l,o,c,u){return e=_c(n,r,!0,e,a,l,o,c,u),e.context=Vf(null),n=e.current,r=St(),a=Jn(n),l=kn(r,a),l.callback=t??null,Vn(n,l,a),e.current.lanes=a,aa(e,a,r),At(e,r),e}function Fl(e,t,n,r){var a=t.current,l=St(),o=Jn(a);return n=Vf(n),t.context===null?t.context=n:t.pendingContext=n,t=kn(l,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Vn(a,t,o),e!==null&&(rn(e,a,o,l),za(e,a,o)),o}function vl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function sd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Bc(e,t){sd(e,t),(e=e.alternate)&&sd(e,t)}function ux(){return null}var Jf=typeof reportError=="function"?reportError:function(e){console.error(e)};function zc(e){this._internalRoot=e}_l.prototype.render=zc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(te(409));Fl(e,t,null,null)};_l.prototype.unmount=zc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ns(function(){Fl(null,e,null,null)}),t[Pn]=null}};function _l(e){this._internalRoot=e}_l.prototype.unstable_scheduleHydration=function(e){if(e){var t=km();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Mn.length&&t!==0&&t<Mn[n].priority;n++);Mn.splice(n,0,e),n===0&&Em(e)}};function Gc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Bl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function rd(){}function dx(e,t,n,r,a){if(a){if(typeof r=="function"){var l=r;r=function(){var d=vl(o);l.call(d)}}var o=qf(t,r,e,0,null,!1,!1,"",rd);return e._reactRootContainer=o,e[Pn]=o.current,Kr(e.nodeType===8?e.parentNode:e),Ns(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var c=r;r=function(){var d=vl(u);c.call(d)}}var u=_c(e,0,!1,null,null,!1,!1,"",rd);return e._reactRootContainer=u,e[Pn]=u.current,Kr(e.nodeType===8?e.parentNode:e),Ns(function(){Fl(t,u,n,r)}),u}function zl(e,t,n,r,a){var l=n._reactRootContainer;if(l){var o=l;if(typeof a=="function"){var c=a;a=function(){var u=vl(o);c.call(u)}}Fl(t,o,e,a)}else o=dx(n,t,e,a,r);return vl(o)}Nm=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=kr(t.pendingLanes);n!==0&&(ic(t,n|1),At(t,st()),!(Re&6)&&(er=st()+500,ss()))}break;case 13:Ns(function(){var r=Tn(e,1);if(r!==null){var a=St();rn(r,e,1,a)}}),Bc(e,1)}};cc=function(e){if(e.tag===13){var t=Tn(e,134217728);if(t!==null){var n=St();rn(t,e,134217728,n)}Bc(e,134217728)}};Sm=function(e){if(e.tag===13){var t=Jn(e),n=Tn(e,t);if(n!==null){var r=St();rn(n,e,t,r)}Bc(e,t)}};km=function(){return ze};Cm=function(e,t){var n=ze;try{return ze=e,t()}finally{ze=n}};ni=function(e,t,n){switch(t){case"input":if(Jo(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=Al(r);if(!a)throw Error(te(90));sm(r),Jo(r,a)}}}break;case"textarea":am(e,n);break;case"select":t=n.value,t!=null&&Bs(e,!!n.multiple,t,!1)}};mm=Dc;fm=Ns;var mx={usingClientEntryPoint:!1,Events:[oa,Is,Al,um,dm,Dc]},yr={findFiberByHostInstance:ds,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fx={bundleType:yr.bundleType,version:yr.version,rendererPackageName:yr.rendererPackageName,rendererConfig:yr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:An.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=xm(e),e===null?null:e.stateNode},findFiberByHostInstance:yr.findFiberByHostInstance||ux,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ta=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ta.isDisabled&&Ta.supportsFiber)try{Pl=Ta.inject(fx),mn=Ta}catch{}}Ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mx;Ot.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gc(t))throw Error(te(200));return cx(e,t,null,n)};Ot.createRoot=function(e,t){if(!Gc(e))throw Error(te(299));var n=!1,r="",a=Jf;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=_c(e,1,!1,null,null,n,!1,r,a),e[Pn]=t.current,Kr(e.nodeType===8?e.parentNode:e),new zc(t)};Ot.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(te(188)):(e=Object.keys(e).join(","),Error(te(268,e)));return e=xm(t),e=e===null?null:e.stateNode,e};Ot.flushSync=function(e){return Ns(e)};Ot.hydrate=function(e,t,n){if(!Bl(t))throw Error(te(200));return zl(null,e,t,!0,n)};Ot.hydrateRoot=function(e,t,n){if(!Gc(e))throw Error(te(405));var r=n!=null&&n.hydratedSources||null,a=!1,l="",o=Jf;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=qf(t,null,e,1,n??null,a,!1,l,o),e[Pn]=t.current,Kr(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new _l(t)};Ot.render=function(e,t,n){if(!Bl(t))throw Error(te(200));return zl(null,e,t,!1,n)};Ot.unmountComponentAtNode=function(e){if(!Bl(e))throw Error(te(40));return e._reactRootContainer?(Ns(function(){zl(null,null,e,!1,function(){e._reactRootContainer=null,e[Pn]=null})}),!0):!1};Ot.unstable_batchedUpdates=Dc;Ot.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Bl(n))throw Error(te(200));if(e==null||e._reactInternals===void 0)throw Error(te(38));return zl(e,t,n,!1,r)};Ot.version="18.3.1-next-f1338f8080-20240426";function Qf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Qf)}catch(e){console.error(e)}}Qf(),Jd.exports=Ot;var Yf=Jd.exports,ad=Yf;zo.createRoot=ad.createRoot,zo.hydrateRoot=ad.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ta(){return ta=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ta.apply(this,arguments)}var zn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(zn||(zn={}));const ld="popstate";function px(e){e===void 0&&(e={});function t(r,a){let{pathname:l,search:o,hash:c}=r.location;return Ui("",{pathname:l,search:o,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:bl(a)}return xx(t,n,null,e)}function tt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Wc(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function hx(){return Math.random().toString(36).substr(2,8)}function od(e,t){return{usr:e.state,key:e.key,idx:t}}function Ui(e,t,n,r){return n===void 0&&(n=null),ta({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?lr(t):t,{state:n,key:t&&t.key||r||hx()})}function bl(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function lr(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function xx(e,t,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:l=!1}=r,o=a.history,c=zn.Pop,u=null,d=h();d==null&&(d=0,o.replaceState(ta({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function f(){c=zn.Pop;let N=h(),x=N==null?null:N-d;d=N,u&&u({action:c,location:y.location,delta:x})}function g(N,x){c=zn.Push;let p=Ui(y.location,N,x);d=h()+1;let m=od(p,d),E=y.createHref(p);try{o.pushState(m,"",E)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;a.location.assign(E)}l&&u&&u({action:c,location:y.location,delta:1})}function v(N,x){c=zn.Replace;let p=Ui(y.location,N,x);d=h();let m=od(p,d),E=y.createHref(p);o.replaceState(m,"",E),l&&u&&u({action:c,location:y.location,delta:0})}function b(N){let x=a.location.origin!=="null"?a.location.origin:a.location.href,p=typeof N=="string"?N:bl(N);return p=p.replace(/ $/,"%20"),tt(x,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,x)}let y={get action(){return c},get location(){return e(a,o)},listen(N){if(u)throw new Error("A history only accepts one active listener");return a.addEventListener(ld,f),u=N,()=>{a.removeEventListener(ld,f),u=null}},createHref(N){return t(a,N)},createURL:b,encodeLocation(N){let x=b(N);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:g,replace:v,go(N){return o.go(N)}};return y}var id;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(id||(id={}));function gx(e,t,n){return n===void 0&&(n="/"),yx(e,t,n)}function yx(e,t,n,r){let a=typeof t=="string"?lr(t):t,l=tr(a.pathname||"/",n);if(l==null)return null;let o=Zf(e);vx(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=Rx(l);c=Px(o[u],d)}return c}function Zf(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(l,o,c)=>{let u={relativePath:c===void 0?l.path||"":c,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};u.relativePath.startsWith("/")&&(tt(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=Yn([r,u.relativePath]),h=n.concat(u);l.children&&l.children.length>0&&(tt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Zf(l.children,t,h,d)),!(l.path==null&&!l.index)&&t.push({path:d,score:Cx(d,l.index),routesMeta:h})};return e.forEach((l,o)=>{var c;if(l.path===""||!((c=l.path)!=null&&c.includes("?")))a(l,o);else for(let u of Xf(l.path))a(l,o,u)}),t}function Xf(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,a=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let o=Xf(r.join("/")),c=[];return c.push(...o.map(u=>u===""?l:[l,u].join("/"))),a&&c.push(...o),c.map(u=>e.startsWith("/")&&u===""?"/":u)}function vx(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Ex(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const bx=/^:[\w-]+$/,wx=3,jx=2,Nx=1,Sx=10,kx=-2,cd=e=>e==="*";function Cx(e,t){let n=e.split("/"),r=n.length;return n.some(cd)&&(r+=kx),t&&(r+=jx),n.filter(a=>!cd(a)).reduce((a,l)=>a+(bx.test(l)?wx:l===""?Nx:Sx),r)}function Ex(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function Px(e,t,n){let{routesMeta:r}=e,a={},l="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,h=l==="/"?t:t.slice(l.length)||"/",f=Di({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),g=u.route;if(!f)return null;Object.assign(a,f.params),o.push({params:a,pathname:Yn([l,f.pathname]),pathnameBase:Ux(Yn([l,f.pathnameBase])),route:g}),f.pathnameBase!=="/"&&(l=Yn([l,f.pathnameBase]))}return o}function Di(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Tx(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let l=a[0],o=l.replace(/(.)\/+$/,"$1"),c=a.slice(1);return{params:r.reduce((d,h,f)=>{let{paramName:g,isOptional:v}=h;if(g==="*"){let y=c[f]||"";o=l.slice(0,l.length-y.length).replace(/(.)\/+$/,"$1")}const b=c[f];return v&&!b?d[g]=void 0:d[g]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:l,pathnameBase:o,pattern:e}}function Tx(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Wc(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function Rx(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Wc(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function tr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const Lx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ax=e=>Lx.test(e);function $x(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?lr(e):e,l;if(n)if(Ax(n))l=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Wc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?l=ud(n.substring(1),"/"):l=ud(n,t)}else l=t;return{pathname:l,search:Dx(r),hash:Mx(a)}}function ud(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function ko(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ix(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function ep(e,t){let n=Ix(e);return t?n.map((r,a)=>a===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function tp(e,t,n,r){r===void 0&&(r=!1);let a;typeof e=="string"?a=lr(e):(a=ta({},e),tt(!a.pathname||!a.pathname.includes("?"),ko("?","pathname","search",a)),tt(!a.pathname||!a.pathname.includes("#"),ko("#","pathname","hash",a)),tt(!a.search||!a.search.includes("#"),ko("#","search","hash",a)));let l=e===""||a.pathname==="",o=l?"/":a.pathname,c;if(o==null)c=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),f-=1;a.pathname=g.join("/")}c=f>=0?t[f]:"/"}let u=$x(a,c),d=o&&o!=="/"&&o.endsWith("/"),h=(l||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}const Yn=e=>e.join("/").replace(/\/\/+/g,"/"),Ux=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Dx=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Mx=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Ox(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const np=["post","put","patch","delete"];new Set(np);const Fx=["get",...np];new Set(Fx);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function na(){return na=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},na.apply(this,arguments)}const Gl=i.createContext(null),sp=i.createContext(null),rs=i.createContext(null),Wl=i.createContext(null),as=i.createContext({outlet:null,matches:[],isDataRoute:!1}),rp=i.createContext(null);function _x(e,t){let{relative:n}=t===void 0?{}:t;ca()||tt(!1);let{basename:r,navigator:a}=i.useContext(rs),{hash:l,pathname:o,search:c}=Hl(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Yn([r,o])),a.createHref({pathname:u,search:c,hash:l})}function ca(){return i.useContext(Wl)!=null}function or(){return ca()||tt(!1),i.useContext(Wl).location}function ap(e){i.useContext(rs).static||i.useLayoutEffect(e)}function Vt(){let{isDataRoute:e}=i.useContext(as);return e?Xx():Bx()}function Bx(){ca()||tt(!1);let e=i.useContext(Gl),{basename:t,future:n,navigator:r}=i.useContext(rs),{matches:a}=i.useContext(as),{pathname:l}=or(),o=JSON.stringify(ep(a,n.v7_relativeSplatPath)),c=i.useRef(!1);return ap(()=>{c.current=!0}),i.useCallback(function(d,h){if(h===void 0&&(h={}),!c.current)return;if(typeof d=="number"){r.go(d);return}let f=tp(d,JSON.parse(o),l,h.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Yn([t,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[t,r,o,l,e])}function ir(){let{matches:e}=i.useContext(as),t=e[e.length-1];return t?t.params:{}}function Hl(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=i.useContext(rs),{matches:a}=i.useContext(as),{pathname:l}=or(),o=JSON.stringify(ep(a,r.v7_relativeSplatPath));return i.useMemo(()=>tp(e,JSON.parse(o),l,n==="path"),[e,o,l,n])}function zx(e,t){return Gx(e,t)}function Gx(e,t,n,r){ca()||tt(!1);let{navigator:a}=i.useContext(rs),{matches:l}=i.useContext(as),o=l[l.length-1],c=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=or(),h;if(t){var f;let N=typeof t=="string"?lr(t):t;u==="/"||(f=N.pathname)!=null&&f.startsWith(u)||tt(!1),h=N}else h=d;let g=h.pathname||"/",v=g;if(u!=="/"){let N=u.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(N.length).join("/")}let b=gx(e,{pathname:v}),y=qx(b&&b.map(N=>Object.assign({},N,{params:Object.assign({},c,N.params),pathname:Yn([u,a.encodeLocation?a.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?u:Yn([u,a.encodeLocation?a.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),l,n,r);return t&&y?i.createElement(Wl.Provider,{value:{location:na({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:zn.Pop}},y):y}function Wx(){let e=Zx(),t=Ox(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:a},n):null,null)}const Hx=i.createElement(Wx,null);class Kx extends i.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?i.createElement(as.Provider,{value:this.props.routeContext},i.createElement(rp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Vx(e){let{routeContext:t,match:n,children:r}=e,a=i.useContext(Gl);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(as.Provider,{value:t},r)}function qx(e,t,n,r){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var l;if(!n)return null;if(n.errors)e=n.matches;else if((l=r)!=null&&l.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,c=(a=n)==null?void 0:a.errors;if(c!=null){let h=o.findIndex(f=>f.route.id&&(c==null?void 0:c[f.route.id])!==void 0);h>=0||tt(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=h),f.route.id){let{loaderData:g,errors:v}=n,b=f.route.loader&&g[f.route.id]===void 0&&(!v||v[f.route.id]===void 0);if(f.route.lazy||b){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,f,g)=>{let v,b=!1,y=null,N=null;n&&(v=c&&f.route.id?c[f.route.id]:void 0,y=f.route.errorElement||Hx,u&&(d<0&&g===0?(eg("route-fallback"),b=!0,N=null):d===g&&(b=!0,N=f.route.hydrateFallbackElement||null)));let x=t.concat(o.slice(0,g+1)),p=()=>{let m;return v?m=y:b?m=N:f.route.Component?m=i.createElement(f.route.Component,null):f.route.element?m=f.route.element:m=h,i.createElement(Vx,{match:f,routeContext:{outlet:h,matches:x,isDataRoute:n!=null},children:m})};return n&&(f.route.ErrorBoundary||f.route.errorElement||g===0)?i.createElement(Kx,{location:n.location,revalidation:n.revalidation,component:y,error:v,children:p(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):p()},null)}var lp=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(lp||{}),op=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(op||{});function Jx(e){let t=i.useContext(Gl);return t||tt(!1),t}function Qx(e){let t=i.useContext(sp);return t||tt(!1),t}function Yx(e){let t=i.useContext(as);return t||tt(!1),t}function ip(e){let t=Yx(),n=t.matches[t.matches.length-1];return n.route.id||tt(!1),n.route.id}function Zx(){var e;let t=i.useContext(rp),n=Qx(),r=ip();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function Xx(){let{router:e}=Jx(lp.UseNavigateStable),t=ip(op.UseNavigateStable),n=i.useRef(!1);return ap(()=>{n.current=!0}),i.useCallback(function(a,l){l===void 0&&(l={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,na({fromRouteId:t},l)))},[e,t])}const dd={};function eg(e,t,n){dd[e]||(dd[e]=!0)}function tg(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Me(e){tt(!1)}function ng(e){let{basename:t="/",children:n=null,location:r,navigationType:a=zn.Pop,navigator:l,static:o=!1,future:c}=e;ca()&&tt(!1);let u=t.replace(/^\/*/,"/"),d=i.useMemo(()=>({basename:u,navigator:l,static:o,future:na({v7_relativeSplatPath:!1},c)}),[u,c,l,o]);typeof r=="string"&&(r=lr(r));let{pathname:h="/",search:f="",hash:g="",state:v=null,key:b="default"}=r,y=i.useMemo(()=>{let N=tr(h,u);return N==null?null:{location:{pathname:N,search:f,hash:g,state:v,key:b},navigationType:a}},[u,h,f,g,v,b,a]);return y==null?null:i.createElement(rs.Provider,{value:d},i.createElement(Wl.Provider,{children:n,value:y}))}function sg(e){let{children:t,location:n}=e;return zx(Mi(t),n)}new Promise(()=>{});function Mi(e,t){t===void 0&&(t=[]);let n=[];return i.Children.forEach(e,(r,a)=>{if(!i.isValidElement(r))return;let l=[...t,a];if(r.type===i.Fragment){n.push.apply(n,Mi(r.props.children,l));return}r.type!==Me&&tt(!1),!r.props.index||!r.props.children||tt(!1);let o={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Mi(r.props.children,l)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wl(){return wl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wl.apply(this,arguments)}function cp(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,l;for(l=0;l<r.length;l++)a=r[l],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function rg(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function ag(e,t){return e.button===0&&(!t||t==="_self")&&!rg(e)}function Oi(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(a=>[n,a]):[[n,r]])},[]))}function lg(e,t){let n=Oi(e);return t&&t.forEach((r,a)=>{n.has(a)||t.getAll(a).forEach(l=>{n.append(a,l)})}),n}const og=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ig=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],cg="6";try{window.__reactRouterVersion=cg}catch{}const ug=i.createContext({isTransitioning:!1}),dg="startTransition",md=Vs[dg];function mg(e){let{basename:t,children:n,future:r,window:a}=e,l=i.useRef();l.current==null&&(l.current=px({window:a,v5Compat:!0}));let o=l.current,[c,u]=i.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},h=i.useCallback(f=>{d&&md?md(()=>u(f)):u(f)},[u,d]);return i.useLayoutEffect(()=>o.listen(h),[o,h]),i.useEffect(()=>tg(r),[r]),i.createElement(ng,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:o,future:r})}const fg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,oe=i.forwardRef(function(t,n){let{onClick:r,relative:a,reloadDocument:l,replace:o,state:c,target:u,to:d,preventScrollReset:h,viewTransition:f}=t,g=cp(t,og),{basename:v}=i.useContext(rs),b,y=!1;if(typeof d=="string"&&pg.test(d)&&(b=d,fg))try{let m=new URL(window.location.href),E=d.startsWith("//")?new URL(m.protocol+d):new URL(d),k=tr(E.pathname,v);E.origin===m.origin&&k!=null?d=k+E.search+E.hash:y=!0}catch{}let N=_x(d,{relative:a}),x=xg(d,{replace:o,state:c,target:u,preventScrollReset:h,relative:a,viewTransition:f});function p(m){r&&r(m),m.defaultPrevented||x(m)}return i.createElement("a",wl({},g,{href:b||N,onClick:y||l?r:p,ref:n,target:u}))}),Yt=i.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:a=!1,className:l="",end:o=!1,style:c,to:u,viewTransition:d,children:h}=t,f=cp(t,ig),g=Hl(u,{relative:f.relative}),v=or(),b=i.useContext(sp),{navigator:y,basename:N}=i.useContext(rs),x=b!=null&&gg(g)&&d===!0,p=y.encodeLocation?y.encodeLocation(g).pathname:g.pathname,m=v.pathname,E=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;a||(m=m.toLowerCase(),E=E?E.toLowerCase():null,p=p.toLowerCase()),E&&N&&(E=tr(E,N)||E);const k=p!=="/"&&p.endsWith("/")?p.length-1:p.length;let C=m===p||!o&&m.startsWith(p)&&m.charAt(k)==="/",I=E!=null&&(E===p||!o&&E.startsWith(p)&&E.charAt(p.length)==="/"),A={isActive:C,isPending:I,isTransitioning:x},Z=C?r:void 0,M;typeof l=="function"?M=l(A):M=[l,C?"active":null,I?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let q=typeof c=="function"?c(A):c;return i.createElement(oe,wl({},f,{"aria-current":Z,className:M,ref:n,style:q,to:u,viewTransition:d}),typeof h=="function"?h(A):h)});var Fi;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Fi||(Fi={}));var fd;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(fd||(fd={}));function hg(e){let t=i.useContext(Gl);return t||tt(!1),t}function xg(e,t){let{target:n,replace:r,state:a,preventScrollReset:l,relative:o,viewTransition:c}=t===void 0?{}:t,u=Vt(),d=or(),h=Hl(e,{relative:o});return i.useCallback(f=>{if(ag(f,n)){f.preventDefault();let g=r!==void 0?r:bl(d)===bl(h);u(e,{replace:g,state:a,preventScrollReset:l,relative:o,viewTransition:c})}},[d,u,h,r,a,n,e,l,o,c])}function qt(e){let t=i.useRef(Oi(e)),n=i.useRef(!1),r=or(),a=i.useMemo(()=>lg(r.search,n.current?null:t.current),[r.search]),l=Vt(),o=i.useCallback((c,u)=>{const d=Oi(typeof c=="function"?c(a):c);n.current=!0,l("?"+d,u)},[l,a]);return[a,o]}function gg(e,t){t===void 0&&(t={});let n=i.useContext(ug);n==null&&tt(!1);let{basename:r}=hg(Fi.useViewTransitionState),a=Hl(e,{relative:t.relative});if(!n.isTransitioning)return!1;let l=tr(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=tr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Di(a.pathname,o)!=null||Di(a.pathname,l)!=null}function yg({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const Ge=i.forwardRef(yg);function vg({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const Hc=i.forwardRef(vg);function bg({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"}))}const wg=i.forwardRef(bg);function jg({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const Zt=i.forwardRef(jg);function Ng({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const Xt=i.forwardRef(Ng);function Sg({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))}const ua=i.forwardRef(Sg);function kg({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const Cg=i.forwardRef(kg);function Eg({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const Kl=i.forwardRef(Eg);var Pg=Object.defineProperty,Tg=(e,t,n)=>t in e?Pg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Co=(e,t,n)=>(Tg(e,typeof t!="symbol"?t+"":t,n),n);let Rg=class{constructor(){Co(this,"current",this.detect()),Co(this,"handoffState","pending"),Co(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Cn=new Rg,Ln=(e,t)=>{Cn.isServer?i.useEffect(e,t):i.useLayoutEffect(e,t)};function Vl(e){let t=i.useRef(e);return Ln(()=>{t.current=e},[e]),t}let wt=function(e){let t=Vl(e);return Ae.useCallback((...n)=>t.current(...n),[t])};function ql(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Jl(){let e=[],t={addEventListener(n,r,a,l){return n.addEventListener(r,a,l),t.add(()=>n.removeEventListener(r,a,l))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return ql(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,a){let l=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:a}),this.add(()=>{Object.assign(n.style,{[r]:l})})},group(n){let r=Jl();return n(r),this.add(()=>r.dispose())},add(n){return e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let a of e.splice(r,1))a()}},dispose(){for(let n of e.splice(0))n()}};return t}function Lg(){let[e]=i.useState(Jl);return i.useEffect(()=>()=>e.dispose(),[e]),e}function Ag(){let e=typeof document>"u";return"useSyncExternalStore"in Vs?(t=>t.useSyncExternalStore)(Vs)(()=>()=>{},()=>!1,()=>!e):!1}function Ql(){let e=Ag(),[t,n]=i.useState(Cn.isHandoffComplete);return t&&Cn.isHandoffComplete===!1&&n(!1),i.useEffect(()=>{t!==!0&&n(!0)},[t]),i.useEffect(()=>Cn.handoff(),[]),e?!1:t}var pd;let cr=(pd=Ae.useId)!=null?pd:function(){let e=Ql(),[t,n]=Ae.useState(e?()=>Cn.nextId():null);return Ln(()=>{t===null&&n(Cn.nextId())},[t]),t!=null?""+t:void 0};function es(e,t,...n){if(e in t){let a=t[e];return typeof a=="function"?a(...n):a}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(a=>`"${a}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,es),r}function up(e){return Cn.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}let _i=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var us=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(us||{}),dp=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(dp||{}),$g=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))($g||{});function Ig(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(_i)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var mp=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(mp||{});function Ug(e,t=0){var n;return e===((n=up(e))==null?void 0:n.body)?!1:es(t,{0(){return e.matches(_i)},1(){let r=e;for(;r!==null;){if(r.matches(_i))return!0;r=r.parentElement}return!1}})}var Dg=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(Dg||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function ys(e){e==null||e.focus({preventScroll:!0})}let Mg=["textarea","input"].join(",");function Og(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,Mg))!=null?n:!1}function Fg(e,t=n=>n){return e.slice().sort((n,r)=>{let a=t(n),l=t(r);if(a===null||l===null)return 0;let o=a.compareDocumentPosition(l);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Ja(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:a=[]}={}){let l=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,o=Array.isArray(e)?n?Fg(e):e:Ig(e);a.length>0&&o.length>1&&(o=o.filter(v=>!a.includes(v))),r=r??l.activeElement;let c=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,o.indexOf(r))-1;if(t&4)return Math.max(0,o.indexOf(r))+1;if(t&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=t&32?{preventScroll:!0}:{},h=0,f=o.length,g;do{if(h>=f||h+f<=0)return 0;let v=u+h;if(t&16)v=(v+f)%f;else{if(v<0)return 3;if(v>=f)return 1}g=o[v],g==null||g.focus(d),h+=c}while(g!==l.activeElement);return t&6&&Og(g)&&g.select(),2}function fp(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function _g(){return/Android/gi.test(window.navigator.userAgent)}function Bg(){return fp()||_g()}function Ra(e,t,n){let r=Vl(t);i.useEffect(()=>{function a(l){r.current(l)}return document.addEventListener(e,a,n),()=>document.removeEventListener(e,a,n)},[e,n])}function pp(e,t,n){let r=Vl(t);i.useEffect(()=>{function a(l){r.current(l)}return window.addEventListener(e,a,n),()=>window.removeEventListener(e,a,n)},[e,n])}function zg(e,t,n=!0){let r=i.useRef(!1);i.useEffect(()=>{requestAnimationFrame(()=>{r.current=n})},[n]);function a(o,c){if(!r.current||o.defaultPrevented)return;let u=c(o);if(u===null||!u.getRootNode().contains(u)||!u.isConnected)return;let d=function h(f){return typeof f=="function"?h(f()):Array.isArray(f)||f instanceof Set?f:[f]}(e);for(let h of d){if(h===null)continue;let f=h instanceof HTMLElement?h:h.current;if(f!=null&&f.contains(u)||o.composed&&o.composedPath().includes(f))return}return!Ug(u,mp.Loose)&&u.tabIndex!==-1&&o.preventDefault(),t(o,u)}let l=i.useRef(null);Ra("pointerdown",o=>{var c,u;r.current&&(l.current=((u=(c=o.composedPath)==null?void 0:c.call(o))==null?void 0:u[0])||o.target)},!0),Ra("mousedown",o=>{var c,u;r.current&&(l.current=((u=(c=o.composedPath)==null?void 0:c.call(o))==null?void 0:u[0])||o.target)},!0),Ra("click",o=>{Bg()||l.current&&(a(o,()=>l.current),l.current=null)},!0),Ra("touchend",o=>a(o,()=>o.target instanceof HTMLElement?o.target:null),!0),pp("blur",o=>a(o,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function da(...e){return i.useMemo(()=>up(...e),[...e])}let hp=Symbol();function Gg(e,t=!0){return Object.assign(e,{[hp]:t})}function $n(...e){let t=i.useRef(e);i.useEffect(()=>{t.current=e},[e]);let n=wt(r=>{for(let a of t.current)a!=null&&(typeof a=="function"?a(r):a.current=r)});return e.every(r=>r==null||(r==null?void 0:r[hp]))?void 0:n}function Kc(e,t){let n=i.useRef([]),r=wt(e);i.useEffect(()=>{let a=[...n.current];for(let[l,o]of t.entries())if(n.current[l]!==o){let c=r(t,a);return n.current=t,c}},[r,...t])}function hd(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}var Bi=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Bi||{}),Wg=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Wg||{});function hn({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:a,visible:l=!0,name:o,mergeRefs:c}){c=c??Hg;let u=xp(t,e);if(l)return La(u,n,r,o,c);let d=a??0;if(d&2){let{static:h=!1,...f}=u;if(h)return La(f,n,r,o,c)}if(d&1){let{unmount:h=!0,...f}=u;return es(h?0:1,{0(){return null},1(){return La({...f,hidden:!0,style:{display:"none"}},n,r,o,c)}})}return La(u,n,r,o,c)}function La(e,t={},n,r,a){let{as:l=n,children:o,refName:c="ref",...u}=Eo(e,["unmount","static"]),d=e.ref!==void 0?{[c]:e.ref}:{},h=typeof o=="function"?o(t):o;"className"in u&&u.className&&typeof u.className=="function"&&(u.className=u.className(t));let f={};if(t){let g=!1,v=[];for(let[b,y]of Object.entries(t))typeof y=="boolean"&&(g=!0),y===!0&&v.push(b);g&&(f["data-headlessui-state"]=v.join(" "))}if(l===i.Fragment&&Object.keys(xd(u)).length>0){if(!i.isValidElement(h)||Array.isArray(h)&&h.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(u).map(y=>`  - ${y}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(y=>`  - ${y}`).join(`
`)].join(`
`));let g=h.props,v=typeof(g==null?void 0:g.className)=="function"?(...y)=>hd(g==null?void 0:g.className(...y),u.className):hd(g==null?void 0:g.className,u.className),b=v?{className:v}:{};return i.cloneElement(h,Object.assign({},xp(h.props,xd(Eo(u,["ref"]))),f,d,{ref:a(h.ref,d.ref)},b))}return i.createElement(l,Object.assign({},Eo(u,["ref"]),l!==i.Fragment&&d,l!==i.Fragment&&f),h)}function Hg(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function xp(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let a in r)a.startsWith("on")&&typeof r[a]=="function"?(n[a]!=null||(n[a]=[]),n[a].push(r[a])):t[a]=r[a];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(n).map(r=>[r,void 0])));for(let r in n)Object.assign(t,{[r](a,...l){let o=n[r];for(let c of o){if((a instanceof Event||(a==null?void 0:a.nativeEvent)instanceof Event)&&a.defaultPrevented)return;c(a,...l)}}});return t}function xn(e){var t;return Object.assign(i.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function xd(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function Eo(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}let Kg="div";var jl=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(jl||{});function Vg(e,t){var n;let{features:r=1,...a}=e,l={ref:t,"aria-hidden":(r&2)===2?!0:(n=a["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return hn({ourProps:l,theirProps:a,slot:{},defaultTag:Kg,name:"Hidden"})}let zi=xn(Vg),gp=i.createContext(null);gp.displayName="OpenClosedContext";var Er=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Er||{});function qg(){return i.useContext(gp)}function Jg(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Fn=[];Jg(()=>{function e(t){t.target instanceof HTMLElement&&t.target!==document.body&&Fn[0]!==t.target&&(Fn.unshift(t.target),Fn=Fn.filter(n=>n!=null&&n.isConnected),Fn.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function Qg(e){let t=e.parentElement,n=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(n=t),t=t.parentElement;let r=(t==null?void 0:t.getAttribute("disabled"))==="";return r&&Yg(n)?!1:r}function Yg(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}var yp=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(yp||{});function vp(e,t,n,r){let a=Vl(n);i.useEffect(()=>{e=e??window;function l(o){a.current(o)}return e.addEventListener(t,l,r),()=>e.removeEventListener(t,l,r)},[e,t,r])}function bp(){let e=i.useRef(!1);return Ln(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function wp(e){let t=wt(e),n=i.useRef(!1);i.useEffect(()=>(n.current=!1,()=>{n.current=!0,ql(()=>{n.current&&t()})}),[t])}var Pr=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Pr||{});function Zg(){let e=i.useRef(0);return pp("keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function jp(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)n.current instanceof HTMLElement&&t.add(n.current);return t}let Xg="div";var Np=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(Np||{});function ey(e,t){let n=i.useRef(null),r=$n(n,t),{initialFocus:a,containers:l,features:o=30,...c}=e;Ql()||(o=1);let u=da(n);sy({ownerDocument:u},!!(o&16));let d=ry({ownerDocument:u,container:n,initialFocus:a},!!(o&2));ay({ownerDocument:u,container:n,containers:l,previousActiveElement:d},!!(o&8));let h=Zg(),f=wt(y=>{let N=n.current;N&&(x=>x())(()=>{es(h.current,{[Pr.Forwards]:()=>{Ja(N,us.First,{skipElements:[y.relatedTarget]})},[Pr.Backwards]:()=>{Ja(N,us.Last,{skipElements:[y.relatedTarget]})}})})}),g=Lg(),v=i.useRef(!1),b={ref:r,onKeyDown(y){y.key=="Tab"&&(v.current=!0,g.requestAnimationFrame(()=>{v.current=!1}))},onBlur(y){let N=jp(l);n.current instanceof HTMLElement&&N.add(n.current);let x=y.relatedTarget;x instanceof HTMLElement&&x.dataset.headlessuiFocusGuard!=="true"&&(Sp(N,x)||(v.current?Ja(n.current,es(h.current,{[Pr.Forwards]:()=>us.Next,[Pr.Backwards]:()=>us.Previous})|us.WrapAround,{relativeTo:y.target}):y.target instanceof HTMLElement&&ys(y.target)))}};return Ae.createElement(Ae.Fragment,null,!!(o&4)&&Ae.createElement(zi,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:f,features:jl.Focusable}),hn({ourProps:b,theirProps:c,defaultTag:Xg,name:"FocusTrap"}),!!(o&4)&&Ae.createElement(zi,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:f,features:jl.Focusable}))}let ty=xn(ey),vr=Object.assign(ty,{features:Np});function ny(e=!0){let t=i.useRef(Fn.slice());return Kc(([n],[r])=>{r===!0&&n===!1&&ql(()=>{t.current.splice(0)}),r===!1&&n===!0&&(t.current=Fn.slice())},[e,Fn,t]),wt(()=>{var n;return(n=t.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function sy({ownerDocument:e},t){let n=ny(t);Kc(()=>{t||(e==null?void 0:e.activeElement)===(e==null?void 0:e.body)&&ys(n())},[t]),wp(()=>{t&&ys(n())})}function ry({ownerDocument:e,container:t,initialFocus:n},r){let a=i.useRef(null),l=bp();return Kc(()=>{if(!r)return;let o=t.current;o&&ql(()=>{if(!l.current)return;let c=e==null?void 0:e.activeElement;if(n!=null&&n.current){if((n==null?void 0:n.current)===c){a.current=c;return}}else if(o.contains(c)){a.current=c;return}n!=null&&n.current?ys(n.current):Ja(o,us.First)===dp.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),a.current=e==null?void 0:e.activeElement})},[r]),a}function ay({ownerDocument:e,container:t,containers:n,previousActiveElement:r},a){let l=bp();vp(e==null?void 0:e.defaultView,"focus",o=>{if(!a||!l.current)return;let c=jp(n);t.current instanceof HTMLElement&&c.add(t.current);let u=r.current;if(!u)return;let d=o.target;d&&d instanceof HTMLElement?Sp(c,d)?(r.current=d,ys(d)):(o.preventDefault(),o.stopPropagation(),ys(u)):ys(r.current)},!0)}function Sp(e,t){for(let n of e)if(n.contains(t))return!0;return!1}let kp=i.createContext(!1);function ly(){return i.useContext(kp)}function Gi(e){return Ae.createElement(kp.Provider,{value:e.force},e.children)}function oy(e){let t=ly(),n=i.useContext(Cp),r=da(e),[a,l]=i.useState(()=>{if(!t&&n!==null||Cn.isServer)return null;let o=r==null?void 0:r.getElementById("headlessui-portal-root");if(o)return o;if(r===null)return null;let c=r.createElement("div");return c.setAttribute("id","headlessui-portal-root"),r.body.appendChild(c)});return i.useEffect(()=>{a!==null&&(r!=null&&r.body.contains(a)||r==null||r.body.appendChild(a))},[a,r]),i.useEffect(()=>{t||n!==null&&l(n.current)},[n,l,t]),a}let iy=i.Fragment;function cy(e,t){let n=e,r=i.useRef(null),a=$n(Gg(h=>{r.current=h}),t),l=da(r),o=oy(r),[c]=i.useState(()=>{var h;return Cn.isServer?null:(h=l==null?void 0:l.createElement("div"))!=null?h:null}),u=i.useContext(Wi),d=Ql();return Ln(()=>{!o||!c||o.contains(c)||(c.setAttribute("data-headlessui-portal",""),o.appendChild(c))},[o,c]),Ln(()=>{if(c&&u)return u.register(c)},[u,c]),wp(()=>{var h;!o||!c||(c instanceof Node&&o.contains(c)&&o.removeChild(c),o.childNodes.length<=0&&((h=o.parentElement)==null||h.removeChild(o)))}),d?!o||!c?null:Yf.createPortal(hn({ourProps:{ref:a},theirProps:n,defaultTag:iy,name:"Portal"}),c):null}let uy=i.Fragment,Cp=i.createContext(null);function dy(e,t){let{target:n,...r}=e,a={ref:$n(t)};return Ae.createElement(Cp.Provider,{value:n},hn({ourProps:a,theirProps:r,defaultTag:uy,name:"Popover.Group"}))}let Wi=i.createContext(null);function my(){let e=i.useContext(Wi),t=i.useRef([]),n=wt(l=>(t.current.push(l),e&&e.register(l),()=>r(l))),r=wt(l=>{let o=t.current.indexOf(l);o!==-1&&t.current.splice(o,1),e&&e.unregister(l)}),a=i.useMemo(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,i.useMemo(()=>function({children:l}){return Ae.createElement(Wi.Provider,{value:a},l)},[a])]}let fy=xn(cy),py=xn(dy),Hi=Object.assign(fy,{Group:py});function hy(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}const xy=typeof Object.is=="function"?Object.is:hy,{useState:gy,useEffect:yy,useLayoutEffect:vy,useDebugValue:by}=Vs;function wy(e,t,n){const r=t(),[{inst:a},l]=gy({inst:{value:r,getSnapshot:t}});return vy(()=>{a.value=r,a.getSnapshot=t,Po(a)&&l({inst:a})},[e,r,t]),yy(()=>(Po(a)&&l({inst:a}),e(()=>{Po(a)&&l({inst:a})})),[e]),by(r),r}function Po(e){const t=e.getSnapshot,n=e.value;try{const r=t();return!xy(n,r)}catch{return!0}}function jy(e,t,n){return t()}const Ny=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Sy=!Ny,ky=Sy?jy:wy,Cy="useSyncExternalStore"in Vs?(e=>e.useSyncExternalStore)(Vs):ky;function Ey(e){return Cy(e.subscribe,e.getSnapshot,e.getSnapshot)}function Py(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(a){return r.add(a),()=>r.delete(a)},dispatch(a,...l){let o=t[a].call(n,...l);o&&(n=o,r.forEach(c=>c()))}}}function Ty(){let e;return{before({doc:t}){var n;let r=t.documentElement;e=((n=t.defaultView)!=null?n:window).innerWidth-r.clientWidth},after({doc:t,d:n}){let r=t.documentElement,a=r.clientWidth-r.offsetWidth,l=e-a;n.style(r,"paddingRight",`${l}px`)}}}function Ry(){return fp()?{before({doc:e,d:t,meta:n}){function r(a){return n.containers.flatMap(l=>l()).some(l=>l.contains(a))}t.microTask(()=>{var a;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let c=Jl();c.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>c.dispose()))}let l=(a=window.scrollY)!=null?a:window.pageYOffset,o=null;t.addEventListener(e,"click",c=>{if(c.target instanceof HTMLElement)try{let u=c.target.closest("a");if(!u)return;let{hash:d}=new URL(u.href),h=e.querySelector(d);h&&!r(h)&&(o=h)}catch{}},!0),t.addEventListener(e,"touchstart",c=>{if(c.target instanceof HTMLElement)if(r(c.target)){let u=c.target;for(;u.parentElement&&r(u.parentElement);)u=u.parentElement;t.style(u,"overscrollBehavior","contain")}else t.style(c.target,"touchAction","none")}),t.addEventListener(e,"touchmove",c=>{if(c.target instanceof HTMLElement)if(r(c.target)){let u=c.target;for(;u.parentElement&&u.dataset.headlessuiPortal!==""&&!(u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth);)u=u.parentElement;u.dataset.headlessuiPortal===""&&c.preventDefault()}else c.preventDefault()},{passive:!1}),t.add(()=>{var c;let u=(c=window.scrollY)!=null?c:window.pageYOffset;l!==u&&window.scrollTo(0,l),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function Ly(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function Ay(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let ps=Py(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:Jl(),meta:new Set};return r.count++,r.meta.add(t),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let r={doc:e,d:t,meta:Ay(n)},a=[Ry(),Ty(),Ly()];a.forEach(({before:l})=>l==null?void 0:l(r)),a.forEach(({after:l})=>l==null?void 0:l(r))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});ps.subscribe(()=>{let e=ps.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",a=n.count!==0;(a&&!r||!a&&r)&&ps.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&ps.dispatch("TEARDOWN",n)}});function $y(e,t,n){let r=Ey(ps),a=e?r.get(e):void 0,l=a?a.count>0:!1;return Ln(()=>{if(!(!e||!t))return ps.dispatch("PUSH",e,n),()=>ps.dispatch("POP",e,n)},[t,e]),l}let To=new Map,br=new Map;function gd(e,t=!0){Ln(()=>{var n;if(!t)return;let r=typeof e=="function"?e():e.current;if(!r)return;function a(){var o;if(!r)return;let c=(o=br.get(r))!=null?o:1;if(c===1?br.delete(r):br.set(r,c-1),c!==1)return;let u=To.get(r);u&&(u["aria-hidden"]===null?r.removeAttribute("aria-hidden"):r.setAttribute("aria-hidden",u["aria-hidden"]),r.inert=u.inert,To.delete(r))}let l=(n=br.get(r))!=null?n:0;return br.set(r,l+1),l!==0||(To.set(r,{"aria-hidden":r.getAttribute("aria-hidden"),inert:r.inert}),r.setAttribute("aria-hidden","true"),r.inert=!0),a},[e,t])}function Iy({defaultContainers:e=[],portals:t,mainTreeNodeRef:n}={}){var r;let a=i.useRef((r=n==null?void 0:n.current)!=null?r:null),l=da(a),o=wt(()=>{var c,u,d;let h=[];for(let f of e)f!==null&&(f instanceof HTMLElement?h.push(f):"current"in f&&f.current instanceof HTMLElement&&h.push(f.current));if(t!=null&&t.current)for(let f of t.current)h.push(f);for(let f of(c=l==null?void 0:l.querySelectorAll("html > *, body > *"))!=null?c:[])f!==document.body&&f!==document.head&&f instanceof HTMLElement&&f.id!=="headlessui-portal-root"&&(f.contains(a.current)||f.contains((d=(u=a.current)==null?void 0:u.getRootNode())==null?void 0:d.host)||h.some(g=>f.contains(g))||h.push(f));return h});return{resolveContainers:o,contains:wt(c=>o().some(u=>u.contains(c))),mainTreeNodeRef:a,MainTreeNode:i.useMemo(()=>function(){return n!=null?null:Ae.createElement(zi,{features:jl.Hidden,ref:a})},[a,n])}}let Vc=i.createContext(()=>{});Vc.displayName="StackContext";var Ki=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(Ki||{});function Uy(){return i.useContext(Vc)}function Dy({children:e,onUpdate:t,type:n,element:r,enabled:a}){let l=Uy(),o=wt((...c)=>{t==null||t(...c),l(...c)});return Ln(()=>{let c=a===void 0||a===!0;return c&&o(0,n,r),()=>{c&&o(1,n,r)}},[o,n,r,a]),Ae.createElement(Vc.Provider,{value:o},e)}let Ep=i.createContext(null);function Pp(){let e=i.useContext(Ep);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Pp),t}return e}function My(){let[e,t]=i.useState([]);return[e.length>0?e.join(" "):void 0,i.useMemo(()=>function(n){let r=wt(l=>(t(o=>[...o,l]),()=>t(o=>{let c=o.slice(),u=c.indexOf(l);return u!==-1&&c.splice(u,1),c}))),a=i.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props}),[r,n.slot,n.name,n.props]);return Ae.createElement(Ep.Provider,{value:a},n.children)},[t])]}let Oy="p";function Fy(e,t){let n=cr(),{id:r=`headlessui-description-${n}`,...a}=e,l=Pp(),o=$n(t);Ln(()=>l.register(r),[r,l.register]);let c={ref:o,...l.props,id:r};return hn({ourProps:c,theirProps:a,slot:l.slot||{},defaultTag:Oy,name:l.name||"Description"})}let _y=xn(Fy),By=Object.assign(_y,{});var zy=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(zy||{}),Gy=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(Gy||{});let Wy={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},Nl=i.createContext(null);Nl.displayName="DialogContext";function ma(e){let t=i.useContext(Nl);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ma),n}return t}function Hy(e,t,n=()=>[document.body]){$y(e,t,r=>{var a;return{containers:[...(a=r.containers)!=null?a:[],n]}})}function Ky(e,t){return es(t.type,Wy,e,t)}let Vy="div",qy=Bi.RenderStrategy|Bi.Static;function Jy(e,t){let n=cr(),{id:r=`headlessui-dialog-${n}`,open:a,onClose:l,initialFocus:o,role:c="dialog",__demoMode:u=!1,...d}=e,[h,f]=i.useState(0),g=i.useRef(!1);c=function(){return c==="dialog"||c==="alertdialog"?c:(g.current||(g.current=!0,console.warn(`Invalid role [${c}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let v=qg();a===void 0&&v!==null&&(a=(v&Er.Open)===Er.Open);let b=i.useRef(null),y=$n(b,t),N=da(b),x=e.hasOwnProperty("open")||v!==null,p=e.hasOwnProperty("onClose");if(!x&&!p)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!x)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!p)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(typeof a!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${a}`);if(typeof l!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${l}`);let m=a?0:1,[E,k]=i.useReducer(Ky,{titleId:null,descriptionId:null,panelRef:i.createRef()}),C=wt(()=>l(!1)),I=wt(w=>k({type:0,id:w})),A=Ql()?u?!1:m===0:!1,Z=h>1,M=i.useContext(Nl)!==null,[q,V]=my(),se={get current(){var w;return(w=E.panelRef.current)!=null?w:b.current}},{resolveContainers:Y,mainTreeNodeRef:K,MainTreeNode:ie}=Iy({portals:q,defaultContainers:[se]}),fe=Z?"parent":"leaf",j=v!==null?(v&Er.Closing)===Er.Closing:!1,P=M||j?!1:A,$=i.useCallback(()=>{var w,T;return(T=Array.from((w=N==null?void 0:N.querySelectorAll("body > *"))!=null?w:[]).find(W=>W.id==="headlessui-portal-root"?!1:W.contains(K.current)&&W instanceof HTMLElement))!=null?T:null},[K]);gd($,P);let F=Z?!0:A,S=i.useCallback(()=>{var w,T;return(T=Array.from((w=N==null?void 0:N.querySelectorAll("[data-headlessui-portal]"))!=null?w:[]).find(W=>W.contains(K.current)&&W instanceof HTMLElement))!=null?T:null},[K]);gd(S,F),zg(Y,w=>{w.preventDefault(),C()},!(!A||Z));let U=!(Z||m!==0);vp(N==null?void 0:N.defaultView,"keydown",w=>{U&&(w.defaultPrevented||w.key===yp.Escape&&(w.preventDefault(),w.stopPropagation(),C()))}),Hy(N,!(j||m!==0||M),Y),i.useEffect(()=>{if(m!==0||!b.current)return;let w=new ResizeObserver(T=>{for(let W of T){let re=W.target.getBoundingClientRect();re.x===0&&re.y===0&&re.width===0&&re.height===0&&C()}});return w.observe(b.current),()=>w.disconnect()},[m,b,C]);let[_,B]=My(),D=i.useMemo(()=>[{dialogState:m,close:C,setTitleId:I},E],[m,E,C,I]),z=i.useMemo(()=>({open:m===0}),[m]),Q={ref:y,id:r,role:c,"aria-modal":m===0?!0:void 0,"aria-labelledby":E.titleId,"aria-describedby":_};return Ae.createElement(Dy,{type:"Dialog",enabled:m===0,element:b,onUpdate:wt((w,T)=>{T==="Dialog"&&es(w,{[Ki.Add]:()=>f(W=>W+1),[Ki.Remove]:()=>f(W=>W-1)})})},Ae.createElement(Gi,{force:!0},Ae.createElement(Hi,null,Ae.createElement(Nl.Provider,{value:D},Ae.createElement(Hi.Group,{target:b},Ae.createElement(Gi,{force:!1},Ae.createElement(B,{slot:z,name:"Dialog.Description"},Ae.createElement(vr,{initialFocus:o,containers:Y,features:A?es(fe,{parent:vr.features.RestoreFocus,leaf:vr.features.All&~vr.features.FocusLock}):vr.features.None},Ae.createElement(V,null,hn({ourProps:Q,theirProps:d,slot:z,defaultTag:Vy,features:qy,visible:m===0,name:"Dialog"}))))))))),Ae.createElement(ie,null))}let Qy="div";function Yy(e,t){let n=cr(),{id:r=`headlessui-dialog-overlay-${n}`,...a}=e,[{dialogState:l,close:o}]=ma("Dialog.Overlay"),c=$n(t),u=wt(h=>{if(h.target===h.currentTarget){if(Qg(h.currentTarget))return h.preventDefault();h.preventDefault(),h.stopPropagation(),o()}}),d=i.useMemo(()=>({open:l===0}),[l]);return hn({ourProps:{ref:c,id:r,"aria-hidden":!0,onClick:u},theirProps:a,slot:d,defaultTag:Qy,name:"Dialog.Overlay"})}let Zy="div";function Xy(e,t){let n=cr(),{id:r=`headlessui-dialog-backdrop-${n}`,...a}=e,[{dialogState:l},o]=ma("Dialog.Backdrop"),c=$n(t);i.useEffect(()=>{if(o.panelRef.current===null)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")},[o.panelRef]);let u=i.useMemo(()=>({open:l===0}),[l]);return Ae.createElement(Gi,{force:!0},Ae.createElement(Hi,null,hn({ourProps:{ref:c,id:r,"aria-hidden":!0},theirProps:a,slot:u,defaultTag:Zy,name:"Dialog.Backdrop"})))}let ev="div";function tv(e,t){let n=cr(),{id:r=`headlessui-dialog-panel-${n}`,...a}=e,[{dialogState:l},o]=ma("Dialog.Panel"),c=$n(t,o.panelRef),u=i.useMemo(()=>({open:l===0}),[l]),d=wt(h=>{h.stopPropagation()});return hn({ourProps:{ref:c,id:r,onClick:d},theirProps:a,slot:u,defaultTag:ev,name:"Dialog.Panel"})}let nv="h2";function sv(e,t){let n=cr(),{id:r=`headlessui-dialog-title-${n}`,...a}=e,[{dialogState:l,setTitleId:o}]=ma("Dialog.Title"),c=$n(t);i.useEffect(()=>(o(r),()=>o(null)),[r,o]);let u=i.useMemo(()=>({open:l===0}),[l]);return hn({ourProps:{ref:c,id:r},theirProps:a,slot:u,defaultTag:nv,name:"Dialog.Title"})}let rv=xn(Jy),av=xn(Xy),lv=xn(tv),ov=xn(Yy),iv=xn(sv),pn=Object.assign(rv,{Backdrop:av,Panel:lv,Overlay:ov,Title:iv,Description:By});const Vi="funkedupshift_impersonation",Tp=i.createContext(void 0);function Aa(){try{const e=sessionStorage.getItem(Vi);if(!e)return null;const t=JSON.parse(e);if(t!=null&&t.type&&(t!=null&&t.id))return t}catch{}return null}function yd(e){try{e?sessionStorage.setItem(Vi,JSON.stringify(e)):sessionStorage.removeItem(Vi)}catch{}}const cv=({children:e})=>{const[t,n]=i.useState(Aa);i.useEffect(()=>{const c=Aa();n(c)},[]);const r=i.useCallback(c=>{n(c),yd(c)},[]),a=i.useCallback(()=>{n(null),yd(null)},[]),l=i.useCallback(()=>{const c=t??Aa();return c?c.type==="user"?{"X-Impersonate-User":c.id}:{"X-Impersonate-Role":c.id}:{}},[t]),o={impersonation:t??Aa(),setImpersonation:r,clearImpersonation:a,getImpersonationHeaders:l};return s.jsx(Tp.Provider,{value:o,children:e})};function qc(){const e=i.useContext(Tp);return e||{impersonation:null,setImpersonation:()=>{},clearImpersonation:()=>{},getImpersonationHeaders:()=>({})}}const Rp=i.createContext(void 0);function uv(e){return e.includes("admin")?"superadmin":e.includes("manager")?"manager":e.includes("user")?"user":"guest"}function vd(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const dv=({children:e})=>{const[t,n]=i.useState(null),[r,a]=i.useState(!0),{getImpersonationHeaders:l}=qc(),o=Ae.useCallback(async()=>{const d=vd();if(!d){a(!1);return}try{const h=window;if(!h.auth||typeof h.auth.getAccessToken!="function"){a(!1);return}await new Promise(x=>{h.auth.isAuthenticated(p=>{if(!p){n(null),a(!1),x();return}x()})});const f=await new Promise(x=>{window.auth.getAccessToken(p=>x(p))});if(!f){n(null),a(!1);return}const g=await fetch(`${d}/me`,{headers:{Authorization:`Bearer ${f}`,...l()}});if(!g.ok){n(null),a(!1);return}const v=await g.json(),b=Array.isArray(v.groups)?v.groups.map(String):[],y=uv(b),N=Array.isArray(v.customGroups)?v.customGroups.map(String):[];n({userId:String(v.userId||""),email:String(v.email||""),groups:b,role:y,customGroups:N,impersonated:!!v.impersonated,impersonatedAs:v.impersonatedAs})}catch{n(null)}finally{a(!1)}},[l]);i.useEffect(()=>{o()},[o]);const c=Ae.useCallback(async()=>{vd()&&await o()},[o]),u=()=>{const d=window;d.auth&&typeof d.auth.signOut=="function"&&d.auth.signOut(),n(null)};return s.jsx(Rp.Provider,{value:{user:t,isLoading:r,signOut:u,refreshAuth:c},children:e})};function Oe(){const e=i.useContext(Rp);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}function ct(e,t){if(t==="guest")return!0;if(!e)return!1;const n=["guest","user","manager","superadmin"];return n.indexOf(e.role)>=n.indexOf(t)}function Sl(e){return e!=null&&e.userId?e.role==="superadmin"?!0:(e.customGroups??[]).includes("Squash"):!1}function kl(e){return e!=null&&e.userId?e.role==="superadmin"?!0:e.role!=="manager"?!1:(e.customGroups??[]).includes("Squash"):!1}function Lp(e){return e!=null&&e.userId?e.role==="superadmin"?!0:(e.customGroups??[]).includes("Financial"):!1}function Cl(e){return e!=null&&e.userId?e.role==="superadmin"?!0:e.role!=="manager"?!1:(e.customGroups??[]).includes("Financial"):!1}function sa(e){return e!=null&&e.userId?e.role==="superadmin"?!0:(e.customGroups??[]).includes("Memes"):!1}function Ap(e){return e!=null&&e.userId?e.role==="superadmin"?!0:(e.customGroups??[]).includes("Memes"):!1}function nr(e){return e!=null&&e.userId?e.role==="superadmin"?!0:e.role==="guest"?!1:(e.customGroups??[]).includes("Memes"):!1}function Jc(e){return e!=null&&e.userId?e.role==="superadmin"?!0:e.role!=="manager"?!1:(e.customGroups??[]).includes("Memes"):!1}function $p(){try{const e=sessionStorage.getItem("funkedupshift_impersonation");if(!e)return{};const t=JSON.parse(e);if((t==null?void 0:t.type)==="user"&&(t!=null&&t.id))return{"X-Impersonate-User":t.id};if((t==null?void 0:t.type)==="role"&&(t!=null&&t.id))return{"X-Impersonate-Role":t.id}}catch{}return{}}async function J(e,t){var l;const n=window;if(!((l=n.auth)!=null&&l.getAccessToken))throw new Error("Not signed in");const r=await new Promise(o=>n.auth.getAccessToken(o)),a={...t==null?void 0:t.headers,Authorization:`Bearer ${r}`,...$p()};return fetch(e,{...t,headers:a})}async function ht(e,t){var l;const n=window;if(!((l=n.auth)!=null&&l.getAccessToken))return fetch(e,t);const r=await new Promise(o=>n.auth.getAccessToken(o));if(!r)return fetch(e,t);const a={...t==null?void 0:t.headers,Authorization:`Bearer ${r}`,...$p()};return fetch(e,{...t,headers:a})}const Ip=i.createContext(void 0);function mv(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const fv=({children:e})=>{const[t,n]=i.useState(null);return i.useEffect(()=>{const r=mv();if(!r)return;let a=!1;return(async()=>{try{const l=await ht(`${r}/branding/logo`);if(!l.ok||!(l.headers.get("Content-Type")||"").includes("application/json"))return;const c=await l.json();if(a)return;c&&c.url&&n({url:String(c.url),alt:String(c.alt||"Funkedupshift")})}catch{}})(),()=>{a=!0}},[]),s.jsx(Ip.Provider,{value:{logo:t},children:e})};function Up(){const e=i.useContext(Ip);if(!e)throw new Error("useBranding must be used within BrandingProvider");return e}const pv=()=>{const{impersonation:e,clearImpersonation:t}=qc(),{user:n,refreshAuth:r}=Oe();if(!e)return null;const a=n!=null&&n.impersonated?n.impersonatedAs||n.email:e.label,l=()=>{t(),r()};return s.jsxs("div",{className:"sticky top-0 z-50 flex items-center justify-between gap-4 bg-amber-600 px-4 py-2 text-sm font-medium text-amber-950 shadow-md",children:[s.jsxs("span",{children:["Viewing as: ",s.jsx("strong",{children:a||e.id})]}),s.jsxs("button",{type:"button",onClick:l,className:"flex items-center gap-1 rounded-md px-2 py-1 font-semibold hover:bg-amber-500/50","aria-label":"Stop impersonating",children:[s.jsx(Kl,{className:"h-4 w-4"}),"Stop impersonating"]})]})};function hv(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const xv=()=>{const{user:e,refreshAuth:t}=Oe(),{impersonation:n,setImpersonation:r,clearImpersonation:a}=qc(),[l,o]=i.useState(!1),[c,u]=i.useState([]),[d,h]=i.useState([]),[f,g]=i.useState(!1),[v,b]=i.useState(null),y=hv();if(i.useEffect(()=>{var k;if(!l||!y||!((k=window.auth)!=null&&k.getAccessToken))return;g(!0),b(null),(async()=>{try{const[C,I]=await Promise.all([J(`${y}/admin/users?limit=100`),J(`${y}/admin/roles`)]),A=C.ok?await C.json():null,Z=I.ok?await I.json():null;if(!C.ok)throw new Error("Failed to load users");if(!I.ok)throw new Error("Failed to load roles");u((A==null?void 0:A.users)??[]),h((Z==null?void 0:Z.roles)??[])}catch(C){b((C==null?void 0:C.message)??"Failed to load")}finally{g(!1)}})()},[l,y]),(e==null?void 0:e.role)!=="superadmin")return null;const N=m=>{r({type:"user",id:m.username,label:m.email||m.username}),o(!1),t()},x=m=>{r({type:"role",id:m.name,label:m.name}),o(!1),t()},p=()=>{a(),o(!1),t()};return s.jsxs(s.Fragment,{children:[s.jsxs("button",{type:"button",onClick:()=>o(!0),className:"flex items-center gap-1.5 rounded-md px-2 py-1.5 text-xs font-medium text-amber-200 hover:bg-amber-500/20",title:"Impersonate user or role",children:[s.jsx(Cg,{className:"h-4 w-4"}),n?"Change":"Impersonate"]}),s.jsxs(pn,{open:l,onClose:()=>o(!1),className:"relative z-50",children:[s.jsx("div",{className:"fixed inset-0 bg-black/60","aria-hidden":"true"}),s.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:s.jsxs(pn.Panel,{className:"mx-auto max-h-[80vh] w-full max-w-md overflow-y-auto rounded-xl border border-slate-700 bg-slate-900 p-4 shadow-xl",children:[s.jsx(pn.Title,{className:"text-lg font-semibold text-slate-100",children:"User impersonation"}),s.jsx("p",{className:"mt-1 text-sm text-slate-400",children:"View the site as another user or a defined role."}),v&&s.jsx("div",{className:"mt-2 rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:v}),f?s.jsx("p",{className:"mt-4 text-sm text-slate-500",children:"Loading"}):s.jsxs("div",{className:"mt-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-300",children:"Users"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Superadmins cannot be impersonated."}),s.jsxs("ul",{className:"mt-2 max-h-40 overflow-y-auto space-y-1",children:[c.map(m=>s.jsx("li",{children:s.jsx("button",{type:"button",onClick:()=>N(m),className:"w-full rounded-md px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:m.email||m.username})},m.username)),c.length===0&&s.jsx("li",{className:"px-3 py-2 text-sm text-slate-500",children:"No users"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-300",children:"Roles"}),s.jsxs("ul",{className:"mt-2 max-h-40 overflow-y-auto space-y-1",children:[d.map(m=>s.jsx("li",{children:s.jsx("button",{type:"button",onClick:()=>x(m),className:"w-full rounded-md px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:m.name})},m.name)),d.length===0&&s.jsx("li",{className:"px-3 py-2 text-sm text-slate-500",children:"No roles defined"})]})]}),n&&s.jsx("button",{type:"button",onClick:p,className:"rounded-md border border-slate-600 px-3 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Stop impersonating"})]})]})})]})]})},gv=()=>{const{user:e}=Oe(),t=Sl(e),n=sa(e);return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("section",{className:"relative overflow-hidden rounded-2xl border border-slate-800 bg-gradient-to-br from-brand-orange/20 via-brand-navy/10 to-brand-teal/20 px-6 py-10",children:[s.jsxs("div",{className:"max-w-xl space-y-4",children:[s.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-slate-200",children:"Shared internet intelligence"}),s.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold tracking-tight text-slate-50",children:"Discover, rate, and enrich the sites that matter."}),s.jsx("p",{className:"text-sm text-slate-100/80",children:"Funkedupshift is a living index of websites, media, and experiments  curated by admins, enriched by everyone."}),s.jsxs("div",{className:"flex flex-wrap gap-3 pt-2",children:[s.jsx(oe,{to:"/websites",className:"inline-flex items-center rounded-full border border-slate-500/60 px-4 py-2 text-sm font-semibold text-slate-100 hover:border-slate-300/80",children:"Browse websites"}),s.jsx(oe,{to:"/media",className:"inline-flex items-center rounded-full border border-slate-500/60 px-4 py-2 text-sm font-semibold text-slate-100 hover:border-slate-300/80",children:"Explore media"}),s.jsx(oe,{to:"/internet-dashboard",className:"inline-flex items-center rounded-full border border-slate-500/60 px-4 py-2 text-sm font-semibold text-slate-100 hover:border-slate-300/80",children:"Internet Dashboard"}),t&&s.jsx(oe,{to:"/squash",className:"inline-flex items-center rounded-full border border-slate-500/60 px-4 py-2 text-sm font-semibold text-slate-100 hover:border-slate-300/80",children:"Squash"}),n&&s.jsx(oe,{to:"/memes",className:"inline-flex items-center rounded-full border border-slate-500/60 px-4 py-2 text-sm font-semibold text-slate-100 hover:border-slate-300/80",children:"Memes"})]})]}),s.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 w-1/2 opacity-60",children:s.jsx("div",{className:"absolute -inset-24 bg-[radial-gradient(circle_at_top,_#f97316_0,_transparent_55%),radial-gradient(circle_at_bottom,_#06d6a0_0,_transparent_55%)]"})})]}),s.jsxs("section",{className:"grid gap-4 sm:grid-cols-3",children:[s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.22em] text-slate-500 mb-2",children:"Everyone"}),s.jsx("p",{className:"text-sm text-slate-200",children:"Browse all sites and media without signing in. Ratings and metadata are public by design."})]}),s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.22em] text-slate-500 mb-2",children:"Users"}),s.jsx("p",{className:"text-sm text-slate-200",children:"Sign in to rate sites, add notes, and personalize your view of the internet."})]}),s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.22em] text-slate-500 mb-2",children:"Admins"}),s.jsx("p",{className:"text-sm text-slate-200",children:"Curate the corpus, manage categories and groups, and control branding from a single admin surface."})]})]})]})};function Ro(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Lo=10,yv=()=>{const{user:e}=Oe(),[t,n]=qt(),[r,a]=i.useState([]),[l,o]=i.useState(()=>t.get("q")??""),[c,u]=i.useState(()=>{const j=t.get("categoryIds");return j?j.split(",").filter(Boolean):[]}),[d,h]=i.useState(()=>t.get("categoryMode")==="or"?"or":"and"),[f,g]=i.useState(!1),[v,b]=i.useState(""),[y,N]=i.useState("avgDesc"),[x,p]=i.useState(1),[m,E]=i.useState(!1),[k,C]=i.useState(null),I=!!e,A=i.useRef(null),[Z,M]=i.useState([]);i.useEffect(()=>{const j=Ro();if(!j)return;let P=!1;return ht(`${j}/categories`).then($=>$.ok?$.json():Promise.reject(new Error("Failed to load categories"))).then($=>{if(P)return;const F=($.categories??[]).map(S=>({id:S.PK||S.id||"",name:S.name||S.PK||""}));F.sort((S,H)=>(S.name||"").localeCompare(H.name||"")),M(F)}).catch(()=>{}),()=>{P=!0}},[]);const q=i.useMemo(()=>{if(d==="or"&&Z.length>0)return Z;const j=new Map;r.forEach($=>($.categories||[]).forEach(F=>{F.id&&!j.has(F.id)&&j.set(F.id,F)}));const P=[...Z];return j.forEach($=>{P.some(F=>F.id===$.id)||P.push($)}),P.sort(($,F)=>($.name||"").localeCompare(F.name||"")),P},[Z,d,r]),V=i.useMemo(()=>q.filter(j=>!c.includes(j.id)&&(!v.trim()||(j.name||"").toLowerCase().includes(v.toLowerCase()))),[q,c,v]),se=l.trim().length>0||c.length>0;i.useEffect(()=>{if(se){const j=new URLSearchParams;l.trim()&&j.set("q",l.trim()),c.length&&(j.set("categoryIds",c.join(",")),j.set("categoryMode",d)),n(j,{replace:!0})}else n({},{replace:!0})},[se,l,c,d,n]),i.useEffect(()=>{if(!se){a([]),p(1),E(!1),C(null);return}const j=Ro();if(!j){C("API URL not set. Deploy via CI or set window.API_BASE_URL in config.js.");return}let P=!1;async function $(){E(!0),C(null);try{const F=new URLSearchParams;F.set("limit","100"),l.trim()&&F.set("q",l.trim()),c.length>0&&(F.set("categoryIds",c.join(",")),F.set("categoryMode",d));const S=await ht(`${j}/sites?${F.toString()}`);if(!S.ok){const U=await S.text();throw new Error(`HTTP ${S.status}: ${U}`)}const H=await S.json();if(P)return;a(H.sites??[]),p(1)}catch(F){P||C((F==null?void 0:F.message)??"Failed to load sites.")}finally{P||E(!1)}}return $(),()=>{P=!0}},[se,l,c,d]),i.useEffect(()=>{function j(P){A.current&&!A.current.contains(P.target)&&g(!1)}if(f)return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[f]);const Y=i.useMemo(()=>{const j=[...r];return j.sort((P,$)=>{const F=(P.title||P.url||P.PK||"").toLowerCase(),S=($.title||$.url||$.PK||"").toLowerCase(),H=typeof P.averageRating=="number"?P.averageRating:0,U=typeof $.averageRating=="number"?$.averageRating:0;return y==="avgDesc"?U!==H?U-H:F.localeCompare(S):y==="avgAsc"?H!==U?H-U:F.localeCompare(S):y==="alphaAsc"?F.localeCompare(S):y==="alphaDesc"?S.localeCompare(F):0}),j},[r,y]),K=Math.max(1,Math.ceil(Y.length/Lo)),ie=Y.slice((x-1)*Lo,x*Lo),fe=async(j,P)=>{const $=Ro();if(!$)return;const F=window;if(!F.auth||typeof F.auth.getAccessToken!="function")return;const S=await new Promise(H=>{F.auth.getAccessToken(U=>H(U))});S&&await ht(`${$}/stars`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${S}`},body:JSON.stringify({siteId:j,rating:P})}).catch(()=>{})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Websites"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Browse curated sites, see ratings, and jump straight into the interesting corners of the internet."})]}),s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-4","aria-label":"Search and filter",children:[s.jsxs("form",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",onSubmit:j=>{j.preventDefault(),o(l.trim())},children:[s.jsx("input",{type:"text",value:l,onChange:j=>o(j.target.value),placeholder:"Search sites (title, URL, description)",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("button",{type:"submit",className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500",children:"Search"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-4 sm:gap-6",children:[s.jsxs("div",{ref:A,className:"relative flex-shrink-0 min-w-0 max-w-sm",children:[s.jsx("label",{htmlFor:"website-category-filter",className:"block text-xs font-medium text-slate-400 mb-1",children:"Categories (filter by)"}),s.jsx("input",{id:"website-category-filter",type:"text",value:v,onChange:j=>b(j.target.value),onFocus:()=>g(!0),placeholder:"Search and select categories",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",autoComplete:"off"}),f&&s.jsx("div",{className:"absolute left-0 top-full z-10 mt-1 w-full max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",role:"listbox","aria-label":"Category options",children:V.length>0?V.map(j=>s.jsx("button",{type:"button",role:"option",onClick:()=>{u(P=>P.includes(j.id)?P:[...P,j.id]),b("")},className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:j.name},j.id)):s.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:q.length===0?"No categories yet.":"No matches or all selected."})}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:c.map(j=>{const P=q.find($=>$.id===j);return s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(P==null?void 0:P.name)??j,s.jsx("button",{type:"button",onClick:()=>u($=>$.filter(F=>F!==j)),className:"hover:text-red-400","aria-label":"Remove category filter",children:""})]},j)})}),c.length>0&&s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-slate-500",children:"Match:"}),s.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[s.jsx("button",{type:"button",onClick:()=>h("and"),className:`rounded px-2 py-0.5 text-xs font-medium ${d==="and"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"AND"}),s.jsx("button",{type:"button",onClick:()=>h("or"),className:`rounded px-2 py-0.5 text-xs font-medium ${d==="or"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"OR"})]})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-3 items-center text-xs text-slate-400",children:[s.jsx("span",{className:"font-medium text-slate-200",children:"Sort:"}),s.jsxs("select",{value:y,onChange:j=>{N(j.target.value),p(1)},className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",children:[s.jsx("option",{value:"avgDesc",children:"Avg stars (high first)"}),s.jsx("option",{value:"avgAsc",children:"Avg stars (low first)"}),s.jsx("option",{value:"alphaAsc",children:"Title AZ"}),s.jsx("option",{value:"alphaDesc",children:"Title ZA"})]}),s.jsx("span",{className:"text-slate-500",children:se?Y.length===0?"No sites found.":`${Y.length} sites`:""})]})]})]}),k&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:k}),se?m?s.jsx("div",{className:"text-sm text-slate-400",children:"Loading sites"}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"rounded-md border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm text-slate-400",children:Y.length===0?"No results":`${Y.length} results`}),s.jsx("ul",{className:"space-y-2 mt-2",children:ie.map(j=>{const P=j.title||j.url||j.PK||"Untitled",$=j.logoUrl;return s.jsxs("li",{className:"flex gap-3 rounded-xl border border-slate-800 bg-slate-950/60 p-3",children:[s.jsx("div",{className:"h-12 w-12 flex-shrink-0 overflow-hidden rounded-lg border border-slate-700 bg-slate-900",children:$?s.jsx("img",{src:$,alt:"",className:"h-full w-full object-cover",onError:F=>{F.currentTarget.style.visibility="hidden"}}):null}),s.jsxs("div",{className:"min-w-0 flex-1 space-y-1",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("h2",{className:"truncate text-sm font-semibold text-slate-50",children:s.jsx(oe,{to:`/websites/${encodeURIComponent(j.PK)}`,className:"hover:text-brand-orange",children:P})}),typeof j.averageRating=="number"&&s.jsxs("span",{className:"inline-flex items-center rounded-full bg-slate-900 px-2 py-0.5 text-[11px] text-amber-300",children:[j.averageRating.toFixed(1),""]})]}),j.url&&s.jsx("a",{href:j.url,target:"_blank",rel:"noopener noreferrer",className:"block truncate text-xs text-slate-400 hover:text-slate-200",children:j.url}),j.description&&s.jsxs("p",{className:"text-xs text-slate-300 line-clamp-3",children:[j.description,j.descriptionAiGenerated&&s.jsx("span",{className:"ml-1 text-[11px] uppercase tracking-wide text-slate-500",children:"AI summary"})]}),j.categories&&j.categories.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1 pt-1",children:j.categories.map(F=>s.jsx("span",{className:"rounded-full bg-slate-900 px-2 py-0.5 text-[11px] text-slate-300",children:F.name},F.id))}),I&&s.jsx("div",{className:"pt-1",children:s.jsxs("label",{className:"inline-flex items-center gap-1 text-[11px] text-slate-400",children:[s.jsx("span",{children:"Rate:"}),s.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-1 py-0.5 text-[11px] text-slate-50",onChange:F=>{const S=Number(F.target.value);S>=1&&S<=5&&fe(j.PK,S)},defaultValue:"",children:[s.jsx("option",{value:"",children:"--"}),s.jsx("option",{value:"1",children:"1"}),s.jsx("option",{value:"2",children:"2"}),s.jsx("option",{value:"3",children:"3"}),s.jsx("option",{value:"4",children:"4"}),s.jsx("option",{value:"5",children:"5"})]})]})})]})]},j.PK)})})]}):s.jsx("div",{className:"flex items-center justify-center min-h-[280px]",children:s.jsx("p",{className:"text-2xl sm:text-3xl font-light text-slate-500/80 tracking-wide animate-pulse",children:"Enter search term or select categories"})}),se&&K>1&&s.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-center gap-2 text-xs",children:[s.jsx("button",{type:"button",disabled:x<=1,onClick:()=>p(j=>Math.max(1,j-1)),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 disabled:opacity-40",children:"Prev"}),s.jsxs("span",{className:"text-slate-500",children:["Page ",x," of ",K]}),s.jsx("button",{type:"button",disabled:x>=K,onClick:()=>p(j=>Math.min(K,j+1)),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 disabled:opacity-40",children:"Next"})]})]})};function Ao(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const vv=()=>{var v,b;const{id:e}=ir(),{user:t}=Oe(),n=ct(t??null,"manager"),[r,a]=i.useState(null),[l,o]=i.useState(null),[c,u]=i.useState(!0),[d,h]=i.useState(null);i.useEffect(()=>{const y=Ao();if(!y||!e){h(e?"API URL not set.":"Missing site id."),u(!1);return}let N=!1;async function x(){u(!0),h(null);try{const p=new URLSearchParams;p.set("id",decodeURIComponent(e));const m=await ht(`${y}/sites?${p.toString()}`);if(m.status===404){N||a(null);return}if(!m.ok){const k=await m.text();throw new Error(`HTTP ${m.status}: ${k}`)}const E=await m.json();if(N)return;a(E.site??null)}catch(p){N||h((p==null?void 0:p.message)??"Failed to load site.")}finally{N||u(!1)}}return x(),()=>{N=!0}},[e]),i.useEffect(()=>{if(!t||!(r!=null&&r.PK))return;const y=Ao();if(!y)return;let N=!1;return(async()=>{try{const x=await J(`${y}/stars?siteId=${encodeURIComponent(r.PK)}`);if(N)return;if(x.ok){const p=await x.json();o(typeof p.rating=="number"?p.rating:null)}}catch{}})(),()=>{N=!0}},[t,r==null?void 0:r.PK]);const f=async(y,N)=>{const x=Ao();if(x)try{await J(`${x}/stars`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({siteId:y,rating:N})}),o(N)}catch{}};if(c)return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(oe,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Websites"]}),s.jsx("div",{className:"text-sm text-slate-400",children:"Loading"})]});if(d||!r)return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(oe,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Websites"]}),s.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:d||"Site not found."})]});const g=r.title||r.url||r.PK||"Untitled";return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsxs(oe,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Websites"]}),n&&r&&s.jsxs(oe,{to:`/admin/sites/edit/${encodeURIComponent(r.PK)}`,className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(ua,{className:"h-4 w-4"}),"Edit site"]})]}),s.jsxs("article",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 sm:p-6",children:[s.jsxs("header",{className:"flex flex-wrap gap-4",children:[s.jsx("div",{className:"h-16 w-16 flex-shrink-0 overflow-hidden rounded-lg border border-slate-700 bg-slate-900",children:r.logoUrl?s.jsx("img",{src:r.logoUrl,alt:"",className:"h-full w-full object-cover",onError:y=>{y.currentTarget.style.visibility="hidden"}}):null}),s.jsxs("div",{className:"min-w-0 flex-1 space-y-1",children:[s.jsx("h1",{className:"text-xl font-semibold tracking-tight text-slate-50",children:g}),typeof r.averageRating=="number"&&s.jsxs("span",{className:"inline-flex items-center rounded-full bg-slate-800 px-2 py-0.5 text-sm text-amber-300",children:[r.averageRating.toFixed(1)," average"]}),r.url&&s.jsx("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:"block truncate text-sm text-slate-400 hover:text-slate-200",children:r.url})]})]}),r.description&&s.jsx("div",{className:"mt-4",children:s.jsxs("p",{className:"text-sm text-slate-300",children:[r.description,r.descriptionAiGenerated&&s.jsx("span",{className:"ml-1 text-xs uppercase tracking-wide text-slate-500",children:"AI summary"})]})}),(((v=r.categories)==null?void 0:v.length)??0)>0&&s.jsx("div",{className:"mt-3 flex flex-wrap gap-1",children:r.categories.map(y=>s.jsx("span",{className:"rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-300",children:y.name},y.id))}),(((b=r.tags)==null?void 0:b.length)??0)>0&&s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:r.tags.map(y=>s.jsx("span",{className:"rounded-full bg-slate-900 px-2 py-0.5 text-xs text-slate-400",children:y},y))}),t&&s.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3",children:[l!==null&&s.jsxs("span",{className:"text-xs text-slate-400",children:["Your rating: ",l,""]}),s.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-400",children:[s.jsx("span",{children:"Rate:"}),s.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-2 py-1 text-sm text-slate-50",value:l??"",onChange:y=>{const N=Number(y.target.value);N>=1&&N<=5&&f(r.PK,N)},children:[s.jsx("option",{value:"",children:"--"}),s.jsx("option",{value:"1",children:"1"}),s.jsx("option",{value:"2",children:"2"}),s.jsx("option",{value:"3",children:"3"}),s.jsx("option",{value:"4",children:"4"}),s.jsx("option",{value:"5",children:"5"})]})]})]}),r.scrapedContent&&s.jsxs("section",{className:"mt-6 border-t border-slate-800 pt-4",children:[s.jsx("h2",{className:"text-sm font-medium text-slate-400",children:"About / Scraped content"}),s.jsx("div",{className:"mt-2 overflow-x-auto rounded-lg border border-slate-800 bg-slate-900/60 p-3",children:s.jsx("pre",{className:"whitespace-pre-wrap break-words font-sans text-sm text-slate-300",children:r.scrapedContent})})]})]})]})};function $o(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Io=10,bv=()=>{const{user:e}=Oe(),[t,n]=qt(),[r,a]=i.useState([]),[l,o]=i.useState(()=>t.get("q")??""),[c,u]=i.useState(()=>{const P=t.get("categoryIds");return P?P.split(",").filter(Boolean):[]}),[d,h]=i.useState(()=>t.get("categoryMode")==="or"?"or":"and"),[f,g]=i.useState(!1),[v,b]=i.useState(""),[y,N]=i.useState("avgDesc"),[x,p]=i.useState(1),[m,E]=i.useState(!1),[k,C]=i.useState(null),I=!!e,A=ct(e??null,"manager"),Z=i.useRef(null),[M,q]=i.useState([]);i.useEffect(()=>{const P=$o();if(!P)return;let $=!1;return ht(`${P}/media-categories`).then(F=>F.ok?F.json():Promise.reject(new Error("Failed to load categories"))).then(F=>{if($)return;const S=(F.categories??[]).map(H=>({id:H.PK||H.id||"",name:H.name||H.PK||""}));S.sort((H,U)=>(H.name||"").localeCompare(U.name||"")),q(S)}).catch(()=>{}),()=>{$=!0}},[]);const V=i.useMemo(()=>{if(d==="or"&&M.length>0)return M;const P=new Map;r.forEach(F=>(F.categories||[]).forEach(S=>{S.id&&!P.has(S.id)&&P.set(S.id,S)}));const $=[...M];return P.forEach(F=>{$.some(S=>S.id===F.id)||$.push(F)}),$.sort((F,S)=>(F.name||"").localeCompare(S.name||"")),$},[M,d,r]),se=i.useMemo(()=>V.filter(P=>!c.includes(P.id)&&(!v.trim()||(P.name||"").toLowerCase().includes(v.toLowerCase()))),[V,c,v]),Y=l.trim().length>0||c.length>0;i.useEffect(()=>{if(Y){const P=new URLSearchParams;l.trim()&&P.set("q",l.trim()),c.length&&(P.set("categoryIds",c.join(",")),P.set("categoryMode",d)),n(P,{replace:!0})}else n({},{replace:!0})},[Y,l,c,d,n]),i.useEffect(()=>{if(!Y){a([]),p(1),E(!1),C(null);return}const P=$o();if(!P){C("API URL not set. Deploy via CI or set window.API_BASE_URL in config.js.");return}let $=!1;async function F(){E(!0),C(null);try{const S=new URLSearchParams;S.set("limit","100"),l.trim()&&S.set("q",l.trim()),c.length>0&&(S.set("categoryIds",c.join(",")),S.set("categoryMode",d));const H=await ht(`${P}/media?${S.toString()}`);if(!H.ok){const G=await H.text();throw new Error(`HTTP ${H.status}: ${G}`)}const U=await H.json();if($)return;a(U.media??[]),p(1)}catch(S){$||C((S==null?void 0:S.message)??"Failed to load media.")}finally{$||E(!1)}}return F(),()=>{$=!0}},[Y,l,c,d]),i.useEffect(()=>{function P($){Z.current&&!Z.current.contains($.target)&&g(!1)}if(f)return document.addEventListener("mousedown",P),()=>document.removeEventListener("mousedown",P)},[f]);const K=i.useMemo(()=>{const P=[...r];return P.sort(($,F)=>{const S=($.title||$.PK||"").toLowerCase(),H=(F.title||F.PK||"").toLowerCase(),U=typeof $.averageRating=="number"?$.averageRating:0,G=typeof F.averageRating=="number"?F.averageRating:0;return y==="avgDesc"?G!==U?G-U:S.localeCompare(H):y==="avgAsc"?U!==G?U-G:S.localeCompare(H):y==="alphaAsc"?S.localeCompare(H):y==="alphaDesc"?H.localeCompare(S):0}),P},[r,y]),ie=Math.max(1,Math.ceil(K.length/Io)),fe=K.slice((x-1)*Io,x*Io),j=async(P,$)=>{const F=$o();if(!F)return;const S=window;if(!S.auth||typeof S.auth.getAccessToken!="function")return;const H=await new Promise(U=>{S.auth.getAccessToken(G=>U(G))});H&&await ht(`${F}/media/stars`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${H}`},body:JSON.stringify({mediaId:P,rating:$})}).catch(()=>{})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Media"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Images and videos attached to sites and experiments across Funkedupshift."})]}),s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-4","aria-label":"Search and filter",children:[s.jsxs("form",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",onSubmit:P=>{P.preventDefault(),o(l.trim())},children:[s.jsx("input",{type:"text",value:l,onChange:P=>o(P.target.value),placeholder:"Search media by title or description",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("button",{type:"submit",className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500",children:"Search"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-4 sm:gap-6",children:[s.jsxs("div",{ref:Z,className:"relative flex-shrink-0 min-w-0 max-w-sm",children:[s.jsx("label",{htmlFor:"media-category-filter",className:"block text-xs font-medium text-slate-400 mb-1",children:"Categories (filter by)"}),s.jsx("input",{id:"media-category-filter",type:"text",value:v,onChange:P=>b(P.target.value),onFocus:()=>g(!0),placeholder:"Search and select categories",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",autoComplete:"off"}),f&&s.jsx("div",{className:"absolute left-0 top-full z-10 mt-1 w-full max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",role:"listbox","aria-label":"Category options",children:se.length>0?se.map(P=>s.jsx("button",{type:"button",role:"option",onClick:()=>{u($=>$.includes(P.id)?$:[...$,P.id]),b("")},className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:P.name},P.id)):s.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:V.length===0?"No categories yet.":"No matches or all selected."})}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:c.map(P=>{const $=V.find(F=>F.id===P);return s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[($==null?void 0:$.name)??P,s.jsx("button",{type:"button",onClick:()=>u(F=>F.filter(S=>S!==P)),className:"hover:text-red-400","aria-label":"Remove category filter",children:""})]},P)})}),c.length>0&&s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-slate-500",children:"Match:"}),s.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[s.jsx("button",{type:"button",onClick:()=>h("and"),className:`rounded px-2 py-0.5 text-xs font-medium ${d==="and"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"AND"}),s.jsx("button",{type:"button",onClick:()=>h("or"),className:`rounded px-2 py-0.5 text-xs font-medium ${d==="or"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"OR"})]})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-3 items-center text-xs text-slate-400",children:[s.jsx("span",{className:"font-medium text-slate-200",children:"Sort:"}),s.jsxs("select",{value:y,onChange:P=>{N(P.target.value),p(1)},className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",children:[s.jsx("option",{value:"avgDesc",children:"Avg stars (high first)"}),s.jsx("option",{value:"avgAsc",children:"Avg stars (low first)"}),s.jsx("option",{value:"alphaAsc",children:"Title AZ"}),s.jsx("option",{value:"alphaDesc",children:"Title ZA"})]}),s.jsx("span",{className:"text-slate-500",children:Y?K.length===0?"No media found.":`${K.length} items`:""})]})]})]}),k&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:k}),Y?m?s.jsx("div",{className:"text-sm text-slate-400",children:"Loading media"}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"rounded-md border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm text-slate-400",children:K.length===0?"No results":`${K.length} results`}),s.jsx("ul",{className:"space-y-3 mt-2",children:fe.map(P=>{const $=P.thumbnailUrl||(P.mediaType==="image"?P.mediaUrl:void 0),F=P.title||P.PK||"Untitled",S=P.mediaType==="video"?"Video":"Image",H=`/media/${encodeURIComponent(P.PK)}`;return s.jsxs("li",{className:"flex gap-3 rounded-xl border border-slate-800 bg-slate-950/60 p-3",children:[s.jsx(oe,{to:H,className:"h-16 w-24 flex-shrink-0 overflow-hidden rounded-lg border border-slate-700 bg-slate-900 flex items-center justify-center text-xl hover:border-slate-600",children:$?s.jsx("img",{src:$,alt:"",className:"h-full w-full object-cover",onError:U=>{U.currentTarget.style.visibility="hidden"}}):s.jsx("span",{children:P.mediaType==="video"?"":""})}),s.jsxs("div",{className:"min-w-0 flex-1 space-y-1",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("h2",{className:"truncate text-sm font-semibold text-slate-50",children:s.jsx(oe,{to:H,className:"hover:text-brand-orange",children:F})}),typeof P.averageRating=="number"&&s.jsxs("span",{className:"inline-flex items-center rounded-full bg-slate-900 px-2 py-0.5 text-[11px] text-amber-300",children:[P.averageRating.toFixed(1),""]}),s.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-900 px-2 py-0.5 text-[10px] uppercase tracking-wide text-slate-400",children:S})]}),P.description&&s.jsx("p",{className:"text-xs text-slate-300 line-clamp-3",children:P.description}),P.categories&&P.categories.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1 pt-1",children:P.categories.map(U=>s.jsx("span",{className:"rounded-full bg-slate-900 px-2 py-0.5 text-[11px] text-slate-300",children:U.name},U.id))}),A&&s.jsx("div",{className:"pt-1",children:s.jsxs(oe,{to:`/admin/media/edit/${encodeURIComponent(P.PK)}`,className:"inline-flex items-center gap-1 text-[11px] text-slate-400 hover:text-slate-200",children:[s.jsx(ua,{className:"h-3.5 w-3.5"}),"Edit"]})}),I&&s.jsx("div",{className:"pt-1",children:s.jsxs("label",{className:"inline-flex items-center gap-1 text-[11px] text-slate-400",children:[s.jsx("span",{children:"Rate:"}),s.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-1 py-0.5 text-[11px] text-slate-50",onChange:U=>{const G=Number(U.target.value);G>=1&&G<=5&&j(P.PK,G)},defaultValue:"",children:[s.jsx("option",{value:"",children:"--"}),s.jsx("option",{value:"1",children:"1"}),s.jsx("option",{value:"2",children:"2"}),s.jsx("option",{value:"3",children:"3"}),s.jsx("option",{value:"4",children:"4"}),s.jsx("option",{value:"5",children:"5"})]})]})})]})]},P.PK)})})]}):s.jsx("div",{className:"flex items-center justify-center min-h-[280px]",children:s.jsx("p",{className:"text-2xl sm:text-3xl font-light text-slate-500/80 tracking-wide animate-pulse",children:"Enter search term or select categories"})}),Y&&ie>1&&s.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-center gap-2 text-xs",children:[s.jsx("button",{type:"button",disabled:x<=1,onClick:()=>p(P=>Math.max(1,P-1)),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 disabled:opacity-40",children:"Prev"}),s.jsxs("span",{className:"text-slate-500",children:["Page ",x," of ",ie]}),s.jsx("button",{type:"button",disabled:x>=ie,onClick:()=>p(P=>Math.min(ie,P+1)),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 disabled:opacity-40",children:"Next"})]})]})};function bd(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const wv=()=>{var y;const{id:e}=ir(),{user:t}=Oe(),[n,r]=i.useState(null),[a,l]=i.useState(null),[o,c]=i.useState(!0),[u,d]=i.useState(null),h=ct(t??null,"manager"),f=e?decodeURIComponent(e):"";i.useEffect(()=>{const N=bd();if(!N||!f){d(f?"API URL not set.":"Missing media id."),c(!1);return}let x=!1;async function p(){c(!0),d(null);try{const m=await ht(`${N}/media?id=${encodeURIComponent(f)}`);if(m.status===404){x||r(null);return}if(!m.ok){const C=await m.text();throw new Error(`HTTP ${m.status}: ${C}`)}const E=await m.json();if(x)return;const k=Array.isArray(E.media)?E.media[0]:E.media;r(k??null)}catch(m){x||d((m==null?void 0:m.message)??"Failed to load media.")}finally{x||c(!1)}}return p(),()=>{x=!0}},[f]);const g=async N=>{const x=bd();if(!(!x||!n))try{await J(`${x}/media/stars`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mediaId:n.PK,rating:N})}),l(N)}catch{}};if(o)return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(oe,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Media"]}),s.jsx("div",{className:"text-sm text-slate-400",children:"Loading"})]});if(u||!n)return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(oe,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Media"]}),s.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:u||"Media not found."})]});const v=n.title||n.PK||"Untitled",b=n.mediaType==="video";return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsxs(oe,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Media"]}),h&&s.jsxs(oe,{to:`/admin/media/edit/${encodeURIComponent(n.PK)}`,className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(ua,{className:"h-4 w-4"}),"Edit"]})]}),s.jsxs("article",{className:"rounded-xl border border-slate-800 bg-slate-950/60 overflow-hidden",children:[s.jsxs("header",{className:"p-4 sm:p-6 border-b border-slate-800",children:[s.jsx("h1",{className:"text-xl font-semibold tracking-tight text-slate-50",children:v}),s.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[typeof n.averageRating=="number"&&s.jsxs("span",{className:"inline-flex items-center rounded-full bg-slate-800 px-2 py-0.5 text-sm text-amber-300",children:[n.averageRating.toFixed(1)," average"]}),s.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-800 px-2 py-0.5 text-xs uppercase tracking-wide text-slate-400",children:b?"Video":"Image"})]}),n.description&&s.jsx("p",{className:"mt-3 text-sm text-slate-300",children:n.description}),(((y=n.categories)==null?void 0:y.length)??0)>0&&s.jsx("div",{className:"mt-3 flex flex-wrap gap-1",children:n.categories.map(N=>s.jsx("span",{className:"rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-300",children:N.name},N.id))}),t&&s.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3",children:[a!==null&&s.jsxs("span",{className:"text-xs text-slate-400",children:["Your rating: ",a,""]}),s.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-400",children:[s.jsx("span",{children:"Rate:"}),s.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-2 py-1 text-sm text-slate-50",value:a??"",onChange:N=>{const x=Number(N.target.value);x>=1&&x<=5&&g(x)},children:[s.jsx("option",{value:"",children:"--"}),s.jsx("option",{value:"1",children:"1"}),s.jsx("option",{value:"2",children:"2"}),s.jsx("option",{value:"3",children:"3"}),s.jsx("option",{value:"4",children:"4"}),s.jsx("option",{value:"5",children:"5"})]})]})]})]}),s.jsx("div",{className:"p-4 sm:p-6 bg-slate-900/40 flex justify-center items-center min-h-[200px]",children:n.mediaUrl?b?s.jsx("video",{src:n.mediaUrl,controls:!0,className:"max-w-full max-h-[70vh] rounded-lg border border-slate-700",playsInline:!0}):s.jsx("img",{src:n.mediaUrl,alt:v,className:"max-w-full max-h-[70vh] w-auto h-auto object-contain rounded-lg border border-slate-700"}):s.jsx("p",{className:"text-sm text-slate-500",children:"No media URL available."})})]})]})},Dp="funkedupshift_internet_dashboard",jv=5*60*1e3;function Nv(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function Sv(){try{const e=localStorage.getItem(Dp);if(!e)return null;const t=JSON.parse(e);return!(t!=null&&t.sites)||!(t!=null&&t.lastFetchTime)||Date.now()-new Date(t.lastFetchTime).getTime()>=jv?null:t.sites}catch{return null}}function kv(e){try{localStorage.setItem(Dp,JSON.stringify({sites:e,lastFetchTime:new Date().toISOString()}))}catch{}}const Cv=()=>{const{user:e}=Oe(),[t,n]=i.useState([]),[r,a]=i.useState(!0),[l,o]=i.useState(null),c=i.useCallback(async()=>{const u=Nv(),d=Sv();if(d&&d.length>0){n(d),a(!1),o(null);return}if(!u){o("API URL not set."),a(!1);return}a(!0),o(null);try{const h=await ht(`${u}/internet-dashboard`);if(!h.ok){const v=await h.text();throw new Error(v||`HTTP ${h.status}`)}const f=await h.json(),g=Array.isArray(f.sites)?f.sites:[];g.length>0?(kv(g),n(g)):(o(d!=null&&d.length?void 0:"No data returned."),d!=null&&d.length&&n(d))}catch(h){const f=h instanceof Error?h.message:"Failed to load dashboard.";d&&d.length>0?(n(d),o(null)):(o(f),n([]))}finally{a(!1)}},[]);return i.useEffect(()=>{c()},[c]),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Internet dashboard"}),s.jsxs("div",{className:"rounded-xl border border-teal-800/60 bg-gradient-to-br from-teal-900/40 to-teal-950/60 p-4 shadow-lg",children:[s.jsx("p",{className:"text-sm font-medium text-teal-100",children:"Live status of popular sites"}),s.jsx("p",{className:"mt-1 text-xs text-teal-200/80",children:"Refreshes when data is older than 5 minutes"}),ct(e??null,"superadmin")&&s.jsx("p",{className:"mt-2",children:s.jsx(oe,{to:"/admin/internet-dashboard",className:"text-brand-orange hover:text-orange-400 text-sm",children:"Edit sites list"})})]}),r&&s.jsx("p",{className:"text-sm text-slate-400",children:"Loading"}),l&&!t.length&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:l}),s.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(140px,1fr))] gap-3",children:t.map(u=>{const d=(u.status||"down").toLowerCase(),h=d==="up"?"border-emerald-500/50 bg-emerald-500/15 text-emerald-200":d==="degraded"?"border-amber-500/50 bg-amber-500/15 text-amber-200":"border-red-500/50 bg-red-500/15 text-red-200",f=u.responseTimeMs!=null?`${u.responseTimeMs} ms`:null;return s.jsxs("div",{className:`rounded-lg border p-3 text-center text-sm transition-all duration-200 hover:scale-[1.02] hover:shadow-lg ${h}`,children:[s.jsx("a",{href:`https://${u.domain}`,target:"_blank",rel:"noopener noreferrer",className:"font-semibold break-all hover:underline block",children:u.domain}),s.jsx("div",{className:"mt-1 text-xs capitalize opacity-90",children:d}),f&&s.jsx("div",{className:"mt-0.5 text-[11px] opacity-75",children:f})]},u.domain)})})]})};function Ev(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return!e||e==="API_URL_PLACEHOLDER"||!e.startsWith("http")?null:e.replace(/\/$/,"")}const Pv=()=>{const{user:e}=Oe(),[t,n]=i.useState([]),[r,a]=i.useState(null),[l,o]=i.useState(!0),[c,u]=i.useState(null),d=i.useCallback(async()=>{const f=Ev();if(!f){u("API URL not set. For local dev, edit public/config.js and set window.API_BASE_URL to your staging API (e.g. terraform -chdir=infra output -raw apiInvokeUrl)."),o(!1);return}o(!0),u(null);try{const g=await ht(`${f}/recommended/highlights`),v=await g.text();if(!g.ok)throw new Error(v||`HTTP ${g.status}`);if(v.trim().startsWith("<"))throw new Error("API returned HTML instead of JSON. For local dev, set window.API_BASE_URL in public/config.js to your staging API URL (e.g. terraform -chdir=infra output -raw apiInvokeUrl)");let b;try{b=JSON.parse(v)}catch{throw new Error("API returned invalid JSON.")}const y=Array.isArray(b.sites)?b.sites:[];n(y),u(null)}catch(g){const v=g instanceof Error?g.message:"Failed to load.";u(v),n([])}finally{o(!1)}},[]);i.useEffect(()=>{d()},[d]);const h=ct(e??null,"manager");return s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-violet-200",children:"Highlights and faves"}),s.jsxs("div",{className:"rounded-xl border border-violet-800/60 bg-gradient-to-br from-violet-900/40 to-violet-950/60 p-4 shadow-lg",children:[s.jsx("p",{className:"text-sm font-medium text-violet-100",children:"Our curated list of exceptional sites"}),s.jsx("p",{className:"mt-1 text-xs text-violet-200/80",children:"Click a card below for more detail"}),h&&s.jsx("p",{className:"mt-2",children:s.jsx(oe,{to:"/admin/recommended?tab=highlights",className:"text-violet-300 hover:text-violet-200 font-semibold text-sm",children:"Edit sites list"})})]}),l&&s.jsx("p",{className:"text-sm text-slate-400",children:"Loading"}),c&&!t.length&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:c}),!l&&t.length===0&&!c&&s.jsxs("p",{className:"text-sm text-slate-400",children:["No sites configured yet."," ",h&&s.jsx(oe,{to:"/admin/recommended?tab=highlights",className:"text-violet-400 hover:text-violet-300",children:"Add sites"})]}),t.length>0&&s.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(260px,1fr))] gap-4",children:t.map(f=>{const g=(f.status||"up").toLowerCase(),v=g==="up"?"border-violet-400/50 bg-violet-400/20 text-violet-200":g==="degraded"?"border-violet-500/50 bg-violet-500/15 text-violet-200":"border-violet-600/50 bg-violet-600/15 text-violet-200",b=(f.description||"").trim().length>0,y=f.title||f.domain,N=f.url||`https://${f.domain}`;return s.jsxs("div",{className:`rounded-lg border p-4 text-left text-sm min-w-0 cursor-pointer transition-all duration-200 hover:scale-[1.01] hover:shadow-lg ${v}`,onClick:()=>a(f),role:"button",tabIndex:0,onKeyDown:x=>{(x.key==="Enter"||x.key===" ")&&(x.preventDefault(),a(f))},children:[s.jsxs("span",{className:"relative group block",children:[s.jsx("a",{href:N,target:"_blank",rel:"noopener noreferrer",className:"font-semibold block hover:underline break-all",onClick:x=>x.stopPropagation(),children:y}),s.jsx("span",{className:"absolute left-0 top-full mt-1 px-2 py-1.5 rounded bg-slate-900 border border-violet-700/60 text-xs text-violet-200 break-all max-w-[280px] shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-opacity z-10 pointer-events-none",role:"tooltip",children:N})]}),b&&s.jsx("div",{className:"mt-2 text-xs text-violet-200/90 leading-relaxed break-words",children:f.description})]},f.url||f.domain)})}),s.jsxs(pn,{open:!!r,onClose:()=>a(null),className:"relative z-50",children:[s.jsx("div",{className:"fixed inset-0 bg-black/50","aria-hidden":"true"}),s.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:s.jsx(pn.Panel,{className:"mx-auto w-full max-w-xl rounded-xl border border-violet-800/60 bg-gradient-to-br from-violet-900/40 to-violet-950/60 p-6 shadow-xl",children:r&&s.jsxs("div",{className:"relative flex min-h-[12rem] items-center justify-center",children:[s.jsx("button",{type:"button",onClick:()=>a(null),className:"absolute right-0 top-0 rounded p-1 text-violet-400 hover:bg-violet-800/40 hover:text-violet-200","aria-label":"Close modal",children:s.jsx(Kl,{className:"h-6 w-6"})}),r.logoUrl?s.jsx("img",{src:r.logoUrl,alt:"",className:"max-h-48 max-w-full object-contain",onError:f=>{f.currentTarget.style.visibility="hidden"}}):s.jsx("div",{className:"h-24 w-24 rounded-lg border border-violet-700/60 bg-violet-900/40"})]})})})]})]})};function Tv({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{fillRule:"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.006 5.404.434c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.434 2.082-5.005Z",clipRule:"evenodd"}))}const Mp=i.forwardRef(Tv);function Rv(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return!e||e==="API_URL_PLACEHOLDER"||!e.startsWith("http")?null:e.replace(/\/$/,"")}const Lv=()=>{const{user:e}=Oe(),[t,n]=i.useState([]),[r,a]=i.useState(null),[l,o]=i.useState(!0),[c,u]=i.useState(null),d=i.useCallback(async()=>{const f=Rv();if(!f){u("API URL not set. For local dev, edit public/config.js and set window.API_BASE_URL to your staging API (e.g. terraform -chdir=infra output -raw apiInvokeUrl)."),o(!1);return}o(!0),u(null);try{const g=await ht(`${f}/recommended/highest-rated`),v=await g.text();if(!g.ok)throw new Error(v||`HTTP ${g.status}`);if(v.trim().startsWith("<"))throw new Error("API returned HTML instead of JSON. For local dev, set window.API_BASE_URL in public/config.js to your staging API URL (e.g. terraform -chdir=infra output -raw apiInvokeUrl)");let b;try{b=JSON.parse(v)}catch{throw new Error("API returned invalid JSON.")}const y=Array.isArray(b.sites)?b.sites:[];n(y),u(null)}catch(g){const v=g instanceof Error?g.message:"Failed to load.";u(v),n([])}finally{o(!1)}},[]);i.useEffect(()=>{d()},[d]);const h=ct(e??null,"manager");return s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-amber-200",children:"Highest rated"}),s.jsxs("div",{className:"rounded-xl border border-amber-800/60 bg-gradient-to-br from-amber-900/40 to-amber-950/60 p-4 shadow-lg",children:[s.jsx("p",{className:"text-sm font-medium text-amber-100",children:"Top sites and media rated by our community"}),s.jsx("p",{className:"mt-1 text-xs text-amber-200/80",children:"Click a card below for more detail"}),h&&s.jsx("p",{className:"mt-2",children:s.jsx(oe,{to:"/admin/recommended?tab=highest-rated",className:"text-amber-300 hover:text-amber-200 font-semibold text-sm",children:"Edit list"})})]}),l&&s.jsx("p",{className:"text-sm text-slate-400",children:"Loading"}),c&&!t.length&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:c}),!l&&t.length===0&&!c&&s.jsxs("p",{className:"text-sm text-slate-400",children:["No items configured yet."," ",h&&s.jsx(oe,{to:"/admin/recommended?tab=highest-rated",className:"text-amber-400 hover:text-amber-300",children:"Generate cache"})]}),t.length>0&&s.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(260px,1fr))] gap-4",children:t.map(f=>{const g=(f.status||"up").toLowerCase(),v=g==="up"?"border-amber-400/50 bg-amber-400/20 text-amber-200":g==="degraded"?"border-amber-500/50 bg-amber-500/15 text-amber-200":"border-amber-600/50 bg-amber-600/15 text-amber-200",b=(f.description||"").trim().length>0,y=f.title||f.domain,N=f.type==="media",x=f.id||f.url||f.domain;return s.jsxs("div",{className:`rounded-lg border p-4 text-left text-sm min-w-0 cursor-pointer transition-all duration-200 hover:scale-[1.01] hover:shadow-lg ${v}`,onClick:()=>a(f),role:"button",tabIndex:0,onKeyDown:p=>{(p.key==="Enter"||p.key===" ")&&(p.preventDefault(),a(f))},children:[s.jsxs("span",{className:"relative group block",children:[N?s.jsx(oe,{to:f.link,className:"font-semibold block hover:underline break-all",onClick:p=>p.stopPropagation(),children:y}):s.jsx("a",{href:f.link,target:"_blank",rel:"noopener noreferrer",className:"font-semibold block hover:underline break-all",onClick:p=>p.stopPropagation(),children:y}),s.jsx("span",{className:"absolute left-0 top-full mt-1 px-2 py-1.5 rounded bg-slate-900 border border-amber-700/60 text-xs text-amber-200 break-all max-w-[280px] shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-opacity z-10 pointer-events-none",role:"tooltip",children:f.link})]}),f.averageRating!=null&&s.jsxs("div",{className:"mt-1 flex items-center gap-0.5 text-amber-300",children:[s.jsx(Mp,{className:"h-3.5 w-3.5"}),s.jsx("span",{className:"font-medium",children:f.averageRating})]}),b&&s.jsx("div",{className:"mt-2 text-xs text-amber-200/90 leading-relaxed break-words",children:f.description})]},x)})}),s.jsxs(pn,{open:!!r,onClose:()=>a(null),className:"relative z-50",children:[s.jsx("div",{className:"fixed inset-0 bg-black/50","aria-hidden":"true"}),s.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:s.jsx(pn.Panel,{className:"mx-auto w-full max-w-xl rounded-xl border border-amber-800/60 bg-gradient-to-br from-amber-900/40 to-amber-950/60 p-6 shadow-xl",children:r&&s.jsxs("div",{className:"relative flex min-h-[12rem] items-center justify-center",children:[s.jsx("button",{type:"button",onClick:()=>a(null),className:"absolute right-0 top-0 rounded p-1 text-amber-400 hover:bg-amber-800/40 hover:text-amber-200","aria-label":"Close modal",children:s.jsx(Kl,{className:"h-6 w-6"})}),r.logoUrl?s.jsx("img",{src:r.logoUrl,alt:"",className:"max-h-48 max-w-full object-contain",onError:f=>{f.currentTarget.style.visibility="hidden"}}):s.jsx("div",{className:"h-24 w-24 rounded-lg border border-amber-700/60 bg-amber-900/40"})]})})})]})]})};function Av(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const $v=["image/png","image/jpeg","image/jpg","image/gif","image/webp"],Iv=()=>{const{user:e}=Oe(),{logo:t}=Up(),[n,r]=i.useState(null),[a,l]=i.useState("Funkedupshift"),[o,c]=i.useState(null),[u,d]=i.useState(!1),[h,f]=i.useState(null),[g,v]=i.useState(null);if(!ct(e??null,"superadmin"))return s.jsxs("div",{className:"space-y-3",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Branding"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Only superadmin users can manage global branding assets."})]});const y=x=>{var m;const p=(m=x.target.files)==null?void 0:m[0];r(p??null),f(null),v(null),o&&(URL.revokeObjectURL(o),c(null)),p&&c(URL.createObjectURL(p))},N=async x=>{if(x.preventDefault(),v(null),f(null),!n){v("Choose an image file first.");return}const p=n.type||"image/png";if(!$v.includes(p)){v("Logo must be PNG, JPEG, GIF, or WEBP.");return}const m=Av();if(!m){v("API URL not configured.");return}const E=window;if(!E.auth||typeof E.auth.getAccessToken!="function"){v("Auth not initialized.");return}d(!0);try{const k=await J(`${m}/branding/logo`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contentType:p,alt:a})});if(!k.ok){const A=await k.text();throw new Error(A||`Metadata request failed with ${k.status}`)}const C=await k.json();if(!C.uploadUrl)throw new Error("uploadUrl missing from response.");const I=await fetch(C.uploadUrl,{method:"PUT",headers:{"Content-Type":p},body:n});if(!I.ok)throw new Error(`Upload failed with ${I.status}`);f("Logo updated. It may take a moment for caches to refresh.")}catch(k){v((k==null?void 0:k.message)??"Failed to update logo.")}finally{d(!1)}};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Branding"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Upload a new global logo for Funkedupshift. This logo is used in the navigation bar and other shared surfaces."})]}),s.jsxs("form",{className:"space-y-4 max-w-md",onSubmit:N,children:[s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsx("label",{className:"block text-slate-200",children:"Logo image"}),t&&!o&&s.jsxs("div",{className:"space-y-1 mb-3",children:[s.jsx("p",{className:"text-slate-200",children:"Current logo"}),s.jsx("div",{className:"inline-flex items-center rounded-lg border border-slate-800 bg-slate-950 p-2",children:s.jsx("img",{src:t.url,alt:t.alt,className:"h-12 w-auto rounded-md object-contain"})})]}),s.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/jpg,image/gif,image/webp",onChange:y,className:"block w-full text-xs text-slate-300 file:mr-3 file:rounded-md file:border-0 file:bg-slate-800 file:px-3 file:py-1.5 file:text-xs file:font-semibold file:text-slate-100 hover:file:bg-slate-700"}),s.jsx("p",{className:"text-xs text-slate-500",children:"PNG, JPEG, GIF, or WEBP. Recommended square or horizontal layout."})]}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsx("label",{className:"block text-slate-200",children:"Alt text"}),s.jsx("input",{type:"text",value:a,onChange:x=>l(x.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),o&&s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsx("p",{className:"text-slate-200",children:"Preview"}),s.jsxs("div",{className:"inline-flex items-center rounded-lg border border-slate-800 bg-slate-950 p-2",children:[s.jsx("img",{src:o,alt:"Preview",className:"h-12 w-auto rounded-md object-contain"}),s.jsx("span",{className:"ml-3 text-xs text-slate-400 truncate max-w-[12rem]",children:n==null?void 0:n.name})]})]}),s.jsx("button",{type:"submit",disabled:u||!n,className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:u?"Updating":"Update logo"}),h&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-xs text-emerald-200",children:h}),g&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:g})]})]})};function wd(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Uv=()=>{const{user:e}=Oe(),[t,n]=i.useState([]),[r,a]=i.useState("custom"),[l,o]=i.useState(null),[c,u]=i.useState(null),[d,h]=i.useState(""),[f,g]=i.useState(!0),[v,b]=i.useState(!1),[y,N]=i.useState(null),[x,p]=i.useState(null),m=ct(e??null,"superadmin"),E=i.useCallback(async()=>{const Y=wd();if(!Y){p("API URL not set."),g(!1);return}g(!0),p(null);try{const K=await J(`${Y}/admin/internet-dashboard/sites`);if(!K.ok){const fe=await K.json().catch(()=>({}));throw new Error(fe.error||"Failed to load")}const ie=await K.json();n(Array.isArray(ie.sites)?ie.sites:[])}catch(K){p((K==null?void 0:K.message)??"Failed to load sites.")}finally{g(!1)}},[J]);i.useEffect(()=>{m&&E()},[m,E]);const k=async Y=>{const K=wd();if(K){b(!0),N(null),p(null);try{const ie=await J(`${K}/admin/internet-dashboard/sites`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({sites:Y})});if(!ie.ok){const fe=await ie.json().catch(()=>({}));throw new Error(fe.error||"Failed to save")}n(Y),N("Sites list saved.")}catch(ie){p((ie==null?void 0:ie.message)??"Failed to save.")}finally{b(!1)}}},C=Y=>{Y.preventDefault();const K=d.trim().toLowerCase().replace(/^https?:\/\//,"").replace(/\/.*$/,"");if(!K)return;if(t.includes(K)){p("Domain already in list.");return}const ie=[...t,K];h(""),p(null),k(ie)},I=i.useMemo(()=>{if(r==="custom")return[...t];const Y=[...t];return Y.sort((K,ie)=>r==="a-z"?K.localeCompare(ie):ie.localeCompare(K)),Y},[t,r]),A=Y=>{o(Y)},Z=(Y,K)=>{Y.preventDefault(),Y.dataTransfer.dropEffect="move",u(K)},M=()=>{u(null)},q=()=>{o(null),u(null)},V=(Y,K)=>{if(Y.preventDefault(),u(null),r!=="custom"||l===null||l===K){o(null);return}const ie=[...I],[fe]=ie.splice(l,1);ie.splice(K,0,fe),n(ie),k(ie),o(null)},se=Y=>{const K=t.filter(ie=>ie!==Y);if(K.length===0){p("At least one site is required.");return}p(null),k(K)};return m?f?s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Internet Dashboard"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Loading sites"})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs(oe,{to:"/internet-dashboard",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Internet Dashboard"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Internet Dashboard"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Edit the list of sites shown on the Internet Dashboard. Only SuperAdmin can change this."})]}),s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-4 max-w-2xl",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsxs("h2",{className:"text-base font-semibold text-slate-200",children:["Sites list (",t.length,")"]}),s.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[s.jsx("button",{type:"button",onClick:()=>a("custom"),className:`rounded px-2 py-0.5 text-xs font-medium ${r==="custom"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"Custom"}),s.jsx("button",{type:"button",onClick:()=>a("a-z"),className:`rounded px-2 py-0.5 text-xs font-medium ${r==="a-z"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"AZ"}),s.jsx("button",{type:"button",onClick:()=>a("z-a"),className:`rounded px-2 py-0.5 text-xs font-medium ${r==="z-a"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"ZA"})]})]}),s.jsxs("form",{onSubmit:C,className:"flex gap-2 flex-wrap items-end",children:[s.jsxs("div",{className:"flex-1 min-w-[12rem]",children:[s.jsx("label",{htmlFor:"newDomain",className:"block text-xs font-medium text-slate-400 mb-1",children:"Add domain"}),s.jsx("input",{id:"newDomain",type:"text",value:d,onChange:Y=>h(Y.target.value),placeholder:"example.com",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsx("button",{type:"submit",disabled:v||!d.trim(),className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:"Add"})]}),s.jsx("ul",{className:"space-y-2",children:I.map((Y,K)=>s.jsxs("li",{draggable:r==="custom",onDragStart:()=>A(K),onDragOver:ie=>Z(ie,K),onDragLeave:M,onDragEnd:q,onDrop:ie=>V(ie,K),className:`flex items-center gap-2 rounded-md border px-3 py-2 ${l===K?"border-brand-orange bg-slate-800 opacity-60":c===K?"border-brand-orange/70 bg-slate-800/80":"border-slate-700 bg-slate-900"} ${r==="custom"?"cursor-grab active:cursor-grabbing":""}`,children:[r==="custom"&&s.jsx(Hc,{className:"h-4 w-4 flex-shrink-0 text-slate-500","aria-hidden":!0}),s.jsx("span",{className:"font-medium text-slate-200 break-all flex-1",children:Y}),s.jsx("button",{type:"button",onClick:()=>se(Y),disabled:v||t.length<=1,className:"flex-shrink-0 rounded-md border border-red-500/60 bg-red-500/10 px-2 py-1 text-xs font-medium text-red-300 hover:bg-red-500/20 disabled:opacity-50",children:"Remove"})]},Y))}),y&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:y}),x&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:x})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Internet Dashboard"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Only SuperAdmin users can edit the dashboard sites list."})]})};function Uo(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function jd(e){const t=e.trim();return t?t.toLowerCase().startsWith("http://")||t.toLowerCase().startsWith("https://")?t:`https://${t.replace(/^https?:\/\//i,"")}`:null}function Nd(e){try{return new URL(e.startsWith("http")?e:`https://${e}`).hostname}catch{return e}}const wr=[{id:"highlights",label:"Highlights",fetchPath:"/admin/recommended/highlights/sites",savePath:"/admin/recommended/highlights/sites",generatePath:"/admin/recommended/highlights/generate",generateLabel:"Generate new cache",listLabel:"Highlights list",emptyMessage:"No highlights yet. Generate from the highlight category or add a URL above.",generateSuccessMessage:"Cache generated from sites in the highlight category.",saveSuccessMessage:"Highlights list saved.",buttonClass:"bg-violet-600 hover:bg-violet-500",viewPath:"/recommended/highlights"},{id:"highestRated",label:"Highest Rated",fetchPath:"/admin/recommended/highest-rated/sites",savePath:"/admin/recommended/highest-rated/sites",generatePath:"/admin/recommended/highest-rated/generate",generateLabel:"Generate new cache",listLabel:"Highest rated list",emptyMessage:"No items yet. Generate from top 12 by star rating or add a URL above.",generateSuccessMessage:"Cache generated from top 12 sites and media by star rating.",saveSuccessMessage:"Highest rated list saved.",buttonClass:"bg-amber-600 hover:bg-amber-500",viewPath:"/recommended/highest-rated"}],Sd=({config:e})=>{const[t,n]=i.useState([]),[r,a]=i.useState(null),[l,o]=i.useState(!1),[c,u]=i.useState("custom"),[d,h]=i.useState(null),[f,g]=i.useState(null),[v,b]=i.useState(""),[y,N]=i.useState(null),[x,p]=i.useState(""),[m,E]=i.useState(!1),[k,C]=i.useState(null),[I,A]=i.useState(null),Z=i.useRef([]);i.useEffect(()=>{Z.current=t},[t]);const M=i.useCallback(async()=>{const D=Uo();if(D){A(null);try{const z=await J(`${D}${e.fetchPath}`);if(!z.ok){const T=await z.json().catch(()=>({}));throw new Error(T.error||"Failed to load")}const Q=await z.json(),w=Array.isArray(Q.sites)?Q.sites:[];n(w.map(T=>typeof T=="string"?{type:"site",url:T,description:""}:(T.type||"site")==="media"?{type:"media",id:T.id||"",description:T.description||"",title:T.title,thumbnailKey:T.thumbnailKey,averageRating:T.averageRating}:{type:"site",url:T.url||"",description:T.description||"",title:T.title,logoKey:T.logoKey,averageRating:T.averageRating})),a(Q.updatedAt??null)}catch(z){A((z==null?void 0:z.message)??"Failed to load sites.")}}},[J,e.fetchPath]);i.useEffect(()=>{M()},[M]);const q=async()=>{const D=Uo();if(D){o(!0),C(null),A(null);try{const z=await J(`${D}${e.generatePath}`,{method:"POST"}),Q=await z.json();if(!z.ok)throw new Error(Q.error||"Failed to generate");const w=Array.isArray(Q.sites)?Q.sites:[];n(w.map(T=>typeof T=="string"?{type:"site",url:T,description:""}:(T.type||"site")==="media"?{type:"media",id:T.id||"",description:T.description||"",title:T.title,thumbnailKey:T.thumbnailKey,averageRating:T.averageRating}:{type:"site",url:T.url||"",description:T.description||"",title:T.title,logoKey:T.logoKey,averageRating:T.averageRating})),a(Q.updatedAt??null),C(e.generateSuccessMessage)}catch(z){A((z==null?void 0:z.message)??"Failed to generate cache.")}finally{o(!1)}}},V=async D=>{const z=Uo();if(z){E(!0),C(null),A(null);try{const Q={sites:D.map(W=>W.type==="media"?{type:"media",id:W.id,description:W.description,...W.title&&{title:W.title},...W.thumbnailKey&&{thumbnailKey:W.thumbnailKey},...W.averageRating!=null&&{averageRating:W.averageRating}}:{type:"site",url:W.url,description:W.description,...W.title&&{title:W.title},...W.logoKey&&{logoKey:W.logoKey},...W.averageRating!=null&&{averageRating:W.averageRating}})},w=await J(`${z}${e.savePath}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)}),T=await w.json();if(!w.ok)throw new Error(T.error||"Failed to save");n(D),C(e.saveSuccessMessage),a(T.updatedAt??null)}catch(Q){A((Q==null?void 0:Q.message)??"Failed to save.")}finally{E(!1)}}},se=D=>{D.preventDefault();const z=jd(v);if(z){if(t.some(Q=>Q.url===z)){A("URL already in list.");return}b(""),A(null),V([...t,{type:"site",url:z,description:""}])}},Y=D=>D.type==="media"?(D.title||D.id||"").toLowerCase():Nd(D.url||"").toLowerCase(),K=i.useMemo(()=>{if(c==="custom")return[...t];const D=[...t];return D.sort((z,Q)=>{const w=Y(z),T=Y(Q);return c==="a-z"?w.localeCompare(T):T.localeCompare(w)}),D},[t,c]),ie=D=>{const z=K[D];z.type!=="media"&&(N(D),p(z.url||""))},fe=()=>{if(y===null)return;const D=jd(x);if(!D){A("Invalid URL.");return}const z=K[y];if(z.type==="media")return;if(t.some(w=>w.type==="site"&&w.url===D&&w.url!==z.url)){A("URL already in list.");return}A(null);const Q=t.map(w=>w.type==="site"&&w.url===z.url?{...w,url:D}:w);n(Q),V(Q),N(null),p("")},j=()=>{N(null),p("")},P=(D,z)=>{n(Q=>Q.map(w=>(w.type==="media"?w.id===D.id:w.url===D.url)?{...w,description:z.slice(0,255)}:w))},$=()=>{V(Z.current)},F=D=>h(D),S=(D,z)=>{D.preventDefault(),D.dataTransfer.dropEffect="move",g(z)},H=()=>g(null),U=()=>{h(null),g(null)},G=(D,z)=>{if(D.preventDefault(),g(null),c!=="custom"||d===null||d===z){h(null);return}const Q=[...K],[w]=Q.splice(d,1);Q.splice(z,0,w),n(Q),V(Q),h(null)},_=D=>{A(null),V(t.filter(z=>z.type==="media"?z.id!==D.id:z.url!==D.url))},B=r?new Date(r).toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"}):null;return s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-4 max-w-2xl",children:[s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsxs("h2",{className:"text-base font-semibold text-slate-200",children:[e.listLabel," (",t.length,")"]}),B&&s.jsxs("span",{className:"text-xs text-slate-500",children:["Cache was last updated ",B]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(oe,{to:e.viewPath,className:"text-sm text-slate-400 hover:text-slate-200",children:"View"}),s.jsx("button",{type:"button",onClick:q,disabled:l,className:`rounded-md px-4 py-2 text-sm font-medium text-white disabled:opacity-50 ${e.buttonClass}`,children:l?"Generating":e.generateLabel})]})]}),s.jsx("div",{className:"flex flex-wrap items-center gap-3",children:s.jsx("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:["custom","a-z","z-a"].map(D=>s.jsx("button",{type:"button",onClick:()=>u(D),className:`rounded px-2 py-0.5 text-xs font-medium ${c===D?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:D==="custom"?"Custom":D==="a-z"?"AZ":"ZA"},D))})}),s.jsxs("form",{onSubmit:se,className:"flex gap-2 flex-wrap items-end",children:[s.jsxs("div",{className:"flex-1 min-w-[12rem]",children:[s.jsx("label",{htmlFor:"newUrl",className:"block text-xs font-medium text-slate-400 mb-1",children:"Add URL"}),s.jsx("input",{id:"newUrl",type:"text",value:v,onChange:D=>b(D.target.value),placeholder:"https://example.com or example.com",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsx("button",{type:"submit",disabled:m||!v.trim(),className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:"Add"})]}),s.jsx("ul",{className:"space-y-3",children:K.map((D,z)=>s.jsxs("li",{draggable:c==="custom"&&y===null,onDragStart:()=>F(z),onDragOver:Q=>S(Q,z),onDragLeave:H,onDragEnd:U,onDrop:Q=>G(Q,z),className:`flex flex-col gap-2 rounded-md border px-3 py-2 ${d===z?"border-brand-orange bg-slate-800 opacity-60":f===z?"border-brand-orange/70 bg-slate-800/80":"border-slate-700 bg-slate-900"} ${c==="custom"&&y===null?"cursor-grab active:cursor-grabbing":""}`,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[c==="custom"&&s.jsx(Hc,{className:"h-4 w-4 flex-shrink-0 text-slate-500","aria-hidden":!0}),y===z?s.jsx("input",{type:"text",value:x,onChange:Q=>p(Q.target.value),onBlur:fe,onKeyDown:Q=>{Q.key==="Enter"&&fe(),Q.key==="Escape"&&j()},autoFocus:!0,className:"flex-1 rounded-md border border-slate-600 bg-slate-900 px-2 py-1 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}):D.type==="media"?s.jsx("span",{className:"font-medium text-slate-200 break-all flex-1",children:D.title||D.id}):s.jsx("button",{type:"button",onClick:()=>ie(z),className:"font-medium text-slate-200 break-all flex-1 text-left hover:text-brand-orange hover:underline",children:Nd(D.url||"")}),e.id==="highestRated"&&D.averageRating!=null&&s.jsxs("span",{className:"flex items-center gap-0.5 text-amber-400 text-xs",children:[s.jsx(Mp,{className:"h-3.5 w-3.5"}),D.averageRating]}),s.jsx("button",{type:"button",onClick:()=>_(D),disabled:m||y!==null,className:"flex-shrink-0 rounded-md border border-red-500/60 bg-red-500/10 px-2 py-1 text-xs font-medium text-red-300 hover:bg-red-500/20 disabled:opacity-50",children:"Remove"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:`desc-${e.id}-${z}`,className:"block text-xs font-medium text-slate-400 mb-0.5",children:"Description"}),s.jsx("input",{id:`desc-${e.id}-${z}`,type:"text",value:D.description,onChange:Q=>P(D,Q.target.value),onBlur:$,maxLength:255,placeholder:"One-line description (255 chars max)",disabled:m,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange disabled:opacity-50"}),s.jsxs("span",{className:"text-[10px] text-slate-500",children:[D.description.length,"/255"]})]})]},D.id||D.url||z))}),K.length===0&&s.jsx("p",{className:"text-sm text-slate-500",children:e.emptyMessage}),k&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:k}),I&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:I})]})},Dv=()=>{const{user:e}=Oe(),[t,n]=qt(),r=t.get("tab"),a=r==="highest-rated"||r==="highestRated"?"highestRated":"highlights",[l,o]=i.useState(a);i.useEffect(()=>{o(r==="highest-rated"||r==="highestRated"?"highestRated":"highlights")},[r]);const c=d=>{o(d),n({tab:d==="highestRated"?"highest-rated":d},{replace:!0})},u=ct(e??null,"manager");return wr.find(d=>d.id===l)??wr[0],u?s.jsxs("div",{className:"space-y-6",children:[s.jsxs(oe,{to:"/recommended/highlights",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Recommended"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Recommended Admin"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manage highlighted and highest-rated site lists. Generate from categories or star ratings, or edit manually."})]}),s.jsx("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:wr.map(d=>s.jsx("button",{type:"button",onClick:()=>c(d.id),className:`px-4 py-2 rounded-md text-sm font-medium ${l===d.id?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:d.label},d.id))}),l==="highlights"&&s.jsx(Sd,{config:wr[0]}),l==="highestRated"&&s.jsx(Sd,{config:wr[1]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Recommended Admin"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Only Manager or SuperAdmin users can edit the recommended caches."})]})},$a={admin:"SuperAdmin",manager:"Manager",user:"User"},kd=["admin","manager","user"],qi=[{value:-8,label:"UTC-8"},{value:-5,label:"UTC-5"},{value:0,label:"UTC+0/GMT"}];function cn(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function Mv(e,t,n){if(!e&&!n)return"";if(!e)return n?`from ${n}`:"";try{const r=new Date(e);if(isNaN(r.getTime()))return e+(n?` from ${n}`:"");const a=r.getTime()+(t||0)*36e5,l=new Date(a),o=y=>y<10?"0"+y:""+y,c=l.getUTCFullYear(),u=o(l.getUTCMonth()+1),d=o(l.getUTCDate()),h=o(l.getUTCHours()),f=o(l.getUTCMinutes()),g=qi.find(y=>y.value===t),v=g?g.label:t<0?"UTC"+t:"UTC+"+t;let b=`${c}-${u}-${d} ${h}:${f} ${v}`;return n&&(b+=` from ${n}`),b}catch{return e+(n?` from ${n}`:"")}}const Ov=()=>{const{user:e}=Oe(),t=Vt(),[n,r]=qt(),a=n.get("tab"),l=a==="groups"?"groups":a==="roles"?"roles":"users",[o,c]=i.useState(l);i.useEffect(()=>{c(a==="groups"?"groups":a==="roles"?"roles":"users")},[a]);const u=R=>{c(R);const ee=new URLSearchParams(n);R==="groups"?ee.set("tab","groups"):R==="roles"?ee.set("tab","roles"):ee.delete("tab"),r(ee)},[d,h]=i.useState([]),[f,g]=i.useState(!0),[v,b]=i.useState(null),[y,N]=i.useState(""),[x,p]=i.useState(-8),[m,E]=i.useState([]),[k,C]=i.useState(!0),[I,A]=i.useState(null),[Z,M]=i.useState(""),[q,V]=i.useState(""),[se,Y]=i.useState(""),[K,ie]=i.useState(!1),[fe,j]=i.useState(null),[P,$]=i.useState(null),[F,S]=i.useState(""),[H,U]=i.useState(""),[G,_]=i.useState(!1),[B,D]=i.useState(null),[z,Q]=i.useState(null),[w,T]=i.useState([]),[W,re]=i.useState(!0),[O,ne]=i.useState(null),[ce,pe]=i.useState(""),[be,Ne]=i.useState([]),[je,Ke]=i.useState([]),[at,ae]=i.useState(!1),[we,Fe]=i.useState(null),[Te,Se]=i.useState(null),[_e,Be]=i.useState([]),[Xe,lt]=i.useState([]),[nt,$t]=i.useState(!1),[gn,Et]=i.useState(null),[ln,le]=i.useState(null),xe=ct(e??null,"manager"),We=(e==null?void 0:e.role)==="superadmin",$e=async R=>{var ue;const ee=cn();if(!ee){b("API URL not set."),g(!1);return}if(!((ue=window.auth)!=null&&ue.getAccessToken)){b("Sign in required."),g(!1);return}g(!0),b(null);try{let ve=`${ee}/admin/users`;R&&(ve+=`?paginationToken=${encodeURIComponent(R)}`);const ye=await J(ve);if(!ye.ok){const Jt=await ye.json().catch(()=>({}));throw new Error(Jt.error||"Failed to load users")}const Pe=await ye.json();h(Jt=>R?[...Jt,...Pe.users??[]]:Pe.users??[]),N(Pe.paginationToken??"")}catch(ve){b((ve==null?void 0:ve.message)??"Failed to load users")}finally{g(!1)}},ke=async R=>{const ee=cn();if(!ee)return{cognitoGroups:[],customGroups:[]};try{const ge=await J(`${ee}/admin/users/${encodeURIComponent(R.username)}/groups`);if(!ge.ok)return{cognitoGroups:[],customGroups:[]};const ue=await ge.json();return{cognitoGroups:ue.cognitoGroups??[],customGroups:ue.customGroups??[]}}catch{return{cognitoGroups:[],customGroups:[]}}},X=async()=>{var ge;const R=cn();if(!R){A("API URL not set."),C(!1);return}if(!((ge=window.auth)!=null&&ge.getAccessToken)){A("Sign in required."),C(!1);return}C(!0),A(null);try{const ue=await J(`${R}/admin/groups`);if(!ue.ok)throw new Error(await ue.text());const ye=((await ue.json()).groups??[]).map(Pe=>({name:Pe.name??(Pe.PK??"").replace("GROUP#",""),description:Pe.description,permissions:Array.isArray(Pe.permissions)?Pe.permissions:[]}));ye.sort((Pe,Jt)=>Pe.name.toLowerCase().localeCompare(Jt.name.toLowerCase())),E(ye)}catch(ue){A((ue==null?void 0:ue.message)??"Failed to load groups")}finally{C(!1)}};i.useEffect(()=>{const R=parseInt(sessionStorage.getItem("funkedupshift_lastlogin_tz")??"-8",10);!isNaN(R)&&qi.some(ee=>ee.value===R)&&p(R)},[]),i.useEffect(()=>{xe&&o==="users"&&$e()},[xe,o]),i.useEffect(()=>{xe&&(o==="groups"||o==="roles")&&X()},[xe,o]);const de=async()=>{var ge;const R=cn();if(!R){ne("API URL not set."),re(!1);return}if(!((ge=window.auth)!=null&&ge.getAccessToken)){ne("Sign in required."),re(!1);return}re(!0),ne(null);try{const ue=await J(`${R}/admin/roles`);if(!ue.ok){const ye=await ue.json().catch(()=>({}));throw new Error(ye.error||"Failed to load roles")}const ve=await ue.json();T(ve.roles??[])}catch(ue){ne((ue==null?void 0:ue.message)??"Failed to load roles")}finally{re(!1)}};i.useEffect(()=>{We&&o==="roles"&&de()},[We,o]);const Ie=R=>{t(`/admin/users/edit?username=${encodeURIComponent(R.username)}&email=${encodeURIComponent(R.email??"")}&status=${encodeURIComponent(R.status??"")}`)},Ue=(R,ee)=>{const ge=[];return(R||[]).forEach(ue=>{const ve=$a[ue]||ue,ye=ue==="admin"?"bg-amber-500/20 text-amber-200":ue==="manager"?"bg-blue-500/20 text-blue-200":"bg-slate-600/30 text-slate-300";ge.push(s.jsx("span",{className:`inline-block px-2 py-0.5 rounded text-xs mr-1 ${ye}`,children:ve},`c-${ue}`))}),(ee||[]).forEach(ue=>{ge.push(s.jsx("span",{className:"inline-block px-2 py-0.5 rounded text-xs mr-1 bg-emerald-500/20 text-emerald-200",children:ue},`x-${ue}`))}),ge.length?ge:s.jsx("span",{className:"text-slate-500",children:""})},Ee=R=>{$(R.name),S(R.description??""),U((R.permissions??[]).join(", ")),D(null)},Le=()=>{$(null),S(""),U(""),D(null)},De=async R=>{var ye;R.preventDefault();const ee=Z.trim();if(!ee)return;const ge=cn();if(!ge||!((ye=window.auth)!=null&&ye.getAccessToken))return;const ve=se.split(",").map(Pe=>Pe.trim()).filter(Boolean);ie(!0),j(null),A(null);try{const Pe=await J(`${ge}/admin/groups`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:ee,description:q.trim(),permissions:ve})});if(!Pe.ok){const Jt=await Pe.json().catch(()=>({}));throw new Error(Jt.error||"Failed to create group")}M(""),V(""),Y(""),j("Group created."),X()}catch(Pe){A((Pe==null?void 0:Pe.message)??"Failed to create group")}finally{ie(!1)}},yn=async R=>{var ve;if(R.preventDefault(),!P)return;const ee=cn();if(!ee||!((ve=window.auth)!=null&&ve.getAccessToken))return;const ue=H.split(",").map(ye=>ye.trim()).filter(Boolean);_(!0),D(null);try{const ye=await J(`${ee}/admin/groups/${encodeURIComponent(P)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:F,permissions:ue})});if(!ye.ok){const Pe=await ye.json().catch(()=>({}));throw new Error(Pe.error||"Failed to update group")}E(Pe=>Pe.map(Jt=>Jt.name===P?{...Jt,description:F,permissions:ue}:Jt)),Le()}catch(ye){D((ye==null?void 0:ye.message)??"Failed to update group")}finally{_(!1)}},vn=async R=>{var ue;if(!window.confirm(`Delete group "${R}"? Members will lose access.`))return;const ee=cn();if(!(!ee||!((ue=window.auth)!=null&&ue.getAccessToken))){Q(R);try{const ve=await J(`${ee}/admin/groups/${encodeURIComponent(R)}`,{method:"DELETE"});if(!ve.ok){const ye=await ve.json().catch(()=>({}));throw new Error(ye.error||"Failed to delete group")}E(ye=>ye.filter(Pe=>Pe.name!==R)),P===R&&Le()}catch(ve){A((ve==null?void 0:ve.message)??"Failed to delete group")}finally{Q(null)}}},gt=R=>{const ee=parseInt(R.target.value,10);p(ee),sessionStorage.setItem("funkedupshift_lastlogin_tz",String(ee))},ut=(R,ee,ge)=>{ee.includes(R)?ge(ee.filter(ue=>ue!==R)):ge([...ee,R])},bn=(R,ee,ge)=>{ee.includes(R)?ge(ee.filter(ue=>ue!==R)):ge([...ee,R])},ur=async R=>{var ve;R.preventDefault();const ee=ce.trim();if(!ee)return;const ge=cn();if(!(!ge||!((ve=window.auth)!=null&&ve.getAccessToken))){ae(!0),Fe(null),ne(null);try{const ye=await J(`${ge}/admin/roles`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:ee,cognitoGroups:be,customGroups:je})});if(!ye.ok){const Pe=await ye.json().catch(()=>({}));throw new Error(Pe.error||"Failed to create role")}pe(""),Ne([]),Ke([]),Fe("Role created."),de()}catch(ye){ne((ye==null?void 0:ye.message)??"Failed to create role")}finally{ae(!1)}}},Yl=R=>{Se(R.name),Be(R.cognitoGroups??[]),lt(R.customGroups??[]),Et(null)},_t=()=>{Se(null),Be([]),lt([]),Et(null)},L=async R=>{var ue;if(R.preventDefault(),!Te)return;const ee=cn();if(!(!ee||!((ue=window.auth)!=null&&ue.getAccessToken))){$t(!0),Et(null);try{const ve=await J(`${ee}/admin/roles/${encodeURIComponent(Te)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({cognitoGroups:_e,customGroups:Xe})});if(!ve.ok){const ye=await ve.json().catch(()=>({}));throw new Error(ye.error||"Failed to update role")}T(ye=>ye.map(Pe=>Pe.name===Te?{...Pe,cognitoGroups:_e,customGroups:Xe}:Pe)),_t()}catch(ve){Et((ve==null?void 0:ve.message)??"Failed to update role")}finally{$t(!1)}}},he=async R=>{var ue;if(!window.confirm(`Delete role "${R}"?`))return;const ee=cn();if(!(!ee||!((ue=window.auth)!=null&&ue.getAccessToken))){le(R);try{const ve=await J(`${ee}/admin/roles/${encodeURIComponent(R)}`,{method:"DELETE"});if(!ve.ok){const ye=await ve.json().catch(()=>({}));throw new Error(ye.error||"Failed to delete role")}T(ye=>ye.filter(Pe=>Pe.name!==R)),Te===R&&_t()}catch(ve){ne((ve==null?void 0:ve.message)??"Failed to delete role")}finally{le(null)}}};return xe?s.jsxs("div",{className:"space-y-6",children:[s.jsxs(oe,{to:"/",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Home"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Membership"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manage users and groups."})]}),s.jsxs("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:[s.jsx("button",{type:"button",onClick:()=>u("users"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="users"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Users"}),s.jsx("button",{type:"button",onClick:()=>u("groups"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="groups"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Groups"}),We&&s.jsx("button",{type:"button",onClick:()=>u("roles"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="roles"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Roles"})]}),o==="users"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("label",{htmlFor:"tz-select",className:"text-slate-500",children:"Last login timezone:"}),s.jsx("select",{id:"tz-select",value:x,onChange:gt,className:"rounded border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 text-sm",children:qi.map(R=>s.jsx("option",{value:R.value,children:R.label},R.value))})]}),v&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:v}),s.jsx("div",{className:"overflow-x-auto rounded-lg border border-slate-800",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-800",children:[s.jsx("thead",{className:"bg-slate-900/80",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Email"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Status"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Last login"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"System Roles"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Custom Groups"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-800",children:f&&d.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-slate-500",children:"Loading"})}):d.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-slate-500",children:"No users found."})}):d.map(R=>s.jsx(Fv,{user:R,tzOffset:x,formatLastLogin:Mv,renderGroupBadges:Ue,loadUserGroups:ke,onClick:()=>Ie(R)},R.username))})]})}),y&&s.jsx("div",{className:"flex justify-center",children:s.jsx("button",{type:"button",onClick:()=>$e(y),disabled:f,className:"rounded-md border border-slate-700 px-4 py-2 text-sm font-medium text-slate-200 hover:bg-slate-800 disabled:opacity-50",children:f?"Loading":"Load more"})})]}),o==="groups"&&s.jsxs(s.Fragment,{children:[s.jsxs("form",{className:"space-y-3 max-w-md",onSubmit:De,children:[s.jsx("h2",{className:"text-sm font-medium text-slate-300",children:"Create group"}),s.jsx("input",{type:"text",value:Z,onChange:R=>M(R.target.value),placeholder:"Name (alphanumeric, underscore, hyphen)",required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("input",{type:"text",value:q,onChange:R=>V(R.target.value),placeholder:"Description (optional)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("input",{type:"text",value:se,onChange:R=>Y(R.target.value),placeholder:"Permissions (comma-separated, e.g. media:edit, sites:add)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("button",{type:"submit",disabled:K||!Z.trim(),className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:K?"Creating":"Create"}),fe&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:fe}),I&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:I})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-sm font-medium text-slate-300 mb-2",children:"Custom groups"}),k?s.jsx("p",{className:"text-sm text-slate-500",children:"Loading"}):m.length===0?s.jsx("p",{className:"text-sm text-slate-500",children:"No custom groups yet. Create one above."}):s.jsx("ul",{className:"space-y-2",children:m.map(R=>s.jsx("li",{className:"rounded-lg border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm",children:P===R.name?s.jsxs("form",{onSubmit:yn,className:"space-y-2",children:[s.jsx("span",{className:"font-medium text-slate-200",children:R.name}),s.jsx("input",{type:"text",value:F,onChange:ee=>S(ee.target.value),placeholder:"Description (optional)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("input",{type:"text",value:H,onChange:ee=>U(ee.target.value),placeholder:"Permissions (comma-separated)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsxs("div",{className:"flex gap-2 flex-wrap",children:[s.jsx("button",{type:"submit",disabled:G,className:"rounded-md bg-brand-orange px-3 py-1.5 text-xs font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:G?"Saving":"Save"}),s.jsx("button",{type:"button",onClick:Le,className:"rounded-md border border-slate-700 px-3 py-1.5 text-xs font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"}),s.jsx("button",{type:"button",onClick:()=>vn(R.name),disabled:z===R.name,className:"rounded-md border border-red-500/60 px-3 py-1.5 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:z===R.name?"Deleting":"Delete"})]}),B&&s.jsx("p",{className:"text-xs text-red-400",children:B})]}):s.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("span",{className:"font-medium text-slate-200",children:R.name}),R.description&&s.jsx("span",{className:"text-slate-500 ml-2",children:R.description}),R.permissions&&R.permissions.length>0&&s.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Permissions: ",R.permissions.join(", ")]})]}),s.jsxs("div",{className:"flex gap-2 shrink-0",children:[s.jsx("button",{type:"button",onClick:()=>Ee(R),className:"rounded-md border border-slate-700 px-2 py-1 text-xs font-medium text-slate-300 hover:bg-slate-800",children:"Edit"}),s.jsx("button",{type:"button",onClick:()=>vn(R.name),disabled:z===R.name,className:"rounded-md border border-red-500/60 px-2 py-1 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:z===R.name?"Deleting":"Delete"})]})]})},R.name))})]})]}),o==="roles"&&We&&s.jsxs(s.Fragment,{children:[s.jsxs("form",{className:"space-y-3 max-w-md",onSubmit:ur,children:[s.jsx("h2",{className:"text-sm font-medium text-slate-300",children:"Create role"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Define a named role by selecting Cognito groups and custom groups. Use for impersonation."}),s.jsx("input",{type:"text",value:ce,onChange:R=>pe(R.target.value),placeholder:"Role name (e.g. Squash Manager)",required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Cognito groups"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:kd.map(R=>s.jsx("button",{type:"button",onClick:()=>ut(R,be,Ne),className:`rounded-md px-2 py-1 text-xs font-medium ${be.includes(R)?"bg-blue-500/30 text-blue-200":"border border-slate-600 text-slate-400 hover:bg-slate-800"}`,children:$a[R]||R},R))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Custom groups"}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.map(R=>s.jsx("button",{type:"button",onClick:()=>bn(R.name,je,Ke),className:`rounded-md px-2 py-1 text-xs font-medium ${je.includes(R.name)?"bg-emerald-500/30 text-emerald-200":"border border-slate-600 text-slate-400 hover:bg-slate-800"}`,children:R.name},R.name)),m.length===0&&s.jsx("span",{className:"text-xs text-slate-500",children:"Create groups first."})]})]}),s.jsx("button",{type:"submit",disabled:at||!ce.trim(),className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:at?"Creating":"Create"}),we&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:we}),O&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:O})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-sm font-medium text-slate-300 mb-2",children:"Defined roles"}),W?s.jsx("p",{className:"text-sm text-slate-500",children:"Loading"}):w.length===0?s.jsx("p",{className:"text-sm text-slate-500",children:"No roles yet. Create one above."}):s.jsx("ul",{className:"space-y-2",children:w.map(R=>s.jsx("li",{className:"rounded-lg border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm",children:Te===R.name?s.jsxs("form",{onSubmit:L,className:"space-y-2",children:[s.jsx("span",{className:"font-medium text-slate-200",children:R.name}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Cognito groups"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:kd.map(ee=>s.jsx("button",{type:"button",onClick:()=>ut(ee,_e,Be),className:`rounded-md px-2 py-1 text-xs ${_e.includes(ee)?"bg-blue-500/30 text-blue-200":"border border-slate-600 text-slate-400"}`,children:$a[ee]||ee},ee))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Custom groups"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:m.map(ee=>s.jsx("button",{type:"button",onClick:()=>bn(ee.name,Xe,lt),className:`rounded-md px-2 py-1 text-xs ${Xe.includes(ee.name)?"bg-emerald-500/30 text-emerald-200":"border border-slate-600 text-slate-400"}`,children:ee.name},ee.name))})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"submit",disabled:nt,className:"rounded-md bg-brand-orange px-3 py-1.5 text-xs font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:nt?"Saving":"Save"}),s.jsx("button",{type:"button",onClick:_t,className:"rounded-md border border-slate-700 px-3 py-1.5 text-xs text-slate-300 hover:bg-slate-800",children:"Cancel"}),s.jsx("button",{type:"button",onClick:()=>he(R.name),disabled:ln===R.name,className:"rounded-md border border-red-500/60 px-3 py-1.5 text-xs text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:ln===R.name?"Deleting":"Delete"})]}),gn&&s.jsx("p",{className:"text-xs text-red-400",children:gn})]}):s.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("span",{className:"font-medium text-slate-200",children:R.name}),s.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[(R.cognitoGroups??[]).map(ee=>s.jsx("span",{className:"inline-block px-2 py-0.5 rounded text-xs bg-blue-500/20 text-blue-200",children:$a[ee]||ee},`c-${ee}`)),(R.customGroups??[]).map(ee=>s.jsx("span",{className:"inline-block px-2 py-0.5 rounded text-xs bg-emerald-500/20 text-emerald-200",children:ee},`x-${ee}`))]})]}),s.jsxs("div",{className:"flex gap-2 shrink-0",children:[s.jsx("button",{type:"button",onClick:()=>Yl(R),className:"rounded-md border border-slate-700 px-2 py-1 text-xs text-slate-300 hover:bg-slate-800",children:"Edit"}),s.jsx("button",{type:"button",onClick:()=>he(R.name),disabled:ln===R.name,className:"rounded-md border border-red-500/60 px-2 py-1 text-xs text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:ln===R.name?"Deleting":"Delete"})]})]})},R.name))})]})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Membership"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})},Fv=({user:e,tzOffset:t,formatLastLogin:n,renderGroupBadges:r,loadUserGroups:a,onClick:l})=>{const[o,c]=i.useState(null);return i.useEffect(()=>{let u=!1;return a(e).then(d=>{u||c(d)}),()=>{u=!0}},[e.username]),s.jsxs("tr",{className:"cursor-pointer hover:bg-slate-800/50 transition-colors",onClick:l,children:[s.jsx("td",{className:"px-4 py-3 text-sm text-slate-200",children:e.email||e.username||""}),s.jsx("td",{className:"px-4 py-3 text-sm text-slate-400",children:e.status||""}),s.jsx("td",{className:"px-4 py-3 text-sm text-slate-400",children:n(e.lastLoginAt??"",t,e.lastLoginIp)}),s.jsx("td",{className:"px-4 py-3 text-sm",children:o?r(o.cognitoGroups,[]):s.jsx("span",{className:"text-slate-500",children:""})}),s.jsx("td",{className:"px-4 py-3 text-sm",children:o?r([],o.customGroups):s.jsx("span",{className:"text-slate-500",children:""})})]})};function ls(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Cd=100,_v=5*1024*1024,Bv=()=>{const e=Vt(),{user:t}=Oe(),[n,r]=qt(),a=n.get("tab"),l=a==="categories"?"categories":"add",[o,c]=i.useState(l);i.useEffect(()=>{c(a==="categories"?"categories":"add")},[a]);const u=X=>{c(X);const de=new URLSearchParams(n);X==="categories"?de.set("tab","categories"):de.delete("tab"),r(de)},[d,h]=i.useState([]),[f,g]=i.useState(""),[v,b]=i.useState(""),[y,N]=i.useState(""),[x,p]=i.useState(!1),[m,E]=i.useState(null),[k,C]=i.useState(null),[I,A]=i.useState(null),[Z,M]=i.useState(""),[q,V]=i.useState([]),[se,Y]=i.useState(""),[K,ie]=i.useState(!1),[fe,j]=i.useState(!1),[P,$]=i.useState(null),[F,S]=i.useState(null),[H,U]=i.useState(!1),G=i.useRef(null),[_,B]=i.useState(!0),[D,z]=i.useState(null),[Q,w]=i.useState(""),[T,W]=i.useState(""),[re,O]=i.useState(!1),[ne,ce]=i.useState(null),[pe,be]=i.useState(null),[Ne,je]=i.useState(""),[Ke,at]=i.useState(""),[ae,we]=i.useState(!1),[Fe,Te]=i.useState(null),[Se,_e]=i.useState(null),Be=ct(t??null,"manager");i.useEffect(()=>{var Ie;if(!Be)return;const X=ls();if(!X)return;const de=window;(Ie=de.auth)!=null&&Ie.getAccessToken&&(async()=>{if(!await new Promise(De=>de.auth.getAccessToken(De)))return;const Ue=await J(`${X}/categories`);if(!Ue.ok)return;const Le=((await Ue.json()).categories??[]).map(De=>({id:De.PK||De.id||"",name:De.name||De.PK||"",description:De.description}));h(Le)})()},[Be]),i.useEffect(()=>{function X(de){G.current&&!G.current.contains(de.target)&&ie(!1)}if(K)return document.addEventListener("mousedown",X),()=>document.removeEventListener("mousedown",X)},[K]);const Xe=d.filter(X=>!q.includes(X.id)&&(!se.trim()||(X.name||"").toLowerCase().includes(se.toLowerCase()))),lt=X=>{var Ue;const de=(Ue=X.target.files)==null?void 0:Ue[0];if(E(de??null),de&&M(""),A(null),k&&(URL.revokeObjectURL(k),C(null)),!de)return;if(de.size>_v){A("Logo must be 5 MB or smaller.");return}const Ie=new Image;Ie.onload=()=>{if(Ie.naturalWidth<Cd||Ie.naturalHeight<Cd){A("Logo must be at least 100100 pixels.");return}A(null),C(URL.createObjectURL(de))},Ie.onerror=()=>A("Please choose a valid image file."),Ie.src=URL.createObjectURL(de)},nt=X=>{q.includes(X)||V([...q,X]),Y("")},$t=X=>{V(q.filter(de=>de!==X))},gn=async()=>{var Ie;const X=ls();if(!X){z("API URL not set."),B(!1);return}if(!((Ie=window.auth)!=null&&Ie.getAccessToken)){z("Sign in required."),B(!1);return}B(!0),z(null);try{const Ue=await J(`${X}/categories`);if(!Ue.ok)throw new Error(await Ue.text());const Le=((await Ue.json()).categories??[]).map(De=>({id:De.PK||De.id||"",name:De.name||De.PK||"",description:De.description}));h(Le)}catch(Ue){z((Ue==null?void 0:Ue.message)??"Failed to load categories.")}finally{B(!1)}};i.useEffect(()=>{Be&&o==="categories"&&gn()},[Be,o]);const Et=async()=>{var Ue;const X=f.trim();if(!X){S("Enter URL first.");return}const de=ls();if(!de){S("API URL not set.");return}if(!((Ue=window.auth)!=null&&Ue.getAccessToken)){S("Sign in required.");return}U(!0),S(null);try{const Ee=await J(`${de}/sites/generate-description`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:X})});if(!Ee.ok)throw new Error(await Ee.text());const Le=await Ee.json();N(Le.description??""),p(!0)}catch(Ee){S((Ee==null?void 0:Ee.message)??"Failed to generate description.")}finally{U(!1)}},ln=async X=>{var Ee;X.preventDefault();const de=f.trim();if(!de){S("URL is required.");return}const Ie=ls();if(!Ie){S("API URL not set.");return}if(!((Ee=window.auth)!=null&&Ee.getAccessToken)){S("Sign in required.");return}if(!(m&&I)){j(!0),S(null),$(null);try{let Le=null;if(Z.trim()){const gt=await J(`${Ie}/sites/logo-from-url`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({siteId:"new",imageUrl:Z.trim()})});if(!gt.ok){const bn=await gt.json().catch(()=>({}));throw new Error(bn.error||await gt.text())}const ut=await gt.json();ut.key&&(Le=ut.key)}else if(m){const gt=await J(`${Ie}/sites/logo-upload`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({siteId:"new",contentType:m.type||"image/png"})});if(!gt.ok)throw new Error("Logo upload request failed");const{uploadUrl:ut,key:bn}=await gt.json();if(!(await fetch(ut,{method:"PUT",headers:{"Content-Type":m.type||"image/png"},body:m})).ok)throw new Error("Logo upload failed");Le=bn}const De={url:de,title:v.trim()||de,description:y.trim(),categoryIds:q};x&&(De.descriptionAiGenerated=!0),Le&&(De.logoKey=Le);const yn=await J(`${Ie}/sites`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(De)});if(!yn.ok)throw new Error(await yn.text());const vn=await yn.json();$(`Site added: ${vn.title||vn.url||de}`),g(""),b(""),N(""),p(!1),E(null),k&&URL.revokeObjectURL(k),C(null),V([]),setTimeout(()=>e("/websites"),1500)}catch(Le){S((Le==null?void 0:Le.message)??"Failed to add site.")}finally{j(!1)}}},le=X=>{be(X.id),je(X.name),at(X.description??"")},xe=()=>{be(null),je(""),at(""),Te(null)},We=async X=>{var Ue;if(X.preventDefault(),!pe)return;const de=ls();if(!(!de||!((Ue=window.auth)!=null&&Ue.getAccessToken))){we(!0),Te(null);try{const Ee=await J(`${de}/categories`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:pe,name:Ne.trim(),description:Ke.trim()||void 0})});if(!Ee.ok)throw new Error(await Ee.text());h(Le=>Le.map(De=>De.id===pe?{...De,name:Ne.trim(),description:Ke.trim()||void 0}:De)),xe()}catch(Ee){Te((Ee==null?void 0:Ee.message)??"Failed to update category.")}finally{we(!1)}}},$e=async X=>{var Ue;if(!window.confirm("Delete this category? Sites using it will lose this category."))return;const de=ls();if(!(!de||!((Ue=window.auth)!=null&&Ue.getAccessToken))){_e(X);try{const Ee=await J(`${de}/categories?id=${encodeURIComponent(X)}`,{method:"DELETE"});if(!Ee.ok)throw new Error(await Ee.text());h(Le=>Le.filter(De=>De.id!==X)),pe===X&&xe()}catch(Ee){z((Ee==null?void 0:Ee.message)??"Failed to delete category.")}finally{_e(null)}}},ke=async X=>{var Ee;X.preventDefault();const de=Q.trim();if(!de)return;const Ie=ls();if(!(!Ie||!((Ee=window.auth)!=null&&Ee.getAccessToken))){O(!0),ce(null),z(null);try{const Le=await J(`${Ie}/categories`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:de,description:T.trim()})});if(!Le.ok)throw new Error(await Le.text());w(""),W(""),ce("Category created."),gn()}catch(Le){z((Le==null?void 0:Le.message)??"Failed to create category.")}finally{O(!1)}}};return Be?s.jsxs("div",{className:"space-y-6",children:[s.jsxs(oe,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Websites"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Websites"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Add sites and manage website categories."})]}),s.jsxs("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:[s.jsx("button",{type:"button",onClick:()=>u("add"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="add"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Add Site"}),s.jsx("button",{type:"button",onClick:()=>u("categories"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="categories"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Website Categories"})]}),o==="add"&&s.jsxs("form",{className:"space-y-4 max-w-xl",onSubmit:ln,children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"URL *"}),s.jsx("input",{type:"url",value:f,onChange:X=>g(X.target.value),placeholder:"https://example.com",required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Title (optional)"}),s.jsx("input",{type:"text",value:v,onChange:X=>b(X.target.value),placeholder:"Display title",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description (optional)"}),s.jsx("textarea",{value:y,onChange:X=>{N(X.target.value),p(!1)},placeholder:"Short description",rows:4,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("button",{type:"button",onClick:Et,disabled:H||!f.trim(),className:"mt-2 rounded-md border border-slate-700 bg-slate-800 px-3 py-1.5 text-xs font-medium text-slate-200 hover:bg-slate-700 disabled:opacity-50",children:H?"Generating":"Generate AI description"}),x&&s.jsx("span",{className:"ml-2 text-xs uppercase tracking-wide text-slate-500",children:"AI summary"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Logo (optional, min 100100, max 5 MB)"}),s.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/gif,image/webp",onChange:lt,className:"block w-full text-xs text-slate-300 file:mr-3 file:rounded-md file:border-0 file:bg-slate-800 file:px-3 file:py-1.5 file:text-slate-100"}),s.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Or paste image URL (image will be copied to S3 on save):"}),s.jsx("input",{type:"url",value:Z,onChange:X=>{M(X.target.value),X.target.value.trim()&&E(null)},placeholder:"https://example.com/logo.png",className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),k&&s.jsx("div",{className:"mt-2",children:s.jsx("img",{src:k,alt:"Preview",className:"h-16 w-16 rounded-lg border border-slate-700 object-cover"})}),I&&s.jsx("p",{className:"mt-1 text-xs text-red-400",children:I})]}),s.jsxs("div",{ref:G,className:"relative",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Categories (optional)"}),s.jsx("input",{type:"text",value:se,onChange:X=>Y(X.target.value),onFocus:()=>ie(!0),placeholder:"Search and select",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),K&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"absolute left-0 right-0 top-full z-10 mt-1 max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",children:Xe.length?Xe.map(X=>s.jsx("button",{type:"button",onClick:()=>nt(X.id),className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:X.name},X.id)):s.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:"No matches"})}),d.length===0&&s.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["No categories."," ",s.jsx("button",{type:"button",onClick:()=>u("categories"),className:"text-brand-orange hover:underline",children:"Create categories"})]})]}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:q.map(X=>{const de=d.find(Ie=>Ie.id===X);return s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(de==null?void 0:de.name)??X,s.jsx("button",{type:"button",onClick:()=>$t(X),className:"hover:text-red-400","aria-label":"Remove",children:""})]},X)})})]}),s.jsx("button",{type:"submit",disabled:fe,className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:fe?"Adding":"Add Site"}),P&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:P}),F&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:F})]}),o==="categories"&&s.jsxs(s.Fragment,{children:[s.jsxs("form",{className:"space-y-3 max-w-md",onSubmit:ke,children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"New category name"}),s.jsx("input",{type:"text",value:Q,onChange:X=>w(X.target.value),placeholder:"e.g. Developer tools",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description (optional)"}),s.jsx("input",{type:"text",value:T,onChange:X=>W(X.target.value),placeholder:"Optional description",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsx("button",{type:"submit",disabled:re||!Q.trim(),className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:re?"Creating":"Create category"}),ne&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:ne}),D&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:D})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-sm font-medium text-slate-300 mb-2",children:"Existing categories"}),_?s.jsx("p",{className:"text-sm text-slate-500",children:"Loading"}):d.length===0?s.jsx("p",{className:"text-sm text-slate-500",children:"No categories yet. Create one above."}):s.jsx("ul",{className:"space-y-2",children:d.map(X=>s.jsx("li",{className:"rounded-lg border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm",children:pe===X.id?s.jsxs("form",{onSubmit:We,className:"space-y-2",children:[s.jsx("input",{type:"text",value:Ne,onChange:de=>je(de.target.value),placeholder:"Name",required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",autoFocus:!0}),s.jsx("input",{type:"text",value:Ke,onChange:de=>at(de.target.value),placeholder:"Description (optional)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsxs("div",{className:"flex gap-2 flex-wrap",children:[s.jsx("button",{type:"submit",disabled:ae||!Ne.trim(),className:"rounded-md bg-brand-orange px-3 py-1.5 text-xs font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:ae?"Saving":"Save"}),s.jsx("button",{type:"button",onClick:xe,className:"rounded-md border border-slate-700 px-3 py-1.5 text-xs font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"}),s.jsx("button",{type:"button",onClick:()=>$e(X.id),disabled:Se===X.id,className:"rounded-md border border-red-500/60 px-3 py-1.5 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:Se===X.id?"Deleting":"Delete"})]}),Fe&&s.jsx("p",{className:"text-xs text-red-400",children:Fe})]}):s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>le(X),className:"flex-1 min-w-0 text-left hover:bg-slate-800/50 rounded px-1 -mx-1 py-1 -my-1 transition-colors",children:[s.jsx("span",{className:"font-medium text-slate-200",children:X.name}),X.description&&s.jsx("span",{className:"text-slate-500 truncate max-w-xs ml-2",children:X.description})]}),s.jsx("button",{type:"button",onClick:()=>$e(X.id),disabled:Se===X.id,className:"rounded px-2 py-1 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50 shrink-0","aria-label":"Delete category",children:Se===X.id?"":"Delete"})]})},X.id))})]})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Websites"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})};function Es(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function zv(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}const Gv=()=>{const e=Vt(),{user:t}=Oe(),[n,r]=qt(),a=n.get("tab"),l=a==="categories"?"categories":"add",[o,c]=i.useState(l);i.useEffect(()=>{c(a==="categories"?"categories":"add")},[a]);const u=le=>{c(le);const xe=new URLSearchParams(n);le==="categories"?xe.set("tab","categories"):xe.delete("tab"),r(xe)},[d,h]=i.useState([]),[f,g]=i.useState(""),[v,b]=i.useState(""),[y,N]=i.useState(null),[x,p]=i.useState(null),[m,E]=i.useState(null),[k,C]=i.useState(!1),[I,A]=i.useState([]),[Z,M]=i.useState(""),[q,V]=i.useState(!1),[se,Y]=i.useState(!1),[K,ie]=i.useState(null),[fe,j]=i.useState(null),P=i.useRef(null),[$,F]=i.useState(!0),[S,H]=i.useState(null),[U,G]=i.useState(""),[_,B]=i.useState(""),[D,z]=i.useState(!1),[Q,w]=i.useState(null),[T,W]=i.useState(null),[re,O]=i.useState(""),[ne,ce]=i.useState(""),[pe,be]=i.useState(!1),[Ne,je]=i.useState(null),[Ke,at]=i.useState(null),ae=ct(t??null,"manager");i.useEffect(()=>{if(!ae)return;const le=Es();le&&(async()=>{try{const xe=await J(`${le}/media-categories`);if(!xe.ok)return;const $e=((await xe.json()).categories??[]).map(ke=>({id:ke.PK||ke.id||"",name:ke.name||ke.PK||"",description:ke.description}));h($e)}catch{}})()},[ae]),i.useEffect(()=>{function le(xe){P.current&&!P.current.contains(xe.target)&&V(!1)}if(q)return document.addEventListener("mousedown",le),()=>document.removeEventListener("mousedown",le)},[q]);const we=d.filter(le=>!I.includes(le.id)&&(!Z.trim()||(le.name||"").toLowerCase().includes(Z.toLowerCase()))),Fe=le=>{var We;const xe=(We=le.target.files)==null?void 0:We[0];N(xe??null),E(null),j(null),x&&(URL.revokeObjectURL(x),p(null)),xe&&(p(URL.createObjectURL(xe)),xe.type.startsWith("video/")&&C(!0))},Te=i.useRef(null),Se=le=>{var We;const xe=(We=le.target.files)==null?void 0:We[0];xe&&xe.type.startsWith("image/")&&(E(xe),C(!1)),le.target.value=""},_e=le=>{I.includes(le)||A([...I,le]),M("")},Be=le=>{A(I.filter(xe=>xe!==le))},Xe=async()=>{var We;const le=Es();if(!le){H("API URL not set."),F(!1);return}if(!((We=window.auth)!=null&&We.getAccessToken)){H("Sign in required."),F(!1);return}F(!0),H(null);try{const $e=await J(`${le}/media-categories`);if(!$e.ok)throw new Error(await $e.text());const X=((await $e.json()).categories??[]).map(de=>({id:de.PK||de.id||"",name:de.name||de.PK||"",description:de.description}));h(X)}catch($e){H(($e==null?void 0:$e.message)??"Failed to load media categories.")}finally{F(!1)}};i.useEffect(()=>{ae&&o==="categories"&&Xe()},[ae,o]);const lt=async le=>{var X;if(le.preventDefault(),!y){j("Please select an image or video file.");return}const xe=Es();if(!xe){j("API URL not set.");return}if(!((X=window.auth)!=null&&X.getAccessToken)){j("Sign in required.");return}const $e=y.type.startsWith("video/")?"video":"image",ke=`MEDIA#${zv()}`;Y(!0),j(null),ie(null);try{const de=await J(`${xe}/media/upload`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mediaId:ke,mediaType:$e,contentType:y.type||($e==="image"?"image/png":"video/mp4")})});if(!de.ok)throw new Error("Upload request failed");const{uploadUrl:Ie,key:Ue}=await de.json(),Ee=await J(`${xe}/media`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:ke,mediaKey:Ue,title:f.trim()||"Untitled",description:v.trim(),mediaType:$e,categoryIds:I})});if(!Ee.ok)throw new Error(await Ee.text());if(!(await fetch(Ie,{method:"PUT",headers:{"Content-Type":y.type||($e==="image"?"image/png":"video/mp4")},body:y})).ok)throw new Error("File upload failed");if($e==="video"&&m){const De=await J(`${xe}/media/thumbnail-upload`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mediaId:ke,contentType:m.type||"image/jpeg"})});if(De.ok){const{uploadUrl:yn,key:vn}=await De.json();(await fetch(yn,{method:"PUT",headers:{"Content-Type":m.type||"image/jpeg"},body:m})).ok&&((await J(`${xe}/media`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:ke,thumbnailKey:vn})})).ok||console.warn("Thumbnail uploaded but update failed"))}}ie("Media added."),g(""),b(""),N(null),E(null),x&&URL.revokeObjectURL(x),p(null),A([]),setTimeout(()=>e("/media"),1500)}catch(de){j((de==null?void 0:de.message)??"Failed to add media.")}finally{Y(!1)}},nt=le=>{W(le.id),O(le.name),ce(le.description??"")},$t=()=>{W(null),O(""),ce(""),je(null)},gn=async le=>{var $e;if(le.preventDefault(),!T)return;const xe=Es();if(!(!xe||!(($e=window.auth)!=null&&$e.getAccessToken))){be(!0),je(null);try{const ke=await J(`${xe}/media-categories`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:T,name:re.trim(),description:ne.trim()||void 0})});if(!ke.ok)throw new Error(await ke.text());h(X=>X.map(de=>de.id===T?{...de,name:re.trim(),description:ne.trim()||void 0}:de)),$t()}catch(ke){je((ke==null?void 0:ke.message)??"Failed to update media category.")}finally{be(!1)}}},Et=async le=>{var $e;if(!window.confirm("Delete this media category? Media using it will lose this category."))return;const xe=Es();if(!(!xe||!(($e=window.auth)!=null&&$e.getAccessToken))){at(le);try{const ke=await J(`${xe}/media-categories?id=${encodeURIComponent(le)}`,{method:"DELETE"});if(!ke.ok)throw new Error(await ke.text());h(X=>X.filter(de=>de.id!==le)),T===le&&$t()}catch(ke){H((ke==null?void 0:ke.message)??"Failed to delete media category.")}finally{at(null)}}},ln=async le=>{var ke;le.preventDefault();const xe=U.trim();if(!xe)return;const We=Es();if(!(!We||!((ke=window.auth)!=null&&ke.getAccessToken))){z(!0),w(null),H(null);try{const X=await J(`${We}/media-categories`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:xe,description:_.trim()})});if(!X.ok)throw new Error(await X.text());G(""),B(""),w("Media category created."),Xe()}catch(X){H((X==null?void 0:X.message)??"Failed to create media category.")}finally{z(!1)}}};return ae?s.jsxs("div",{className:"space-y-6",children:[s.jsxs(oe,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Media"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Media"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Add media and manage media categories."})]}),s.jsxs("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:[s.jsx("button",{type:"button",onClick:()=>u("add"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="add"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Add Media"}),s.jsx("button",{type:"button",onClick:()=>u("categories"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="categories"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Media Categories"})]}),o==="add"&&s.jsxs("form",{className:"space-y-4 max-w-xl",onSubmit:lt,children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Title (optional)"}),s.jsx("input",{type:"text",value:f,onChange:le=>g(le.target.value),placeholder:"Untitled",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description (optional)"}),s.jsx("textarea",{value:v,onChange:le=>b(le.target.value),placeholder:"Description",rows:3,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Image or video *"}),s.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/gif,image/webp,video/mp4,video/webm",onChange:Fe,className:"block w-full text-xs text-slate-300 file:mr-3 file:rounded-md file:border-0 file:bg-slate-800 file:px-3 file:py-1.5 file:text-slate-100"}),s.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Videos get an auto-generated thumbnail from the 34 sec frame. Change it when editing."}),(y==null?void 0:y.type.startsWith("video/"))&&m&&s.jsxs("p",{className:"mt-1 text-xs text-emerald-400",children:["Custom thumbnail: ",m.name," ",s.jsx("button",{type:"button",onClick:()=>C(!0),className:"text-brand-orange hover:underline",children:"Change"})]}),k&&(y==null?void 0:y.type.startsWith("video/"))&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",role:"dialog","aria-modal":"true","aria-labelledby":"thumbnail-dialog-title",onClick:()=>C(!1),children:s.jsxs("div",{className:"rounded-lg border border-slate-700 bg-slate-900 p-6 shadow-xl max-w-sm w-full mx-4",onClick:le=>le.stopPropagation(),children:[s.jsx("h2",{id:"thumbnail-dialog-title",className:"text-lg font-medium text-slate-100 mb-2",children:"Add thumbnail"}),s.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"Choose a custom thumbnail image for this video (optional)."}),s.jsx("input",{ref:Te,type:"file",accept:"image/png,image/jpeg,image/gif,image/webp",onChange:Se,className:"hidden"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:()=>{var le;return(le=Te.current)==null?void 0:le.click()},className:"rounded-md bg-slate-700 px-3 py-2 text-sm font-medium text-slate-100 hover:bg-slate-600",children:"Choose file"}),s.jsx("button",{type:"button",onClick:()=>C(!1),className:"rounded-md border border-slate-600 px-3 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Skip"})]})]})}),x&&s.jsx("div",{className:"mt-2",children:y!=null&&y.type.startsWith("video/")?s.jsx("video",{src:x,muted:!0,controls:!0,className:"max-h-32 rounded-lg border border-slate-700"}):s.jsx("img",{src:x,alt:"Preview",className:"h-24 w-auto rounded-lg border border-slate-700 object-cover"})})]}),s.jsxs("div",{ref:P,className:"relative",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Media categories (optional)"}),s.jsx("input",{type:"text",value:Z,onChange:le=>M(le.target.value),onFocus:()=>V(!0),placeholder:"Search and select",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),q&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"absolute left-0 right-0 top-full z-10 mt-1 max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",children:we.length?we.map(le=>s.jsx("button",{type:"button",onClick:()=>_e(le.id),className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:le.name},le.id)):s.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:"No matches"})}),d.length===0&&s.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["No categories."," ",s.jsx("button",{type:"button",onClick:()=>u("categories"),className:"text-brand-orange hover:underline",children:"Create media categories"})]})]}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:I.map(le=>{const xe=d.find(We=>We.id===le);return s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(xe==null?void 0:xe.name)??le,s.jsx("button",{type:"button",onClick:()=>Be(le),className:"hover:text-red-400","aria-label":"Remove",children:""})]},le)})})]}),s.jsx("button",{type:"submit",disabled:se||!y,className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:se?"Uploading":"Add Media"}),K&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:K}),fe&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:fe})]}),o==="categories"&&s.jsxs(s.Fragment,{children:[s.jsxs("form",{className:"space-y-3 max-w-md",onSubmit:ln,children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"New category name"}),s.jsx("input",{type:"text",value:U,onChange:le=>G(le.target.value),placeholder:"e.g. Tutorials",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description (optional)"}),s.jsx("input",{type:"text",value:_,onChange:le=>B(le.target.value),placeholder:"Optional description",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsx("button",{type:"submit",disabled:D||!U.trim(),className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:D?"Creating":"Create media category"}),Q&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:Q}),S&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:S})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-sm font-medium text-slate-300 mb-2",children:"Existing media categories"}),$?s.jsx("p",{className:"text-sm text-slate-500",children:"Loading"}):d.length===0?s.jsx("p",{className:"text-sm text-slate-500",children:"No media categories yet. Create one above."}):s.jsx("ul",{className:"space-y-2",children:d.map(le=>s.jsx("li",{className:"rounded-lg border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm",children:T===le.id?s.jsxs("form",{onSubmit:gn,className:"space-y-2",children:[s.jsx("input",{type:"text",value:re,onChange:xe=>O(xe.target.value),placeholder:"Name",required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",autoFocus:!0}),s.jsx("input",{type:"text",value:ne,onChange:xe=>ce(xe.target.value),placeholder:"Description (optional)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsxs("div",{className:"flex gap-2 flex-wrap",children:[s.jsx("button",{type:"submit",disabled:pe||!re.trim(),className:"rounded-md bg-brand-orange px-3 py-1.5 text-xs font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:pe?"Saving":"Save"}),s.jsx("button",{type:"button",onClick:$t,className:"rounded-md border border-slate-700 px-3 py-1.5 text-xs font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"}),s.jsx("button",{type:"button",onClick:()=>Et(le.id),disabled:Ke===le.id,className:"rounded-md border border-red-500/60 px-3 py-1.5 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:Ke===le.id?"Deleting":"Delete"})]}),Ne&&s.jsx("p",{className:"text-xs text-red-400",children:Ne})]}):s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>nt(le),className:"flex-1 min-w-0 text-left hover:bg-slate-800/50 rounded px-1 -mx-1 py-1 -my-1 transition-colors",children:[s.jsx("span",{className:"font-medium text-slate-200",children:le.name}),le.description&&s.jsx("span",{className:"text-slate-500 truncate max-w-xs ml-2",children:le.description})]}),s.jsx("button",{type:"button",onClick:()=>Et(le.id),disabled:Ke===le.id,className:"rounded px-2 py-1 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50 shrink-0","aria-label":"Delete category",children:Ke===le.id?"":"Delete"})]})},le.id))})]})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Media"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})};function Ia(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Ed=100,Wv=5*1024*1024,Hv=()=>{const{id:e}=ir(),t=Vt(),{user:n}=Oe(),[r,a]=i.useState(!0),[l,o]=i.useState(""),[c,u]=i.useState(""),[d,h]=i.useState(""),[f,g]=i.useState(!1),[v,b]=i.useState([]),[y,N]=i.useState(""),[x,p]=i.useState(""),[m,E]=i.useState(null),[k,C]=i.useState(!1),[I,A]=i.useState(null),[Z,M]=i.useState(""),[q,V]=i.useState(null),[se,Y]=i.useState(null),[K,ie]=i.useState([]),[fe,j]=i.useState([]),[P,$]=i.useState(""),[F,S]=i.useState(!1),[H,U]=i.useState(!1),[G,_]=i.useState(!1),[B,D]=i.useState(!1),[z,Q]=i.useState(null),[w,T]=i.useState(null),W=ct(n??null,"manager"),re=e?decodeURIComponent(e):"";i.useEffect(()=>{var Te;if(!W||!re){a(!1);return}const ae=Ia();if(!ae){T("API URL not set."),a(!1);return}if(!((Te=window.auth)!=null&&Te.getAccessToken)){T("Sign in required."),a(!1);return}let Fe=!1;return(async()=>{try{const Se=await J(`${ae}/sites?id=${encodeURIComponent(re)}`);if(Se.status===404||!Se.ok){Fe||T("Site not found.");return}const Be=(await Se.json()).site;if(Fe||!Be)return;o(Be.url??""),u(Be.title??""),h(Be.description??""),g(!!Be.descriptionAiGenerated),b(Array.isArray(Be.tags)?Be.tags:[]),N(""),p(Be.scrapedContent??""),E(Be.logoUrl||null),j(Array.isArray(Be.categoryIds)?Be.categoryIds:[]);const Xe=await J(`${ae}/categories`);if(Xe.ok&&!Fe){const lt=await Xe.json();ie((lt.categories??[]).map(nt=>({id:nt.PK||nt.id||"",name:nt.name||nt.PK||""})))}}catch(Se){Fe||T((Se==null?void 0:Se.message)??"Failed to load.")}finally{Fe||a(!1)}})(),()=>{Fe=!0}},[W,re]);const O=ae=>{var Te;const we=(Te=ae.target.files)==null?void 0:Te[0];if(A(we??null),M(""),Y(null),C(!1),q&&(URL.revokeObjectURL(q),V(null)),!we)return;if(we.size>Wv){Y("Logo must be 5 MB or smaller.");return}const Fe=new Image;Fe.onload=()=>{if(Fe.naturalWidth<Ed||Fe.naturalHeight<Ed){Y("Logo must be at least 100100 pixels.");return}Y(null),V(URL.createObjectURL(we))},Fe.onerror=()=>Y("Please choose a valid image file."),Fe.src=URL.createObjectURL(we)},ne=ae=>{fe.includes(ae)||j([...fe,ae]),$(""),S(!1)},ce=ae=>{j(fe.filter(we=>we!==ae))},pe=()=>{const ae=y.trim();ae&&!v.includes(ae)&&b([...v,ae]),N("")},be=ae=>b(v.filter(we=>we!==ae)),Ne=K.filter(ae=>!fe.includes(ae.id)&&(!P.trim()||(ae.name||"").toLowerCase().includes(P.toLowerCase()))),je=async()=>{var Te;const ae=l.trim();if(!ae){T("Enter URL first.");return}const we=Ia();if(!we){T("API URL not set.");return}if(!((Te=window.auth)!=null&&Te.getAccessToken)){T("Sign in required.");return}D(!0),T(null);try{const Se=await J(`${we}/sites/generate-description`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:ae})});if(!Se.ok)throw new Error(await Se.text());const _e=await Se.json();h(_e.description??""),g(!0)}catch(Se){T((Se==null?void 0:Se.message)??"Failed to generate description.")}finally{D(!1)}},Ke=async ae=>{var Te;if(ae.preventDefault(),!re)return;const we=Ia();if(!we){T("API URL not set.");return}if(!((Te=window.auth)!=null&&Te.getAccessToken)){T("Sign in required.");return}if(!(I&&se)){U(!0),T(null),Q(null);try{let Se=null;if(I){const Xe=await J(`${we}/sites/logo-upload`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({siteId:re,contentType:I.type||"image/png"})});if(!Xe.ok)throw new Error("Logo upload request failed");const{uploadUrl:lt,key:nt}=await Xe.json();if(!(await fetch(lt,{method:"PUT",headers:{"Content-Type":I.type||"image/png"},body:I})).ok)throw new Error("Logo upload failed");Se=nt}else if(Z.trim()){const Xe=await J(`${we}/sites/logo-from-url`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({siteId:re,imageUrl:Z.trim()})});if(!Xe.ok){const nt=await Xe.json().catch(()=>({}));throw new Error(nt.error||await Xe.text())}const lt=await Xe.json();lt.key&&(Se=lt.key)}const _e={id:re,url:l.trim(),title:c.trim()||l.trim(),description:d.trim(),descriptionAiGenerated:f,categoryIds:fe,tags:v,scrapedContent:x.trim()||void 0};k?_e.deleteLogo=!0:Se&&(_e.logoKey=Se);const Be=await J(`${we}/sites`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(_e)});if(!Be.ok)throw new Error(await Be.text());Q("Site updated."),q&&URL.revokeObjectURL(q),A(null),V(null),M(""),setTimeout(()=>t(`/websites/${encodeURIComponent(re)}`),1200)}catch(Se){T((Se==null?void 0:Se.message)??"Failed to update site.")}finally{U(!1)}}},at=async()=>{var Fe;if(!re||!window.confirm("Delete this site? This cannot be undone."))return;const ae=Ia();if(!(!ae||!((Fe=window.auth)!=null&&Fe.getAccessToken))){_(!0),T(null);try{const Te=await J(`${ae}/sites`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:re})});if(!Te.ok)throw new Error(await Te.text());t("/websites")}catch(Te){T((Te==null?void 0:Te.message)??"Failed to delete site.")}finally{_(!1)}}};return W?r?s.jsxs("div",{className:"space-y-4",children:[s.jsxs(oe,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Websites"]}),s.jsx("p",{className:"text-sm text-slate-400",children:"Loading"})]}):w&&!l&&!c?s.jsxs("div",{className:"space-y-4",children:[s.jsxs(oe,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Websites"]}),s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:w})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs(oe,{to:`/websites/${encodeURIComponent(re)}`,className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to site"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit Site"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Update URL, title, description, logo, categories, and scraped content."})]}),s.jsxs("form",{className:"space-y-4 max-w-xl",onSubmit:Ke,children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"URL *"}),s.jsx("input",{type:"url",value:l,onChange:ae=>o(ae.target.value),required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Title"}),s.jsx("input",{type:"text",value:c,onChange:ae=>u(ae.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description"}),s.jsx("textarea",{value:d,onChange:ae=>{h(ae.target.value),g(!1)},placeholder:"Short description",rows:4,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("button",{type:"button",onClick:je,disabled:B||!l.trim(),className:"mt-2 rounded-md border border-slate-700 bg-slate-800 px-3 py-1.5 text-xs font-medium text-slate-200 hover:bg-slate-700 disabled:opacity-50",children:B?"Generating":"Generate AI description"}),f&&s.jsx("span",{className:"ml-2 text-xs uppercase tracking-wide text-slate-500",children:"AI summary"}),s.jsxs("label",{className:"mt-2 block inline-flex items-center gap-2 text-xs text-slate-500",children:[s.jsx("input",{type:"checkbox",checked:f,onChange:ae=>g(ae.target.checked)}),"AI-generated summary"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Logo"}),m&&!k&&!q&&s.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[s.jsx("img",{src:m,alt:"Current logo",className:"h-12 w-12 rounded-lg border border-slate-700 object-cover"}),s.jsxs("label",{className:"text-xs text-slate-400",children:[s.jsx("input",{type:"checkbox",checked:k,onChange:ae=>C(ae.target.checked)}),s.jsx("span",{className:"ml-1",children:"Remove logo"})]})]}),s.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/gif,image/webp",onChange:O,className:"block w-full text-xs text-slate-300 file:mr-3 file:rounded-md file:border-0 file:bg-slate-800 file:px-3 file:py-1.5 file:text-slate-100"}),s.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Or paste image URL (image will be copied to S3 on save):"}),s.jsx("input",{type:"url",value:Z,onChange:ae=>{M(ae.target.value),ae.target.value.trim()&&A(null)},placeholder:"https://example.com/logo.png",className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),q&&s.jsx("div",{className:"mt-2",children:s.jsx("img",{src:q,alt:"New logo",className:"h-16 w-16 rounded-lg border border-slate-700 object-cover"})}),se&&s.jsx("p",{className:"mt-1 text-xs text-red-400",children:se})]}),s.jsxs("div",{className:"relative",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Categories"}),s.jsx("input",{type:"text",value:P,onChange:ae=>$(ae.target.value),onFocus:()=>S(!0),placeholder:"Search and select",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),F&&s.jsx("div",{className:"absolute left-0 right-0 top-full z-10 mt-1 max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",children:Ne.length?Ne.map(ae=>s.jsx("button",{type:"button",onClick:()=>ne(ae.id),className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:ae.name},ae.id)):s.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:"No matches"})}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:fe.map(ae=>{const we=K.find(Fe=>Fe.id===ae);return s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(we==null?void 0:we.name)??ae,s.jsx("button",{type:"button",onClick:()=>ce(ae),className:"hover:text-red-400","aria-label":"Remove",children:""})]},ae)})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Tags"}),s.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:v.map(ae=>s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[ae,s.jsx("button",{type:"button",onClick:()=>be(ae),className:"hover:text-red-400","aria-label":"Remove",children:""})]},ae))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:y,onChange:ae=>N(ae.target.value),onKeyDown:ae=>ae.key==="Enter"&&(ae.preventDefault(),pe()),placeholder:"Add tag",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("button",{type:"button",onClick:pe,className:"rounded-md border border-slate-700 bg-slate-800 px-3 py-2 text-sm text-slate-200 hover:bg-slate-700",children:"Add"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Scraped content (optional)"}),s.jsx("textarea",{value:x,onChange:ae=>p(ae.target.value),rows:6,placeholder:"Paste or edit scraped content (e.g. README, about page)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm font-mono text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsx("button",{type:"submit",disabled:H,className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:H?"Saving":"Save changes"}),s.jsx("button",{type:"button",onClick:at,disabled:G||H,className:"rounded-md border border-red-500/60 px-4 py-2 text-sm font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:G?"Deleting":"Delete entry"})]}),z&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:z}),w&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:w})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit Site"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})};function Ps(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Kv=()=>{const{id:e}=ir(),t=Vt(),{user:n}=Oe(),[r,a]=i.useState(!0),[l,o]=i.useState(""),[c,u]=i.useState(""),[d,h]=i.useState(null),[f,g]=i.useState(null),[v,b]=i.useState("image"),[y,N]=i.useState(!1),[x,p]=i.useState(!1),[m,E]=i.useState(!1),[k,C]=i.useState([]),[I,A]=i.useState([]),[Z,M]=i.useState(""),[q,V]=i.useState(!1),[se,Y]=i.useState(!1),[K,ie]=i.useState(!1),[fe,j]=i.useState(null),[P,$]=i.useState(null),F=ct(n??null,"manager"),S=e?decodeURIComponent(e):"";i.useEffect(()=>{var re;if(!F||!S){a(!1);return}const w=Ps();if(!w){$("API URL not set."),a(!1);return}if(!((re=window.auth)!=null&&re.getAccessToken)){$("Sign in required."),a(!1);return}let W=!1;return(async()=>{try{const O=await J(`${w}/media?id=${encodeURIComponent(S)}`);if(O.status===404||!O.ok){W||$("Media not found.");return}const ne=await O.json(),ce=Array.isArray(ne.media)?ne.media[0]:ne.media;if(W||!ce)return;const pe=ce;o(pe.title??""),u(pe.description??""),h(pe.mediaUrl||null),g(pe.thumbnailUrl||null),b(pe.mediaType||"image"),A(Array.isArray(pe.categoryIds)?pe.categoryIds:[]);const be=await J(`${w}/media-categories`);if(be.ok&&!W){const Ne=await be.json();C((Ne.categories??[]).map(je=>({id:je.PK||je.id||"",name:je.name||je.PK||""})))}}catch(O){W||$((O==null?void 0:O.message)??"Failed to load.")}finally{W||a(!1)}})(),()=>{W=!0}},[F,S]);const H=w=>{I.includes(w)||A([...I,w]),M(""),V(!1)},U=w=>{A(I.filter(T=>T!==w))},G=k.filter(w=>!I.includes(w.id)&&(!Z.trim()||(w.name||"").toLowerCase().includes(Z.toLowerCase()))),_=async w=>{var re;if(w.preventDefault(),!S)return;const T=Ps();if(!T){$("API URL not set.");return}const W=window;if(!((re=W.auth)!=null&&re.getAccessToken)){$("Sign in required.");return}Y(!0),$(null),j(null);try{const O=await new Promise(ce=>W.auth.getAccessToken(ce)),ne=await J(`${T}/media`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${O}`},body:JSON.stringify({id:S,title:l.trim()||"Untitled",description:c.trim(),categoryIds:I})});if(!ne.ok)throw new Error(await ne.text());j("Media updated."),setTimeout(()=>t("/media"),1200)}catch(O){$((O==null?void 0:O.message)??"Failed to update media.")}finally{Y(!1)}},B=async w=>{var O,ne;const T=(O=w.target.files)==null?void 0:O[0];if(!T||!S)return;if(!T.type.startsWith("image/")){$("Please choose an image (PNG, JPEG, GIF, WebP).");return}const W=Ps();if(!W)return;const re=window;if((ne=re.auth)!=null&&ne.getAccessToken){p(!0),$(null),j(null);try{const ce=await new Promise(ae=>re.auth.getAccessToken(ae)),pe=await J(`${W}/media/thumbnail-upload`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ce}`},body:JSON.stringify({mediaId:S,contentType:T.type||"image/png"})});if(!pe.ok)throw new Error("Upload request failed");const{uploadUrl:be,key:Ne}=await pe.json();if(!(await fetch(be,{method:"PUT",headers:{"Content-Type":T.type||"image/png"},body:T})).ok)throw new Error("File upload failed");const Ke=await J(`${W}/media`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ce}`},body:JSON.stringify({id:S,thumbnailKey:Ne})});if(!Ke.ok)throw new Error(await Ke.text());const at=await J(`${W}/media?id=${encodeURIComponent(S)}`);if(at.ok){const ae=await at.json(),we=Array.isArray(ae.media)?ae.media[0]:ae.media;we!=null&&we.thumbnailUrl&&g(we.thumbnailUrl)}j("Logo/thumbnail updated.")}catch(ce){$((ce==null?void 0:ce.message)??"Failed to upload thumbnail.")}finally{p(!1),w.target.value=""}}},D=async()=>{var W;if(!S||!window.confirm("Remove the custom logo/thumbnail? You can regenerate from video or upload a new one."))return;const w=Ps();if(!w)return;const T=window;if((W=T.auth)!=null&&W.getAccessToken){E(!0),$(null),j(null);try{const re=await new Promise(ne=>T.auth.getAccessToken(ne)),O=await J(`${w}/media`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${re}`},body:JSON.stringify({id:S,deleteThumbnail:!0})});if(!O.ok)throw new Error(await O.text());g(null),j("Logo/thumbnail removed.")}catch(re){$((re==null?void 0:re.message)??"Failed to remove thumbnail.")}finally{E(!1)}}},z=async()=>{var W;if(!S)return;const w=Ps();if(!w)return;const T=window;if((W=T.auth)!=null&&W.getAccessToken){N(!0),$(null),j(null);try{const re=await new Promise(ce=>T.auth.getAccessToken(ce)),O=await J(`${w}/media/regenerate-thumbnail`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${re}`},body:JSON.stringify({mediaId:S})});if(!O.ok)throw new Error(await O.text());j("Thumbnail regeneration started. New thumbnail will appear in 3060 seconds.");const ne=async ce=>{if(ce>6)return;await new Promise(be=>setTimeout(be,1e4));const pe=await J(`${w}/media?id=${encodeURIComponent(S)}`);if(pe.ok){const be=await pe.json(),Ne=Array.isArray(be.media)?be.media[0]:be.media;if(Ne!=null&&Ne.thumbnailUrl){g(Ne.thumbnailUrl),j("Thumbnail updated.");return}}ne(ce+1)};ne(1)}catch(re){$((re==null?void 0:re.message)??"Failed to regenerate thumbnail.")}finally{N(!1)}}},Q=async()=>{var W;if(!S||!window.confirm("Delete this media item? This cannot be undone."))return;const w=Ps();if(!w)return;const T=window;if((W=T.auth)!=null&&W.getAccessToken){ie(!0),$(null);try{const re=await new Promise(ne=>T.auth.getAccessToken(ne)),O=await J(`${w}/media?id=${encodeURIComponent(S)}`,{method:"DELETE",headers:{Authorization:`Bearer ${re}`}});if(!O.ok)throw new Error(await O.text());t("/media")}catch(re){$((re==null?void 0:re.message)??"Failed to delete media.")}finally{ie(!1)}}};return F?r?s.jsxs("div",{className:"space-y-4",children:[s.jsxs(oe,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Media"]}),s.jsx("p",{className:"text-sm text-slate-400",children:"Loading"})]}):P&&!l&&!c?s.jsxs("div",{className:"space-y-4",children:[s.jsxs(oe,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Media"]}),s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:P})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs(oe,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Media"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit Media"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Update title, description, and categories. The file itself cannot be changed here."})]}),d&&s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 overflow-hidden max-w-2xl",children:[s.jsx("p",{className:"px-4 py-2 text-xs font-medium text-slate-400 border-b border-slate-800",children:"Current media"}),s.jsx("div",{className:"p-4 flex justify-center items-center bg-slate-900/40 min-h-[160px]",children:v==="video"?s.jsx("video",{src:d,controls:!0,className:"max-w-full max-h-[50vh] rounded-lg border border-slate-700",playsInline:!0}):s.jsx("img",{src:d,alt:l||"Media",className:"max-w-full max-h-[50vh] w-auto h-auto object-contain rounded-lg border border-slate-700"})}),v==="video"&&s.jsxs("div",{className:"px-4 py-3 border-t border-slate-800 space-y-2",children:[s.jsx("p",{className:"text-xs font-medium text-slate-400",children:"Logo / Thumbnail"}),s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[f&&s.jsx("img",{src:f,alt:"Thumbnail",className:"h-16 w-auto rounded border border-slate-700 object-cover"}),s.jsx("button",{type:"button",onClick:z,disabled:y,className:"rounded-md border border-slate-600 px-3 py-1.5 text-sm font-medium text-slate-200 hover:bg-slate-800 disabled:opacity-50",children:y?"Regenerating":"Take screenshot"}),s.jsxs("label",{className:"cursor-pointer rounded-md border border-slate-600 px-3 py-1.5 text-sm font-medium text-slate-200 hover:bg-slate-800",children:[x?"Uploading":"Add logo",s.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/gif,image/webp",className:"hidden",onChange:B,disabled:x})]}),f&&s.jsx("button",{type:"button",onClick:D,disabled:m,className:"rounded-md border border-red-500/60 px-3 py-1.5 text-sm font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:m?"Removing":"Delete logo"})]})]})]}),s.jsxs("form",{className:"space-y-4 max-w-xl",onSubmit:_,children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Title"}),s.jsx("input",{type:"text",value:l,onChange:w=>o(w.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description"}),s.jsx("textarea",{value:c,onChange:w=>u(w.target.value),rows:4,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Media categories"}),s.jsx("input",{type:"text",value:Z,onChange:w=>M(w.target.value),onFocus:()=>V(!0),placeholder:"Search and select",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),q&&s.jsx("div",{className:"absolute left-0 right-0 top-full z-10 mt-1 max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",children:G.length?G.map(w=>s.jsx("button",{type:"button",onClick:()=>H(w.id),className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:w.name},w.id)):s.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:"No matches"})}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:I.map(w=>{const T=k.find(W=>W.id===w);return s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(T==null?void 0:T.name)??w,s.jsx("button",{type:"button",onClick:()=>U(w),className:"hover:text-red-400","aria-label":"Remove",children:""})]},w)})})]}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsx("button",{type:"submit",disabled:se,className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:se?"Saving":"Save changes"}),s.jsx("button",{type:"button",onClick:Q,disabled:K||se,className:"rounded-md border border-red-500/60 px-4 py-2 text-sm font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:K?"Deleting":"Delete entry"})]}),fe&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:fe}),P&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:P})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit Media"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})},Pd={admin:"SuperAdmin",manager:"Manager",user:"User"},Ji=[{value:-8,label:"UTC-8"},{value:-5,label:"UTC-5"},{value:0,label:"UTC+0/GMT"}];function Do(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function Vv(e,t,n){if(!e&&!n)return"";if(!e)return n?`from ${n}`:"";try{const r=new Date(e);if(isNaN(r.getTime()))return e+(n?` from ${n}`:"");const a=r.getTime()+(t||0)*36e5,l=new Date(a),o=y=>y<10?"0"+y:""+y,c=l.getUTCFullYear(),u=o(l.getUTCMonth()+1),d=o(l.getUTCDate()),h=o(l.getUTCHours()),f=o(l.getUTCMinutes()),g=Ji.find(y=>y.value===t),v=g?g.label:t<0?"UTC"+t:"UTC+"+t;let b=`${c}-${u}-${d} ${h}:${f} ${v}`;return n&&(b+=` from ${n}`),b}catch{return e+(n?` from ${n}`:"")}}const qv=e=>e==="admin"?"bg-amber-500/20 text-amber-200":e==="manager"?"bg-blue-500/20 text-blue-200":e==="user"?"bg-slate-600/30 text-slate-300":"bg-emerald-500/20 text-emerald-200",Jv=()=>{var _;const e=Vt(),[t]=qt(),n=t.get("username")??"",r=t.get("email")??"",a=t.get("status")??"",{user:l}=Oe(),[o,c]=i.useState(!0),[u,d]=i.useState(null),[h,f]=i.useState(null),[g,v]=i.useState([]),[b,y]=i.useState([]),[N,x]=i.useState([]),[p,m]=i.useState(""),[E,k]=i.useState(!1),[C,I]=i.useState(!1),[A,Z]=i.useState(null),[M,q]=i.useState(!1),[V,se]=i.useState(-8),Y=ct(l??null,"manager"),K=((_=l==null?void 0:l.groups)==null?void 0:_.includes("admin"))??!1,ie=K?["admin","manager","user"]:["user"],fe=async()=>{var z;if(!n)return;const B=Do();if(!B){d("API URL not set."),c(!1);return}if(!((z=window.auth)!=null&&z.getAccessToken)){d("Sign in required."),c(!1);return}c(!0),d(null);try{const[Q,w]=await Promise.all([J(`${B}/admin/users/${encodeURIComponent(n)}/groups`),J(`${B}/admin/groups`)]);if(!Q.ok){const O=await Q.json().catch(()=>({}));throw new Error(O.error||"Failed to load user")}const T=await Q.json(),re=((await w.json()).groups??[]).map(O=>O.name??(O.PK??"").replace("GROUP#","")).filter(Boolean);f({email:T.username??n,status:a,lastLoginAt:T.lastLoginAt??"",lastLoginIp:T.lastLoginIp??"",cognitoGroups:T.cognitoGroups??[],customGroups:T.customGroups??[]}),y([...T.cognitoGroups??[]]),x([...T.customGroups??[]]),v(re)}catch(Q){d((Q==null?void 0:Q.message)??"Failed to load user")}finally{c(!1)}};i.useEffect(()=>{const B=parseInt(sessionStorage.getItem("funkedupshift_lastlogin_tz")??"-8",10);!isNaN(B)&&Ji.some(D=>D.value===B)&&se(B)},[]),i.useEffect(()=>{Y&&n&&fe()},[Y,n]);const j=B=>{B&&!b.includes(B)&&y(D=>[...D,B])},P=B=>{y(D=>D.filter(z=>z!==B))},$=B=>{B&&!N.includes(B)&&(x(D=>[...D,B]),m(""),k(!1))},F=B=>{x(D=>D.filter(z=>z!==B))},S=g.filter(B=>N.includes(B)?!1:p.trim()?B.toLowerCase().includes(p.toLowerCase().trim()):!0),H=async B=>{var ne;if(B.preventDefault(),!n)return;const D=Do();if(!D||!((ne=window.auth)!=null&&ne.getAccessToken))return;const Q=(h==null?void 0:h.cognitoGroups)??[],w=(h==null?void 0:h.customGroups)??[];let T=b.filter(ce=>!Q.includes(ce)),W=Q.filter(ce=>!b.includes(ce));K||(T=T.filter(ce=>ce==="user"),W=W.filter(ce=>ce==="user"));const re=N.filter(ce=>!w.includes(ce)),O=w.filter(ce=>!N.includes(ce));I(!0),Z(null);try{const ce=encodeURIComponent,pe=[];T.forEach(je=>pe.push(J(`${D}/admin/users/${ce(n)}/groups`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groupName:je})}))),W.forEach(je=>pe.push(J(`${D}/admin/users/${ce(n)}/groups/${ce(je)}`,{method:"DELETE"}))),re.forEach(je=>pe.push(J(`${D}/admin/users/${ce(n)}/groups`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groupName:je})}))),O.forEach(je=>pe.push(J(`${D}/admin/users/${ce(n)}/groups/${ce(je)}`,{method:"DELETE"})));const Ne=(await Promise.all(pe)).find(je=>!je.ok);if(Ne){const je=await Ne.json().catch(()=>({}));throw new Error(je.error||"Failed to save")}window.alert("Changes saved"),e("/admin/membership")}catch(ce){Z((ce==null?void 0:ce.message)??"Failed to save")}finally{I(!1)}},U=B=>{const D=parseInt(B.target.value,10);se(D),sessionStorage.setItem("funkedupshift_lastlogin_tz",String(D))},G=async()=>{var Q;const B=r||(h==null?void 0:h.email)||n;if(!window.confirm(`Delete user "${B}"? This cannot be undone.`))return;const D=Do();if(!(!D||!((Q=window.auth)!=null&&Q.getAccessToken))){q(!0);try{const w=await J(`${D}/admin/users/${encodeURIComponent(n)}`,{method:"DELETE"});if(!w.ok){const T=await w.json().catch(()=>({}));throw new Error(T.error||"Failed to delete user")}e("/admin/membership")}catch(w){Z((w==null?void 0:w.message)??"Failed to delete user")}finally{q(!1)}}};return Y?n?o?s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit User"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Loading"})]}):u||!h?s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit User"}),s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:u??"Failed to load user"})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs(oe,{to:"/admin/membership",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to users"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit User"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Adjust system roles and custom groups."}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("label",{htmlFor:"tz-select",className:"text-slate-500",children:"Last login timezone:"}),s.jsx("select",{id:"tz-select",value:V,onChange:U,className:"rounded border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 text-sm",children:Ji.map(B=>s.jsx("option",{value:B.value,children:B.label},B.value))})]})]}),s.jsxs("form",{onSubmit:H,className:"space-y-6 max-w-2xl",children:[s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("h2",{className:"text-sm font-medium text-slate-300 mb-3",children:"User info"}),s.jsx("table",{className:"text-sm",children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{className:"py-1 pr-4 font-medium text-slate-400 w-28",children:"Email"}),s.jsx("td",{className:"py-1 text-slate-200",children:r||h.email})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"py-1 pr-4 font-medium text-slate-400",children:"Status"}),s.jsx("td",{className:"py-1 text-slate-200",children:a||h.status||""})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"py-1 pr-4 font-medium text-slate-400",children:"Last login"}),s.jsx("td",{className:"py-1 text-slate-200",children:Vv(h.lastLoginAt,V,h.lastLoginIp)})]})]})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200",children:"System roles"}),s.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-200 w-full max-w-xs",onChange:B=>{const D=B.target.value;D&&j(D),B.target.value=""},children:[s.jsx("option",{value:"",children:"Select role to add"}),ie.filter(B=>!b.includes(B)).map(B=>s.jsx("option",{value:B,children:Pd[B]??B},B))]}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:b.map(B=>{const D=K||B==="user";return s.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded text-sm ${qv(B)}`,children:[Pd[B]??B,D&&s.jsx("button",{type:"button",onClick:()=>P(B),className:"ml-0.5 hover:text-red-300","aria-label":"Remove",children:""})]},B)})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200",children:"Custom groups"}),g.length===0?s.jsxs("p",{className:"text-sm text-slate-500",children:["No custom groups. ",s.jsx(oe,{to:"/admin/membership?tab=groups",className:"text-brand-orange hover:underline",children:"Create groups"}),"."]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"relative max-w-xs",children:[s.jsx("input",{type:"text",value:p,onChange:B=>{m(B.target.value),k(!0)},onFocus:()=>k(!0),placeholder:"Search or select groups",className:"w-full rounded border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-200 placeholder:text-slate-500"}),E&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>k(!1),"aria-hidden":"true"}),s.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 max-h-48 overflow-y-auto rounded border border-slate-700 bg-slate-900 shadow-lg z-20",children:S.length===0?s.jsx("div",{className:"px-3 py-2 text-sm text-slate-500",children:"No matches"}):S.map(B=>s.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",onClick:()=>$(B),children:B},B))})]})]}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:N.map(B=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-sm bg-emerald-500/20 text-emerald-200",children:[B,s.jsx("button",{type:"button",onClick:()=>F(B),className:"ml-0.5 hover:text-red-300","aria-label":"Remove",children:""})]},B))})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[s.jsx("button",{type:"submit",disabled:C,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:C?"Saving":"Save"}),s.jsx(oe,{to:"/admin/membership",className:"rounded-md border border-slate-700 px-4 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"}),K&&s.jsx("button",{type:"button",onClick:G,disabled:M||C,className:"rounded-md border border-red-500/60 bg-red-500/10 px-4 py-2 text-sm font-medium text-red-200 hover:bg-red-500/20 disabled:opacity-50",children:M?"Deleting":"Delete user"})]}),A&&s.jsx("p",{className:"text-sm text-red-400",children:A})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit User"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Missing username in URL."})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit User"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})},Qv=()=>{const{user:e,refreshAuth:t}=Oe(),n=Vt(),[r,a]=i.useState("signin"),[l,o]=i.useState(""),[c,u]=i.useState(""),[d,h]=i.useState(!1),[f,g]=i.useState(null),[v,b]=i.useState(null),y=x=>{a(x),g(null),b(null)},N=async x=>{x.preventDefault(),g(null),b(null);const p=l.trim(),m=c.trim();if(!p||!m){g("Email and password are required.");return}const E=window;if(!E.auth){g("Auth is not configured. Check Cognito frontend setup.");return}h(!0);try{r==="signin"?(await new Promise((k,C)=>{E.auth.signIn(p,m,I=>{I?C(I):k()})}),b("Signed in successfully. Redirecting"),await t()):(await new Promise((k,C)=>{E.auth.signUp(p,m,I=>{I?C(I):k()})}),b("Account created successfully. You can now sign in."),a("signin")),r==="signin"&&setTimeout(()=>n("/"),800)}catch(k){const C=(k==null?void 0:k.message)||"Authentication failed. Please try again.";g(C)}finally{h(!1)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Sign in / Sign up"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Use your Funkedupshift account to rate sites, add notes, and manage curated content (based on your role)."})]}),e&&s.jsxs("div",{className:"rounded-xl border border-emerald-600/60 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-100",children:["You're currently signed in as"," ",s.jsx("span",{className:"font-semibold text-emerald-200",children:e.email})," (",e.role==="superadmin"?"SuperAdmin":e.role,"). You can safely close this page or continue browsing websites and media."]}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-[minmax(0,1.3fr)_minmax(0,1fr)] items-start",children:[s.jsxs("section",{className:"rounded-2xl border border-slate-800 bg-slate-950/70 p-5 shadow-lg shadow-slate-950/40",children:[s.jsxs("div",{className:"mb-4 flex gap-2 rounded-full bg-slate-900/70 p-1 text-xs font-medium text-slate-300",children:[s.jsx("button",{type:"button",onClick:()=>y("signin"),className:["flex-1 rounded-full px-3 py-1.5 transition-colors",r==="signin"?"bg-slate-50 text-slate-950":"hover:bg-slate-800/80"].join(" "),children:"Sign in"}),s.jsx("button",{type:"button",onClick:()=>y("signup"),className:["flex-1 rounded-full px-3 py-1.5 transition-colors",r==="signup"?"bg-slate-50 text-slate-950":"hover:bg-slate-800/80"].join(" "),children:"Sign up"})]}),s.jsxs("form",{className:"space-y-4",onSubmit:N,children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{htmlFor:"authEmail",className:"text-xs font-medium uppercase tracking-[0.18em] text-slate-400",children:"Email"}),s.jsx("input",{id:"authEmail",type:"email",autoComplete:"email",value:l,onChange:x=>o(x.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",placeholder:"you@example.com",required:!0})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{htmlFor:"authPassword",className:"text-xs font-medium uppercase tracking-[0.18em] text-slate-400",children:"Password"}),s.jsx("input",{id:"authPassword",type:"password",autoComplete:r==="signin"?"current-password":"new-password",value:c,onChange:x=>u(x.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",placeholder:r==="signup"?"At least 8 characters":"Your password",minLength:8,required:!0})]}),f&&s.jsx("div",{className:"rounded-md border border-red-500/70 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:f}),v&&!f&&s.jsx("div",{className:"rounded-md border border-emerald-500/70 bg-emerald-500/10 px-3 py-2 text-xs text-emerald-100",children:v}),s.jsx("button",{type:"submit",disabled:d,className:"inline-flex w-full items-center justify-center rounded-full bg-brand-orange px-4 py-2.5 text-sm font-semibold text-slate-950 shadow-md shadow-orange-500/40 transition hover:bg-orange-500 disabled:cursor-not-allowed disabled:opacity-70",children:d?r==="signin"?"Signing in":"Creating account":r==="signin"?"Sign in":"Create account"})]})]}),s.jsxs("aside",{className:"space-y-3 rounded-2xl border border-slate-800 bg-slate-950/40 p-4 text-xs text-slate-300",children:[s.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-[0.25em] text-slate-500",children:"How access works"}),s.jsxs("ul",{className:"space-y-2",children:[s.jsxs("li",{children:[s.jsx("span",{className:"font-semibold text-slate-100",children:"Guests"})," can browse all websites and media without signing in."]}),s.jsxs("li",{children:[s.jsx("span",{className:"font-semibold text-slate-100",children:"Signed-in users"})," can star sites and media, and later add their own metadata and comments."]}),s.jsxs("li",{children:[s.jsx("span",{className:"font-semibold text-slate-100",children:"Managers & admins"})," can curate sites, media, and categories, with extra tooling in the admin area."]})]}),s.jsx("p",{className:"text-slate-500",children:"If you don't see expected admin controls after signing in, confirm your Cognito group membership in the AWS Console."})]})]})]})},Yv={admin:"SuperAdmin",manager:"Manager",user:"User"},Qc=[{value:-8,label:"UTC-8"},{value:-5,label:"UTC-5"},{value:0,label:"UTC+0/GMT"}],Op="funkedupshift_lastlogin_tz";function Zv(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function Xv(){try{const e=parseInt(sessionStorage.getItem(Op)??"",10);if(!isNaN(e)&&Qc.some(t=>t.value===e))return e}catch{}return-8}function eb(e){try{sessionStorage.setItem(Op,String(e))}catch{}}function tb(e,t,n){if(!e)return n?`from ${n}`:"";try{const r=new Date(e);if(isNaN(r.getTime()))return e;const a=r.getTime()+t*36e5,l=new Date(a),o=y=>y<10?"0"+y:""+y,c=l.getUTCFullYear(),u=o(l.getUTCMonth()+1),d=o(l.getUTCDate()),h=o(l.getUTCHours()),f=o(l.getUTCMinutes()),g=Qc.find(y=>y.value===t),v=g?g.label:t<0?`UTC${t}`:`UTC+${t}`;let b=`${c}-${u}-${d} ${h}:${f} ${v}`;return n&&(b+=` from ${n}`),b}catch{return e}}const nb=()=>{var B,D,z,Q;const{user:e,refreshAuth:t}=Oe(),[n,r]=qt(),a=n.get("tab"),l=a==="groups"?"groups":"profile",[o,c]=i.useState(l),[u,d]=i.useState(null),[h,f]=i.useState(""),[g,v]=i.useState(Xv),[b,y]=i.useState(!0),[N,x]=i.useState(!1),[p,m]=i.useState(null),[E,k]=i.useState(""),[C,I]=i.useState(!1),[A,Z]=i.useState(null),[M,q]=i.useState([]),[V,se]=i.useState(!1),[Y,K]=i.useState(null),[ie,fe]=i.useState(null),j=Zv();i.useEffect(()=>{c(a==="groups"?"groups":"profile")},[a]);const P=w=>{c(w);const T=new URLSearchParams(n);w==="groups"?T.set("tab","groups"):T.delete("tab"),r(T)};i.useEffect(()=>{if(!e||!j){y(!1);return}let w=!1;return J(`${j}/profile`).then(T=>T.ok?T.json():T.json().then(W=>Promise.reject(new Error(W.error||"Failed")))).then(T=>{var W;w||(d(T),f(((W=T.profile)==null?void 0:W.description)??""))}).catch(T=>{w||Z({text:`Failed to load profile: ${(T==null?void 0:T.message)??"Unknown"}`,error:!0})}).finally(()=>{w||y(!1)}),()=>{w=!0}},[e,j]);const $=Ae.useCallback(async()=>{if(j){se(!0),K(null);try{const w=await J(`${j}/groups`);if(!w.ok){const W=await w.json().catch(()=>({}));throw new Error(W.error||"Failed to load groups")}const T=await w.json();q(T.groups??[])}catch(w){K({text:`Failed: ${(w==null?void 0:w.message)??"Unknown"}`,error:!0})}finally{se(!1)}}},[j]);i.useEffect(()=>{o==="groups"&&e&&j&&$()},[o,e,j,$]);const F=async(w,T)=>{if(j){fe(w),K(null);try{if(T){const W=await J(`${j}/me/groups/${encodeURIComponent(w)}`,{method:"DELETE"});if(!W.ok){const re=await W.json().catch(()=>({}));throw new Error(re.error||"Failed to leave")}d(re=>re?{...re,customGroups:(re.customGroups??[]).filter(O=>O!==w)}:null),K({text:`Left ${w}.`,error:!1})}else{const W=await J(`${j}/me/groups`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groupName:w})});if(!W.ok){const re=await W.json().catch(()=>({}));throw new Error(re.error||"Failed to join")}d(re=>re?{...re,customGroups:[...re.customGroups??[],w]}:null),K({text:`Joined ${w}.`,error:!1})}await t()}catch(W){K({text:`Error: ${(W==null?void 0:W.message)??"Unknown"}`,error:!0})}finally{fe(null)}}},S=async()=>{if(j){x(!0),Z(null);try{const w=await J(`${j}/profile`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:h.trim().slice(0,100)})});if(!w.ok){const T=await w.json();throw new Error(T.error||"Failed")}Z({text:"Saved.",error:!1})}catch(w){Z({text:`Error: ${(w==null?void 0:w.message)??"Unknown"}`,error:!0})}finally{x(!1)}}},H=async w=>{var re,O;const T=(re=w.target.files)==null?void 0:re[0];if(w.target.value="",!T||!j)return;if(m(null),!((O=T.type)!=null&&O.match(/^image\/(png|jpeg|jpg|gif|webp)$/))){m("Please choose PNG, JPEG, GIF, or WebP.");return}const W=T.type||"image/png";try{const ne=await J(`${j}/profile/avatar-upload`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contentType:W})});if(!ne.ok){const Ke=await ne.json();throw new Error(Ke.error||"Upload failed")}const{uploadUrl:ce,key:pe}=await ne.json();if(!(await fetch(ce,{method:"PUT",body:T,headers:{"Content-Type":W}})).ok)throw new Error("Upload failed");const Ne=await J(`${j}/profile`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({avatarKey:pe})});if(!Ne.ok){const Ke=await Ne.json();throw new Error(Ke.error||"Failed")}const je=await J(`${j}/profile`).then(Ke=>Ke.json());d(je)}catch(ne){m(`Error: ${(ne==null?void 0:ne.message)??"Unknown"}`)}},U=async()=>{if(j){m(null);try{const w=await J(`${j}/profile/avatar`,{method:"DELETE"});if(!w.ok){const T=await w.json();throw new Error(T.error||"Failed")}d(T=>T?{...T,profile:{...T.profile,avatarUrl:void 0,avatarKey:void 0}}:null)}catch(w){m(`Error: ${(w==null?void 0:w.message)??"Unknown"}`)}}},G=async()=>{const w=E.trim();if(!(!w||!j)){m(null),I(!0);try{const T=await J(`${j}/profile/avatar-from-url`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageUrl:w})});if(!T.ok){const ne=await T.json();throw new Error(ne.error||"Import failed")}const{key:W}=await T.json(),re=await J(`${j}/profile`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({avatarKey:W})});if(!re.ok){const ne=await re.json();throw new Error(ne.error||"Failed")}const O=await J(`${j}/profile`).then(ne=>ne.json());d(O),k("")}catch(T){m(`Error: ${(T==null?void 0:T.message)??"Unknown"}`)}finally{I(!1)}}};if(!e)return s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"My Profile"}),s.jsxs("p",{className:"text-sm text-slate-400",children:[s.jsx(oe,{to:"/auth",className:"text-brand-orange hover:underline",children:"Sign in"})," ","to view and edit your profile."]})]});if(!j)return s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"My Profile"}),s.jsx("p",{className:"text-sm text-red-400",children:"API URL not set."})]});if(b)return s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"My Profile"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Loading profile"})]});const _=u!=null&&u.profile?tb(u.profile.lastLoginAt,g,u.profile.lastLoginIp):"";return s.jsxs("div",{className:"space-y-6 max-w-2xl",children:[s.jsx(oe,{to:"/",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:" Back to Home"}),s.jsx("header",{children:s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"My Profile"})}),s.jsxs("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:[s.jsx("button",{type:"button",onClick:()=>P("profile"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="profile"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Profile"}),s.jsx("button",{type:"button",onClick:()=>P("groups"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="groups"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Custom groups"})]}),o==="groups"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-slate-400",children:"Add or remove yourself from custom groups. Changes take effect immediately."}),Y&&s.jsx("div",{className:`rounded-md px-3 py-2 text-sm ${Y.error?"border-red-500/60 bg-red-500/10 text-red-200":"border-green-500/40 bg-green-500/10 text-green-200"}`,children:Y.text}),V?s.jsx("p",{className:"text-sm text-slate-500",children:"Loading groups"}):M.length===0?s.jsx("p",{className:"text-sm text-slate-500",children:"No custom groups available. Admins can create groups in Membership."}):s.jsx("ul",{className:"space-y-2",children:M.map(w=>{const T=((u==null?void 0:u.customGroups)??[]).includes(w.name);return s.jsxs("li",{className:"flex items-center justify-between rounded-lg border border-slate-800 bg-slate-950/60 px-3 py-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-slate-200",children:w.name}),w.description&&s.jsx("span",{className:"text-slate-500 ml-2 text-sm",children:w.description})]}),s.jsx("button",{type:"button",onClick:()=>F(w.name,T),disabled:ie===w.name,className:`rounded-md px-3 py-1.5 text-xs font-medium ${T?"border border-amber-500/60 bg-amber-500/10 text-amber-300 hover:bg-amber-500/20":"border border-emerald-500/60 bg-emerald-500/10 text-emerald-300 hover:bg-emerald-500/20"} disabled:opacity-50`,children:ie===w.name?"":T?"Leave":"Join"})]},w.name)})})]}),o==="profile"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400",children:"Last login timezone"}),s.jsx("select",{value:g,onChange:w=>{const T=parseInt(w.target.value,10);eb(T),v(T)},className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",children:Qc.map(w=>s.jsx("option",{value:w.value,children:w.label},w.value))})]}),A&&s.jsx("div",{className:`rounded-md px-3 py-2 text-sm ${A.error?"border-red-500/60 bg-red-500/10 text-red-200":"border-green-500/40 bg-green-500/10 text-green-200"}`,children:A.text}),u&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("h2",{className:"text-sm font-semibold text-slate-200 mb-3",children:"User info"}),s.jsx("table",{className:"w-full text-sm",children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{className:"py-1 pr-4 font-medium text-slate-300 w-28",children:"Email"}),s.jsx("td",{className:"text-slate-400",children:u.email??""})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"py-1 pr-4 font-medium text-slate-300",children:"Status"}),s.jsx("td",{className:"text-slate-400",children:u.status??""})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"py-1 pr-4 font-medium text-slate-300",children:"Last login"}),s.jsx("td",{className:"text-slate-400",children:_})]})]})})]}),s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("h2",{className:"text-sm font-semibold text-slate-200 mb-3",children:"System role"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:(((B=u.cognitoGroups)==null?void 0:B.length)??0)>0?u.cognitoGroups.map(w=>{const T=Yv[w]??w,W=w==="admin"?"bg-amber-500/20 text-amber-300":w==="manager"?"bg-blue-500/20 text-blue-300":"bg-slate-700 text-slate-200";return s.jsx("span",{className:`rounded-md px-2 py-0.5 text-xs font-medium ${W}`,children:T},w)}):s.jsx("span",{className:"rounded-md px-2 py-0.5 text-xs font-medium bg-slate-700 text-slate-200",children:"User"})})]}),s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("h2",{className:"text-sm font-semibold text-slate-200 mb-3",children:"Custom groups"}),(((D=u.customGroups)==null?void 0:D.length)??0)>0?s.jsx("div",{className:"flex flex-wrap gap-2",children:u.customGroups.map(w=>s.jsx("span",{className:"rounded-md px-2 py-0.5 text-xs font-medium bg-emerald-500/20 text-emerald-300",children:w},w))}):s.jsx("p",{className:"text-sm text-slate-500",children:"Not in any custom groups."})]}),s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("h2",{className:"text-sm font-semibold text-slate-200 mb-3",children:"Edit profile"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Profile icon"}),s.jsxs("div",{className:"flex items-start gap-4",children:[(z=u.profile)!=null&&z.avatarUrl?s.jsx("img",{src:u.profile.avatarUrl,alt:"Profile",className:"h-24 w-24 rounded-full border-2 border-slate-700 object-cover"}):s.jsx("div",{className:"h-24 w-24 rounded-full border-2 border-slate-700 bg-slate-800 flex items-center justify-center text-2xl text-slate-500",children:"?"}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/gif,image/webp",onChange:H,className:"block w-full text-xs text-slate-300 file:mr-3 file:rounded-md file:border-0 file:bg-slate-800 file:px-3 file:py-1.5 file:text-slate-100"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Or paste image URL (min 4848, max 5 MB):"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"url",value:E,onChange:w=>k(w.target.value),placeholder:"https://example.com/avatar.png",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("button",{type:"button",onClick:G,disabled:!E.trim()||C,className:"rounded-md border border-slate-600 px-3 py-2 text-sm font-medium text-slate-200 hover:bg-slate-800 disabled:opacity-50",children:C?"Importing":"Use from URL"})]}),((Q=u.profile)==null?void 0:Q.avatarUrl)&&s.jsx("button",{type:"button",onClick:U,className:"self-start rounded-md border border-red-500/60 bg-red-500/10 px-2 py-1 text-xs font-medium text-red-300 hover:bg-red-500/20",children:"Remove icon"})]})]}),s.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"PNG, JPEG, GIF, or WebP. Same constraints as thumbnail uploads."}),p&&s.jsx("p",{className:"mt-1 text-xs text-red-400",children:p})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"profile-description",className:"block text-xs font-medium text-slate-400 mb-1",children:"Description"}),s.jsx("textarea",{id:"profile-description",value:h,onChange:w=>f(w.target.value),maxLength:100,placeholder:"About you (max 100 characters)",rows:4,className:"w-full max-w-md rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsxs("div",{className:`mt-1 text-xs ${h.length>=100?"text-red-400":"text-slate-500"}`,children:[h.length," / 100"]})]}),s.jsx("button",{type:"button",onClick:S,disabled:N,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:N?"Saving":"Save"})]})]})]})]})]})},sb=/^\d{4}-\d{2}-\d{2}$/;function Td(e){if(!sb.test(e))return!1;const t=new Date(e);return!isNaN(t.getTime())}const hs=({id:e,value:t,onChange:n,label:r,required:a,className:l="",inputClassName:o=""})=>{const c=i.useRef(null),u=i.useRef(null),d=y=>{const x=y.target.value.replace(/[^\d-]/g,"");n(x)},h=()=>{const y=t.trim();y&&!Td(y)&&n("")},f=y=>{const N=y.target.value;N&&n(N)},g=()=>{const y=c.current;y&&(y.focus(),typeof y.showPicker=="function"&&y.showPicker())},v="rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",b=t&&Td(t);return s.jsxs("div",{className:l,children:[s.jsxs("label",{htmlFor:`${e}-text`,className:"block text-xs font-semibold text-slate-400 mb-1",children:[r,s.jsx("span",{className:"block font-normal text-slate-500 mt-0.5",children:"yyyy-MM-DD or use calendar"})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("input",{ref:u,type:"text",id:`${e}-text`,value:t,onChange:d,onBlur:h,placeholder:"yyyy-MM-DD",required:a,pattern:a?"[0-9]{4}-[0-9]{2}-[0-9]{2}":void 0,title:a?"Enter date as yyyy-MM-DD":void 0,className:`${v} flex-1 min-w-0 ${o}`,inputMode:"numeric",autoComplete:"off"}),s.jsx("input",{ref:c,type:"date",id:e,value:b?t:"",onChange:f,required:a,className:"sr-only","aria-hidden":!0}),s.jsx("button",{type:"button",onClick:g,title:"Open calendar","aria-label":"Open calendar",className:"rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-slate-400 hover:bg-slate-800 hover:text-slate-200 focus:border-brand-orange focus:outline-none shrink-0",children:s.jsx(wg,{className:"h-5 w-5"})})]})]})};function Rd(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Mo=10,rb=()=>{const{user:e}=Oe(),[t,n]=qt(),[r,a]=i.useState([]),[l,o]=i.useState(()=>{const O=t.get("playerIds");return O?O.split(",").filter(Boolean):[]}),[c,u]=i.useState([]),[d,h]=i.useState(1),[f,g]=i.useState(!1),[v,b]=i.useState(()=>t.get("date")??""),[y,N]=i.useState(()=>t.get("dateFrom")??""),[x,p]=i.useState(()=>t.get("dateTo")??""),[m,E]=i.useState(""),[k,C]=i.useState(!1),[I,A]=i.useState(null),[Z,M]=i.useState(null),[q,V]=i.useState(!1),[se,Y]=i.useState(()=>t.get("sortOrder")==="oldest"?"oldest":"newest"),[K,ie]=i.useState(()=>t.get("playerMode")==="or"?"or":"and"),fe=i.useRef(null),j=Sl(e),P=kl(e),$=O=>{const ne=r.find(ce=>ce.id===O||ce.PK===O);return ne&&(ne.name||ne.id)||O},F=async()=>{const O=Rd();if(O)try{const ne=await J(`${O}/squash/players`);if(!ne.ok){const be=await ne.json().catch(()=>({}));throw new Error(be.error||"Failed")}const pe=((await ne.json()).players??[]).map(be=>({...be,id:be.id||be.PK||""}));a(pe)}catch(ne){M((ne==null?void 0:ne.message)??"Failed to load players")}},S=async()=>{const O=Rd();if(!O)return;const ne=new URLSearchParams;v&&ne.set("date",v),y&&ne.set("dateFrom",y),x&&ne.set("dateTo",x),l.length&&(ne.set("playerIds",l.join(",")),ne.set("playerMode",K));const ce=ne.toString()?`?${ne.toString()}`:"";V(!0),M(null);try{const pe=await J(`${O}/squash/matches${ce}`);if(!pe.ok){const je=await pe.json().catch(()=>({}));throw new Error(je.error||"Failed")}const be=await pe.json();u(be.matches??[]),g(!0),h(1);const Ne=new URLSearchParams;v&&Ne.set("date",v),y&&Ne.set("dateFrom",y),x&&Ne.set("dateTo",x),l.length&&(Ne.set("playerIds",l.join(",")),Ne.set("playerMode",K)),Ne.set("sortOrder",se),n(Ne,{replace:!0})}catch(pe){M((pe==null?void 0:pe.message)??"Failed to search matches")}finally{V(!1)}},H=()=>{b(""),N(""),p(""),o([]),E(""),ie("and"),g(!1),u([]),h(1),n({},{replace:!0})},U=O=>{l.includes(O)||o([...l,O]),E("")},G=O=>{o(l.filter(ne=>ne!==O))},_=r.filter(O=>!l.includes(O.id)&&(!m.trim()||(O.name||"").toLowerCase().includes(m.toLowerCase())));i.useEffect(()=>{j&&F()},[j]);const B=t.get("date")||t.get("dateFrom")||t.get("dateTo")||t.get("playerIds");i.useEffect(()=>{!j||!B||S()},[]),i.useEffect(()=>{function O(ne){fe.current&&!fe.current.contains(ne.target)&&C(!1)}if(k)return document.addEventListener("mousedown",O),()=>document.removeEventListener("mousedown",O)},[k]);const D=i.useMemo(()=>{const O=[...c];return O.sort((ne,ce)=>{const pe=ne.date||"",be=ce.date||"";return se==="newest"?be.localeCompare(pe):pe.localeCompare(be)}),O},[c,se]),z=Math.max(1,Math.ceil(D.length/Mo)),Q=(d-1)*Mo,w=D.slice(Q,Q+Mo),T=O=>{const ne=O.teamAGames??0,ce=O.teamBGames??0,pe=O.winningTeam==="B"?ce:ne,be=O.winningTeam==="B"?ne:ce;return`${pe}-${be}`},W=O=>{const ne=[$(O.teamAPlayer1Id||""),$(O.teamAPlayer2Id||"")].filter(Boolean).join(" & "),ce=[$(O.teamBPlayer1Id||""),$(O.teamBPlayer2Id||"")].filter(Boolean).join(" & "),pe=O.winningTeam==="B"?ce:ne,be=O.winningTeam==="B"?ne:ce;return s.jsxs("li",{className:"flex items-center gap-2 flex-wrap py-2 border-b border-slate-800 last:border-0",children:[s.jsx("span",{className:"font-semibold text-slate-200",children:O.date||""}),s.jsxs("span",{className:"text-slate-300",children:[pe," vs ",be]}),s.jsx("span",{className:"italic text-slate-400",children:T(O)})]},O.id||O.date+pe)},re=[];if(z<=7)for(let O=1;O<=z;O++)re.push(O);else{const O=d;re.push(1),O>3&&re.push("");for(let ne=Math.max(2,O-1);ne<=Math.min(z-1,O+1);ne++)re.includes(ne)||re.push(ne);O<z-2&&re.push(""),z>1&&re.push(z)}return e?j?s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Doubles"}),P&&s.jsx("p",{className:"text-sm text-slate-400",children:s.jsx(oe,{to:"/squash-admin",className:"text-brand-orange hover:text-orange-400",children:"Squash Admin"})}),(I||Z)&&s.jsx("div",{className:`rounded-md px-4 py-3 text-sm ${Z?"bg-red-900/30 border border-red-800/50 text-red-200":"bg-emerald-900/30 border border-emerald-800/50 text-emerald-200"}`,children:Z||I}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-base font-semibold text-slate-200 mb-3",children:"Search matches"}),s.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[s.jsx(hs,{id:"searchDate",value:v,onChange:b,label:"Date (exact)",className:"max-w-[12rem]"}),s.jsx(hs,{id:"searchDateFrom",value:y,onChange:N,label:"Date from",className:"max-w-[12rem]"}),s.jsx(hs,{id:"searchDateTo",value:x,onChange:p,label:"Date to",className:"max-w-[12rem]"}),s.jsxs("div",{className:"relative max-w-[14rem] min-w-[12rem]",ref:fe,children:[s.jsx("label",{className:"block text-xs font-semibold text-slate-400 mb-1",children:"Filter by players"}),s.jsx("input",{type:"text",value:m,onChange:O=>E(O.target.value),onFocus:()=>C(!0),placeholder:"Search players...",autoComplete:"off",className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none"}),k&&s.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-slate-900 border border-slate-700 rounded-md max-h-48 overflow-y-auto z-10",children:_.length?_.map(O=>s.jsx("button",{type:"button",onClick:()=>U(O.id),className:"w-full text-left px-3 py-2 text-sm text-slate-200 hover:bg-slate-800",children:O.name||O.id},O.id)):s.jsx("div",{className:"px-3 py-2 text-sm text-slate-500",children:"No matches"})}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:l.map(O=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-slate-700 text-slate-200 text-xs",children:[$(O),s.jsx("button",{type:"button",onClick:()=>G(O),className:"text-slate-400 hover:text-slate-100","aria-label":"Remove",children:""})]},O))}),l.length>0&&s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-slate-500",children:"Match:"}),s.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[s.jsx("button",{type:"button",onClick:()=>ie("and"),className:`rounded px-2 py-0.5 text-xs font-medium ${K==="and"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"AND"}),s.jsx("button",{type:"button",onClick:()=>ie("or"),className:`rounded px-2 py-0.5 text-xs font-medium ${K==="or"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"OR"})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:S,disabled:q,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:q?"Searching":"Search"}),s.jsx("button",{type:"button",onClick:H,className:"rounded-md border border-slate-600 px-4 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Clear"})]})]})]}),s.jsxs("section",{children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-3",children:[s.jsx("h2",{className:"text-base font-semibold text-slate-200",children:"Results"}),f&&D.length>0&&s.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[s.jsx("button",{type:"button",onClick:()=>Y("newest"),className:`rounded px-2 py-0.5 text-xs font-medium ${se==="newest"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"Newest first"}),s.jsx("button",{type:"button",onClick:()=>Y("oldest"),className:`rounded px-2 py-0.5 text-xs font-medium ${se==="oldest"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"Oldest first"})]})]}),f&&s.jsx("div",{className:"rounded-md border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm text-slate-400 mb-3",children:D.length===0?"No results":`${D.length} results`}),f?w.length===0?s.jsx("ul",{className:"list-none p-0",children:s.jsx("li",{className:"py-2 text-slate-400",children:"No matches found."})}):s.jsxs(s.Fragment,{children:[s.jsx("ul",{className:"list-none p-0",children:w.map(W)}),z>1&&s.jsxs("div",{className:"flex items-center gap-2 mt-4 flex-wrap",children:[s.jsx("button",{type:"button",disabled:d<=1,onClick:()=>h(O=>Math.max(1,O-1)),className:"rounded-md border border-slate-600 px-3 py-1 text-sm disabled:opacity-50 disabled:cursor-not-allowed text-slate-300 hover:bg-slate-800",children:"Prev"}),s.jsx("span",{className:"flex items-center gap-1",children:re.map((O,ne)=>O===""?s.jsx("span",{className:"px-1 text-slate-500",children:""},`ellipsis-${ne}`):O===d?s.jsx("span",{className:"min-w-[2rem] px-2 py-1 text-center font-semibold text-slate-200",children:O},O):s.jsx("button",{type:"button",onClick:()=>h(O),className:"min-w-[2rem] rounded px-2 py-1 text-sm text-slate-300 hover:bg-slate-800 border border-slate-600",children:O},O))}),s.jsx("button",{type:"button",disabled:d>=z,onClick:()=>h(O=>Math.min(z,O+1)),className:"rounded-md border border-slate-600 px-3 py-1 text-sm disabled:opacity-50 disabled:cursor-not-allowed text-slate-300 hover:bg-slate-800",children:"Next"})]})]}):s.jsx("div",{className:"flex items-center justify-center min-h-[280px]",children:s.jsx("p",{className:"text-2xl sm:text-3xl font-light text-slate-500/80 tracking-wide animate-pulse",children:"Enter search criteria and click Search to find matches."})})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Doubles"}),s.jsx("div",{className:"rounded-md bg-amber-900/30 border border-amber-800/50 px-4 py-3 text-sm text-amber-200",children:"You do not have access to the Squash section. Join the Squash group or contact an admin."})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Doubles"}),s.jsxs("div",{className:"rounded-md bg-red-900/30 border border-red-800/50 px-4 py-3 text-sm text-red-200",children:["Sign in required. ",s.jsx(oe,{to:"/auth",className:"underline hover:text-red-100",children:"Sign in"})]})]})};function os(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Oo=10,ab=()=>{const{user:e}=Oe(),[t,n]=qt(),[r,a]=i.useState("matches"),[l,o]=i.useState([]),[c,u]=i.useState(()=>{const L=t.get("playerIds");return L?L.split(",").filter(Boolean):[]}),[d,h]=i.useState([]),[f,g]=i.useState(1),[v,b]=i.useState(!1),[y,N]=i.useState(()=>t.get("date")??""),[x,p]=i.useState(()=>t.get("dateFrom")??""),[m,E]=i.useState(()=>t.get("dateTo")??""),[k,C]=i.useState(""),[I,A]=i.useState(!1),[Z,M]=i.useState(null),[q,V]=i.useState(""),[se,Y]=i.useState(""),[K,ie]=i.useState(""),[fe,j]=i.useState(""),[P,$]=i.useState(""),[F,S]=i.useState("A"),[H,U]=i.useState(0),[G,_]=i.useState(!1),[B,D]=i.useState(!1),[z,Q]=i.useState(()=>t.get("sortOrder")==="oldest"?"oldest":"newest"),[w,T]=i.useState(()=>t.get("playerMode")==="or"?"or":"and"),W=i.useRef(null),[re,O]=i.useState([]),[ne,ce]=i.useState([]),[pe,be]=i.useState(null),[Ne,je]=i.useState(""),[Ke,at]=i.useState(""),[ae,we]=i.useState(""),[Fe,Te]=i.useState(!1),[Se,_e]=i.useState(null),[Be,Xe]=i.useState(null),lt=kl(e),nt=L=>{const he=l.find(R=>R.id===L||R.PK===L);return he&&(he.name||he.id)||L},$t=async()=>{const L=os();if(L)try{const he=await J(`${L}/squash/players`);if(!he.ok){const ge=await he.json().catch(()=>({}));throw new Error(ge.error||"Failed")}const ee=((await he.json()).players??[]).map(ge=>({...ge,id:ge.id||ge.PK||""}));o(ee),O(ee)}catch(he){_e((he==null?void 0:he.message)??"Failed to load players")}},gn=async()=>{const L=os();if(L)try{const he=await J(`${L}/admin/users?limit=60`);if(!he.ok)return;const R=await he.json();ce(R.users??[])}catch{ce([])}},Et=async()=>{const L=os();if(!L)return;const he=new URLSearchParams;y&&he.set("date",y),x&&he.set("dateFrom",x),m&&he.set("dateTo",m),c.length&&(he.set("playerIds",c.join(",")),he.set("playerMode",w));const R=he.toString()?`?${he.toString()}`:"";D(!0),_e(null);try{const ee=await J(`${L}/squash/matches${R}`);if(!ee.ok){const ve=await ee.json().catch(()=>({}));throw new Error(ve.error||"Failed")}const ge=await ee.json();h(ge.matches??[]),b(!0),g(1);const ue=new URLSearchParams;y&&ue.set("date",y),x&&ue.set("dateFrom",x),m&&ue.set("dateTo",m),c.length&&(ue.set("playerIds",c.join(",")),ue.set("playerMode",w)),ue.set("sortOrder",z),n(ue,{replace:!0})}catch(ee){_e((ee==null?void 0:ee.message)??"Failed to search matches")}finally{D(!1)}},ln=()=>{N(""),p(""),E(""),u([]),T("and"),C(""),b(!1),h([]),g(1),n({},{replace:!0})},le=L=>{c.includes(L)||u([...c,L]),C("")},xe=L=>{u(c.filter(he=>he!==L))},We=l.filter(L=>!c.includes(L.id)&&(!k.trim()||(L.name||"").toLowerCase().includes(k.toLowerCase()))),$e=[se,K,fe,P],ke=L=>{const he=L==="p1"?0:L==="p2"?1:L==="p3"?2:3,R=$e.filter((ee,ge)=>ge!==he);return l.filter(ee=>!R.includes(ee.id))},X=async L=>{if(L.preventDefault(),!q||!se||!K||!fe||!P){_e("All fields are required.");return}const he=[se,K,fe,P];if(new Set(he).size!==4){_e("Each player can only be on one team.");return}const R=os();if(!R)return;const ue={date:q,teamAPlayer1Id:se,teamAPlayer2Id:K,teamBPlayer1Id:fe,teamBPlayer2Id:P,winningTeam:F,teamAGames:F==="A"?3:H,teamBGames:F==="B"?3:H},ve=Z?"PUT":"POST";Z&&(ue.id=Z),_(!0),_e(null);try{const ye=await J(`${R}/squash/matches`,{method:ve,headers:{"Content-Type":"application/json"},body:JSON.stringify(ue)});if(!ye.ok){const Pe=await ye.json().catch(()=>({}));throw new Error(Pe.error||"Failed")}M(null),V(""),Y(""),ie(""),j(""),$(""),S("A"),U(0),Et()}catch(ye){_e((ye==null?void 0:ye.message)??"Failed")}finally{_(!1)}},de=()=>{M(null),V(""),Y(""),ie(""),j(""),$(""),S("A"),U(0)},Ie=L=>{var R,ee;const he=L.id||((ee=(R=L.PK)==null?void 0:R.replace)==null?void 0:ee.call(R,"SQUASH#MATCH#",""))||"";M(he),V(L.date||""),Y(L.teamAPlayer1Id||""),ie(L.teamAPlayer2Id||""),j(L.teamBPlayer1Id||""),$(L.teamBPlayer2Id||""),S(L.winningTeam||"A"),U(L.winningTeam==="A"?L.teamBGames??0:L.teamAGames??0)},Ue=async L=>{if(!confirm("Delete this match?"))return;const he=os();if(he)try{const R=await J(`${he}/squash/matches?id=${encodeURIComponent(L)}`,{method:"DELETE"});if(!R.ok){const ee=await R.json().catch(()=>({}));throw new Error(ee.error||"Failed")}Et()}catch(R){_e((R==null?void 0:R.message)??"Delete failed")}},Ee=async L=>{L.preventDefault();const he=Ne.trim();if(!he){_e("Name is required.");return}const R=os();if(!R)return;const ee={name:he,email:Ke.trim()||void 0,userId:ae||void 0},ge=pe?"PUT":"POST";pe&&(ee.id=pe),Te(!0),_e(null);try{const ue=await J(`${R}/squash/players`,{method:ge,headers:{"Content-Type":"application/json"},body:JSON.stringify(ee)});if(!ue.ok){const ve=await ue.json().catch(()=>({}));throw new Error(ve.error||"Failed")}be(null),je(""),at(""),we(""),$t()}catch(ue){_e((ue==null?void 0:ue.message)??"Failed")}finally{Te(!1)}},Le=()=>{be(null),je(""),at(""),we("")},De=L=>{be(L.id),je(L.name||""),at(L.email||""),we(L.userId||"")},yn=async L=>{if(!confirm("Delete this player?"))return;const he=os();if(he)try{const R=await J(`${he}/squash/players?id=${encodeURIComponent(L)}`,{method:"DELETE"});if(!R.ok){const ee=await R.json().catch(()=>({}));throw new Error(ee.error||"Failed")}$t()}catch(R){_e((R==null?void 0:R.message)??"Delete failed")}};i.useEffect(()=>{lt&&($t(),r==="players"&&gn())},[lt,r]);const vn=t.get("date")||t.get("dateFrom")||t.get("dateTo")||t.get("playerIds");i.useEffect(()=>{!lt||!vn||Et()},[]),i.useEffect(()=>{function L(he){W.current&&!W.current.contains(he.target)&&A(!1)}if(I)return document.addEventListener("mousedown",L),()=>document.removeEventListener("mousedown",L)},[I]);const gt=i.useMemo(()=>{const L=[...d];return L.sort((he,R)=>{const ee=he.date||"",ge=R.date||"";return z==="newest"?ge.localeCompare(ee):ee.localeCompare(ge)}),L},[d,z]),ut=Math.max(1,Math.ceil(gt.length/Oo)),bn=(f-1)*Oo,ur=gt.slice(bn,bn+Oo),Yl=L=>{const he=L.teamAGames??0,R=L.teamBGames??0;return L.winningTeam==="A"?`${he}-${R}`:`${R}-${he}`},_t=[];if(ut<=7)for(let L=1;L<=ut;L++)_t.push(L);else{const L=f;_t.push(1),L>3&&_t.push("");for(let he=Math.max(2,L-1);he<=Math.min(ut-1,L+1);he++)_t.includes(he)||_t.push(he);L<ut-2&&_t.push(""),ut>1&&_t.push(ut)}return e?lt?s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Admin"}),s.jsx("p",{className:"text-sm text-slate-400",children:s.jsx(oe,{to:"/squash",className:"text-brand-orange hover:text-orange-400",children:"Squash"})}),(Be||Se)&&s.jsx("div",{className:`rounded-md px-4 py-3 text-sm ${Se?"bg-red-900/30 border border-red-800/50 text-red-200":"bg-emerald-900/30 border border-emerald-800/50 text-emerald-200"}`,children:Se||Be}),s.jsxs("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:[s.jsx("button",{type:"button",onClick:()=>a("matches"),className:`px-4 py-2 rounded-md text-sm font-medium ${r==="matches"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Matches"}),s.jsx("button",{type:"button",onClick:()=>a("players"),className:`px-4 py-2 rounded-md text-sm font-medium ${r==="players"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Players"})]}),r==="matches"&&s.jsxs(s.Fragment,{children:[s.jsxs("section",{children:[s.jsx("h2",{className:"text-base font-semibold text-slate-200 mb-3",children:"Add match"}),s.jsxs("form",{onSubmit:X,className:"grid grid-cols-2 gap-4 max-w-2xl",children:[s.jsx("div",{className:"col-span-2",children:s.jsx(hs,{id:"matchDate",value:q,onChange:V,label:"Date",required:!0})}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"matchTeamAP1",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Team A  Player 1"}),s.jsxs("select",{id:"matchTeamAP1",value:se,onChange:L=>Y(L.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[s.jsx("option",{value:"",children:" Select "}),ke("p1").map(L=>s.jsx("option",{value:L.id,children:L.name||L.id},L.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"matchTeamAP2",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Team A  Player 2"}),s.jsxs("select",{id:"matchTeamAP2",value:K,onChange:L=>ie(L.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[s.jsx("option",{value:"",children:" Select "}),ke("p2").map(L=>s.jsx("option",{value:L.id,children:L.name||L.id},L.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"matchTeamBP1",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Team B  Player 1"}),s.jsxs("select",{id:"matchTeamBP1",value:fe,onChange:L=>j(L.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[s.jsx("option",{value:"",children:" Select "}),ke("p3").map(L=>s.jsx("option",{value:L.id,children:L.name||L.id},L.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"matchTeamBP2",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Team B  Player 2"}),s.jsxs("select",{id:"matchTeamBP2",value:P,onChange:L=>$(L.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[s.jsx("option",{value:"",children:" Select "}),ke("p4").map(L=>s.jsx("option",{value:L.id,children:L.name||L.id},L.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"matchWinningTeam",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Winning team"}),s.jsxs("select",{id:"matchWinningTeam",value:F,onChange:L=>S(L.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[s.jsx("option",{value:"A",children:"Team A"}),s.jsx("option",{value:"B",children:"Team B"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"matchLoserGames",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Games won by losing team"}),s.jsxs("select",{id:"matchLoserGames",value:H,onChange:L=>U(parseInt(L.target.value,10)),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[s.jsx("option",{value:0,children:"0"}),s.jsx("option",{value:1,children:"1"}),s.jsx("option",{value:2,children:"2"})]})]}),s.jsxs("div",{className:"col-span-2 flex gap-2",children:[s.jsx("button",{type:"submit",disabled:G,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:Z?"Update match":"Add match"}),s.jsx("button",{type:"button",onClick:de,className:"rounded-md border border-slate-600 px-4 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"})]})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-base font-semibold text-slate-200 mb-3",children:"Search matches"}),s.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[s.jsx(hs,{id:"searchDate",value:y,onChange:N,label:"Date (exact)",className:"max-w-[12rem]"}),s.jsx(hs,{id:"searchDateFrom",value:x,onChange:p,label:"Date from",className:"max-w-[12rem]"}),s.jsx(hs,{id:"searchDateTo",value:m,onChange:E,label:"Date to",className:"max-w-[12rem]"}),s.jsxs("div",{className:"relative max-w-[14rem] min-w-[12rem]",ref:W,children:[s.jsx("label",{className:"block text-xs font-semibold text-slate-400 mb-1",children:"Filter by players"}),s.jsx("input",{type:"text",value:k,onChange:L=>C(L.target.value),onFocus:()=>A(!0),placeholder:"Search players...",autoComplete:"off",className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none"}),I&&s.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-slate-900 border border-slate-700 rounded-md max-h-48 overflow-y-auto z-10",children:We.length?We.map(L=>s.jsx("button",{type:"button",onClick:()=>le(L.id),className:"w-full text-left px-3 py-2 text-sm text-slate-200 hover:bg-slate-800",children:L.name||L.id},L.id)):s.jsx("div",{className:"px-3 py-2 text-sm text-slate-500",children:"No matches"})}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:c.map(L=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-slate-700 text-slate-200 text-xs",children:[nt(L),s.jsx("button",{type:"button",onClick:()=>xe(L),className:"text-slate-400 hover:text-slate-100","aria-label":"Remove",children:""})]},L))}),c.length>0&&s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-slate-500",children:"Match:"}),s.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[s.jsx("button",{type:"button",onClick:()=>T("and"),className:`rounded px-2 py-0.5 text-xs font-medium ${w==="and"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"AND"}),s.jsx("button",{type:"button",onClick:()=>T("or"),className:`rounded px-2 py-0.5 text-xs font-medium ${w==="or"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"OR"})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:Et,disabled:B,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:B?"Searching":"Search"}),s.jsx("button",{type:"button",onClick:ln,className:"rounded-md border border-slate-600 px-4 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Clear"})]})]})]}),s.jsxs("section",{children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-3",children:[s.jsx("h2",{className:"text-base font-semibold text-slate-200",children:"Search results"}),v&&gt.length>0&&s.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[s.jsx("button",{type:"button",onClick:()=>Q("newest"),className:`rounded px-2 py-0.5 text-xs font-medium ${z==="newest"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"Newest first"}),s.jsx("button",{type:"button",onClick:()=>Q("oldest"),className:`rounded px-2 py-0.5 text-xs font-medium ${z==="oldest"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"Oldest first"})]})]}),v&&s.jsx("div",{className:"rounded-md border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm text-slate-400 mb-3",children:gt.length===0?"No results":`${gt.length} results`}),v?ur.length===0?s.jsx("ul",{className:"list-none p-0",children:s.jsx("li",{className:"py-2 text-slate-400",children:"No matches found."})}):s.jsxs(s.Fragment,{children:[s.jsx("ul",{className:"list-none p-0",children:ur.map(L=>{var ge,ue;const he=L.id||((ue=(ge=L.PK)==null?void 0:ge.replace)==null?void 0:ue.call(ge,"SQUASH#MATCH#",""))||"",R=[nt(L.teamAPlayer1Id||""),nt(L.teamAPlayer2Id||"")].filter(Boolean).join(" & "),ee=[nt(L.teamBPlayer1Id||""),nt(L.teamBPlayer2Id||"")].filter(Boolean).join(" & ");return s.jsxs("li",{className:"flex items-center gap-2 flex-wrap py-2 border-b border-slate-800 last:border-0",children:[s.jsx("span",{className:"font-semibold text-slate-200",children:L.date||""}),s.jsxs("span",{className:"text-slate-300",children:[R," vs ",ee]}),s.jsx("span",{className:"italic text-slate-400",children:Yl(L)}),s.jsx("button",{type:"button",onClick:()=>Ie(L),className:"rounded-md border border-slate-600 px-2 py-1 text-xs text-slate-300 hover:bg-slate-800",children:"Edit"}),s.jsx("button",{type:"button",onClick:()=>Ue(he),className:"rounded-md border border-red-800/50 px-2 py-1 text-xs text-red-300 hover:bg-red-900/30",children:"Delete"})]},he)})}),ut>1&&s.jsxs("div",{className:"flex items-center gap-2 mt-4 flex-wrap",children:[s.jsx("button",{type:"button",disabled:f<=1,onClick:()=>g(L=>Math.max(1,L-1)),className:"rounded-md border border-slate-600 px-3 py-1 text-sm disabled:opacity-50 disabled:cursor-not-allowed text-slate-300 hover:bg-slate-800",children:"Prev"}),s.jsx("span",{className:"flex items-center gap-1",children:_t.map((L,he)=>L===""?s.jsx("span",{className:"px-1 text-slate-500",children:""},`ellipsis-${he}`):L===f?s.jsx("span",{className:"min-w-[2rem] px-2 py-1 text-center font-semibold text-slate-200",children:L},L):s.jsx("button",{type:"button",onClick:()=>g(L),className:"min-w-[2rem] rounded px-2 py-1 text-sm text-slate-300 hover:bg-slate-800 border border-slate-600",children:L},L))}),s.jsx("button",{type:"button",disabled:f>=ut,onClick:()=>g(L=>Math.min(ut,L+1)),className:"rounded-md border border-slate-600 px-3 py-1 text-sm disabled:opacity-50 disabled:cursor-not-allowed text-slate-300 hover:bg-slate-800",children:"Next"})]})]}):s.jsx("div",{className:"flex items-center justify-center min-h-[280px]",children:s.jsx("p",{className:"text-2xl sm:text-3xl font-light text-slate-500/80 tracking-wide animate-pulse",children:"Enter search criteria and click Search to find matches."})})]})]}),r==="players"&&s.jsxs(s.Fragment,{children:[s.jsxs("section",{children:[s.jsx("h2",{className:"text-base font-semibold text-slate-200 mb-3",children:"Players"}),s.jsxs("form",{onSubmit:Ee,className:"space-y-4 max-w-md",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"playerName",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Name"}),s.jsx("input",{type:"text",id:"playerName",value:Ne,onChange:L=>je(L.target.value),required:!0,placeholder:"Player name",className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"playerEmail",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Email (optional)"}),s.jsx("input",{type:"email",id:"playerEmail",value:Ke,onChange:L=>at(L.target.value),placeholder:"player@example.com",className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"playerUserId",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Link to user (optional)"}),s.jsxs("select",{id:"playerUserId",value:ae,onChange:L=>we(L.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[s.jsx("option",{value:"",children:" None "}),ne.map(L=>s.jsx("option",{value:L.sub||"",children:L.email||L.username||L.sub},L.sub||L.username))]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"submit",disabled:Fe,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:pe?"Update player":"Add player"}),s.jsx("button",{type:"button",onClick:Le,className:"rounded-md border border-slate-600 px-4 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"})]})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-base font-semibold text-slate-200 mb-3",children:"Player list"}),re.length===0?s.jsx("p",{className:"text-sm text-slate-500",children:"No players yet. Add players above."}):s.jsx("ul",{className:"list-none p-0",children:re.map(L=>s.jsxs("li",{className:"flex items-center gap-2 flex-wrap py-2 border-b border-slate-800 last:border-0",children:[s.jsx("span",{className:"font-semibold text-slate-200",children:L.name||L.id}),L.email&&s.jsxs("span",{className:"text-slate-500 text-sm",children:["(",L.email,")"]}),s.jsx("button",{type:"button",onClick:()=>De(L),className:"rounded-md border border-slate-600 px-2 py-1 text-xs text-slate-300 hover:bg-slate-800",children:"Edit"}),s.jsx("button",{type:"button",onClick:()=>yn(L.id),className:"rounded-md border border-red-800/50 px-2 py-1 text-xs text-red-300 hover:bg-red-900/30",children:"Delete"})]},L.id))})]})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Admin"}),s.jsx("div",{className:"rounded-md bg-amber-900/30 border border-amber-800/50 px-4 py-3 text-sm text-amber-200",children:"Squash Admin requires manager (in Squash group) or SuperAdmin access."})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Admin"}),s.jsxs("div",{className:"rounded-md bg-red-900/30 border border-red-800/50 px-4 py-3 text-sm text-red-200",children:["Sign in required. ",s.jsx(oe,{to:"/auth",className:"underline hover:text-red-100",children:"Sign in"})]})]})};function Fo(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const lb=()=>{const{user:e}=Oe(),t=Lp(e),n=Cl(e),[r,a]=i.useState([]),[l,o]=i.useState({}),[c,u]=i.useState("yahoo"),[d,h]=i.useState([]),[f,g]=i.useState(!0),[v,b]=i.useState(!1),[y,N]=i.useState(""),[x,p]=i.useState(null),[m,E]=i.useState(null),k=i.useCallback(async()=>{const M=Fo();if(M){g(!0),p(null);try{const[q,V]=await Promise.all([J(`${M}/financial/watchlist`),J(`${M}/financial/config`)]),se=V.ok?await V.json():{symbols:[],source:"yahoo",availableSources:["yahoo"]};if(q.ok){const K=(await q.json()).symbols??[];a(K.length>0?K:se.symbols??[]),u(se.source??"yahoo"),h(se.availableSources??["yahoo"])}}catch(q){p((q==null?void 0:q.message)??"Failed to load watchlist")}finally{g(!1)}}},[J]),C=i.useCallback(async()=>{const M=Fo();if(!M||r.length===0)return;const q={};for(const V of r)try{const se=await J(`${M}/financial/quote?symbol=${encodeURIComponent(V)}&source=${encodeURIComponent(c)}`);if(se.ok){const Y=await se.json();q[V]=Y}else q[V]=null}catch{q[V]=null}o(q)},[r,c,J]);i.useEffect(()=>{t&&k()},[t,k]),i.useEffect(()=>{t&&r.length>0?C():o({})},[t,r,c,C]);const I=()=>{const M=y.trim().toUpperCase();!M||r.includes(M)||(a(q=>[...q,M]),N(""))},A=M=>{a(q=>q.filter(V=>V!==M)),o(q=>{const V={...q};return delete V[M],V})},Z=async()=>{const M=Fo();if(M){b(!0),p(null),E(null);try{const q=await J(`${M}/financial/watchlist`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbols:r})});if(!q.ok){const V=await q.json().catch(()=>({}));throw new Error(V.error??"Failed to save")}E("Watchlist saved.")}catch(q){p((q==null?void 0:q.message)??"Failed to save")}finally{b(!1)}}};return t?s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Financial"}),n&&s.jsx("p",{className:"text-sm text-slate-400",children:s.jsx(oe,{to:"/admin/financial",className:"text-brand-orange hover:text-orange-400",children:"Financial Admin"})}),f?s.jsx("p",{className:"text-sm text-slate-500",children:"Loading"}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-wrap gap-2 items-end",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"newSymbol",className:"block text-xs text-slate-500 mb-1",children:"Add symbol"}),s.jsx("input",{id:"newSymbol",type:"text",value:y,onChange:M=>N(M.target.value.toUpperCase()),onKeyDown:M=>M.key==="Enter"&&(M.preventDefault(),I()),placeholder:"AAPL",className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 w-24"})]}),s.jsx("button",{type:"button",onClick:I,disabled:!y.trim(),className:"rounded-md bg-brand-orange px-3 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:"Add"}),d.length>1&&s.jsxs("div",{className:"ml-4",children:[s.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Data source"}),s.jsx("select",{value:c,onChange:M=>u(M.target.value),className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50",children:d.map(M=>s.jsx("option",{value:M,children:M==="yahoo"?"Yahoo Finance":"Alpha Vantage"},M))})]})]}),r.length>0&&s.jsx("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-800",children:[s.jsx("thead",{className:"bg-slate-900/80",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Symbol"}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase",children:"Price"}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase",children:"Change"}),s.jsx("th",{className:"px-4 py-3 w-10"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-800",children:r.map(M=>{const q=l[M];return s.jsxs("tr",{className:"hover:bg-slate-800/50",children:[s.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-200",children:M}),s.jsx("td",{className:"px-4 py-3 text-sm text-right text-slate-300",children:q?`$${q.price.toFixed(2)}`:""}),s.jsx("td",{className:"px-4 py-3 text-sm text-right",children:q?s.jsxs("span",{className:q.change>=0?"text-emerald-400":"text-red-400",children:[q.change>=0?"+":"",q.change.toFixed(2)," (",q.changePercent>=0?"+":"",q.changePercent.toFixed(2),"%)"]}):s.jsx("span",{className:"text-slate-500",children:""})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("button",{type:"button",onClick:()=>A(M),className:"text-slate-500 hover:text-red-400","aria-label":`Remove ${M}`,children:""})})]},M)})})]})}),r.length>0&&s.jsx("button",{type:"button",onClick:Z,disabled:v,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:v?"Saving":"Save watchlist"}),r.length===0&&s.jsx("p",{className:"text-sm text-slate-500",children:"Add symbols above to build your watchlist. Default symbols from admin may appear when you first load."})]}),m&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:m}),x&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:x})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Financial"}),s.jsx("div",{className:"rounded-md bg-amber-900/30 border border-amber-800/50 px-4 py-3 text-sm text-amber-200",children:"You do not have access to the Financial section. Join the Financial custom group or contact an admin."})]})};function Ld(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const ob=()=>{const{user:e}=Oe(),[t,n]=qt(),r=t.get("tab"),a=r==="members"?"members":r==="symbols"?"symbols":"overview",[l,o]=i.useState(a),[c,u]=i.useState([]),[d,h]=i.useState("yahoo"),[f,g]=i.useState(!1),[v,b]=i.useState(!1),[y,N]=i.useState(null),[x,p]=i.useState(null),[m,E]=i.useState(""),[k]=i.useState(["yahoo","alpha_vantage"]);i.useEffect(()=>{o(r==="members"?"members":r==="symbols"?"symbols":"overview")},[r]);const C=V=>{o(V),n(V==="overview"?{}:{tab:V},{replace:!0})},I=i.useCallback(async()=>{const V=Ld();if(V){g(!0),N(null);try{const se=await J(`${V}/admin/financial/default-symbols`);if(!se.ok)throw new Error("Failed to load");const Y=await se.json();u(Y.symbols??[]),h(Y.source??"yahoo")}catch(se){N((se==null?void 0:se.message)??"Failed to load")}finally{g(!1)}}},[]);i.useEffect(()=>{l==="symbols"&&I()},[l,I]);const A=()=>{const V=m.trim().toUpperCase();!V||c.includes(V)||(u(se=>[...se,V]),E(""))},Z=V=>{u(se=>se.filter(Y=>Y!==V))},M=async()=>{const V=Ld();if(V){b(!0),N(null),p(null);try{const se=await J(`${V}/admin/financial/default-symbols`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbols:c,source:d})});if(!se.ok){const Y=await se.json().catch(()=>({}));throw new Error(Y.error??"Failed to save")}p("Default symbols saved.")}catch(se){N((se==null?void 0:se.message)??"Failed to save")}finally{b(!1)}}};return Cl(e)?s.jsxs("div",{className:"space-y-6",children:[s.jsxs(oe,{to:"/financial",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Financial"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Financial Admin"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manage Financial section settings, members, and data sources."})]}),s.jsxs("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:[s.jsx("button",{type:"button",onClick:()=>C("overview"),className:`px-4 py-2 rounded-md text-sm font-medium ${l==="overview"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Overview"}),s.jsx("button",{type:"button",onClick:()=>C("symbols"),className:`px-4 py-2 rounded-md text-sm font-medium ${l==="symbols"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Tracked Symbols"}),s.jsx("button",{type:"button",onClick:()=>C("members"),className:`px-4 py-2 rounded-md text-sm font-medium ${l==="members"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Members"})]}),l==="overview"&&s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-6 text-sm text-slate-400",children:[s.jsx("p",{className:"mb-2",children:"Admin configuration:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 text-slate-500",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Tracked symbols"}),"  Default symbols for new users' watchlists"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Data source"}),"  Yahoo Finance (no key) or Alpha Vantage (API key in Terraform)"]})]})]}),l==="symbols"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-wrap gap-2 items-end",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"newSymbol",className:"block text-xs text-slate-500 mb-1",children:"Add symbol"}),s.jsx("input",{id:"newSymbol",type:"text",value:m,onChange:V=>E(V.target.value.toUpperCase()),onKeyDown:V=>V.key==="Enter"&&(V.preventDefault(),A()),placeholder:"AAPL",className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 w-24"})]}),s.jsx("button",{type:"button",onClick:A,disabled:!m.trim(),className:"rounded-md bg-brand-orange px-3 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:"Add"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Default data source"}),s.jsx("select",{value:d,onChange:V=>h(V.target.value),className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50",children:k.map(V=>s.jsx("option",{value:V,children:V==="yahoo"?"Yahoo Finance":"Alpha Vantage"},V))})]}),c.length>0&&s.jsx("ul",{className:"flex flex-wrap gap-2",children:c.map(V=>s.jsxs("li",{className:"inline-flex items-center gap-1 rounded-md bg-slate-800 px-2 py-1 text-sm text-slate-200",children:[V,s.jsx("button",{type:"button",onClick:()=>Z(V),className:"text-slate-500 hover:text-red-400","aria-label":`Remove ${V}`,children:""})]},V))}),s.jsx("button",{type:"button",onClick:M,disabled:v||f,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:v?"Saving":"Save defaults"}),x&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:x}),y&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:y})]}),l==="members"&&s.jsx("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-6 text-sm text-slate-400",children:s.jsxs("p",{className:"mb-2",children:["Manage Financial group membership via"," ",s.jsx(oe,{to:"/admin/membership?tab=groups",className:"text-brand-orange hover:text-orange-400",children:"Membership"}),'. Create the "Financial" custom group and add users there.']})})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Financial Admin"}),s.jsx("p",{className:"text-sm text-slate-400",children:"SuperAdmin or Manager with Financial group membership is required."})]})};function _o(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Ad="memes_my_cache_invalidate",ib=()=>{const{user:e}=Oe(),[t,n]=qt(),r=(t.get("tab")||"all")==="mine"?"mine":"all",[a,l]=i.useState([]),[o,c]=i.useState(()=>t.get("q")??""),[u,d]=i.useState(()=>{const S=t.get("tagIds");return S?S.split(",").filter(Boolean):[]}),[h,f]=i.useState(()=>t.get("tagMode")==="and"?"and":"or"),[g,v]=i.useState(!1),[b,y]=i.useState(""),[N,x]=i.useState("newest"),[p,m]=i.useState(!1),[E,k]=i.useState(null),C=i.useRef(null),[I,A]=i.useState([]),Z=i.useRef(null),[M,q]=i.useState(!1),V=Ap(e),se=nr(e),Y=Jc(e),K=e&&nr(e),ie=S=>Y||se&&S.userId===(e==null?void 0:e.userId),fe=o.trim().length>0||u.length>0;i.useEffect(()=>{try{const S=sessionStorage.getItem(Ad);if(!S)return;sessionStorage.removeItem(Ad);const H=JSON.parse(S);if(H.tagOnly&&H.memeId&&H.tags){const U=(Z.current??[]).map(G=>G.PK===H.memeId?{...G,tags:H.tags}:G);if(Z.current=U,r==="mine"){let G=U;u.length>0&&(G=h==="and"?U.filter(_=>u.every(B=>(_.tags??[]).includes(B))):U.filter(_=>u.some(B=>(_.tags??[]).includes(B)))),l(G)}}else q(!0)}catch{}},[]),i.useEffect(()=>{const S=_o();if(!S)return;let H=!1;return ht(`${S}/memes/tags`).then(U=>U.ok?U.json():Promise.reject(new Error("Failed to load tags"))).then(U=>{H||A((U.tags??[]).sort((G,_)=>G.localeCompare(_)))}).catch(()=>{}),()=>{H=!0}},[]),i.useEffect(()=>{const S=new URLSearchParams;r==="mine"&&S.set("tab","mine"),fe&&(o.trim()&&S.set("q",o.trim()),u.length&&(S.set("tagIds",u.join(",")),S.set("tagMode",h))),n(S,{replace:!0})},[r,fe,o,u,h,n]),i.useEffect(()=>{const S=_o();if(!S){k("API URL not set.");return}let H=!1;if(r==="mine"&&K){const G=Z.current,_=u.length>0;if(G&&!M&&!o.trim()){q(!1);let B=G;_&&(h==="and"?B=G.filter(D=>u.every(z=>(D.tags??[]).includes(z))):B=G.filter(D=>u.some(z=>(D.tags??[]).includes(z)))),l(B),m(!1);return}}async function U(){m(!0),k(null);const G=r==="mine"&&K;try{const _=new URLSearchParams;_.set("limit",G?"100":"20"),G&&_.set("mine","1"),o.trim()&&_.set("q",o.trim()),u.length>0&&!G&&(_.set("tagIds",u.join(",")),_.set("tagMode",h));const D=await ht(`${S}${e?"/memes":"/memes/cache"}?${_.toString()}`);if(!D.ok){const w=await D.text();throw new Error(`HTTP ${D.status}: ${w}`)}const z=await D.json();if(H)return;const Q=z.memes??[];if(G)if(Z.current=Q,q(!1),u.length>0){const w=h==="and"?Q.filter(T=>u.every(W=>(T.tags??[]).includes(W))):Q.filter(T=>u.some(W=>(T.tags??[]).includes(W)));l(w)}else l(Q);else l(Q)}catch(_){H||k((_==null?void 0:_.message)??"Failed to load memes.")}finally{H||m(!1)}}return U(),()=>{H=!0}},[r,o,u,h,M,K,e]),i.useEffect(()=>{function S(H){C.current&&!C.current.contains(H.target)&&v(!1)}if(g)return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[g]);const j=i.useMemo(()=>I.filter(S=>!u.includes(S)&&(!b.trim()||S.toLowerCase().includes(b.toLowerCase()))),[I,u,b]),P=i.useMemo(()=>{const S=[...a];return S.sort((H,U)=>{const G=(H.title||H.PK||"").toLowerCase(),_=(U.title||U.PK||"").toLowerCase(),B=typeof H.averageRating=="number"?H.averageRating:0,D=typeof U.averageRating=="number"?U.averageRating:0,z=H.createdAt||"",Q=U.createdAt||"";if(N==="newest"){const w=Q.localeCompare(z);return w!==0?w:G.localeCompare(_)}if(N==="oldest"){const w=z.localeCompare(Q);return w!==0?w:G.localeCompare(_)}return N==="avgDesc"?D!==B?D-B:G.localeCompare(_):N==="avgAsc"?B!==D?B-D:G.localeCompare(_):N==="alphaAsc"?G.localeCompare(_):N==="alphaDesc"?_.localeCompare(G):0}),S},[a,N]),$=async(S,H)=>{const U=_o();if(U)try{await ht(`${U}/memes/stars`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({memeId:S,rating:H})}),l(G=>G.map(_=>_.PK===S?{..._,averageRating:H}:_))}catch{}};if(e&&!sa(e))return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Memes"}),s.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:"You do not have access to Memes. Join the Memes custom group or contact an admin."})]});const F=S=>{const H=new URLSearchParams(t);S==="mine"?H.set("tab","mine"):H.delete("tab"),n(H,{replace:!0})};return i.useEffect(()=>{r==="mine"&&!K&&n(S=>{const H=new URLSearchParams(S);return H.delete("tab"),H},{replace:!0})},[r,K,n]),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("header",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Memes"}),K&&s.jsxs("div",{className:"flex rounded-lg border border-slate-700 bg-slate-900/60 p-0.5",children:[s.jsx("button",{type:"button",onClick:()=>F("all"),className:`rounded-md px-3 py-1 text-sm font-medium transition-colors ${r==="all"?"bg-slate-700 text-slate-50":"text-slate-400 hover:text-slate-200"}`,children:"All"}),s.jsx("button",{type:"button",onClick:()=>F("mine"),className:`rounded-md px-3 py-1 text-sm font-medium transition-colors ${r==="mine"?"bg-slate-700 text-slate-50":"text-slate-400 hover:text-slate-200"}`,children:"My Memes"})]})]}),s.jsx("p",{className:"text-sm text-slate-400",children:r==="mine"?"Your memes, newest first. Filter by tags below.":e?"Browse and rate memes. Latest 20 shown by default.":"Cached memes. Sign in to rate or create."})]}),e&&s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-4","aria-label":"Search and filter",children:[s.jsxs("form",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",onSubmit:S=>{S.preventDefault(),c(o.trim())},children:[s.jsx("input",{type:"text",value:o,onChange:S=>c(S.target.value),placeholder:"Search memes (title, description)",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("button",{type:"submit",className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500",children:"Search"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-4 sm:gap-6",children:[s.jsxs("div",{ref:C,className:"relative flex-shrink-0 min-w-0 max-w-sm",children:[s.jsx("label",{htmlFor:"meme-tag-filter",className:"block text-xs font-medium text-slate-400 mb-1",children:"Tags (filter by)"}),s.jsx("input",{id:"meme-tag-filter",type:"text",value:b,onChange:S=>y(S.target.value),onFocus:()=>v(!0),placeholder:"Search and select tags",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",autoComplete:"off"}),g&&s.jsx("div",{className:"absolute left-0 top-full z-10 mt-1 w-full max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",role:"listbox",children:j.length>0?j.map(S=>s.jsx("button",{type:"button",role:"option",onClick:()=>{d(H=>H.includes(S)?H:[...H,S]),y("")},className:"block w-full text-left px-3 py-2 text-sm text-slate-200 hover:bg-slate-800",children:S},S)):s.jsx("div",{className:"px-3 py-2 text-xs text-slate-500",children:"No matching tags"})}),u.length>0&&s.jsxs("div",{className:"mt-2 flex flex-wrap gap-1",children:[u.map(S=>s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-300",children:[S,s.jsx("button",{type:"button",onClick:()=>d(H=>H.filter(U=>U!==S)),className:"hover:text-slate-100","aria-label":`Remove ${S}`,children:""})]},S)),s.jsxs("select",{value:h,onChange:S=>f(S.target.value),className:"rounded border border-slate-700 bg-slate-950 px-2 py-0.5 text-[11px] text-slate-400",children:[s.jsx("option",{value:"or",children:"OR"}),s.jsx("option",{value:"and",children:"AND"})]})]})]}),s.jsxs("div",{className:"flex items-end gap-2",children:[s.jsx("label",{className:"text-xs font-medium text-slate-400",children:"Sort"}),s.jsxs("select",{value:N,onChange:S=>x(S.target.value),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",children:[s.jsx("option",{value:"newest",children:"Newest first"}),s.jsx("option",{value:"oldest",children:"Oldest first"}),s.jsx("option",{value:"avgDesc",children:"Avg stars (high first)"}),s.jsx("option",{value:"avgAsc",children:"Avg stars (low first)"}),s.jsx("option",{value:"alphaAsc",children:"Title AZ"}),s.jsx("option",{value:"alphaDesc",children:"Title ZA"})]}),s.jsx("span",{className:"text-slate-500",children:P.length===0?"No memes":`${P.length} memes`})]})]})]}),E&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:E}),p?s.jsx("div",{className:"text-sm text-slate-400",children:"Loading memes"}):s.jsxs(s.Fragment,{children:[s.jsx("ul",{className:"space-y-3 mt-2",children:P.map(S=>{const H=S.thumbnailUrl||S.mediaUrl,U=S.title||S.PK||"Untitled",G=`/memes/${encodeURIComponent(S.PK)}`;return s.jsxs("li",{className:"flex gap-3 rounded-xl border border-slate-800 bg-slate-950/60 p-3",children:[s.jsx(oe,{to:G,className:"h-16 w-24 flex-shrink-0 overflow-hidden rounded-lg border border-slate-700 bg-slate-900 flex items-center justify-center text-xl hover:border-slate-600",children:H?s.jsx("img",{src:H,alt:"",className:"h-full w-full object-cover",onError:_=>{_.currentTarget.style.visibility="hidden"}}):s.jsx("span",{children:""})}),s.jsxs("div",{className:"min-w-0 flex-1 space-y-1",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("h2",{className:"truncate text-sm font-semibold text-slate-50",children:s.jsx(oe,{to:G,className:"hover:text-brand-orange",children:U})}),S.isPrivate&&s.jsx("span",{className:"inline-flex rounded-full bg-slate-900 px-2 py-0.5 text-[10px] uppercase text-slate-500",children:"Private"}),typeof S.averageRating=="number"&&s.jsxs("span",{className:"inline-flex rounded-full bg-slate-900 px-2 py-0.5 text-[11px] text-amber-300",children:[S.averageRating.toFixed(1),""]})]}),S.description&&s.jsx("p",{className:"text-xs text-slate-300 line-clamp-3",children:S.description}),S.tags&&S.tags.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1 pt-1",children:S.tags.map(_=>s.jsx("span",{className:"rounded-full bg-slate-900 px-2 py-0.5 text-[11px] text-slate-300",children:_},_))}),s.jsxs("div",{className:"pt-1 flex items-center gap-3",children:[ie(S)&&s.jsxs(oe,{to:`/memes/${encodeURIComponent(S.PK)}/edit`,className:"inline-flex items-center gap-1 text-[11px] text-slate-400 hover:text-slate-200",children:[s.jsx(ua,{className:"h-3.5 w-3.5"}),"Edit"]}),V&&s.jsxs("label",{className:"inline-flex items-center gap-1 text-[11px] text-slate-400",children:[s.jsx("span",{children:"Rate:"}),s.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-1 py-0.5 text-[11px] text-slate-50",onChange:_=>{const B=Number(_.target.value);B>=1&&B<=5&&$(S.PK,B)},defaultValue:"",children:[s.jsx("option",{value:"",children:"--"}),s.jsx("option",{value:"5",children:"5"}),s.jsx("option",{value:"4",children:"4"}),s.jsx("option",{value:"3",children:"3"}),s.jsx("option",{value:"2",children:"2"}),s.jsx("option",{value:"1",children:"1"})]})]})]})]})]},S.PK)})}),P.length===0&&!p&&s.jsx("div",{className:"flex items-center justify-center min-h-[200px]",children:s.jsx("p",{className:"text-lg text-slate-500",children:r==="mine"?fe?"No memes match the selected tags.":"You haven't created any memes yet. Create one!":fe?"No memes found.":"No memes yet. Create one!"})})]})]})},Fp=({tags:e,onTagsChange:t,allTags:n,fetchTags:r,placeholder:a="Type to suggest or create tag, Tab to autocomplete",className:l=""})=>{const[o,c]=i.useState(""),[u,d]=i.useState(!1),[h,f]=i.useState(0),[g,v]=i.useState(null),b=i.useRef(null),y=i.useRef(null),N=i.useRef(null);i.useEffect(()=>{function k(C){N.current&&!N.current.contains(C.target)&&d(!1)}return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]),i.useEffect(()=>{if(!r){v(null);return}const k=o.trim();if(k.length===0){v(null);return}b.current&&b.current.abort();const C=new AbortController;b.current=C;const I=setTimeout(()=>{r(k).then(A=>{C.signal.aborted||v(A)}).catch(()=>{C.signal.aborted||v(null)})},80);return()=>{clearTimeout(I),C.abort()}},[o,r]);const x=i.useMemo(()=>{const k=o.trim().toLowerCase();return r&&g!==null?g.filter(C=>!e.includes(C)):k?n.filter(C=>!e.includes(C)&&C.toLowerCase().includes(k)):n.filter(C=>!e.includes(C))},[n,e,o,r,g]),p=k=>{const C=k.trim();C&&!e.includes(C)&&t([...e,C]),c(""),f(0)},m=k=>{t(e.filter(C=>C!==k))},E=k=>{if(k.key==="Tab"||k.key==="Enter"){if(k.preventDefault(),x.length>0)p(x[h]??x[0]);else{const C=o.trim();C&&p(C)}return}if(k.key==="ArrowDown"){k.preventDefault(),f(C=>(C+1)%Math.max(1,x.length));return}if(k.key==="ArrowUp"){k.preventDefault(),f(C=>C<=0?Math.max(0,x.length-1):C-1);return}k.key==="Escape"&&(d(!1),f(0))};return s.jsxs("div",{ref:N,className:`relative ${l}`,children:[s.jsx("input",{ref:y,type:"text",value:o,onChange:k=>{c(k.target.value),d(!0),f(0)},onFocus:()=>d(!0),onKeyDown:E,placeholder:a,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",autoComplete:"off"}),u&&(x.length>0||o.trim())&&s.jsx("div",{className:"absolute left-0 top-full z-10 mt-1 w-full max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",role:"listbox",children:x.length>0?x.map((k,C)=>s.jsx("button",{type:"button",role:"option","aria-selected":C===h,onClick:()=>p(k),onMouseEnter:()=>f(C),className:`block w-full text-left px-3 py-2 text-sm text-slate-200 hover:bg-slate-800 ${C===h?"bg-slate-800":""}`,children:k},k)):s.jsxs("button",{type:"button",onClick:()=>o.trim()&&p(o.trim()),className:"block w-full text-left px-3 py-2 text-sm text-slate-200 hover:bg-slate-800",children:['Create "',o.trim(),'"']})}),e.length>0&&s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:e.map(k=>s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-300",children:[k,s.jsx("button",{type:"button",onClick:()=>m(k),className:"hover:text-slate-100","aria-label":`Remove ${k}`,children:""})]},k))})]})},$d=["Impact","Arial Black","Comic Sans MS","Georgia","Verdana","Times New Roman","Courier New"],Id=[{id:"top-left",x:.05,y:.05,align:"left"},{id:"top-center",x:.5,y:.05,align:"center"},{id:"top-right",x:.95,y:.05,align:"right"},{id:"center",x:.5,y:.5,align:"center"},{id:"bottom-left",x:.05,y:.95,align:"left"},{id:"bottom-center",x:.5,y:.95,align:"center"},{id:"bottom-right",x:.95,y:.95,align:"right"}],Ud=500,cb=10*1024*1024;function jr(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const ub=()=>{const{user:e}=Oe(),t=Vt(),n=i.useRef(null),[r,a]=i.useState(null),[l,o]=i.useState(null),[c,u]=i.useState(""),[d,h]=i.useState([]),[f,g]=i.useState(null),[v,b]=i.useState(""),[y,N]=i.useState(""),[x,p]=i.useState(!1),[m,E]=i.useState("resize"),[k,C]=i.useState(!1),[I,A]=i.useState(null),[Z,M]=i.useState(!1),[q,V]=i.useState([]),[se,Y]=i.useState([]),K=U=>{d.some(G=>G.zoneId===U)||(h(G=>[...G,{zoneId:U,text:"",font:$d[0],color:"#ffffff",size:32}]),g(U))},ie=U=>{h(G=>G.filter(_=>_.zoneId!==U)),f===U&&g(null)},fe=(U,G)=>{h(_=>_.map(B=>B.zoneId===U?{...B,...G}:B))},j=U=>{if(U.size>cb){A("File too large (max 10MB)");return}if(!["image/jpeg","image/png","image/gif","image/webp","image/bmp"].includes(U.type)){A("Invalid image type");return}A(null);const _=new FileReader;_.onload=()=>a(_.result),_.readAsDataURL(U),o(U),u("")},P=async()=>{const U=c.trim();if(U){A(null);try{const _=await(await J(`${jr()}/memes/import-from-url`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:U})})).json();if(!_.presignedUrl){A(_.error||"Failed to load image from URL");return}a(_.presignedUrl),o(null)}catch(G){A((G==null?void 0:G.message)??"Failed to load image from URL")}}},$=async()=>{const U=jr();if(U){M(!0),A(null);try{const _=await(await J(`${U}/memes/generate-title`,{method:"POST"})).json();_.title&&b(_.title)}catch{b(`Meme ${Date.now().toString(36)}`)}finally{M(!1)}}},F=useCallback(()=>{const U=n.current;if(!U||!r)return;const G=U.getContext("2d");if(!G)return;const _=new Image;_.crossOrigin="anonymous",_.onload=()=>{const B=U.width,D=U.height;if(G.clearRect(0,0,B,D),m==="resize"){const z=Math.min(B/_.width,D/_.height),Q=_.width*z,w=_.height*z,T=(B-Q)/2,W=(D-w)/2;G.drawImage(_,T,W,Q,w)}else G.drawImage(_,0,0,B,D);d.forEach(z=>{const Q=Id.find(W=>W.id===z.zoneId);if(!Q||!z.text)return;G.font=`${z.size}px ${z.font}`,G.fillStyle=z.color,G.textAlign=Q.align,G.textBaseline=Q.y<.5?"top":"bottom";const w=Q.x*B,T=Q.y*D;G.fillText(z.text,w,T)})},_.onerror=()=>A("Failed to load image"),_.src=r},[r,d,m]);i.useEffect(()=>F(),[F]),i.useEffect(()=>{const U=jr();if(!U)return;let G=!1;return J(`${U}/memes/tags`).then(_=>_.ok?_.json():Promise.reject(new Error("Failed to load tags"))).then(_=>{G||Y((_.tags??[]).sort((B,D)=>B.localeCompare(D)))}).catch(()=>{}),()=>{G=!0}},[]);const S=async()=>{if(!r){A("Add an image first");return}const U=n.current;if(!U)return;const G=jr();if(!G){A("API not configured");return}C(!0),A(null);try{const _=await new Promise(T=>{U.toBlob(W=>T(W),"image/png",.95)});if(!_)throw new Error("Failed to export canvas");const D=await(await J(`${G}/memes/upload`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contentType:"image/png"})})).json();if(!D.uploadUrl||!D.key)throw new Error(D.error||"Failed to get upload URL");const z=D.key;await fetch(D.uploadUrl,{method:"PUT",body:_,headers:{"Content-Type":"image/png"}});const Q=await J(`${G}/memes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mediaKey:z,title:v.trim()||void 0,description:y.trim()||void 0,isPrivate:x,textBoxes:d,sizeMode:m,tags:q})});if(!Q.ok){const T=await Q.json();throw new Error(T.error||"Failed to save meme")}const w=await Q.json();try{sessionStorage.setItem("memes_my_cache_invalidate",JSON.stringify({tagOnly:!1}))}catch{}t(w.id?`/memes/${encodeURIComponent(w.id)}`:"/memes")}catch(_){A((_==null?void 0:_.message)??"Failed to save meme")}finally{C(!1)}},H=nr(e);return e?H?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("header",{className:"flex items-center gap-4",children:[s.jsxs(oe,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Memes"]}),s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Meme Generator"})]}),s.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1fr,320px]",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-2",children:"Image"}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("input",{type:"file",accept:"image/jpeg,image/png,image/gif,image/webp,image/bmp",onChange:U=>{var G;return((G=U.target.files)==null?void 0:G[0])&&j(U.target.files[0])},className:"text-sm text-slate-300 file:mr-2 file:rounded file:border-0 file:bg-brand-orange file:px-3 file:py-1 file:text-slate-950"}),s.jsx("span",{className:"text-xs text-slate-500",children:"or"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"url",value:c,onChange:U=>u(U.target.value),placeholder:"Paste image URL",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500"}),s.jsx("button",{type:"button",onClick:P,className:"rounded-md bg-slate-700 px-3 py-2 text-sm text-slate-200 hover:bg-slate-600",children:"Load"})]})]})]}),r&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{className:"text-xs font-medium text-slate-400",children:"Preview"}),s.jsxs("select",{value:m,onChange:U=>E(U.target.value),className:"rounded border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-300",children:[s.jsx("option",{value:"resize",children:"Resize to fit"}),s.jsx("option",{value:"original",children:"Original"})]})]}),s.jsx("canvas",{ref:n,width:Ud,height:Ud,className:"w-full max-w-[500px] border border-slate-700 rounded-lg bg-slate-900"})]}),s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-2",children:"Text boxes (fixed zones)"}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:Id.map(U=>{const G=d.find(_=>_.zoneId===U.id);return s.jsxs("div",{className:"rounded border border-slate-700 p-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"text-xs text-slate-400",children:U.id}),G?s.jsx("button",{type:"button",onClick:()=>ie(U.id),className:"text-red-400 hover:text-red-300 text-xs",children:"Remove"}):s.jsx("button",{type:"button",onClick:()=>K(U.id),className:"text-brand-orange hover:text-orange-400 text-xs",children:"Add"})]}),G&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("input",{type:"text",value:G.text,onChange:_=>fe(U.id,{text:_.target.value}),placeholder:"Text",className:"w-full rounded border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-50"}),s.jsx("select",{value:G.font,onChange:_=>fe(U.id,{font:_.target.value}),className:"w-full rounded border border-slate-700 bg-slate-950 px-2 py-1 text-[11px] text-slate-300",children:$d.map(_=>s.jsx("option",{value:_,children:_},_))}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("input",{type:"color",value:G.color,onChange:_=>fe(U.id,{color:_.target.value}),className:"h-6 w-8 cursor-pointer rounded border border-slate-700"}),s.jsx("input",{type:"number",value:G.size,onChange:_=>fe(U.id,{size:Number(_.target.value)||32}),min:12,max:72,className:"w-14 rounded border border-slate-700 bg-slate-950 px-1 py-0.5 text-[11px] text-slate-50"})]})]})]},U.id)})})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Title (optional)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:v,onChange:U=>b(U.target.value),placeholder:"Generate or type",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500"}),s.jsx("button",{type:"button",onClick:$,disabled:Z,className:"rounded-md bg-brand-orange px-3 py-2 text-sm font-medium text-slate-950 disabled:opacity-50",children:Z?"":"Generate"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Description (optional)"}),s.jsx("textarea",{value:y,onChange:U=>N(U.target.value),placeholder:"Optional description",rows:3,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Tags"}),s.jsx(Fp,{tags:q,onTagsChange:V,allTags:se,fetchTags:async U=>{const G=jr();if(!G)return[];const _=await J(`${G}/memes/tags?q=${encodeURIComponent(U)}`);return _.ok?(await _.json()).tags??[]:[]},placeholder:"Type to suggest or create tag, Tab to autocomplete"})]}),s.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:[s.jsx("input",{type:"checkbox",checked:x,onChange:U=>p(U.target.checked),className:"rounded border-slate-600"}),"Private (only you can see)"]})]}),I&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:I}),s.jsx("button",{type:"button",onClick:S,disabled:!r||k,className:"w-full rounded-md bg-brand-orange px-4 py-3 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50 disabled:cursor-not-allowed",children:k?"Saving":"Save meme"})]})]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-2xl font-semibold text-slate-50",children:"Meme Generator"}),s.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:"Meme creator access required (user + Memes group). Join the Memes custom group or contact an admin."})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-2xl font-semibold text-slate-50",children:"Meme Generator"}),s.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:"Sign in to create memes."})]})};function Dd(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const db=()=>{const{id:e}=ir(),{user:t}=Oe(),[n,r]=i.useState(null),[a,l]=i.useState(!0),[o,c]=i.useState(null),u=!!n&&(Jc(t)||nr(t)&&n.userId===(t==null?void 0:t.userId)),d=e?decodeURIComponent(e):"";i.useEffect(()=>{const v=Dd();if(!v||!d){c(d?"API URL not set.":"Missing meme id."),l(!1);return}let b=!1;async function y(){l(!0),c(null);try{const x=await ht(`${v}${t?"/memes":"/memes/cache"}?id=${encodeURIComponent(d)}`);if(x.status===404){b||r(null);return}if(!x.ok){const m=await x.text();throw new Error(`HTTP ${x.status}: ${m}`)}const p=await x.json();if(b)return;r(p.meme??null)}catch(N){b||c((N==null?void 0:N.message)??"Failed to load meme.")}finally{b||l(!1)}}return y(),()=>{b=!0}},[d,t]);const h=async v=>{const b=Dd();if(!(!b||!n))try{const y=await ht(`${b}/memes/stars`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({memeId:n.PK,rating:v})});if(y.ok){const N=await y.json();r(x=>x?{...x,averageRating:N.averageRating??v}:null)}}catch{}};if(!t||sa(t),t&&!sa(t))return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(oe,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Memes"]}),s.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:"Sign in and join Memes group to view."})]});if(a)return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(oe,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Memes"]}),s.jsx("div",{className:"text-sm text-slate-400",children:"Loading"})]});if(o||!n)return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(oe,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Memes"]}),s.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:o||"Meme not found."})]});const f=n.title||n.PK||"Untitled",g=n.mediaUrl||n.thumbnailUrl;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("header",{className:"flex items-center justify-between gap-4",children:[s.jsxs(oe,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Memes"]}),u&&s.jsxs(oe,{to:`/memes/${encodeURIComponent(n.PK)}/edit`,className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(ua,{className:"h-4 w-4"}),"Edit"]})]}),s.jsx("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 overflow-hidden min-h-[200px] flex items-center justify-center p-4",children:g?s.jsxs(s.Fragment,{children:[s.jsx("img",{src:g,alt:f,className:"w-full max-w-2xl mx-auto block object-contain max-h-[70vh]",onError:v=>{v.currentTarget.style.display="none";const b=v.currentTarget.nextElementSibling;b&&b.classList.remove("hidden")}}),s.jsx("div",{className:"hidden py-12 text-slate-500","aria-hidden":!0,children:"Image failed to load"})]}):s.jsx("div",{className:"py-12 text-slate-500",children:"No image"})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-50",children:f}),n.isPrivate&&s.jsx("span",{className:"inline-flex rounded-full bg-slate-900 px-2 py-0.5 text-xs uppercase text-slate-500",children:"Private"}),n.description&&s.jsx("p",{className:"text-sm text-slate-300",children:n.description}),s.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[s.jsx("span",{className:"text-xs text-slate-500",children:"Tags:"}),n.tags&&n.tags.length>0?n.tags.map(v=>s.jsx("span",{className:"rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-300",children:v},v)):s.jsx("span",{className:"text-xs text-slate-500",children:""})]}),t&&Ap(t)&&s.jsx("div",{className:"pt-2",children:s.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-400",children:[s.jsx("span",{children:"Rate:"}),s.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-2 py-1 text-sm text-slate-50",onChange:v=>{const b=Number(v.target.value);b>=1&&b<=5&&h(b)},defaultValue:"",children:[s.jsx("option",{value:"",children:"--"}),s.jsx("option",{value:"5",children:"5"}),s.jsx("option",{value:"4",children:"4"}),s.jsx("option",{value:"3",children:"3"}),s.jsx("option",{value:"2",children:"2"}),s.jsx("option",{value:"1",children:"1"})]}),typeof n.averageRating=="number"&&s.jsxs("span",{className:"text-amber-300",children:[n.averageRating.toFixed(1),""]})]})})]})]})};function Bo(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const mb=()=>{const{id:e}=ir(),t=Vt(),{user:n}=Oe(),[r,a]=i.useState(null),[l,o]=i.useState([]),[c,u]=i.useState(!1),[d,h]=i.useState(!0),[f,g]=i.useState(!1),[v,b]=i.useState(null),[y,N]=i.useState([]),x=e?decodeURIComponent(e):"",p=!!(n&&(nr(n)||Jc(n)));i.useEffect(()=>{const k=Bo();if(!k||!x){b(x?"API URL not set.":"Missing meme id."),h(!1);return}let C=!1;async function I(){var A,Z;h(!0),b(null);try{const[M,q]=await Promise.all([J(`${k}/memes?id=${encodeURIComponent(x)}`),J(`${k}/memes/tags`)]);if(M.status===404||!M.ok){C||a(null);return}const V=await M.json(),se=await q.json();if(C)return;a(V.meme??null),o(((A=V.meme)==null?void 0:A.tags)??[]),u(((Z=V.meme)==null?void 0:Z.isPrivate)??!1),N((se.tags??[]).sort((Y,K)=>Y.localeCompare(K)))}catch(M){C||b((M==null?void 0:M.message)??"Failed to load meme.")}finally{C||h(!1)}}return I(),()=>{C=!0}},[x]);const m=i.useRef(null);i.useEffect(()=>{r&&m.current===null&&(m.current=r.isPrivate??!1)},[r]);const E=async()=>{const k=Bo();if(!(!k||!r)){g(!0),b(null);try{const C=await J(`${k}/memes`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r.PK,tags:l,isPrivate:c})});if(!C.ok){const A=await C.json();throw new Error(A.error||"Failed to save")}const I=m.current===(c??!1);try{sessionStorage.setItem("memes_my_cache_invalidate",JSON.stringify({memeId:r.PK,tagOnly:I,tags:l}))}catch{}t(`/memes/${encodeURIComponent(r.PK)}`)}catch(C){b((C==null?void 0:C.message)??"Failed to save")}finally{g(!1)}}};return!n||!p?s.jsxs("div",{className:"space-y-6",children:[s.jsxs(oe,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Memes"]}),s.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:"Sign in and join Memes group to edit."})]}):d?s.jsxs("div",{className:"space-y-4",children:[s.jsxs(oe,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Memes"]}),s.jsx("div",{className:"text-sm text-slate-400",children:"Loading"})]}):v||!r?s.jsxs("div",{className:"space-y-4",children:[s.jsxs(oe,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Memes"]}),s.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:v||"Meme not found."})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("header",{className:"flex items-center gap-4",children:[s.jsxs(oe,{to:`/memes/${encodeURIComponent(r.PK)}`,className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Meme"]}),s.jsx("h1",{className:"text-xl font-semibold text-slate-50",children:"Edit meme"})]}),s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-4 max-w-xl",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Tags"}),s.jsx(Fp,{tags:l,onTagsChange:o,allTags:y,fetchTags:async k=>{const C=Bo();if(!C)return[];const I=await J(`${C}/memes/tags?q=${encodeURIComponent(k)}`);return I.ok?(await I.json()).tags??[]:[]},placeholder:"Type to suggest or create tag, Tab to autocomplete"})]}),s.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:[s.jsx("input",{type:"checkbox",checked:c,onChange:k=>u(k.target.checked),className:"rounded border-slate-600"}),"Private (only you can see)"]}),v&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:v}),s.jsx("button",{type:"button",onClick:E,disabled:f,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:f?"Saving":"Save"})]})]})},Ua=[{label:"Websites",to:"/websites",section:"discover",minRole:"guest"},{label:"Media",to:"/media",section:"discover",minRole:"guest"},{label:"Internet Dashboard",to:"/internet-dashboard",section:"discover",minRole:"guest"},{label:"Profile",to:"/profile",section:"discover",minRole:"user"},{label:"Squash",to:"/squash",section:"squash",minRole:"user"},{label:"Squash Admin",to:"/squash-admin",section:"squash",minRole:"manager"},{label:"Memes",to:"/memes",section:"memes",minRole:"guest"},{label:"Meme Generator",to:"/memes/create",section:"memes",minRole:"user",memesCreate:!0},{label:"Financial",to:"/financial",section:"financial",minRole:"user"},{label:"Financial Admin",to:"/admin/financial",section:"financial",minRole:"manager"},{label:"Highlights",to:"/recommended/highlights",section:"recommended",minRole:"guest"},{label:"Highest Rated",to:"/recommended/highest-rated",section:"recommended",minRole:"guest"},{label:"Recommended",to:"/admin/recommended",section:"admin",minRole:"manager"},{label:"Membership",to:"/admin/membership",section:"admin",minRole:"manager"},{label:"Websites",to:"/admin/websites",section:"admin",minRole:"manager"},{label:"Media",to:"/admin/media",section:"admin",minRole:"manager"},{label:"Branding",to:"/admin/branding",section:"admin",minRole:"superadmin"},{label:"Internet Dashboard",to:"/admin/internet-dashboard",section:"admin",minRole:"superadmin"}],_p="funkedupshift_sectionOpen";function Da(){return{discover:!0,squash:!1,memes:!1,financial:!1,recommended:!0,admin:!1}}function fb(){try{const e=sessionStorage.getItem(_p);if(!e)return Da();const t=JSON.parse(e);return typeof t!="object"||t===null?Da():{...Da(),...t}}catch{return Da()}}function pb(e){try{sessionStorage.setItem(_p,JSON.stringify(e))}catch{}}const hb=()=>{const{user:e,isLoading:t,signOut:n}=Oe(),{logo:r}=Up(),a=Vt(),[l,o]=Ae.useState(!1),[c,u]=Ae.useState(fb),d=m=>{u(E=>{const k={...E,[m]:!E[m]};return pb(k),k})},h=()=>{n(),o(!1),a("/")};e==null||e.role;const f=Ua.filter(m=>ct(e??null,m.minRole)),g=f.filter(m=>m.section==="discover"),v=f.filter(m=>m.section==="recommended"),b=Ua.filter(m=>m.section==="squash").filter(m=>m.to==="/squash"?Sl(e):kl(e)),y=Ua.filter(m=>m.section==="memes").filter(m=>ct(e??null,m.minRole)?m.memesCreate?nr(e):!0:!1),N=Ua.filter(m=>m.section==="financial").filter(m=>ct(e??null,m.minRole)).filter(m=>m.to==="/financial"?!0:Cl(e)),x=f.filter(m=>m.section==="admin"),p=({isActive:m})=>["flex items-center rounded-md px-3 py-2 text-sm font-medium",m?"bg-slate-800 text-white":"text-slate-300 hover:bg-slate-800/70 hover:text-white"].join(" ");return s.jsxs("div",{className:"min-h-screen bg-slate-950 text-slate-50 flex flex-col",children:[s.jsx(pv,{}),s.jsx("header",{className:"border-b border-slate-800 bg-slate-950/80 backdrop-blur z-20 sticky top-0",children:s.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-3 flex items-center justify-between gap-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-md p-2 text-slate-200 hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-brand-orange lg:hidden",onClick:()=>o(!0),"aria-label":"Open main navigation",children:s.jsx(Hc,{className:"h-6 w-6"})}),s.jsxs(oe,{to:"/",className:"flex items-center gap-2",children:[r?s.jsx("img",{src:r.url,alt:r.alt,className:"h-8 w-auto rounded-md border border-slate-700 object-contain"}):s.jsx("div",{className:"h-8 w-8 rounded-md border border-slate-700 bg-gradient-to-br from-brand-orange to-brand-navy"}),s.jsx("span",{className:"text-sm font-semibold tracking-[0.2em] uppercase text-slate-100",children:"Funked Up Shift"})]})]}),s.jsx("div",{className:"flex items-center gap-3",children:e?s.jsxs(s.Fragment,{children:[s.jsx(xv,{}),s.jsxs("span",{className:"hidden sm:inline text-xs text-slate-300",children:[e.email," ",s.jsxs("span",{className:"text-slate-500",children:["(",e.role==="superadmin"?"SuperAdmin":e.role,")"]})]}),s.jsx("button",{type:"button",onClick:h,className:"rounded-full border border-slate-700 px-3 py-1 text-xs font-medium text-slate-200 hover:bg-slate-800",children:"Sign out"})]}):t?s.jsx("span",{className:"text-xs text-slate-400",children:"Loading..."}):s.jsx(oe,{to:"/auth",className:"rounded-full bg-brand-orange px-3 py-1 text-xs font-semibold text-slate-950 hover:bg-orange-500",children:"Sign in"})})]})}),s.jsxs("div",{className:"flex-1 flex",children:[s.jsx("aside",{className:"hidden lg:block w-64 border-r border-slate-800 bg-slate-950/80",children:s.jsxs("nav",{className:"h-full overflow-y-auto px-4 py-6 space-y-6 text-sm",children:[s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("discover"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Discover",c.discover??!0?s.jsx(Zt,{className:"h-4 w-4 shrink-0"}):s.jsx(Xt,{className:"h-4 w-4 shrink-0"})]}),(c.discover??!0)&&s.jsx("div",{className:"space-y-1",children:g.map(m=>s.jsx(Yt,{to:m.to,className:p,children:m.label},m.to))})]}),b.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("squash"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Squash",c.squash??!1?s.jsx(Zt,{className:"h-4 w-4 shrink-0"}):s.jsx(Xt,{className:"h-4 w-4 shrink-0"})]}),(c.squash??!1)&&s.jsx("div",{className:"space-y-1",children:b.map(m=>s.jsx(Yt,{to:m.to,className:p,children:m.label},m.to))})]}),y.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("memes"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Memes",c.memes??!1?s.jsx(Zt,{className:"h-4 w-4 shrink-0"}):s.jsx(Xt,{className:"h-4 w-4 shrink-0"})]}),(c.memes??!1)&&s.jsx("div",{className:"space-y-1",children:y.map(m=>s.jsx(Yt,{to:m.to,className:p,children:m.label},m.to))})]}),v.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("recommended"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Recommended",c.recommended??!0?s.jsx(Zt,{className:"h-4 w-4 shrink-0"}):s.jsx(Xt,{className:"h-4 w-4 shrink-0"})]}),(c.recommended??!0)&&s.jsx("div",{className:"space-y-1",children:v.map(m=>s.jsx(Yt,{to:m.to,className:p,children:m.label},m.to))})]}),N.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("financial"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Financial",c.financial??!1?s.jsx(Zt,{className:"h-4 w-4 shrink-0"}):s.jsx(Xt,{className:"h-4 w-4 shrink-0"})]}),(c.financial??!1)&&s.jsx("div",{className:"space-y-1",children:N.map(m=>s.jsx(Yt,{to:m.to,className:p,children:m.label},m.to))})]}),x.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("admin"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Admin",c.admin??!1?s.jsx(Zt,{className:"h-4 w-4 shrink-0"}):s.jsx(Xt,{className:"h-4 w-4 shrink-0"})]}),(c.admin??!1)&&s.jsx("div",{className:"space-y-1",children:x.map(m=>s.jsx(Yt,{to:m.to,className:p,children:m.label},m.to))})]})]})}),s.jsxs(pn,{open:l,onClose:o,className:"lg:hidden",children:[s.jsx("div",{className:"fixed inset-0 bg-black/40","aria-hidden":"true"}),s.jsxs(pn.Panel,{className:"fixed inset-y-0 left-0 w-72 bg-slate-950 border-r border-slate-800 p-4 flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx(pn.Title,{className:"text-sm font-semibold tracking-[0.15em] uppercase text-slate-100",children:"Funked Up Shift"}),s.jsx("button",{type:"button",className:"rounded-md p-1 text-slate-200 hover:bg-slate-800",onClick:()=>o(!1),"aria-label":"Close main navigation",children:s.jsx(Kl,{className:"h-5 w-5"})})]}),s.jsxs("nav",{className:"flex-1 overflow-y-auto space-y-6 text-sm",children:[s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("discover"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Discover",c.discover??!0?s.jsx(Zt,{className:"h-4 w-4 shrink-0"}):s.jsx(Xt,{className:"h-4 w-4 shrink-0"})]}),(c.discover??!0)&&s.jsx("div",{className:"space-y-1",children:g.map(m=>s.jsx(Yt,{to:m.to,className:p,onClick:()=>o(!1),children:m.label},m.to))})]}),v.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("recommended"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Recommended",c.recommended??!0?s.jsx(Zt,{className:"h-4 w-4 shrink-0"}):s.jsx(Xt,{className:"h-4 w-4 shrink-0"})]}),(c.recommended??!0)&&s.jsx("div",{className:"space-y-1",children:v.map(m=>s.jsx(Yt,{to:m.to,className:p,onClick:()=>o(!1),children:m.label},m.to))})]}),b.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("squash"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Squash",c.squash??!1?s.jsx(Zt,{className:"h-4 w-4 shrink-0"}):s.jsx(Xt,{className:"h-4 w-4 shrink-0"})]}),(c.squash??!1)&&s.jsx("div",{className:"space-y-1",children:b.map(m=>s.jsx(Yt,{to:m.to,className:p,onClick:()=>o(!1),children:m.label},m.to))})]}),N.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("financial"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Financial",c.financial??!1?s.jsx(Zt,{className:"h-4 w-4 shrink-0"}):s.jsx(Xt,{className:"h-4 w-4 shrink-0"})]}),(c.financial??!1)&&s.jsx("div",{className:"space-y-1",children:N.map(m=>s.jsx(Yt,{to:m.to,className:p,onClick:()=>o(!1),children:m.label},m.to))})]}),x.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>d("admin"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Admin",c.admin??!1?s.jsx(Zt,{className:"h-4 w-4 shrink-0"}):s.jsx(Xt,{className:"h-4 w-4 shrink-0"})]}),(c.admin??!1)&&s.jsx("div",{className:"space-y-1",children:x.map(m=>s.jsx(Yt,{to:m.to,className:p,onClick:()=>o(!1),children:m.label},m.to))})]})]})]})]}),s.jsx("main",{className:"flex-1 min-w-0",children:s.jsx("div",{className:"mx-auto max-w-6xl px-4 py-6",children:s.jsxs(sg,{children:[s.jsx(Me,{path:"/",element:s.jsx(gv,{})}),s.jsx(Me,{path:"/websites",element:s.jsx(yv,{})}),s.jsx(Me,{path:"/websites/:id",element:s.jsx(vv,{})}),s.jsx(Me,{path:"/media",element:s.jsx(bv,{})}),s.jsx(Me,{path:"/media/:id",element:s.jsx(wv,{})}),s.jsx(Me,{path:"/internet-dashboard",element:s.jsx(Cv,{})}),s.jsx(Me,{path:"/recommended/highlights",element:s.jsx(Pv,{})}),s.jsx(Me,{path:"/recommended/highest-rated",element:s.jsx(Lv,{})}),s.jsx(Me,{path:"/squash",element:s.jsx(rb,{})}),s.jsx(Me,{path:"/squash-admin",element:s.jsx(ab,{})}),s.jsx(Me,{path:"/memes",element:s.jsx(ib,{})}),s.jsx(Me,{path:"/memes/create",element:s.jsx(ub,{})}),s.jsx(Me,{path:"/memes/:id/edit",element:s.jsx(mb,{})}),s.jsx(Me,{path:"/memes/:id",element:s.jsx(db,{})}),s.jsx(Me,{path:"/financial",element:s.jsx(lb,{})}),s.jsx(Me,{path:"/admin/financial",element:s.jsx(ob,{})}),s.jsx(Me,{path:"/admin/branding",element:s.jsx(Iv,{})}),s.jsx(Me,{path:"/admin/internet-dashboard",element:s.jsx(Uv,{})}),s.jsx(Me,{path:"/admin/recommended",element:s.jsx(Dv,{})}),s.jsx(Me,{path:"/admin/membership",element:s.jsx(Ov,{})}),s.jsx(Me,{path:"/admin/users/edit",element:s.jsx(Jv,{})}),s.jsx(Me,{path:"/admin/websites",element:s.jsx(Bv,{})}),s.jsx(Me,{path:"/admin/sites/edit/:id",element:s.jsx(Hv,{})}),s.jsx(Me,{path:"/admin/media",element:s.jsx(Gv,{})}),s.jsx(Me,{path:"/admin/media/edit/:id",element:s.jsx(Kv,{})}),s.jsx(Me,{path:"/admin/*",element:s.jsx("div",{children:"Admin area"})}),s.jsx(Me,{path:"/profile",element:s.jsx(nb,{})}),s.jsx(Me,{path:"/auth",element:s.jsx(Qv,{})}),s.jsx(Me,{path:"*",element:s.jsx("div",{children:"Not found"})})]})})})]}),s.jsx("footer",{className:"border-t border-slate-800 bg-slate-950",children:s.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-4 flex flex-col sm:flex-row items-center justify-between gap-3 text-xs text-slate-500",children:[s.jsxs("nav",{className:"flex flex-wrap gap-3 justify-center sm:justify-start",children:[s.jsx(oe,{to:"/",className:"hover:text-slate-300",children:"Home"}),s.jsx(oe,{to:"/websites",className:"hover:text-slate-300",children:"Websites"}),s.jsx(oe,{to:"/media",className:"hover:text-slate-300",children:"Media"}),s.jsx(oe,{to:"/internet-dashboard",className:"hover:text-slate-300",children:"Internet dashboard"}),s.jsx(oe,{to:"/recommended/highlights",className:"hover:text-slate-300",children:"Highlights"}),s.jsx(oe,{to:"/recommended/highest-rated",className:"hover:text-slate-300",children:"Highest rated"}),e&&s.jsx(oe,{to:"/profile",className:"hover:text-slate-300",children:"Profile"}),ct(e??null,"superadmin")&&s.jsx(oe,{to:"/admin/branding",className:"hover:text-slate-300",children:"Branding"}),Sl(e)&&s.jsx(oe,{to:"/squash",className:"hover:text-slate-300",children:"Squash"}),kl(e)&&s.jsx(oe,{to:"/squash-admin",className:"hover:text-slate-300",children:"Squash Admin"}),(!e||sa(e))&&s.jsx(oe,{to:"/memes",className:"hover:text-slate-300",children:"Memes"}),Lp(e)&&s.jsx(oe,{to:"/financial",className:"hover:text-slate-300",children:"Financial"}),Cl(e)&&s.jsx(oe,{to:"/admin/financial",className:"hover:text-slate-300",children:"Financial Admin"})]}),s.jsxs("div",{className:"text-slate-600",children:[s.jsx("span",{className:"font-mono text-[11px]",children:"funkedupshift"})," ",s.jsx("span",{className:"text-slate-700",children:""})," ",s.jsx("span",{children:"All data public, admin-managed curation"})]})]})})]})},Md=document.getElementById("root");Md&&zo.createRoot(Md).render(s.jsx(Ae.StrictMode,{children:s.jsx(mg,{children:s.jsx(cv,{children:s.jsx(dv,{children:s.jsx(fv,{children:s.jsx(hb,{})})})})})}));

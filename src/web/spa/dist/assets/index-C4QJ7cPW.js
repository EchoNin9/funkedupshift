function Hp(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const l=Object.getOwnPropertyDescriptor(s,a);l&&Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function Kp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Hu={exports:{}},wl={},Ku={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ta=Symbol.for("react.element"),Vp=Symbol.for("react.portal"),qp=Symbol.for("react.fragment"),Jp=Symbol.for("react.strict_mode"),Yp=Symbol.for("react.profiler"),Qp=Symbol.for("react.provider"),Zp=Symbol.for("react.context"),Xp=Symbol.for("react.forward_ref"),e0=Symbol.for("react.suspense"),t0=Symbol.for("react.memo"),n0=Symbol.for("react.lazy"),rd=Symbol.iterator;function r0(e){return e===null||typeof e!="object"?null:(e=rd&&e[rd]||e["@@iterator"],typeof e=="function"?e:null)}var Vu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qu=Object.assign,Ju={};function ts(e,t,n){this.props=e,this.context=t,this.refs=Ju,this.updater=n||Vu}ts.prototype.isReactComponent={};ts.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ts.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Yu(){}Yu.prototype=ts.prototype;function qi(e,t,n){this.props=e,this.context=t,this.refs=Ju,this.updater=n||Vu}var Ji=qi.prototype=new Yu;Ji.constructor=qi;qu(Ji,ts.prototype);Ji.isPureReactComponent=!0;var sd=Array.isArray,Qu=Object.prototype.hasOwnProperty,Yi={current:null},Zu={key:!0,ref:!0,__self:!0,__source:!0};function Xu(e,t,n){var s,a={},l=null,o=null;if(t!=null)for(s in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(l=""+t.key),t)Qu.call(t,s)&&!Zu.hasOwnProperty(s)&&(a[s]=t[s]);var c=arguments.length-2;if(c===1)a.children=n;else if(1<c){for(var d=Array(c),u=0;u<c;u++)d[u]=arguments[u+2];a.children=d}if(e&&e.defaultProps)for(s in c=e.defaultProps,c)a[s]===void 0&&(a[s]=c[s]);return{$$typeof:ta,type:e,key:l,ref:o,props:a,_owner:Yi.current}}function s0(e,t){return{$$typeof:ta,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Qi(e){return typeof e=="object"&&e!==null&&e.$$typeof===ta}function a0(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ad=/\/+/g;function Kl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?a0(""+e.key):t.toString(36)}function $a(e,t,n,s,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case ta:case Vp:o=!0}}if(o)return o=e,a=a(o),e=s===""?"."+Kl(o,0):s,sd(a)?(n="",e!=null&&(n=e.replace(ad,"$&/")+"/"),$a(a,t,n,"",function(u){return u})):a!=null&&(Qi(a)&&(a=s0(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(ad,"$&/")+"/")+e)),t.push(a)),1;if(o=0,s=s===""?".":s+":",sd(e))for(var c=0;c<e.length;c++){l=e[c];var d=s+Kl(l,c);o+=$a(l,t,n,d,a)}else if(d=r0(e),typeof d=="function")for(e=d.call(e),c=0;!(l=e.next()).done;)l=l.value,d=s+Kl(l,c++),o+=$a(l,t,n,d,a);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function ca(e,t,n){if(e==null)return e;var s=[],a=0;return $a(e,s,"","",function(l){return t.call(n,l,a++)}),s}function l0(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var kt={current:null},Ia={transition:null},o0={ReactCurrentDispatcher:kt,ReactCurrentBatchConfig:Ia,ReactCurrentOwner:Yi};function em(){throw Error("act(...) is not supported in production builds of React.")}Ce.Children={map:ca,forEach:function(e,t,n){ca(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ca(e,function(){t++}),t},toArray:function(e){return ca(e,function(t){return t})||[]},only:function(e){if(!Qi(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ce.Component=ts;Ce.Fragment=qp;Ce.Profiler=Yp;Ce.PureComponent=qi;Ce.StrictMode=Jp;Ce.Suspense=e0;Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=o0;Ce.act=em;Ce.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=qu({},e.props),a=e.key,l=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,o=Yi.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(d in t)Qu.call(t,d)&&!Zu.hasOwnProperty(d)&&(s[d]=t[d]===void 0&&c!==void 0?c[d]:t[d])}var d=arguments.length-2;if(d===1)s.children=n;else if(1<d){c=Array(d);for(var u=0;u<d;u++)c[u]=arguments[u+2];s.children=c}return{$$typeof:ta,type:e.type,key:a,ref:l,props:s,_owner:o}};Ce.createContext=function(e){return e={$$typeof:Zp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Qp,_context:e},e.Consumer=e};Ce.createElement=Xu;Ce.createFactory=function(e){var t=Xu.bind(null,e);return t.type=e,t};Ce.createRef=function(){return{current:null}};Ce.forwardRef=function(e){return{$$typeof:Xp,render:e}};Ce.isValidElement=Qi;Ce.lazy=function(e){return{$$typeof:n0,_payload:{_status:-1,_result:e},_init:l0}};Ce.memo=function(e,t){return{$$typeof:t0,type:e,compare:t===void 0?null:t}};Ce.startTransition=function(e){var t=Ia.transition;Ia.transition={};try{e()}finally{Ia.transition=t}};Ce.unstable_act=em;Ce.useCallback=function(e,t){return kt.current.useCallback(e,t)};Ce.useContext=function(e){return kt.current.useContext(e)};Ce.useDebugValue=function(){};Ce.useDeferredValue=function(e){return kt.current.useDeferredValue(e)};Ce.useEffect=function(e,t){return kt.current.useEffect(e,t)};Ce.useId=function(){return kt.current.useId()};Ce.useImperativeHandle=function(e,t,n){return kt.current.useImperativeHandle(e,t,n)};Ce.useInsertionEffect=function(e,t){return kt.current.useInsertionEffect(e,t)};Ce.useLayoutEffect=function(e,t){return kt.current.useLayoutEffect(e,t)};Ce.useMemo=function(e,t){return kt.current.useMemo(e,t)};Ce.useReducer=function(e,t,n){return kt.current.useReducer(e,t,n)};Ce.useRef=function(e){return kt.current.useRef(e)};Ce.useState=function(e){return kt.current.useState(e)};Ce.useSyncExternalStore=function(e,t,n){return kt.current.useSyncExternalStore(e,t,n)};Ce.useTransition=function(){return kt.current.useTransition()};Ce.version="18.3.1";Ku.exports=Ce;var i=Ku.exports;const Ie=Kp(i),Hr=Hp({__proto__:null,default:Ie},[i]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i0=i,c0=Symbol.for("react.element"),d0=Symbol.for("react.fragment"),u0=Object.prototype.hasOwnProperty,m0=i0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f0={key:!0,ref:!0,__self:!0,__source:!0};function tm(e,t,n){var s,a={},l=null,o=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(o=t.ref);for(s in t)u0.call(t,s)&&!f0.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:c0,type:e,key:l,ref:o,props:a,_owner:m0.current}}wl.Fragment=d0;wl.jsx=tm;wl.jsxs=tm;Hu.exports=wl;var r=Hu.exports,_o={},nm={exports:{}},Ft={},rm={exports:{}},sm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(S,P){var I=S.length;S.push(P);e:for(;0<I;){var B=I-1>>>1,k=S[B];if(0<a(k,P))S[B]=P,S[I]=k,I=B;else break e}}function n(S){return S.length===0?null:S[0]}function s(S){if(S.length===0)return null;var P=S[0],I=S.pop();if(I!==P){S[0]=I;e:for(var B=0,k=S.length,K=k>>>1;B<K;){var ne=2*(B+1)-1,_=S[ne],z=ne+1,U=S[z];if(0>a(_,I))z<k&&0>a(U,_)?(S[B]=U,S[z]=I,B=z):(S[B]=_,S[ne]=I,B=ne);else if(z<k&&0>a(U,I))S[B]=U,S[z]=I,B=z;else break e}}return P}function a(S,P){var I=S.sortIndex-P.sortIndex;return I!==0?I:S.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var o=Date,c=o.now();e.unstable_now=function(){return o.now()-c}}var d=[],u=[],f=1,m=null,h=3,v=!1,b=!1,y=!1,C=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(S){for(var P=n(u);P!==null;){if(P.callback===null)s(u);else if(P.startTime<=S)s(u),P.sortIndex=P.expirationTime,t(d,P);else break;P=n(u)}}function j(S){if(y=!1,g(S),!b)if(n(d)!==null)b=!0,ie(w);else{var P=n(u);P!==null&&pe(j,P.startTime-S)}}function w(S,P){b=!1,y&&(y=!1,x(R),R=-1),v=!0;var I=h;try{for(g(P),m=n(d);m!==null&&(!(m.expirationTime>P)||S&&!q());){var B=m.callback;if(typeof B=="function"){m.callback=null,h=m.priorityLevel;var k=B(m.expirationTime<=P);P=e.unstable_now(),typeof k=="function"?m.callback=k:m===n(d)&&s(d),g(P)}else s(d);m=n(d)}if(m!==null)var K=!0;else{var ne=n(u);ne!==null&&pe(j,ne.startTime-P),K=!1}return K}finally{m=null,h=I,v=!1}}var E=!1,$=null,R=-1,H=5,O=-1;function q(){return!(e.unstable_now()-O<H)}function W(){if($!==null){var S=e.unstable_now();O=S;var P=!0;try{P=$(!0,S)}finally{P?se():(E=!1,$=null)}}else E=!1}var se;if(typeof p=="function")se=function(){p(W)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,V=J.port2;J.port1.onmessage=W,se=function(){V.postMessage(null)}}else se=function(){C(W,0)};function ie(S){$=S,E||(E=!0,se())}function pe(S,P){R=C(function(){S(e.unstable_now())},P)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(S){S.callback=null},e.unstable_continueExecution=function(){b||v||(b=!0,ie(w))},e.unstable_forceFrameRate=function(S){0>S||125<S?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<S?Math.floor(1e3/S):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(S){switch(h){case 1:case 2:case 3:var P=3;break;default:P=h}var I=h;h=P;try{return S()}finally{h=I}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(S,P){switch(S){case 1:case 2:case 3:case 4:case 5:break;default:S=3}var I=h;h=S;try{return P()}finally{h=I}},e.unstable_scheduleCallback=function(S,P,I){var B=e.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?B+I:B):I=B,S){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=I+k,S={id:f++,callback:P,priorityLevel:S,startTime:I,expirationTime:k,sortIndex:-1},I>B?(S.sortIndex=I,t(u,S),n(d)===null&&S===n(u)&&(y?(x(R),R=-1):y=!0,pe(j,I-B))):(S.sortIndex=k,t(d,S),b||v||(b=!0,ie(w))),S},e.unstable_shouldYield=q,e.unstable_wrapCallback=function(S){var P=h;return function(){var I=h;h=P;try{return S.apply(this,arguments)}finally{h=I}}}})(sm);rm.exports=sm;var p0=rm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h0=i,Ot=p0;function re(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var am=new Set,Ms={};function wr(e,t){Kr(e,t),Kr(e+"Capture",t)}function Kr(e,t){for(Ms[e]=t,e=0;e<t.length;e++)am.add(t[e])}var Nn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bo=Object.prototype.hasOwnProperty,x0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ld={},od={};function g0(e){return Bo.call(od,e)?!0:Bo.call(ld,e)?!1:x0.test(e)?od[e]=!0:(ld[e]=!0,!1)}function y0(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function v0(e,t,n,s){if(t===null||typeof t>"u"||y0(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ct(e,t,n,s,a,l,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=o}var xt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){xt[e]=new Ct(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];xt[t]=new Ct(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){xt[e]=new Ct(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){xt[e]=new Ct(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){xt[e]=new Ct(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){xt[e]=new Ct(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){xt[e]=new Ct(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){xt[e]=new Ct(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){xt[e]=new Ct(e,5,!1,e.toLowerCase(),null,!1,!1)});var Zi=/[\-:]([a-z])/g;function Xi(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Zi,Xi);xt[t]=new Ct(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Zi,Xi);xt[t]=new Ct(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Zi,Xi);xt[t]=new Ct(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){xt[e]=new Ct(e,1,!1,e.toLowerCase(),null,!1,!1)});xt.xlinkHref=new Ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){xt[e]=new Ct(e,1,!1,e.toLowerCase(),null,!0,!0)});function ec(e,t,n,s){var a=xt.hasOwnProperty(t)?xt[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(v0(t,n,a,s)&&(n=null),s||a===null?g0(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,s=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var Pn=h0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,da=Symbol.for("react.element"),Er=Symbol.for("react.portal"),Pr=Symbol.for("react.fragment"),tc=Symbol.for("react.strict_mode"),zo=Symbol.for("react.profiler"),lm=Symbol.for("react.provider"),om=Symbol.for("react.context"),nc=Symbol.for("react.forward_ref"),Go=Symbol.for("react.suspense"),Wo=Symbol.for("react.suspense_list"),rc=Symbol.for("react.memo"),$n=Symbol.for("react.lazy"),im=Symbol.for("react.offscreen"),id=Symbol.iterator;function cs(e){return e===null||typeof e!="object"?null:(e=id&&e[id]||e["@@iterator"],typeof e=="function"?e:null)}var Xe=Object.assign,Vl;function ws(e){if(Vl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Vl=t&&t[1]||""}return`
`+Vl+e}var ql=!1;function Jl(e,t){if(!e||ql)return"";ql=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var s=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){s=u}e.call(t.prototype)}else{try{throw Error()}catch(u){s=u}e()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),l=s.stack.split(`
`),o=a.length-1,c=l.length-1;1<=o&&0<=c&&a[o]!==l[c];)c--;for(;1<=o&&0<=c;o--,c--)if(a[o]!==l[c]){if(o!==1||c!==1)do if(o--,c--,0>c||a[o]!==l[c]){var d=`
`+a[o].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=o&&0<=c);break}}}finally{ql=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ws(e):""}function b0(e){switch(e.tag){case 5:return ws(e.type);case 16:return ws("Lazy");case 13:return ws("Suspense");case 19:return ws("SuspenseList");case 0:case 2:case 15:return e=Jl(e.type,!1),e;case 11:return e=Jl(e.type.render,!1),e;case 1:return e=Jl(e.type,!0),e;default:return""}}function Ho(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Pr:return"Fragment";case Er:return"Portal";case zo:return"Profiler";case tc:return"StrictMode";case Go:return"Suspense";case Wo:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case om:return(e.displayName||"Context")+".Consumer";case lm:return(e._context.displayName||"Context")+".Provider";case nc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case rc:return t=e.displayName||null,t!==null?t:Ho(e.type)||"Memo";case $n:t=e._payload,e=e._init;try{return Ho(e(t))}catch{}}return null}function w0(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ho(t);case 8:return t===tc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Yn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function cm(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function j0(e){var t=cm(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){s=""+o,l.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ua(e){e._valueTracker||(e._valueTracker=j0(e))}function dm(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=cm(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function Ka(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ko(e,t){var n=t.checked;return Xe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function cd(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=Yn(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function um(e,t){t=t.checked,t!=null&&ec(e,"checked",t,!1)}function Vo(e,t){um(e,t);var n=Yn(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?qo(e,t.type,n):t.hasOwnProperty("defaultValue")&&qo(e,t.type,Yn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function dd(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function qo(e,t,n){(t!=="number"||Ka(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var js=Array.isArray;function Fr(e,t,n,s){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&s&&(e[n].defaultSelected=!0)}else{for(n=""+Yn(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Jo(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(re(91));return Xe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ud(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(re(92));if(js(n)){if(1<n.length)throw Error(re(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Yn(n)}}function mm(e,t){var n=Yn(t.value),s=Yn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function md(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function fm(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Yo(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?fm(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ma,pm=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ma=ma||document.createElement("div"),ma.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ma.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ds(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Es={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},N0=["Webkit","ms","Moz","O"];Object.keys(Es).forEach(function(e){N0.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Es[t]=Es[e]})});function hm(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Es.hasOwnProperty(e)&&Es[e]?(""+t).trim():t+"px"}function xm(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,a=hm(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,a):e[n]=a}}var S0=Xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qo(e,t){if(t){if(S0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(re(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(re(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(re(61))}if(t.style!=null&&typeof t.style!="object")throw Error(re(62))}}function Zo(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xo=null;function sc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ei=null,_r=null,Br=null;function fd(e){if(e=sa(e)){if(typeof ei!="function")throw Error(re(280));var t=e.stateNode;t&&(t=Cl(t),ei(e.stateNode,e.type,t))}}function gm(e){_r?Br?Br.push(e):Br=[e]:_r=e}function ym(){if(_r){var e=_r,t=Br;if(Br=_r=null,fd(e),t)for(e=0;e<t.length;e++)fd(t[e])}}function vm(e,t){return e(t)}function bm(){}var Yl=!1;function wm(e,t,n){if(Yl)return e(t,n);Yl=!0;try{return vm(e,t,n)}finally{Yl=!1,(_r!==null||Br!==null)&&(bm(),ym())}}function Os(e,t){var n=e.stateNode;if(n===null)return null;var s=Cl(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(re(231,t,typeof n));return n}var ti=!1;if(Nn)try{var ds={};Object.defineProperty(ds,"passive",{get:function(){ti=!0}}),window.addEventListener("test",ds,ds),window.removeEventListener("test",ds,ds)}catch{ti=!1}function k0(e,t,n,s,a,l,o,c,d){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(f){this.onError(f)}}var Ps=!1,Va=null,qa=!1,ni=null,C0={onError:function(e){Ps=!0,Va=e}};function E0(e,t,n,s,a,l,o,c,d){Ps=!1,Va=null,k0.apply(C0,arguments)}function P0(e,t,n,s,a,l,o,c,d){if(E0.apply(this,arguments),Ps){if(Ps){var u=Va;Ps=!1,Va=null}else throw Error(re(198));qa||(qa=!0,ni=u)}}function jr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function jm(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function pd(e){if(jr(e)!==e)throw Error(re(188))}function T0(e){var t=e.alternate;if(!t){if(t=jr(e),t===null)throw Error(re(188));return t!==e?null:e}for(var n=e,s=t;;){var a=n.return;if(a===null)break;var l=a.alternate;if(l===null){if(s=a.return,s!==null){n=s;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===n)return pd(a),e;if(l===s)return pd(a),t;l=l.sibling}throw Error(re(188))}if(n.return!==s.return)n=a,s=l;else{for(var o=!1,c=a.child;c;){if(c===n){o=!0,n=a,s=l;break}if(c===s){o=!0,s=a,n=l;break}c=c.sibling}if(!o){for(c=l.child;c;){if(c===n){o=!0,n=l,s=a;break}if(c===s){o=!0,s=l,n=a;break}c=c.sibling}if(!o)throw Error(re(189))}}if(n.alternate!==s)throw Error(re(190))}if(n.tag!==3)throw Error(re(188));return n.stateNode.current===n?e:t}function Nm(e){return e=T0(e),e!==null?Sm(e):null}function Sm(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Sm(e);if(t!==null)return t;e=e.sibling}return null}var km=Ot.unstable_scheduleCallback,hd=Ot.unstable_cancelCallback,R0=Ot.unstable_shouldYield,L0=Ot.unstable_requestPaint,rt=Ot.unstable_now,A0=Ot.unstable_getCurrentPriorityLevel,ac=Ot.unstable_ImmediatePriority,Cm=Ot.unstable_UserBlockingPriority,Ja=Ot.unstable_NormalPriority,$0=Ot.unstable_LowPriority,Em=Ot.unstable_IdlePriority,jl=null,cn=null;function I0(e){if(cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(jl,e,void 0,(e.current.flags&128)===128)}catch{}}var en=Math.clz32?Math.clz32:D0,U0=Math.log,M0=Math.LN2;function D0(e){return e>>>=0,e===0?32:31-(U0(e)/M0|0)|0}var fa=64,pa=4194304;function Ns(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ya(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,a=e.suspendedLanes,l=e.pingedLanes,o=n&268435455;if(o!==0){var c=o&~a;c!==0?s=Ns(c):(l&=o,l!==0&&(s=Ns(l)))}else o=n&~a,o!==0?s=Ns(o):l!==0&&(s=Ns(l));if(s===0)return 0;if(t!==0&&t!==s&&!(t&a)&&(a=s&-s,l=t&-t,a>=l||a===16&&(l&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-en(t),a=1<<n,s|=e[n],t&=~a;return s}function O0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function F0(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var o=31-en(l),c=1<<o,d=a[o];d===-1?(!(c&n)||c&s)&&(a[o]=O0(c,t)):d<=t&&(e.expiredLanes|=c),l&=~c}}function ri(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Pm(){var e=fa;return fa<<=1,!(fa&4194240)&&(fa=64),e}function Ql(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function na(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-en(t),e[t]=n}function _0(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-en(n),l=1<<a;t[a]=0,s[a]=-1,e[a]=-1,n&=~l}}function lc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-en(n),a=1<<s;a&t|e[s]&t&&(e[s]|=t),n&=~a}}var ze=0;function Tm(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Rm,oc,Lm,Am,$m,si=!1,ha=[],Bn=null,zn=null,Gn=null,Fs=new Map,_s=new Map,Un=[],B0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xd(e,t){switch(e){case"focusin":case"focusout":Bn=null;break;case"dragenter":case"dragleave":zn=null;break;case"mouseover":case"mouseout":Gn=null;break;case"pointerover":case"pointerout":Fs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":_s.delete(t.pointerId)}}function us(e,t,n,s,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:l,targetContainers:[a]},t!==null&&(t=sa(t),t!==null&&oc(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function z0(e,t,n,s,a){switch(t){case"focusin":return Bn=us(Bn,e,t,n,s,a),!0;case"dragenter":return zn=us(zn,e,t,n,s,a),!0;case"mouseover":return Gn=us(Gn,e,t,n,s,a),!0;case"pointerover":var l=a.pointerId;return Fs.set(l,us(Fs.get(l)||null,e,t,n,s,a)),!0;case"gotpointercapture":return l=a.pointerId,_s.set(l,us(_s.get(l)||null,e,t,n,s,a)),!0}return!1}function Im(e){var t=or(e.target);if(t!==null){var n=jr(t);if(n!==null){if(t=n.tag,t===13){if(t=jm(n),t!==null){e.blockedOn=t,$m(e.priority,function(){Lm(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ua(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ai(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);Xo=s,n.target.dispatchEvent(s),Xo=null}else return t=sa(n),t!==null&&oc(t),e.blockedOn=n,!1;t.shift()}return!0}function gd(e,t,n){Ua(e)&&n.delete(t)}function G0(){si=!1,Bn!==null&&Ua(Bn)&&(Bn=null),zn!==null&&Ua(zn)&&(zn=null),Gn!==null&&Ua(Gn)&&(Gn=null),Fs.forEach(gd),_s.forEach(gd)}function ms(e,t){e.blockedOn===t&&(e.blockedOn=null,si||(si=!0,Ot.unstable_scheduleCallback(Ot.unstable_NormalPriority,G0)))}function Bs(e){function t(a){return ms(a,e)}if(0<ha.length){ms(ha[0],e);for(var n=1;n<ha.length;n++){var s=ha[n];s.blockedOn===e&&(s.blockedOn=null)}}for(Bn!==null&&ms(Bn,e),zn!==null&&ms(zn,e),Gn!==null&&ms(Gn,e),Fs.forEach(t),_s.forEach(t),n=0;n<Un.length;n++)s=Un[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<Un.length&&(n=Un[0],n.blockedOn===null);)Im(n),n.blockedOn===null&&Un.shift()}var zr=Pn.ReactCurrentBatchConfig,Qa=!0;function W0(e,t,n,s){var a=ze,l=zr.transition;zr.transition=null;try{ze=1,ic(e,t,n,s)}finally{ze=a,zr.transition=l}}function H0(e,t,n,s){var a=ze,l=zr.transition;zr.transition=null;try{ze=4,ic(e,t,n,s)}finally{ze=a,zr.transition=l}}function ic(e,t,n,s){if(Qa){var a=ai(e,t,n,s);if(a===null)oo(e,t,s,Za,n),xd(e,s);else if(z0(a,e,t,n,s))s.stopPropagation();else if(xd(e,s),t&4&&-1<B0.indexOf(e)){for(;a!==null;){var l=sa(a);if(l!==null&&Rm(l),l=ai(e,t,n,s),l===null&&oo(e,t,s,Za,n),l===a)break;a=l}a!==null&&s.stopPropagation()}else oo(e,t,s,null,n)}}var Za=null;function ai(e,t,n,s){if(Za=null,e=sc(s),e=or(e),e!==null)if(t=jr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=jm(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Za=e,null}function Um(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(A0()){case ac:return 1;case Cm:return 4;case Ja:case $0:return 16;case Em:return 536870912;default:return 16}default:return 16}}var On=null,cc=null,Ma=null;function Mm(){if(Ma)return Ma;var e,t=cc,n=t.length,s,a="value"in On?On.value:On.textContent,l=a.length;for(e=0;e<n&&t[e]===a[e];e++);var o=n-e;for(s=1;s<=o&&t[n-s]===a[l-s];s++);return Ma=a.slice(e,1<s?1-s:void 0)}function Da(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function xa(){return!0}function yd(){return!1}function _t(e){function t(n,s,a,l,o){this._reactName=n,this._targetInst=a,this.type=s,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(n=e[c],this[c]=n?n(l):l[c]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?xa:yd,this.isPropagationStopped=yd,this}return Xe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=xa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=xa)},persist:function(){},isPersistent:xa}),t}var ns={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dc=_t(ns),ra=Xe({},ns,{view:0,detail:0}),K0=_t(ra),Zl,Xl,fs,Nl=Xe({},ra,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fs&&(fs&&e.type==="mousemove"?(Zl=e.screenX-fs.screenX,Xl=e.screenY-fs.screenY):Xl=Zl=0,fs=e),Zl)},movementY:function(e){return"movementY"in e?e.movementY:Xl}}),vd=_t(Nl),V0=Xe({},Nl,{dataTransfer:0}),q0=_t(V0),J0=Xe({},ra,{relatedTarget:0}),eo=_t(J0),Y0=Xe({},ns,{animationName:0,elapsedTime:0,pseudoElement:0}),Q0=_t(Y0),Z0=Xe({},ns,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),X0=_t(Z0),eh=Xe({},ns,{data:0}),bd=_t(eh),th={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=rh[e])?!!t[e]:!1}function uc(){return sh}var ah=Xe({},ra,{key:function(e){if(e.key){var t=th[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Da(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?nh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uc,charCode:function(e){return e.type==="keypress"?Da(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Da(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),lh=_t(ah),oh=Xe({},Nl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wd=_t(oh),ih=Xe({},ra,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uc}),ch=_t(ih),dh=Xe({},ns,{propertyName:0,elapsedTime:0,pseudoElement:0}),uh=_t(dh),mh=Xe({},Nl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),fh=_t(mh),ph=[9,13,27,32],mc=Nn&&"CompositionEvent"in window,Ts=null;Nn&&"documentMode"in document&&(Ts=document.documentMode);var hh=Nn&&"TextEvent"in window&&!Ts,Dm=Nn&&(!mc||Ts&&8<Ts&&11>=Ts),jd=" ",Nd=!1;function Om(e,t){switch(e){case"keyup":return ph.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Tr=!1;function xh(e,t){switch(e){case"compositionend":return Fm(t);case"keypress":return t.which!==32?null:(Nd=!0,jd);case"textInput":return e=t.data,e===jd&&Nd?null:e;default:return null}}function gh(e,t){if(Tr)return e==="compositionend"||!mc&&Om(e,t)?(e=Mm(),Ma=cc=On=null,Tr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dm&&t.locale!=="ko"?null:t.data;default:return null}}var yh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!yh[e.type]:t==="textarea"}function _m(e,t,n,s){gm(s),t=Xa(t,"onChange"),0<t.length&&(n=new dc("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Rs=null,zs=null;function vh(e){Qm(e,0)}function Sl(e){var t=Ar(e);if(dm(t))return e}function bh(e,t){if(e==="change")return t}var Bm=!1;if(Nn){var to;if(Nn){var no="oninput"in document;if(!no){var kd=document.createElement("div");kd.setAttribute("oninput","return;"),no=typeof kd.oninput=="function"}to=no}else to=!1;Bm=to&&(!document.documentMode||9<document.documentMode)}function Cd(){Rs&&(Rs.detachEvent("onpropertychange",zm),zs=Rs=null)}function zm(e){if(e.propertyName==="value"&&Sl(zs)){var t=[];_m(t,zs,e,sc(e)),wm(vh,t)}}function wh(e,t,n){e==="focusin"?(Cd(),Rs=t,zs=n,Rs.attachEvent("onpropertychange",zm)):e==="focusout"&&Cd()}function jh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Sl(zs)}function Nh(e,t){if(e==="click")return Sl(t)}function Sh(e,t){if(e==="input"||e==="change")return Sl(t)}function kh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var nn=typeof Object.is=="function"?Object.is:kh;function Gs(e,t){if(nn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var a=n[s];if(!Bo.call(t,a)||!nn(e[a],t[a]))return!1}return!0}function Ed(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Pd(e,t){var n=Ed(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ed(n)}}function Gm(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Gm(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Wm(){for(var e=window,t=Ka();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ka(e.document)}return t}function fc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Ch(e){var t=Wm(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Gm(n.ownerDocument.documentElement,n)){if(s!==null&&fc(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,l=Math.min(s.start,a);s=s.end===void 0?l:Math.min(s.end,a),!e.extend&&l>s&&(a=s,s=l,l=a),a=Pd(n,l);var o=Pd(n,s);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),l>s?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Eh=Nn&&"documentMode"in document&&11>=document.documentMode,Rr=null,li=null,Ls=null,oi=!1;function Td(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;oi||Rr==null||Rr!==Ka(s)||(s=Rr,"selectionStart"in s&&fc(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ls&&Gs(Ls,s)||(Ls=s,s=Xa(li,"onSelect"),0<s.length&&(t=new dc("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=Rr)))}function ga(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Lr={animationend:ga("Animation","AnimationEnd"),animationiteration:ga("Animation","AnimationIteration"),animationstart:ga("Animation","AnimationStart"),transitionend:ga("Transition","TransitionEnd")},ro={},Hm={};Nn&&(Hm=document.createElement("div").style,"AnimationEvent"in window||(delete Lr.animationend.animation,delete Lr.animationiteration.animation,delete Lr.animationstart.animation),"TransitionEvent"in window||delete Lr.transitionend.transition);function kl(e){if(ro[e])return ro[e];if(!Lr[e])return e;var t=Lr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Hm)return ro[e]=t[n];return e}var Km=kl("animationend"),Vm=kl("animationiteration"),qm=kl("animationstart"),Jm=kl("transitionend"),Ym=new Map,Rd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xn(e,t){Ym.set(e,t),wr(t,[e])}for(var so=0;so<Rd.length;so++){var ao=Rd[so],Ph=ao.toLowerCase(),Th=ao[0].toUpperCase()+ao.slice(1);Xn(Ph,"on"+Th)}Xn(Km,"onAnimationEnd");Xn(Vm,"onAnimationIteration");Xn(qm,"onAnimationStart");Xn("dblclick","onDoubleClick");Xn("focusin","onFocus");Xn("focusout","onBlur");Xn(Jm,"onTransitionEnd");Kr("onMouseEnter",["mouseout","mouseover"]);Kr("onMouseLeave",["mouseout","mouseover"]);Kr("onPointerEnter",["pointerout","pointerover"]);Kr("onPointerLeave",["pointerout","pointerover"]);wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wr("onBeforeInput",["compositionend","keypress","textInput","paste"]);wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ss="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rh=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ss));function Ld(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,P0(s,t,void 0,e),e.currentTarget=null}function Qm(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],a=s.event;s=s.listeners;e:{var l=void 0;if(t)for(var o=s.length-1;0<=o;o--){var c=s[o],d=c.instance,u=c.currentTarget;if(c=c.listener,d!==l&&a.isPropagationStopped())break e;Ld(a,c,u),l=d}else for(o=0;o<s.length;o++){if(c=s[o],d=c.instance,u=c.currentTarget,c=c.listener,d!==l&&a.isPropagationStopped())break e;Ld(a,c,u),l=d}}}if(qa)throw e=ni,qa=!1,ni=null,e}function Ve(e,t){var n=t[mi];n===void 0&&(n=t[mi]=new Set);var s=e+"__bubble";n.has(s)||(Zm(t,e,2,!1),n.add(s))}function lo(e,t,n){var s=0;t&&(s|=4),Zm(n,e,s,t)}var ya="_reactListening"+Math.random().toString(36).slice(2);function Ws(e){if(!e[ya]){e[ya]=!0,am.forEach(function(n){n!=="selectionchange"&&(Rh.has(n)||lo(n,!1,e),lo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ya]||(t[ya]=!0,lo("selectionchange",!1,t))}}function Zm(e,t,n,s){switch(Um(t)){case 1:var a=W0;break;case 4:a=H0;break;default:a=ic}n=a.bind(null,t,n,e),a=void 0,!ti||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function oo(e,t,n,s,a){var l=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var c=s.stateNode.containerInfo;if(c===a||c.nodeType===8&&c.parentNode===a)break;if(o===4)for(o=s.return;o!==null;){var d=o.tag;if((d===3||d===4)&&(d=o.stateNode.containerInfo,d===a||d.nodeType===8&&d.parentNode===a))return;o=o.return}for(;c!==null;){if(o=or(c),o===null)return;if(d=o.tag,d===5||d===6){s=l=o;continue e}c=c.parentNode}}s=s.return}wm(function(){var u=l,f=sc(n),m=[];e:{var h=Ym.get(e);if(h!==void 0){var v=dc,b=e;switch(e){case"keypress":if(Da(n)===0)break e;case"keydown":case"keyup":v=lh;break;case"focusin":b="focus",v=eo;break;case"focusout":b="blur",v=eo;break;case"beforeblur":case"afterblur":v=eo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=vd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=q0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=ch;break;case Km:case Vm:case qm:v=Q0;break;case Jm:v=uh;break;case"scroll":v=K0;break;case"wheel":v=fh;break;case"copy":case"cut":case"paste":v=X0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=wd}var y=(t&4)!==0,C=!y&&e==="scroll",x=y?h!==null?h+"Capture":null:h;y=[];for(var p=u,g;p!==null;){g=p;var j=g.stateNode;if(g.tag===5&&j!==null&&(g=j,x!==null&&(j=Os(p,x),j!=null&&y.push(Hs(p,j,g)))),C)break;p=p.return}0<y.length&&(h=new v(h,b,null,n,f),m.push({event:h,listeners:y}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",h&&n!==Xo&&(b=n.relatedTarget||n.fromElement)&&(or(b)||b[Sn]))break e;if((v||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,v?(b=n.relatedTarget||n.toElement,v=u,b=b?or(b):null,b!==null&&(C=jr(b),b!==C||b.tag!==5&&b.tag!==6)&&(b=null)):(v=null,b=u),v!==b)){if(y=vd,j="onMouseLeave",x="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(y=wd,j="onPointerLeave",x="onPointerEnter",p="pointer"),C=v==null?h:Ar(v),g=b==null?h:Ar(b),h=new y(j,p+"leave",v,n,f),h.target=C,h.relatedTarget=g,j=null,or(f)===u&&(y=new y(x,p+"enter",b,n,f),y.target=g,y.relatedTarget=C,j=y),C=j,v&&b)t:{for(y=v,x=b,p=0,g=y;g;g=Sr(g))p++;for(g=0,j=x;j;j=Sr(j))g++;for(;0<p-g;)y=Sr(y),p--;for(;0<g-p;)x=Sr(x),g--;for(;p--;){if(y===x||x!==null&&y===x.alternate)break t;y=Sr(y),x=Sr(x)}y=null}else y=null;v!==null&&Ad(m,h,v,y,!1),b!==null&&C!==null&&Ad(m,C,b,y,!0)}}e:{if(h=u?Ar(u):window,v=h.nodeName&&h.nodeName.toLowerCase(),v==="select"||v==="input"&&h.type==="file")var w=bh;else if(Sd(h))if(Bm)w=Sh;else{w=jh;var E=wh}else(v=h.nodeName)&&v.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=Nh);if(w&&(w=w(e,u))){_m(m,w,n,f);break e}E&&E(e,h,u),e==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&qo(h,"number",h.value)}switch(E=u?Ar(u):window,e){case"focusin":(Sd(E)||E.contentEditable==="true")&&(Rr=E,li=u,Ls=null);break;case"focusout":Ls=li=Rr=null;break;case"mousedown":oi=!0;break;case"contextmenu":case"mouseup":case"dragend":oi=!1,Td(m,n,f);break;case"selectionchange":if(Eh)break;case"keydown":case"keyup":Td(m,n,f)}var $;if(mc)e:{switch(e){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Tr?Om(e,n)&&(R="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(Dm&&n.locale!=="ko"&&(Tr||R!=="onCompositionStart"?R==="onCompositionEnd"&&Tr&&($=Mm()):(On=f,cc="value"in On?On.value:On.textContent,Tr=!0)),E=Xa(u,R),0<E.length&&(R=new bd(R,e,null,n,f),m.push({event:R,listeners:E}),$?R.data=$:($=Fm(n),$!==null&&(R.data=$)))),($=hh?xh(e,n):gh(e,n))&&(u=Xa(u,"onBeforeInput"),0<u.length&&(f=new bd("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:u}),f.data=$))}Qm(m,t)})}function Hs(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Xa(e,t){for(var n=t+"Capture",s=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=Os(e,n),l!=null&&s.unshift(Hs(e,l,a)),l=Os(e,t),l!=null&&s.push(Hs(e,l,a))),e=e.return}return s}function Sr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ad(e,t,n,s,a){for(var l=t._reactName,o=[];n!==null&&n!==s;){var c=n,d=c.alternate,u=c.stateNode;if(d!==null&&d===s)break;c.tag===5&&u!==null&&(c=u,a?(d=Os(n,l),d!=null&&o.unshift(Hs(n,d,c))):a||(d=Os(n,l),d!=null&&o.push(Hs(n,d,c)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Lh=/\r\n?/g,Ah=/\u0000|\uFFFD/g;function $d(e){return(typeof e=="string"?e:""+e).replace(Lh,`
`).replace(Ah,"")}function va(e,t,n){if(t=$d(t),$d(e)!==t&&n)throw Error(re(425))}function el(){}var ii=null,ci=null;function di(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ui=typeof setTimeout=="function"?setTimeout:void 0,$h=typeof clearTimeout=="function"?clearTimeout:void 0,Id=typeof Promise=="function"?Promise:void 0,Ih=typeof queueMicrotask=="function"?queueMicrotask:typeof Id<"u"?function(e){return Id.resolve(null).then(e).catch(Uh)}:ui;function Uh(e){setTimeout(function(){throw e})}function io(e,t){var n=t,s=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(s===0){e.removeChild(a),Bs(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=a}while(n);Bs(t)}function Wn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ud(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var rs=Math.random().toString(36).slice(2),on="__reactFiber$"+rs,Ks="__reactProps$"+rs,Sn="__reactContainer$"+rs,mi="__reactEvents$"+rs,Mh="__reactListeners$"+rs,Dh="__reactHandles$"+rs;function or(e){var t=e[on];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Sn]||n[on]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Ud(e);e!==null;){if(n=e[on])return n;e=Ud(e)}return t}e=n,n=e.parentNode}return null}function sa(e){return e=e[on]||e[Sn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ar(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(re(33))}function Cl(e){return e[Ks]||null}var fi=[],$r=-1;function er(e){return{current:e}}function qe(e){0>$r||(e.current=fi[$r],fi[$r]=null,$r--)}function He(e,t){$r++,fi[$r]=e.current,e.current=t}var Qn={},jt=er(Qn),Rt=er(!1),xr=Qn;function Vr(e,t){var n=e.type.contextTypes;if(!n)return Qn;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in n)a[l]=t[l];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Lt(e){return e=e.childContextTypes,e!=null}function tl(){qe(Rt),qe(jt)}function Md(e,t,n){if(jt.current!==Qn)throw Error(re(168));He(jt,t),He(Rt,n)}function Xm(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error(re(108,w0(e)||"Unknown",a));return Xe({},n,s)}function nl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Qn,xr=jt.current,He(jt,e),He(Rt,Rt.current),!0}function Dd(e,t,n){var s=e.stateNode;if(!s)throw Error(re(169));n?(e=Xm(e,t,xr),s.__reactInternalMemoizedMergedChildContext=e,qe(Rt),qe(jt),He(jt,e)):qe(Rt),He(Rt,n)}var yn=null,El=!1,co=!1;function ef(e){yn===null?yn=[e]:yn.push(e)}function Oh(e){El=!0,ef(e)}function tr(){if(!co&&yn!==null){co=!0;var e=0,t=ze;try{var n=yn;for(ze=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}yn=null,El=!1}catch(a){throw yn!==null&&(yn=yn.slice(e+1)),km(ac,tr),a}finally{ze=t,co=!1}}return null}var Ir=[],Ur=0,rl=null,sl=0,zt=[],Gt=0,gr=null,vn=1,bn="";function sr(e,t){Ir[Ur++]=sl,Ir[Ur++]=rl,rl=e,sl=t}function tf(e,t,n){zt[Gt++]=vn,zt[Gt++]=bn,zt[Gt++]=gr,gr=e;var s=vn;e=bn;var a=32-en(s)-1;s&=~(1<<a),n+=1;var l=32-en(t)+a;if(30<l){var o=a-a%5;l=(s&(1<<o)-1).toString(32),s>>=o,a-=o,vn=1<<32-en(t)+a|n<<a|s,bn=l+e}else vn=1<<l|n<<a|s,bn=e}function pc(e){e.return!==null&&(sr(e,1),tf(e,1,0))}function hc(e){for(;e===rl;)rl=Ir[--Ur],Ir[Ur]=null,sl=Ir[--Ur],Ir[Ur]=null;for(;e===gr;)gr=zt[--Gt],zt[Gt]=null,bn=zt[--Gt],zt[Gt]=null,vn=zt[--Gt],zt[Gt]=null}var Dt=null,Mt=null,Je=!1,Xt=null;function nf(e,t){var n=Wt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Od(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Dt=e,Mt=Wn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Dt=e,Mt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=gr!==null?{id:vn,overflow:bn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Wt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Dt=e,Mt=null,!0):!1;default:return!1}}function pi(e){return(e.mode&1)!==0&&(e.flags&128)===0}function hi(e){if(Je){var t=Mt;if(t){var n=t;if(!Od(e,t)){if(pi(e))throw Error(re(418));t=Wn(n.nextSibling);var s=Dt;t&&Od(e,t)?nf(s,n):(e.flags=e.flags&-4097|2,Je=!1,Dt=e)}}else{if(pi(e))throw Error(re(418));e.flags=e.flags&-4097|2,Je=!1,Dt=e}}}function Fd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Dt=e}function ba(e){if(e!==Dt)return!1;if(!Je)return Fd(e),Je=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!di(e.type,e.memoizedProps)),t&&(t=Mt)){if(pi(e))throw rf(),Error(re(418));for(;t;)nf(e,t),t=Wn(t.nextSibling)}if(Fd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(re(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Mt=Wn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Mt=null}}else Mt=Dt?Wn(e.stateNode.nextSibling):null;return!0}function rf(){for(var e=Mt;e;)e=Wn(e.nextSibling)}function qr(){Mt=Dt=null,Je=!1}function xc(e){Xt===null?Xt=[e]:Xt.push(e)}var Fh=Pn.ReactCurrentBatchConfig;function ps(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(re(309));var s=n.stateNode}if(!s)throw Error(re(147,e));var a=s,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(o){var c=a.refs;o===null?delete c[l]:c[l]=o},t._stringRef=l,t)}if(typeof e!="string")throw Error(re(284));if(!n._owner)throw Error(re(290,e))}return e}function wa(e,t){throw e=Object.prototype.toString.call(t),Error(re(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function _d(e){var t=e._init;return t(e._payload)}function sf(e){function t(x,p){if(e){var g=x.deletions;g===null?(x.deletions=[p],x.flags|=16):g.push(p)}}function n(x,p){if(!e)return null;for(;p!==null;)t(x,p),p=p.sibling;return null}function s(x,p){for(x=new Map;p!==null;)p.key!==null?x.set(p.key,p):x.set(p.index,p),p=p.sibling;return x}function a(x,p){return x=qn(x,p),x.index=0,x.sibling=null,x}function l(x,p,g){return x.index=g,e?(g=x.alternate,g!==null?(g=g.index,g<p?(x.flags|=2,p):g):(x.flags|=2,p)):(x.flags|=1048576,p)}function o(x){return e&&x.alternate===null&&(x.flags|=2),x}function c(x,p,g,j){return p===null||p.tag!==6?(p=go(g,x.mode,j),p.return=x,p):(p=a(p,g),p.return=x,p)}function d(x,p,g,j){var w=g.type;return w===Pr?f(x,p,g.props.children,j,g.key):p!==null&&(p.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===$n&&_d(w)===p.type)?(j=a(p,g.props),j.ref=ps(x,p,g),j.return=x,j):(j=Wa(g.type,g.key,g.props,null,x.mode,j),j.ref=ps(x,p,g),j.return=x,j)}function u(x,p,g,j){return p===null||p.tag!==4||p.stateNode.containerInfo!==g.containerInfo||p.stateNode.implementation!==g.implementation?(p=yo(g,x.mode,j),p.return=x,p):(p=a(p,g.children||[]),p.return=x,p)}function f(x,p,g,j,w){return p===null||p.tag!==7?(p=fr(g,x.mode,j,w),p.return=x,p):(p=a(p,g),p.return=x,p)}function m(x,p,g){if(typeof p=="string"&&p!==""||typeof p=="number")return p=go(""+p,x.mode,g),p.return=x,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case da:return g=Wa(p.type,p.key,p.props,null,x.mode,g),g.ref=ps(x,null,p),g.return=x,g;case Er:return p=yo(p,x.mode,g),p.return=x,p;case $n:var j=p._init;return m(x,j(p._payload),g)}if(js(p)||cs(p))return p=fr(p,x.mode,g,null),p.return=x,p;wa(x,p)}return null}function h(x,p,g,j){var w=p!==null?p.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return w!==null?null:c(x,p,""+g,j);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case da:return g.key===w?d(x,p,g,j):null;case Er:return g.key===w?u(x,p,g,j):null;case $n:return w=g._init,h(x,p,w(g._payload),j)}if(js(g)||cs(g))return w!==null?null:f(x,p,g,j,null);wa(x,g)}return null}function v(x,p,g,j,w){if(typeof j=="string"&&j!==""||typeof j=="number")return x=x.get(g)||null,c(p,x,""+j,w);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case da:return x=x.get(j.key===null?g:j.key)||null,d(p,x,j,w);case Er:return x=x.get(j.key===null?g:j.key)||null,u(p,x,j,w);case $n:var E=j._init;return v(x,p,g,E(j._payload),w)}if(js(j)||cs(j))return x=x.get(g)||null,f(p,x,j,w,null);wa(p,j)}return null}function b(x,p,g,j){for(var w=null,E=null,$=p,R=p=0,H=null;$!==null&&R<g.length;R++){$.index>R?(H=$,$=null):H=$.sibling;var O=h(x,$,g[R],j);if(O===null){$===null&&($=H);break}e&&$&&O.alternate===null&&t(x,$),p=l(O,p,R),E===null?w=O:E.sibling=O,E=O,$=H}if(R===g.length)return n(x,$),Je&&sr(x,R),w;if($===null){for(;R<g.length;R++)$=m(x,g[R],j),$!==null&&(p=l($,p,R),E===null?w=$:E.sibling=$,E=$);return Je&&sr(x,R),w}for($=s(x,$);R<g.length;R++)H=v($,x,R,g[R],j),H!==null&&(e&&H.alternate!==null&&$.delete(H.key===null?R:H.key),p=l(H,p,R),E===null?w=H:E.sibling=H,E=H);return e&&$.forEach(function(q){return t(x,q)}),Je&&sr(x,R),w}function y(x,p,g,j){var w=cs(g);if(typeof w!="function")throw Error(re(150));if(g=w.call(g),g==null)throw Error(re(151));for(var E=w=null,$=p,R=p=0,H=null,O=g.next();$!==null&&!O.done;R++,O=g.next()){$.index>R?(H=$,$=null):H=$.sibling;var q=h(x,$,O.value,j);if(q===null){$===null&&($=H);break}e&&$&&q.alternate===null&&t(x,$),p=l(q,p,R),E===null?w=q:E.sibling=q,E=q,$=H}if(O.done)return n(x,$),Je&&sr(x,R),w;if($===null){for(;!O.done;R++,O=g.next())O=m(x,O.value,j),O!==null&&(p=l(O,p,R),E===null?w=O:E.sibling=O,E=O);return Je&&sr(x,R),w}for($=s(x,$);!O.done;R++,O=g.next())O=v($,x,R,O.value,j),O!==null&&(e&&O.alternate!==null&&$.delete(O.key===null?R:O.key),p=l(O,p,R),E===null?w=O:E.sibling=O,E=O);return e&&$.forEach(function(W){return t(x,W)}),Je&&sr(x,R),w}function C(x,p,g,j){if(typeof g=="object"&&g!==null&&g.type===Pr&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case da:e:{for(var w=g.key,E=p;E!==null;){if(E.key===w){if(w=g.type,w===Pr){if(E.tag===7){n(x,E.sibling),p=a(E,g.props.children),p.return=x,x=p;break e}}else if(E.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===$n&&_d(w)===E.type){n(x,E.sibling),p=a(E,g.props),p.ref=ps(x,E,g),p.return=x,x=p;break e}n(x,E);break}else t(x,E);E=E.sibling}g.type===Pr?(p=fr(g.props.children,x.mode,j,g.key),p.return=x,x=p):(j=Wa(g.type,g.key,g.props,null,x.mode,j),j.ref=ps(x,p,g),j.return=x,x=j)}return o(x);case Er:e:{for(E=g.key;p!==null;){if(p.key===E)if(p.tag===4&&p.stateNode.containerInfo===g.containerInfo&&p.stateNode.implementation===g.implementation){n(x,p.sibling),p=a(p,g.children||[]),p.return=x,x=p;break e}else{n(x,p);break}else t(x,p);p=p.sibling}p=yo(g,x.mode,j),p.return=x,x=p}return o(x);case $n:return E=g._init,C(x,p,E(g._payload),j)}if(js(g))return b(x,p,g,j);if(cs(g))return y(x,p,g,j);wa(x,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,p!==null&&p.tag===6?(n(x,p.sibling),p=a(p,g),p.return=x,x=p):(n(x,p),p=go(g,x.mode,j),p.return=x,x=p),o(x)):n(x,p)}return C}var Jr=sf(!0),af=sf(!1),al=er(null),ll=null,Mr=null,gc=null;function yc(){gc=Mr=ll=null}function vc(e){var t=al.current;qe(al),e._currentValue=t}function xi(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function Gr(e,t){ll=e,gc=Mr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Tt=!0),e.firstContext=null)}function Kt(e){var t=e._currentValue;if(gc!==e)if(e={context:e,memoizedValue:t,next:null},Mr===null){if(ll===null)throw Error(re(308));Mr=e,ll.dependencies={lanes:0,firstContext:e}}else Mr=Mr.next=e;return t}var ir=null;function bc(e){ir===null?ir=[e]:ir.push(e)}function lf(e,t,n,s){var a=t.interleaved;return a===null?(n.next=n,bc(t)):(n.next=a.next,a.next=n),t.interleaved=n,kn(e,s)}function kn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var In=!1;function wc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function of(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function wn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Hn(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Re&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,kn(e,n)}return a=s.interleaved,a===null?(t.next=t,bc(s)):(t.next=a.next,a.next=t),s.interleaved=t,kn(e,n)}function Oa(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,lc(e,n)}}function Bd(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var a=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?a=l=o:l=l.next=o,n=n.next}while(n!==null);l===null?a=l=t:l=l.next=t}else a=l=t;n={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ol(e,t,n,s){var a=e.updateQueue;In=!1;var l=a.firstBaseUpdate,o=a.lastBaseUpdate,c=a.shared.pending;if(c!==null){a.shared.pending=null;var d=c,u=d.next;d.next=null,o===null?l=u:o.next=u,o=d;var f=e.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==o&&(c===null?f.firstBaseUpdate=u:c.next=u,f.lastBaseUpdate=d))}if(l!==null){var m=a.baseState;o=0,f=u=d=null,c=l;do{var h=c.lane,v=c.eventTime;if((s&h)===h){f!==null&&(f=f.next={eventTime:v,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var b=e,y=c;switch(h=t,v=n,y.tag){case 1:if(b=y.payload,typeof b=="function"){m=b.call(v,m,h);break e}m=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=y.payload,h=typeof b=="function"?b.call(v,m,h):b,h==null)break e;m=Xe({},m,h);break e;case 2:In=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[c]:h.push(c))}else v={eventTime:v,lane:h,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(u=f=v,d=m):f=f.next=v,o|=h;if(c=c.next,c===null){if(c=a.shared.pending,c===null)break;h=c,c=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(f===null&&(d=m),a.baseState=d,a.firstBaseUpdate=u,a.lastBaseUpdate=f,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else l===null&&(a.shared.lanes=0);vr|=o,e.lanes=o,e.memoizedState=m}}function zd(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=n,typeof a!="function")throw Error(re(191,a));a.call(s)}}}var aa={},dn=er(aa),Vs=er(aa),qs=er(aa);function cr(e){if(e===aa)throw Error(re(174));return e}function jc(e,t){switch(He(qs,t),He(Vs,e),He(dn,aa),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Yo(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Yo(t,e)}qe(dn),He(dn,t)}function Yr(){qe(dn),qe(Vs),qe(qs)}function cf(e){cr(qs.current);var t=cr(dn.current),n=Yo(t,e.type);t!==n&&(He(Vs,e),He(dn,n))}function Nc(e){Vs.current===e&&(qe(dn),qe(Vs))}var Ye=er(0);function il(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var uo=[];function Sc(){for(var e=0;e<uo.length;e++)uo[e]._workInProgressVersionPrimary=null;uo.length=0}var Fa=Pn.ReactCurrentDispatcher,mo=Pn.ReactCurrentBatchConfig,yr=0,Qe=null,it=null,mt=null,cl=!1,As=!1,Js=0,_h=0;function yt(){throw Error(re(321))}function kc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!nn(e[n],t[n]))return!1;return!0}function Cc(e,t,n,s,a,l){if(yr=l,Qe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Fa.current=e===null||e.memoizedState===null?Wh:Hh,e=n(s,a),As){l=0;do{if(As=!1,Js=0,25<=l)throw Error(re(301));l+=1,mt=it=null,t.updateQueue=null,Fa.current=Kh,e=n(s,a)}while(As)}if(Fa.current=dl,t=it!==null&&it.next!==null,yr=0,mt=it=Qe=null,cl=!1,t)throw Error(re(300));return e}function Ec(){var e=Js!==0;return Js=0,e}function ln(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?Qe.memoizedState=mt=e:mt=mt.next=e,mt}function Vt(){if(it===null){var e=Qe.alternate;e=e!==null?e.memoizedState:null}else e=it.next;var t=mt===null?Qe.memoizedState:mt.next;if(t!==null)mt=t,it=e;else{if(e===null)throw Error(re(310));it=e,e={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},mt===null?Qe.memoizedState=mt=e:mt=mt.next=e}return mt}function Ys(e,t){return typeof t=="function"?t(e):t}function fo(e){var t=Vt(),n=t.queue;if(n===null)throw Error(re(311));n.lastRenderedReducer=e;var s=it,a=s.baseQueue,l=n.pending;if(l!==null){if(a!==null){var o=a.next;a.next=l.next,l.next=o}s.baseQueue=a=l,n.pending=null}if(a!==null){l=a.next,s=s.baseState;var c=o=null,d=null,u=l;do{var f=u.lane;if((yr&f)===f)d!==null&&(d=d.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:e(s,u.action);else{var m={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};d===null?(c=d=m,o=s):d=d.next=m,Qe.lanes|=f,vr|=f}u=u.next}while(u!==null&&u!==l);d===null?o=s:d.next=c,nn(s,t.memoizedState)||(Tt=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=d,n.lastRenderedState=s}if(e=n.interleaved,e!==null){a=e;do l=a.lane,Qe.lanes|=l,vr|=l,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function po(e){var t=Vt(),n=t.queue;if(n===null)throw Error(re(311));n.lastRenderedReducer=e;var s=n.dispatch,a=n.pending,l=t.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do l=e(l,o.action),o=o.next;while(o!==a);nn(l,t.memoizedState)||(Tt=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,s]}function df(){}function uf(e,t){var n=Qe,s=Vt(),a=t(),l=!nn(s.memoizedState,a);if(l&&(s.memoizedState=a,Tt=!0),s=s.queue,Pc(pf.bind(null,n,s,e),[e]),s.getSnapshot!==t||l||mt!==null&&mt.memoizedState.tag&1){if(n.flags|=2048,Qs(9,ff.bind(null,n,s,a,t),void 0,null),ft===null)throw Error(re(349));yr&30||mf(n,t,a)}return a}function mf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Qe.updateQueue,t===null?(t={lastEffect:null,stores:null},Qe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ff(e,t,n,s){t.value=n,t.getSnapshot=s,hf(t)&&xf(e)}function pf(e,t,n){return n(function(){hf(t)&&xf(e)})}function hf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!nn(e,n)}catch{return!0}}function xf(e){var t=kn(e,1);t!==null&&tn(t,e,1,-1)}function Gd(e){var t=ln();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:e},t.queue=e,e=e.dispatch=Gh.bind(null,Qe,e),[t.memoizedState,e]}function Qs(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=Qe.updateQueue,t===null?(t={lastEffect:null,stores:null},Qe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function gf(){return Vt().memoizedState}function _a(e,t,n,s){var a=ln();Qe.flags|=e,a.memoizedState=Qs(1|t,n,void 0,s===void 0?null:s)}function Pl(e,t,n,s){var a=Vt();s=s===void 0?null:s;var l=void 0;if(it!==null){var o=it.memoizedState;if(l=o.destroy,s!==null&&kc(s,o.deps)){a.memoizedState=Qs(t,n,l,s);return}}Qe.flags|=e,a.memoizedState=Qs(1|t,n,l,s)}function Wd(e,t){return _a(8390656,8,e,t)}function Pc(e,t){return Pl(2048,8,e,t)}function yf(e,t){return Pl(4,2,e,t)}function vf(e,t){return Pl(4,4,e,t)}function bf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function wf(e,t,n){return n=n!=null?n.concat([e]):null,Pl(4,4,bf.bind(null,t,e),n)}function Tc(){}function jf(e,t){var n=Vt();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&kc(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function Nf(e,t){var n=Vt();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&kc(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function Sf(e,t,n){return yr&21?(nn(n,t)||(n=Pm(),Qe.lanes|=n,vr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Tt=!0),e.memoizedState=n)}function Bh(e,t){var n=ze;ze=n!==0&&4>n?n:4,e(!0);var s=mo.transition;mo.transition={};try{e(!1),t()}finally{ze=n,mo.transition=s}}function kf(){return Vt().memoizedState}function zh(e,t,n){var s=Vn(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},Cf(e))Ef(t,n);else if(n=lf(e,t,n,s),n!==null){var a=St();tn(n,e,s,a),Pf(n,t,s)}}function Gh(e,t,n){var s=Vn(e),a={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(Cf(e))Ef(t,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var o=t.lastRenderedState,c=l(o,n);if(a.hasEagerState=!0,a.eagerState=c,nn(c,o)){var d=t.interleaved;d===null?(a.next=a,bc(t)):(a.next=d.next,d.next=a),t.interleaved=a;return}}catch{}finally{}n=lf(e,t,a,s),n!==null&&(a=St(),tn(n,e,s,a),Pf(n,t,s))}}function Cf(e){var t=e.alternate;return e===Qe||t!==null&&t===Qe}function Ef(e,t){As=cl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Pf(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,lc(e,n)}}var dl={readContext:Kt,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},Wh={readContext:Kt,useCallback:function(e,t){return ln().memoizedState=[e,t===void 0?null:t],e},useContext:Kt,useEffect:Wd,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,_a(4194308,4,bf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return _a(4194308,4,e,t)},useInsertionEffect:function(e,t){return _a(4,2,e,t)},useMemo:function(e,t){var n=ln();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=ln();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=zh.bind(null,Qe,e),[s.memoizedState,e]},useRef:function(e){var t=ln();return e={current:e},t.memoizedState=e},useState:Gd,useDebugValue:Tc,useDeferredValue:function(e){return ln().memoizedState=e},useTransition:function(){var e=Gd(!1),t=e[0];return e=Bh.bind(null,e[1]),ln().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=Qe,a=ln();if(Je){if(n===void 0)throw Error(re(407));n=n()}else{if(n=t(),ft===null)throw Error(re(349));yr&30||mf(s,t,n)}a.memoizedState=n;var l={value:n,getSnapshot:t};return a.queue=l,Wd(pf.bind(null,s,l,e),[e]),s.flags|=2048,Qs(9,ff.bind(null,s,l,n,t),void 0,null),n},useId:function(){var e=ln(),t=ft.identifierPrefix;if(Je){var n=bn,s=vn;n=(s&~(1<<32-en(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=Js++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=_h++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Hh={readContext:Kt,useCallback:jf,useContext:Kt,useEffect:Pc,useImperativeHandle:wf,useInsertionEffect:yf,useLayoutEffect:vf,useMemo:Nf,useReducer:fo,useRef:gf,useState:function(){return fo(Ys)},useDebugValue:Tc,useDeferredValue:function(e){var t=Vt();return Sf(t,it.memoizedState,e)},useTransition:function(){var e=fo(Ys)[0],t=Vt().memoizedState;return[e,t]},useMutableSource:df,useSyncExternalStore:uf,useId:kf,unstable_isNewReconciler:!1},Kh={readContext:Kt,useCallback:jf,useContext:Kt,useEffect:Pc,useImperativeHandle:wf,useInsertionEffect:yf,useLayoutEffect:vf,useMemo:Nf,useReducer:po,useRef:gf,useState:function(){return po(Ys)},useDebugValue:Tc,useDeferredValue:function(e){var t=Vt();return it===null?t.memoizedState=e:Sf(t,it.memoizedState,e)},useTransition:function(){var e=po(Ys)[0],t=Vt().memoizedState;return[e,t]},useMutableSource:df,useSyncExternalStore:uf,useId:kf,unstable_isNewReconciler:!1};function Qt(e,t){if(e&&e.defaultProps){t=Xe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function gi(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:Xe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Tl={isMounted:function(e){return(e=e._reactInternals)?jr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=St(),a=Vn(e),l=wn(s,a);l.payload=t,n!=null&&(l.callback=n),t=Hn(e,l,a),t!==null&&(tn(t,e,a,s),Oa(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=St(),a=Vn(e),l=wn(s,a);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=Hn(e,l,a),t!==null&&(tn(t,e,a,s),Oa(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=St(),s=Vn(e),a=wn(n,s);a.tag=2,t!=null&&(a.callback=t),t=Hn(e,a,s),t!==null&&(tn(t,e,s,n),Oa(t,e,s))}};function Hd(e,t,n,s,a,l,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,l,o):t.prototype&&t.prototype.isPureReactComponent?!Gs(n,s)||!Gs(a,l):!0}function Tf(e,t,n){var s=!1,a=Qn,l=t.contextType;return typeof l=="object"&&l!==null?l=Kt(l):(a=Lt(t)?xr:jt.current,s=t.contextTypes,l=(s=s!=null)?Vr(e,a):Qn),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Tl,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),t}function Kd(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&Tl.enqueueReplaceState(t,t.state,null)}function yi(e,t,n,s){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},wc(e);var l=t.contextType;typeof l=="object"&&l!==null?a.context=Kt(l):(l=Lt(t)?xr:jt.current,a.context=Vr(e,l)),a.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(gi(e,t,l,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Tl.enqueueReplaceState(a,a.state,null),ol(e,n,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Qr(e,t){try{var n="",s=t;do n+=b0(s),s=s.return;while(s);var a=n}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:a,digest:null}}function ho(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function vi(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Vh=typeof WeakMap=="function"?WeakMap:Map;function Rf(e,t,n){n=wn(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){ml||(ml=!0,Ti=s),vi(e,t)},n}function Lf(e,t,n){n=wn(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;n.payload=function(){return s(a)},n.callback=function(){vi(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){vi(e,t),typeof s!="function"&&(Kn===null?Kn=new Set([this]):Kn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Vd(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new Vh;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(n)||(a.add(n),e=ox.bind(null,e,t,n),t.then(e,e))}function qd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Jd(e,t,n,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=wn(-1,1),t.tag=2,Hn(n,t,1))),n.lanes|=1),e)}var qh=Pn.ReactCurrentOwner,Tt=!1;function Nt(e,t,n,s){t.child=e===null?af(t,null,n,s):Jr(t,e.child,n,s)}function Yd(e,t,n,s,a){n=n.render;var l=t.ref;return Gr(t,a),s=Cc(e,t,n,s,l,a),n=Ec(),e!==null&&!Tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Cn(e,t,a)):(Je&&n&&pc(t),t.flags|=1,Nt(e,t,s,a),t.child)}function Qd(e,t,n,s,a){if(e===null){var l=n.type;return typeof l=="function"&&!Dc(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,Af(e,t,l,s,a)):(e=Wa(n.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&a)){var o=l.memoizedProps;if(n=n.compare,n=n!==null?n:Gs,n(o,s)&&e.ref===t.ref)return Cn(e,t,a)}return t.flags|=1,e=qn(l,s),e.ref=t.ref,e.return=t,t.child=e}function Af(e,t,n,s,a){if(e!==null){var l=e.memoizedProps;if(Gs(l,s)&&e.ref===t.ref)if(Tt=!1,t.pendingProps=s=l,(e.lanes&a)!==0)e.flags&131072&&(Tt=!0);else return t.lanes=e.lanes,Cn(e,t,a)}return bi(e,t,n,s,a)}function $f(e,t,n){var s=t.pendingProps,a=s.children,l=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(Or,Ut),Ut|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,He(Or,Ut),Ut|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=l!==null?l.baseLanes:n,He(Or,Ut),Ut|=s}else l!==null?(s=l.baseLanes|n,t.memoizedState=null):s=n,He(Or,Ut),Ut|=s;return Nt(e,t,a,n),t.child}function If(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function bi(e,t,n,s,a){var l=Lt(n)?xr:jt.current;return l=Vr(t,l),Gr(t,a),n=Cc(e,t,n,s,l,a),s=Ec(),e!==null&&!Tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Cn(e,t,a)):(Je&&s&&pc(t),t.flags|=1,Nt(e,t,n,a),t.child)}function Zd(e,t,n,s,a){if(Lt(n)){var l=!0;nl(t)}else l=!1;if(Gr(t,a),t.stateNode===null)Ba(e,t),Tf(t,n,s),yi(t,n,s,a),s=!0;else if(e===null){var o=t.stateNode,c=t.memoizedProps;o.props=c;var d=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Kt(u):(u=Lt(n)?xr:jt.current,u=Vr(t,u));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==s||d!==u)&&Kd(t,o,s,u),In=!1;var h=t.memoizedState;o.state=h,ol(t,s,o,a),d=t.memoizedState,c!==s||h!==d||Rt.current||In?(typeof f=="function"&&(gi(t,n,f,s),d=t.memoizedState),(c=In||Hd(t,n,c,s,h,d,u))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=d),o.props=s,o.state=d,o.context=u,s=c):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,of(e,t),c=t.memoizedProps,u=t.type===t.elementType?c:Qt(t.type,c),o.props=u,m=t.pendingProps,h=o.context,d=n.contextType,typeof d=="object"&&d!==null?d=Kt(d):(d=Lt(n)?xr:jt.current,d=Vr(t,d));var v=n.getDerivedStateFromProps;(f=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==m||h!==d)&&Kd(t,o,s,d),In=!1,h=t.memoizedState,o.state=h,ol(t,s,o,a);var b=t.memoizedState;c!==m||h!==b||Rt.current||In?(typeof v=="function"&&(gi(t,n,v,s),b=t.memoizedState),(u=In||Hd(t,n,u,s,h,b,d)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,b,d),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,b,d)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=b),o.props=s,o.state=b,o.context=d,s=u):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),s=!1)}return wi(e,t,n,s,l,a)}function wi(e,t,n,s,a,l){If(e,t);var o=(t.flags&128)!==0;if(!s&&!o)return a&&Dd(t,n,!1),Cn(e,t,l);s=t.stateNode,qh.current=t;var c=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&o?(t.child=Jr(t,e.child,null,l),t.child=Jr(t,null,c,l)):Nt(e,t,c,l),t.memoizedState=s.state,a&&Dd(t,n,!0),t.child}function Uf(e){var t=e.stateNode;t.pendingContext?Md(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Md(e,t.context,!1),jc(e,t.containerInfo)}function Xd(e,t,n,s,a){return qr(),xc(a),t.flags|=256,Nt(e,t,n,s),t.child}var ji={dehydrated:null,treeContext:null,retryLane:0};function Ni(e){return{baseLanes:e,cachePool:null,transitions:null}}function Mf(e,t,n){var s=t.pendingProps,a=Ye.current,l=!1,o=(t.flags&128)!==0,c;if((c=o)||(c=e!==null&&e.memoizedState===null?!1:(a&2)!==0),c?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),He(Ye,a&1),e===null)return hi(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=s.children,e=s.fallback,l?(s=t.mode,l=t.child,o={mode:"hidden",children:o},!(s&1)&&l!==null?(l.childLanes=0,l.pendingProps=o):l=Al(o,s,0,null),e=fr(e,s,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Ni(n),t.memoizedState=ji,e):Rc(t,o));if(a=e.memoizedState,a!==null&&(c=a.dehydrated,c!==null))return Jh(e,t,o,s,c,a,n);if(l){l=s.fallback,o=t.mode,a=e.child,c=a.sibling;var d={mode:"hidden",children:s.children};return!(o&1)&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=d,t.deletions=null):(s=qn(a,d),s.subtreeFlags=a.subtreeFlags&14680064),c!==null?l=qn(c,l):(l=fr(l,o,n,null),l.flags|=2),l.return=t,s.return=t,s.sibling=l,t.child=s,s=l,l=t.child,o=e.child.memoizedState,o=o===null?Ni(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=e.childLanes&~n,t.memoizedState=ji,s}return l=e.child,e=l.sibling,s=qn(l,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Rc(e,t){return t=Al({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ja(e,t,n,s){return s!==null&&xc(s),Jr(t,e.child,null,n),e=Rc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Jh(e,t,n,s,a,l,o){if(n)return t.flags&256?(t.flags&=-257,s=ho(Error(re(422))),ja(e,t,o,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=s.fallback,a=t.mode,s=Al({mode:"visible",children:s.children},a,0,null),l=fr(l,a,o,null),l.flags|=2,s.return=t,l.return=t,s.sibling=l,t.child=s,t.mode&1&&Jr(t,e.child,null,o),t.child.memoizedState=Ni(o),t.memoizedState=ji,l);if(!(t.mode&1))return ja(e,t,o,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var c=s.dgst;return s=c,l=Error(re(419)),s=ho(l,s,void 0),ja(e,t,o,s)}if(c=(o&e.childLanes)!==0,Tt||c){if(s=ft,s!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|o)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,kn(e,a),tn(s,e,a,-1))}return Mc(),s=ho(Error(re(421))),ja(e,t,o,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=ix.bind(null,e),a._reactRetry=t,null):(e=l.treeContext,Mt=Wn(a.nextSibling),Dt=t,Je=!0,Xt=null,e!==null&&(zt[Gt++]=vn,zt[Gt++]=bn,zt[Gt++]=gr,vn=e.id,bn=e.overflow,gr=t),t=Rc(t,s.children),t.flags|=4096,t)}function eu(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),xi(e.return,t,n)}function xo(e,t,n,s,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:a}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=s,l.tail=n,l.tailMode=a)}function Df(e,t,n){var s=t.pendingProps,a=s.revealOrder,l=s.tail;if(Nt(e,t,s.children,n),s=Ye.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&eu(e,n,t);else if(e.tag===19)eu(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(He(Ye,s),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&il(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),xo(t,!1,a,n,l);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&il(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}xo(t,!0,n,null,l);break;case"together":xo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ba(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Cn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),vr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(re(153));if(t.child!==null){for(e=t.child,n=qn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=qn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Yh(e,t,n){switch(t.tag){case 3:Uf(t),qr();break;case 5:cf(t);break;case 1:Lt(t.type)&&nl(t);break;case 4:jc(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;He(al,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(He(Ye,Ye.current&1),t.flags|=128,null):n&t.child.childLanes?Mf(e,t,n):(He(Ye,Ye.current&1),e=Cn(e,t,n),e!==null?e.sibling:null);He(Ye,Ye.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return Df(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),He(Ye,Ye.current),s)break;return null;case 22:case 23:return t.lanes=0,$f(e,t,n)}return Cn(e,t,n)}var Of,Si,Ff,_f;Of=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Si=function(){};Ff=function(e,t,n,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,cr(dn.current);var l=null;switch(n){case"input":a=Ko(e,a),s=Ko(e,s),l=[];break;case"select":a=Xe({},a,{value:void 0}),s=Xe({},s,{value:void 0}),l=[];break;case"textarea":a=Jo(e,a),s=Jo(e,s),l=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=el)}Qo(n,s);var o;n=null;for(u in a)if(!s.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var c=a[u];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ms.hasOwnProperty(u)?l||(l=[]):(l=l||[]).push(u,null));for(u in s){var d=s[u];if(c=a!=null?a[u]:void 0,s.hasOwnProperty(u)&&d!==c&&(d!=null||c!=null))if(u==="style")if(c){for(o in c)!c.hasOwnProperty(o)||d&&d.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in d)d.hasOwnProperty(o)&&c[o]!==d[o]&&(n||(n={}),n[o]=d[o])}else n||(l||(l=[]),l.push(u,n)),n=d;else u==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,c=c?c.__html:void 0,d!=null&&c!==d&&(l=l||[]).push(u,d)):u==="children"?typeof d!="string"&&typeof d!="number"||(l=l||[]).push(u,""+d):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ms.hasOwnProperty(u)?(d!=null&&u==="onScroll"&&Ve("scroll",e),l||c===d||(l=[])):(l=l||[]).push(u,d))}n&&(l=l||[]).push("style",n);var u=l;(t.updateQueue=u)&&(t.flags|=4)}};_f=function(e,t,n,s){n!==s&&(t.flags|=4)};function hs(e,t){if(!Je)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function vt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function Qh(e,t,n){var s=t.pendingProps;switch(hc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(t),null;case 1:return Lt(t.type)&&tl(),vt(t),null;case 3:return s=t.stateNode,Yr(),qe(Rt),qe(jt),Sc(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(ba(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Xt!==null&&(Ai(Xt),Xt=null))),Si(e,t),vt(t),null;case 5:Nc(t);var a=cr(qs.current);if(n=t.type,e!==null&&t.stateNode!=null)Ff(e,t,n,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(re(166));return vt(t),null}if(e=cr(dn.current),ba(t)){s=t.stateNode,n=t.type;var l=t.memoizedProps;switch(s[on]=t,s[Ks]=l,e=(t.mode&1)!==0,n){case"dialog":Ve("cancel",s),Ve("close",s);break;case"iframe":case"object":case"embed":Ve("load",s);break;case"video":case"audio":for(a=0;a<Ss.length;a++)Ve(Ss[a],s);break;case"source":Ve("error",s);break;case"img":case"image":case"link":Ve("error",s),Ve("load",s);break;case"details":Ve("toggle",s);break;case"input":cd(s,l),Ve("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!l.multiple},Ve("invalid",s);break;case"textarea":ud(s,l),Ve("invalid",s)}Qo(n,l),a=null;for(var o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="children"?typeof c=="string"?s.textContent!==c&&(l.suppressHydrationWarning!==!0&&va(s.textContent,c,e),a=["children",c]):typeof c=="number"&&s.textContent!==""+c&&(l.suppressHydrationWarning!==!0&&va(s.textContent,c,e),a=["children",""+c]):Ms.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Ve("scroll",s)}switch(n){case"input":ua(s),dd(s,l,!0);break;case"textarea":ua(s),md(s);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(s.onclick=el)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=fm(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=o.createElement(n,{is:s.is}):(e=o.createElement(n),n==="select"&&(o=e,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):e=o.createElementNS(e,n),e[on]=t,e[Ks]=s,Of(e,t,!1,!1),t.stateNode=e;e:{switch(o=Zo(n,s),n){case"dialog":Ve("cancel",e),Ve("close",e),a=s;break;case"iframe":case"object":case"embed":Ve("load",e),a=s;break;case"video":case"audio":for(a=0;a<Ss.length;a++)Ve(Ss[a],e);a=s;break;case"source":Ve("error",e),a=s;break;case"img":case"image":case"link":Ve("error",e),Ve("load",e),a=s;break;case"details":Ve("toggle",e),a=s;break;case"input":cd(e,s),a=Ko(e,s),Ve("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=Xe({},s,{value:void 0}),Ve("invalid",e);break;case"textarea":ud(e,s),a=Jo(e,s),Ve("invalid",e);break;default:a=s}Qo(n,a),c=a;for(l in c)if(c.hasOwnProperty(l)){var d=c[l];l==="style"?xm(e,d):l==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&pm(e,d)):l==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Ds(e,d):typeof d=="number"&&Ds(e,""+d):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Ms.hasOwnProperty(l)?d!=null&&l==="onScroll"&&Ve("scroll",e):d!=null&&ec(e,l,d,o))}switch(n){case"input":ua(e),dd(e,s,!1);break;case"textarea":ua(e),md(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Yn(s.value));break;case"select":e.multiple=!!s.multiple,l=s.value,l!=null?Fr(e,!!s.multiple,l,!1):s.defaultValue!=null&&Fr(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=el)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return vt(t),null;case 6:if(e&&t.stateNode!=null)_f(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(re(166));if(n=cr(qs.current),cr(dn.current),ba(t)){if(s=t.stateNode,n=t.memoizedProps,s[on]=t,(l=s.nodeValue!==n)&&(e=Dt,e!==null))switch(e.tag){case 3:va(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&va(s.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[on]=t,t.stateNode=s}return vt(t),null;case 13:if(qe(Ye),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Je&&Mt!==null&&t.mode&1&&!(t.flags&128))rf(),qr(),t.flags|=98560,l=!1;else if(l=ba(t),s!==null&&s.dehydrated!==null){if(e===null){if(!l)throw Error(re(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(re(317));l[on]=t}else qr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;vt(t),l=!1}else Xt!==null&&(Ai(Xt),Xt=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Ye.current&1?ct===0&&(ct=3):Mc())),t.updateQueue!==null&&(t.flags|=4),vt(t),null);case 4:return Yr(),Si(e,t),e===null&&Ws(t.stateNode.containerInfo),vt(t),null;case 10:return vc(t.type._context),vt(t),null;case 17:return Lt(t.type)&&tl(),vt(t),null;case 19:if(qe(Ye),l=t.memoizedState,l===null)return vt(t),null;if(s=(t.flags&128)!==0,o=l.rendering,o===null)if(s)hs(l,!1);else{if(ct!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=il(e),o!==null){for(t.flags|=128,hs(l,!1),s=o.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)l=n,e=s,l.flags&=14680066,o=l.alternate,o===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,e=o.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return He(Ye,Ye.current&1|2),t.child}e=e.sibling}l.tail!==null&&rt()>Zr&&(t.flags|=128,s=!0,hs(l,!1),t.lanes=4194304)}else{if(!s)if(e=il(o),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),hs(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!Je)return vt(t),null}else 2*rt()-l.renderingStartTime>Zr&&n!==1073741824&&(t.flags|=128,s=!0,hs(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(n=l.last,n!==null?n.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=rt(),t.sibling=null,n=Ye.current,He(Ye,s?n&1|2:n&1),t):(vt(t),null);case 22:case 23:return Uc(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Ut&1073741824&&(vt(t),t.subtreeFlags&6&&(t.flags|=8192)):vt(t),null;case 24:return null;case 25:return null}throw Error(re(156,t.tag))}function Zh(e,t){switch(hc(t),t.tag){case 1:return Lt(t.type)&&tl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Yr(),qe(Rt),qe(jt),Sc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Nc(t),null;case 13:if(qe(Ye),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(re(340));qr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return qe(Ye),null;case 4:return Yr(),null;case 10:return vc(t.type._context),null;case 22:case 23:return Uc(),null;case 24:return null;default:return null}}var Na=!1,bt=!1,Xh=typeof WeakSet=="function"?WeakSet:Set,fe=null;function Dr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){tt(e,t,s)}else n.current=null}function ki(e,t,n){try{n()}catch(s){tt(e,t,s)}}var tu=!1;function ex(e,t){if(ii=Qa,e=Wm(),fc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var a=s.anchorOffset,l=s.focusNode;s=s.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var o=0,c=-1,d=-1,u=0,f=0,m=e,h=null;t:for(;;){for(var v;m!==n||a!==0&&m.nodeType!==3||(c=o+a),m!==l||s!==0&&m.nodeType!==3||(d=o+s),m.nodeType===3&&(o+=m.nodeValue.length),(v=m.firstChild)!==null;)h=m,m=v;for(;;){if(m===e)break t;if(h===n&&++u===a&&(c=o),h===l&&++f===s&&(d=o),(v=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=v}n=c===-1||d===-1?null:{start:c,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(ci={focusedElem:e,selectionRange:n},Qa=!1,fe=t;fe!==null;)if(t=fe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,fe=e;else for(;fe!==null;){t=fe;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var y=b.memoizedProps,C=b.memoizedState,x=t.stateNode,p=x.getSnapshotBeforeUpdate(t.elementType===t.type?y:Qt(t.type,y),C);x.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(re(163))}}catch(j){tt(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,fe=e;break}fe=t.return}return b=tu,tu=!1,b}function $s(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&ki(t,n,l)}a=a.next}while(a!==s)}}function Rl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function Ci(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Bf(e){var t=e.alternate;t!==null&&(e.alternate=null,Bf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[on],delete t[Ks],delete t[mi],delete t[Mh],delete t[Dh])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function zf(e){return e.tag===5||e.tag===3||e.tag===4}function nu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||zf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ei(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=el));else if(s!==4&&(e=e.child,e!==null))for(Ei(e,t,n),e=e.sibling;e!==null;)Ei(e,t,n),e=e.sibling}function Pi(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Pi(e,t,n),e=e.sibling;e!==null;)Pi(e,t,n),e=e.sibling}var pt=null,Zt=!1;function An(e,t,n){for(n=n.child;n!==null;)Gf(e,t,n),n=n.sibling}function Gf(e,t,n){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(jl,n)}catch{}switch(n.tag){case 5:bt||Dr(n,t);case 6:var s=pt,a=Zt;pt=null,An(e,t,n),pt=s,Zt=a,pt!==null&&(Zt?(e=pt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):pt.removeChild(n.stateNode));break;case 18:pt!==null&&(Zt?(e=pt,n=n.stateNode,e.nodeType===8?io(e.parentNode,n):e.nodeType===1&&io(e,n),Bs(e)):io(pt,n.stateNode));break;case 4:s=pt,a=Zt,pt=n.stateNode.containerInfo,Zt=!0,An(e,t,n),pt=s,Zt=a;break;case 0:case 11:case 14:case 15:if(!bt&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var l=a,o=l.destroy;l=l.tag,o!==void 0&&(l&2||l&4)&&ki(n,t,o),a=a.next}while(a!==s)}An(e,t,n);break;case 1:if(!bt&&(Dr(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(c){tt(n,t,c)}An(e,t,n);break;case 21:An(e,t,n);break;case 22:n.mode&1?(bt=(s=bt)||n.memoizedState!==null,An(e,t,n),bt=s):An(e,t,n);break;default:An(e,t,n)}}function ru(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Xh),t.forEach(function(s){var a=cx.bind(null,e,s);n.has(s)||(n.add(s),s.then(a,a))})}}function Yt(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var a=n[s];try{var l=e,o=t,c=o;e:for(;c!==null;){switch(c.tag){case 5:pt=c.stateNode,Zt=!1;break e;case 3:pt=c.stateNode.containerInfo,Zt=!0;break e;case 4:pt=c.stateNode.containerInfo,Zt=!0;break e}c=c.return}if(pt===null)throw Error(re(160));Gf(l,o,a),pt=null,Zt=!1;var d=a.alternate;d!==null&&(d.return=null),a.return=null}catch(u){tt(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Wf(t,e),t=t.sibling}function Wf(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Yt(t,e),sn(e),s&4){try{$s(3,e,e.return),Rl(3,e)}catch(y){tt(e,e.return,y)}try{$s(5,e,e.return)}catch(y){tt(e,e.return,y)}}break;case 1:Yt(t,e),sn(e),s&512&&n!==null&&Dr(n,n.return);break;case 5:if(Yt(t,e),sn(e),s&512&&n!==null&&Dr(n,n.return),e.flags&32){var a=e.stateNode;try{Ds(a,"")}catch(y){tt(e,e.return,y)}}if(s&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,o=n!==null?n.memoizedProps:l,c=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{c==="input"&&l.type==="radio"&&l.name!=null&&um(a,l),Zo(c,o);var u=Zo(c,l);for(o=0;o<d.length;o+=2){var f=d[o],m=d[o+1];f==="style"?xm(a,m):f==="dangerouslySetInnerHTML"?pm(a,m):f==="children"?Ds(a,m):ec(a,f,m,u)}switch(c){case"input":Vo(a,l);break;case"textarea":mm(a,l);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var v=l.value;v!=null?Fr(a,!!l.multiple,v,!1):h!==!!l.multiple&&(l.defaultValue!=null?Fr(a,!!l.multiple,l.defaultValue,!0):Fr(a,!!l.multiple,l.multiple?[]:"",!1))}a[Ks]=l}catch(y){tt(e,e.return,y)}}break;case 6:if(Yt(t,e),sn(e),s&4){if(e.stateNode===null)throw Error(re(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(y){tt(e,e.return,y)}}break;case 3:if(Yt(t,e),sn(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Bs(t.containerInfo)}catch(y){tt(e,e.return,y)}break;case 4:Yt(t,e),sn(e);break;case 13:Yt(t,e),sn(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||($c=rt())),s&4&&ru(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(bt=(u=bt)||f,Yt(t,e),bt=u):Yt(t,e),sn(e),s&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(fe=e,f=e.child;f!==null;){for(m=fe=f;fe!==null;){switch(h=fe,v=h.child,h.tag){case 0:case 11:case 14:case 15:$s(4,h,h.return);break;case 1:Dr(h,h.return);var b=h.stateNode;if(typeof b.componentWillUnmount=="function"){s=h,n=h.return;try{t=s,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(y){tt(s,n,y)}}break;case 5:Dr(h,h.return);break;case 22:if(h.memoizedState!==null){au(m);continue}}v!==null?(v.return=h,fe=v):au(m)}f=f.sibling}e:for(f=null,m=e;;){if(m.tag===5){if(f===null){f=m;try{a=m.stateNode,u?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(c=m.stateNode,d=m.memoizedProps.style,o=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=hm("display",o))}catch(y){tt(e,e.return,y)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=u?"":m.memoizedProps}catch(y){tt(e,e.return,y)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Yt(t,e),sn(e),s&4&&ru(e);break;case 21:break;default:Yt(t,e),sn(e)}}function sn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(zf(n)){var s=n;break e}n=n.return}throw Error(re(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(Ds(a,""),s.flags&=-33);var l=nu(e);Pi(e,l,a);break;case 3:case 4:var o=s.stateNode.containerInfo,c=nu(e);Ei(e,c,o);break;default:throw Error(re(161))}}catch(d){tt(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function tx(e,t,n){fe=e,Hf(e)}function Hf(e,t,n){for(var s=(e.mode&1)!==0;fe!==null;){var a=fe,l=a.child;if(a.tag===22&&s){var o=a.memoizedState!==null||Na;if(!o){var c=a.alternate,d=c!==null&&c.memoizedState!==null||bt;c=Na;var u=bt;if(Na=o,(bt=d)&&!u)for(fe=a;fe!==null;)o=fe,d=o.child,o.tag===22&&o.memoizedState!==null?lu(a):d!==null?(d.return=o,fe=d):lu(a);for(;l!==null;)fe=l,Hf(l),l=l.sibling;fe=a,Na=c,bt=u}su(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,fe=l):su(e)}}function su(e){for(;fe!==null;){var t=fe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:bt||Rl(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!bt)if(n===null)s.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Qt(t.type,n.memoizedProps);s.componentDidUpdate(a,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&zd(t,l,s);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}zd(t,o,n)}break;case 5:var c=t.stateNode;if(n===null&&t.flags&4){n=c;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&Bs(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(re(163))}bt||t.flags&512&&Ci(t)}catch(h){tt(t,t.return,h)}}if(t===e){fe=null;break}if(n=t.sibling,n!==null){n.return=t.return,fe=n;break}fe=t.return}}function au(e){for(;fe!==null;){var t=fe;if(t===e){fe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,fe=n;break}fe=t.return}}function lu(e){for(;fe!==null;){var t=fe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Rl(4,t)}catch(d){tt(t,n,d)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(d){tt(t,a,d)}}var l=t.return;try{Ci(t)}catch(d){tt(t,l,d)}break;case 5:var o=t.return;try{Ci(t)}catch(d){tt(t,o,d)}}}catch(d){tt(t,t.return,d)}if(t===e){fe=null;break}var c=t.sibling;if(c!==null){c.return=t.return,fe=c;break}fe=t.return}}var nx=Math.ceil,ul=Pn.ReactCurrentDispatcher,Lc=Pn.ReactCurrentOwner,Ht=Pn.ReactCurrentBatchConfig,Re=0,ft=null,st=null,ht=0,Ut=0,Or=er(0),ct=0,Zs=null,vr=0,Ll=0,Ac=0,Is=null,Pt=null,$c=0,Zr=1/0,gn=null,ml=!1,Ti=null,Kn=null,Sa=!1,Fn=null,fl=0,Us=0,Ri=null,za=-1,Ga=0;function St(){return Re&6?rt():za!==-1?za:za=rt()}function Vn(e){return e.mode&1?Re&2&&ht!==0?ht&-ht:Fh.transition!==null?(Ga===0&&(Ga=Pm()),Ga):(e=ze,e!==0||(e=window.event,e=e===void 0?16:Um(e.type)),e):1}function tn(e,t,n,s){if(50<Us)throw Us=0,Ri=null,Error(re(185));na(e,n,s),(!(Re&2)||e!==ft)&&(e===ft&&(!(Re&2)&&(Ll|=n),ct===4&&Mn(e,ht)),At(e,s),n===1&&Re===0&&!(t.mode&1)&&(Zr=rt()+500,El&&tr()))}function At(e,t){var n=e.callbackNode;F0(e,t);var s=Ya(e,e===ft?ht:0);if(s===0)n!==null&&hd(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&hd(n),t===1)e.tag===0?Oh(ou.bind(null,e)):ef(ou.bind(null,e)),Ih(function(){!(Re&6)&&tr()}),n=null;else{switch(Tm(s)){case 1:n=ac;break;case 4:n=Cm;break;case 16:n=Ja;break;case 536870912:n=Em;break;default:n=Ja}n=Xf(n,Kf.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Kf(e,t){if(za=-1,Ga=0,Re&6)throw Error(re(327));var n=e.callbackNode;if(Wr()&&e.callbackNode!==n)return null;var s=Ya(e,e===ft?ht:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=pl(e,s);else{t=s;var a=Re;Re|=2;var l=qf();(ft!==e||ht!==t)&&(gn=null,Zr=rt()+500,mr(e,t));do try{ax();break}catch(c){Vf(e,c)}while(!0);yc(),ul.current=l,Re=a,st!==null?t=0:(ft=null,ht=0,t=ct)}if(t!==0){if(t===2&&(a=ri(e),a!==0&&(s=a,t=Li(e,a))),t===1)throw n=Zs,mr(e,0),Mn(e,s),At(e,rt()),n;if(t===6)Mn(e,s);else{if(a=e.current.alternate,!(s&30)&&!rx(a)&&(t=pl(e,s),t===2&&(l=ri(e),l!==0&&(s=l,t=Li(e,l))),t===1))throw n=Zs,mr(e,0),Mn(e,s),At(e,rt()),n;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(re(345));case 2:ar(e,Pt,gn);break;case 3:if(Mn(e,s),(s&130023424)===s&&(t=$c+500-rt(),10<t)){if(Ya(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){St(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ui(ar.bind(null,e,Pt,gn),t);break}ar(e,Pt,gn);break;case 4:if(Mn(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var o=31-en(s);l=1<<o,o=t[o],o>a&&(a=o),s&=~l}if(s=a,s=rt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*nx(s/1960))-s,10<s){e.timeoutHandle=ui(ar.bind(null,e,Pt,gn),s);break}ar(e,Pt,gn);break;case 5:ar(e,Pt,gn);break;default:throw Error(re(329))}}}return At(e,rt()),e.callbackNode===n?Kf.bind(null,e):null}function Li(e,t){var n=Is;return e.current.memoizedState.isDehydrated&&(mr(e,t).flags|=256),e=pl(e,t),e!==2&&(t=Pt,Pt=n,t!==null&&Ai(t)),e}function Ai(e){Pt===null?Pt=e:Pt.push.apply(Pt,e)}function rx(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var a=n[s],l=a.getSnapshot;a=a.value;try{if(!nn(l(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Mn(e,t){for(t&=~Ac,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-en(t),s=1<<n;e[n]=-1,t&=~s}}function ou(e){if(Re&6)throw Error(re(327));Wr();var t=Ya(e,0);if(!(t&1))return At(e,rt()),null;var n=pl(e,t);if(e.tag!==0&&n===2){var s=ri(e);s!==0&&(t=s,n=Li(e,s))}if(n===1)throw n=Zs,mr(e,0),Mn(e,t),At(e,rt()),n;if(n===6)throw Error(re(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ar(e,Pt,gn),At(e,rt()),null}function Ic(e,t){var n=Re;Re|=1;try{return e(t)}finally{Re=n,Re===0&&(Zr=rt()+500,El&&tr())}}function br(e){Fn!==null&&Fn.tag===0&&!(Re&6)&&Wr();var t=Re;Re|=1;var n=Ht.transition,s=ze;try{if(Ht.transition=null,ze=1,e)return e()}finally{ze=s,Ht.transition=n,Re=t,!(Re&6)&&tr()}}function Uc(){Ut=Or.current,qe(Or)}function mr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,$h(n)),st!==null)for(n=st.return;n!==null;){var s=n;switch(hc(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&tl();break;case 3:Yr(),qe(Rt),qe(jt),Sc();break;case 5:Nc(s);break;case 4:Yr();break;case 13:qe(Ye);break;case 19:qe(Ye);break;case 10:vc(s.type._context);break;case 22:case 23:Uc()}n=n.return}if(ft=e,st=e=qn(e.current,null),ht=Ut=t,ct=0,Zs=null,Ac=Ll=vr=0,Pt=Is=null,ir!==null){for(t=0;t<ir.length;t++)if(n=ir[t],s=n.interleaved,s!==null){n.interleaved=null;var a=s.next,l=n.pending;if(l!==null){var o=l.next;l.next=a,s.next=o}n.pending=s}ir=null}return e}function Vf(e,t){do{var n=st;try{if(yc(),Fa.current=dl,cl){for(var s=Qe.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}cl=!1}if(yr=0,mt=it=Qe=null,As=!1,Js=0,Lc.current=null,n===null||n.return===null){ct=1,Zs=t,st=null;break}e:{var l=e,o=n.return,c=n,d=t;if(t=ht,c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var u=d,f=c,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=qd(o);if(v!==null){v.flags&=-257,Jd(v,o,c,l,t),v.mode&1&&Vd(l,u,t),t=v,d=u;var b=t.updateQueue;if(b===null){var y=new Set;y.add(d),t.updateQueue=y}else b.add(d);break e}else{if(!(t&1)){Vd(l,u,t),Mc();break e}d=Error(re(426))}}else if(Je&&c.mode&1){var C=qd(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Jd(C,o,c,l,t),xc(Qr(d,c));break e}}l=d=Qr(d,c),ct!==4&&(ct=2),Is===null?Is=[l]:Is.push(l),l=o;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var x=Rf(l,d,t);Bd(l,x);break e;case 1:c=d;var p=l.type,g=l.stateNode;if(!(l.flags&128)&&(typeof p.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Kn===null||!Kn.has(g)))){l.flags|=65536,t&=-t,l.lanes|=t;var j=Lf(l,c,t);Bd(l,j);break e}}l=l.return}while(l!==null)}Yf(n)}catch(w){t=w,st===n&&n!==null&&(st=n=n.return);continue}break}while(!0)}function qf(){var e=ul.current;return ul.current=dl,e===null?dl:e}function Mc(){(ct===0||ct===3||ct===2)&&(ct=4),ft===null||!(vr&268435455)&&!(Ll&268435455)||Mn(ft,ht)}function pl(e,t){var n=Re;Re|=2;var s=qf();(ft!==e||ht!==t)&&(gn=null,mr(e,t));do try{sx();break}catch(a){Vf(e,a)}while(!0);if(yc(),Re=n,ul.current=s,st!==null)throw Error(re(261));return ft=null,ht=0,ct}function sx(){for(;st!==null;)Jf(st)}function ax(){for(;st!==null&&!R0();)Jf(st)}function Jf(e){var t=Zf(e.alternate,e,Ut);e.memoizedProps=e.pendingProps,t===null?Yf(e):st=t,Lc.current=null}function Yf(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Zh(n,t),n!==null){n.flags&=32767,st=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ct=6,st=null;return}}else if(n=Qh(n,t,Ut),n!==null){st=n;return}if(t=t.sibling,t!==null){st=t;return}st=t=e}while(t!==null);ct===0&&(ct=5)}function ar(e,t,n){var s=ze,a=Ht.transition;try{Ht.transition=null,ze=1,lx(e,t,n,s)}finally{Ht.transition=a,ze=s}return null}function lx(e,t,n,s){do Wr();while(Fn!==null);if(Re&6)throw Error(re(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(re(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(_0(e,l),e===ft&&(st=ft=null,ht=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Sa||(Sa=!0,Xf(Ja,function(){return Wr(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Ht.transition,Ht.transition=null;var o=ze;ze=1;var c=Re;Re|=4,Lc.current=null,ex(e,n),Wf(n,e),Ch(ci),Qa=!!ii,ci=ii=null,e.current=n,tx(n),L0(),Re=c,ze=o,Ht.transition=l}else e.current=n;if(Sa&&(Sa=!1,Fn=e,fl=a),l=e.pendingLanes,l===0&&(Kn=null),I0(n.stateNode),At(e,rt()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],s(a.value,{componentStack:a.stack,digest:a.digest});if(ml)throw ml=!1,e=Ti,Ti=null,e;return fl&1&&e.tag!==0&&Wr(),l=e.pendingLanes,l&1?e===Ri?Us++:(Us=0,Ri=e):Us=0,tr(),null}function Wr(){if(Fn!==null){var e=Tm(fl),t=Ht.transition,n=ze;try{if(Ht.transition=null,ze=16>e?16:e,Fn===null)var s=!1;else{if(e=Fn,Fn=null,fl=0,Re&6)throw Error(re(331));var a=Re;for(Re|=4,fe=e.current;fe!==null;){var l=fe,o=l.child;if(fe.flags&16){var c=l.deletions;if(c!==null){for(var d=0;d<c.length;d++){var u=c[d];for(fe=u;fe!==null;){var f=fe;switch(f.tag){case 0:case 11:case 15:$s(8,f,l)}var m=f.child;if(m!==null)m.return=f,fe=m;else for(;fe!==null;){f=fe;var h=f.sibling,v=f.return;if(Bf(f),f===u){fe=null;break}if(h!==null){h.return=v,fe=h;break}fe=v}}}var b=l.alternate;if(b!==null){var y=b.child;if(y!==null){b.child=null;do{var C=y.sibling;y.sibling=null,y=C}while(y!==null)}}fe=l}}if(l.subtreeFlags&2064&&o!==null)o.return=l,fe=o;else e:for(;fe!==null;){if(l=fe,l.flags&2048)switch(l.tag){case 0:case 11:case 15:$s(9,l,l.return)}var x=l.sibling;if(x!==null){x.return=l.return,fe=x;break e}fe=l.return}}var p=e.current;for(fe=p;fe!==null;){o=fe;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,fe=g;else e:for(o=p;fe!==null;){if(c=fe,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Rl(9,c)}}catch(w){tt(c,c.return,w)}if(c===o){fe=null;break e}var j=c.sibling;if(j!==null){j.return=c.return,fe=j;break e}fe=c.return}}if(Re=a,tr(),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(jl,e)}catch{}s=!0}return s}finally{ze=n,Ht.transition=t}}return!1}function iu(e,t,n){t=Qr(n,t),t=Rf(e,t,1),e=Hn(e,t,1),t=St(),e!==null&&(na(e,1,t),At(e,t))}function tt(e,t,n){if(e.tag===3)iu(e,e,n);else for(;t!==null;){if(t.tag===3){iu(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Kn===null||!Kn.has(s))){e=Qr(n,e),e=Lf(t,e,1),t=Hn(t,e,1),e=St(),t!==null&&(na(t,1,e),At(t,e));break}}t=t.return}}function ox(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=St(),e.pingedLanes|=e.suspendedLanes&n,ft===e&&(ht&n)===n&&(ct===4||ct===3&&(ht&130023424)===ht&&500>rt()-$c?mr(e,0):Ac|=n),At(e,t)}function Qf(e,t){t===0&&(e.mode&1?(t=pa,pa<<=1,!(pa&130023424)&&(pa=4194304)):t=1);var n=St();e=kn(e,t),e!==null&&(na(e,t,n),At(e,n))}function ix(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Qf(e,n)}function cx(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(re(314))}s!==null&&s.delete(t),Qf(e,n)}var Zf;Zf=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Rt.current)Tt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Tt=!1,Yh(e,t,n);Tt=!!(e.flags&131072)}else Tt=!1,Je&&t.flags&1048576&&tf(t,sl,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Ba(e,t),e=t.pendingProps;var a=Vr(t,jt.current);Gr(t,n),a=Cc(null,t,s,e,a,n);var l=Ec();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Lt(s)?(l=!0,nl(t)):l=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,wc(t),a.updater=Tl,t.stateNode=a,a._reactInternals=t,yi(t,s,e,n),t=wi(null,t,s,!0,l,n)):(t.tag=0,Je&&l&&pc(t),Nt(null,t,a,n),t=t.child),t;case 16:s=t.elementType;e:{switch(Ba(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=ux(s),e=Qt(s,e),a){case 0:t=bi(null,t,s,e,n);break e;case 1:t=Zd(null,t,s,e,n);break e;case 11:t=Yd(null,t,s,e,n);break e;case 14:t=Qd(null,t,s,Qt(s.type,e),n);break e}throw Error(re(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Qt(s,a),bi(e,t,s,a,n);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Qt(s,a),Zd(e,t,s,a,n);case 3:e:{if(Uf(t),e===null)throw Error(re(387));s=t.pendingProps,l=t.memoizedState,a=l.element,of(e,t),ol(t,s,null,n);var o=t.memoizedState;if(s=o.element,l.isDehydrated)if(l={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){a=Qr(Error(re(423)),t),t=Xd(e,t,s,n,a);break e}else if(s!==a){a=Qr(Error(re(424)),t),t=Xd(e,t,s,n,a);break e}else for(Mt=Wn(t.stateNode.containerInfo.firstChild),Dt=t,Je=!0,Xt=null,n=af(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(qr(),s===a){t=Cn(e,t,n);break e}Nt(e,t,s,n)}t=t.child}return t;case 5:return cf(t),e===null&&hi(t),s=t.type,a=t.pendingProps,l=e!==null?e.memoizedProps:null,o=a.children,di(s,a)?o=null:l!==null&&di(s,l)&&(t.flags|=32),If(e,t),Nt(e,t,o,n),t.child;case 6:return e===null&&hi(t),null;case 13:return Mf(e,t,n);case 4:return jc(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Jr(t,null,s,n):Nt(e,t,s,n),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Qt(s,a),Yd(e,t,s,a,n);case 7:return Nt(e,t,t.pendingProps,n),t.child;case 8:return Nt(e,t,t.pendingProps.children,n),t.child;case 12:return Nt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,l=t.memoizedProps,o=a.value,He(al,s._currentValue),s._currentValue=o,l!==null)if(nn(l.value,o)){if(l.children===a.children&&!Rt.current){t=Cn(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var c=l.dependencies;if(c!==null){o=l.child;for(var d=c.firstContext;d!==null;){if(d.context===s){if(l.tag===1){d=wn(-1,n&-n),d.tag=2;var u=l.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?d.next=d:(d.next=f.next,f.next=d),u.pending=d}}l.lanes|=n,d=l.alternate,d!==null&&(d.lanes|=n),xi(l.return,n,t),c.lanes|=n;break}d=d.next}}else if(l.tag===10)o=l.type===t.type?null:l.child;else if(l.tag===18){if(o=l.return,o===null)throw Error(re(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),xi(o,n,t),o=l.sibling}else o=l.child;if(o!==null)o.return=l;else for(o=l;o!==null;){if(o===t){o=null;break}if(l=o.sibling,l!==null){l.return=o.return,o=l;break}o=o.return}l=o}Nt(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,Gr(t,n),a=Kt(a),s=s(a),t.flags|=1,Nt(e,t,s,n),t.child;case 14:return s=t.type,a=Qt(s,t.pendingProps),a=Qt(s.type,a),Qd(e,t,s,a,n);case 15:return Af(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Qt(s,a),Ba(e,t),t.tag=1,Lt(s)?(e=!0,nl(t)):e=!1,Gr(t,n),Tf(t,s,a),yi(t,s,a,n),wi(null,t,s,!0,e,n);case 19:return Df(e,t,n);case 22:return $f(e,t,n)}throw Error(re(156,t.tag))};function Xf(e,t){return km(e,t)}function dx(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wt(e,t,n,s){return new dx(e,t,n,s)}function Dc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ux(e){if(typeof e=="function")return Dc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===nc)return 11;if(e===rc)return 14}return 2}function qn(e,t){var n=e.alternate;return n===null?(n=Wt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Wa(e,t,n,s,a,l){var o=2;if(s=e,typeof e=="function")Dc(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Pr:return fr(n.children,a,l,t);case tc:o=8,a|=8;break;case zo:return e=Wt(12,n,t,a|2),e.elementType=zo,e.lanes=l,e;case Go:return e=Wt(13,n,t,a),e.elementType=Go,e.lanes=l,e;case Wo:return e=Wt(19,n,t,a),e.elementType=Wo,e.lanes=l,e;case im:return Al(n,a,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case lm:o=10;break e;case om:o=9;break e;case nc:o=11;break e;case rc:o=14;break e;case $n:o=16,s=null;break e}throw Error(re(130,e==null?e:typeof e,""))}return t=Wt(o,n,t,a),t.elementType=e,t.type=s,t.lanes=l,t}function fr(e,t,n,s){return e=Wt(7,e,s,t),e.lanes=n,e}function Al(e,t,n,s){return e=Wt(22,e,s,t),e.elementType=im,e.lanes=n,e.stateNode={isHidden:!1},e}function go(e,t,n){return e=Wt(6,e,null,t),e.lanes=n,e}function yo(e,t,n){return t=Wt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function mx(e,t,n,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ql(0),this.expirationTimes=Ql(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ql(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Oc(e,t,n,s,a,l,o,c,d){return e=new mx(e,t,n,c,d),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Wt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wc(l),e}function fx(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Er,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function ep(e){if(!e)return Qn;e=e._reactInternals;e:{if(jr(e)!==e||e.tag!==1)throw Error(re(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Lt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(re(171))}if(e.tag===1){var n=e.type;if(Lt(n))return Xm(e,n,t)}return t}function tp(e,t,n,s,a,l,o,c,d){return e=Oc(n,s,!0,e,a,l,o,c,d),e.context=ep(null),n=e.current,s=St(),a=Vn(n),l=wn(s,a),l.callback=t??null,Hn(n,l,a),e.current.lanes=a,na(e,a,s),At(e,s),e}function $l(e,t,n,s){var a=t.current,l=St(),o=Vn(a);return n=ep(n),t.context===null?t.context=n:t.pendingContext=n,t=wn(l,o),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Hn(a,t,o),e!==null&&(tn(e,a,o,l),Oa(e,a,o)),o}function hl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function cu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Fc(e,t){cu(e,t),(e=e.alternate)&&cu(e,t)}function px(){return null}var np=typeof reportError=="function"?reportError:function(e){console.error(e)};function _c(e){this._internalRoot=e}Il.prototype.render=_c.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(re(409));$l(e,t,null,null)};Il.prototype.unmount=_c.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;br(function(){$l(null,e,null,null)}),t[Sn]=null}};function Il(e){this._internalRoot=e}Il.prototype.unstable_scheduleHydration=function(e){if(e){var t=Am();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Un.length&&t!==0&&t<Un[n].priority;n++);Un.splice(n,0,e),n===0&&Im(e)}};function Bc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ul(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function du(){}function hx(e,t,n,s,a){if(a){if(typeof s=="function"){var l=s;s=function(){var u=hl(o);l.call(u)}}var o=tp(t,s,e,0,null,!1,!1,"",du);return e._reactRootContainer=o,e[Sn]=o.current,Ws(e.nodeType===8?e.parentNode:e),br(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var c=s;s=function(){var u=hl(d);c.call(u)}}var d=Oc(e,0,!1,null,null,!1,!1,"",du);return e._reactRootContainer=d,e[Sn]=d.current,Ws(e.nodeType===8?e.parentNode:e),br(function(){$l(t,d,n,s)}),d}function Ml(e,t,n,s,a){var l=n._reactRootContainer;if(l){var o=l;if(typeof a=="function"){var c=a;a=function(){var d=hl(o);c.call(d)}}$l(t,o,e,a)}else o=hx(n,t,e,a,s);return hl(o)}Rm=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ns(t.pendingLanes);n!==0&&(lc(t,n|1),At(t,rt()),!(Re&6)&&(Zr=rt()+500,tr()))}break;case 13:br(function(){var s=kn(e,1);if(s!==null){var a=St();tn(s,e,1,a)}}),Fc(e,1)}};oc=function(e){if(e.tag===13){var t=kn(e,134217728);if(t!==null){var n=St();tn(t,e,134217728,n)}Fc(e,134217728)}};Lm=function(e){if(e.tag===13){var t=Vn(e),n=kn(e,t);if(n!==null){var s=St();tn(n,e,t,s)}Fc(e,t)}};Am=function(){return ze};$m=function(e,t){var n=ze;try{return ze=e,t()}finally{ze=n}};ei=function(e,t,n){switch(t){case"input":if(Vo(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var a=Cl(s);if(!a)throw Error(re(90));dm(s),Vo(s,a)}}}break;case"textarea":mm(e,n);break;case"select":t=n.value,t!=null&&Fr(e,!!n.multiple,t,!1)}};vm=Ic;bm=br;var xx={usingClientEntryPoint:!1,Events:[sa,Ar,Cl,gm,ym,Ic]},xs={findFiberByHostInstance:or,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gx={bundleType:xs.bundleType,version:xs.version,rendererPackageName:xs.rendererPackageName,rendererConfig:xs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Nm(e),e===null?null:e.stateNode},findFiberByHostInstance:xs.findFiberByHostInstance||px,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ka=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ka.isDisabled&&ka.supportsFiber)try{jl=ka.inject(gx),cn=ka}catch{}}Ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xx;Ft.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bc(t))throw Error(re(200));return fx(e,t,null,n)};Ft.createRoot=function(e,t){if(!Bc(e))throw Error(re(299));var n=!1,s="",a=np;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Oc(e,1,!1,null,null,n,!1,s,a),e[Sn]=t.current,Ws(e.nodeType===8?e.parentNode:e),new _c(t)};Ft.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(re(188)):(e=Object.keys(e).join(","),Error(re(268,e)));return e=Nm(t),e=e===null?null:e.stateNode,e};Ft.flushSync=function(e){return br(e)};Ft.hydrate=function(e,t,n){if(!Ul(t))throw Error(re(200));return Ml(null,e,t,!0,n)};Ft.hydrateRoot=function(e,t,n){if(!Bc(e))throw Error(re(405));var s=n!=null&&n.hydratedSources||null,a=!1,l="",o=np;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=tp(t,null,e,1,n??null,a,!1,l,o),e[Sn]=t.current,Ws(e),s)for(e=0;e<s.length;e++)n=s[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Il(t)};Ft.render=function(e,t,n){if(!Ul(t))throw Error(re(200));return Ml(null,e,t,!1,n)};Ft.unmountComponentAtNode=function(e){if(!Ul(e))throw Error(re(40));return e._reactRootContainer?(br(function(){Ml(null,null,e,!1,function(){e._reactRootContainer=null,e[Sn]=null})}),!0):!1};Ft.unstable_batchedUpdates=Ic;Ft.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!Ul(n))throw Error(re(200));if(e==null||e._reactInternals===void 0)throw Error(re(38));return Ml(e,t,n,!1,s)};Ft.version="18.3.1-next-f1338f8080-20240426";function rp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rp)}catch(e){console.error(e)}}rp(),nm.exports=Ft;var sp=nm.exports,uu=sp;_o.createRoot=uu.createRoot,_o.hydrateRoot=uu.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xs(){return Xs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Xs.apply(this,arguments)}var _n;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(_n||(_n={}));const mu="popstate";function yx(e){e===void 0&&(e={});function t(s,a){let{pathname:l,search:o,hash:c}=s.location;return $i("",{pathname:l,search:o,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){return typeof a=="string"?a:xl(a)}return bx(t,n,null,e)}function Ze(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function zc(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function vx(){return Math.random().toString(36).substr(2,8)}function fu(e,t){return{usr:e.state,key:e.key,idx:t}}function $i(e,t,n,s){return n===void 0&&(n=null),Xs({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ss(t):t,{state:n,key:t&&t.key||s||vx()})}function xl(e){let{pathname:t="/",search:n="",hash:s=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function ss(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function bx(e,t,n,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:l=!1}=s,o=a.history,c=_n.Pop,d=null,u=f();u==null&&(u=0,o.replaceState(Xs({},o.state,{idx:u}),""));function f(){return(o.state||{idx:null}).idx}function m(){c=_n.Pop;let C=f(),x=C==null?null:C-u;u=C,d&&d({action:c,location:y.location,delta:x})}function h(C,x){c=_n.Push;let p=$i(y.location,C,x);u=f()+1;let g=fu(p,u),j=y.createHref(p);try{o.pushState(g,"",j)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;a.location.assign(j)}l&&d&&d({action:c,location:y.location,delta:1})}function v(C,x){c=_n.Replace;let p=$i(y.location,C,x);u=f();let g=fu(p,u),j=y.createHref(p);o.replaceState(g,"",j),l&&d&&d({action:c,location:y.location,delta:0})}function b(C){let x=a.location.origin!=="null"?a.location.origin:a.location.href,p=typeof C=="string"?C:xl(C);return p=p.replace(/ $/,"%20"),Ze(x,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,x)}let y={get action(){return c},get location(){return e(a,o)},listen(C){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(mu,m),d=C,()=>{a.removeEventListener(mu,m),d=null}},createHref(C){return t(a,C)},createURL:b,encodeLocation(C){let x=b(C);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:v,go(C){return o.go(C)}};return y}var pu;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(pu||(pu={}));function wx(e,t,n){return n===void 0&&(n="/"),jx(e,t,n)}function jx(e,t,n,s){let a=typeof t=="string"?ss(t):t,l=Xr(a.pathname||"/",n);if(l==null)return null;let o=ap(e);Nx(o);let c=null;for(let d=0;c==null&&d<o.length;++d){let u=Ix(l);c=Ax(o[d],u)}return c}function ap(e,t,n,s){t===void 0&&(t=[]),n===void 0&&(n=[]),s===void 0&&(s="");let a=(l,o,c)=>{let d={relativePath:c===void 0?l.path||"":c,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};d.relativePath.startsWith("/")&&(Ze(d.relativePath.startsWith(s),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(s.length));let u=Jn([s,d.relativePath]),f=n.concat(d);l.children&&l.children.length>0&&(Ze(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),ap(l.children,t,f,u)),!(l.path==null&&!l.index)&&t.push({path:u,score:Rx(u,l.index),routesMeta:f})};return e.forEach((l,o)=>{var c;if(l.path===""||!((c=l.path)!=null&&c.includes("?")))a(l,o);else for(let d of lp(l.path))a(l,o,d)}),t}function lp(e){let t=e.split("/");if(t.length===0)return[];let[n,...s]=t,a=n.endsWith("?"),l=n.replace(/\?$/,"");if(s.length===0)return a?[l,""]:[l];let o=lp(s.join("/")),c=[];return c.push(...o.map(d=>d===""?l:[l,d].join("/"))),a&&c.push(...o),c.map(d=>e.startsWith("/")&&d===""?"/":d)}function Nx(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Lx(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const Sx=/^:[\w-]+$/,kx=3,Cx=2,Ex=1,Px=10,Tx=-2,hu=e=>e==="*";function Rx(e,t){let n=e.split("/"),s=n.length;return n.some(hu)&&(s+=Tx),t&&(s+=Cx),n.filter(a=>!hu(a)).reduce((a,l)=>a+(Sx.test(l)?kx:l===""?Ex:Px),s)}function Lx(e,t){return e.length===t.length&&e.slice(0,-1).every((s,a)=>s===t[a])?e[e.length-1]-t[t.length-1]:0}function Ax(e,t,n){let{routesMeta:s}=e,a={},l="/",o=[];for(let c=0;c<s.length;++c){let d=s[c],u=c===s.length-1,f=l==="/"?t:t.slice(l.length)||"/",m=Ii({path:d.relativePath,caseSensitive:d.caseSensitive,end:u},f),h=d.route;if(!m)return null;Object.assign(a,m.params),o.push({params:a,pathname:Jn([l,m.pathname]),pathnameBase:Fx(Jn([l,m.pathnameBase])),route:h}),m.pathnameBase!=="/"&&(l=Jn([l,m.pathnameBase]))}return o}function Ii(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=$x(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let l=a[0],o=l.replace(/(.)\/+$/,"$1"),c=a.slice(1);return{params:s.reduce((u,f,m)=>{let{paramName:h,isOptional:v}=f;if(h==="*"){let y=c[m]||"";o=l.slice(0,l.length-y.length).replace(/(.)\/+$/,"$1")}const b=c[m];return v&&!b?u[h]=void 0:u[h]=(b||"").replace(/%2F/g,"/"),u},{}),pathname:l,pathnameBase:o,pattern:e}}function $x(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),zc(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,d)=>(s.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function Ix(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return zc(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Xr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&s!=="/"?null:e.slice(n)||"/"}const Ux=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Mx=e=>Ux.test(e);function Dx(e,t){t===void 0&&(t="/");let{pathname:n,search:s="",hash:a=""}=typeof e=="string"?ss(e):e,l;if(n)if(Mx(n))l=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),zc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?l=xu(n.substring(1),"/"):l=xu(n,t)}else l=t;return{pathname:l,search:_x(s),hash:Bx(a)}}function xu(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function vo(e,t,n,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ox(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Gc(e,t){let n=Ox(e);return t?n.map((s,a)=>a===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function Wc(e,t,n,s){s===void 0&&(s=!1);let a;typeof e=="string"?a=ss(e):(a=Xs({},e),Ze(!a.pathname||!a.pathname.includes("?"),vo("?","pathname","search",a)),Ze(!a.pathname||!a.pathname.includes("#"),vo("#","pathname","hash",a)),Ze(!a.search||!a.search.includes("#"),vo("#","search","hash",a)));let l=e===""||a.pathname==="",o=l?"/":a.pathname,c;if(o==null)c=n;else{let m=t.length-1;if(!s&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),m-=1;a.pathname=h.join("/")}c=m>=0?t[m]:"/"}let d=Dx(a,c),u=o&&o!=="/"&&o.endsWith("/"),f=(l||o===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(u||f)&&(d.pathname+="/"),d}const Jn=e=>e.join("/").replace(/\/\/+/g,"/"),Fx=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),_x=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Bx=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function zx(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const op=["post","put","patch","delete"];new Set(op);const Gx=["get",...op];new Set(Gx);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ea(){return ea=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ea.apply(this,arguments)}const Dl=i.createContext(null),ip=i.createContext(null),Tn=i.createContext(null),Ol=i.createContext(null),Rn=i.createContext({outlet:null,matches:[],isDataRoute:!1}),cp=i.createContext(null);function Wx(e,t){let{relative:n}=t===void 0?{}:t;as()||Ze(!1);let{basename:s,navigator:a}=i.useContext(Tn),{hash:l,pathname:o,search:c}=Fl(e,{relative:n}),d=o;return s!=="/"&&(d=o==="/"?s:Jn([s,o])),a.createHref({pathname:d,search:c,hash:l})}function as(){return i.useContext(Ol)!=null}function Nr(){return as()||Ze(!1),i.useContext(Ol).location}function dp(e){i.useContext(Tn).static||i.useLayoutEffect(e)}function $t(){let{isDataRoute:e}=i.useContext(Rn);return e?rg():Hx()}function Hx(){as()||Ze(!1);let e=i.useContext(Dl),{basename:t,future:n,navigator:s}=i.useContext(Tn),{matches:a}=i.useContext(Rn),{pathname:l}=Nr(),o=JSON.stringify(Gc(a,n.v7_relativeSplatPath)),c=i.useRef(!1);return dp(()=>{c.current=!0}),i.useCallback(function(u,f){if(f===void 0&&(f={}),!c.current)return;if(typeof u=="number"){s.go(u);return}let m=Wc(u,JSON.parse(o),l,f.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Jn([t,m.pathname])),(f.replace?s.replace:s.push)(m,f.state,f)},[t,s,o,l,e])}function ls(){let{matches:e}=i.useContext(Rn),t=e[e.length-1];return t?t.params:{}}function Fl(e,t){let{relative:n}=t===void 0?{}:t,{future:s}=i.useContext(Tn),{matches:a}=i.useContext(Rn),{pathname:l}=Nr(),o=JSON.stringify(Gc(a,s.v7_relativeSplatPath));return i.useMemo(()=>Wc(e,JSON.parse(o),l,n==="path"),[e,o,l,n])}function Kx(e,t){return Vx(e,t)}function Vx(e,t,n,s){as()||Ze(!1);let{navigator:a}=i.useContext(Tn),{matches:l}=i.useContext(Rn),o=l[l.length-1],c=o?o.params:{};o&&o.pathname;let d=o?o.pathnameBase:"/";o&&o.route;let u=Nr(),f;if(t){var m;let C=typeof t=="string"?ss(t):t;d==="/"||(m=C.pathname)!=null&&m.startsWith(d)||Ze(!1),f=C}else f=u;let h=f.pathname||"/",v=h;if(d!=="/"){let C=d.replace(/^\//,"").split("/");v="/"+h.replace(/^\//,"").split("/").slice(C.length).join("/")}let b=wx(e,{pathname:v}),y=Zx(b&&b.map(C=>Object.assign({},C,{params:Object.assign({},c,C.params),pathname:Jn([d,a.encodeLocation?a.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?d:Jn([d,a.encodeLocation?a.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),l,n,s);return t&&y?i.createElement(Ol.Provider,{value:{location:ea({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:_n.Pop}},y):y}function qx(){let e=ng(),t=zx(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:a},n):null,null)}const Jx=i.createElement(qx,null);class Yx extends i.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?i.createElement(Rn.Provider,{value:this.props.routeContext},i.createElement(cp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Qx(e){let{routeContext:t,match:n,children:s}=e,a=i.useContext(Dl);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(Rn.Provider,{value:t},s)}function Zx(e,t,n,s){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),s===void 0&&(s=null),e==null){var l;if(!n)return null;if(n.errors)e=n.matches;else if((l=s)!=null&&l.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,c=(a=n)==null?void 0:a.errors;if(c!=null){let f=o.findIndex(m=>m.route.id&&(c==null?void 0:c[m.route.id])!==void 0);f>=0||Ze(!1),o=o.slice(0,Math.min(o.length,f+1))}let d=!1,u=-1;if(n&&s&&s.v7_partialHydration)for(let f=0;f<o.length;f++){let m=o[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(u=f),m.route.id){let{loaderData:h,errors:v}=n,b=m.route.loader&&h[m.route.id]===void 0&&(!v||v[m.route.id]===void 0);if(m.route.lazy||b){d=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((f,m,h)=>{let v,b=!1,y=null,C=null;n&&(v=c&&m.route.id?c[m.route.id]:void 0,y=m.route.errorElement||Jx,d&&(u<0&&h===0?(sg("route-fallback"),b=!0,C=null):u===h&&(b=!0,C=m.route.hydrateFallbackElement||null)));let x=t.concat(o.slice(0,h+1)),p=()=>{let g;return v?g=y:b?g=C:m.route.Component?g=i.createElement(m.route.Component,null):m.route.element?g=m.route.element:g=f,i.createElement(Qx,{match:m,routeContext:{outlet:f,matches:x,isDataRoute:n!=null},children:g})};return n&&(m.route.ErrorBoundary||m.route.errorElement||h===0)?i.createElement(Yx,{location:n.location,revalidation:n.revalidation,component:y,error:v,children:p(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):p()},null)}var up=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(up||{}),mp=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(mp||{});function Xx(e){let t=i.useContext(Dl);return t||Ze(!1),t}function eg(e){let t=i.useContext(ip);return t||Ze(!1),t}function tg(e){let t=i.useContext(Rn);return t||Ze(!1),t}function fp(e){let t=tg(),n=t.matches[t.matches.length-1];return n.route.id||Ze(!1),n.route.id}function ng(){var e;let t=i.useContext(cp),n=eg(),s=fp();return t!==void 0?t:(e=n.errors)==null?void 0:e[s]}function rg(){let{router:e}=Xx(up.UseNavigateStable),t=fp(mp.UseNavigateStable),n=i.useRef(!1);return dp(()=>{n.current=!0}),i.useCallback(function(a,l){l===void 0&&(l={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,ea({fromRouteId:t},l)))},[e,t])}const gu={};function sg(e,t,n){gu[e]||(gu[e]=!0)}function ag(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function lg(e){let{to:t,replace:n,state:s,relative:a}=e;as()||Ze(!1);let{future:l,static:o}=i.useContext(Tn),{matches:c}=i.useContext(Rn),{pathname:d}=Nr(),u=$t(),f=Wc(t,Gc(c,l.v7_relativeSplatPath),d,a==="path"),m=JSON.stringify(f);return i.useEffect(()=>u(JSON.parse(m),{replace:n,state:s,relative:a}),[u,m,a,n,s]),null}function $e(e){Ze(!1)}function og(e){let{basename:t="/",children:n=null,location:s,navigationType:a=_n.Pop,navigator:l,static:o=!1,future:c}=e;as()&&Ze(!1);let d=t.replace(/^\/*/,"/"),u=i.useMemo(()=>({basename:d,navigator:l,static:o,future:ea({v7_relativeSplatPath:!1},c)}),[d,c,l,o]);typeof s=="string"&&(s=ss(s));let{pathname:f="/",search:m="",hash:h="",state:v=null,key:b="default"}=s,y=i.useMemo(()=>{let C=Xr(f,d);return C==null?null:{location:{pathname:C,search:m,hash:h,state:v,key:b},navigationType:a}},[d,f,m,h,v,b,a]);return y==null?null:i.createElement(Tn.Provider,{value:u},i.createElement(Ol.Provider,{children:n,value:y}))}function ig(e){let{children:t,location:n}=e;return Kx(Ui(t),n)}new Promise(()=>{});function Ui(e,t){t===void 0&&(t=[]);let n=[];return i.Children.forEach(e,(s,a)=>{if(!i.isValidElement(s))return;let l=[...t,a];if(s.type===i.Fragment){n.push.apply(n,Ui(s.props.children,l));return}s.type!==$e&&Ze(!1),!s.props.index||!s.props.children||Ze(!1);let o={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=Ui(s.props.children,l)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gl(){return gl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},gl.apply(this,arguments)}function pp(e,t){if(e==null)return{};var n={},s=Object.keys(e),a,l;for(l=0;l<s.length;l++)a=s[l],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function cg(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function dg(e,t){return e.button===0&&(!t||t==="_self")&&!cg(e)}function Mi(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let s=e[n];return t.concat(Array.isArray(s)?s.map(a=>[n,a]):[[n,s]])},[]))}function ug(e,t){let n=Mi(e);return t&&t.forEach((s,a)=>{n.has(a)||t.getAll(a).forEach(l=>{n.append(a,l)})}),n}const mg=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],fg=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],pg="6";try{window.__reactRouterVersion=pg}catch{}const hg=i.createContext({isTransitioning:!1}),xg="startTransition",yu=Hr[xg];function gg(e){let{basename:t,children:n,future:s,window:a}=e,l=i.useRef();l.current==null&&(l.current=yx({window:a,v5Compat:!0}));let o=l.current,[c,d]=i.useState({action:o.action,location:o.location}),{v7_startTransition:u}=s||{},f=i.useCallback(m=>{u&&yu?yu(()=>d(m)):d(m)},[d,u]);return i.useLayoutEffect(()=>o.listen(f),[o,f]),i.useEffect(()=>ag(s),[s]),i.createElement(og,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:o,future:s})}const yg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",vg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ce=i.forwardRef(function(t,n){let{onClick:s,relative:a,reloadDocument:l,replace:o,state:c,target:d,to:u,preventScrollReset:f,viewTransition:m}=t,h=pp(t,mg),{basename:v}=i.useContext(Tn),b,y=!1;if(typeof u=="string"&&vg.test(u)&&(b=u,yg))try{let g=new URL(window.location.href),j=u.startsWith("//")?new URL(g.protocol+u):new URL(u),w=Xr(j.pathname,v);j.origin===g.origin&&w!=null?u=w+j.search+j.hash:y=!0}catch{}let C=Wx(u,{relative:a}),x=wg(u,{replace:o,state:c,target:d,preventScrollReset:f,relative:a,viewTransition:m});function p(g){s&&s(g),g.defaultPrevented||x(g)}return i.createElement("a",gl({},h,{href:b||C,onClick:y||l?s:p,ref:n,target:d}))}),Ca=i.forwardRef(function(t,n){let{"aria-current":s="page",caseSensitive:a=!1,className:l="",end:o=!1,style:c,to:d,viewTransition:u,children:f}=t,m=pp(t,fg),h=Fl(d,{relative:m.relative}),v=Nr(),b=i.useContext(ip),{navigator:y,basename:C}=i.useContext(Tn),x=b!=null&&jg(h)&&u===!0,p=y.encodeLocation?y.encodeLocation(h).pathname:h.pathname,g=v.pathname,j=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;a||(g=g.toLowerCase(),j=j?j.toLowerCase():null,p=p.toLowerCase()),j&&C&&(j=Xr(j,C)||j);const w=p!=="/"&&p.endsWith("/")?p.length-1:p.length;let E=g===p||!o&&g.startsWith(p)&&g.charAt(w)==="/",$=j!=null&&(j===p||!o&&j.startsWith(p)&&j.charAt(p.length)==="/"),R={isActive:E,isPending:$,isTransitioning:x},H=E?s:void 0,O;typeof l=="function"?O=l(R):O=[l,E?"active":null,$?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let q=typeof c=="function"?c(R):c;return i.createElement(ce,gl({},m,{"aria-current":H,className:O,ref:n,style:q,to:d,viewTransition:u}),typeof f=="function"?f(R):f)});var Di;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Di||(Di={}));var vu;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(vu||(vu={}));function bg(e){let t=i.useContext(Dl);return t||Ze(!1),t}function wg(e,t){let{target:n,replace:s,state:a,preventScrollReset:l,relative:o,viewTransition:c}=t===void 0?{}:t,d=$t(),u=Nr(),f=Fl(e,{relative:o});return i.useCallback(m=>{if(dg(m,n)){m.preventDefault();let h=s!==void 0?s:xl(u)===xl(f);d(e,{replace:h,state:a,preventScrollReset:l,relative:o,viewTransition:c})}},[u,d,f,s,a,n,e,l,o,c])}function qt(e){let t=i.useRef(Mi(e)),n=i.useRef(!1),s=Nr(),a=i.useMemo(()=>ug(s.search,n.current?null:t.current),[s.search]),l=$t(),o=i.useCallback((c,d)=>{const u=Mi(typeof c=="function"?c(a):c);n.current=!0,l("?"+u,d)},[l,a]);return[a,o]}function jg(e,t){t===void 0&&(t={});let n=i.useContext(hg);n==null&&Ze(!1);let{basename:s}=bg(Di.useViewTransitionState),a=Fl(e,{relative:t.relative});if(!n.isTransitioning)return!1;let l=Xr(n.currentLocation.pathname,s)||n.currentLocation.pathname,o=Xr(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Ii(a.pathname,o)!=null||Ii(a.pathname,l)!=null}const Oi="funkedupshift_impersonation",hp=i.createContext(void 0);function Ea(){try{const e=sessionStorage.getItem(Oi);if(!e)return null;const t=JSON.parse(e);if(t!=null&&t.type&&(t!=null&&t.id))return t}catch{}return null}function bu(e){try{e?sessionStorage.setItem(Oi,JSON.stringify(e)):sessionStorage.removeItem(Oi)}catch{}}const Ng=({children:e})=>{const[t,n]=i.useState(Ea);i.useEffect(()=>{const c=Ea();n(c)},[]);const s=i.useCallback(c=>{n(c),bu(c)},[]),a=i.useCallback(()=>{n(null),bu(null)},[]),l=i.useCallback(()=>{const c=t??Ea();return c?c.type==="user"?{"X-Impersonate-User":c.id}:{"X-Impersonate-Role":c.id}:{}},[t]),o={impersonation:t??Ea(),setImpersonation:s,clearImpersonation:a,getImpersonationHeaders:l};return r.jsx(hp.Provider,{value:o,children:e})};function Hc(){const e=i.useContext(hp);return e||{impersonation:null,setImpersonation:()=>{},clearImpersonation:()=>{},getImpersonationHeaders:()=>({})}}const xp=i.createContext(void 0);function Sg(e){return e.includes("admin")?"superadmin":e.includes("manager")?"manager":e.includes("user")?"user":"guest"}function wu(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const kg=({children:e})=>{const[t,n]=i.useState(null),[s,a]=i.useState(!0),{getImpersonationHeaders:l}=Hc(),o=Ie.useCallback(async()=>{const u=wu();if(!u){a(!1);return}try{const f=window;if(!f.auth||typeof f.auth.getAccessToken!="function"){a(!1);return}await new Promise(x=>{f.auth.isAuthenticated(p=>{if(!p){n(null),a(!1),x();return}x()})});const m=await new Promise(x=>{window.auth.getAccessToken(p=>x(p))});if(!m){n(null),a(!1);return}const h=await fetch(`${u}/me`,{headers:{Authorization:`Bearer ${m}`,...l()}});if(!h.ok){n(null),a(!1);return}const v=await h.json(),b=Array.isArray(v.groups)?v.groups.map(String):[],y=Sg(b),C=Array.isArray(v.customGroups)?v.customGroups.map(String):[];n({userId:String(v.userId||""),email:String(v.email||""),groups:b,role:y,customGroups:C,impersonated:!!v.impersonated,impersonatedAs:v.impersonatedAs})}catch{n(null)}finally{a(!1)}},[l]);i.useEffect(()=>{o()},[o]);const c=Ie.useCallback(async()=>{wu()&&await o()},[o]),d=()=>{const u=window;u.auth&&typeof u.auth.signOut=="function"&&u.auth.signOut(),n(null)};return r.jsx(xp.Provider,{value:{user:t,isLoading:s,signOut:d,refreshAuth:c},children:e})};function Ae(){const e=i.useContext(xp);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}function dt(e,t){if(t==="guest")return!0;if(!e)return!1;const n=["guest","user","manager","superadmin"];return n.indexOf(e.role)>=n.indexOf(t)}function Kc(e){return e!=null&&e.userId?e.role==="superadmin"?!0:(e.customGroups??[]).includes("Squash"):!1}function Vc(e){return e!=null&&e.userId?e.role==="superadmin"?!0:e.role!=="manager"?!1:(e.customGroups??[]).includes("Squash"):!1}function Cg(e){return!0}function Eg(e){return e!=null&&e.userId?e.role==="user"||e.role==="manager"||e.role==="superadmin":!1}function qc(e){return e!=null&&e.userId?e.role==="superadmin":!1}function yl(e){return e!=null&&e.userId?e.role==="superadmin"?!0:(e.customGroups??[]).includes("Memes"):!1}function gp(e){return!!(e!=null&&e.userId)}function es(e){return e!=null&&e.userId?e.role==="superadmin"?!0:e.role==="guest"?!1:(e.customGroups??[]).includes("Memes"):!1}function Jc(e){return e!=null&&e.userId?e.role==="superadmin"?!0:e.role!=="manager"?!1:(e.customGroups??[]).includes("Memes"):!1}function yp(){try{const e=sessionStorage.getItem("funkedupshift_impersonation");if(!e)return{};const t=JSON.parse(e);if((t==null?void 0:t.type)==="user"&&(t!=null&&t.id))return{"X-Impersonate-User":t.id};if((t==null?void 0:t.type)==="role"&&(t!=null&&t.id))return{"X-Impersonate-Role":t.id}}catch{}return{}}async function Q(e,t){var l;const n=window;if(!((l=n.auth)!=null&&l.getAccessToken))throw new Error("Not signed in");const s=await new Promise(o=>n.auth.getAccessToken(o)),a={...t==null?void 0:t.headers,Authorization:`Bearer ${s}`,...yp()};return fetch(e,{...t,headers:a})}async function at(e,t){var l;const n=window;if(!((l=n.auth)!=null&&l.getAccessToken))return fetch(e,t);const s=await new Promise(o=>n.auth.getAccessToken(o));if(!s)return fetch(e,t);const a={...t==null?void 0:t.headers,Authorization:`Bearer ${s}`,...yp()};return fetch(e,{...t,headers:a})}const vp=i.createContext(void 0);function Pg(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const ju="Funked Up Shift",Tg=({children:e})=>{const[t,n]=i.useState(null),[s,a]=i.useState(ju);return i.useEffect(()=>{const l=Pg();if(!l)return;let o=!1;const c=typeof window<"u"?window.location.hostname:"",d=c?`${l}/branding/logo?domain=${encodeURIComponent(c)}`:`${l}/branding/logo`;return(async()=>{try{const u=await at(d);if(!u.ok||!(u.headers.get("Content-Type")||"").includes("application/json"))return;const m=await u.json();if(o)return;m&&m.url&&n({url:String(m.url),alt:String(m.alt||ju)}),m!=null&&m.siteName&&typeof m.siteName=="string"&&m.siteName.trim()?a(m.siteName.trim()):m!=null&&m.alt&&typeof m.alt=="string"&&m.alt.trim()&&a(m.alt.trim())}catch{}})(),()=>{o=!0}},[]),r.jsx(vp.Provider,{value:{logo:t,siteName:s},children:e})};function Yc(){const e=i.useContext(vp);if(!e)throw new Error("useBranding must be used within BrandingProvider");return e}function Rg({title:e,titleId:t,...n},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const Ge=i.forwardRef(Rg);function Lg({title:e,titleId:t,...n},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const Qc=i.forwardRef(Lg);function Ag({title:e,titleId:t,...n},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"}))}const $g=i.forwardRef(Ag);function Ig({title:e,titleId:t,...n},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const Ug=i.forwardRef(Ig);function Mg({title:e,titleId:t,...n},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.057 1.123-.08M15.75 18H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08M15.75 18.75v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5A3.375 3.375 0 0 0 6.375 7.5H5.25m11.9-3.664A2.251 2.251 0 0 0 15 2.25h-1.5a2.251 2.251 0 0 0-2.15 1.586m5.8 0c.065.21.1.433.1.664v.75h-6V4.5c0-.231.035-.454.1-.664M6.75 7.5H4.875c-.621 0-1.125.504-1.125 1.125v12c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V16.5a9 9 0 0 0-9-9Z"}))}const Zc=i.forwardRef(Mg);function Dg({title:e,titleId:t,...n},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const Og=i.forwardRef(Dg);function Fg({title:e,titleId:t,...n},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const _g=i.forwardRef(Fg);function Bg({title:e,titleId:t,...n},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"}))}const zg=i.forwardRef(Bg);function Gg({title:e,titleId:t,...n},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"}))}const Xc=i.forwardRef(Gg);function Wg({title:e,titleId:t,...n},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))}const la=i.forwardRef(Wg);function Hg({title:e,titleId:t,...n},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const Kg=i.forwardRef(Hg);function Vg({title:e,titleId:t,...n},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))}const qg=i.forwardRef(Vg);function Jg({title:e,titleId:t,...n},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const Yg=i.forwardRef(Jg);function Qg({title:e,titleId:t,...n},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-3.044 0"}))}const Zg=i.forwardRef(Qg);function Xg({title:e,titleId:t,...n},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const ey=i.forwardRef(Xg);function ty({title:e,titleId:t,...n},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const ny=i.forwardRef(ty);function ry({title:e,titleId:t,...n},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const _l=i.forwardRef(ry),sy=[{id:"websites",label:"Websites",path:"/websites",section:"discover",minRole:"guest"},{id:"media",label:"Media",path:"/media",section:"discover",minRole:"guest"},{id:"internet-dashboard",label:"Internet Dashboard",path:"/internet-dashboard",section:"discover",minRole:"guest"},{id:"profile",label:"Profile",path:"/profile",section:"discover",minRole:"user",authOnly:!0},{id:"squash",label:"Squash",path:"/squash",section:"squash",minRole:"user",visibility:Kc},{id:"squash-admin",label:"Squash Admin",path:"/squash-admin",section:"squash",minRole:"manager",visibility:Vc},{id:"memes",label:"Memes",path:"/memes",section:"memes",minRole:"guest"},{id:"meme-generator",label:"Meme Generator",path:"/memes/create",section:"memes",minRole:"user",visibility:es},{id:"financial",label:"Financial",path:"/financial",section:"financial",minRole:"guest",visibility:Cg},{id:"financial-admin",label:"Financial Admin",path:"/admin/financial",section:"financial",minRole:"superadmin",visibility:qc},{id:"highlights",label:"Highlights",path:"/recommended/highlights",section:"recommended",minRole:"guest"},{id:"highest-rated",label:"Highest Rated",path:"/recommended/highest-rated",section:"recommended",minRole:"guest"}],ay=[{id:"websites",label:"Websites",path:"/admin/websites",description:"Add and manage curated sites, categories, and logos.",icon:zg,minRole:"manager"},{id:"media",label:"Media",path:"/admin/media",description:"Upload and organize media files.",icon:Kg,minRole:"manager"},{id:"internet-dashboard",label:"Internet Dashboard",path:"/admin/internet-dashboard",description:"Manage domains shown on the internet dashboard.",icon:Ug,minRole:"superadmin"},{id:"recommended",label:"Recommended",path:"/admin/recommended",description:"Curate highlights and highest-rated lists.",icon:qg,minRole:"manager"},{id:"membership",label:"Membership",path:"/admin/membership",description:"Manage custom groups and member access.",icon:ny,minRole:"manager"},{id:"branding",label:"Branding",path:"/admin/branding",description:"Set global logo and branding assets.",icon:Og,minRole:"superadmin"},{id:"financial",label:"Financial",path:"/admin/financial",description:"Manage default symbols and financial config.",icon:_g,minRole:"superadmin"},{id:"squash",label:"Squash",path:"/squash-admin",description:"Manage squash players and matches.",icon:Zg,minRole:"manager"}];function ly(e){return sy.filter(t=>t.authOnly?e!==null:t.visibility?t.visibility(e):dt(e,t.minRole))}function bp(e){return e?ay.filter(t=>dt(e,t.minRole)):[]}const oy=()=>{const{impersonation:e,clearImpersonation:t}=Hc(),{user:n,refreshAuth:s}=Ae();if(!e)return null;const a=n!=null&&n.impersonated?n.impersonatedAs||n.email:e.label,l=()=>{t(),s()};return r.jsxs("div",{className:"sticky top-0 z-50 flex items-center justify-between gap-4 bg-amber-600 px-4 py-2 text-sm font-medium text-amber-950 shadow-md",children:[r.jsxs("span",{children:["Viewing as: ",r.jsx("strong",{children:a||e.id})]}),r.jsxs("button",{type:"button",onClick:l,className:"flex items-center gap-1 rounded-md px-2 py-1 font-semibold hover:bg-amber-500/50","aria-label":"Stop impersonating",children:[r.jsx(_l,{className:"h-4 w-4"}),"Stop impersonating"]})]})};var iy=Object.defineProperty,cy=(e,t,n)=>t in e?iy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bo=(e,t,n)=>(cy(e,typeof t!="symbol"?t+"":t,n),n);let dy=class{constructor(){bo(this,"current",this.detect()),bo(this,"handoffState","pending"),bo(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},jn=new dy,En=(e,t)=>{jn.isServer?i.useEffect(e,t):i.useLayoutEffect(e,t)};function Bl(e){let t=i.useRef(e);return En(()=>{t.current=e},[e]),t}let wt=function(e){let t=Bl(e);return Ie.useCallback((...n)=>t.current(...n),[t])};function zl(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Gl(){let e=[],t={addEventListener(n,s,a,l){return n.addEventListener(s,a,l),t.add(()=>n.removeEventListener(s,a,l))},requestAnimationFrame(...n){let s=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(s))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let s=setTimeout(...n);return t.add(()=>clearTimeout(s))},microTask(...n){let s={current:!0};return zl(()=>{s.current&&n[0]()}),t.add(()=>{s.current=!1})},style(n,s,a){let l=n.style.getPropertyValue(s);return Object.assign(n.style,{[s]:a}),this.add(()=>{Object.assign(n.style,{[s]:l})})},group(n){let s=Gl();return n(s),this.add(()=>s.dispose())},add(n){return e.push(n),()=>{let s=e.indexOf(n);if(s>=0)for(let a of e.splice(s,1))a()}},dispose(){for(let n of e.splice(0))n()}};return t}function uy(){let[e]=i.useState(Gl);return i.useEffect(()=>()=>e.dispose(),[e]),e}function my(){let e=typeof document>"u";return"useSyncExternalStore"in Hr?(t=>t.useSyncExternalStore)(Hr)(()=>()=>{},()=>!1,()=>!e):!1}function Wl(){let e=my(),[t,n]=i.useState(jn.isHandoffComplete);return t&&jn.isHandoffComplete===!1&&n(!1),i.useEffect(()=>{t!==!0&&n(!0)},[t]),i.useEffect(()=>jn.handoff(),[]),e?!1:t}var Nu;let os=(Nu=Ie.useId)!=null?Nu:function(){let e=Wl(),[t,n]=Ie.useState(e?()=>jn.nextId():null);return En(()=>{t===null&&n(jn.nextId())},[t]),t!=null?""+t:void 0};function Zn(e,t,...n){if(e in t){let a=t[e];return typeof a=="function"?a(...n):a}let s=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(a=>`"${a}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,Zn),s}function wp(e){return jn.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}let Fi=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var lr=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(lr||{}),jp=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(jp||{}),fy=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(fy||{});function py(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Fi)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var Np=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(Np||{});function hy(e,t=0){var n;return e===((n=wp(e))==null?void 0:n.body)?!1:Zn(t,{0(){return e.matches(Fi)},1(){let s=e;for(;s!==null;){if(s.matches(Fi))return!0;s=s.parentElement}return!1}})}var xy=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(xy||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function pr(e){e==null||e.focus({preventScroll:!0})}let gy=["textarea","input"].join(",");function yy(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,gy))!=null?n:!1}function vy(e,t=n=>n){return e.slice().sort((n,s)=>{let a=t(n),l=t(s);if(a===null||l===null)return 0;let o=a.compareDocumentPosition(l);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Ha(e,t,{sorted:n=!0,relativeTo:s=null,skipElements:a=[]}={}){let l=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,o=Array.isArray(e)?n?vy(e):e:py(e);a.length>0&&o.length>1&&(o=o.filter(v=>!a.includes(v))),s=s??l.activeElement;let c=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,o.indexOf(s))-1;if(t&4)return Math.max(0,o.indexOf(s))+1;if(t&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=t&32?{preventScroll:!0}:{},f=0,m=o.length,h;do{if(f>=m||f+m<=0)return 0;let v=d+f;if(t&16)v=(v+m)%m;else{if(v<0)return 3;if(v>=m)return 1}h=o[v],h==null||h.focus(u),f+=c}while(h!==l.activeElement);return t&6&&yy(h)&&h.select(),2}function Sp(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function by(){return/Android/gi.test(window.navigator.userAgent)}function wy(){return Sp()||by()}function Pa(e,t,n){let s=Bl(t);i.useEffect(()=>{function a(l){s.current(l)}return document.addEventListener(e,a,n),()=>document.removeEventListener(e,a,n)},[e,n])}function kp(e,t,n){let s=Bl(t);i.useEffect(()=>{function a(l){s.current(l)}return window.addEventListener(e,a,n),()=>window.removeEventListener(e,a,n)},[e,n])}function jy(e,t,n=!0){let s=i.useRef(!1);i.useEffect(()=>{requestAnimationFrame(()=>{s.current=n})},[n]);function a(o,c){if(!s.current||o.defaultPrevented)return;let d=c(o);if(d===null||!d.getRootNode().contains(d)||!d.isConnected)return;let u=function f(m){return typeof m=="function"?f(m()):Array.isArray(m)||m instanceof Set?m:[m]}(e);for(let f of u){if(f===null)continue;let m=f instanceof HTMLElement?f:f.current;if(m!=null&&m.contains(d)||o.composed&&o.composedPath().includes(m))return}return!hy(d,Np.Loose)&&d.tabIndex!==-1&&o.preventDefault(),t(o,d)}let l=i.useRef(null);Pa("pointerdown",o=>{var c,d;s.current&&(l.current=((d=(c=o.composedPath)==null?void 0:c.call(o))==null?void 0:d[0])||o.target)},!0),Pa("mousedown",o=>{var c,d;s.current&&(l.current=((d=(c=o.composedPath)==null?void 0:c.call(o))==null?void 0:d[0])||o.target)},!0),Pa("click",o=>{wy()||l.current&&(a(o,()=>l.current),l.current=null)},!0),Pa("touchend",o=>a(o,()=>o.target instanceof HTMLElement?o.target:null),!0),kp("blur",o=>a(o,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function oa(...e){return i.useMemo(()=>wp(...e),[...e])}let Cp=Symbol();function Ny(e,t=!0){return Object.assign(e,{[Cp]:t})}function Ln(...e){let t=i.useRef(e);i.useEffect(()=>{t.current=e},[e]);let n=wt(s=>{for(let a of t.current)a!=null&&(typeof a=="function"?a(s):a.current=s)});return e.every(s=>s==null||(s==null?void 0:s[Cp]))?void 0:n}function ed(e,t){let n=i.useRef([]),s=wt(e);i.useEffect(()=>{let a=[...n.current];for(let[l,o]of t.entries())if(n.current[l]!==o){let c=s(t,a);return n.current=t,c}},[s,...t])}function Su(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}var _i=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(_i||{}),Sy=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Sy||{});function un({ourProps:e,theirProps:t,slot:n,defaultTag:s,features:a,visible:l=!0,name:o,mergeRefs:c}){c=c??ky;let d=Ep(t,e);if(l)return Ta(d,n,s,o,c);let u=a??0;if(u&2){let{static:f=!1,...m}=d;if(f)return Ta(m,n,s,o,c)}if(u&1){let{unmount:f=!0,...m}=d;return Zn(f?0:1,{0(){return null},1(){return Ta({...m,hidden:!0,style:{display:"none"}},n,s,o,c)}})}return Ta(d,n,s,o,c)}function Ta(e,t={},n,s,a){let{as:l=n,children:o,refName:c="ref",...d}=wo(e,["unmount","static"]),u=e.ref!==void 0?{[c]:e.ref}:{},f=typeof o=="function"?o(t):o;"className"in d&&d.className&&typeof d.className=="function"&&(d.className=d.className(t));let m={};if(t){let h=!1,v=[];for(let[b,y]of Object.entries(t))typeof y=="boolean"&&(h=!0),y===!0&&v.push(b);h&&(m["data-headlessui-state"]=v.join(" "))}if(l===i.Fragment&&Object.keys(ku(d)).length>0){if(!i.isValidElement(f)||Array.isArray(f)&&f.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${s} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(d).map(y=>`  - ${y}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(y=>`  - ${y}`).join(`
`)].join(`
`));let h=f.props,v=typeof(h==null?void 0:h.className)=="function"?(...y)=>Su(h==null?void 0:h.className(...y),d.className):Su(h==null?void 0:h.className,d.className),b=v?{className:v}:{};return i.cloneElement(f,Object.assign({},Ep(f.props,ku(wo(d,["ref"]))),m,u,{ref:a(f.ref,u.ref)},b))}return i.createElement(l,Object.assign({},wo(d,["ref"]),l!==i.Fragment&&u,l!==i.Fragment&&m),f)}function ky(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function Ep(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let s of e)for(let a in s)a.startsWith("on")&&typeof s[a]=="function"?(n[a]!=null||(n[a]=[]),n[a].push(s[a])):t[a]=s[a];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(n).map(s=>[s,void 0])));for(let s in n)Object.assign(t,{[s](a,...l){let o=n[s];for(let c of o){if((a instanceof Event||(a==null?void 0:a.nativeEvent)instanceof Event)&&a.defaultPrevented)return;c(a,...l)}}});return t}function mn(e){var t;return Object.assign(i.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function ku(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function wo(e,t=[]){let n=Object.assign({},e);for(let s of t)s in n&&delete n[s];return n}let Cy="div";var vl=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(vl||{});function Ey(e,t){var n;let{features:s=1,...a}=e,l={ref:t,"aria-hidden":(s&2)===2?!0:(n=a["aria-hidden"])!=null?n:void 0,hidden:(s&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(s&4)===4&&(s&2)!==2&&{display:"none"}}};return un({ourProps:l,theirProps:a,slot:{},defaultTag:Cy,name:"Hidden"})}let Bi=mn(Ey),Pp=i.createContext(null);Pp.displayName="OpenClosedContext";var ks=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(ks||{});function Py(){return i.useContext(Pp)}function Ty(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Dn=[];Ty(()=>{function e(t){t.target instanceof HTMLElement&&t.target!==document.body&&Dn[0]!==t.target&&(Dn.unshift(t.target),Dn=Dn.filter(n=>n!=null&&n.isConnected),Dn.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function Ry(e){let t=e.parentElement,n=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(n=t),t=t.parentElement;let s=(t==null?void 0:t.getAttribute("disabled"))==="";return s&&Ly(n)?!1:s}function Ly(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}var Tp=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(Tp||{});function Rp(e,t,n,s){let a=Bl(n);i.useEffect(()=>{e=e??window;function l(o){a.current(o)}return e.addEventListener(t,l,s),()=>e.removeEventListener(t,l,s)},[e,t,s])}function Lp(){let e=i.useRef(!1);return En(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function Ap(e){let t=wt(e),n=i.useRef(!1);i.useEffect(()=>(n.current=!1,()=>{n.current=!0,zl(()=>{n.current&&t()})}),[t])}var Cs=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Cs||{});function Ay(){let e=i.useRef(0);return kp("keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function $p(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)n.current instanceof HTMLElement&&t.add(n.current);return t}let $y="div";var Ip=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(Ip||{});function Iy(e,t){let n=i.useRef(null),s=Ln(n,t),{initialFocus:a,containers:l,features:o=30,...c}=e;Wl()||(o=1);let d=oa(n);Dy({ownerDocument:d},!!(o&16));let u=Oy({ownerDocument:d,container:n,initialFocus:a},!!(o&2));Fy({ownerDocument:d,container:n,containers:l,previousActiveElement:u},!!(o&8));let f=Ay(),m=wt(y=>{let C=n.current;C&&(x=>x())(()=>{Zn(f.current,{[Cs.Forwards]:()=>{Ha(C,lr.First,{skipElements:[y.relatedTarget]})},[Cs.Backwards]:()=>{Ha(C,lr.Last,{skipElements:[y.relatedTarget]})}})})}),h=uy(),v=i.useRef(!1),b={ref:s,onKeyDown(y){y.key=="Tab"&&(v.current=!0,h.requestAnimationFrame(()=>{v.current=!1}))},onBlur(y){let C=$p(l);n.current instanceof HTMLElement&&C.add(n.current);let x=y.relatedTarget;x instanceof HTMLElement&&x.dataset.headlessuiFocusGuard!=="true"&&(Up(C,x)||(v.current?Ha(n.current,Zn(f.current,{[Cs.Forwards]:()=>lr.Next,[Cs.Backwards]:()=>lr.Previous})|lr.WrapAround,{relativeTo:y.target}):y.target instanceof HTMLElement&&pr(y.target)))}};return Ie.createElement(Ie.Fragment,null,!!(o&4)&&Ie.createElement(Bi,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:m,features:vl.Focusable}),un({ourProps:b,theirProps:c,defaultTag:$y,name:"FocusTrap"}),!!(o&4)&&Ie.createElement(Bi,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:m,features:vl.Focusable}))}let Uy=mn(Iy),gs=Object.assign(Uy,{features:Ip});function My(e=!0){let t=i.useRef(Dn.slice());return ed(([n],[s])=>{s===!0&&n===!1&&zl(()=>{t.current.splice(0)}),s===!1&&n===!0&&(t.current=Dn.slice())},[e,Dn,t]),wt(()=>{var n;return(n=t.current.find(s=>s!=null&&s.isConnected))!=null?n:null})}function Dy({ownerDocument:e},t){let n=My(t);ed(()=>{t||(e==null?void 0:e.activeElement)===(e==null?void 0:e.body)&&pr(n())},[t]),Ap(()=>{t&&pr(n())})}function Oy({ownerDocument:e,container:t,initialFocus:n},s){let a=i.useRef(null),l=Lp();return ed(()=>{if(!s)return;let o=t.current;o&&zl(()=>{if(!l.current)return;let c=e==null?void 0:e.activeElement;if(n!=null&&n.current){if((n==null?void 0:n.current)===c){a.current=c;return}}else if(o.contains(c)){a.current=c;return}n!=null&&n.current?pr(n.current):Ha(o,lr.First)===jp.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),a.current=e==null?void 0:e.activeElement})},[s]),a}function Fy({ownerDocument:e,container:t,containers:n,previousActiveElement:s},a){let l=Lp();Rp(e==null?void 0:e.defaultView,"focus",o=>{if(!a||!l.current)return;let c=$p(n);t.current instanceof HTMLElement&&c.add(t.current);let d=s.current;if(!d)return;let u=o.target;u&&u instanceof HTMLElement?Up(c,u)?(s.current=u,pr(u)):(o.preventDefault(),o.stopPropagation(),pr(d)):pr(s.current)},!0)}function Up(e,t){for(let n of e)if(n.contains(t))return!0;return!1}let Mp=i.createContext(!1);function _y(){return i.useContext(Mp)}function zi(e){return Ie.createElement(Mp.Provider,{value:e.force},e.children)}function By(e){let t=_y(),n=i.useContext(Dp),s=oa(e),[a,l]=i.useState(()=>{if(!t&&n!==null||jn.isServer)return null;let o=s==null?void 0:s.getElementById("headlessui-portal-root");if(o)return o;if(s===null)return null;let c=s.createElement("div");return c.setAttribute("id","headlessui-portal-root"),s.body.appendChild(c)});return i.useEffect(()=>{a!==null&&(s!=null&&s.body.contains(a)||s==null||s.body.appendChild(a))},[a,s]),i.useEffect(()=>{t||n!==null&&l(n.current)},[n,l,t]),a}let zy=i.Fragment;function Gy(e,t){let n=e,s=i.useRef(null),a=Ln(Ny(f=>{s.current=f}),t),l=oa(s),o=By(s),[c]=i.useState(()=>{var f;return jn.isServer?null:(f=l==null?void 0:l.createElement("div"))!=null?f:null}),d=i.useContext(Gi),u=Wl();return En(()=>{!o||!c||o.contains(c)||(c.setAttribute("data-headlessui-portal",""),o.appendChild(c))},[o,c]),En(()=>{if(c&&d)return d.register(c)},[d,c]),Ap(()=>{var f;!o||!c||(c instanceof Node&&o.contains(c)&&o.removeChild(c),o.childNodes.length<=0&&((f=o.parentElement)==null||f.removeChild(o)))}),u?!o||!c?null:sp.createPortal(un({ourProps:{ref:a},theirProps:n,defaultTag:zy,name:"Portal"}),c):null}let Wy=i.Fragment,Dp=i.createContext(null);function Hy(e,t){let{target:n,...s}=e,a={ref:Ln(t)};return Ie.createElement(Dp.Provider,{value:n},un({ourProps:a,theirProps:s,defaultTag:Wy,name:"Popover.Group"}))}let Gi=i.createContext(null);function Ky(){let e=i.useContext(Gi),t=i.useRef([]),n=wt(l=>(t.current.push(l),e&&e.register(l),()=>s(l))),s=wt(l=>{let o=t.current.indexOf(l);o!==-1&&t.current.splice(o,1),e&&e.unregister(l)}),a=i.useMemo(()=>({register:n,unregister:s,portals:t}),[n,s,t]);return[t,i.useMemo(()=>function({children:l}){return Ie.createElement(Gi.Provider,{value:a},l)},[a])]}let Vy=mn(Gy),qy=mn(Hy),Wi=Object.assign(Vy,{Group:qy});function Jy(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}const Yy=typeof Object.is=="function"?Object.is:Jy,{useState:Qy,useEffect:Zy,useLayoutEffect:Xy,useDebugValue:ev}=Hr;function tv(e,t,n){const s=t(),[{inst:a},l]=Qy({inst:{value:s,getSnapshot:t}});return Xy(()=>{a.value=s,a.getSnapshot=t,jo(a)&&l({inst:a})},[e,s,t]),Zy(()=>(jo(a)&&l({inst:a}),e(()=>{jo(a)&&l({inst:a})})),[e]),ev(s),s}function jo(e){const t=e.getSnapshot,n=e.value;try{const s=t();return!Yy(n,s)}catch{return!0}}function nv(e,t,n){return t()}const rv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",sv=!rv,av=sv?nv:tv,lv="useSyncExternalStore"in Hr?(e=>e.useSyncExternalStore)(Hr):av;function ov(e){return lv(e.subscribe,e.getSnapshot,e.getSnapshot)}function iv(e,t){let n=e(),s=new Set;return{getSnapshot(){return n},subscribe(a){return s.add(a),()=>s.delete(a)},dispatch(a,...l){let o=t[a].call(n,...l);o&&(n=o,s.forEach(c=>c()))}}}function cv(){let e;return{before({doc:t}){var n;let s=t.documentElement;e=((n=t.defaultView)!=null?n:window).innerWidth-s.clientWidth},after({doc:t,d:n}){let s=t.documentElement,a=s.clientWidth-s.offsetWidth,l=e-a;n.style(s,"paddingRight",`${l}px`)}}}function dv(){return Sp()?{before({doc:e,d:t,meta:n}){function s(a){return n.containers.flatMap(l=>l()).some(l=>l.contains(a))}t.microTask(()=>{var a;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let c=Gl();c.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>c.dispose()))}let l=(a=window.scrollY)!=null?a:window.pageYOffset,o=null;t.addEventListener(e,"click",c=>{if(c.target instanceof HTMLElement)try{let d=c.target.closest("a");if(!d)return;let{hash:u}=new URL(d.href),f=e.querySelector(u);f&&!s(f)&&(o=f)}catch{}},!0),t.addEventListener(e,"touchstart",c=>{if(c.target instanceof HTMLElement)if(s(c.target)){let d=c.target;for(;d.parentElement&&s(d.parentElement);)d=d.parentElement;t.style(d,"overscrollBehavior","contain")}else t.style(c.target,"touchAction","none")}),t.addEventListener(e,"touchmove",c=>{if(c.target instanceof HTMLElement)if(s(c.target)){let d=c.target;for(;d.parentElement&&d.dataset.headlessuiPortal!==""&&!(d.scrollHeight>d.clientHeight||d.scrollWidth>d.clientWidth);)d=d.parentElement;d.dataset.headlessuiPortal===""&&c.preventDefault()}else c.preventDefault()},{passive:!1}),t.add(()=>{var c;let d=(c=window.scrollY)!=null?c:window.pageYOffset;l!==d&&window.scrollTo(0,l),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function uv(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function mv(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let dr=iv(()=>new Map,{PUSH(e,t){var n;let s=(n=this.get(e))!=null?n:{doc:e,count:0,d:Gl(),meta:new Set};return s.count++,s.meta.add(t),this.set(e,s),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let s={doc:e,d:t,meta:mv(n)},a=[dv(),cv(),uv()];a.forEach(({before:l})=>l==null?void 0:l(s)),a.forEach(({after:l})=>l==null?void 0:l(s))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});dr.subscribe(()=>{let e=dr.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let s=t.get(n.doc)==="hidden",a=n.count!==0;(a&&!s||!a&&s)&&dr.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&dr.dispatch("TEARDOWN",n)}});function fv(e,t,n){let s=ov(dr),a=e?s.get(e):void 0,l=a?a.count>0:!1;return En(()=>{if(!(!e||!t))return dr.dispatch("PUSH",e,n),()=>dr.dispatch("POP",e,n)},[t,e]),l}let No=new Map,ys=new Map;function Cu(e,t=!0){En(()=>{var n;if(!t)return;let s=typeof e=="function"?e():e.current;if(!s)return;function a(){var o;if(!s)return;let c=(o=ys.get(s))!=null?o:1;if(c===1?ys.delete(s):ys.set(s,c-1),c!==1)return;let d=No.get(s);d&&(d["aria-hidden"]===null?s.removeAttribute("aria-hidden"):s.setAttribute("aria-hidden",d["aria-hidden"]),s.inert=d.inert,No.delete(s))}let l=(n=ys.get(s))!=null?n:0;return ys.set(s,l+1),l!==0||(No.set(s,{"aria-hidden":s.getAttribute("aria-hidden"),inert:s.inert}),s.setAttribute("aria-hidden","true"),s.inert=!0),a},[e,t])}function pv({defaultContainers:e=[],portals:t,mainTreeNodeRef:n}={}){var s;let a=i.useRef((s=n==null?void 0:n.current)!=null?s:null),l=oa(a),o=wt(()=>{var c,d,u;let f=[];for(let m of e)m!==null&&(m instanceof HTMLElement?f.push(m):"current"in m&&m.current instanceof HTMLElement&&f.push(m.current));if(t!=null&&t.current)for(let m of t.current)f.push(m);for(let m of(c=l==null?void 0:l.querySelectorAll("html > *, body > *"))!=null?c:[])m!==document.body&&m!==document.head&&m instanceof HTMLElement&&m.id!=="headlessui-portal-root"&&(m.contains(a.current)||m.contains((u=(d=a.current)==null?void 0:d.getRootNode())==null?void 0:u.host)||f.some(h=>m.contains(h))||f.push(m));return f});return{resolveContainers:o,contains:wt(c=>o().some(d=>d.contains(c))),mainTreeNodeRef:a,MainTreeNode:i.useMemo(()=>function(){return n!=null?null:Ie.createElement(Bi,{features:vl.Hidden,ref:a})},[a,n])}}let td=i.createContext(()=>{});td.displayName="StackContext";var Hi=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(Hi||{});function hv(){return i.useContext(td)}function xv({children:e,onUpdate:t,type:n,element:s,enabled:a}){let l=hv(),o=wt((...c)=>{t==null||t(...c),l(...c)});return En(()=>{let c=a===void 0||a===!0;return c&&o(0,n,s),()=>{c&&o(1,n,s)}},[o,n,s,a]),Ie.createElement(td.Provider,{value:o},e)}let Op=i.createContext(null);function Fp(){let e=i.useContext(Op);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Fp),t}return e}function gv(){let[e,t]=i.useState([]);return[e.length>0?e.join(" "):void 0,i.useMemo(()=>function(n){let s=wt(l=>(t(o=>[...o,l]),()=>t(o=>{let c=o.slice(),d=c.indexOf(l);return d!==-1&&c.splice(d,1),c}))),a=i.useMemo(()=>({register:s,slot:n.slot,name:n.name,props:n.props}),[s,n.slot,n.name,n.props]);return Ie.createElement(Op.Provider,{value:a},n.children)},[t])]}let yv="p";function vv(e,t){let n=os(),{id:s=`headlessui-description-${n}`,...a}=e,l=Fp(),o=Ln(t);En(()=>l.register(s),[s,l.register]);let c={ref:o,...l.props,id:s};return un({ourProps:c,theirProps:a,slot:l.slot||{},defaultTag:yv,name:l.name||"Description"})}let bv=mn(vv),wv=Object.assign(bv,{});var jv=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(jv||{}),Nv=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(Nv||{});let Sv={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},bl=i.createContext(null);bl.displayName="DialogContext";function ia(e){let t=i.useContext(bl);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ia),n}return t}function kv(e,t,n=()=>[document.body]){fv(e,t,s=>{var a;return{containers:[...(a=s.containers)!=null?a:[],n]}})}function Cv(e,t){return Zn(t.type,Sv,e,t)}let Ev="div",Pv=_i.RenderStrategy|_i.Static;function Tv(e,t){let n=os(),{id:s=`headlessui-dialog-${n}`,open:a,onClose:l,initialFocus:o,role:c="dialog",__demoMode:d=!1,...u}=e,[f,m]=i.useState(0),h=i.useRef(!1);c=function(){return c==="dialog"||c==="alertdialog"?c:(h.current||(h.current=!0,console.warn(`Invalid role [${c}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let v=Py();a===void 0&&v!==null&&(a=(v&ks.Open)===ks.Open);let b=i.useRef(null),y=Ln(b,t),C=oa(b),x=e.hasOwnProperty("open")||v!==null,p=e.hasOwnProperty("onClose");if(!x&&!p)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!x)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!p)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(typeof a!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${a}`);if(typeof l!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${l}`);let g=a?0:1,[j,w]=i.useReducer(Cv,{titleId:null,descriptionId:null,panelRef:i.createRef()}),E=wt(()=>l(!1)),$=wt(N=>w({type:0,id:N})),R=Wl()?d?!1:g===0:!1,H=f>1,O=i.useContext(bl)!==null,[q,W]=Ky(),se={get current(){var N;return(N=j.panelRef.current)!=null?N:b.current}},{resolveContainers:J,mainTreeNodeRef:V,MainTreeNode:ie}=pv({portals:q,defaultContainers:[se]}),pe=H?"parent":"leaf",S=v!==null?(v&ks.Closing)===ks.Closing:!1,P=O||S?!1:R,I=i.useCallback(()=>{var N,T;return(T=Array.from((N=C==null?void 0:C.querySelectorAll("body > *"))!=null?N:[]).find(G=>G.id==="headlessui-portal-root"?!1:G.contains(V.current)&&G instanceof HTMLElement))!=null?T:null},[V]);Cu(I,P);let B=H?!0:R,k=i.useCallback(()=>{var N,T;return(T=Array.from((N=C==null?void 0:C.querySelectorAll("[data-headlessui-portal]"))!=null?N:[]).find(G=>G.contains(V.current)&&G instanceof HTMLElement))!=null?T:null},[V]);Cu(k,B),jy(J,N=>{N.preventDefault(),E()},!(!R||H));let ne=!(H||g!==0);Rp(C==null?void 0:C.defaultView,"keydown",N=>{ne&&(N.defaultPrevented||N.key===Tp.Escape&&(N.preventDefault(),N.stopPropagation(),E()))}),kv(C,!(S||g!==0||O),J),i.useEffect(()=>{if(g!==0||!b.current)return;let N=new ResizeObserver(T=>{for(let G of T){let Y=G.target.getBoundingClientRect();Y.x===0&&Y.y===0&&Y.width===0&&Y.height===0&&E()}});return N.observe(b.current),()=>N.disconnect()},[g,b,E]);let[z,U]=gv(),M=i.useMemo(()=>[{dialogState:g,close:E,setTitleId:$},j],[g,j,E,$]),F=i.useMemo(()=>({open:g===0}),[g]),Z={ref:y,id:s,role:c,"aria-modal":g===0?!0:void 0,"aria-labelledby":j.titleId,"aria-describedby":z};return Ie.createElement(xv,{type:"Dialog",enabled:g===0,element:b,onUpdate:wt((N,T)=>{T==="Dialog"&&Zn(N,{[Hi.Add]:()=>m(G=>G+1),[Hi.Remove]:()=>m(G=>G-1)})})},Ie.createElement(zi,{force:!0},Ie.createElement(Wi,null,Ie.createElement(bl.Provider,{value:M},Ie.createElement(Wi.Group,{target:b},Ie.createElement(zi,{force:!1},Ie.createElement(U,{slot:F,name:"Dialog.Description"},Ie.createElement(gs,{initialFocus:o,containers:J,features:R?Zn(pe,{parent:gs.features.RestoreFocus,leaf:gs.features.All&~gs.features.FocusLock}):gs.features.None},Ie.createElement(W,null,un({ourProps:Z,theirProps:u,slot:F,defaultTag:Ev,features:Pv,visible:g===0,name:"Dialog"}))))))))),Ie.createElement(ie,null))}let Rv="div";function Lv(e,t){let n=os(),{id:s=`headlessui-dialog-overlay-${n}`,...a}=e,[{dialogState:l,close:o}]=ia("Dialog.Overlay"),c=Ln(t),d=wt(f=>{if(f.target===f.currentTarget){if(Ry(f.currentTarget))return f.preventDefault();f.preventDefault(),f.stopPropagation(),o()}}),u=i.useMemo(()=>({open:l===0}),[l]);return un({ourProps:{ref:c,id:s,"aria-hidden":!0,onClick:d},theirProps:a,slot:u,defaultTag:Rv,name:"Dialog.Overlay"})}let Av="div";function $v(e,t){let n=os(),{id:s=`headlessui-dialog-backdrop-${n}`,...a}=e,[{dialogState:l},o]=ia("Dialog.Backdrop"),c=Ln(t);i.useEffect(()=>{if(o.panelRef.current===null)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")},[o.panelRef]);let d=i.useMemo(()=>({open:l===0}),[l]);return Ie.createElement(zi,{force:!0},Ie.createElement(Wi,null,un({ourProps:{ref:c,id:s,"aria-hidden":!0},theirProps:a,slot:d,defaultTag:Av,name:"Dialog.Backdrop"})))}let Iv="div";function Uv(e,t){let n=os(),{id:s=`headlessui-dialog-panel-${n}`,...a}=e,[{dialogState:l},o]=ia("Dialog.Panel"),c=Ln(t,o.panelRef),d=i.useMemo(()=>({open:l===0}),[l]),u=wt(f=>{f.stopPropagation()});return un({ourProps:{ref:c,id:s,onClick:u},theirProps:a,slot:d,defaultTag:Iv,name:"Dialog.Panel"})}let Mv="h2";function Dv(e,t){let n=os(),{id:s=`headlessui-dialog-title-${n}`,...a}=e,[{dialogState:l,setTitleId:o}]=ia("Dialog.Title"),c=Ln(t);i.useEffect(()=>(o(s),()=>o(null)),[s,o]);let d=i.useMemo(()=>({open:l===0}),[l]);return un({ourProps:{ref:c,id:s},theirProps:a,slot:d,defaultTag:Mv,name:"Dialog.Title"})}let Ov=mn(Tv),Fv=mn($v),_v=mn(Uv),Bv=mn(Lv),zv=mn(Dv),hr=Object.assign(Ov,{Backdrop:Fv,Panel:_v,Overlay:Bv,Title:zv,Description:wv});function Gv(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Eu=()=>{const{user:e,refreshAuth:t}=Ae(),{impersonation:n,setImpersonation:s,clearImpersonation:a}=Hc(),[l,o]=i.useState(!1),[c,d]=i.useState([]),[u,f]=i.useState([]),[m,h]=i.useState(!1),[v,b]=i.useState(null),y=Gv();if(i.useEffect(()=>{var w;if(!l||!y||!((w=window.auth)!=null&&w.getAccessToken))return;h(!0),b(null),(async()=>{try{const[E,$]=await Promise.all([Q(`${y}/admin/users?limit=100`),Q(`${y}/admin/roles`)]),R=E.ok?await E.json():null,H=$.ok?await $.json():null;if(!E.ok)throw new Error("Failed to load users");if(!$.ok)throw new Error("Failed to load roles");d((R==null?void 0:R.users)??[]),f((H==null?void 0:H.roles)??[])}catch(E){b((E==null?void 0:E.message)??"Failed to load")}finally{h(!1)}})()},[l,y]),(e==null?void 0:e.role)!=="superadmin")return null;const C=g=>{s({type:"user",id:g.username,label:g.email||g.username}),o(!1),t()},x=g=>{s({type:"role",id:g.name,label:g.name}),o(!1),t()},p=()=>{a(),o(!1),t()};return r.jsxs(r.Fragment,{children:[r.jsxs("button",{type:"button",onClick:()=>o(!0),className:"flex items-center gap-1.5 rounded-md px-2 py-1.5 text-xs font-medium text-amber-200 hover:bg-amber-500/20",title:"Impersonate user or role",children:[r.jsx(ey,{className:"h-4 w-4"}),n?"Change":"Impersonate"]}),r.jsxs(hr,{open:l,onClose:()=>o(!1),className:"relative z-50",children:[r.jsx("div",{className:"fixed inset-0 bg-black/60","aria-hidden":"true"}),r.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:r.jsxs(hr.Panel,{className:"mx-auto max-h-[80vh] w-full max-w-md overflow-y-auto rounded-xl border border-slate-700 bg-slate-900 p-4 shadow-xl",children:[r.jsx(hr.Title,{className:"text-lg font-semibold text-slate-100",children:"User impersonation"}),r.jsx("p",{className:"mt-1 text-sm text-slate-400",children:"View the site as another user or a defined role."}),v&&r.jsx("div",{className:"mt-2 rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:v}),m?r.jsx("p",{className:"mt-4 text-sm text-slate-500",children:"Loading"}):r.jsxs("div",{className:"mt-4 space-y-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-slate-300",children:"Users"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Superadmins cannot be impersonated."}),r.jsxs("ul",{className:"mt-2 max-h-40 overflow-y-auto space-y-1",children:[c.map(g=>r.jsx("li",{children:r.jsx("button",{type:"button",onClick:()=>C(g),className:"w-full rounded-md px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:g.email||g.username})},g.username)),c.length===0&&r.jsx("li",{className:"px-3 py-2 text-sm text-slate-500",children:"No users"})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-slate-300",children:"Roles"}),r.jsxs("ul",{className:"mt-2 max-h-40 overflow-y-auto space-y-1",children:[u.map(g=>r.jsx("li",{children:r.jsx("button",{type:"button",onClick:()=>x(g),className:"w-full rounded-md px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:g.name})},g.name)),u.length===0&&r.jsx("li",{className:"px-3 py-2 text-sm text-slate-500",children:"No roles defined"})]})]}),n&&r.jsx("button",{type:"button",onClick:p,className:"rounded-md border border-slate-600 px-3 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Stop impersonating"})]})]})})]})]})},So=({isActive:e})=>`transition-colors duration-200 ${e?"text-primary-400 font-semibold":"text-slate-300 hover:text-white"}`;function Wv(){const{user:e,isLoading:t,signOut:n}=Ae(),{logo:s,siteName:a}=Yc(),[l,o]=i.useState(!1),[c,d]=i.useState(!1),u=ly(e),m=bp(e).length>0;i.useEffect(()=>{const b=()=>d(window.scrollY>20);return window.addEventListener("scroll",b),()=>window.removeEventListener("scroll",b)},[]);const h=()=>{n(),o(!1)},v=[...u.map(b=>({path:b.path,label:b.label})),...m?[{path:"/admin",label:"Admin"}]:[]];return r.jsxs("header",{className:`sticky top-0 z-50 transition-all duration-300 ${c?"bg-slate-950/95 backdrop-blur-sm shadow-lg":"bg-slate-950"}`,children:[r.jsx(oy,{}),r.jsxs("nav",{className:"container-max flex items-center justify-between py-3",children:[r.jsxs(ce,{to:"/",className:"flex items-center gap-2 shrink-0",children:[s?r.jsx("img",{src:s.url,alt:s.alt,className:"h-8 w-auto rounded-md border border-slate-700 object-contain"}):r.jsx("div",{className:"h-8 w-8 rounded-md border border-slate-700 bg-gradient-to-br from-brand-orange to-brand-navy"}),r.jsx("span",{className:"text-sm font-semibold tracking-[0.2em] uppercase text-slate-100 hidden sm:inline",children:a})]}),r.jsxs("div",{className:"hidden md:flex items-center gap-4 lg:gap-6 text-sm font-medium",children:[u.map(b=>r.jsx(Ca,{to:b.path,className:So,children:b.label},b.path)),m&&r.jsx(Ca,{to:"/admin",className:So,children:"Admin"}),e?r.jsxs("div",{className:"flex items-center gap-3 ml-2 pl-4 border-l border-slate-700",children:[r.jsx(Eu,{}),r.jsx("span",{className:"text-xs text-slate-400 hidden lg:inline truncate max-w-[140px]",children:e.email}),r.jsx(Ca,{to:"/profile",className:So,children:"Profile"}),r.jsx("button",{onClick:h,className:"text-slate-400 hover:text-red-400 transition-colors text-xs font-medium",children:"Sign out"})]}):t?r.jsx("span",{className:"text-xs text-slate-500",children:"Loading..."}):r.jsx(ce,{to:"/auth",className:"btn-primary text-xs !px-4 !py-1.5 ml-2",children:"Sign in"})]}),r.jsxs("div",{className:"flex md:hidden items-center gap-2",children:[e&&r.jsx(Eu,{}),r.jsx("button",{type:"button",onClick:()=>o(!l),className:"p-2 text-slate-300 hover:text-white rounded-md hover:bg-slate-800","aria-label":l?"Close menu":"Open menu",children:l?r.jsx(_l,{className:"w-6 h-6"}):r.jsx(Qc,{className:"w-6 h-6"})})]})]}),l&&r.jsx("div",{className:"md:hidden border-t border-slate-800 bg-slate-950/95 backdrop-blur-sm",children:r.jsxs("div",{className:"container-max py-4 space-y-1",children:[v.map(b=>r.jsx(Ca,{to:b.path,className:({isActive:y})=>`block px-3 py-2.5 rounded-md transition-colors ${y?"bg-slate-800 text-primary-400 font-medium":"text-slate-300 hover:bg-slate-800 hover:text-white"}`,onClick:()=>o(!1),children:b.label},b.path)),e&&r.jsx("button",{onClick:h,className:"block w-full text-left px-3 py-2.5 rounded-md text-red-400 hover:bg-slate-800 transition-colors font-medium",children:"Sign out"}),!e&&!t&&r.jsx(ce,{to:"/auth",className:"block px-3 py-2.5 rounded-md text-primary-400 hover:bg-slate-800 font-medium",onClick:()=>o(!1),children:"Sign in"})]})})]})}function Hv(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Pu=160,Tu=16,Kv=2,Vv=()=>{const{user:e}=Ae(),t=Kc(e),n=yl(e),[s,a]=i.useState([]),[l,o]=i.useState(4),c=i.useRef(null),[d,u]=i.useState(null);i.useEffect(()=>{const h=Hv();if(!h)return;let v=!1;return fetch(`${h}/memes/cache?limit=20`).then(b=>b.ok?b.json():Promise.reject()).then(b=>{v||a(b.memes??[])}).catch(()=>{}),()=>{v=!0}},[]),i.useEffect(()=>{const h=c.current;if(!h)return;const v=()=>{const y=h.clientWidth;o(Math.max(1,Math.floor((y+Tu)/(Pu+Tu))))};v();const b=new ResizeObserver(()=>v());return b.observe(h),()=>b.disconnect()},[s.length]);const f=s.slice(0,l*Kv),m=async h=>{try{await navigator.clipboard.writeText(h),u(h),setTimeout(()=>u(null),2e3)}catch{}};return r.jsxs("div",{className:"space-y-8",children:[r.jsxs("section",{className:"relative overflow-hidden rounded-2xl border border-slate-800 bg-gradient-to-br from-brand-orange/20 via-brand-navy/10 to-brand-teal/20 px-6 py-10",children:[r.jsxs("div",{className:"max-w-xl space-y-4",children:[r.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-slate-200",children:"Shared internet intelligence"}),r.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold tracking-tight text-slate-50",children:"Discover, rate, and enrich the sites that matter."}),r.jsx("p",{className:"text-sm text-slate-100/80",children:"Funkedupshift is a living index of websites, media, and experiments  curated by admins, enriched by everyone."}),r.jsxs("div",{className:"flex flex-wrap gap-3 pt-2",children:[r.jsx(ce,{to:"/websites",className:"inline-flex items-center rounded-full border border-slate-500/60 px-4 py-2 text-sm font-semibold text-slate-100 hover:border-slate-300/80",children:"Browse websites"}),r.jsx(ce,{to:"/media",className:"inline-flex items-center rounded-full border border-slate-500/60 px-4 py-2 text-sm font-semibold text-slate-100 hover:border-slate-300/80",children:"Explore media"}),r.jsx(ce,{to:"/internet-dashboard",className:"inline-flex items-center rounded-full border border-slate-500/60 px-4 py-2 text-sm font-semibold text-slate-100 hover:border-slate-300/80",children:"Internet Dashboard"}),t&&r.jsx(ce,{to:"/squash",className:"inline-flex items-center rounded-full border border-slate-500/60 px-4 py-2 text-sm font-semibold text-slate-100 hover:border-slate-300/80",children:"Squash"}),n&&r.jsx(ce,{to:"/memes",className:"inline-flex items-center rounded-full border border-slate-500/60 px-4 py-2 text-sm font-semibold text-slate-100 hover:border-slate-300/80",children:"Memes"})]})]}),r.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 w-1/2 opacity-60",children:r.jsx("div",{className:"absolute -inset-24 bg-[radial-gradient(circle_at_top,_#f97316_0,_transparent_55%),radial-gradient(circle_at_bottom,_#06d6a0_0,_transparent_55%)]"})})]}),s.length>0&&r.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wider text-slate-400",children:"Latest Memes"}),r.jsx(ce,{to:"/memes",className:"text-xs text-brand-orange hover:text-orange-400",children:"View all "})]}),r.jsx("div",{ref:c,className:"grid gap-4",style:{gridTemplateColumns:`repeat(auto-fill, minmax(${Pu}px, 1fr))`},children:f.map(h=>{const v=h.thumbnailUrl||h.mediaUrl,b=h.title||"Untitled",y=d===h.mediaUrl;return r.jsxs("div",{className:"group rounded-lg border border-slate-800 bg-slate-900/60 overflow-hidden flex flex-col",children:[r.jsx(ce,{to:`/memes/${encodeURIComponent(h.PK)}`,className:"block aspect-square overflow-hidden bg-slate-900",children:v?r.jsx("img",{src:v,alt:b,className:"h-full w-full object-cover transition-transform group-hover:scale-105",onError:C=>{C.currentTarget.style.visibility="hidden"}}):r.jsx("div",{className:"flex h-full items-center justify-center text-2xl text-slate-600",children:""})}),r.jsxs("div",{className:"p-2 space-y-1 flex-1 flex flex-col",children:[r.jsx(ce,{to:`/memes/${encodeURIComponent(h.PK)}`,className:"block truncate text-xs font-medium text-slate-200 hover:text-brand-orange",children:b}),r.jsxs("div",{className:"flex items-center justify-between mt-auto pt-1",children:[typeof h.averageRating=="number"?r.jsxs("span",{className:"text-[11px] text-amber-300",children:[h.averageRating.toFixed(1),""]}):r.jsx("span",{}),h.mediaUrl&&r.jsx("button",{type:"button",onClick:()=>m(h.mediaUrl),className:"inline-flex items-center gap-1 text-[10px] text-slate-500 hover:text-slate-300 transition-colors",title:"Copy media URL",children:y?r.jsx("span",{className:"text-emerald-400",children:" Copied"}):r.jsxs(r.Fragment,{children:[r.jsx(Zc,{className:"h-3 w-3"}),r.jsx("span",{children:"Copy URL"})]})})]})]})]},h.PK)})})]}),r.jsxs("section",{className:"grid gap-4 sm:grid-cols-3",children:[r.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[r.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.22em] text-slate-500 mb-2",children:"Everyone"}),r.jsx("p",{className:"text-sm text-slate-200",children:"Browse all sites and media without signing in. Ratings and metadata are public by design."})]}),r.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[r.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.22em] text-slate-500 mb-2",children:"Users"}),r.jsx("p",{className:"text-sm text-slate-200",children:"Sign in to rate sites, add notes, and personalize your view of the internet."})]}),r.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[r.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.22em] text-slate-500 mb-2",children:"Admins"}),r.jsx("p",{className:"text-sm text-slate-200",children:"Curate the corpus, manage categories and groups, and control branding from a single admin surface."})]})]})]})};function ko(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Co=10,qv=()=>{const{user:e}=Ae(),[t,n]=qt(),[s,a]=i.useState([]),[l,o]=i.useState(()=>t.get("q")??""),[c,d]=i.useState(()=>{const S=t.get("categoryIds");return S?S.split(",").filter(Boolean):[]}),[u,f]=i.useState(()=>t.get("categoryMode")==="or"?"or":"and"),[m,h]=i.useState(!1),[v,b]=i.useState(""),[y,C]=i.useState("avgDesc"),[x,p]=i.useState(1),[g,j]=i.useState(!1),[w,E]=i.useState(null),$=!!e,R=i.useRef(null),[H,O]=i.useState([]);i.useEffect(()=>{const S=ko();if(!S)return;let P=!1;return at(`${S}/categories`).then(I=>I.ok?I.json():Promise.reject(new Error("Failed to load categories"))).then(I=>{if(P)return;const B=(I.categories??[]).map(k=>({id:k.PK||k.id||"",name:k.name||k.PK||""}));B.sort((k,K)=>(k.name||"").localeCompare(K.name||"")),O(B)}).catch(()=>{}),()=>{P=!0}},[]);const q=i.useMemo(()=>{if(u==="or"&&H.length>0)return H;const S=new Map;s.forEach(I=>(I.categories||[]).forEach(B=>{B.id&&!S.has(B.id)&&S.set(B.id,B)}));const P=[...H];return S.forEach(I=>{P.some(B=>B.id===I.id)||P.push(I)}),P.sort((I,B)=>(I.name||"").localeCompare(B.name||"")),P},[H,u,s]),W=i.useMemo(()=>q.filter(S=>!c.includes(S.id)&&(!v.trim()||(S.name||"").toLowerCase().includes(v.toLowerCase()))),[q,c,v]),se=l.trim().length>0||c.length>0;i.useEffect(()=>{if(se){const S=new URLSearchParams;l.trim()&&S.set("q",l.trim()),c.length&&(S.set("categoryIds",c.join(",")),S.set("categoryMode",u)),n(S,{replace:!0})}else n({},{replace:!0})},[se,l,c,u,n]),i.useEffect(()=>{if(!se){a([]),p(1),j(!1),E(null);return}const S=ko();if(!S){E("API URL not set. Deploy via CI or set window.API_BASE_URL in config.js.");return}let P=!1;async function I(){j(!0),E(null);try{const B=new URLSearchParams;B.set("limit","100"),l.trim()&&B.set("q",l.trim()),c.length>0&&(B.set("categoryIds",c.join(",")),B.set("categoryMode",u));const k=await at(`${S}/sites?${B.toString()}`);if(!k.ok){const ne=await k.text();throw new Error(`HTTP ${k.status}: ${ne}`)}const K=await k.json();if(P)return;a(K.sites??[]),p(1)}catch(B){P||E((B==null?void 0:B.message)??"Failed to load sites.")}finally{P||j(!1)}}return I(),()=>{P=!0}},[se,l,c,u]),i.useEffect(()=>{function S(P){R.current&&!R.current.contains(P.target)&&h(!1)}if(m)return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[m]);const J=i.useMemo(()=>{const S=[...s];return S.sort((P,I)=>{const B=(P.title||P.url||P.PK||"").toLowerCase(),k=(I.title||I.url||I.PK||"").toLowerCase(),K=typeof P.averageRating=="number"?P.averageRating:0,ne=typeof I.averageRating=="number"?I.averageRating:0;return y==="avgDesc"?ne!==K?ne-K:B.localeCompare(k):y==="avgAsc"?K!==ne?K-ne:B.localeCompare(k):y==="alphaAsc"?B.localeCompare(k):y==="alphaDesc"?k.localeCompare(B):0}),S},[s,y]),V=Math.max(1,Math.ceil(J.length/Co)),ie=J.slice((x-1)*Co,x*Co),pe=async(S,P)=>{const I=ko();if(!I)return;const B=window;if(!B.auth||typeof B.auth.getAccessToken!="function")return;const k=await new Promise(K=>{B.auth.getAccessToken(ne=>K(ne))});k&&await at(`${I}/stars`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${k}`},body:JSON.stringify({siteId:S,rating:P})}).catch(()=>{})};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("header",{className:"space-y-2",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Websites"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Browse curated sites, see ratings, and jump straight into the interesting corners of the internet."})]}),r.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-4","aria-label":"Search and filter",children:[r.jsxs("form",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",onSubmit:S=>{S.preventDefault(),o(l.trim())},children:[r.jsx("input",{type:"text",value:l,onChange:S=>o(S.target.value),placeholder:"Search sites (title, URL, description)",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),r.jsx("button",{type:"submit",className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500",children:"Search"})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-4 sm:gap-6",children:[r.jsxs("div",{ref:R,className:"relative flex-shrink-0 min-w-0 max-w-sm",children:[r.jsx("label",{htmlFor:"website-category-filter",className:"block text-xs font-medium text-slate-400 mb-1",children:"Categories (filter by)"}),r.jsx("input",{id:"website-category-filter",type:"text",value:v,onChange:S=>b(S.target.value),onFocus:()=>h(!0),placeholder:"Search and select categories",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",autoComplete:"off"}),m&&r.jsx("div",{className:"absolute left-0 top-full z-10 mt-1 w-full max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",role:"listbox","aria-label":"Category options",children:W.length>0?W.map(S=>r.jsx("button",{type:"button",role:"option",onClick:()=>{d(P=>P.includes(S.id)?P:[...P,S.id]),b("")},className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:S.name},S.id)):r.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:q.length===0?"No categories yet.":"No matches or all selected."})}),r.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:c.map(S=>{const P=q.find(I=>I.id===S);return r.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(P==null?void 0:P.name)??S,r.jsx("button",{type:"button",onClick:()=>d(I=>I.filter(B=>B!==S)),className:"hover:text-red-400","aria-label":"Remove category filter",children:""})]},S)})}),c.length>0&&r.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[r.jsx("span",{className:"text-xs text-slate-500",children:"Match:"}),r.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[r.jsx("button",{type:"button",onClick:()=>f("and"),className:`rounded px-2 py-0.5 text-xs font-medium ${u==="and"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"AND"}),r.jsx("button",{type:"button",onClick:()=>f("or"),className:`rounded px-2 py-0.5 text-xs font-medium ${u==="or"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"OR"})]})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-3 items-center text-xs text-slate-400",children:[r.jsx("span",{className:"font-medium text-slate-200",children:"Sort:"}),r.jsxs("select",{value:y,onChange:S=>{C(S.target.value),p(1)},className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",children:[r.jsx("option",{value:"avgDesc",children:"Avg stars (high first)"}),r.jsx("option",{value:"avgAsc",children:"Avg stars (low first)"}),r.jsx("option",{value:"alphaAsc",children:"Title AZ"}),r.jsx("option",{value:"alphaDesc",children:"Title ZA"})]}),r.jsx("span",{className:"text-slate-500",children:se?J.length===0?"No sites found.":`${J.length} sites`:""})]})]})]}),w&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:w}),se?g?r.jsx("div",{className:"text-sm text-slate-400",children:"Loading sites"}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"rounded-md border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm text-slate-400",children:J.length===0?"No results":`${J.length} results`}),r.jsx("ul",{className:"space-y-2 mt-2",children:ie.map(S=>{const P=S.title||S.url||S.PK||"Untitled",I=S.logoUrl;return r.jsxs("li",{className:"flex gap-3 rounded-xl border border-slate-800 bg-slate-950/60 p-3",children:[r.jsx("div",{className:"h-12 w-12 flex-shrink-0 overflow-hidden rounded-lg border border-slate-700 bg-slate-900",children:I?r.jsx("img",{src:I,alt:"",className:"h-full w-full object-cover",onError:B=>{B.currentTarget.style.visibility="hidden"}}):null}),r.jsxs("div",{className:"min-w-0 flex-1 space-y-1",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsx("h2",{className:"truncate text-sm font-semibold text-slate-50",children:r.jsx(ce,{to:`/websites/${encodeURIComponent(S.PK)}`,className:"hover:text-brand-orange",children:P})}),typeof S.averageRating=="number"&&r.jsxs("span",{className:"inline-flex items-center rounded-full bg-slate-900 px-2 py-0.5 text-[11px] text-amber-300",children:[S.averageRating.toFixed(1),""]})]}),S.url&&r.jsx("a",{href:S.url,target:"_blank",rel:"noopener noreferrer",className:"block truncate text-xs text-slate-400 hover:text-slate-200",children:S.url}),S.description&&r.jsxs("p",{className:"text-xs text-slate-300 line-clamp-3",children:[S.description,S.descriptionAiGenerated&&r.jsx("span",{className:"ml-1 text-[11px] uppercase tracking-wide text-slate-500",children:"AI summary"})]}),S.categories&&S.categories.length>0&&r.jsx("div",{className:"flex flex-wrap gap-1 pt-1",children:S.categories.map(B=>r.jsx("span",{className:"rounded-full bg-slate-900 px-2 py-0.5 text-[11px] text-slate-300",children:B.name},B.id))}),$&&r.jsx("div",{className:"pt-1",children:r.jsxs("label",{className:"inline-flex items-center gap-1 text-[11px] text-slate-400",children:[r.jsx("span",{children:"Rate:"}),r.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-1 py-0.5 text-[11px] text-slate-50",onChange:B=>{const k=Number(B.target.value);k>=1&&k<=5&&pe(S.PK,k)},defaultValue:"",children:[r.jsx("option",{value:"",children:"--"}),r.jsx("option",{value:"1",children:"1"}),r.jsx("option",{value:"2",children:"2"}),r.jsx("option",{value:"3",children:"3"}),r.jsx("option",{value:"4",children:"4"}),r.jsx("option",{value:"5",children:"5"})]})]})})]})]},S.PK)})})]}):r.jsx("div",{className:"flex items-center justify-center min-h-[280px]",children:r.jsx("p",{className:"text-2xl sm:text-3xl font-light text-slate-500/80 tracking-wide animate-pulse",children:"Enter search term or select categories"})}),se&&V>1&&r.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-center gap-2 text-xs",children:[r.jsx("button",{type:"button",disabled:x<=1,onClick:()=>p(S=>Math.max(1,S-1)),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 disabled:opacity-40",children:"Prev"}),r.jsxs("span",{className:"text-slate-500",children:["Page ",x," of ",V]}),r.jsx("button",{type:"button",disabled:x>=V,onClick:()=>p(S=>Math.min(V,S+1)),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 disabled:opacity-40",children:"Next"})]})]})};function Eo(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Jv=()=>{var v,b;const{id:e}=ls(),{user:t}=Ae(),n=dt(t??null,"manager"),[s,a]=i.useState(null),[l,o]=i.useState(null),[c,d]=i.useState(!0),[u,f]=i.useState(null);i.useEffect(()=>{const y=Eo();if(!y||!e){f(e?"API URL not set.":"Missing site id."),d(!1);return}let C=!1;async function x(){d(!0),f(null);try{const p=new URLSearchParams;p.set("id",decodeURIComponent(e));const g=await at(`${y}/sites?${p.toString()}`);if(g.status===404){C||a(null);return}if(!g.ok){const w=await g.text();throw new Error(`HTTP ${g.status}: ${w}`)}const j=await g.json();if(C)return;a(j.site??null)}catch(p){C||f((p==null?void 0:p.message)??"Failed to load site.")}finally{C||d(!1)}}return x(),()=>{C=!0}},[e]),i.useEffect(()=>{if(!t||!(s!=null&&s.PK))return;const y=Eo();if(!y)return;let C=!1;return(async()=>{try{const x=await Q(`${y}/stars?siteId=${encodeURIComponent(s.PK)}`);if(C)return;if(x.ok){const p=await x.json();o(typeof p.rating=="number"?p.rating:null)}}catch{}})(),()=>{C=!0}},[t,s==null?void 0:s.PK]);const m=async(y,C)=>{const x=Eo();if(x)try{await Q(`${x}/stars`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({siteId:y,rating:C})}),o(C)}catch{}};if(c)return r.jsxs("div",{className:"space-y-4",children:[r.jsxs(ce,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Websites"]}),r.jsx("div",{className:"text-sm text-slate-400",children:"Loading"})]});if(u||!s)return r.jsxs("div",{className:"space-y-4",children:[r.jsxs(ce,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Websites"]}),r.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:u||"Site not found."})]});const h=s.title||s.url||s.PK||"Untitled";return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsxs(ce,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Websites"]}),n&&s&&r.jsxs(ce,{to:`/admin/sites/edit/${encodeURIComponent(s.PK)}`,className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(la,{className:"h-4 w-4"}),"Edit site"]})]}),r.jsxs("article",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 sm:p-6",children:[r.jsxs("header",{className:"flex flex-wrap gap-4",children:[r.jsx("div",{className:"h-16 w-16 flex-shrink-0 overflow-hidden rounded-lg border border-slate-700 bg-slate-900",children:s.logoUrl?r.jsx("img",{src:s.logoUrl,alt:"",className:"h-full w-full object-cover",onError:y=>{y.currentTarget.style.visibility="hidden"}}):null}),r.jsxs("div",{className:"min-w-0 flex-1 space-y-1",children:[r.jsx("h1",{className:"text-xl font-semibold tracking-tight text-slate-50",children:h}),typeof s.averageRating=="number"&&r.jsxs("span",{className:"inline-flex items-center rounded-full bg-slate-800 px-2 py-0.5 text-sm text-amber-300",children:[s.averageRating.toFixed(1)," average"]}),s.url&&r.jsx("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"block truncate text-sm text-slate-400 hover:text-slate-200",children:s.url})]})]}),s.description&&r.jsx("div",{className:"mt-4",children:r.jsxs("p",{className:"text-sm text-slate-300",children:[s.description,s.descriptionAiGenerated&&r.jsx("span",{className:"ml-1 text-xs uppercase tracking-wide text-slate-500",children:"AI summary"})]})}),(((v=s.categories)==null?void 0:v.length)??0)>0&&r.jsx("div",{className:"mt-3 flex flex-wrap gap-1",children:s.categories.map(y=>r.jsx("span",{className:"rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-300",children:y.name},y.id))}),(((b=s.tags)==null?void 0:b.length)??0)>0&&r.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:s.tags.map(y=>r.jsx("span",{className:"rounded-full bg-slate-900 px-2 py-0.5 text-xs text-slate-400",children:y},y))}),t&&r.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3",children:[l!==null&&r.jsxs("span",{className:"text-xs text-slate-400",children:["Your rating: ",l,""]}),r.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-400",children:[r.jsx("span",{children:"Rate:"}),r.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-2 py-1 text-sm text-slate-50",value:l??"",onChange:y=>{const C=Number(y.target.value);C>=1&&C<=5&&m(s.PK,C)},children:[r.jsx("option",{value:"",children:"--"}),r.jsx("option",{value:"1",children:"1"}),r.jsx("option",{value:"2",children:"2"}),r.jsx("option",{value:"3",children:"3"}),r.jsx("option",{value:"4",children:"4"}),r.jsx("option",{value:"5",children:"5"})]})]})]}),s.scrapedContent&&r.jsxs("section",{className:"mt-6 border-t border-slate-800 pt-4",children:[r.jsx("h2",{className:"text-sm font-medium text-slate-400",children:"About / Scraped content"}),r.jsx("div",{className:"mt-2 overflow-x-auto rounded-lg border border-slate-800 bg-slate-900/60 p-3",children:r.jsx("pre",{className:"whitespace-pre-wrap break-words font-sans text-sm text-slate-300",children:s.scrapedContent})})]})]})]})};function Po(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const To=10,Yv=()=>{const{user:e}=Ae(),[t,n]=qt(),[s,a]=i.useState([]),[l,o]=i.useState(()=>t.get("q")??""),[c,d]=i.useState(()=>{const P=t.get("categoryIds");return P?P.split(",").filter(Boolean):[]}),[u,f]=i.useState(()=>t.get("categoryMode")==="or"?"or":"and"),[m,h]=i.useState(!1),[v,b]=i.useState(""),[y,C]=i.useState("avgDesc"),[x,p]=i.useState(1),[g,j]=i.useState(!1),[w,E]=i.useState(null),$=!!e,R=dt(e??null,"manager"),H=i.useRef(null),[O,q]=i.useState([]);i.useEffect(()=>{const P=Po();if(!P)return;let I=!1;return at(`${P}/media-categories`).then(B=>B.ok?B.json():Promise.reject(new Error("Failed to load categories"))).then(B=>{if(I)return;const k=(B.categories??[]).map(K=>({id:K.PK||K.id||"",name:K.name||K.PK||""}));k.sort((K,ne)=>(K.name||"").localeCompare(ne.name||"")),q(k)}).catch(()=>{}),()=>{I=!0}},[]);const W=i.useMemo(()=>{if(u==="or"&&O.length>0)return O;const P=new Map;s.forEach(B=>(B.categories||[]).forEach(k=>{k.id&&!P.has(k.id)&&P.set(k.id,k)}));const I=[...O];return P.forEach(B=>{I.some(k=>k.id===B.id)||I.push(B)}),I.sort((B,k)=>(B.name||"").localeCompare(k.name||"")),I},[O,u,s]),se=i.useMemo(()=>W.filter(P=>!c.includes(P.id)&&(!v.trim()||(P.name||"").toLowerCase().includes(v.toLowerCase()))),[W,c,v]),J=l.trim().length>0||c.length>0;i.useEffect(()=>{if(J){const P=new URLSearchParams;l.trim()&&P.set("q",l.trim()),c.length&&(P.set("categoryIds",c.join(",")),P.set("categoryMode",u)),n(P,{replace:!0})}else n({},{replace:!0})},[J,l,c,u,n]),i.useEffect(()=>{if(!J){a([]),p(1),j(!1),E(null);return}const P=Po();if(!P){E("API URL not set. Deploy via CI or set window.API_BASE_URL in config.js.");return}let I=!1;async function B(){j(!0),E(null);try{const k=new URLSearchParams;k.set("limit","100"),l.trim()&&k.set("q",l.trim()),c.length>0&&(k.set("categoryIds",c.join(",")),k.set("categoryMode",u));const K=await at(`${P}/media?${k.toString()}`);if(!K.ok){const _=await K.text();throw new Error(`HTTP ${K.status}: ${_}`)}const ne=await K.json();if(I)return;a(ne.media??[]),p(1)}catch(k){I||E((k==null?void 0:k.message)??"Failed to load media.")}finally{I||j(!1)}}return B(),()=>{I=!0}},[J,l,c,u]),i.useEffect(()=>{function P(I){H.current&&!H.current.contains(I.target)&&h(!1)}if(m)return document.addEventListener("mousedown",P),()=>document.removeEventListener("mousedown",P)},[m]);const V=i.useMemo(()=>{const P=[...s];return P.sort((I,B)=>{const k=(I.title||I.PK||"").toLowerCase(),K=(B.title||B.PK||"").toLowerCase(),ne=typeof I.averageRating=="number"?I.averageRating:0,_=typeof B.averageRating=="number"?B.averageRating:0;return y==="avgDesc"?_!==ne?_-ne:k.localeCompare(K):y==="avgAsc"?ne!==_?ne-_:k.localeCompare(K):y==="alphaAsc"?k.localeCompare(K):y==="alphaDesc"?K.localeCompare(k):0}),P},[s,y]),ie=Math.max(1,Math.ceil(V.length/To)),pe=V.slice((x-1)*To,x*To),S=async(P,I)=>{const B=Po();if(!B)return;const k=window;if(!k.auth||typeof k.auth.getAccessToken!="function")return;const K=await new Promise(ne=>{k.auth.getAccessToken(_=>ne(_))});K&&await at(`${B}/media/stars`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${K}`},body:JSON.stringify({mediaId:P,rating:I})}).catch(()=>{})};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("header",{className:"space-y-2",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Media"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Images and videos attached to sites and experiments across Funkedupshift."})]}),r.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-4","aria-label":"Search and filter",children:[r.jsxs("form",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",onSubmit:P=>{P.preventDefault(),o(l.trim())},children:[r.jsx("input",{type:"text",value:l,onChange:P=>o(P.target.value),placeholder:"Search media by title or description",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),r.jsx("button",{type:"submit",className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500",children:"Search"})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-4 sm:gap-6",children:[r.jsxs("div",{ref:H,className:"relative flex-shrink-0 min-w-0 max-w-sm",children:[r.jsx("label",{htmlFor:"media-category-filter",className:"block text-xs font-medium text-slate-400 mb-1",children:"Categories (filter by)"}),r.jsx("input",{id:"media-category-filter",type:"text",value:v,onChange:P=>b(P.target.value),onFocus:()=>h(!0),placeholder:"Search and select categories",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",autoComplete:"off"}),m&&r.jsx("div",{className:"absolute left-0 top-full z-10 mt-1 w-full max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",role:"listbox","aria-label":"Category options",children:se.length>0?se.map(P=>r.jsx("button",{type:"button",role:"option",onClick:()=>{d(I=>I.includes(P.id)?I:[...I,P.id]),b("")},className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:P.name},P.id)):r.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:W.length===0?"No categories yet.":"No matches or all selected."})}),r.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:c.map(P=>{const I=W.find(B=>B.id===P);return r.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(I==null?void 0:I.name)??P,r.jsx("button",{type:"button",onClick:()=>d(B=>B.filter(k=>k!==P)),className:"hover:text-red-400","aria-label":"Remove category filter",children:""})]},P)})}),c.length>0&&r.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[r.jsx("span",{className:"text-xs text-slate-500",children:"Match:"}),r.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[r.jsx("button",{type:"button",onClick:()=>f("and"),className:`rounded px-2 py-0.5 text-xs font-medium ${u==="and"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"AND"}),r.jsx("button",{type:"button",onClick:()=>f("or"),className:`rounded px-2 py-0.5 text-xs font-medium ${u==="or"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"OR"})]})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-3 items-center text-xs text-slate-400",children:[r.jsx("span",{className:"font-medium text-slate-200",children:"Sort:"}),r.jsxs("select",{value:y,onChange:P=>{C(P.target.value),p(1)},className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",children:[r.jsx("option",{value:"avgDesc",children:"Avg stars (high first)"}),r.jsx("option",{value:"avgAsc",children:"Avg stars (low first)"}),r.jsx("option",{value:"alphaAsc",children:"Title AZ"}),r.jsx("option",{value:"alphaDesc",children:"Title ZA"})]}),r.jsx("span",{className:"text-slate-500",children:J?V.length===0?"No media found.":`${V.length} items`:""})]})]})]}),w&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:w}),J?g?r.jsx("div",{className:"text-sm text-slate-400",children:"Loading media"}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"rounded-md border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm text-slate-400",children:V.length===0?"No results":`${V.length} results`}),r.jsx("ul",{className:"space-y-3 mt-2",children:pe.map(P=>{const I=P.thumbnailUrl||(P.mediaType==="image"?P.mediaUrl:void 0),B=P.title||P.PK||"Untitled",k=P.mediaType==="video"?"Video":"Image",K=`/media/${encodeURIComponent(P.PK)}`;return r.jsxs("li",{className:"flex gap-3 rounded-xl border border-slate-800 bg-slate-950/60 p-3",children:[r.jsx(ce,{to:K,className:"h-16 w-24 flex-shrink-0 overflow-hidden rounded-lg border border-slate-700 bg-slate-900 flex items-center justify-center text-xl hover:border-slate-600",children:I?r.jsx("img",{src:I,alt:"",className:"h-full w-full object-cover",onError:ne=>{ne.currentTarget.style.visibility="hidden"}}):r.jsx("span",{children:P.mediaType==="video"?"":""})}),r.jsxs("div",{className:"min-w-0 flex-1 space-y-1",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsx("h2",{className:"truncate text-sm font-semibold text-slate-50",children:r.jsx(ce,{to:K,className:"hover:text-brand-orange",children:B})}),typeof P.averageRating=="number"&&r.jsxs("span",{className:"inline-flex items-center rounded-full bg-slate-900 px-2 py-0.5 text-[11px] text-amber-300",children:[P.averageRating.toFixed(1),""]}),r.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-900 px-2 py-0.5 text-[10px] uppercase tracking-wide text-slate-400",children:k})]}),P.description&&r.jsx("p",{className:"text-xs text-slate-300 line-clamp-3",children:P.description}),P.categories&&P.categories.length>0&&r.jsx("div",{className:"flex flex-wrap gap-1 pt-1",children:P.categories.map(ne=>r.jsx("span",{className:"rounded-full bg-slate-900 px-2 py-0.5 text-[11px] text-slate-300",children:ne.name},ne.id))}),R&&r.jsx("div",{className:"pt-1",children:r.jsxs(ce,{to:`/admin/media/edit/${encodeURIComponent(P.PK)}`,className:"inline-flex items-center gap-1 text-[11px] text-slate-400 hover:text-slate-200",children:[r.jsx(la,{className:"h-3.5 w-3.5"}),"Edit"]})}),$&&r.jsx("div",{className:"pt-1",children:r.jsxs("label",{className:"inline-flex items-center gap-1 text-[11px] text-slate-400",children:[r.jsx("span",{children:"Rate:"}),r.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-1 py-0.5 text-[11px] text-slate-50",onChange:ne=>{const _=Number(ne.target.value);_>=1&&_<=5&&S(P.PK,_)},defaultValue:"",children:[r.jsx("option",{value:"",children:"--"}),r.jsx("option",{value:"1",children:"1"}),r.jsx("option",{value:"2",children:"2"}),r.jsx("option",{value:"3",children:"3"}),r.jsx("option",{value:"4",children:"4"}),r.jsx("option",{value:"5",children:"5"})]})]})})]})]},P.PK)})})]}):r.jsx("div",{className:"flex items-center justify-center min-h-[280px]",children:r.jsx("p",{className:"text-2xl sm:text-3xl font-light text-slate-500/80 tracking-wide animate-pulse",children:"Enter search term or select categories"})}),J&&ie>1&&r.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-center gap-2 text-xs",children:[r.jsx("button",{type:"button",disabled:x<=1,onClick:()=>p(P=>Math.max(1,P-1)),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 disabled:opacity-40",children:"Prev"}),r.jsxs("span",{className:"text-slate-500",children:["Page ",x," of ",ie]}),r.jsx("button",{type:"button",disabled:x>=ie,onClick:()=>p(P=>Math.min(ie,P+1)),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 disabled:opacity-40",children:"Next"})]})]})};function Ru(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Qv=()=>{var y;const{id:e}=ls(),{user:t}=Ae(),[n,s]=i.useState(null),[a,l]=i.useState(null),[o,c]=i.useState(!0),[d,u]=i.useState(null),f=dt(t??null,"manager"),m=e?decodeURIComponent(e):"";i.useEffect(()=>{const C=Ru();if(!C||!m){u(m?"API URL not set.":"Missing media id."),c(!1);return}let x=!1;async function p(){c(!0),u(null);try{const g=await at(`${C}/media?id=${encodeURIComponent(m)}`);if(g.status===404){x||s(null);return}if(!g.ok){const E=await g.text();throw new Error(`HTTP ${g.status}: ${E}`)}const j=await g.json();if(x)return;const w=Array.isArray(j.media)?j.media[0]:j.media;s(w??null)}catch(g){x||u((g==null?void 0:g.message)??"Failed to load media.")}finally{x||c(!1)}}return p(),()=>{x=!0}},[m]);const h=async C=>{const x=Ru();if(!(!x||!n))try{await Q(`${x}/media/stars`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mediaId:n.PK,rating:C})}),l(C)}catch{}};if(o)return r.jsxs("div",{className:"space-y-4",children:[r.jsxs(ce,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Media"]}),r.jsx("div",{className:"text-sm text-slate-400",children:"Loading"})]});if(d||!n)return r.jsxs("div",{className:"space-y-4",children:[r.jsxs(ce,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Media"]}),r.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:d||"Media not found."})]});const v=n.title||n.PK||"Untitled",b=n.mediaType==="video";return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsxs(ce,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Media"]}),f&&r.jsxs(ce,{to:`/admin/media/edit/${encodeURIComponent(n.PK)}`,className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(la,{className:"h-4 w-4"}),"Edit"]})]}),r.jsxs("article",{className:"rounded-xl border border-slate-800 bg-slate-950/60 overflow-hidden",children:[r.jsxs("header",{className:"p-4 sm:p-6 border-b border-slate-800",children:[r.jsx("h1",{className:"text-xl font-semibold tracking-tight text-slate-50",children:v}),r.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[typeof n.averageRating=="number"&&r.jsxs("span",{className:"inline-flex items-center rounded-full bg-slate-800 px-2 py-0.5 text-sm text-amber-300",children:[n.averageRating.toFixed(1)," average"]}),r.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-800 px-2 py-0.5 text-xs uppercase tracking-wide text-slate-400",children:b?"Video":"Image"})]}),n.description&&r.jsx("p",{className:"mt-3 text-sm text-slate-300",children:n.description}),(((y=n.categories)==null?void 0:y.length)??0)>0&&r.jsx("div",{className:"mt-3 flex flex-wrap gap-1",children:n.categories.map(C=>r.jsx("span",{className:"rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-300",children:C.name},C.id))}),t&&r.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3",children:[a!==null&&r.jsxs("span",{className:"text-xs text-slate-400",children:["Your rating: ",a,""]}),r.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-400",children:[r.jsx("span",{children:"Rate:"}),r.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-2 py-1 text-sm text-slate-50",value:a??"",onChange:C=>{const x=Number(C.target.value);x>=1&&x<=5&&h(x)},children:[r.jsx("option",{value:"",children:"--"}),r.jsx("option",{value:"1",children:"1"}),r.jsx("option",{value:"2",children:"2"}),r.jsx("option",{value:"3",children:"3"}),r.jsx("option",{value:"4",children:"4"}),r.jsx("option",{value:"5",children:"5"})]})]})]})]}),r.jsx("div",{className:"p-4 sm:p-6 bg-slate-900/40 flex justify-center items-center min-h-[200px]",children:n.mediaUrl?b?r.jsx("video",{src:n.mediaUrl,controls:!0,className:"max-w-full max-h-[70vh] rounded-lg border border-slate-700",playsInline:!0}):r.jsx("img",{src:n.mediaUrl,alt:v,className:"max-w-full max-h-[70vh] w-auto h-auto object-contain rounded-lg border border-slate-700"}):r.jsx("p",{className:"text-sm text-slate-500",children:"No media URL available."})})]})]})},_p="funkedupshift_internet_dashboard",Zv=5*60*1e3;function Xv(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function eb(){try{const e=localStorage.getItem(_p);if(!e)return null;const t=JSON.parse(e);return!(t!=null&&t.sites)||!(t!=null&&t.lastFetchTime)||Date.now()-new Date(t.lastFetchTime).getTime()>=Zv?null:t.sites}catch{return null}}function tb(e){try{localStorage.setItem(_p,JSON.stringify({sites:e,lastFetchTime:new Date().toISOString()}))}catch{}}const nb=()=>{const{user:e}=Ae(),[t,n]=i.useState([]),[s,a]=i.useState(!0),[l,o]=i.useState(null),c=i.useCallback(async()=>{const d=Xv(),u=eb();if(u&&u.length>0){n(u),a(!1),o(null);return}if(!d){o("API URL not set."),a(!1);return}a(!0),o(null);try{const f=await at(`${d}/internet-dashboard`);if(!f.ok){const v=await f.text();throw new Error(v||`HTTP ${f.status}`)}const m=await f.json(),h=Array.isArray(m.sites)?m.sites:[];h.length>0?(tb(h),n(h)):(o(u!=null&&u.length?void 0:"No data returned."),u!=null&&u.length&&n(u))}catch(f){const m=f instanceof Error?f.message:"Failed to load dashboard.";u&&u.length>0?(n(u),o(null)):(o(m),n([]))}finally{a(!1)}},[]);return i.useEffect(()=>{c()},[c]),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Internet dashboard"}),r.jsxs("div",{className:"rounded-xl border border-teal-800/60 bg-gradient-to-br from-teal-900/40 to-teal-950/60 p-4 shadow-lg",children:[r.jsx("p",{className:"text-sm font-medium text-teal-100",children:"Live status of popular sites"}),r.jsx("p",{className:"mt-1 text-xs text-teal-200/80",children:"Refreshes when data is older than 5 minutes"}),dt(e??null,"superadmin")&&r.jsx("p",{className:"mt-2",children:r.jsx(ce,{to:"/admin/internet-dashboard",className:"text-brand-orange hover:text-orange-400 text-sm",children:"Edit sites list"})})]}),s&&r.jsx("p",{className:"text-sm text-slate-400",children:"Loading"}),l&&!t.length&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:l}),r.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(140px,1fr))] gap-3",children:t.map(d=>{const u=(d.status||"down").toLowerCase(),f=u==="up"?"border-emerald-500/50 bg-emerald-500/15 text-emerald-200":u==="degraded"?"border-amber-500/50 bg-amber-500/15 text-amber-200":"border-red-500/50 bg-red-500/15 text-red-200",m=d.responseTimeMs!=null?`${d.responseTimeMs} ms`:null;return r.jsxs("div",{className:`rounded-lg border p-3 text-center text-sm transition-all duration-200 hover:scale-[1.02] hover:shadow-lg ${f}`,children:[r.jsx("a",{href:`https://${d.domain}`,target:"_blank",rel:"noopener noreferrer",className:"font-semibold break-all hover:underline block",children:d.domain}),r.jsx("div",{className:"mt-1 text-xs capitalize opacity-90",children:u}),m&&r.jsx("div",{className:"mt-0.5 text-[11px] opacity-75",children:m})]},d.domain)})})]})};function rb(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return!e||e==="API_URL_PLACEHOLDER"||!e.startsWith("http")?null:e.replace(/\/$/,"")}const sb=()=>{const{user:e}=Ae(),[t,n]=i.useState([]),[s,a]=i.useState(null),[l,o]=i.useState(!0),[c,d]=i.useState(null),u=i.useCallback(async()=>{const m=rb();if(!m){d("API URL not set. For local dev, edit public/config.js and set window.API_BASE_URL to your staging API (e.g. terraform -chdir=infra output -raw apiInvokeUrl)."),o(!1);return}o(!0),d(null);try{const h=await at(`${m}/recommended/highlights`),v=await h.text();if(!h.ok)throw new Error(v||`HTTP ${h.status}`);if(v.trim().startsWith("<"))throw new Error("API returned HTML instead of JSON. For local dev, set window.API_BASE_URL in public/config.js to your staging API URL (e.g. terraform -chdir=infra output -raw apiInvokeUrl)");let b;try{b=JSON.parse(v)}catch{throw new Error("API returned invalid JSON.")}const y=Array.isArray(b.sites)?b.sites:[];n(y),d(null)}catch(h){const v=h instanceof Error?h.message:"Failed to load.";d(v),n([])}finally{o(!1)}},[]);i.useEffect(()=>{u()},[u]);const f=dt(e??null,"manager");return r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-violet-200",children:"Highlights and faves"}),r.jsxs("div",{className:"rounded-xl border border-violet-800/60 bg-gradient-to-br from-violet-900/40 to-violet-950/60 p-4 shadow-lg",children:[r.jsx("p",{className:"text-sm font-medium text-violet-100",children:"Our curated list of exceptional sites"}),r.jsx("p",{className:"mt-1 text-xs text-violet-200/80",children:"Click a card below for more detail"}),f&&r.jsx("p",{className:"mt-2",children:r.jsx(ce,{to:"/admin/recommended?tab=highlights",className:"text-violet-300 hover:text-violet-200 font-semibold text-sm",children:"Edit sites list"})})]}),l&&r.jsx("p",{className:"text-sm text-slate-400",children:"Loading"}),c&&!t.length&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:c}),!l&&t.length===0&&!c&&r.jsxs("p",{className:"text-sm text-slate-400",children:["No sites configured yet."," ",f&&r.jsx(ce,{to:"/admin/recommended?tab=highlights",className:"text-violet-400 hover:text-violet-300",children:"Add sites"})]}),t.length>0&&r.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(260px,1fr))] gap-4",children:t.map(m=>{const h=(m.status||"up").toLowerCase(),v=h==="up"?"border-violet-400/50 bg-violet-400/20 text-violet-200":h==="degraded"?"border-violet-500/50 bg-violet-500/15 text-violet-200":"border-violet-600/50 bg-violet-600/15 text-violet-200",b=(m.description||"").trim().length>0,y=m.title||m.domain,C=m.url||`https://${m.domain}`;return r.jsxs("div",{className:`rounded-lg border p-4 text-left text-sm min-w-0 cursor-pointer transition-all duration-200 hover:scale-[1.01] hover:shadow-lg ${v}`,onClick:()=>a(m),role:"button",tabIndex:0,onKeyDown:x=>{(x.key==="Enter"||x.key===" ")&&(x.preventDefault(),a(m))},children:[r.jsxs("span",{className:"relative group block",children:[r.jsx("a",{href:C,target:"_blank",rel:"noopener noreferrer",className:"font-semibold block hover:underline break-all",onClick:x=>x.stopPropagation(),children:y}),r.jsx("span",{className:"absolute left-0 top-full mt-1 px-2 py-1.5 rounded bg-slate-900 border border-violet-700/60 text-xs text-violet-200 break-all max-w-[280px] shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-opacity z-10 pointer-events-none",role:"tooltip",children:C})]}),b&&r.jsx("div",{className:"mt-2 text-xs text-violet-200/90 leading-relaxed break-words",children:m.description})]},m.url||m.domain)})}),r.jsxs(hr,{open:!!s,onClose:()=>a(null),className:"relative z-50",children:[r.jsx("div",{className:"fixed inset-0 bg-black/50","aria-hidden":"true"}),r.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:r.jsx(hr.Panel,{className:"mx-auto w-full max-w-xl rounded-xl border border-violet-800/60 bg-gradient-to-br from-violet-900/40 to-violet-950/60 p-6 shadow-xl",children:s&&r.jsxs("div",{className:"relative flex min-h-[12rem] items-center justify-center",children:[r.jsx("button",{type:"button",onClick:()=>a(null),className:"absolute right-0 top-0 rounded p-1 text-violet-400 hover:bg-violet-800/40 hover:text-violet-200","aria-label":"Close modal",children:r.jsx(_l,{className:"h-6 w-6"})}),s.logoUrl?r.jsx("img",{src:s.logoUrl,alt:"",className:"max-h-48 max-w-full object-contain",onError:m=>{m.currentTarget.style.visibility="hidden"}}):r.jsx("div",{className:"h-24 w-24 rounded-lg border border-violet-700/60 bg-violet-900/40"})]})})})]})]})};function ab({title:e,titleId:t,...n},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{fillRule:"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.006 5.404.434c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.434 2.082-5.005Z",clipRule:"evenodd"}))}const Bp=i.forwardRef(ab);function lb(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return!e||e==="API_URL_PLACEHOLDER"||!e.startsWith("http")?null:e.replace(/\/$/,"")}const ob=()=>{const{user:e}=Ae(),[t,n]=i.useState([]),[s,a]=i.useState(null),[l,o]=i.useState(!0),[c,d]=i.useState(null),u=i.useCallback(async()=>{const m=lb();if(!m){d("API URL not set. For local dev, edit public/config.js and set window.API_BASE_URL to your staging API (e.g. terraform -chdir=infra output -raw apiInvokeUrl)."),o(!1);return}o(!0),d(null);try{const h=await at(`${m}/recommended/highest-rated`),v=await h.text();if(!h.ok)throw new Error(v||`HTTP ${h.status}`);if(v.trim().startsWith("<"))throw new Error("API returned HTML instead of JSON. For local dev, set window.API_BASE_URL in public/config.js to your staging API URL (e.g. terraform -chdir=infra output -raw apiInvokeUrl)");let b;try{b=JSON.parse(v)}catch{throw new Error("API returned invalid JSON.")}const y=Array.isArray(b.sites)?b.sites:[];n(y),d(null)}catch(h){const v=h instanceof Error?h.message:"Failed to load.";d(v),n([])}finally{o(!1)}},[]);i.useEffect(()=>{u()},[u]);const f=dt(e??null,"manager");return r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-amber-200",children:"Highest rated"}),r.jsxs("div",{className:"rounded-xl border border-amber-800/60 bg-gradient-to-br from-amber-900/40 to-amber-950/60 p-4 shadow-lg",children:[r.jsx("p",{className:"text-sm font-medium text-amber-100",children:"Top sites and media rated by our community"}),r.jsx("p",{className:"mt-1 text-xs text-amber-200/80",children:"Click a card below for more detail"}),f&&r.jsx("p",{className:"mt-2",children:r.jsx(ce,{to:"/admin/recommended?tab=highest-rated",className:"text-amber-300 hover:text-amber-200 font-semibold text-sm",children:"Edit list"})})]}),l&&r.jsx("p",{className:"text-sm text-slate-400",children:"Loading"}),c&&!t.length&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:c}),!l&&t.length===0&&!c&&r.jsxs("p",{className:"text-sm text-slate-400",children:["No items configured yet."," ",f&&r.jsx(ce,{to:"/admin/recommended?tab=highest-rated",className:"text-amber-400 hover:text-amber-300",children:"Generate cache"})]}),t.length>0&&r.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(260px,1fr))] gap-4",children:t.map(m=>{const h=(m.status||"up").toLowerCase(),v=h==="up"?"border-amber-400/50 bg-amber-400/20 text-amber-200":h==="degraded"?"border-amber-500/50 bg-amber-500/15 text-amber-200":"border-amber-600/50 bg-amber-600/15 text-amber-200",b=(m.description||"").trim().length>0,y=m.title||m.domain,C=m.type==="media",x=m.id||m.url||m.domain;return r.jsxs("div",{className:`rounded-lg border p-4 text-left text-sm min-w-0 cursor-pointer transition-all duration-200 hover:scale-[1.01] hover:shadow-lg ${v}`,onClick:()=>a(m),role:"button",tabIndex:0,onKeyDown:p=>{(p.key==="Enter"||p.key===" ")&&(p.preventDefault(),a(m))},children:[r.jsxs("span",{className:"relative group block",children:[C?r.jsx(ce,{to:m.link,className:"font-semibold block hover:underline break-all",onClick:p=>p.stopPropagation(),children:y}):r.jsx("a",{href:m.link,target:"_blank",rel:"noopener noreferrer",className:"font-semibold block hover:underline break-all",onClick:p=>p.stopPropagation(),children:y}),r.jsx("span",{className:"absolute left-0 top-full mt-1 px-2 py-1.5 rounded bg-slate-900 border border-amber-700/60 text-xs text-amber-200 break-all max-w-[280px] shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-opacity z-10 pointer-events-none",role:"tooltip",children:m.link})]}),m.averageRating!=null&&r.jsxs("div",{className:"mt-1 flex items-center gap-0.5 text-amber-300",children:[r.jsx(Bp,{className:"h-3.5 w-3.5"}),r.jsx("span",{className:"font-medium",children:m.averageRating})]}),b&&r.jsx("div",{className:"mt-2 text-xs text-amber-200/90 leading-relaxed break-words",children:m.description})]},x)})}),r.jsxs(hr,{open:!!s,onClose:()=>a(null),className:"relative z-50",children:[r.jsx("div",{className:"fixed inset-0 bg-black/50","aria-hidden":"true"}),r.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:r.jsx(hr.Panel,{className:"mx-auto w-full max-w-xl rounded-xl border border-amber-800/60 bg-gradient-to-br from-amber-900/40 to-amber-950/60 p-6 shadow-xl",children:s&&r.jsxs("div",{className:"relative flex min-h-[12rem] items-center justify-center",children:[r.jsx("button",{type:"button",onClick:()=>a(null),className:"absolute right-0 top-0 rounded p-1 text-amber-400 hover:bg-amber-800/40 hover:text-amber-200","aria-label":"Close modal",children:r.jsx(_l,{className:"h-6 w-6"})}),s.logoUrl?r.jsx("img",{src:s.logoUrl,alt:"",className:"max-h-48 max-w-full object-contain",onError:m=>{m.currentTarget.style.visibility="hidden"}}):r.jsx("div",{className:"h-24 w-24 rounded-lg border border-amber-700/60 bg-amber-900/40"})]})})})]})]})};function ib(){const{user:e,isLoading:t}=Ae(),n=$t(),s=bp(e);return i.useEffect(()=>{!t&&!e&&n("/auth")},[e,t,n]),t?r.jsx("div",{className:"container-max section-padding text-center",children:r.jsx("div",{className:"inline-block w-8 h-8 border-2 border-primary-500 border-t-transparent rounded-full animate-spin"})}):!e||s.length===0?r.jsxs("div",{className:"container-max section-padding text-center",children:[r.jsx("h1",{className:"text-2xl font-display font-bold text-secondary-100 mb-4",children:"Access Denied"}),r.jsx("p",{className:"text-secondary-400",children:"You dont have permission to access the admin area."})]}):r.jsxs("main",{className:"container-max section-padding",children:[r.jsx("h1",{className:"text-4xl sm:text-5xl font-display font-bold text-gradient mb-10",children:"Admin"}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(a=>r.jsxs(ce,{to:a.path,className:"card block p-6 hover:border-primary-500/50 transition-colors group",children:[r.jsx(a.icon,{className:"w-8 h-8 text-primary-500 mb-4 group-hover:scale-110 transition-transform"}),r.jsx("h2",{className:"text-lg font-display font-bold text-secondary-100 mb-1",children:a.label}),r.jsx("p",{className:"text-sm text-secondary-400",children:a.description})]},a.path))})]})}function cb(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const db=["image/png","image/jpeg","image/jpg","image/gif","image/webp"],ub=()=>{const{user:e}=Ae(),{logo:t}=Yc(),[n,s]=i.useState(null),[a,l]=i.useState("Funkedupshift"),[o,c]=i.useState(null),[d,u]=i.useState(!1),[f,m]=i.useState(null),[h,v]=i.useState(null);if(!dt(e??null,"superadmin"))return r.jsxs("div",{className:"space-y-3",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Branding"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Only superadmin users can manage global branding assets."})]});const y=x=>{var g;const p=(g=x.target.files)==null?void 0:g[0];s(p??null),m(null),v(null),o&&(URL.revokeObjectURL(o),c(null)),p&&c(URL.createObjectURL(p))},C=async x=>{if(x.preventDefault(),v(null),m(null),!n){v("Choose an image file first.");return}const p=n.type||"image/png";if(!db.includes(p)){v("Logo must be PNG, JPEG, GIF, or WEBP.");return}const g=cb();if(!g){v("API URL not configured.");return}const j=window;if(!j.auth||typeof j.auth.getAccessToken!="function"){v("Auth not initialized.");return}u(!0);try{const w=await Q(`${g}/branding/logo`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contentType:p,alt:a})});if(!w.ok){const R=await w.text();throw new Error(R||`Metadata request failed with ${w.status}`)}const E=await w.json();if(!E.uploadUrl)throw new Error("uploadUrl missing from response.");const $=await fetch(E.uploadUrl,{method:"PUT",headers:{"Content-Type":p},body:n});if(!$.ok)throw new Error(`Upload failed with ${$.status}`);m("Logo updated. It may take a moment for caches to refresh.")}catch(w){v((w==null?void 0:w.message)??"Failed to update logo.")}finally{u(!1)}};return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("header",{className:"space-y-2",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Branding"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Upload a new global logo for Funkedupshift. This logo is used in the navigation bar and other shared surfaces."})]}),r.jsxs("form",{className:"space-y-4 max-w-md",onSubmit:C,children:[r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"block text-slate-200",children:"Logo image"}),t&&!o&&r.jsxs("div",{className:"space-y-1 mb-3",children:[r.jsx("p",{className:"text-slate-200",children:"Current logo"}),r.jsx("div",{className:"inline-flex items-center rounded-lg border border-slate-800 bg-slate-950 p-2",children:r.jsx("img",{src:t.url,alt:t.alt,className:"h-12 w-auto rounded-md object-contain"})})]}),r.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/jpg,image/gif,image/webp",onChange:y,className:"block w-full text-xs text-slate-300 file:mr-3 file:rounded-md file:border-0 file:bg-slate-800 file:px-3 file:py-1.5 file:text-xs file:font-semibold file:text-slate-100 hover:file:bg-slate-700"}),r.jsx("p",{className:"text-xs text-slate-500",children:"PNG, JPEG, GIF, or WEBP. Recommended square or horizontal layout."})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"block text-slate-200",children:"Alt text"}),r.jsx("input",{type:"text",value:a,onChange:x=>l(x.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),o&&r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("p",{className:"text-slate-200",children:"Preview"}),r.jsxs("div",{className:"inline-flex items-center rounded-lg border border-slate-800 bg-slate-950 p-2",children:[r.jsx("img",{src:o,alt:"Preview",className:"h-12 w-auto rounded-md object-contain"}),r.jsx("span",{className:"ml-3 text-xs text-slate-400 truncate max-w-[12rem]",children:n==null?void 0:n.name})]})]}),r.jsx("button",{type:"submit",disabled:d||!n,className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:d?"Updating":"Update logo"}),f&&r.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-xs text-emerald-200",children:f}),h&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:h})]})]})};function Lu(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const mb=()=>{const{user:e}=Ae(),[t,n]=i.useState([]),[s,a]=i.useState("custom"),[l,o]=i.useState(null),[c,d]=i.useState(null),[u,f]=i.useState(""),[m,h]=i.useState(!0),[v,b]=i.useState(!1),[y,C]=i.useState(null),[x,p]=i.useState(null),g=dt(e??null,"superadmin"),j=i.useCallback(async()=>{const J=Lu();if(!J){p("API URL not set."),h(!1);return}h(!0),p(null);try{const V=await Q(`${J}/admin/internet-dashboard/sites`);if(!V.ok){const pe=await V.json().catch(()=>({}));throw new Error(pe.error||"Failed to load")}const ie=await V.json();n(Array.isArray(ie.sites)?ie.sites:[])}catch(V){p((V==null?void 0:V.message)??"Failed to load sites.")}finally{h(!1)}},[Q]);i.useEffect(()=>{g&&j()},[g,j]);const w=async J=>{const V=Lu();if(V){b(!0),C(null),p(null);try{const ie=await Q(`${V}/admin/internet-dashboard/sites`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({sites:J})});if(!ie.ok){const pe=await ie.json().catch(()=>({}));throw new Error(pe.error||"Failed to save")}n(J),C("Sites list saved.")}catch(ie){p((ie==null?void 0:ie.message)??"Failed to save.")}finally{b(!1)}}},E=J=>{J.preventDefault();const V=u.trim().toLowerCase().replace(/^https?:\/\//,"").replace(/\/.*$/,"");if(!V)return;if(t.includes(V)){p("Domain already in list.");return}const ie=[...t,V];f(""),p(null),w(ie)},$=i.useMemo(()=>{if(s==="custom")return[...t];const J=[...t];return J.sort((V,ie)=>s==="a-z"?V.localeCompare(ie):ie.localeCompare(V)),J},[t,s]),R=J=>{o(J)},H=(J,V)=>{J.preventDefault(),J.dataTransfer.dropEffect="move",d(V)},O=()=>{d(null)},q=()=>{o(null),d(null)},W=(J,V)=>{if(J.preventDefault(),d(null),s!=="custom"||l===null||l===V){o(null);return}const ie=[...$],[pe]=ie.splice(l,1);ie.splice(V,0,pe),n(ie),w(ie),o(null)},se=J=>{const V=t.filter(ie=>ie!==J);if(V.length===0){p("At least one site is required.");return}p(null),w(V)};return g?m?r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Internet Dashboard"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Loading sites"})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs(ce,{to:"/internet-dashboard",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Internet Dashboard"]}),r.jsxs("header",{className:"space-y-2",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Internet Dashboard"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Edit the list of sites shown on the Internet Dashboard. Only SuperAdmin can change this."})]}),r.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-4 max-w-2xl",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsxs("h2",{className:"text-base font-semibold text-slate-200",children:["Sites list (",t.length,")"]}),r.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[r.jsx("button",{type:"button",onClick:()=>a("custom"),className:`rounded px-2 py-0.5 text-xs font-medium ${s==="custom"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"Custom"}),r.jsx("button",{type:"button",onClick:()=>a("a-z"),className:`rounded px-2 py-0.5 text-xs font-medium ${s==="a-z"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"AZ"}),r.jsx("button",{type:"button",onClick:()=>a("z-a"),className:`rounded px-2 py-0.5 text-xs font-medium ${s==="z-a"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"ZA"})]})]}),r.jsxs("form",{onSubmit:E,className:"flex gap-2 flex-wrap items-end",children:[r.jsxs("div",{className:"flex-1 min-w-[12rem]",children:[r.jsx("label",{htmlFor:"newDomain",className:"block text-xs font-medium text-slate-400 mb-1",children:"Add domain"}),r.jsx("input",{id:"newDomain",type:"text",value:u,onChange:J=>f(J.target.value),placeholder:"example.com",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),r.jsx("button",{type:"submit",disabled:v||!u.trim(),className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:"Add"})]}),r.jsx("ul",{className:"space-y-2",children:$.map((J,V)=>r.jsxs("li",{draggable:s==="custom",onDragStart:()=>R(V),onDragOver:ie=>H(ie,V),onDragLeave:O,onDragEnd:q,onDrop:ie=>W(ie,V),className:`flex items-center gap-2 rounded-md border px-3 py-2 ${l===V?"border-brand-orange bg-slate-800 opacity-60":c===V?"border-brand-orange/70 bg-slate-800/80":"border-slate-700 bg-slate-900"} ${s==="custom"?"cursor-grab active:cursor-grabbing":""}`,children:[s==="custom"&&r.jsx(Qc,{className:"h-4 w-4 flex-shrink-0 text-slate-500","aria-hidden":!0}),r.jsx("span",{className:"font-medium text-slate-200 break-all flex-1",children:J}),r.jsx("button",{type:"button",onClick:()=>se(J),disabled:v||t.length<=1,className:"flex-shrink-0 rounded-md border border-red-500/60 bg-red-500/10 px-2 py-1 text-xs font-medium text-red-300 hover:bg-red-500/20 disabled:opacity-50",children:"Remove"})]},J))}),y&&r.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:y}),x&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:x})]})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Internet Dashboard"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Only SuperAdmin users can edit the dashboard sites list."})]})};function Ro(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function Au(e){const t=e.trim();return t?t.toLowerCase().startsWith("http://")||t.toLowerCase().startsWith("https://")?t:`https://${t.replace(/^https?:\/\//i,"")}`:null}function $u(e){try{return new URL(e.startsWith("http")?e:`https://${e}`).hostname}catch{return e}}const vs=[{id:"highlights",label:"Highlights",fetchPath:"/admin/recommended/highlights/sites",savePath:"/admin/recommended/highlights/sites",generatePath:"/admin/recommended/highlights/generate",generateLabel:"Generate new cache",listLabel:"Highlights list",emptyMessage:"No highlights yet. Generate from the highlight category or add a URL above.",generateSuccessMessage:"Cache generated from sites in the highlight category.",saveSuccessMessage:"Highlights list saved.",buttonClass:"bg-violet-600 hover:bg-violet-500",viewPath:"/recommended/highlights"},{id:"highestRated",label:"Highest Rated",fetchPath:"/admin/recommended/highest-rated/sites",savePath:"/admin/recommended/highest-rated/sites",generatePath:"/admin/recommended/highest-rated/generate",generateLabel:"Generate new cache",listLabel:"Highest rated list",emptyMessage:"No items yet. Generate from top 12 by star rating or add a URL above.",generateSuccessMessage:"Cache generated from top 12 sites and media by star rating.",saveSuccessMessage:"Highest rated list saved.",buttonClass:"bg-amber-600 hover:bg-amber-500",viewPath:"/recommended/highest-rated"}],Iu=({config:e})=>{const[t,n]=i.useState([]),[s,a]=i.useState(null),[l,o]=i.useState(!1),[c,d]=i.useState("custom"),[u,f]=i.useState(null),[m,h]=i.useState(null),[v,b]=i.useState(""),[y,C]=i.useState(null),[x,p]=i.useState(""),[g,j]=i.useState(!1),[w,E]=i.useState(null),[$,R]=i.useState(null),H=i.useRef([]);i.useEffect(()=>{H.current=t},[t]);const O=i.useCallback(async()=>{const M=Ro();if(M){R(null);try{const F=await Q(`${M}${e.fetchPath}`);if(!F.ok){const T=await F.json().catch(()=>({}));throw new Error(T.error||"Failed to load")}const Z=await F.json(),N=Array.isArray(Z.sites)?Z.sites:[];n(N.map(T=>typeof T=="string"?{type:"site",url:T,description:""}:(T.type||"site")==="media"?{type:"media",id:T.id||"",description:T.description||"",title:T.title,thumbnailKey:T.thumbnailKey,averageRating:T.averageRating}:{type:"site",url:T.url||"",description:T.description||"",title:T.title,logoKey:T.logoKey,averageRating:T.averageRating})),a(Z.updatedAt??null)}catch(F){R((F==null?void 0:F.message)??"Failed to load sites.")}}},[Q,e.fetchPath]);i.useEffect(()=>{O()},[O]);const q=async()=>{const M=Ro();if(M){o(!0),E(null),R(null);try{const F=await Q(`${M}${e.generatePath}`,{method:"POST"}),Z=await F.json();if(!F.ok)throw new Error(Z.error||"Failed to generate");const N=Array.isArray(Z.sites)?Z.sites:[];n(N.map(T=>typeof T=="string"?{type:"site",url:T,description:""}:(T.type||"site")==="media"?{type:"media",id:T.id||"",description:T.description||"",title:T.title,thumbnailKey:T.thumbnailKey,averageRating:T.averageRating}:{type:"site",url:T.url||"",description:T.description||"",title:T.title,logoKey:T.logoKey,averageRating:T.averageRating})),a(Z.updatedAt??null),E(e.generateSuccessMessage)}catch(F){R((F==null?void 0:F.message)??"Failed to generate cache.")}finally{o(!1)}}},W=async M=>{const F=Ro();if(F){j(!0),E(null),R(null);try{const Z={sites:M.map(G=>G.type==="media"?{type:"media",id:G.id,description:G.description,...G.title&&{title:G.title},...G.thumbnailKey&&{thumbnailKey:G.thumbnailKey},...G.averageRating!=null&&{averageRating:G.averageRating}}:{type:"site",url:G.url,description:G.description,...G.title&&{title:G.title},...G.logoKey&&{logoKey:G.logoKey},...G.averageRating!=null&&{averageRating:G.averageRating}})},N=await Q(`${F}${e.savePath}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Z)}),T=await N.json();if(!N.ok)throw new Error(T.error||"Failed to save");n(M),E(e.saveSuccessMessage),a(T.updatedAt??null)}catch(Z){R((Z==null?void 0:Z.message)??"Failed to save.")}finally{j(!1)}}},se=M=>{M.preventDefault();const F=Au(v);if(F){if(t.some(Z=>Z.url===F)){R("URL already in list.");return}b(""),R(null),W([...t,{type:"site",url:F,description:""}])}},J=M=>M.type==="media"?(M.title||M.id||"").toLowerCase():$u(M.url||"").toLowerCase(),V=i.useMemo(()=>{if(c==="custom")return[...t];const M=[...t];return M.sort((F,Z)=>{const N=J(F),T=J(Z);return c==="a-z"?N.localeCompare(T):T.localeCompare(N)}),M},[t,c]),ie=M=>{const F=V[M];F.type!=="media"&&(C(M),p(F.url||""))},pe=()=>{if(y===null)return;const M=Au(x);if(!M){R("Invalid URL.");return}const F=V[y];if(F.type==="media")return;if(t.some(N=>N.type==="site"&&N.url===M&&N.url!==F.url)){R("URL already in list.");return}R(null);const Z=t.map(N=>N.type==="site"&&N.url===F.url?{...N,url:M}:N);n(Z),W(Z),C(null),p("")},S=()=>{C(null),p("")},P=(M,F)=>{n(Z=>Z.map(N=>(N.type==="media"?N.id===M.id:N.url===M.url)?{...N,description:F.slice(0,255)}:N))},I=()=>{W(H.current)},B=M=>f(M),k=(M,F)=>{M.preventDefault(),M.dataTransfer.dropEffect="move",h(F)},K=()=>h(null),ne=()=>{f(null),h(null)},_=(M,F)=>{if(M.preventDefault(),h(null),c!=="custom"||u===null||u===F){f(null);return}const Z=[...V],[N]=Z.splice(u,1);Z.splice(F,0,N),n(Z),W(Z),f(null)},z=M=>{R(null),W(t.filter(F=>F.type==="media"?F.id!==M.id:F.url!==M.url))},U=s?new Date(s).toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"}):null;return r.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-4 max-w-2xl",children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsxs("h2",{className:"text-base font-semibold text-slate-200",children:[e.listLabel," (",t.length,")"]}),U&&r.jsxs("span",{className:"text-xs text-slate-500",children:["Cache was last updated ",U]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ce,{to:e.viewPath,className:"text-sm text-slate-400 hover:text-slate-200",children:"View"}),r.jsx("button",{type:"button",onClick:q,disabled:l,className:`rounded-md px-4 py-2 text-sm font-medium text-white disabled:opacity-50 ${e.buttonClass}`,children:l?"Generating":e.generateLabel})]})]}),r.jsx("div",{className:"flex flex-wrap items-center gap-3",children:r.jsx("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:["custom","a-z","z-a"].map(M=>r.jsx("button",{type:"button",onClick:()=>d(M),className:`rounded px-2 py-0.5 text-xs font-medium ${c===M?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:M==="custom"?"Custom":M==="a-z"?"AZ":"ZA"},M))})}),r.jsxs("form",{onSubmit:se,className:"flex gap-2 flex-wrap items-end",children:[r.jsxs("div",{className:"flex-1 min-w-[12rem]",children:[r.jsx("label",{htmlFor:"newUrl",className:"block text-xs font-medium text-slate-400 mb-1",children:"Add URL"}),r.jsx("input",{id:"newUrl",type:"text",value:v,onChange:M=>b(M.target.value),placeholder:"https://example.com or example.com",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),r.jsx("button",{type:"submit",disabled:g||!v.trim(),className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:"Add"})]}),r.jsx("ul",{className:"space-y-3",children:V.map((M,F)=>r.jsxs("li",{draggable:c==="custom"&&y===null,onDragStart:()=>B(F),onDragOver:Z=>k(Z,F),onDragLeave:K,onDragEnd:ne,onDrop:Z=>_(Z,F),className:`flex flex-col gap-2 rounded-md border px-3 py-2 ${u===F?"border-brand-orange bg-slate-800 opacity-60":m===F?"border-brand-orange/70 bg-slate-800/80":"border-slate-700 bg-slate-900"} ${c==="custom"&&y===null?"cursor-grab active:cursor-grabbing":""}`,children:[r.jsxs("div",{className:"flex items-center gap-2",children:[c==="custom"&&r.jsx(Qc,{className:"h-4 w-4 flex-shrink-0 text-slate-500","aria-hidden":!0}),y===F?r.jsx("input",{type:"text",value:x,onChange:Z=>p(Z.target.value),onBlur:pe,onKeyDown:Z=>{Z.key==="Enter"&&pe(),Z.key==="Escape"&&S()},autoFocus:!0,className:"flex-1 rounded-md border border-slate-600 bg-slate-900 px-2 py-1 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}):M.type==="media"?r.jsx("span",{className:"font-medium text-slate-200 break-all flex-1",children:M.title||M.id}):r.jsx("button",{type:"button",onClick:()=>ie(F),className:"font-medium text-slate-200 break-all flex-1 text-left hover:text-brand-orange hover:underline",children:$u(M.url||"")}),e.id==="highestRated"&&M.averageRating!=null&&r.jsxs("span",{className:"flex items-center gap-0.5 text-amber-400 text-xs",children:[r.jsx(Bp,{className:"h-3.5 w-3.5"}),M.averageRating]}),r.jsx("button",{type:"button",onClick:()=>z(M),disabled:g||y!==null,className:"flex-shrink-0 rounded-md border border-red-500/60 bg-red-500/10 px-2 py-1 text-xs font-medium text-red-300 hover:bg-red-500/20 disabled:opacity-50",children:"Remove"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:`desc-${e.id}-${F}`,className:"block text-xs font-medium text-slate-400 mb-0.5",children:"Description"}),r.jsx("input",{id:`desc-${e.id}-${F}`,type:"text",value:M.description,onChange:Z=>P(M,Z.target.value),onBlur:I,maxLength:255,placeholder:"One-line description (255 chars max)",disabled:g,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange disabled:opacity-50"}),r.jsxs("span",{className:"text-[10px] text-slate-500",children:[M.description.length,"/255"]})]})]},M.id||M.url||F))}),V.length===0&&r.jsx("p",{className:"text-sm text-slate-500",children:e.emptyMessage}),w&&r.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:w}),$&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:$})]})},fb=()=>{const{user:e}=Ae(),[t,n]=qt(),s=t.get("tab"),a=s==="highest-rated"||s==="highestRated"?"highestRated":"highlights",[l,o]=i.useState(a);i.useEffect(()=>{o(s==="highest-rated"||s==="highestRated"?"highestRated":"highlights")},[s]);const c=u=>{o(u),n({tab:u==="highestRated"?"highest-rated":u},{replace:!0})},d=dt(e??null,"manager");return vs.find(u=>u.id===l)??vs[0],d?r.jsxs("div",{className:"space-y-6",children:[r.jsxs(ce,{to:"/recommended/highlights",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Recommended"]}),r.jsxs("header",{className:"space-y-2",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Recommended Admin"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Manage highlighted and highest-rated site lists. Generate from categories or star ratings, or edit manually."})]}),r.jsx("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:vs.map(u=>r.jsx("button",{type:"button",onClick:()=>c(u.id),className:`px-4 py-2 rounded-md text-sm font-medium ${l===u.id?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:u.label},u.id))}),l==="highlights"&&r.jsx(Iu,{config:vs[0]}),l==="highestRated"&&r.jsx(Iu,{config:vs[1]})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Recommended Admin"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Only Manager or SuperAdmin users can edit the recommended caches."})]})},Ra={admin:"SuperAdmin",manager:"Manager",user:"User"},Uu=["admin","manager","user"],Ki=[{value:-8,label:"UTC-8"},{value:-5,label:"UTC-5"},{value:0,label:"UTC+0/GMT"}];function an(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function pb(e,t,n){if(!e&&!n)return"";if(!e)return n?`from ${n}`:"";try{const s=new Date(e);if(isNaN(s.getTime()))return e+(n?` from ${n}`:"");const a=s.getTime()+(t||0)*36e5,l=new Date(a),o=y=>y<10?"0"+y:""+y,c=l.getUTCFullYear(),d=o(l.getUTCMonth()+1),u=o(l.getUTCDate()),f=o(l.getUTCHours()),m=o(l.getUTCMinutes()),h=Ki.find(y=>y.value===t),v=h?h.label:t<0?"UTC"+t:"UTC+"+t;let b=`${c}-${d}-${u} ${f}:${m} ${v}`;return n&&(b+=` from ${n}`),b}catch{return e+(n?` from ${n}`:"")}}const hb=()=>{const{user:e}=Ae(),t=$t(),[n,s]=qt(),a=n.get("tab"),l=a==="groups"?"groups":a==="roles"?"roles":"users",[o,c]=i.useState(l);i.useEffect(()=>{c(a==="groups"?"groups":a==="roles"?"roles":"users")},[a]);const d=L=>{c(L);const te=new URLSearchParams(n);L==="groups"?te.set("tab","groups"):L==="roles"?te.set("tab","roles"):te.delete("tab"),s(te)},[u,f]=i.useState([]),[m,h]=i.useState(!0),[v,b]=i.useState(null),[y,C]=i.useState(""),[x,p]=i.useState(-8),[g,j]=i.useState([]),[w,E]=i.useState(!0),[$,R]=i.useState(null),[H,O]=i.useState(""),[q,W]=i.useState(""),[se,J]=i.useState(""),[V,ie]=i.useState(!1),[pe,S]=i.useState(null),[P,I]=i.useState(null),[B,k]=i.useState(""),[K,ne]=i.useState(""),[_,z]=i.useState(!1),[U,M]=i.useState(null),[F,Z]=i.useState(null),[N,T]=i.useState([]),[G,Y]=i.useState(!0),[D,X]=i.useState(null),[ae,ue]=i.useState(""),[xe,ye]=i.useState([]),[be,Ke]=i.useState([]),[lt,le]=i.useState(!1),[Ne,Fe]=i.useState(null),[Te,Se]=i.useState(null),[_e,Be]=i.useState([]),[et,ot]=i.useState([]),[nt,It]=i.useState(!1),[fn,Et]=i.useState(null),[rn,oe]=i.useState(null),ge=dt(e??null,"manager"),We=(e==null?void 0:e.role)==="superadmin",Ue=async L=>{var de;const te=an();if(!te){b("API URL not set."),h(!1);return}if(!((de=window.auth)!=null&&de.getAccessToken)){b("Sign in required."),h(!1);return}h(!0),b(null);try{let je=`${te}/admin/users`;L&&(je+=`?paginationToken=${encodeURIComponent(L)}`);const we=await Q(je);if(!we.ok){const Jt=await we.json().catch(()=>({}));throw new Error(Jt.error||"Failed to load users")}const Pe=await we.json();f(Jt=>L?[...Jt,...Pe.users??[]]:Pe.users??[]),C(Pe.paginationToken??"")}catch(je){b((je==null?void 0:je.message)??"Failed to load users")}finally{h(!1)}},ke=async L=>{const te=an();if(!te)return{cognitoGroups:[],customGroups:[]};try{const ve=await Q(`${te}/admin/users/${encodeURIComponent(L.username)}/groups`);if(!ve.ok)return{cognitoGroups:[],customGroups:[]};const de=await ve.json();return{cognitoGroups:de.cognitoGroups??[],customGroups:de.customGroups??[]}}catch{return{cognitoGroups:[],customGroups:[]}}},ee=async()=>{var ve;const L=an();if(!L){R("API URL not set."),E(!1);return}if(!((ve=window.auth)!=null&&ve.getAccessToken)){R("Sign in required."),E(!1);return}E(!0),R(null);try{const de=await Q(`${L}/admin/groups`);if(!de.ok)throw new Error(await de.text());const we=((await de.json()).groups??[]).map(Pe=>({name:Pe.name??(Pe.PK??"").replace("GROUP#",""),description:Pe.description,permissions:Array.isArray(Pe.permissions)?Pe.permissions:[]}));we.sort((Pe,Jt)=>Pe.name.toLowerCase().localeCompare(Jt.name.toLowerCase())),j(we)}catch(de){R((de==null?void 0:de.message)??"Failed to load groups")}finally{E(!1)}};i.useEffect(()=>{const L=parseInt(sessionStorage.getItem("funkedupshift_lastlogin_tz")??"-8",10);!isNaN(L)&&Ki.some(te=>te.value===L)&&p(L)},[]),i.useEffect(()=>{ge&&o==="users"&&Ue()},[ge,o]),i.useEffect(()=>{ge&&(o==="groups"||o==="roles")&&ee()},[ge,o]);const me=async()=>{var ve;const L=an();if(!L){X("API URL not set."),Y(!1);return}if(!((ve=window.auth)!=null&&ve.getAccessToken)){X("Sign in required."),Y(!1);return}Y(!0),X(null);try{const de=await Q(`${L}/admin/roles`);if(!de.ok){const we=await de.json().catch(()=>({}));throw new Error(we.error||"Failed to load roles")}const je=await de.json();T(je.roles??[])}catch(de){X((de==null?void 0:de.message)??"Failed to load roles")}finally{Y(!1)}};i.useEffect(()=>{We&&o==="roles"&&me()},[We,o]);const Me=L=>{t(`/admin/users/edit?username=${encodeURIComponent(L.username)}&email=${encodeURIComponent(L.email??"")}&status=${encodeURIComponent(L.status??"")}`)},De=(L,te)=>{const ve=[];return(L||[]).forEach(de=>{const je=Ra[de]||de,we=de==="admin"?"bg-amber-500/20 text-amber-200":de==="manager"?"bg-blue-500/20 text-blue-200":"bg-slate-600/30 text-slate-300";ve.push(r.jsx("span",{className:`inline-block px-2 py-0.5 rounded text-xs mr-1 ${we}`,children:je},`c-${de}`))}),(te||[]).forEach(de=>{ve.push(r.jsx("span",{className:"inline-block px-2 py-0.5 rounded text-xs mr-1 bg-emerald-500/20 text-emerald-200",children:de},`x-${de}`))}),ve.length?ve:r.jsx("span",{className:"text-slate-500",children:""})},Ee=L=>{I(L.name),k(L.description??""),ne((L.permissions??[]).join(", ")),M(null)},Le=()=>{I(null),k(""),ne(""),M(null)},Oe=async L=>{var we;L.preventDefault();const te=H.trim();if(!te)return;const ve=an();if(!ve||!((we=window.auth)!=null&&we.getAccessToken))return;const je=se.split(",").map(Pe=>Pe.trim()).filter(Boolean);ie(!0),S(null),R(null);try{const Pe=await Q(`${ve}/admin/groups`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:te,description:q.trim(),permissions:je})});if(!Pe.ok){const Jt=await Pe.json().catch(()=>({}));throw new Error(Jt.error||"Failed to create group")}O(""),W(""),J(""),S("Group created."),ee()}catch(Pe){R((Pe==null?void 0:Pe.message)??"Failed to create group")}finally{ie(!1)}},pn=async L=>{var je;if(L.preventDefault(),!P)return;const te=an();if(!te||!((je=window.auth)!=null&&je.getAccessToken))return;const de=K.split(",").map(we=>we.trim()).filter(Boolean);z(!0),M(null);try{const we=await Q(`${te}/admin/groups/${encodeURIComponent(P)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:B,permissions:de})});if(!we.ok){const Pe=await we.json().catch(()=>({}));throw new Error(Pe.error||"Failed to update group")}j(Pe=>Pe.map(Jt=>Jt.name===P?{...Jt,description:B,permissions:de}:Jt)),Le()}catch(we){M((we==null?void 0:we.message)??"Failed to update group")}finally{z(!1)}},hn=async L=>{var de;if(!window.confirm(`Delete group "${L}"? Members will lose access.`))return;const te=an();if(!(!te||!((de=window.auth)!=null&&de.getAccessToken))){Z(L);try{const je=await Q(`${te}/admin/groups/${encodeURIComponent(L)}`,{method:"DELETE"});if(!je.ok){const we=await je.json().catch(()=>({}));throw new Error(we.error||"Failed to delete group")}j(we=>we.filter(Pe=>Pe.name!==L)),P===L&&Le()}catch(je){R((je==null?void 0:je.message)??"Failed to delete group")}finally{Z(null)}}},gt=L=>{const te=parseInt(L.target.value,10);p(te),sessionStorage.setItem("funkedupshift_lastlogin_tz",String(te))},ut=(L,te,ve)=>{te.includes(L)?ve(te.filter(de=>de!==L)):ve([...te,L])},xn=(L,te,ve)=>{te.includes(L)?ve(te.filter(de=>de!==L)):ve([...te,L])},is=async L=>{var je;L.preventDefault();const te=ae.trim();if(!te)return;const ve=an();if(!(!ve||!((je=window.auth)!=null&&je.getAccessToken))){le(!0),Fe(null),X(null);try{const we=await Q(`${ve}/admin/roles`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:te,cognitoGroups:xe,customGroups:be})});if(!we.ok){const Pe=await we.json().catch(()=>({}));throw new Error(Pe.error||"Failed to create role")}ue(""),ye([]),Ke([]),Fe("Role created."),me()}catch(we){X((we==null?void 0:we.message)??"Failed to create role")}finally{le(!1)}}},Hl=L=>{Se(L.name),Be(L.cognitoGroups??[]),ot(L.customGroups??[]),Et(null)},Bt=()=>{Se(null),Be([]),ot([]),Et(null)},A=async L=>{var de;if(L.preventDefault(),!Te)return;const te=an();if(!(!te||!((de=window.auth)!=null&&de.getAccessToken))){It(!0),Et(null);try{const je=await Q(`${te}/admin/roles/${encodeURIComponent(Te)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({cognitoGroups:_e,customGroups:et})});if(!je.ok){const we=await je.json().catch(()=>({}));throw new Error(we.error||"Failed to update role")}T(we=>we.map(Pe=>Pe.name===Te?{...Pe,cognitoGroups:_e,customGroups:et}:Pe)),Bt()}catch(je){Et((je==null?void 0:je.message)??"Failed to update role")}finally{It(!1)}}},he=async L=>{var de;if(!window.confirm(`Delete role "${L}"?`))return;const te=an();if(!(!te||!((de=window.auth)!=null&&de.getAccessToken))){oe(L);try{const je=await Q(`${te}/admin/roles/${encodeURIComponent(L)}`,{method:"DELETE"});if(!je.ok){const we=await je.json().catch(()=>({}));throw new Error(we.error||"Failed to delete role")}T(we=>we.filter(Pe=>Pe.name!==L)),Te===L&&Bt()}catch(je){X((je==null?void 0:je.message)??"Failed to delete role")}finally{oe(null)}}};return ge?r.jsxs("div",{className:"space-y-6",children:[r.jsxs(ce,{to:"/",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Home"]}),r.jsxs("header",{className:"space-y-2",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Membership"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Manage users and groups."})]}),r.jsxs("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:[r.jsx("button",{type:"button",onClick:()=>d("users"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="users"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Users"}),r.jsx("button",{type:"button",onClick:()=>d("groups"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="groups"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Groups"}),We&&r.jsx("button",{type:"button",onClick:()=>d("roles"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="roles"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Roles"})]}),o==="users"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("label",{htmlFor:"tz-select",className:"text-slate-500",children:"Last login timezone:"}),r.jsx("select",{id:"tz-select",value:x,onChange:gt,className:"rounded border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 text-sm",children:Ki.map(L=>r.jsx("option",{value:L.value,children:L.label},L.value))})]}),v&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:v}),r.jsx("div",{className:"overflow-x-auto rounded-lg border border-slate-800",children:r.jsxs("table",{className:"min-w-full divide-y divide-slate-800",children:[r.jsx("thead",{className:"bg-slate-900/80",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Email"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Status"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Last login"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"System Roles"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Custom Groups"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-800",children:m&&u.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-slate-500",children:"Loading"})}):u.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-slate-500",children:"No users found."})}):u.map(L=>r.jsx(xb,{user:L,tzOffset:x,formatLastLogin:pb,renderGroupBadges:De,loadUserGroups:ke,onClick:()=>Me(L)},L.username))})]})}),y&&r.jsx("div",{className:"flex justify-center",children:r.jsx("button",{type:"button",onClick:()=>Ue(y),disabled:m,className:"rounded-md border border-slate-700 px-4 py-2 text-sm font-medium text-slate-200 hover:bg-slate-800 disabled:opacity-50",children:m?"Loading":"Load more"})})]}),o==="groups"&&r.jsxs(r.Fragment,{children:[r.jsxs("form",{className:"space-y-3 max-w-md",onSubmit:Oe,children:[r.jsx("h2",{className:"text-sm font-medium text-slate-300",children:"Create group"}),r.jsx("input",{type:"text",value:H,onChange:L=>O(L.target.value),placeholder:"Name (alphanumeric, underscore, hyphen)",required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),r.jsx("input",{type:"text",value:q,onChange:L=>W(L.target.value),placeholder:"Description (optional)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),r.jsx("input",{type:"text",value:se,onChange:L=>J(L.target.value),placeholder:"Permissions (comma-separated, e.g. media:edit, sites:add)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),r.jsx("button",{type:"submit",disabled:V||!H.trim(),className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:V?"Creating":"Create"}),pe&&r.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:pe}),$&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:$})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-sm font-medium text-slate-300 mb-2",children:"Custom groups"}),w?r.jsx("p",{className:"text-sm text-slate-500",children:"Loading"}):g.length===0?r.jsx("p",{className:"text-sm text-slate-500",children:"No custom groups yet. Create one above."}):r.jsx("ul",{className:"space-y-2",children:g.map(L=>r.jsx("li",{className:"rounded-lg border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm",children:P===L.name?r.jsxs("form",{onSubmit:pn,className:"space-y-2",children:[r.jsx("span",{className:"font-medium text-slate-200",children:L.name}),r.jsx("input",{type:"text",value:B,onChange:te=>k(te.target.value),placeholder:"Description (optional)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),r.jsx("input",{type:"text",value:K,onChange:te=>ne(te.target.value),placeholder:"Permissions (comma-separated)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),r.jsxs("div",{className:"flex gap-2 flex-wrap",children:[r.jsx("button",{type:"submit",disabled:_,className:"rounded-md bg-brand-orange px-3 py-1.5 text-xs font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:_?"Saving":"Save"}),r.jsx("button",{type:"button",onClick:Le,className:"rounded-md border border-slate-700 px-3 py-1.5 text-xs font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"}),r.jsx("button",{type:"button",onClick:()=>hn(L.name),disabled:F===L.name,className:"rounded-md border border-red-500/60 px-3 py-1.5 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:F===L.name?"Deleting":"Delete"})]}),U&&r.jsx("p",{className:"text-xs text-red-400",children:U})]}):r.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("span",{className:"font-medium text-slate-200",children:L.name}),L.description&&r.jsx("span",{className:"text-slate-500 ml-2",children:L.description}),L.permissions&&L.permissions.length>0&&r.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Permissions: ",L.permissions.join(", ")]})]}),r.jsxs("div",{className:"flex gap-2 shrink-0",children:[r.jsx("button",{type:"button",onClick:()=>Ee(L),className:"rounded-md border border-slate-700 px-2 py-1 text-xs font-medium text-slate-300 hover:bg-slate-800",children:"Edit"}),r.jsx("button",{type:"button",onClick:()=>hn(L.name),disabled:F===L.name,className:"rounded-md border border-red-500/60 px-2 py-1 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:F===L.name?"Deleting":"Delete"})]})]})},L.name))})]})]}),o==="roles"&&We&&r.jsxs(r.Fragment,{children:[r.jsxs("form",{className:"space-y-3 max-w-md",onSubmit:is,children:[r.jsx("h2",{className:"text-sm font-medium text-slate-300",children:"Create role"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Define a named role by selecting Cognito groups and custom groups. Use for impersonation."}),r.jsx("input",{type:"text",value:ae,onChange:L=>ue(L.target.value),placeholder:"Role name (e.g. Squash Manager)",required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Cognito groups"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:Uu.map(L=>r.jsx("button",{type:"button",onClick:()=>ut(L,xe,ye),className:`rounded-md px-2 py-1 text-xs font-medium ${xe.includes(L)?"bg-blue-500/30 text-blue-200":"border border-slate-600 text-slate-400 hover:bg-slate-800"}`,children:Ra[L]||L},L))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Custom groups"}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[g.map(L=>r.jsx("button",{type:"button",onClick:()=>xn(L.name,be,Ke),className:`rounded-md px-2 py-1 text-xs font-medium ${be.includes(L.name)?"bg-emerald-500/30 text-emerald-200":"border border-slate-600 text-slate-400 hover:bg-slate-800"}`,children:L.name},L.name)),g.length===0&&r.jsx("span",{className:"text-xs text-slate-500",children:"Create groups first."})]})]}),r.jsx("button",{type:"submit",disabled:lt||!ae.trim(),className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:lt?"Creating":"Create"}),Ne&&r.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:Ne}),D&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:D})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-sm font-medium text-slate-300 mb-2",children:"Defined roles"}),G?r.jsx("p",{className:"text-sm text-slate-500",children:"Loading"}):N.length===0?r.jsx("p",{className:"text-sm text-slate-500",children:"No roles yet. Create one above."}):r.jsx("ul",{className:"space-y-2",children:N.map(L=>r.jsx("li",{className:"rounded-lg border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm",children:Te===L.name?r.jsxs("form",{onSubmit:A,className:"space-y-2",children:[r.jsx("span",{className:"font-medium text-slate-200",children:L.name}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Cognito groups"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:Uu.map(te=>r.jsx("button",{type:"button",onClick:()=>ut(te,_e,Be),className:`rounded-md px-2 py-1 text-xs ${_e.includes(te)?"bg-blue-500/30 text-blue-200":"border border-slate-600 text-slate-400"}`,children:Ra[te]||te},te))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Custom groups"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(te=>r.jsx("button",{type:"button",onClick:()=>xn(te.name,et,ot),className:`rounded-md px-2 py-1 text-xs ${et.includes(te.name)?"bg-emerald-500/30 text-emerald-200":"border border-slate-600 text-slate-400"}`,children:te.name},te.name))})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"submit",disabled:nt,className:"rounded-md bg-brand-orange px-3 py-1.5 text-xs font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:nt?"Saving":"Save"}),r.jsx("button",{type:"button",onClick:Bt,className:"rounded-md border border-slate-700 px-3 py-1.5 text-xs text-slate-300 hover:bg-slate-800",children:"Cancel"}),r.jsx("button",{type:"button",onClick:()=>he(L.name),disabled:rn===L.name,className:"rounded-md border border-red-500/60 px-3 py-1.5 text-xs text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:rn===L.name?"Deleting":"Delete"})]}),fn&&r.jsx("p",{className:"text-xs text-red-400",children:fn})]}):r.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("span",{className:"font-medium text-slate-200",children:L.name}),r.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[(L.cognitoGroups??[]).map(te=>r.jsx("span",{className:"inline-block px-2 py-0.5 rounded text-xs bg-blue-500/20 text-blue-200",children:Ra[te]||te},`c-${te}`)),(L.customGroups??[]).map(te=>r.jsx("span",{className:"inline-block px-2 py-0.5 rounded text-xs bg-emerald-500/20 text-emerald-200",children:te},`x-${te}`))]})]}),r.jsxs("div",{className:"flex gap-2 shrink-0",children:[r.jsx("button",{type:"button",onClick:()=>Hl(L),className:"rounded-md border border-slate-700 px-2 py-1 text-xs text-slate-300 hover:bg-slate-800",children:"Edit"}),r.jsx("button",{type:"button",onClick:()=>he(L.name),disabled:rn===L.name,className:"rounded-md border border-red-500/60 px-2 py-1 text-xs text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:rn===L.name?"Deleting":"Delete"})]})]})},L.name))})]})]})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Membership"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})},xb=({user:e,tzOffset:t,formatLastLogin:n,renderGroupBadges:s,loadUserGroups:a,onClick:l})=>{const[o,c]=i.useState(null);return i.useEffect(()=>{let d=!1;return a(e).then(u=>{d||c(u)}),()=>{d=!0}},[e.username]),r.jsxs("tr",{className:"cursor-pointer hover:bg-slate-800/50 transition-colors",onClick:l,children:[r.jsx("td",{className:"px-4 py-3 text-sm text-slate-200",children:e.email||e.username||""}),r.jsx("td",{className:"px-4 py-3 text-sm text-slate-400",children:e.status||""}),r.jsx("td",{className:"px-4 py-3 text-sm text-slate-400",children:n(e.lastLoginAt??"",t,e.lastLoginIp)}),r.jsx("td",{className:"px-4 py-3 text-sm",children:o?s(o.cognitoGroups,[]):r.jsx("span",{className:"text-slate-500",children:""})}),r.jsx("td",{className:"px-4 py-3 text-sm",children:o?s([],o.customGroups):r.jsx("span",{className:"text-slate-500",children:""})})]})};function nr(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Mu=100,gb=5*1024*1024,yb=()=>{const e=$t(),{user:t}=Ae(),[n,s]=qt(),a=n.get("tab"),l=a==="categories"?"categories":"add",[o,c]=i.useState(l);i.useEffect(()=>{c(a==="categories"?"categories":"add")},[a]);const d=ee=>{c(ee);const me=new URLSearchParams(n);ee==="categories"?me.set("tab","categories"):me.delete("tab"),s(me)},[u,f]=i.useState([]),[m,h]=i.useState(""),[v,b]=i.useState(""),[y,C]=i.useState(""),[x,p]=i.useState(!1),[g,j]=i.useState(null),[w,E]=i.useState(null),[$,R]=i.useState(null),[H,O]=i.useState(""),[q,W]=i.useState([]),[se,J]=i.useState(""),[V,ie]=i.useState(!1),[pe,S]=i.useState(!1),[P,I]=i.useState(null),[B,k]=i.useState(null),[K,ne]=i.useState(!1),_=i.useRef(null),[z,U]=i.useState(!0),[M,F]=i.useState(null),[Z,N]=i.useState(""),[T,G]=i.useState(""),[Y,D]=i.useState(!1),[X,ae]=i.useState(null),[ue,xe]=i.useState(null),[ye,be]=i.useState(""),[Ke,lt]=i.useState(""),[le,Ne]=i.useState(!1),[Fe,Te]=i.useState(null),[Se,_e]=i.useState(null),Be=dt(t??null,"manager");i.useEffect(()=>{var Me;if(!Be)return;const ee=nr();if(!ee)return;const me=window;(Me=me.auth)!=null&&Me.getAccessToken&&(async()=>{if(!await new Promise(Oe=>me.auth.getAccessToken(Oe)))return;const De=await Q(`${ee}/categories`);if(!De.ok)return;const Le=((await De.json()).categories??[]).map(Oe=>({id:Oe.PK||Oe.id||"",name:Oe.name||Oe.PK||"",description:Oe.description}));f(Le)})()},[Be]),i.useEffect(()=>{function ee(me){_.current&&!_.current.contains(me.target)&&ie(!1)}if(V)return document.addEventListener("mousedown",ee),()=>document.removeEventListener("mousedown",ee)},[V]);const et=u.filter(ee=>!q.includes(ee.id)&&(!se.trim()||(ee.name||"").toLowerCase().includes(se.toLowerCase()))),ot=ee=>{var De;const me=(De=ee.target.files)==null?void 0:De[0];if(j(me??null),me&&O(""),R(null),w&&(URL.revokeObjectURL(w),E(null)),!me)return;if(me.size>gb){R("Logo must be 5 MB or smaller.");return}const Me=new Image;Me.onload=()=>{if(Me.naturalWidth<Mu||Me.naturalHeight<Mu){R("Logo must be at least 100100 pixels.");return}R(null),E(URL.createObjectURL(me))},Me.onerror=()=>R("Please choose a valid image file."),Me.src=URL.createObjectURL(me)},nt=ee=>{q.includes(ee)||W([...q,ee]),J("")},It=ee=>{W(q.filter(me=>me!==ee))},fn=async()=>{var Me;const ee=nr();if(!ee){F("API URL not set."),U(!1);return}if(!((Me=window.auth)!=null&&Me.getAccessToken)){F("Sign in required."),U(!1);return}U(!0),F(null);try{const De=await Q(`${ee}/categories`);if(!De.ok)throw new Error(await De.text());const Le=((await De.json()).categories??[]).map(Oe=>({id:Oe.PK||Oe.id||"",name:Oe.name||Oe.PK||"",description:Oe.description}));f(Le)}catch(De){F((De==null?void 0:De.message)??"Failed to load categories.")}finally{U(!1)}};i.useEffect(()=>{Be&&o==="categories"&&fn()},[Be,o]);const Et=async()=>{var De;const ee=m.trim();if(!ee){k("Enter URL first.");return}const me=nr();if(!me){k("API URL not set.");return}if(!((De=window.auth)!=null&&De.getAccessToken)){k("Sign in required.");return}ne(!0),k(null);try{const Ee=await Q(`${me}/sites/generate-description`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:ee})});if(!Ee.ok)throw new Error(await Ee.text());const Le=await Ee.json();C(Le.description??""),p(!0)}catch(Ee){k((Ee==null?void 0:Ee.message)??"Failed to generate description.")}finally{ne(!1)}},rn=async ee=>{var Ee;ee.preventDefault();const me=m.trim();if(!me){k("URL is required.");return}const Me=nr();if(!Me){k("API URL not set.");return}if(!((Ee=window.auth)!=null&&Ee.getAccessToken)){k("Sign in required.");return}if(!(g&&$)){S(!0),k(null),I(null);try{let Le=null;if(H.trim()){const gt=await Q(`${Me}/sites/logo-from-url`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({siteId:"new",imageUrl:H.trim()})});if(!gt.ok){const xn=await gt.json().catch(()=>({}));throw new Error(xn.error||await gt.text())}const ut=await gt.json();ut.key&&(Le=ut.key)}else if(g){const gt=await Q(`${Me}/sites/logo-upload`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({siteId:"new",contentType:g.type||"image/png"})});if(!gt.ok)throw new Error("Logo upload request failed");const{uploadUrl:ut,key:xn}=await gt.json();if(!(await fetch(ut,{method:"PUT",headers:{"Content-Type":g.type||"image/png"},body:g})).ok)throw new Error("Logo upload failed");Le=xn}const Oe={url:me,title:v.trim()||me,description:y.trim(),categoryIds:q};x&&(Oe.descriptionAiGenerated=!0),Le&&(Oe.logoKey=Le);const pn=await Q(`${Me}/sites`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Oe)});if(!pn.ok)throw new Error(await pn.text());const hn=await pn.json();I(`Site added: ${hn.title||hn.url||me}`),h(""),b(""),C(""),p(!1),j(null),w&&URL.revokeObjectURL(w),E(null),W([]),setTimeout(()=>e("/websites"),1500)}catch(Le){k((Le==null?void 0:Le.message)??"Failed to add site.")}finally{S(!1)}}},oe=ee=>{xe(ee.id),be(ee.name),lt(ee.description??"")},ge=()=>{xe(null),be(""),lt(""),Te(null)},We=async ee=>{var De;if(ee.preventDefault(),!ue)return;const me=nr();if(!(!me||!((De=window.auth)!=null&&De.getAccessToken))){Ne(!0),Te(null);try{const Ee=await Q(`${me}/categories`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:ue,name:ye.trim(),description:Ke.trim()||void 0})});if(!Ee.ok)throw new Error(await Ee.text());f(Le=>Le.map(Oe=>Oe.id===ue?{...Oe,name:ye.trim(),description:Ke.trim()||void 0}:Oe)),ge()}catch(Ee){Te((Ee==null?void 0:Ee.message)??"Failed to update category.")}finally{Ne(!1)}}},Ue=async ee=>{var De;if(!window.confirm("Delete this category? Sites using it will lose this category."))return;const me=nr();if(!(!me||!((De=window.auth)!=null&&De.getAccessToken))){_e(ee);try{const Ee=await Q(`${me}/categories?id=${encodeURIComponent(ee)}`,{method:"DELETE"});if(!Ee.ok)throw new Error(await Ee.text());f(Le=>Le.filter(Oe=>Oe.id!==ee)),ue===ee&&ge()}catch(Ee){F((Ee==null?void 0:Ee.message)??"Failed to delete category.")}finally{_e(null)}}},ke=async ee=>{var Ee;ee.preventDefault();const me=Z.trim();if(!me)return;const Me=nr();if(!(!Me||!((Ee=window.auth)!=null&&Ee.getAccessToken))){D(!0),ae(null),F(null);try{const Le=await Q(`${Me}/categories`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:me,description:T.trim()})});if(!Le.ok)throw new Error(await Le.text());N(""),G(""),ae("Category created."),fn()}catch(Le){F((Le==null?void 0:Le.message)??"Failed to create category.")}finally{D(!1)}}};return Be?r.jsxs("div",{className:"space-y-6",children:[r.jsxs(ce,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Websites"]}),r.jsxs("header",{className:"space-y-2",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Websites"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Add sites and manage website categories."})]}),r.jsxs("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:[r.jsx("button",{type:"button",onClick:()=>d("add"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="add"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Add Site"}),r.jsx("button",{type:"button",onClick:()=>d("categories"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="categories"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Website Categories"})]}),o==="add"&&r.jsxs("form",{className:"space-y-4 max-w-xl",onSubmit:rn,children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"URL *"}),r.jsx("input",{type:"url",value:m,onChange:ee=>h(ee.target.value),placeholder:"https://example.com",required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Title (optional)"}),r.jsx("input",{type:"text",value:v,onChange:ee=>b(ee.target.value),placeholder:"Display title",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description (optional)"}),r.jsx("textarea",{value:y,onChange:ee=>{C(ee.target.value),p(!1)},placeholder:"Short description",rows:4,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),r.jsx("button",{type:"button",onClick:Et,disabled:K||!m.trim(),className:"mt-2 rounded-md border border-slate-700 bg-slate-800 px-3 py-1.5 text-xs font-medium text-slate-200 hover:bg-slate-700 disabled:opacity-50",children:K?"Generating":"Generate AI description"}),x&&r.jsx("span",{className:"ml-2 text-xs uppercase tracking-wide text-slate-500",children:"AI summary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Logo (optional, min 100100, max 5 MB)"}),r.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/gif,image/webp",onChange:ot,className:"block w-full text-xs text-slate-300 file:mr-3 file:rounded-md file:border-0 file:bg-slate-800 file:px-3 file:py-1.5 file:text-slate-100"}),r.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Or paste image URL (image will be copied to S3 on save):"}),r.jsx("input",{type:"url",value:H,onChange:ee=>{O(ee.target.value),ee.target.value.trim()&&j(null)},placeholder:"https://example.com/logo.png",className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),w&&r.jsx("div",{className:"mt-2",children:r.jsx("img",{src:w,alt:"Preview",className:"h-16 w-16 rounded-lg border border-slate-700 object-cover"})}),$&&r.jsx("p",{className:"mt-1 text-xs text-red-400",children:$})]}),r.jsxs("div",{ref:_,className:"relative",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Categories (optional)"}),r.jsx("input",{type:"text",value:se,onChange:ee=>J(ee.target.value),onFocus:()=>ie(!0),placeholder:"Search and select",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),V&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"absolute left-0 right-0 top-full z-10 mt-1 max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",children:et.length?et.map(ee=>r.jsx("button",{type:"button",onClick:()=>nt(ee.id),className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:ee.name},ee.id)):r.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:"No matches"})}),u.length===0&&r.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["No categories."," ",r.jsx("button",{type:"button",onClick:()=>d("categories"),className:"text-brand-orange hover:underline",children:"Create categories"})]})]}),r.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:q.map(ee=>{const me=u.find(Me=>Me.id===ee);return r.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(me==null?void 0:me.name)??ee,r.jsx("button",{type:"button",onClick:()=>It(ee),className:"hover:text-red-400","aria-label":"Remove",children:""})]},ee)})})]}),r.jsx("button",{type:"submit",disabled:pe,className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:pe?"Adding":"Add Site"}),P&&r.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:P}),B&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:B})]}),o==="categories"&&r.jsxs(r.Fragment,{children:[r.jsxs("form",{className:"space-y-3 max-w-md",onSubmit:ke,children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"New category name"}),r.jsx("input",{type:"text",value:Z,onChange:ee=>N(ee.target.value),placeholder:"e.g. Developer tools",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description (optional)"}),r.jsx("input",{type:"text",value:T,onChange:ee=>G(ee.target.value),placeholder:"Optional description",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),r.jsx("button",{type:"submit",disabled:Y||!Z.trim(),className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:Y?"Creating":"Create category"}),X&&r.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:X}),M&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:M})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-sm font-medium text-slate-300 mb-2",children:"Existing categories"}),z?r.jsx("p",{className:"text-sm text-slate-500",children:"Loading"}):u.length===0?r.jsx("p",{className:"text-sm text-slate-500",children:"No categories yet. Create one above."}):r.jsx("ul",{className:"space-y-2",children:u.map(ee=>r.jsx("li",{className:"rounded-lg border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm",children:ue===ee.id?r.jsxs("form",{onSubmit:We,className:"space-y-2",children:[r.jsx("input",{type:"text",value:ye,onChange:me=>be(me.target.value),placeholder:"Name",required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",autoFocus:!0}),r.jsx("input",{type:"text",value:Ke,onChange:me=>lt(me.target.value),placeholder:"Description (optional)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),r.jsxs("div",{className:"flex gap-2 flex-wrap",children:[r.jsx("button",{type:"submit",disabled:le||!ye.trim(),className:"rounded-md bg-brand-orange px-3 py-1.5 text-xs font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:le?"Saving":"Save"}),r.jsx("button",{type:"button",onClick:ge,className:"rounded-md border border-slate-700 px-3 py-1.5 text-xs font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"}),r.jsx("button",{type:"button",onClick:()=>Ue(ee.id),disabled:Se===ee.id,className:"rounded-md border border-red-500/60 px-3 py-1.5 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:Se===ee.id?"Deleting":"Delete"})]}),Fe&&r.jsx("p",{className:"text-xs text-red-400",children:Fe})]}):r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsxs("button",{type:"button",onClick:()=>oe(ee),className:"flex-1 min-w-0 text-left hover:bg-slate-800/50 rounded px-1 -mx-1 py-1 -my-1 transition-colors",children:[r.jsx("span",{className:"font-medium text-slate-200",children:ee.name}),ee.description&&r.jsx("span",{className:"text-slate-500 truncate max-w-xs ml-2",children:ee.description})]}),r.jsx("button",{type:"button",onClick:()=>Ue(ee.id),disabled:Se===ee.id,className:"rounded px-2 py-1 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50 shrink-0","aria-label":"Delete category",children:Se===ee.id?"":"Delete"})]})},ee.id))})]})]})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Websites"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})};function kr(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function vb(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}const bb=()=>{const e=$t(),{user:t}=Ae(),[n,s]=qt(),a=n.get("tab"),l=a==="categories"?"categories":"add",[o,c]=i.useState(l);i.useEffect(()=>{c(a==="categories"?"categories":"add")},[a]);const d=oe=>{c(oe);const ge=new URLSearchParams(n);oe==="categories"?ge.set("tab","categories"):ge.delete("tab"),s(ge)},[u,f]=i.useState([]),[m,h]=i.useState(""),[v,b]=i.useState(""),[y,C]=i.useState(null),[x,p]=i.useState(null),[g,j]=i.useState(null),[w,E]=i.useState(!1),[$,R]=i.useState([]),[H,O]=i.useState(""),[q,W]=i.useState(!1),[se,J]=i.useState(!1),[V,ie]=i.useState(null),[pe,S]=i.useState(null),P=i.useRef(null),[I,B]=i.useState(!0),[k,K]=i.useState(null),[ne,_]=i.useState(""),[z,U]=i.useState(""),[M,F]=i.useState(!1),[Z,N]=i.useState(null),[T,G]=i.useState(null),[Y,D]=i.useState(""),[X,ae]=i.useState(""),[ue,xe]=i.useState(!1),[ye,be]=i.useState(null),[Ke,lt]=i.useState(null),le=dt(t??null,"manager");i.useEffect(()=>{if(!le)return;const oe=kr();oe&&(async()=>{try{const ge=await Q(`${oe}/media-categories`);if(!ge.ok)return;const Ue=((await ge.json()).categories??[]).map(ke=>({id:ke.PK||ke.id||"",name:ke.name||ke.PK||"",description:ke.description}));f(Ue)}catch{}})()},[le]),i.useEffect(()=>{function oe(ge){P.current&&!P.current.contains(ge.target)&&W(!1)}if(q)return document.addEventListener("mousedown",oe),()=>document.removeEventListener("mousedown",oe)},[q]);const Ne=u.filter(oe=>!$.includes(oe.id)&&(!H.trim()||(oe.name||"").toLowerCase().includes(H.toLowerCase()))),Fe=oe=>{var We;const ge=(We=oe.target.files)==null?void 0:We[0];C(ge??null),j(null),S(null),x&&(URL.revokeObjectURL(x),p(null)),ge&&(p(URL.createObjectURL(ge)),ge.type.startsWith("video/")&&E(!0))},Te=i.useRef(null),Se=oe=>{var We;const ge=(We=oe.target.files)==null?void 0:We[0];ge&&ge.type.startsWith("image/")&&(j(ge),E(!1)),oe.target.value=""},_e=oe=>{$.includes(oe)||R([...$,oe]),O("")},Be=oe=>{R($.filter(ge=>ge!==oe))},et=async()=>{var We;const oe=kr();if(!oe){K("API URL not set."),B(!1);return}if(!((We=window.auth)!=null&&We.getAccessToken)){K("Sign in required."),B(!1);return}B(!0),K(null);try{const Ue=await Q(`${oe}/media-categories`);if(!Ue.ok)throw new Error(await Ue.text());const ee=((await Ue.json()).categories??[]).map(me=>({id:me.PK||me.id||"",name:me.name||me.PK||"",description:me.description}));f(ee)}catch(Ue){K((Ue==null?void 0:Ue.message)??"Failed to load media categories.")}finally{B(!1)}};i.useEffect(()=>{le&&o==="categories"&&et()},[le,o]);const ot=async oe=>{var ee;if(oe.preventDefault(),!y){S("Please select an image or video file.");return}const ge=kr();if(!ge){S("API URL not set.");return}if(!((ee=window.auth)!=null&&ee.getAccessToken)){S("Sign in required.");return}const Ue=y.type.startsWith("video/")?"video":"image",ke=`MEDIA#${vb()}`;J(!0),S(null),ie(null);try{const me=await Q(`${ge}/media/upload`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mediaId:ke,mediaType:Ue,contentType:y.type||(Ue==="image"?"image/png":"video/mp4")})});if(!me.ok)throw new Error("Upload request failed");const{uploadUrl:Me,key:De}=await me.json(),Ee=await Q(`${ge}/media`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:ke,mediaKey:De,title:m.trim()||"Untitled",description:v.trim(),mediaType:Ue,categoryIds:$})});if(!Ee.ok)throw new Error(await Ee.text());if(!(await fetch(Me,{method:"PUT",headers:{"Content-Type":y.type||(Ue==="image"?"image/png":"video/mp4")},body:y})).ok)throw new Error("File upload failed");if(Ue==="video"&&g){const Oe=await Q(`${ge}/media/thumbnail-upload`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mediaId:ke,contentType:g.type||"image/jpeg"})});if(Oe.ok){const{uploadUrl:pn,key:hn}=await Oe.json();(await fetch(pn,{method:"PUT",headers:{"Content-Type":g.type||"image/jpeg"},body:g})).ok&&((await Q(`${ge}/media`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:ke,thumbnailKey:hn})})).ok||console.warn("Thumbnail uploaded but update failed"))}}ie("Media added."),h(""),b(""),C(null),j(null),x&&URL.revokeObjectURL(x),p(null),R([]),setTimeout(()=>e("/media"),1500)}catch(me){S((me==null?void 0:me.message)??"Failed to add media.")}finally{J(!1)}},nt=oe=>{G(oe.id),D(oe.name),ae(oe.description??"")},It=()=>{G(null),D(""),ae(""),be(null)},fn=async oe=>{var Ue;if(oe.preventDefault(),!T)return;const ge=kr();if(!(!ge||!((Ue=window.auth)!=null&&Ue.getAccessToken))){xe(!0),be(null);try{const ke=await Q(`${ge}/media-categories`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:T,name:Y.trim(),description:X.trim()||void 0})});if(!ke.ok)throw new Error(await ke.text());f(ee=>ee.map(me=>me.id===T?{...me,name:Y.trim(),description:X.trim()||void 0}:me)),It()}catch(ke){be((ke==null?void 0:ke.message)??"Failed to update media category.")}finally{xe(!1)}}},Et=async oe=>{var Ue;if(!window.confirm("Delete this media category? Media using it will lose this category."))return;const ge=kr();if(!(!ge||!((Ue=window.auth)!=null&&Ue.getAccessToken))){lt(oe);try{const ke=await Q(`${ge}/media-categories?id=${encodeURIComponent(oe)}`,{method:"DELETE"});if(!ke.ok)throw new Error(await ke.text());f(ee=>ee.filter(me=>me.id!==oe)),T===oe&&It()}catch(ke){K((ke==null?void 0:ke.message)??"Failed to delete media category.")}finally{lt(null)}}},rn=async oe=>{var ke;oe.preventDefault();const ge=ne.trim();if(!ge)return;const We=kr();if(!(!We||!((ke=window.auth)!=null&&ke.getAccessToken))){F(!0),N(null),K(null);try{const ee=await Q(`${We}/media-categories`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:ge,description:z.trim()})});if(!ee.ok)throw new Error(await ee.text());_(""),U(""),N("Media category created."),et()}catch(ee){K((ee==null?void 0:ee.message)??"Failed to create media category.")}finally{F(!1)}}};return le?r.jsxs("div",{className:"space-y-6",children:[r.jsxs(ce,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Media"]}),r.jsxs("header",{className:"space-y-2",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Media"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Add media and manage media categories."})]}),r.jsxs("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:[r.jsx("button",{type:"button",onClick:()=>d("add"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="add"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Add Media"}),r.jsx("button",{type:"button",onClick:()=>d("categories"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="categories"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Media Categories"})]}),o==="add"&&r.jsxs("form",{className:"space-y-4 max-w-xl",onSubmit:ot,children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Title (optional)"}),r.jsx("input",{type:"text",value:m,onChange:oe=>h(oe.target.value),placeholder:"Untitled",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description (optional)"}),r.jsx("textarea",{value:v,onChange:oe=>b(oe.target.value),placeholder:"Description",rows:3,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Image or video *"}),r.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/gif,image/webp,video/mp4,video/webm",onChange:Fe,className:"block w-full text-xs text-slate-300 file:mr-3 file:rounded-md file:border-0 file:bg-slate-800 file:px-3 file:py-1.5 file:text-slate-100"}),r.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Videos get an auto-generated thumbnail from the 34 sec frame. Change it when editing."}),(y==null?void 0:y.type.startsWith("video/"))&&g&&r.jsxs("p",{className:"mt-1 text-xs text-emerald-400",children:["Custom thumbnail: ",g.name," ",r.jsx("button",{type:"button",onClick:()=>E(!0),className:"text-brand-orange hover:underline",children:"Change"})]}),w&&(y==null?void 0:y.type.startsWith("video/"))&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",role:"dialog","aria-modal":"true","aria-labelledby":"thumbnail-dialog-title",onClick:()=>E(!1),children:r.jsxs("div",{className:"rounded-lg border border-slate-700 bg-slate-900 p-6 shadow-xl max-w-sm w-full mx-4",onClick:oe=>oe.stopPropagation(),children:[r.jsx("h2",{id:"thumbnail-dialog-title",className:"text-lg font-medium text-slate-100 mb-2",children:"Add thumbnail"}),r.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"Choose a custom thumbnail image for this video (optional)."}),r.jsx("input",{ref:Te,type:"file",accept:"image/png,image/jpeg,image/gif,image/webp",onChange:Se,className:"hidden"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",onClick:()=>{var oe;return(oe=Te.current)==null?void 0:oe.click()},className:"rounded-md bg-slate-700 px-3 py-2 text-sm font-medium text-slate-100 hover:bg-slate-600",children:"Choose file"}),r.jsx("button",{type:"button",onClick:()=>E(!1),className:"rounded-md border border-slate-600 px-3 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Skip"})]})]})}),x&&r.jsx("div",{className:"mt-2",children:y!=null&&y.type.startsWith("video/")?r.jsx("video",{src:x,muted:!0,controls:!0,className:"max-h-32 rounded-lg border border-slate-700"}):r.jsx("img",{src:x,alt:"Preview",className:"h-24 w-auto rounded-lg border border-slate-700 object-cover"})})]}),r.jsxs("div",{ref:P,className:"relative",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Media categories (optional)"}),r.jsx("input",{type:"text",value:H,onChange:oe=>O(oe.target.value),onFocus:()=>W(!0),placeholder:"Search and select",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),q&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"absolute left-0 right-0 top-full z-10 mt-1 max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",children:Ne.length?Ne.map(oe=>r.jsx("button",{type:"button",onClick:()=>_e(oe.id),className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:oe.name},oe.id)):r.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:"No matches"})}),u.length===0&&r.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["No categories."," ",r.jsx("button",{type:"button",onClick:()=>d("categories"),className:"text-brand-orange hover:underline",children:"Create media categories"})]})]}),r.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:$.map(oe=>{const ge=u.find(We=>We.id===oe);return r.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(ge==null?void 0:ge.name)??oe,r.jsx("button",{type:"button",onClick:()=>Be(oe),className:"hover:text-red-400","aria-label":"Remove",children:""})]},oe)})})]}),r.jsx("button",{type:"submit",disabled:se||!y,className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:se?"Uploading":"Add Media"}),V&&r.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:V}),pe&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:pe})]}),o==="categories"&&r.jsxs(r.Fragment,{children:[r.jsxs("form",{className:"space-y-3 max-w-md",onSubmit:rn,children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"New category name"}),r.jsx("input",{type:"text",value:ne,onChange:oe=>_(oe.target.value),placeholder:"e.g. Tutorials",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description (optional)"}),r.jsx("input",{type:"text",value:z,onChange:oe=>U(oe.target.value),placeholder:"Optional description",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),r.jsx("button",{type:"submit",disabled:M||!ne.trim(),className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:M?"Creating":"Create media category"}),Z&&r.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:Z}),k&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:k})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-sm font-medium text-slate-300 mb-2",children:"Existing media categories"}),I?r.jsx("p",{className:"text-sm text-slate-500",children:"Loading"}):u.length===0?r.jsx("p",{className:"text-sm text-slate-500",children:"No media categories yet. Create one above."}):r.jsx("ul",{className:"space-y-2",children:u.map(oe=>r.jsx("li",{className:"rounded-lg border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm",children:T===oe.id?r.jsxs("form",{onSubmit:fn,className:"space-y-2",children:[r.jsx("input",{type:"text",value:Y,onChange:ge=>D(ge.target.value),placeholder:"Name",required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",autoFocus:!0}),r.jsx("input",{type:"text",value:X,onChange:ge=>ae(ge.target.value),placeholder:"Description (optional)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),r.jsxs("div",{className:"flex gap-2 flex-wrap",children:[r.jsx("button",{type:"submit",disabled:ue||!Y.trim(),className:"rounded-md bg-brand-orange px-3 py-1.5 text-xs font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:ue?"Saving":"Save"}),r.jsx("button",{type:"button",onClick:It,className:"rounded-md border border-slate-700 px-3 py-1.5 text-xs font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"}),r.jsx("button",{type:"button",onClick:()=>Et(oe.id),disabled:Ke===oe.id,className:"rounded-md border border-red-500/60 px-3 py-1.5 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:Ke===oe.id?"Deleting":"Delete"})]}),ye&&r.jsx("p",{className:"text-xs text-red-400",children:ye})]}):r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsxs("button",{type:"button",onClick:()=>nt(oe),className:"flex-1 min-w-0 text-left hover:bg-slate-800/50 rounded px-1 -mx-1 py-1 -my-1 transition-colors",children:[r.jsx("span",{className:"font-medium text-slate-200",children:oe.name}),oe.description&&r.jsx("span",{className:"text-slate-500 truncate max-w-xs ml-2",children:oe.description})]}),r.jsx("button",{type:"button",onClick:()=>Et(oe.id),disabled:Ke===oe.id,className:"rounded px-2 py-1 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50 shrink-0","aria-label":"Delete category",children:Ke===oe.id?"":"Delete"})]})},oe.id))})]})]})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Media"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})};function La(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Du=100,wb=5*1024*1024,jb=()=>{const{id:e}=ls(),t=$t(),{user:n}=Ae(),[s,a]=i.useState(!0),[l,o]=i.useState(""),[c,d]=i.useState(""),[u,f]=i.useState(""),[m,h]=i.useState(!1),[v,b]=i.useState([]),[y,C]=i.useState(""),[x,p]=i.useState(""),[g,j]=i.useState(null),[w,E]=i.useState(!1),[$,R]=i.useState(null),[H,O]=i.useState(""),[q,W]=i.useState(null),[se,J]=i.useState(null),[V,ie]=i.useState([]),[pe,S]=i.useState([]),[P,I]=i.useState(""),[B,k]=i.useState(!1),[K,ne]=i.useState(!1),[_,z]=i.useState(!1),[U,M]=i.useState(!1),[F,Z]=i.useState(null),[N,T]=i.useState(null),G=dt(n??null,"manager"),Y=e?decodeURIComponent(e):"";i.useEffect(()=>{var Te;if(!G||!Y){a(!1);return}const le=La();if(!le){T("API URL not set."),a(!1);return}if(!((Te=window.auth)!=null&&Te.getAccessToken)){T("Sign in required."),a(!1);return}let Fe=!1;return(async()=>{try{const Se=await Q(`${le}/sites?id=${encodeURIComponent(Y)}`);if(Se.status===404||!Se.ok){Fe||T("Site not found.");return}const Be=(await Se.json()).site;if(Fe||!Be)return;o(Be.url??""),d(Be.title??""),f(Be.description??""),h(!!Be.descriptionAiGenerated),b(Array.isArray(Be.tags)?Be.tags:[]),C(""),p(Be.scrapedContent??""),j(Be.logoUrl||null),S(Array.isArray(Be.categoryIds)?Be.categoryIds:[]);const et=await Q(`${le}/categories`);if(et.ok&&!Fe){const ot=await et.json();ie((ot.categories??[]).map(nt=>({id:nt.PK||nt.id||"",name:nt.name||nt.PK||""})))}}catch(Se){Fe||T((Se==null?void 0:Se.message)??"Failed to load.")}finally{Fe||a(!1)}})(),()=>{Fe=!0}},[G,Y]);const D=le=>{var Te;const Ne=(Te=le.target.files)==null?void 0:Te[0];if(R(Ne??null),O(""),J(null),E(!1),q&&(URL.revokeObjectURL(q),W(null)),!Ne)return;if(Ne.size>wb){J("Logo must be 5 MB or smaller.");return}const Fe=new Image;Fe.onload=()=>{if(Fe.naturalWidth<Du||Fe.naturalHeight<Du){J("Logo must be at least 100100 pixels.");return}J(null),W(URL.createObjectURL(Ne))},Fe.onerror=()=>J("Please choose a valid image file."),Fe.src=URL.createObjectURL(Ne)},X=le=>{pe.includes(le)||S([...pe,le]),I(""),k(!1)},ae=le=>{S(pe.filter(Ne=>Ne!==le))},ue=()=>{const le=y.trim();le&&!v.includes(le)&&b([...v,le]),C("")},xe=le=>b(v.filter(Ne=>Ne!==le)),ye=V.filter(le=>!pe.includes(le.id)&&(!P.trim()||(le.name||"").toLowerCase().includes(P.toLowerCase()))),be=async()=>{var Te;const le=l.trim();if(!le){T("Enter URL first.");return}const Ne=La();if(!Ne){T("API URL not set.");return}if(!((Te=window.auth)!=null&&Te.getAccessToken)){T("Sign in required.");return}M(!0),T(null);try{const Se=await Q(`${Ne}/sites/generate-description`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:le})});if(!Se.ok)throw new Error(await Se.text());const _e=await Se.json();f(_e.description??""),h(!0)}catch(Se){T((Se==null?void 0:Se.message)??"Failed to generate description.")}finally{M(!1)}},Ke=async le=>{var Te;if(le.preventDefault(),!Y)return;const Ne=La();if(!Ne){T("API URL not set.");return}if(!((Te=window.auth)!=null&&Te.getAccessToken)){T("Sign in required.");return}if(!($&&se)){ne(!0),T(null),Z(null);try{let Se=null;if($){const et=await Q(`${Ne}/sites/logo-upload`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({siteId:Y,contentType:$.type||"image/png"})});if(!et.ok)throw new Error("Logo upload request failed");const{uploadUrl:ot,key:nt}=await et.json();if(!(await fetch(ot,{method:"PUT",headers:{"Content-Type":$.type||"image/png"},body:$})).ok)throw new Error("Logo upload failed");Se=nt}else if(H.trim()){const et=await Q(`${Ne}/sites/logo-from-url`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({siteId:Y,imageUrl:H.trim()})});if(!et.ok){const nt=await et.json().catch(()=>({}));throw new Error(nt.error||await et.text())}const ot=await et.json();ot.key&&(Se=ot.key)}const _e={id:Y,url:l.trim(),title:c.trim()||l.trim(),description:u.trim(),descriptionAiGenerated:m,categoryIds:pe,tags:v,scrapedContent:x.trim()||void 0};w?_e.deleteLogo=!0:Se&&(_e.logoKey=Se);const Be=await Q(`${Ne}/sites`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(_e)});if(!Be.ok)throw new Error(await Be.text());Z("Site updated."),q&&URL.revokeObjectURL(q),R(null),W(null),O(""),setTimeout(()=>t(`/websites/${encodeURIComponent(Y)}`),1200)}catch(Se){T((Se==null?void 0:Se.message)??"Failed to update site.")}finally{ne(!1)}}},lt=async()=>{var Fe;if(!Y||!window.confirm("Delete this site? This cannot be undone."))return;const le=La();if(!(!le||!((Fe=window.auth)!=null&&Fe.getAccessToken))){z(!0),T(null);try{const Te=await Q(`${le}/sites`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:Y})});if(!Te.ok)throw new Error(await Te.text());t("/websites")}catch(Te){T((Te==null?void 0:Te.message)??"Failed to delete site.")}finally{z(!1)}}};return G?s?r.jsxs("div",{className:"space-y-4",children:[r.jsxs(ce,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Websites"]}),r.jsx("p",{className:"text-sm text-slate-400",children:"Loading"})]}):N&&!l&&!c?r.jsxs("div",{className:"space-y-4",children:[r.jsxs(ce,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Websites"]}),r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:N})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs(ce,{to:`/websites/${encodeURIComponent(Y)}`,className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to site"]}),r.jsxs("header",{className:"space-y-2",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit Site"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Update URL, title, description, logo, categories, and scraped content."})]}),r.jsxs("form",{className:"space-y-4 max-w-xl",onSubmit:Ke,children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"URL *"}),r.jsx("input",{type:"url",value:l,onChange:le=>o(le.target.value),required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Title"}),r.jsx("input",{type:"text",value:c,onChange:le=>d(le.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description"}),r.jsx("textarea",{value:u,onChange:le=>{f(le.target.value),h(!1)},placeholder:"Short description",rows:4,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),r.jsx("button",{type:"button",onClick:be,disabled:U||!l.trim(),className:"mt-2 rounded-md border border-slate-700 bg-slate-800 px-3 py-1.5 text-xs font-medium text-slate-200 hover:bg-slate-700 disabled:opacity-50",children:U?"Generating":"Generate AI description"}),m&&r.jsx("span",{className:"ml-2 text-xs uppercase tracking-wide text-slate-500",children:"AI summary"}),r.jsxs("label",{className:"mt-2 block inline-flex items-center gap-2 text-xs text-slate-500",children:[r.jsx("input",{type:"checkbox",checked:m,onChange:le=>h(le.target.checked)}),"AI-generated summary"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Logo"}),g&&!w&&!q&&r.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[r.jsx("img",{src:g,alt:"Current logo",className:"h-12 w-12 rounded-lg border border-slate-700 object-cover"}),r.jsxs("label",{className:"text-xs text-slate-400",children:[r.jsx("input",{type:"checkbox",checked:w,onChange:le=>E(le.target.checked)}),r.jsx("span",{className:"ml-1",children:"Remove logo"})]})]}),r.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/gif,image/webp",onChange:D,className:"block w-full text-xs text-slate-300 file:mr-3 file:rounded-md file:border-0 file:bg-slate-800 file:px-3 file:py-1.5 file:text-slate-100"}),r.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Or paste image URL (image will be copied to S3 on save):"}),r.jsx("input",{type:"url",value:H,onChange:le=>{O(le.target.value),le.target.value.trim()&&R(null)},placeholder:"https://example.com/logo.png",className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),q&&r.jsx("div",{className:"mt-2",children:r.jsx("img",{src:q,alt:"New logo",className:"h-16 w-16 rounded-lg border border-slate-700 object-cover"})}),se&&r.jsx("p",{className:"mt-1 text-xs text-red-400",children:se})]}),r.jsxs("div",{className:"relative",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Categories"}),r.jsx("input",{type:"text",value:P,onChange:le=>I(le.target.value),onFocus:()=>k(!0),placeholder:"Search and select",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),B&&r.jsx("div",{className:"absolute left-0 right-0 top-full z-10 mt-1 max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",children:ye.length?ye.map(le=>r.jsx("button",{type:"button",onClick:()=>X(le.id),className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:le.name},le.id)):r.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:"No matches"})}),r.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:pe.map(le=>{const Ne=V.find(Fe=>Fe.id===le);return r.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(Ne==null?void 0:Ne.name)??le,r.jsx("button",{type:"button",onClick:()=>ae(le),className:"hover:text-red-400","aria-label":"Remove",children:""})]},le)})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Tags"}),r.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:v.map(le=>r.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[le,r.jsx("button",{type:"button",onClick:()=>xe(le),className:"hover:text-red-400","aria-label":"Remove",children:""})]},le))}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:y,onChange:le=>C(le.target.value),onKeyDown:le=>le.key==="Enter"&&(le.preventDefault(),ue()),placeholder:"Add tag",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),r.jsx("button",{type:"button",onClick:ue,className:"rounded-md border border-slate-700 bg-slate-800 px-3 py-2 text-sm text-slate-200 hover:bg-slate-700",children:"Add"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Scraped content (optional)"}),r.jsx("textarea",{value:x,onChange:le=>p(le.target.value),rows:6,placeholder:"Paste or edit scraped content (e.g. README, about page)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm font-mono text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),r.jsxs("div",{className:"flex flex-wrap gap-3",children:[r.jsx("button",{type:"submit",disabled:K,className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:K?"Saving":"Save changes"}),r.jsx("button",{type:"button",onClick:lt,disabled:_||K,className:"rounded-md border border-red-500/60 px-4 py-2 text-sm font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:_?"Deleting":"Delete entry"})]}),F&&r.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:F}),N&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:N})]})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit Site"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})};function Cr(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Nb=()=>{const{id:e}=ls(),t=$t(),{user:n}=Ae(),[s,a]=i.useState(!0),[l,o]=i.useState(""),[c,d]=i.useState(""),[u,f]=i.useState(null),[m,h]=i.useState(null),[v,b]=i.useState("image"),[y,C]=i.useState(!1),[x,p]=i.useState(!1),[g,j]=i.useState(!1),[w,E]=i.useState([]),[$,R]=i.useState([]),[H,O]=i.useState(""),[q,W]=i.useState(!1),[se,J]=i.useState(!1),[V,ie]=i.useState(!1),[pe,S]=i.useState(null),[P,I]=i.useState(null),B=dt(n??null,"manager"),k=e?decodeURIComponent(e):"";i.useEffect(()=>{var Y;if(!B||!k){a(!1);return}const N=Cr();if(!N){I("API URL not set."),a(!1);return}if(!((Y=window.auth)!=null&&Y.getAccessToken)){I("Sign in required."),a(!1);return}let G=!1;return(async()=>{try{const D=await Q(`${N}/media?id=${encodeURIComponent(k)}`);if(D.status===404||!D.ok){G||I("Media not found.");return}const X=await D.json(),ae=Array.isArray(X.media)?X.media[0]:X.media;if(G||!ae)return;const ue=ae;o(ue.title??""),d(ue.description??""),f(ue.mediaUrl||null),h(ue.thumbnailUrl||null),b(ue.mediaType||"image"),R(Array.isArray(ue.categoryIds)?ue.categoryIds:[]);const xe=await Q(`${N}/media-categories`);if(xe.ok&&!G){const ye=await xe.json();E((ye.categories??[]).map(be=>({id:be.PK||be.id||"",name:be.name||be.PK||""})))}}catch(D){G||I((D==null?void 0:D.message)??"Failed to load.")}finally{G||a(!1)}})(),()=>{G=!0}},[B,k]);const K=N=>{$.includes(N)||R([...$,N]),O(""),W(!1)},ne=N=>{R($.filter(T=>T!==N))},_=w.filter(N=>!$.includes(N.id)&&(!H.trim()||(N.name||"").toLowerCase().includes(H.toLowerCase()))),z=async N=>{var Y;if(N.preventDefault(),!k)return;const T=Cr();if(!T){I("API URL not set.");return}const G=window;if(!((Y=G.auth)!=null&&Y.getAccessToken)){I("Sign in required.");return}J(!0),I(null),S(null);try{const D=await new Promise(ae=>G.auth.getAccessToken(ae)),X=await Q(`${T}/media`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${D}`},body:JSON.stringify({id:k,title:l.trim()||"Untitled",description:c.trim(),categoryIds:$})});if(!X.ok)throw new Error(await X.text());S("Media updated."),setTimeout(()=>t("/media"),1200)}catch(D){I((D==null?void 0:D.message)??"Failed to update media.")}finally{J(!1)}},U=async N=>{var D,X;const T=(D=N.target.files)==null?void 0:D[0];if(!T||!k)return;if(!T.type.startsWith("image/")){I("Please choose an image (PNG, JPEG, GIF, WebP).");return}const G=Cr();if(!G)return;const Y=window;if((X=Y.auth)!=null&&X.getAccessToken){p(!0),I(null),S(null);try{const ae=await new Promise(le=>Y.auth.getAccessToken(le)),ue=await Q(`${G}/media/thumbnail-upload`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ae}`},body:JSON.stringify({mediaId:k,contentType:T.type||"image/png"})});if(!ue.ok)throw new Error("Upload request failed");const{uploadUrl:xe,key:ye}=await ue.json();if(!(await fetch(xe,{method:"PUT",headers:{"Content-Type":T.type||"image/png"},body:T})).ok)throw new Error("File upload failed");const Ke=await Q(`${G}/media`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ae}`},body:JSON.stringify({id:k,thumbnailKey:ye})});if(!Ke.ok)throw new Error(await Ke.text());const lt=await Q(`${G}/media?id=${encodeURIComponent(k)}`);if(lt.ok){const le=await lt.json(),Ne=Array.isArray(le.media)?le.media[0]:le.media;Ne!=null&&Ne.thumbnailUrl&&h(Ne.thumbnailUrl)}S("Logo/thumbnail updated.")}catch(ae){I((ae==null?void 0:ae.message)??"Failed to upload thumbnail.")}finally{p(!1),N.target.value=""}}},M=async()=>{var G;if(!k||!window.confirm("Remove the custom logo/thumbnail? You can regenerate from video or upload a new one."))return;const N=Cr();if(!N)return;const T=window;if((G=T.auth)!=null&&G.getAccessToken){j(!0),I(null),S(null);try{const Y=await new Promise(X=>T.auth.getAccessToken(X)),D=await Q(`${N}/media`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Y}`},body:JSON.stringify({id:k,deleteThumbnail:!0})});if(!D.ok)throw new Error(await D.text());h(null),S("Logo/thumbnail removed.")}catch(Y){I((Y==null?void 0:Y.message)??"Failed to remove thumbnail.")}finally{j(!1)}}},F=async()=>{var G;if(!k)return;const N=Cr();if(!N)return;const T=window;if((G=T.auth)!=null&&G.getAccessToken){C(!0),I(null),S(null);try{const Y=await new Promise(ae=>T.auth.getAccessToken(ae)),D=await Q(`${N}/media/regenerate-thumbnail`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Y}`},body:JSON.stringify({mediaId:k})});if(!D.ok)throw new Error(await D.text());S("Thumbnail regeneration started. New thumbnail will appear in 3060 seconds.");const X=async ae=>{if(ae>6)return;await new Promise(xe=>setTimeout(xe,1e4));const ue=await Q(`${N}/media?id=${encodeURIComponent(k)}`);if(ue.ok){const xe=await ue.json(),ye=Array.isArray(xe.media)?xe.media[0]:xe.media;if(ye!=null&&ye.thumbnailUrl){h(ye.thumbnailUrl),S("Thumbnail updated.");return}}X(ae+1)};X(1)}catch(Y){I((Y==null?void 0:Y.message)??"Failed to regenerate thumbnail.")}finally{C(!1)}}},Z=async()=>{var G;if(!k||!window.confirm("Delete this media item? This cannot be undone."))return;const N=Cr();if(!N)return;const T=window;if((G=T.auth)!=null&&G.getAccessToken){ie(!0),I(null);try{const Y=await new Promise(X=>T.auth.getAccessToken(X)),D=await Q(`${N}/media?id=${encodeURIComponent(k)}`,{method:"DELETE",headers:{Authorization:`Bearer ${Y}`}});if(!D.ok)throw new Error(await D.text());t("/media")}catch(Y){I((Y==null?void 0:Y.message)??"Failed to delete media.")}finally{ie(!1)}}};return B?s?r.jsxs("div",{className:"space-y-4",children:[r.jsxs(ce,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Media"]}),r.jsx("p",{className:"text-sm text-slate-400",children:"Loading"})]}):P&&!l&&!c?r.jsxs("div",{className:"space-y-4",children:[r.jsxs(ce,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Media"]}),r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:P})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs(ce,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Media"]}),r.jsxs("header",{className:"space-y-2",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit Media"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Update title, description, and categories. The file itself cannot be changed here."})]}),u&&r.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 overflow-hidden max-w-2xl",children:[r.jsx("p",{className:"px-4 py-2 text-xs font-medium text-slate-400 border-b border-slate-800",children:"Current media"}),r.jsx("div",{className:"p-4 flex justify-center items-center bg-slate-900/40 min-h-[160px]",children:v==="video"?r.jsx("video",{src:u,controls:!0,className:"max-w-full max-h-[50vh] rounded-lg border border-slate-700",playsInline:!0}):r.jsx("img",{src:u,alt:l||"Media",className:"max-w-full max-h-[50vh] w-auto h-auto object-contain rounded-lg border border-slate-700"})}),v==="video"&&r.jsxs("div",{className:"px-4 py-3 border-t border-slate-800 space-y-2",children:[r.jsx("p",{className:"text-xs font-medium text-slate-400",children:"Logo / Thumbnail"}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[m&&r.jsx("img",{src:m,alt:"Thumbnail",className:"h-16 w-auto rounded border border-slate-700 object-cover"}),r.jsx("button",{type:"button",onClick:F,disabled:y,className:"rounded-md border border-slate-600 px-3 py-1.5 text-sm font-medium text-slate-200 hover:bg-slate-800 disabled:opacity-50",children:y?"Regenerating":"Take screenshot"}),r.jsxs("label",{className:"cursor-pointer rounded-md border border-slate-600 px-3 py-1.5 text-sm font-medium text-slate-200 hover:bg-slate-800",children:[x?"Uploading":"Add logo",r.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/gif,image/webp",className:"hidden",onChange:U,disabled:x})]}),m&&r.jsx("button",{type:"button",onClick:M,disabled:g,className:"rounded-md border border-red-500/60 px-3 py-1.5 text-sm font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:g?"Removing":"Delete logo"})]})]})]}),r.jsxs("form",{className:"space-y-4 max-w-xl",onSubmit:z,children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Title"}),r.jsx("input",{type:"text",value:l,onChange:N=>o(N.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description"}),r.jsx("textarea",{value:c,onChange:N=>d(N.target.value),rows:4,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Media categories"}),r.jsx("input",{type:"text",value:H,onChange:N=>O(N.target.value),onFocus:()=>W(!0),placeholder:"Search and select",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),q&&r.jsx("div",{className:"absolute left-0 right-0 top-full z-10 mt-1 max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",children:_.length?_.map(N=>r.jsx("button",{type:"button",onClick:()=>K(N.id),className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:N.name},N.id)):r.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:"No matches"})}),r.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:$.map(N=>{const T=w.find(G=>G.id===N);return r.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(T==null?void 0:T.name)??N,r.jsx("button",{type:"button",onClick:()=>ne(N),className:"hover:text-red-400","aria-label":"Remove",children:""})]},N)})})]}),r.jsxs("div",{className:"flex flex-wrap gap-3",children:[r.jsx("button",{type:"submit",disabled:se,className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:se?"Saving":"Save changes"}),r.jsx("button",{type:"button",onClick:Z,disabled:V||se,className:"rounded-md border border-red-500/60 px-4 py-2 text-sm font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:V?"Deleting":"Delete entry"})]}),pe&&r.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:pe}),P&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:P})]})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit Media"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})},Ou={admin:"SuperAdmin",manager:"Manager",user:"User"},Vi=[{value:-8,label:"UTC-8"},{value:-5,label:"UTC-5"},{value:0,label:"UTC+0/GMT"}];function Lo(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function Sb(e,t,n){if(!e&&!n)return"";if(!e)return n?`from ${n}`:"";try{const s=new Date(e);if(isNaN(s.getTime()))return e+(n?` from ${n}`:"");const a=s.getTime()+(t||0)*36e5,l=new Date(a),o=y=>y<10?"0"+y:""+y,c=l.getUTCFullYear(),d=o(l.getUTCMonth()+1),u=o(l.getUTCDate()),f=o(l.getUTCHours()),m=o(l.getUTCMinutes()),h=Vi.find(y=>y.value===t),v=h?h.label:t<0?"UTC"+t:"UTC+"+t;let b=`${c}-${d}-${u} ${f}:${m} ${v}`;return n&&(b+=` from ${n}`),b}catch{return e+(n?` from ${n}`:"")}}const kb=e=>e==="admin"?"bg-amber-500/20 text-amber-200":e==="manager"?"bg-blue-500/20 text-blue-200":e==="user"?"bg-slate-600/30 text-slate-300":"bg-emerald-500/20 text-emerald-200",Cb=()=>{var z;const e=$t(),[t]=qt(),n=t.get("username")??"",s=t.get("email")??"",a=t.get("status")??"",{user:l}=Ae(),[o,c]=i.useState(!0),[d,u]=i.useState(null),[f,m]=i.useState(null),[h,v]=i.useState([]),[b,y]=i.useState([]),[C,x]=i.useState([]),[p,g]=i.useState(""),[j,w]=i.useState(!1),[E,$]=i.useState(!1),[R,H]=i.useState(null),[O,q]=i.useState(!1),[W,se]=i.useState(-8),J=dt(l??null,"manager"),V=((z=l==null?void 0:l.groups)==null?void 0:z.includes("admin"))??!1,ie=V?["admin","manager","user"]:["user"],pe=async()=>{var F;if(!n)return;const U=Lo();if(!U){u("API URL not set."),c(!1);return}if(!((F=window.auth)!=null&&F.getAccessToken)){u("Sign in required."),c(!1);return}c(!0),u(null);try{const[Z,N]=await Promise.all([Q(`${U}/admin/users/${encodeURIComponent(n)}/groups`),Q(`${U}/admin/groups`)]);if(!Z.ok){const D=await Z.json().catch(()=>({}));throw new Error(D.error||"Failed to load user")}const T=await Z.json(),Y=((await N.json()).groups??[]).map(D=>D.name??(D.PK??"").replace("GROUP#","")).filter(Boolean);m({email:T.username??n,status:a,lastLoginAt:T.lastLoginAt??"",lastLoginIp:T.lastLoginIp??"",cognitoGroups:T.cognitoGroups??[],customGroups:T.customGroups??[]}),y([...T.cognitoGroups??[]]),x([...T.customGroups??[]]),v(Y)}catch(Z){u((Z==null?void 0:Z.message)??"Failed to load user")}finally{c(!1)}};i.useEffect(()=>{const U=parseInt(sessionStorage.getItem("funkedupshift_lastlogin_tz")??"-8",10);!isNaN(U)&&Vi.some(M=>M.value===U)&&se(U)},[]),i.useEffect(()=>{J&&n&&pe()},[J,n]);const S=U=>{U&&!b.includes(U)&&y(M=>[...M,U])},P=U=>{y(M=>M.filter(F=>F!==U))},I=U=>{U&&!C.includes(U)&&(x(M=>[...M,U]),g(""),w(!1))},B=U=>{x(M=>M.filter(F=>F!==U))},k=h.filter(U=>C.includes(U)?!1:p.trim()?U.toLowerCase().includes(p.toLowerCase().trim()):!0),K=async U=>{var X;if(U.preventDefault(),!n)return;const M=Lo();if(!M||!((X=window.auth)!=null&&X.getAccessToken))return;const Z=(f==null?void 0:f.cognitoGroups)??[],N=(f==null?void 0:f.customGroups)??[];let T=b.filter(ae=>!Z.includes(ae)),G=Z.filter(ae=>!b.includes(ae));V||(T=T.filter(ae=>ae==="user"),G=G.filter(ae=>ae==="user"));const Y=C.filter(ae=>!N.includes(ae)),D=N.filter(ae=>!C.includes(ae));$(!0),H(null);try{const ae=encodeURIComponent,ue=[];T.forEach(be=>ue.push(Q(`${M}/admin/users/${ae(n)}/groups`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groupName:be})}))),G.forEach(be=>ue.push(Q(`${M}/admin/users/${ae(n)}/groups/${ae(be)}`,{method:"DELETE"}))),Y.forEach(be=>ue.push(Q(`${M}/admin/users/${ae(n)}/groups`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groupName:be})}))),D.forEach(be=>ue.push(Q(`${M}/admin/users/${ae(n)}/groups/${ae(be)}`,{method:"DELETE"})));const ye=(await Promise.all(ue)).find(be=>!be.ok);if(ye){const be=await ye.json().catch(()=>({}));throw new Error(be.error||"Failed to save")}window.alert("Changes saved"),e("/admin/membership")}catch(ae){H((ae==null?void 0:ae.message)??"Failed to save")}finally{$(!1)}},ne=U=>{const M=parseInt(U.target.value,10);se(M),sessionStorage.setItem("funkedupshift_lastlogin_tz",String(M))},_=async()=>{var Z;const U=s||(f==null?void 0:f.email)||n;if(!window.confirm(`Delete user "${U}"? This cannot be undone.`))return;const M=Lo();if(!(!M||!((Z=window.auth)!=null&&Z.getAccessToken))){q(!0);try{const N=await Q(`${M}/admin/users/${encodeURIComponent(n)}`,{method:"DELETE"});if(!N.ok){const T=await N.json().catch(()=>({}));throw new Error(T.error||"Failed to delete user")}e("/admin/membership")}catch(N){H((N==null?void 0:N.message)??"Failed to delete user")}finally{q(!1)}}};return J?n?o?r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit User"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Loading"})]}):d||!f?r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit User"}),r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:d??"Failed to load user"})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs(ce,{to:"/admin/membership",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to users"]}),r.jsxs("header",{className:"space-y-2",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit User"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Adjust system roles and custom groups."}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("label",{htmlFor:"tz-select",className:"text-slate-500",children:"Last login timezone:"}),r.jsx("select",{id:"tz-select",value:W,onChange:ne,className:"rounded border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 text-sm",children:Vi.map(U=>r.jsx("option",{value:U.value,children:U.label},U.value))})]})]}),r.jsxs("form",{onSubmit:K,className:"space-y-6 max-w-2xl",children:[r.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/60 p-4",children:[r.jsx("h2",{className:"text-sm font-medium text-slate-300 mb-3",children:"User info"}),r.jsx("table",{className:"text-sm",children:r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{className:"py-1 pr-4 font-medium text-slate-400 w-28",children:"Email"}),r.jsx("td",{className:"py-1 text-slate-200",children:s||f.email})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"py-1 pr-4 font-medium text-slate-400",children:"Status"}),r.jsx("td",{className:"py-1 text-slate-200",children:a||f.status||""})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"py-1 pr-4 font-medium text-slate-400",children:"Last login"}),r.jsx("td",{className:"py-1 text-slate-200",children:Sb(f.lastLoginAt,W,f.lastLoginIp)})]})]})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200",children:"System roles"}),r.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-200 w-full max-w-xs",onChange:U=>{const M=U.target.value;M&&S(M),U.target.value=""},children:[r.jsx("option",{value:"",children:"Select role to add"}),ie.filter(U=>!b.includes(U)).map(U=>r.jsx("option",{value:U,children:Ou[U]??U},U))]}),r.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:b.map(U=>{const M=V||U==="user";return r.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded text-sm ${kb(U)}`,children:[Ou[U]??U,M&&r.jsx("button",{type:"button",onClick:()=>P(U),className:"ml-0.5 hover:text-red-300","aria-label":"Remove",children:""})]},U)})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200",children:"Custom groups"}),h.length===0?r.jsxs("p",{className:"text-sm text-slate-500",children:["No custom groups. ",r.jsx(ce,{to:"/admin/membership?tab=groups",className:"text-brand-orange hover:underline",children:"Create groups"}),"."]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"relative max-w-xs",children:[r.jsx("input",{type:"text",value:p,onChange:U=>{g(U.target.value),w(!0)},onFocus:()=>w(!0),placeholder:"Search or select groups",className:"w-full rounded border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-200 placeholder:text-slate-500"}),j&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>w(!1),"aria-hidden":"true"}),r.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 max-h-48 overflow-y-auto rounded border border-slate-700 bg-slate-900 shadow-lg z-20",children:k.length===0?r.jsx("div",{className:"px-3 py-2 text-sm text-slate-500",children:"No matches"}):k.map(U=>r.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",onClick:()=>I(U),children:U},U))})]})]}),r.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:C.map(U=>r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-sm bg-emerald-500/20 text-emerald-200",children:[U,r.jsx("button",{type:"button",onClick:()=>B(U),className:"ml-0.5 hover:text-red-300","aria-label":"Remove",children:""})]},U))})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[r.jsx("button",{type:"submit",disabled:E,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:E?"Saving":"Save"}),r.jsx(ce,{to:"/admin/membership",className:"rounded-md border border-slate-700 px-4 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"}),V&&r.jsx("button",{type:"button",onClick:_,disabled:O||E,className:"rounded-md border border-red-500/60 bg-red-500/10 px-4 py-2 text-sm font-medium text-red-200 hover:bg-red-500/20 disabled:opacity-50",children:O?"Deleting":"Delete user"})]}),R&&r.jsx("p",{className:"text-sm text-red-400",children:R})]})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit User"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Missing username in URL."})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit User"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})},Eb=()=>{const{user:e,refreshAuth:t}=Ae(),n=$t(),[s,a]=i.useState("signin"),[l,o]=i.useState(""),[c,d]=i.useState(""),[u,f]=i.useState(!1),[m,h]=i.useState(null),[v,b]=i.useState(null),y=x=>{a(x),h(null),b(null)},C=async x=>{x.preventDefault(),h(null),b(null);const p=l.trim(),g=c.trim();if(!p||!g){h("Email and password are required.");return}const j=window;if(!j.auth){h("Auth is not configured. Check Cognito frontend setup.");return}f(!0);try{s==="signin"?(await new Promise((w,E)=>{j.auth.signIn(p,g,$=>{$?E($):w()})}),b("Signed in successfully. Redirecting"),await t()):(await new Promise((w,E)=>{j.auth.signUp(p,g,$=>{$?E($):w()})}),b("Account created successfully. You can now sign in."),a("signin")),s==="signin"&&setTimeout(()=>n("/"),800)}catch(w){const E=(w==null?void 0:w.message)||"Authentication failed. Please try again.";h(E)}finally{f(!1)}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("header",{className:"space-y-2",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Sign in / Sign up"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Use your Funkedupshift account to rate sites, add notes, and manage curated content (based on your role)."})]}),e&&r.jsxs("div",{className:"rounded-xl border border-emerald-600/60 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-100",children:["You're currently signed in as"," ",r.jsx("span",{className:"font-semibold text-emerald-200",children:e.email})," (",e.role==="superadmin"?"SuperAdmin":e.role,"). You can safely close this page or continue browsing websites and media."]}),r.jsxs("div",{className:"grid gap-6 md:grid-cols-[minmax(0,1.3fr)_minmax(0,1fr)] items-start",children:[r.jsxs("section",{className:"rounded-2xl border border-slate-800 bg-slate-950/70 p-5 shadow-lg shadow-slate-950/40",children:[r.jsxs("div",{className:"mb-4 flex gap-2 rounded-full bg-slate-900/70 p-1 text-xs font-medium text-slate-300",children:[r.jsx("button",{type:"button",onClick:()=>y("signin"),className:["flex-1 rounded-full px-3 py-1.5 transition-colors",s==="signin"?"bg-slate-50 text-slate-950":"hover:bg-slate-800/80"].join(" "),children:"Sign in"}),r.jsx("button",{type:"button",onClick:()=>y("signup"),className:["flex-1 rounded-full px-3 py-1.5 transition-colors",s==="signup"?"bg-slate-50 text-slate-950":"hover:bg-slate-800/80"].join(" "),children:"Sign up"})]}),r.jsxs("form",{className:"space-y-4",onSubmit:C,children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{htmlFor:"authEmail",className:"text-xs font-medium uppercase tracking-[0.18em] text-slate-400",children:"Email"}),r.jsx("input",{id:"authEmail",type:"email",autoComplete:"email",value:l,onChange:x=>o(x.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",placeholder:"you@example.com",required:!0})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{htmlFor:"authPassword",className:"text-xs font-medium uppercase tracking-[0.18em] text-slate-400",children:"Password"}),r.jsx("input",{id:"authPassword",type:"password",autoComplete:s==="signin"?"current-password":"new-password",value:c,onChange:x=>d(x.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",placeholder:s==="signup"?"At least 8 characters":"Your password",minLength:8,required:!0})]}),m&&r.jsx("div",{className:"rounded-md border border-red-500/70 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:m}),v&&!m&&r.jsx("div",{className:"rounded-md border border-emerald-500/70 bg-emerald-500/10 px-3 py-2 text-xs text-emerald-100",children:v}),r.jsx("button",{type:"submit",disabled:u,className:"inline-flex w-full items-center justify-center rounded-full bg-brand-orange px-4 py-2.5 text-sm font-semibold text-slate-950 shadow-md shadow-orange-500/40 transition hover:bg-orange-500 disabled:cursor-not-allowed disabled:opacity-70",children:u?s==="signin"?"Signing in":"Creating account":s==="signin"?"Sign in":"Create account"})]})]}),r.jsxs("aside",{className:"space-y-3 rounded-2xl border border-slate-800 bg-slate-950/40 p-4 text-xs text-slate-300",children:[r.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-[0.25em] text-slate-500",children:"How access works"}),r.jsxs("ul",{className:"space-y-2",children:[r.jsxs("li",{children:[r.jsx("span",{className:"font-semibold text-slate-100",children:"Guests"})," can browse all websites and media without signing in."]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-semibold text-slate-100",children:"Signed-in users"})," can star sites and media, and later add their own metadata and comments."]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-semibold text-slate-100",children:"Managers & admins"})," can curate sites, media, and categories, with extra tooling in the admin area."]})]}),r.jsx("p",{className:"text-slate-500",children:"If you don't see expected admin controls after signing in, confirm your Cognito group membership in the AWS Console."})]})]})]})},Pb={admin:"SuperAdmin",manager:"Manager",user:"User"},nd=[{value:-8,label:"UTC-8"},{value:-5,label:"UTC-5"},{value:0,label:"UTC+0/GMT"}],zp="funkedupshift_lastlogin_tz";function Tb(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function Rb(){try{const e=parseInt(sessionStorage.getItem(zp)??"",10);if(!isNaN(e)&&nd.some(t=>t.value===e))return e}catch{}return-8}function Lb(e){try{sessionStorage.setItem(zp,String(e))}catch{}}function Ab(e,t,n){if(!e)return n?`from ${n}`:"";try{const s=new Date(e);if(isNaN(s.getTime()))return e;const a=s.getTime()+t*36e5,l=new Date(a),o=y=>y<10?"0"+y:""+y,c=l.getUTCFullYear(),d=o(l.getUTCMonth()+1),u=o(l.getUTCDate()),f=o(l.getUTCHours()),m=o(l.getUTCMinutes()),h=nd.find(y=>y.value===t),v=h?h.label:t<0?`UTC${t}`:`UTC+${t}`;let b=`${c}-${d}-${u} ${f}:${m} ${v}`;return n&&(b+=` from ${n}`),b}catch{return e}}const $b=()=>{var U,M,F,Z;const{user:e,refreshAuth:t}=Ae(),[n,s]=qt(),a=n.get("tab"),l=a==="groups"?"groups":"profile",[o,c]=i.useState(l),[d,u]=i.useState(null),[f,m]=i.useState(""),[h,v]=i.useState(Rb),[b,y]=i.useState(!0),[C,x]=i.useState(!1),[p,g]=i.useState(null),[j,w]=i.useState(""),[E,$]=i.useState(!1),[R,H]=i.useState(null),[O,q]=i.useState([]),[W,se]=i.useState(!1),[J,V]=i.useState(null),[ie,pe]=i.useState(null),S=Tb();i.useEffect(()=>{c(a==="groups"?"groups":"profile")},[a]);const P=N=>{c(N);const T=new URLSearchParams(n);N==="groups"?T.set("tab","groups"):T.delete("tab"),s(T)};i.useEffect(()=>{if(!e||!S){y(!1);return}let N=!1;return Q(`${S}/profile`).then(T=>T.ok?T.json():T.json().then(G=>Promise.reject(new Error(G.error||"Failed")))).then(T=>{var G;N||(u(T),m(((G=T.profile)==null?void 0:G.description)??""))}).catch(T=>{N||H({text:`Failed to load profile: ${(T==null?void 0:T.message)??"Unknown"}`,error:!0})}).finally(()=>{N||y(!1)}),()=>{N=!0}},[e,S]);const I=Ie.useCallback(async()=>{if(S){se(!0),V(null);try{const N=await Q(`${S}/groups`);if(!N.ok){const G=await N.json().catch(()=>({}));throw new Error(G.error||"Failed to load groups")}const T=await N.json();q(T.groups??[])}catch(N){V({text:`Failed: ${(N==null?void 0:N.message)??"Unknown"}`,error:!0})}finally{se(!1)}}},[S]);i.useEffect(()=>{o==="groups"&&e&&S&&I()},[o,e,S,I]);const B=async(N,T)=>{if(S){pe(N),V(null);try{if(T){const G=await Q(`${S}/me/groups/${encodeURIComponent(N)}`,{method:"DELETE"});if(!G.ok){const Y=await G.json().catch(()=>({}));throw new Error(Y.error||"Failed to leave")}u(Y=>Y?{...Y,customGroups:(Y.customGroups??[]).filter(D=>D!==N)}:null),V({text:`Left ${N}.`,error:!1})}else{const G=await Q(`${S}/me/groups`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groupName:N})});if(!G.ok){const Y=await G.json().catch(()=>({}));throw new Error(Y.error||"Failed to join")}u(Y=>Y?{...Y,customGroups:[...Y.customGroups??[],N]}:null),V({text:`Joined ${N}.`,error:!1})}await t()}catch(G){V({text:`Error: ${(G==null?void 0:G.message)??"Unknown"}`,error:!0})}finally{pe(null)}}},k=async()=>{if(S){x(!0),H(null);try{const N=await Q(`${S}/profile`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:f.trim().slice(0,100)})});if(!N.ok){const T=await N.json();throw new Error(T.error||"Failed")}H({text:"Saved.",error:!1})}catch(N){H({text:`Error: ${(N==null?void 0:N.message)??"Unknown"}`,error:!0})}finally{x(!1)}}},K=async N=>{var Y,D;const T=(Y=N.target.files)==null?void 0:Y[0];if(N.target.value="",!T||!S)return;if(g(null),!((D=T.type)!=null&&D.match(/^image\/(png|jpeg|jpg|gif|webp)$/))){g("Please choose PNG, JPEG, GIF, or WebP.");return}const G=T.type||"image/png";try{const X=await Q(`${S}/profile/avatar-upload`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contentType:G})});if(!X.ok){const Ke=await X.json();throw new Error(Ke.error||"Upload failed")}const{uploadUrl:ae,key:ue}=await X.json();if(!(await fetch(ae,{method:"PUT",body:T,headers:{"Content-Type":G}})).ok)throw new Error("Upload failed");const ye=await Q(`${S}/profile`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({avatarKey:ue})});if(!ye.ok){const Ke=await ye.json();throw new Error(Ke.error||"Failed")}const be=await Q(`${S}/profile`).then(Ke=>Ke.json());u(be)}catch(X){g(`Error: ${(X==null?void 0:X.message)??"Unknown"}`)}},ne=async()=>{if(S){g(null);try{const N=await Q(`${S}/profile/avatar`,{method:"DELETE"});if(!N.ok){const T=await N.json();throw new Error(T.error||"Failed")}u(T=>T?{...T,profile:{...T.profile,avatarUrl:void 0,avatarKey:void 0}}:null)}catch(N){g(`Error: ${(N==null?void 0:N.message)??"Unknown"}`)}}},_=async()=>{const N=j.trim();if(!(!N||!S)){g(null),$(!0);try{const T=await Q(`${S}/profile/avatar-from-url`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageUrl:N})});if(!T.ok){const X=await T.json();throw new Error(X.error||"Import failed")}const{key:G}=await T.json(),Y=await Q(`${S}/profile`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({avatarKey:G})});if(!Y.ok){const X=await Y.json();throw new Error(X.error||"Failed")}const D=await Q(`${S}/profile`).then(X=>X.json());u(D),w("")}catch(T){g(`Error: ${(T==null?void 0:T.message)??"Unknown"}`)}finally{$(!1)}}};if(!e)return r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"My Profile"}),r.jsxs("p",{className:"text-sm text-slate-400",children:[r.jsx(ce,{to:"/auth",className:"text-brand-orange hover:underline",children:"Sign in"})," ","to view and edit your profile."]})]});if(!S)return r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"My Profile"}),r.jsx("p",{className:"text-sm text-red-400",children:"API URL not set."})]});if(b)return r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"My Profile"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Loading profile"})]});const z=d!=null&&d.profile?Ab(d.profile.lastLoginAt,h,d.profile.lastLoginIp):"";return r.jsxs("div",{className:"space-y-6 max-w-2xl",children:[r.jsx(ce,{to:"/",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:" Back to Home"}),r.jsx("header",{children:r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"My Profile"})}),r.jsxs("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:[r.jsx("button",{type:"button",onClick:()=>P("profile"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="profile"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Profile"}),r.jsx("button",{type:"button",onClick:()=>P("groups"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="groups"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Custom groups"})]}),o==="groups"&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-sm text-slate-400",children:"Add or remove yourself from custom groups. Changes take effect immediately."}),J&&r.jsx("div",{className:`rounded-md px-3 py-2 text-sm ${J.error?"border-red-500/60 bg-red-500/10 text-red-200":"border-green-500/40 bg-green-500/10 text-green-200"}`,children:J.text}),W?r.jsx("p",{className:"text-sm text-slate-500",children:"Loading groups"}):O.length===0?r.jsx("p",{className:"text-sm text-slate-500",children:"No custom groups available. Admins can create groups in Membership."}):r.jsx("ul",{className:"space-y-2",children:O.map(N=>{const T=((d==null?void 0:d.customGroups)??[]).includes(N.name);return r.jsxs("li",{className:"flex items-center justify-between rounded-lg border border-slate-800 bg-slate-950/60 px-3 py-2",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-slate-200",children:N.name}),N.description&&r.jsx("span",{className:"text-slate-500 ml-2 text-sm",children:N.description})]}),r.jsx("button",{type:"button",onClick:()=>B(N.name,T),disabled:ie===N.name,className:`rounded-md px-3 py-1.5 text-xs font-medium ${T?"border border-amber-500/60 bg-amber-500/10 text-amber-300 hover:bg-amber-500/20":"border border-emerald-500/60 bg-emerald-500/10 text-emerald-300 hover:bg-emerald-500/20"} disabled:opacity-50`,children:ie===N.name?"":T?"Leave":"Join"})]},N.name)})})]}),o==="profile"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-xs font-medium text-slate-400",children:"Last login timezone"}),r.jsx("select",{value:h,onChange:N=>{const T=parseInt(N.target.value,10);Lb(T),v(T)},className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",children:nd.map(N=>r.jsx("option",{value:N.value,children:N.label},N.value))})]}),R&&r.jsx("div",{className:`rounded-md px-3 py-2 text-sm ${R.error?"border-red-500/60 bg-red-500/10 text-red-200":"border-green-500/40 bg-green-500/10 text-green-200"}`,children:R.text}),d&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[r.jsx("h2",{className:"text-sm font-semibold text-slate-200 mb-3",children:"User info"}),r.jsx("table",{className:"w-full text-sm",children:r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{className:"py-1 pr-4 font-medium text-slate-300 w-28",children:"Email"}),r.jsx("td",{className:"text-slate-400",children:d.email??""})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"py-1 pr-4 font-medium text-slate-300",children:"Status"}),r.jsx("td",{className:"text-slate-400",children:d.status??""})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"py-1 pr-4 font-medium text-slate-300",children:"Last login"}),r.jsx("td",{className:"text-slate-400",children:z})]})]})})]}),r.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[r.jsx("h2",{className:"text-sm font-semibold text-slate-200 mb-3",children:"System role"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:(((U=d.cognitoGroups)==null?void 0:U.length)??0)>0?d.cognitoGroups.map(N=>{const T=Pb[N]??N,G=N==="admin"?"bg-amber-500/20 text-amber-300":N==="manager"?"bg-blue-500/20 text-blue-300":"bg-slate-700 text-slate-200";return r.jsx("span",{className:`rounded-md px-2 py-0.5 text-xs font-medium ${G}`,children:T},N)}):r.jsx("span",{className:"rounded-md px-2 py-0.5 text-xs font-medium bg-slate-700 text-slate-200",children:"User"})})]}),r.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[r.jsx("h2",{className:"text-sm font-semibold text-slate-200 mb-3",children:"Custom groups"}),(((M=d.customGroups)==null?void 0:M.length)??0)>0?r.jsx("div",{className:"flex flex-wrap gap-2",children:d.customGroups.map(N=>r.jsx("span",{className:"rounded-md px-2 py-0.5 text-xs font-medium bg-emerald-500/20 text-emerald-300",children:N},N))}):r.jsx("p",{className:"text-sm text-slate-500",children:"Not in any custom groups."})]}),r.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[r.jsx("h2",{className:"text-sm font-semibold text-slate-200 mb-3",children:"Edit profile"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Profile icon"}),r.jsxs("div",{className:"flex items-start gap-4",children:[(F=d.profile)!=null&&F.avatarUrl?r.jsx("img",{src:d.profile.avatarUrl,alt:"Profile",className:"h-24 w-24 rounded-full border-2 border-slate-700 object-cover"}):r.jsx("div",{className:"h-24 w-24 rounded-full border-2 border-slate-700 bg-slate-800 flex items-center justify-center text-2xl text-slate-500",children:"?"}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/gif,image/webp",onChange:K,className:"block w-full text-xs text-slate-300 file:mr-3 file:rounded-md file:border-0 file:bg-slate-800 file:px-3 file:py-1.5 file:text-slate-100"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Or paste image URL (min 4848, max 5 MB):"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"url",value:j,onChange:N=>w(N.target.value),placeholder:"https://example.com/avatar.png",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),r.jsx("button",{type:"button",onClick:_,disabled:!j.trim()||E,className:"rounded-md border border-slate-600 px-3 py-2 text-sm font-medium text-slate-200 hover:bg-slate-800 disabled:opacity-50",children:E?"Importing":"Use from URL"})]}),((Z=d.profile)==null?void 0:Z.avatarUrl)&&r.jsx("button",{type:"button",onClick:ne,className:"self-start rounded-md border border-red-500/60 bg-red-500/10 px-2 py-1 text-xs font-medium text-red-300 hover:bg-red-500/20",children:"Remove icon"})]})]}),r.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"PNG, JPEG, GIF, or WebP. Same constraints as thumbnail uploads."}),p&&r.jsx("p",{className:"mt-1 text-xs text-red-400",children:p})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"profile-description",className:"block text-xs font-medium text-slate-400 mb-1",children:"Description"}),r.jsx("textarea",{id:"profile-description",value:f,onChange:N=>m(N.target.value),maxLength:100,placeholder:"About you (max 100 characters)",rows:4,className:"w-full max-w-md rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),r.jsxs("div",{className:`mt-1 text-xs ${f.length>=100?"text-red-400":"text-slate-500"}`,children:[f.length," / 100"]})]}),r.jsx("button",{type:"button",onClick:k,disabled:C,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:C?"Saving":"Save"})]})]})]})]})]})},Ib=/^\d{4}-\d{2}-\d{2}$/;function Fu(e){if(!Ib.test(e))return!1;const t=new Date(e);return!isNaN(t.getTime())}const ur=({id:e,value:t,onChange:n,label:s,required:a,className:l="",inputClassName:o=""})=>{const c=i.useRef(null),d=i.useRef(null),u=y=>{const x=y.target.value.replace(/[^\d-]/g,"");n(x)},f=()=>{const y=t.trim();y&&!Fu(y)&&n("")},m=y=>{const C=y.target.value;C&&n(C)},h=()=>{const y=c.current;y&&(y.focus(),typeof y.showPicker=="function"&&y.showPicker())},v="rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",b=t&&Fu(t);return r.jsxs("div",{className:l,children:[r.jsxs("label",{htmlFor:`${e}-text`,className:"block text-xs font-semibold text-slate-400 mb-1",children:[s,r.jsx("span",{className:"block font-normal text-slate-500 mt-0.5",children:"yyyy-MM-DD or use calendar"})]}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("input",{ref:d,type:"text",id:`${e}-text`,value:t,onChange:u,onBlur:f,placeholder:"yyyy-MM-DD",required:a,pattern:a?"[0-9]{4}-[0-9]{2}-[0-9]{2}":void 0,title:a?"Enter date as yyyy-MM-DD":void 0,className:`${v} flex-1 min-w-0 ${o}`,inputMode:"numeric",autoComplete:"off"}),r.jsx("input",{ref:c,type:"date",id:e,value:b?t:"",onChange:m,required:a,className:"sr-only","aria-hidden":!0}),r.jsx("button",{type:"button",onClick:h,title:"Open calendar","aria-label":"Open calendar",className:"rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-slate-400 hover:bg-slate-800 hover:text-slate-200 focus:border-brand-orange focus:outline-none shrink-0",children:r.jsx($g,{className:"h-5 w-5"})})]})]})};function _u(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Ao=10,Ub=()=>{const{user:e}=Ae(),[t,n]=qt(),[s,a]=i.useState([]),[l,o]=i.useState(()=>{const D=t.get("playerIds");return D?D.split(",").filter(Boolean):[]}),[c,d]=i.useState([]),[u,f]=i.useState(1),[m,h]=i.useState(!1),[v,b]=i.useState(()=>t.get("date")??""),[y,C]=i.useState(()=>t.get("dateFrom")??""),[x,p]=i.useState(()=>t.get("dateTo")??""),[g,j]=i.useState(""),[w,E]=i.useState(!1),[$,R]=i.useState(null),[H,O]=i.useState(null),[q,W]=i.useState(!1),[se,J]=i.useState(()=>t.get("sortOrder")==="oldest"?"oldest":"newest"),[V,ie]=i.useState(()=>t.get("playerMode")==="or"?"or":"and"),pe=i.useRef(null),S=Kc(e),P=Vc(e),I=D=>{const X=s.find(ae=>ae.id===D||ae.PK===D);return X&&(X.name||X.id)||D},B=async()=>{const D=_u();if(D)try{const X=await Q(`${D}/squash/players`);if(!X.ok){const xe=await X.json().catch(()=>({}));throw new Error(xe.error||"Failed")}const ue=((await X.json()).players??[]).map(xe=>({...xe,id:xe.id||xe.PK||""}));a(ue)}catch(X){O((X==null?void 0:X.message)??"Failed to load players")}},k=async()=>{const D=_u();if(!D)return;const X=new URLSearchParams;v&&X.set("date",v),y&&X.set("dateFrom",y),x&&X.set("dateTo",x),l.length&&(X.set("playerIds",l.join(",")),X.set("playerMode",V));const ae=X.toString()?`?${X.toString()}`:"";W(!0),O(null);try{const ue=await Q(`${D}/squash/matches${ae}`);if(!ue.ok){const be=await ue.json().catch(()=>({}));throw new Error(be.error||"Failed")}const xe=await ue.json();d(xe.matches??[]),h(!0),f(1);const ye=new URLSearchParams;v&&ye.set("date",v),y&&ye.set("dateFrom",y),x&&ye.set("dateTo",x),l.length&&(ye.set("playerIds",l.join(",")),ye.set("playerMode",V)),ye.set("sortOrder",se),n(ye,{replace:!0})}catch(ue){O((ue==null?void 0:ue.message)??"Failed to search matches")}finally{W(!1)}},K=()=>{b(""),C(""),p(""),o([]),j(""),ie("and"),h(!1),d([]),f(1),n({},{replace:!0})},ne=D=>{l.includes(D)||o([...l,D]),j("")},_=D=>{o(l.filter(X=>X!==D))},z=s.filter(D=>!l.includes(D.id)&&(!g.trim()||(D.name||"").toLowerCase().includes(g.toLowerCase())));i.useEffect(()=>{S&&B()},[S]);const U=t.get("date")||t.get("dateFrom")||t.get("dateTo")||t.get("playerIds");i.useEffect(()=>{!S||!U||k()},[]),i.useEffect(()=>{function D(X){pe.current&&!pe.current.contains(X.target)&&E(!1)}if(w)return document.addEventListener("mousedown",D),()=>document.removeEventListener("mousedown",D)},[w]);const M=i.useMemo(()=>{const D=[...c];return D.sort((X,ae)=>{const ue=X.date||"",xe=ae.date||"";return se==="newest"?xe.localeCompare(ue):ue.localeCompare(xe)}),D},[c,se]),F=Math.max(1,Math.ceil(M.length/Ao)),Z=(u-1)*Ao,N=M.slice(Z,Z+Ao),T=D=>{const X=D.teamAGames??0,ae=D.teamBGames??0,ue=D.winningTeam==="B"?ae:X,xe=D.winningTeam==="B"?X:ae;return`${ue}-${xe}`},G=D=>{const X=[I(D.teamAPlayer1Id||""),I(D.teamAPlayer2Id||"")].filter(Boolean).join(" & "),ae=[I(D.teamBPlayer1Id||""),I(D.teamBPlayer2Id||"")].filter(Boolean).join(" & "),ue=D.winningTeam==="B"?ae:X,xe=D.winningTeam==="B"?X:ae;return r.jsxs("li",{className:"flex items-center gap-2 flex-wrap py-2 border-b border-slate-800 last:border-0",children:[r.jsx("span",{className:"font-semibold text-slate-200",children:D.date||""}),r.jsxs("span",{className:"text-slate-300",children:[ue," vs ",xe]}),r.jsx("span",{className:"italic text-slate-400",children:T(D)})]},D.id||D.date+ue)},Y=[];if(F<=7)for(let D=1;D<=F;D++)Y.push(D);else{const D=u;Y.push(1),D>3&&Y.push("");for(let X=Math.max(2,D-1);X<=Math.min(F-1,D+1);X++)Y.includes(X)||Y.push(X);D<F-2&&Y.push(""),F>1&&Y.push(F)}return e?S?r.jsxs("div",{className:"space-y-6",children:[r.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Doubles"}),P&&r.jsx("p",{className:"text-sm text-slate-400",children:r.jsx(ce,{to:"/squash-admin",className:"text-brand-orange hover:text-orange-400",children:"Squash Admin"})}),($||H)&&r.jsx("div",{className:`rounded-md px-4 py-3 text-sm ${H?"bg-red-900/30 border border-red-800/50 text-red-200":"bg-emerald-900/30 border border-emerald-800/50 text-emerald-200"}`,children:H||$}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-base font-semibold text-slate-200 mb-3",children:"Search matches"}),r.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[r.jsx(ur,{id:"searchDate",value:v,onChange:b,label:"Date (exact)",className:"max-w-[12rem]"}),r.jsx(ur,{id:"searchDateFrom",value:y,onChange:C,label:"Date from",className:"max-w-[12rem]"}),r.jsx(ur,{id:"searchDateTo",value:x,onChange:p,label:"Date to",className:"max-w-[12rem]"}),r.jsxs("div",{className:"relative max-w-[14rem] min-w-[12rem]",ref:pe,children:[r.jsx("label",{className:"block text-xs font-semibold text-slate-400 mb-1",children:"Filter by players"}),r.jsx("input",{type:"text",value:g,onChange:D=>j(D.target.value),onFocus:()=>E(!0),placeholder:"Search players...",autoComplete:"off",className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none"}),w&&r.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-slate-900 border border-slate-700 rounded-md max-h-48 overflow-y-auto z-10",children:z.length?z.map(D=>r.jsx("button",{type:"button",onClick:()=>ne(D.id),className:"w-full text-left px-3 py-2 text-sm text-slate-200 hover:bg-slate-800",children:D.name||D.id},D.id)):r.jsx("div",{className:"px-3 py-2 text-sm text-slate-500",children:"No matches"})}),r.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:l.map(D=>r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-slate-700 text-slate-200 text-xs",children:[I(D),r.jsx("button",{type:"button",onClick:()=>_(D),className:"text-slate-400 hover:text-slate-100","aria-label":"Remove",children:""})]},D))}),l.length>0&&r.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[r.jsx("span",{className:"text-xs text-slate-500",children:"Match:"}),r.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[r.jsx("button",{type:"button",onClick:()=>ie("and"),className:`rounded px-2 py-0.5 text-xs font-medium ${V==="and"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"AND"}),r.jsx("button",{type:"button",onClick:()=>ie("or"),className:`rounded px-2 py-0.5 text-xs font-medium ${V==="or"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"OR"})]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",onClick:k,disabled:q,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:q?"Searching":"Search"}),r.jsx("button",{type:"button",onClick:K,className:"rounded-md border border-slate-600 px-4 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Clear"})]})]})]}),r.jsxs("section",{children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-3",children:[r.jsx("h2",{className:"text-base font-semibold text-slate-200",children:"Results"}),m&&M.length>0&&r.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[r.jsx("button",{type:"button",onClick:()=>J("newest"),className:`rounded px-2 py-0.5 text-xs font-medium ${se==="newest"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"Newest first"}),r.jsx("button",{type:"button",onClick:()=>J("oldest"),className:`rounded px-2 py-0.5 text-xs font-medium ${se==="oldest"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"Oldest first"})]})]}),m&&r.jsx("div",{className:"rounded-md border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm text-slate-400 mb-3",children:M.length===0?"No results":`${M.length} results`}),m?N.length===0?r.jsx("ul",{className:"list-none p-0",children:r.jsx("li",{className:"py-2 text-slate-400",children:"No matches found."})}):r.jsxs(r.Fragment,{children:[r.jsx("ul",{className:"list-none p-0",children:N.map(G)}),F>1&&r.jsxs("div",{className:"flex items-center gap-2 mt-4 flex-wrap",children:[r.jsx("button",{type:"button",disabled:u<=1,onClick:()=>f(D=>Math.max(1,D-1)),className:"rounded-md border border-slate-600 px-3 py-1 text-sm disabled:opacity-50 disabled:cursor-not-allowed text-slate-300 hover:bg-slate-800",children:"Prev"}),r.jsx("span",{className:"flex items-center gap-1",children:Y.map((D,X)=>D===""?r.jsx("span",{className:"px-1 text-slate-500",children:""},`ellipsis-${X}`):D===u?r.jsx("span",{className:"min-w-[2rem] px-2 py-1 text-center font-semibold text-slate-200",children:D},D):r.jsx("button",{type:"button",onClick:()=>f(D),className:"min-w-[2rem] rounded px-2 py-1 text-sm text-slate-300 hover:bg-slate-800 border border-slate-600",children:D},D))}),r.jsx("button",{type:"button",disabled:u>=F,onClick:()=>f(D=>Math.min(F,D+1)),className:"rounded-md border border-slate-600 px-3 py-1 text-sm disabled:opacity-50 disabled:cursor-not-allowed text-slate-300 hover:bg-slate-800",children:"Next"})]})]}):r.jsx("div",{className:"flex items-center justify-center min-h-[280px]",children:r.jsx("p",{className:"text-2xl sm:text-3xl font-light text-slate-500/80 tracking-wide animate-pulse",children:"Enter search criteria and click Search to find matches."})})]})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Doubles"}),r.jsx("div",{className:"rounded-md bg-amber-900/30 border border-amber-800/50 px-4 py-3 text-sm text-amber-200",children:"You do not have access to the Squash section. Join the Squash group or contact an admin."})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Doubles"}),r.jsxs("div",{className:"rounded-md bg-red-900/30 border border-red-800/50 px-4 py-3 text-sm text-red-200",children:["Sign in required. ",r.jsx(ce,{to:"/auth",className:"underline hover:text-red-100",children:"Sign in"})]})]})};function rr(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const $o=10,Mb=()=>{const{user:e}=Ae(),[t,n]=qt(),[s,a]=i.useState("matches"),[l,o]=i.useState([]),[c,d]=i.useState(()=>{const A=t.get("playerIds");return A?A.split(",").filter(Boolean):[]}),[u,f]=i.useState([]),[m,h]=i.useState(1),[v,b]=i.useState(!1),[y,C]=i.useState(()=>t.get("date")??""),[x,p]=i.useState(()=>t.get("dateFrom")??""),[g,j]=i.useState(()=>t.get("dateTo")??""),[w,E]=i.useState(""),[$,R]=i.useState(!1),[H,O]=i.useState(null),[q,W]=i.useState(""),[se,J]=i.useState(""),[V,ie]=i.useState(""),[pe,S]=i.useState(""),[P,I]=i.useState(""),[B,k]=i.useState("A"),[K,ne]=i.useState(0),[_,z]=i.useState(!1),[U,M]=i.useState(!1),[F,Z]=i.useState(()=>t.get("sortOrder")==="oldest"?"oldest":"newest"),[N,T]=i.useState(()=>t.get("playerMode")==="or"?"or":"and"),G=i.useRef(null),[Y,D]=i.useState([]),[X,ae]=i.useState([]),[ue,xe]=i.useState(null),[ye,be]=i.useState(""),[Ke,lt]=i.useState(""),[le,Ne]=i.useState(""),[Fe,Te]=i.useState(!1),[Se,_e]=i.useState(null),[Be,et]=i.useState(null),ot=Vc(e),nt=A=>{const he=l.find(L=>L.id===A||L.PK===A);return he&&(he.name||he.id)||A},It=async()=>{const A=rr();if(A)try{const he=await Q(`${A}/squash/players`);if(!he.ok){const ve=await he.json().catch(()=>({}));throw new Error(ve.error||"Failed")}const te=((await he.json()).players??[]).map(ve=>({...ve,id:ve.id||ve.PK||""}));o(te),D(te)}catch(he){_e((he==null?void 0:he.message)??"Failed to load players")}},fn=async()=>{const A=rr();if(A)try{const he=await Q(`${A}/admin/users?limit=60`);if(!he.ok)return;const L=await he.json();ae(L.users??[])}catch{ae([])}},Et=async()=>{const A=rr();if(!A)return;const he=new URLSearchParams;y&&he.set("date",y),x&&he.set("dateFrom",x),g&&he.set("dateTo",g),c.length&&(he.set("playerIds",c.join(",")),he.set("playerMode",N));const L=he.toString()?`?${he.toString()}`:"";M(!0),_e(null);try{const te=await Q(`${A}/squash/matches${L}`);if(!te.ok){const je=await te.json().catch(()=>({}));throw new Error(je.error||"Failed")}const ve=await te.json();f(ve.matches??[]),b(!0),h(1);const de=new URLSearchParams;y&&de.set("date",y),x&&de.set("dateFrom",x),g&&de.set("dateTo",g),c.length&&(de.set("playerIds",c.join(",")),de.set("playerMode",N)),de.set("sortOrder",F),n(de,{replace:!0})}catch(te){_e((te==null?void 0:te.message)??"Failed to search matches")}finally{M(!1)}},rn=()=>{C(""),p(""),j(""),d([]),T("and"),E(""),b(!1),f([]),h(1),n({},{replace:!0})},oe=A=>{c.includes(A)||d([...c,A]),E("")},ge=A=>{d(c.filter(he=>he!==A))},We=l.filter(A=>!c.includes(A.id)&&(!w.trim()||(A.name||"").toLowerCase().includes(w.toLowerCase()))),Ue=[se,V,pe,P],ke=A=>{const he=A==="p1"?0:A==="p2"?1:A==="p3"?2:3,L=Ue.filter((te,ve)=>ve!==he);return l.filter(te=>!L.includes(te.id))},ee=async A=>{if(A.preventDefault(),!q||!se||!V||!pe||!P){_e("All fields are required.");return}const he=[se,V,pe,P];if(new Set(he).size!==4){_e("Each player can only be on one team.");return}const L=rr();if(!L)return;const de={date:q,teamAPlayer1Id:se,teamAPlayer2Id:V,teamBPlayer1Id:pe,teamBPlayer2Id:P,winningTeam:B,teamAGames:B==="A"?3:K,teamBGames:B==="B"?3:K},je=H?"PUT":"POST";H&&(de.id=H),z(!0),_e(null);try{const we=await Q(`${L}/squash/matches`,{method:je,headers:{"Content-Type":"application/json"},body:JSON.stringify(de)});if(!we.ok){const Pe=await we.json().catch(()=>({}));throw new Error(Pe.error||"Failed")}O(null),W(""),J(""),ie(""),S(""),I(""),k("A"),ne(0),Et()}catch(we){_e((we==null?void 0:we.message)??"Failed")}finally{z(!1)}},me=()=>{O(null),W(""),J(""),ie(""),S(""),I(""),k("A"),ne(0)},Me=A=>{var L,te;const he=A.id||((te=(L=A.PK)==null?void 0:L.replace)==null?void 0:te.call(L,"SQUASH#MATCH#",""))||"";O(he),W(A.date||""),J(A.teamAPlayer1Id||""),ie(A.teamAPlayer2Id||""),S(A.teamBPlayer1Id||""),I(A.teamBPlayer2Id||""),k(A.winningTeam||"A"),ne(A.winningTeam==="A"?A.teamBGames??0:A.teamAGames??0)},De=async A=>{if(!confirm("Delete this match?"))return;const he=rr();if(he)try{const L=await Q(`${he}/squash/matches?id=${encodeURIComponent(A)}`,{method:"DELETE"});if(!L.ok){const te=await L.json().catch(()=>({}));throw new Error(te.error||"Failed")}Et()}catch(L){_e((L==null?void 0:L.message)??"Delete failed")}},Ee=async A=>{A.preventDefault();const he=ye.trim();if(!he){_e("Name is required.");return}const L=rr();if(!L)return;const te={name:he,email:Ke.trim()||void 0,userId:le||void 0},ve=ue?"PUT":"POST";ue&&(te.id=ue),Te(!0),_e(null);try{const de=await Q(`${L}/squash/players`,{method:ve,headers:{"Content-Type":"application/json"},body:JSON.stringify(te)});if(!de.ok){const je=await de.json().catch(()=>({}));throw new Error(je.error||"Failed")}xe(null),be(""),lt(""),Ne(""),It()}catch(de){_e((de==null?void 0:de.message)??"Failed")}finally{Te(!1)}},Le=()=>{xe(null),be(""),lt(""),Ne("")},Oe=A=>{xe(A.id),be(A.name||""),lt(A.email||""),Ne(A.userId||"")},pn=async A=>{if(!confirm("Delete this player?"))return;const he=rr();if(he)try{const L=await Q(`${he}/squash/players?id=${encodeURIComponent(A)}`,{method:"DELETE"});if(!L.ok){const te=await L.json().catch(()=>({}));throw new Error(te.error||"Failed")}It()}catch(L){_e((L==null?void 0:L.message)??"Delete failed")}};i.useEffect(()=>{ot&&(It(),s==="players"&&fn())},[ot,s]);const hn=t.get("date")||t.get("dateFrom")||t.get("dateTo")||t.get("playerIds");i.useEffect(()=>{!ot||!hn||Et()},[]),i.useEffect(()=>{function A(he){G.current&&!G.current.contains(he.target)&&R(!1)}if($)return document.addEventListener("mousedown",A),()=>document.removeEventListener("mousedown",A)},[$]);const gt=i.useMemo(()=>{const A=[...u];return A.sort((he,L)=>{const te=he.date||"",ve=L.date||"";return F==="newest"?ve.localeCompare(te):te.localeCompare(ve)}),A},[u,F]),ut=Math.max(1,Math.ceil(gt.length/$o)),xn=(m-1)*$o,is=gt.slice(xn,xn+$o),Hl=A=>{const he=A.teamAGames??0,L=A.teamBGames??0;return A.winningTeam==="A"?`${he}-${L}`:`${L}-${he}`},Bt=[];if(ut<=7)for(let A=1;A<=ut;A++)Bt.push(A);else{const A=m;Bt.push(1),A>3&&Bt.push("");for(let he=Math.max(2,A-1);he<=Math.min(ut-1,A+1);he++)Bt.includes(he)||Bt.push(he);A<ut-2&&Bt.push(""),ut>1&&Bt.push(ut)}return e?ot?r.jsxs("div",{className:"space-y-6",children:[r.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Admin"}),r.jsx("p",{className:"text-sm text-slate-400",children:r.jsx(ce,{to:"/squash",className:"text-brand-orange hover:text-orange-400",children:"Squash"})}),(Be||Se)&&r.jsx("div",{className:`rounded-md px-4 py-3 text-sm ${Se?"bg-red-900/30 border border-red-800/50 text-red-200":"bg-emerald-900/30 border border-emerald-800/50 text-emerald-200"}`,children:Se||Be}),r.jsxs("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:[r.jsx("button",{type:"button",onClick:()=>a("matches"),className:`px-4 py-2 rounded-md text-sm font-medium ${s==="matches"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Matches"}),r.jsx("button",{type:"button",onClick:()=>a("players"),className:`px-4 py-2 rounded-md text-sm font-medium ${s==="players"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Players"})]}),s==="matches"&&r.jsxs(r.Fragment,{children:[r.jsxs("section",{children:[r.jsx("h2",{className:"text-base font-semibold text-slate-200 mb-3",children:"Add match"}),r.jsxs("form",{onSubmit:ee,className:"grid grid-cols-2 gap-4 max-w-2xl",children:[r.jsx("div",{className:"col-span-2",children:r.jsx(ur,{id:"matchDate",value:q,onChange:W,label:"Date",required:!0})}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"matchTeamAP1",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Team A  Player 1"}),r.jsxs("select",{id:"matchTeamAP1",value:se,onChange:A=>J(A.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[r.jsx("option",{value:"",children:" Select "}),ke("p1").map(A=>r.jsx("option",{value:A.id,children:A.name||A.id},A.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"matchTeamAP2",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Team A  Player 2"}),r.jsxs("select",{id:"matchTeamAP2",value:V,onChange:A=>ie(A.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[r.jsx("option",{value:"",children:" Select "}),ke("p2").map(A=>r.jsx("option",{value:A.id,children:A.name||A.id},A.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"matchTeamBP1",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Team B  Player 1"}),r.jsxs("select",{id:"matchTeamBP1",value:pe,onChange:A=>S(A.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[r.jsx("option",{value:"",children:" Select "}),ke("p3").map(A=>r.jsx("option",{value:A.id,children:A.name||A.id},A.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"matchTeamBP2",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Team B  Player 2"}),r.jsxs("select",{id:"matchTeamBP2",value:P,onChange:A=>I(A.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[r.jsx("option",{value:"",children:" Select "}),ke("p4").map(A=>r.jsx("option",{value:A.id,children:A.name||A.id},A.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"matchWinningTeam",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Winning team"}),r.jsxs("select",{id:"matchWinningTeam",value:B,onChange:A=>k(A.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[r.jsx("option",{value:"A",children:"Team A"}),r.jsx("option",{value:"B",children:"Team B"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"matchLoserGames",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Games won by losing team"}),r.jsxs("select",{id:"matchLoserGames",value:K,onChange:A=>ne(parseInt(A.target.value,10)),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[r.jsx("option",{value:0,children:"0"}),r.jsx("option",{value:1,children:"1"}),r.jsx("option",{value:2,children:"2"})]})]}),r.jsxs("div",{className:"col-span-2 flex gap-2",children:[r.jsx("button",{type:"submit",disabled:_,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:H?"Update match":"Add match"}),r.jsx("button",{type:"button",onClick:me,className:"rounded-md border border-slate-600 px-4 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"})]})]})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-base font-semibold text-slate-200 mb-3",children:"Search matches"}),r.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[r.jsx(ur,{id:"searchDate",value:y,onChange:C,label:"Date (exact)",className:"max-w-[12rem]"}),r.jsx(ur,{id:"searchDateFrom",value:x,onChange:p,label:"Date from",className:"max-w-[12rem]"}),r.jsx(ur,{id:"searchDateTo",value:g,onChange:j,label:"Date to",className:"max-w-[12rem]"}),r.jsxs("div",{className:"relative max-w-[14rem] min-w-[12rem]",ref:G,children:[r.jsx("label",{className:"block text-xs font-semibold text-slate-400 mb-1",children:"Filter by players"}),r.jsx("input",{type:"text",value:w,onChange:A=>E(A.target.value),onFocus:()=>R(!0),placeholder:"Search players...",autoComplete:"off",className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none"}),$&&r.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-slate-900 border border-slate-700 rounded-md max-h-48 overflow-y-auto z-10",children:We.length?We.map(A=>r.jsx("button",{type:"button",onClick:()=>oe(A.id),className:"w-full text-left px-3 py-2 text-sm text-slate-200 hover:bg-slate-800",children:A.name||A.id},A.id)):r.jsx("div",{className:"px-3 py-2 text-sm text-slate-500",children:"No matches"})}),r.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:c.map(A=>r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-slate-700 text-slate-200 text-xs",children:[nt(A),r.jsx("button",{type:"button",onClick:()=>ge(A),className:"text-slate-400 hover:text-slate-100","aria-label":"Remove",children:""})]},A))}),c.length>0&&r.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[r.jsx("span",{className:"text-xs text-slate-500",children:"Match:"}),r.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[r.jsx("button",{type:"button",onClick:()=>T("and"),className:`rounded px-2 py-0.5 text-xs font-medium ${N==="and"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"AND"}),r.jsx("button",{type:"button",onClick:()=>T("or"),className:`rounded px-2 py-0.5 text-xs font-medium ${N==="or"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"OR"})]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",onClick:Et,disabled:U,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:U?"Searching":"Search"}),r.jsx("button",{type:"button",onClick:rn,className:"rounded-md border border-slate-600 px-4 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Clear"})]})]})]}),r.jsxs("section",{children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-3",children:[r.jsx("h2",{className:"text-base font-semibold text-slate-200",children:"Search results"}),v&&gt.length>0&&r.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[r.jsx("button",{type:"button",onClick:()=>Z("newest"),className:`rounded px-2 py-0.5 text-xs font-medium ${F==="newest"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"Newest first"}),r.jsx("button",{type:"button",onClick:()=>Z("oldest"),className:`rounded px-2 py-0.5 text-xs font-medium ${F==="oldest"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"Oldest first"})]})]}),v&&r.jsx("div",{className:"rounded-md border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm text-slate-400 mb-3",children:gt.length===0?"No results":`${gt.length} results`}),v?is.length===0?r.jsx("ul",{className:"list-none p-0",children:r.jsx("li",{className:"py-2 text-slate-400",children:"No matches found."})}):r.jsxs(r.Fragment,{children:[r.jsx("ul",{className:"list-none p-0",children:is.map(A=>{var ve,de;const he=A.id||((de=(ve=A.PK)==null?void 0:ve.replace)==null?void 0:de.call(ve,"SQUASH#MATCH#",""))||"",L=[nt(A.teamAPlayer1Id||""),nt(A.teamAPlayer2Id||"")].filter(Boolean).join(" & "),te=[nt(A.teamBPlayer1Id||""),nt(A.teamBPlayer2Id||"")].filter(Boolean).join(" & ");return r.jsxs("li",{className:"flex items-center gap-2 flex-wrap py-2 border-b border-slate-800 last:border-0",children:[r.jsx("span",{className:"font-semibold text-slate-200",children:A.date||""}),r.jsxs("span",{className:"text-slate-300",children:[L," vs ",te]}),r.jsx("span",{className:"italic text-slate-400",children:Hl(A)}),r.jsx("button",{type:"button",onClick:()=>Me(A),className:"rounded-md border border-slate-600 px-2 py-1 text-xs text-slate-300 hover:bg-slate-800",children:"Edit"}),r.jsx("button",{type:"button",onClick:()=>De(he),className:"rounded-md border border-red-800/50 px-2 py-1 text-xs text-red-300 hover:bg-red-900/30",children:"Delete"})]},he)})}),ut>1&&r.jsxs("div",{className:"flex items-center gap-2 mt-4 flex-wrap",children:[r.jsx("button",{type:"button",disabled:m<=1,onClick:()=>h(A=>Math.max(1,A-1)),className:"rounded-md border border-slate-600 px-3 py-1 text-sm disabled:opacity-50 disabled:cursor-not-allowed text-slate-300 hover:bg-slate-800",children:"Prev"}),r.jsx("span",{className:"flex items-center gap-1",children:Bt.map((A,he)=>A===""?r.jsx("span",{className:"px-1 text-slate-500",children:""},`ellipsis-${he}`):A===m?r.jsx("span",{className:"min-w-[2rem] px-2 py-1 text-center font-semibold text-slate-200",children:A},A):r.jsx("button",{type:"button",onClick:()=>h(A),className:"min-w-[2rem] rounded px-2 py-1 text-sm text-slate-300 hover:bg-slate-800 border border-slate-600",children:A},A))}),r.jsx("button",{type:"button",disabled:m>=ut,onClick:()=>h(A=>Math.min(ut,A+1)),className:"rounded-md border border-slate-600 px-3 py-1 text-sm disabled:opacity-50 disabled:cursor-not-allowed text-slate-300 hover:bg-slate-800",children:"Next"})]})]}):r.jsx("div",{className:"flex items-center justify-center min-h-[280px]",children:r.jsx("p",{className:"text-2xl sm:text-3xl font-light text-slate-500/80 tracking-wide animate-pulse",children:"Enter search criteria and click Search to find matches."})})]})]}),s==="players"&&r.jsxs(r.Fragment,{children:[r.jsxs("section",{children:[r.jsx("h2",{className:"text-base font-semibold text-slate-200 mb-3",children:"Players"}),r.jsxs("form",{onSubmit:Ee,className:"space-y-4 max-w-md",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"playerName",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Name"}),r.jsx("input",{type:"text",id:"playerName",value:ye,onChange:A=>be(A.target.value),required:!0,placeholder:"Player name",className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"playerEmail",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Email (optional)"}),r.jsx("input",{type:"email",id:"playerEmail",value:Ke,onChange:A=>lt(A.target.value),placeholder:"player@example.com",className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"playerUserId",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Link to user (optional)"}),r.jsxs("select",{id:"playerUserId",value:le,onChange:A=>Ne(A.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[r.jsx("option",{value:"",children:" None "}),X.map(A=>r.jsx("option",{value:A.sub||"",children:A.email||A.username||A.sub},A.sub||A.username))]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"submit",disabled:Fe,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:ue?"Update player":"Add player"}),r.jsx("button",{type:"button",onClick:Le,className:"rounded-md border border-slate-600 px-4 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"})]})]})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-base font-semibold text-slate-200 mb-3",children:"Player list"}),Y.length===0?r.jsx("p",{className:"text-sm text-slate-500",children:"No players yet. Add players above."}):r.jsx("ul",{className:"list-none p-0",children:Y.map(A=>r.jsxs("li",{className:"flex items-center gap-2 flex-wrap py-2 border-b border-slate-800 last:border-0",children:[r.jsx("span",{className:"font-semibold text-slate-200",children:A.name||A.id}),A.email&&r.jsxs("span",{className:"text-slate-500 text-sm",children:["(",A.email,")"]}),r.jsx("button",{type:"button",onClick:()=>Oe(A),className:"rounded-md border border-slate-600 px-2 py-1 text-xs text-slate-300 hover:bg-slate-800",children:"Edit"}),r.jsx("button",{type:"button",onClick:()=>pn(A.id),className:"rounded-md border border-red-800/50 px-2 py-1 text-xs text-red-300 hover:bg-red-900/30",children:"Delete"})]},A.id))})]})]})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Admin"}),r.jsx("div",{className:"rounded-md bg-amber-900/30 border border-amber-800/50 px-4 py-3 text-sm text-amber-200",children:"Squash Admin requires manager (in Squash group) or SuperAdmin access."})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Admin"}),r.jsxs("div",{className:"rounded-md bg-red-900/30 border border-red-800/50 px-4 py-3 text-sm text-red-200",children:["Sign in required. ",r.jsx(ce,{to:"/auth",className:"underline hover:text-red-100",children:"Sign in"})]})]})};function Io(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Uo="funkedupshift_financial_guest_symbols",Db=()=>{const{user:e}=Ae(),t=Eg(e),n=qc(e),[s,a]=i.useState([]),[l,o]=i.useState({}),[c,d]=i.useState("yahoo"),[u,f]=i.useState([]),[m,h]=i.useState(!0),[v,b]=i.useState(!1),[y,C]=i.useState(""),[x,p]=i.useState(null),[g,j]=i.useState(null),w=i.useCallback(async()=>{const O=Io();if(O){h(!0),p(null);try{const q=await at(`${O}/financial/config`),W=q.ok?await q.json():{symbols:[],source:"yahoo",availableSources:["yahoo"]},se=W.symbols??[];if(d(W.source??"yahoo"),f(W.availableSources??["yahoo"]),t&&(e!=null&&e.userId)){const J=await Q(`${O}/financial/watchlist`);if(J.ok){const ie=(await J.json()).symbols??[];a(ie.length>0?ie:se)}else a(se)}else{const J=(()=>{try{const V=sessionStorage.getItem(Uo);return V?JSON.parse(V):[]}catch{return[]}})();a(J.length>0?J:se)}}catch(q){p((q==null?void 0:q.message)??"Failed to load watchlist")}finally{h(!1)}}},[t,e==null?void 0:e.userId]),E=i.useCallback(async()=>{const O=Io();if(!O||s.length===0)return;const q={};for(const W of s)try{const se=await at(`${O}/financial/quote?symbol=${encodeURIComponent(W)}&source=${encodeURIComponent(c)}`);if(se.ok){const J=await se.json();q[W]=J}else q[W]=null}catch{q[W]=null}o(q)},[s,c]);i.useEffect(()=>{w()},[w]),i.useEffect(()=>{s.length>0?E():o({})},[s,c,E]);const $=()=>{const O=y.trim().toUpperCase();!O||s.includes(O)||(a(q=>{const W=[...q,O];if(!t)try{sessionStorage.setItem(Uo,JSON.stringify(W))}catch{}return W}),C(""))},R=O=>{a(q=>{const W=q.filter(se=>se!==O);if(!t)try{sessionStorage.setItem(Uo,JSON.stringify(W))}catch{}return W}),o(q=>{const W={...q};return delete W[O],W})},H=async()=>{const O=Io();if(O){b(!0),p(null),j(null);try{const q=await Q(`${O}/financial/watchlist`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbols:s})});if(!q.ok){const W=await q.json().catch(()=>({}));throw new Error(W.error??"Failed to save")}j("Watchlist saved.")}catch(q){p((q==null?void 0:q.message)??"Failed to save")}finally{b(!1)}}};return r.jsxs("div",{className:"space-y-6",children:[r.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Financial"}),n&&r.jsx("p",{className:"text-sm text-slate-400",children:r.jsx(ce,{to:"/admin/financial",className:"text-brand-orange hover:text-orange-400",children:"Financial Admin"})}),m?r.jsx("p",{className:"text-sm text-slate-500",children:"Loading"}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex flex-wrap gap-2 items-end",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"newSymbol",className:"block text-xs text-slate-500 mb-1",children:"Add symbol"}),r.jsx("input",{id:"newSymbol",type:"text",value:y,onChange:O=>C(O.target.value.toUpperCase()),onKeyDown:O=>O.key==="Enter"&&(O.preventDefault(),$()),placeholder:"AAPL",className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 w-24"})]}),r.jsx("button",{type:"button",onClick:$,disabled:!y.trim(),className:"rounded-md bg-brand-orange px-3 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:"Add"}),u.length>1&&r.jsxs("div",{className:"ml-4",children:[r.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Data source"}),r.jsx("select",{value:c,onChange:O=>d(O.target.value),className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50",children:u.map(O=>r.jsx("option",{value:O,children:O==="yahoo"?"Yahoo Finance":"Alpha Vantage"},O))})]})]}),s.length>0&&r.jsx("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 overflow-hidden",children:r.jsxs("table",{className:"min-w-full divide-y divide-slate-800",children:[r.jsx("thead",{className:"bg-slate-900/80",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Symbol"}),r.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase",children:"Price"}),r.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase",children:"Change"}),r.jsx("th",{className:"px-4 py-3 w-10"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-800",children:s.map(O=>{const q=l[O];return r.jsxs("tr",{className:"hover:bg-slate-800/50",children:[r.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-200",children:O}),r.jsx("td",{className:"px-4 py-3 text-sm text-right text-slate-300",children:q?`$${q.price.toFixed(2)}`:""}),r.jsx("td",{className:"px-4 py-3 text-sm text-right",children:q?r.jsxs("span",{className:q.change>=0?"text-emerald-400":"text-red-400",children:[q.change>=0?"+":"",q.change.toFixed(2)," (",q.changePercent>=0?"+":"",q.changePercent.toFixed(2),"%)"]}):r.jsx("span",{className:"text-slate-500",children:""})}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("button",{type:"button",onClick:()=>R(O),className:"text-slate-500 hover:text-red-400","aria-label":`Remove ${O}`,children:""})})]},O)})})]})}),t&&s.length>0&&r.jsx("button",{type:"button",onClick:H,disabled:v,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:v?"Saving":"Save watchlist"}),!t&&r.jsx("p",{className:"text-sm text-slate-500",children:"Sign in to save your watchlist. Guest symbols are temporary and expire when you close the browser."}),s.length===0&&r.jsx("p",{className:"text-sm text-slate-500",children:"Add symbols above to build your watchlist. Default symbols from admin may appear when you first load."})]}),g&&r.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:g}),x&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:x})]})};function Bu(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Ob=()=>{const{user:e}=Ae(),[t,n]=qt(),s=t.get("tab"),a=s==="members"?"members":s==="symbols"?"symbols":"overview",[l,o]=i.useState(a),[c,d]=i.useState([]),[u,f]=i.useState("yahoo"),[m,h]=i.useState(!1),[v,b]=i.useState(!1),[y,C]=i.useState(null),[x,p]=i.useState(null),[g,j]=i.useState(""),[w]=i.useState(["yahoo","alpha_vantage"]);i.useEffect(()=>{o(s==="members"?"members":s==="symbols"?"symbols":"overview")},[s]);const E=W=>{o(W),n(W==="overview"?{}:{tab:W},{replace:!0})},$=i.useCallback(async()=>{const W=Bu();if(W){h(!0),C(null);try{const se=await Q(`${W}/admin/financial/default-symbols`);if(!se.ok)throw new Error("Failed to load");const J=await se.json();d(J.symbols??[]),f(J.source??"yahoo")}catch(se){C((se==null?void 0:se.message)??"Failed to load")}finally{h(!1)}}},[]);i.useEffect(()=>{l==="symbols"&&$()},[l,$]);const R=()=>{const W=g.trim().toUpperCase();!W||c.includes(W)||(d(se=>[...se,W]),j(""))},H=W=>{d(se=>se.filter(J=>J!==W))},O=async()=>{const W=Bu();if(W){b(!0),C(null),p(null);try{const se=await Q(`${W}/admin/financial/default-symbols`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbols:c,source:u})});if(!se.ok){const J=await se.json().catch(()=>({}));throw new Error(J.error??"Failed to save")}p("Default symbols saved.")}catch(se){C((se==null?void 0:se.message)??"Failed to save")}finally{b(!1)}}};return qc(e)?r.jsxs("div",{className:"space-y-6",children:[r.jsxs(ce,{to:"/financial",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Financial"]}),r.jsxs("header",{className:"space-y-2",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Financial Admin"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Manage Financial section settings, members, and data sources."})]}),r.jsxs("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:[r.jsx("button",{type:"button",onClick:()=>E("overview"),className:`px-4 py-2 rounded-md text-sm font-medium ${l==="overview"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Overview"}),r.jsx("button",{type:"button",onClick:()=>E("symbols"),className:`px-4 py-2 rounded-md text-sm font-medium ${l==="symbols"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Tracked Symbols"}),r.jsx("button",{type:"button",onClick:()=>E("members"),className:`px-4 py-2 rounded-md text-sm font-medium ${l==="members"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Members"})]}),l==="overview"&&r.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-6 text-sm text-slate-400",children:[r.jsx("p",{className:"mb-2",children:"Admin configuration:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-1 text-slate-500",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Tracked symbols"}),"  Default symbols for new users' watchlists"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Data source"}),"  Yahoo Finance (no key) or Alpha Vantage (API key in Terraform)"]})]})]}),l==="symbols"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex flex-wrap gap-2 items-end",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"newSymbol",className:"block text-xs text-slate-500 mb-1",children:"Add symbol"}),r.jsx("input",{id:"newSymbol",type:"text",value:g,onChange:W=>j(W.target.value.toUpperCase()),onKeyDown:W=>W.key==="Enter"&&(W.preventDefault(),R()),placeholder:"AAPL",className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 w-24"})]}),r.jsx("button",{type:"button",onClick:R,disabled:!g.trim(),className:"rounded-md bg-brand-orange px-3 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:"Add"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Default data source"}),r.jsx("select",{value:u,onChange:W=>f(W.target.value),className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50",children:w.map(W=>r.jsx("option",{value:W,children:W==="yahoo"?"Yahoo Finance":"Alpha Vantage"},W))})]}),c.length>0&&r.jsx("ul",{className:"flex flex-wrap gap-2",children:c.map(W=>r.jsxs("li",{className:"inline-flex items-center gap-1 rounded-md bg-slate-800 px-2 py-1 text-sm text-slate-200",children:[W,r.jsx("button",{type:"button",onClick:()=>H(W),className:"text-slate-500 hover:text-red-400","aria-label":`Remove ${W}`,children:""})]},W))}),r.jsx("button",{type:"button",onClick:O,disabled:v||m,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:v?"Saving":"Save defaults"}),x&&r.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:x}),y&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:y})]}),l==="members"&&r.jsx("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-6 text-sm text-slate-400",children:r.jsx("p",{className:"mb-2",children:"Financial access is RBAC-based: guests view default symbols (session-only custom symbols); logged-in users can save their watchlist. No custom group required."})})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Financial Admin"}),r.jsx("p",{className:"text-sm text-slate-400",children:"SuperAdmin access is required."})]})};function Fb(e){return typeof window>"u"?e:`${window.location.origin}${e.startsWith("/")?e:`/${e}`}`}const _b=({memeId:e,title:t="",trigger:n,className:s=""})=>{const[a,l]=i.useState(!1),[o,c]=i.useState(!1),d=i.useRef(null),u=Fb(`/memes/${encodeURIComponent(e)}`),f=encodeURIComponent(u),m=encodeURIComponent(t||"Meme"),h=async()=>{try{await navigator.clipboard.writeText(u),c(!0),setTimeout(()=>c(!1),2e3)}catch{}};return i.useEffect(()=>{function v(b){d.current&&!d.current.contains(b.target)&&l(!1)}if(a)return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[a]),r.jsxs("div",{className:`relative inline-block ${s}`,ref:d,children:[r.jsx("button",{type:"button",onClick:()=>l(v=>!v),className:"inline-flex items-center gap-1 text-[11px] text-slate-400 hover:text-slate-200",children:n}),a&&r.jsxs("div",{className:"absolute left-0 top-full z-20 mt-1 min-w-[180px] rounded-lg border border-slate-700 bg-slate-900 p-2 shadow-xl",children:[r.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 mb-2 text-xs font-medium text-slate-500 uppercase",children:[r.jsx(Xc,{className:"h-3.5 w-3.5"}),"Share"]}),r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsxs("button",{type:"button",onClick:h,className:"flex items-center gap-2 rounded px-2 py-1.5 text-left text-sm text-slate-200 hover:bg-slate-800",children:[r.jsx(Zc,{className:"h-4 w-4 text-slate-500"}),"Copy link",o&&r.jsx("span",{className:"text-emerald-400 text-xs",children:""})]}),r.jsx("a",{href:"https://www.instagram.com/",target:"_blank",rel:"noopener noreferrer",title:"Open Instagram",className:"flex items-center gap-2 rounded px-2 py-1.5 text-left text-sm text-slate-200 hover:bg-slate-800",onClick:()=>l(!1),children:"Instagram"}),r.jsx("a",{href:`https://www.facebook.com/sharer/sharer.php?u=${f}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 rounded px-2 py-1.5 text-left text-sm text-slate-200 hover:bg-slate-800",onClick:()=>l(!1),children:"Facebook"}),r.jsx("a",{href:`https://bsky.app/intent/compose?text=${f}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 rounded px-2 py-1.5 text-left text-sm text-slate-200 hover:bg-slate-800",onClick:()=>l(!1),children:"Bluesky"}),r.jsx("a",{href:`https://www.reddit.com/submit?url=${f}&title=${m}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 rounded px-2 py-1.5 text-left text-sm text-slate-200 hover:bg-slate-800",onClick:()=>l(!1),children:"Reddit"})]})]})]})};function Mo(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const zu="memes_my_cache_invalidate",Bb=()=>{const{user:e}=Ae(),[t,n]=qt(),s=(t.get("tab")||"all")==="mine"?"mine":"all",[a,l]=i.useState([]),[o,c]=i.useState(()=>t.get("q")??""),[d,u]=i.useState(()=>{const k=t.get("tagIds");return k?k.split(",").filter(Boolean):[]}),[f,m]=i.useState(()=>t.get("tagMode")==="and"?"and":"or"),[h,v]=i.useState(!1),[b,y]=i.useState(""),[C,x]=i.useState("newest"),[p,g]=i.useState(!1),[j,w]=i.useState(null),E=i.useRef(null),[$,R]=i.useState([]),H=i.useRef(null),[O,q]=i.useState(!1),W=gp(e),se=es(e),J=Jc(e),V=e&&es(e),ie=k=>J||se&&k.userId===(e==null?void 0:e.userId),pe=o.trim().length>0||d.length>0;i.useEffect(()=>{try{const k=sessionStorage.getItem(zu);if(!k)return;sessionStorage.removeItem(zu);const K=JSON.parse(k);if(K.tagOnly&&K.memeId&&K.tags){const ne=(H.current??[]).map(_=>_.PK===K.memeId?{..._,tags:K.tags}:_);if(H.current=ne,s==="mine"){let _=ne;d.length>0&&(_=f==="and"?ne.filter(z=>d.every(U=>(z.tags??[]).includes(U))):ne.filter(z=>d.some(U=>(z.tags??[]).includes(U)))),l(_)}}else q(!0)}catch{}},[]),i.useEffect(()=>{const k=Mo();if(!k)return;let K=!1;return at(`${k}/memes/tags`).then(ne=>ne.ok?ne.json():Promise.reject(new Error("Failed to load tags"))).then(ne=>{K||R((ne.tags??[]).sort((_,z)=>_.localeCompare(z)))}).catch(()=>{}),()=>{K=!0}},[]),i.useEffect(()=>{const k=new URLSearchParams;s==="mine"&&k.set("tab","mine"),pe&&(o.trim()&&k.set("q",o.trim()),d.length&&(k.set("tagIds",d.join(",")),k.set("tagMode",f))),n(k,{replace:!0})},[s,pe,o,d,f,n]),i.useEffect(()=>{const k=Mo();if(!k){w("API URL not set.");return}let K=!1;if(s==="mine"&&V){const _=H.current,z=d.length>0;if(_&&!O&&!o.trim()){q(!1);let U=_;z&&(f==="and"?U=_.filter(M=>d.every(F=>(M.tags??[]).includes(F))):U=_.filter(M=>d.some(F=>(M.tags??[]).includes(F)))),l(U),g(!1);return}}async function ne(){g(!0),w(null);const _=s==="mine"&&V;try{const z=new URLSearchParams;z.set("limit",_?"100":"20"),_&&z.set("mine","1"),o.trim()&&z.set("q",o.trim()),d.length>0&&!_&&(z.set("tagIds",d.join(",")),z.set("tagMode",f));const M=await at(`${k}${e?"/memes":"/memes/cache"}?${z.toString()}`);if(!M.ok){const N=await M.text();throw new Error(`HTTP ${M.status}: ${N}`)}const F=await M.json();if(K)return;const Z=F.memes??[];if(_)if(H.current=Z,q(!1),d.length>0){const N=f==="and"?Z.filter(T=>d.every(G=>(T.tags??[]).includes(G))):Z.filter(T=>d.some(G=>(T.tags??[]).includes(G)));l(N)}else l(Z);else l(Z)}catch(z){K||w((z==null?void 0:z.message)??"Failed to load memes.")}finally{K||g(!1)}}return ne(),()=>{K=!0}},[s,o,d,f,O,V,e]),i.useEffect(()=>{function k(K){E.current&&!E.current.contains(K.target)&&v(!1)}if(h)return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[h]);const S=i.useMemo(()=>$.filter(k=>!d.includes(k)&&(!b.trim()||k.toLowerCase().includes(b.toLowerCase()))),[$,d,b]),P=i.useMemo(()=>{const k=[...a];return k.sort((K,ne)=>{const _=(K.title||K.PK||"").toLowerCase(),z=(ne.title||ne.PK||"").toLowerCase(),U=typeof K.averageRating=="number"?K.averageRating:0,M=typeof ne.averageRating=="number"?ne.averageRating:0,F=K.createdAt||"",Z=ne.createdAt||"";if(C==="newest"){const N=Z.localeCompare(F);return N!==0?N:_.localeCompare(z)}if(C==="oldest"){const N=F.localeCompare(Z);return N!==0?N:_.localeCompare(z)}return C==="avgDesc"?M!==U?M-U:_.localeCompare(z):C==="avgAsc"?U!==M?U-M:_.localeCompare(z):C==="alphaAsc"?_.localeCompare(z):C==="alphaDesc"?z.localeCompare(_):0}),k},[a,C]),I=async(k,K)=>{const ne=Mo();if(ne)try{await at(`${ne}/memes/stars`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({memeId:k,rating:K})}),l(_=>_.map(z=>z.PK===k?{...z,averageRating:K}:z))}catch{}};if(e&&!yl(e))return r.jsxs("div",{className:"space-y-6",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Memes"}),r.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:"You do not have access to Memes. Join the Memes custom group or contact an admin."})]});const B=k=>{const K=new URLSearchParams(t);k==="mine"?K.set("tab","mine"):K.delete("tab"),n(K,{replace:!0})};return i.useEffect(()=>{s==="mine"&&!V&&n(k=>{const K=new URLSearchParams(k);return K.delete("tab"),K},{replace:!0})},[s,V,n]),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("header",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Memes"}),V&&r.jsxs("div",{className:"flex rounded-lg border border-slate-700 bg-slate-900/60 p-0.5",children:[r.jsx("button",{type:"button",onClick:()=>B("all"),className:`rounded-md px-3 py-1 text-sm font-medium transition-colors ${s==="all"?"bg-slate-700 text-slate-50":"text-slate-400 hover:text-slate-200"}`,children:"All"}),r.jsx("button",{type:"button",onClick:()=>B("mine"),className:`rounded-md px-3 py-1 text-sm font-medium transition-colors ${s==="mine"?"bg-slate-700 text-slate-50":"text-slate-400 hover:text-slate-200"}`,children:"My Memes"})]})]}),r.jsx("p",{className:"text-sm text-slate-400",children:s==="mine"?"Your memes, newest first. Filter by tags below.":e?"Browse and rate memes. Latest 20 shown by default.":"The latest user created memes. Sign in to rate or create."})]}),e&&r.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-4","aria-label":"Search and filter",children:[r.jsxs("form",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",onSubmit:k=>{k.preventDefault(),c(o.trim())},children:[r.jsx("input",{type:"text",value:o,onChange:k=>c(k.target.value),placeholder:"Search memes (title, description)",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),r.jsx("button",{type:"submit",className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500",children:"Search"})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-4 sm:gap-6",children:[r.jsxs("div",{ref:E,className:"relative flex-shrink-0 min-w-0 max-w-sm",children:[r.jsx("label",{htmlFor:"meme-tag-filter",className:"block text-xs font-medium text-slate-400 mb-1",children:"Tags (filter by)"}),r.jsx("input",{id:"meme-tag-filter",type:"text",value:b,onChange:k=>y(k.target.value),onFocus:()=>v(!0),placeholder:"Search and select tags",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",autoComplete:"off"}),h&&r.jsx("div",{className:"absolute left-0 top-full z-10 mt-1 w-full max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",role:"listbox",children:S.length>0?S.map(k=>r.jsx("button",{type:"button",role:"option",onClick:()=>{u(K=>K.includes(k)?K:[...K,k]),y("")},className:"block w-full text-left px-3 py-2 text-sm text-slate-200 hover:bg-slate-800",children:k},k)):r.jsx("div",{className:"px-3 py-2 text-xs text-slate-500",children:"No matching tags"})}),d.length>0&&r.jsxs("div",{className:"mt-2 flex flex-wrap gap-1",children:[d.map(k=>r.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-300",children:[k,r.jsx("button",{type:"button",onClick:()=>u(K=>K.filter(ne=>ne!==k)),className:"hover:text-slate-100","aria-label":`Remove ${k}`,children:""})]},k)),r.jsxs("select",{value:f,onChange:k=>m(k.target.value),className:"rounded border border-slate-700 bg-slate-950 px-2 py-0.5 text-[11px] text-slate-400",children:[r.jsx("option",{value:"or",children:"OR"}),r.jsx("option",{value:"and",children:"AND"})]})]})]}),r.jsxs("div",{className:"flex items-end gap-2",children:[r.jsx("label",{className:"text-xs font-medium text-slate-400",children:"Sort"}),r.jsxs("select",{value:C,onChange:k=>x(k.target.value),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",children:[r.jsx("option",{value:"newest",children:"Newest first"}),r.jsx("option",{value:"oldest",children:"Oldest first"}),r.jsx("option",{value:"avgDesc",children:"Avg stars (high first)"}),r.jsx("option",{value:"avgAsc",children:"Avg stars (low first)"}),r.jsx("option",{value:"alphaAsc",children:"Title AZ"}),r.jsx("option",{value:"alphaDesc",children:"Title ZA"})]}),r.jsx("span",{className:"text-slate-500",children:P.length===0?"No memes":`${P.length} memes`})]})]})]}),j&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:j}),p?r.jsx("div",{className:"text-sm text-slate-400",children:"Loading memes"}):r.jsxs(r.Fragment,{children:[r.jsx("ul",{className:"space-y-3 mt-2",children:P.map(k=>{const K=k.thumbnailUrl||k.mediaUrl,ne=k.title||k.PK||"Untitled",_=`/memes/${encodeURIComponent(k.PK)}`;return r.jsxs("li",{className:"flex gap-3 rounded-xl border border-slate-800 bg-slate-950/60 p-3",children:[r.jsx(ce,{to:_,className:"h-16 w-24 flex-shrink-0 overflow-hidden rounded-lg border border-slate-700 bg-slate-900 flex items-center justify-center text-xl hover:border-slate-600",children:K?r.jsx("img",{src:K,alt:"",className:"h-full w-full object-cover",onError:z=>{z.currentTarget.style.visibility="hidden"}}):r.jsx("span",{children:""})}),r.jsxs("div",{className:"min-w-0 flex-1 space-y-1",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsx("h2",{className:"truncate text-sm font-semibold text-slate-50",children:r.jsx(ce,{to:_,className:"hover:text-brand-orange",children:ne})}),k.isPrivate&&r.jsx("span",{className:"inline-flex rounded-full bg-slate-900 px-2 py-0.5 text-[10px] uppercase text-slate-500",children:"Private"}),typeof k.averageRating=="number"&&r.jsxs("span",{className:"inline-flex rounded-full bg-slate-900 px-2 py-0.5 text-[11px] text-amber-300",children:[k.averageRating.toFixed(1),""]})]}),k.description&&r.jsx("p",{className:"text-xs text-slate-300 line-clamp-3",children:k.description}),k.tags&&k.tags.length>0&&r.jsx("div",{className:"flex flex-wrap gap-1 pt-1",children:k.tags.map(z=>r.jsx("span",{className:"rounded-full bg-slate-900 px-2 py-0.5 text-[11px] text-slate-300",children:z},z))}),r.jsxs("div",{className:"pt-1 flex items-center gap-3 flex-wrap",children:[r.jsx(_b,{memeId:k.PK,title:ne,trigger:r.jsxs(r.Fragment,{children:[r.jsx(Xc,{className:"h-3.5 w-3.5"}),"Share"]})}),ie(k)&&r.jsxs(ce,{to:`/memes/${encodeURIComponent(k.PK)}/edit`,className:"inline-flex items-center gap-1 text-[11px] text-slate-400 hover:text-slate-200",children:[r.jsx(la,{className:"h-3.5 w-3.5"}),"Edit"]}),W&&r.jsxs("label",{className:"inline-flex items-center gap-1 text-[11px] text-slate-400",children:[r.jsx("span",{children:"Rate:"}),r.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-1 py-0.5 text-[11px] text-slate-50",onChange:z=>{const U=Number(z.target.value);U>=1&&U<=5&&I(k.PK,U)},defaultValue:"",children:[r.jsx("option",{value:"",children:"--"}),r.jsx("option",{value:"5",children:"5"}),r.jsx("option",{value:"4",children:"4"}),r.jsx("option",{value:"3",children:"3"}),r.jsx("option",{value:"2",children:"2"}),r.jsx("option",{value:"1",children:"1"})]})]})]})]})]},k.PK)})}),P.length===0&&!p&&r.jsx("div",{className:"flex items-center justify-center min-h-[200px]",children:r.jsx("p",{className:"text-lg text-slate-500",children:s==="mine"?pe?"No memes match the selected tags.":"You haven't created any memes yet. Create one!":pe?"No memes found.":"No memes yet. Create one!"})})]})]})},Gp=({tags:e,onTagsChange:t,allTags:n,fetchTags:s,placeholder:a="Type to suggest or create tag, Tab to autocomplete",className:l=""})=>{const[o,c]=i.useState(""),[d,u]=i.useState(!1),[f,m]=i.useState(0),[h,v]=i.useState(null),b=i.useRef(null),y=i.useRef(null),C=i.useRef(null);i.useEffect(()=>{function w(E){C.current&&!C.current.contains(E.target)&&u(!1)}return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),i.useEffect(()=>{if(!s){v(null);return}const w=o.trim();if(w.length===0){v(null);return}b.current&&b.current.abort();const E=new AbortController;b.current=E;const $=setTimeout(()=>{s(w).then(R=>{E.signal.aborted||v(R)}).catch(()=>{E.signal.aborted||v(null)})},80);return()=>{clearTimeout($),E.abort()}},[o,s]);const x=i.useMemo(()=>{const w=o.trim().toLowerCase();return s&&h!==null?h.filter(E=>!e.includes(E)):w?n.filter(E=>!e.includes(E)&&E.toLowerCase().includes(w)):n.filter(E=>!e.includes(E))},[n,e,o,s,h]),p=w=>{const E=w.trim();E&&!e.includes(E)&&t([...e,E]),c(""),m(0)},g=w=>{t(e.filter(E=>E!==w))},j=w=>{if(w.key==="Tab"||w.key==="Enter"){if(w.preventDefault(),x.length>0)p(x[f]??x[0]);else{const E=o.trim();E&&p(E)}return}if(w.key==="ArrowDown"){w.preventDefault(),m(E=>(E+1)%Math.max(1,x.length));return}if(w.key==="ArrowUp"){w.preventDefault(),m(E=>E<=0?Math.max(0,x.length-1):E-1);return}w.key==="Escape"&&(u(!1),m(0))};return r.jsxs("div",{ref:C,className:`relative ${l}`,children:[r.jsx("input",{ref:y,type:"text",value:o,onChange:w=>{c(w.target.value),u(!0),m(0)},onFocus:()=>u(!0),onKeyDown:j,placeholder:a,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",autoComplete:"off"}),d&&(x.length>0||o.trim())&&r.jsx("div",{className:"absolute left-0 top-full z-10 mt-1 w-full max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",role:"listbox",children:x.length>0?x.map((w,E)=>r.jsx("button",{type:"button",role:"option","aria-selected":E===f,onClick:()=>p(w),onMouseEnter:()=>m(E),className:`block w-full text-left px-3 py-2 text-sm text-slate-200 hover:bg-slate-800 ${E===f?"bg-slate-800":""}`,children:w},w)):r.jsxs("button",{type:"button",onClick:()=>o.trim()&&p(o.trim()),className:"block w-full text-left px-3 py-2 text-sm text-slate-200 hover:bg-slate-800",children:['Create "',o.trim(),'"']})}),e.length>0&&r.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:e.map(w=>r.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-300",children:[w,r.jsx("button",{type:"button",onClick:()=>g(w),className:"hover:text-slate-100","aria-label":`Remove ${w}`,children:""})]},w))})]})},Gu=["Impact","Arial Black","Comic Sans MS","Georgia","Verdana","Times New Roman","Courier New"],Do=[{id:"top-left",x:.05,y:.05,align:"left"},{id:"top-center",x:.5,y:.05,align:"center"},{id:"top-right",x:.95,y:.05,align:"right"},{id:"center",x:.5,y:.5,align:"center"},{id:"bottom-left",x:.05,y:.95,align:"left"},{id:"bottom-center",x:.5,y:.95,align:"center"},{id:"bottom-right",x:.95,y:.95,align:"right"}],Aa=500,zb=2048,Gb=10*1024*1024;function bs(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Wb=()=>{const{user:e}=Ae(),t=$t(),n=i.useRef(null),s=i.useRef([]),[a,l]=i.useState(null),[o,c]=i.useState(null),[d,u]=i.useState(""),[f,m]=i.useState([]),[h,v]=i.useState(null),[b,y]=i.useState(""),[C,x]=i.useState(""),[p,g]=i.useState(!1),[j,w]=i.useState("resize"),[E,$]=i.useState(!1),[R,H]=i.useState(null),[O,q]=i.useState(!1),[W,se]=i.useState([]),[J,V]=i.useState([]),ie=_=>{const z=s.current;if(z.some(M=>M.zoneId===_))return;const U=[...z,{zoneId:_,text:"",font:Gu[0],color:"#ffffff",size:32}];s.current=U,m(U),v(_)},pe=_=>{const U=s.current.filter(M=>M.zoneId!==_);s.current=U,m(U),h===_&&v(null)},S=(_,z)=>{const M=s.current.map(F=>F.zoneId===_?{...F,...z}:F);s.current=M,m(M)},P=_=>{if(_.size>Gb){H("File too large (max 10MB)");return}if(!["image/jpeg","image/png","image/gif","image/webp","image/bmp"].includes(_.type)){H("Invalid image type");return}H(null);const U=new FileReader;U.onload=()=>l(U.result),U.readAsDataURL(_),c(_),u("")},I=async()=>{const _=d.trim();if(_){H(null);try{const U=await(await Q(`${bs()}/memes/import-from-url`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:_})})).json();if(!U.presignedUrl){H(U.error||"Failed to load image from URL");return}l(U.presignedUrl),c(null)}catch(z){H((z==null?void 0:z.message)??"Failed to load image from URL")}}},B=async()=>{const _=bs();if(_){q(!0),H(null);try{const U=await(await Q(`${_}/memes/generate-title`,{method:"POST"})).json();U.title&&y(U.title)}catch{y(`Meme ${Date.now().toString(36)}`)}finally{q(!1)}}},k=i.useCallback(()=>{const _=n.current;if(!_||!a)return Promise.resolve();const z=_.getContext("2d");return z?new Promise((U,M)=>{const F=new Image;F.crossOrigin="anonymous",F.onload=()=>{const Z=_.width,N=_.height;z.clearRect(0,0,Z,N);let T=0,G=0,Y=Z,D=N;if(j==="resize")z.drawImage(F,0,0,Z,N);else{const ae=Math.min(Z/F.width,N/F.height);Y=F.width*ae,D=F.height*ae,T=(Z-Y)/2,G=(N-D)/2,z.drawImage(F,T,G,Y,D)}const X=j==="original"?Math.min(Y,D)/Aa:1;s.current.forEach(ae=>{const ue=Do.find(be=>be.id===ae.zoneId);if(!ue||!ae.text)return;z.font=`${Math.round(ae.size*X)}px ${ae.font}`,z.fillStyle=ae.color,z.textAlign=ue.align,z.textBaseline=ue.y<.5?"top":"bottom";const xe=T+ue.x*Y,ye=G+ue.y*D;z.fillText(ae.text,xe,ye)}),U()},F.onerror=()=>{H("Failed to load image"),M(new Error("Failed to load image"))},F.src=a}):Promise.resolve()},[a,f,j]);i.useEffect(()=>{k().catch(()=>{})},[k]),i.useEffect(()=>{const _=bs();if(!_)return;let z=!1;return fetch(`${_}/memes/tags`).then(U=>U.ok?U.json():Promise.reject(new Error("Failed to load tags"))).then(U=>{z||V((U.tags??[]).sort((M,F)=>M.localeCompare(F)))}).catch(()=>{}),()=>{z=!0}},[]);const K=async()=>{if(!a){H("Add an image first");return}const _=bs();if(!_){H("API not configured");return}$(!0),H(null);try{let z;if(j==="original"){const T=await new Promise((xe,ye)=>{const be=new Image;be.crossOrigin="anonymous",be.onload=()=>xe(be),be.onerror=()=>ye(new Error("Failed to load image")),be.src=a}),G=Math.min(1,zb/Math.max(T.width,T.height)),Y=Math.round(T.width*G),D=Math.round(T.height*G),X=document.createElement("canvas");X.width=Y,X.height=D;const ae=X.getContext("2d");ae.drawImage(T,0,0,Y,D);const ue=Math.min(Y,D)/Aa;s.current.forEach(xe=>{const ye=Do.find(be=>be.id===xe.zoneId);!ye||!xe.text||(ae.font=`${Math.round(xe.size*ue)}px ${xe.font}`,ae.fillStyle=xe.color,ae.textAlign=ye.align,ae.textBaseline=ye.y<.5?"top":"bottom",ae.fillText(xe.text,ye.x*Y,ye.y*D))}),z=await new Promise(xe=>{X.toBlob(ye=>xe(ye),"image/png",.95)})}else{const T=n.current;if(!T)throw new Error("Canvas not available");await k(),await new Promise(G=>requestAnimationFrame(G)),z=await new Promise(G=>{T.toBlob(Y=>G(Y),"image/png",.95)})}if(!z)throw new Error("Failed to export canvas");const M=await(await Q(`${_}/memes/upload`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contentType:"image/png"})})).json();if(!M.uploadUrl||!M.key)throw new Error(M.error||"Failed to get upload URL");const F=M.key;await fetch(M.uploadUrl,{method:"PUT",body:z,headers:{"Content-Type":"image/png"}});const Z=await Q(`${_}/memes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mediaKey:F,title:b.trim()||void 0,description:C.trim()||void 0,isPrivate:p,textBoxes:s.current,sizeMode:j,tags:W})});if(!Z.ok){const T=await Z.json();throw new Error(T.error||"Failed to save meme")}const N=await Z.json();try{sessionStorage.setItem("memes_my_cache_invalidate",JSON.stringify({tagOnly:!1}))}catch{}t(N.id?`/memes/${encodeURIComponent(N.id)}`:"/memes")}catch(z){H((z==null?void 0:z.message)??"Failed to save meme")}finally{$(!1)}},ne=es(e)||!!(e!=null&&e.impersonated);return e?ne?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("header",{className:"flex items-center gap-4",children:[r.jsxs(ce,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Memes"]}),r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Meme Generator"})]}),r.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1fr,320px]",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[r.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-2",children:"Image"}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("input",{type:"file",accept:"image/jpeg,image/png,image/gif,image/webp,image/bmp",onChange:_=>{var z;return((z=_.target.files)==null?void 0:z[0])&&P(_.target.files[0])},className:"text-sm text-slate-300 file:mr-2 file:rounded file:border-0 file:bg-brand-orange file:px-3 file:py-1 file:text-slate-950"}),r.jsx("span",{className:"text-xs text-slate-500",children:"or"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"url",value:d,onChange:_=>u(_.target.value),placeholder:"Paste image URL",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500"}),r.jsx("button",{type:"button",onClick:I,className:"rounded-md bg-slate-700 px-3 py-2 text-sm text-slate-200 hover:bg-slate-600",children:"Load"})]})]})]}),a&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("label",{className:"text-xs font-medium text-slate-400",children:"Preview"}),r.jsxs("div",{className:"flex rounded-md border border-slate-700 overflow-hidden",children:[r.jsx("button",{type:"button",onClick:()=>w("resize"),className:`px-3 py-1 text-xs transition-colors ${j==="resize"?"bg-brand-orange text-slate-950 font-medium":"bg-slate-950 text-slate-400 hover:text-slate-200"}`,children:"Resize to fit"}),r.jsx("button",{type:"button",onClick:()=>w("original"),className:`px-3 py-1 text-xs transition-colors ${j==="original"?"bg-brand-orange text-slate-950 font-medium":"bg-slate-950 text-slate-400 hover:text-slate-200"}`,children:"Original"})]})]}),r.jsx("canvas",{ref:n,width:Aa,height:Aa,className:"w-full max-w-[500px] border border-slate-700 rounded-lg bg-slate-900"})]}),r.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[r.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-2",children:"Text boxes (fixed zones)"}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:Do.map(_=>{const z=f.find(U=>U.zoneId===_.id);return r.jsxs("div",{className:"rounded border border-slate-700 p-2",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("span",{className:"text-xs text-slate-400",children:_.id}),z?r.jsx("button",{type:"button",onClick:()=>pe(_.id),className:"text-red-400 hover:text-red-300 text-xs",children:"Remove"}):r.jsx("button",{type:"button",onClick:()=>ie(_.id),className:"text-brand-orange hover:text-orange-400 text-xs",children:"Add"})]}),z&&r.jsxs("div",{className:"space-y-1",children:[r.jsx("input",{type:"text",value:z.text,onChange:U=>S(_.id,{text:U.target.value}),placeholder:"Text",className:"w-full rounded border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-50"}),r.jsx("select",{value:z.font,onChange:U=>S(_.id,{font:U.target.value}),className:"w-full rounded border border-slate-700 bg-slate-950 px-2 py-1 text-[11px] text-slate-300",children:Gu.map(U=>r.jsx("option",{value:U,children:U},U))}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("input",{type:"color",value:z.color,onChange:U=>S(_.id,{color:U.target.value}),className:"h-6 w-8 cursor-pointer rounded border border-slate-700"}),r.jsx("input",{type:"number",value:z.size,onChange:U=>S(_.id,{size:Number(U.target.value)||32}),min:12,max:72,className:"w-14 rounded border border-slate-700 bg-slate-950 px-1 py-0.5 text-[11px] text-slate-50"})]})]})]},_.id)})})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Title (optional)"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:b,onChange:_=>y(_.target.value),placeholder:"Generate or type",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500"}),r.jsx("button",{type:"button",onClick:B,disabled:O,className:"rounded-md bg-brand-orange px-3 py-2 text-sm font-medium text-slate-950 disabled:opacity-50",children:O?"":"Generate"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Description (optional)"}),r.jsx("textarea",{value:C,onChange:_=>x(_.target.value),placeholder:"Optional description",rows:3,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Tags"}),r.jsx(Gp,{tags:W,onTagsChange:se,allTags:J,fetchTags:async _=>{const z=bs();if(!z)return[];const U=await Q(`${z}/memes/tags?q=${encodeURIComponent(_)}`);return U.ok?(await U.json()).tags??[]:[]},placeholder:"Type to suggest or create tag, Tab to autocomplete"})]}),r.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:[r.jsx("input",{type:"checkbox",checked:p,onChange:_=>g(_.target.checked),className:"rounded border-slate-600"}),"Private (only you can see)"]})]}),R&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:R}),r.jsx("button",{type:"button",onClick:K,disabled:!a||E,className:"w-full rounded-md bg-brand-orange px-4 py-3 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50 disabled:cursor-not-allowed",children:E?"Saving":"Save meme"})]})]})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsx("h1",{className:"text-2xl font-semibold text-slate-50",children:"Meme Generator"}),r.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:"Meme creator access required (user + Memes group). Join the Memes custom group or contact an admin."})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsx("h1",{className:"text-2xl font-semibold text-slate-50",children:"Meme Generator"}),r.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:"Sign in to create memes."})]})};function Hb(e){return typeof window>"u"?e:`${window.location.origin}${e.startsWith("/")?e:`/${e}`}`}const Wp=({memeId:e,title:t="",className:n="",mediaUrl:s})=>{const[a,l]=i.useState(!1),[o,c]=i.useState(!1),d=Hb(`/memes/${encodeURIComponent(e)}`),u=encodeURIComponent(d),f=encodeURIComponent(t||"Meme"),v=[{label:"Copy link",icon:a?"":null,onClick:async()=>{try{await navigator.clipboard.writeText(d),l(!0),setTimeout(()=>l(!1),2e3)}catch{}},href:null},...s?[{label:"Copy URL",icon:o?"":null,onClick:async()=>{if(s)try{await navigator.clipboard.writeText(s),c(!0),setTimeout(()=>c(!1),2e3)}catch{}},href:null}]:[],{label:"Instagram",href:"https://www.instagram.com/",title:"Open Instagram (copy link first to share)"},{label:"Facebook",href:`https://www.facebook.com/sharer/sharer.php?u=${u}`},{label:"Bluesky",href:`https://bsky.app/intent/compose?text=${u}`},{label:"Reddit",href:`https://www.reddit.com/submit?url=${u}&title=${f}`}];return r.jsxs("div",{className:`rounded-xl border border-slate-800 bg-slate-950/60 p-4 ${n}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Xc,{className:"h-4 w-4 text-slate-400"}),r.jsx("span",{className:"text-xs font-medium text-slate-400 uppercase",children:"Share"})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:v.map(b=>b.onClick?r.jsxs("button",{type:"button",onClick:b.onClick,className:"inline-flex items-center gap-1.5 rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 hover:bg-slate-800 hover:border-slate-600",children:[b.icon?r.jsx("span",{className:"text-emerald-400",children:b.icon}):r.jsx(Zc,{className:"h-4 w-4 text-slate-400"}),b.label]},b.label):r.jsx("a",{href:b.href,target:"_blank",rel:"noopener noreferrer",title:b.title,className:"inline-flex items-center gap-1.5 rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 hover:bg-slate-800 hover:border-slate-600",children:b.label},b.label))})]})};function Oo(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Kb=()=>{const{id:e}=ls(),{user:t}=Ae(),n=$t(),[s,a]=i.useState(null),[l,o]=i.useState(!0),[c,d]=i.useState(null),[u,f]=i.useState(!1),[m,h]=i.useState(!1),v=!!s&&(Jc(t)||es(t)&&s.userId===(t==null?void 0:t.userId)),b=!!s&&dt(t,"superadmin"),y=e?decodeURIComponent(e):"";i.useEffect(()=>{const j=Oo();if(!j||!y){d(y?"API URL not set.":"Missing meme id."),o(!1);return}let w=!1;async function E(){o(!0),d(null);try{const R=await at(`${j}${t?"/memes":"/memes/cache"}?id=${encodeURIComponent(y)}`);if(R.status===404){w||a(null);return}if(!R.ok){const O=await R.text();throw new Error(`HTTP ${R.status}: ${O}`)}const H=await R.json();if(w)return;a(H.meme??null)}catch($){w||d(($==null?void 0:$.message)??"Failed to load meme.")}finally{w||o(!1)}}return E(),()=>{w=!0}},[y,t]);const C=async j=>{const w=Oo();if(!(!w||!s))try{const E=await at(`${w}/memes/stars`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({memeId:s.PK,rating:j})});if(E.ok){const $=await E.json();a(R=>R?{...R,averageRating:$.averageRating??j}:null)}}catch{}},x=async()=>{const j=Oo();if(!(!j||!s)){f(!0),d(null);try{const w=await at(`${j}/memes`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:s.PK})});if(!w.ok){const E=await w.json();throw new Error(E.error||"Failed to delete meme")}try{sessionStorage.setItem("memes_my_cache_invalidate",JSON.stringify({tagOnly:!1}))}catch{}n("/memes")}catch(w){d((w==null?void 0:w.message)??"Failed to delete meme"),h(!1)}finally{f(!1)}}};if(!t||yl(t),t&&!yl(t))return r.jsxs("div",{className:"space-y-6",children:[r.jsxs(ce,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Memes"]}),r.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:"Sign in and join Memes group to view."})]});if(l)return r.jsxs("div",{className:"space-y-4",children:[r.jsxs(ce,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Memes"]}),r.jsx("div",{className:"text-sm text-slate-400",children:"Loading"})]});if(c||!s)return r.jsxs("div",{className:"space-y-4",children:[r.jsxs(ce,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Memes"]}),r.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:c||"Meme not found."})]});const p=s.title||s.PK||"Untitled",g=s.mediaUrl||s.thumbnailUrl;return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("header",{className:"flex items-center justify-between gap-4",children:[r.jsxs(ce,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Memes"]}),r.jsxs("div",{className:"flex items-center gap-3",children:[v&&r.jsxs(ce,{to:`/memes/${encodeURIComponent(s.PK)}/edit`,className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(la,{className:"h-4 w-4"}),"Edit"]}),b&&!m&&r.jsxs("button",{type:"button",onClick:()=>h(!0),className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-red-400",children:[r.jsx(Yg,{className:"h-4 w-4"}),"Delete"]}),b&&m&&r.jsxs("span",{className:"inline-flex items-center gap-2 text-sm",children:[r.jsx("span",{className:"text-red-400",children:"Delete this meme?"}),r.jsx("button",{type:"button",onClick:x,disabled:u,className:"rounded-md bg-red-600 px-2.5 py-1 text-xs font-semibold text-white hover:bg-red-500 disabled:opacity-50",children:u?"Deleting":"Confirm"}),r.jsx("button",{type:"button",onClick:()=>h(!1),disabled:u,className:"text-xs text-slate-500 hover:text-slate-300",children:"Cancel"})]})]})]}),r.jsx("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 overflow-hidden min-h-[200px] flex items-center justify-center p-4",children:g?r.jsxs(r.Fragment,{children:[r.jsx("img",{src:g,alt:p,className:"w-full max-w-2xl mx-auto block object-contain max-h-[70vh]",onError:j=>{j.currentTarget.style.display="none";const w=j.currentTarget.nextElementSibling;w&&w.classList.remove("hidden")}}),r.jsx("div",{className:"hidden py-12 text-slate-500","aria-hidden":!0,children:"Image failed to load"})]}):r.jsx("div",{className:"py-12 text-slate-500",children:"No image"})}),r.jsx(Wp,{memeId:s.PK,title:p,mediaUrl:dt(t,"manager")?g:void 0}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h1",{className:"text-xl font-semibold text-slate-50",children:p}),s.isPrivate&&r.jsx("span",{className:"inline-flex rounded-full bg-slate-900 px-2 py-0.5 text-xs uppercase text-slate-500",children:"Private"}),s.description&&r.jsx("p",{className:"text-sm text-slate-300",children:s.description}),r.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[r.jsx("span",{className:"text-xs text-slate-500",children:"Tags:"}),s.tags&&s.tags.length>0?s.tags.map(j=>r.jsx("span",{className:"rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-300",children:j},j)):r.jsx("span",{className:"text-xs text-slate-500",children:""})]}),t&&gp(t)&&r.jsx("div",{className:"pt-2",children:r.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-400",children:[r.jsx("span",{children:"Rate:"}),r.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-2 py-1 text-sm text-slate-50",onChange:j=>{const w=Number(j.target.value);w>=1&&w<=5&&C(w)},defaultValue:"",children:[r.jsx("option",{value:"",children:"--"}),r.jsx("option",{value:"5",children:"5"}),r.jsx("option",{value:"4",children:"4"}),r.jsx("option",{value:"3",children:"3"}),r.jsx("option",{value:"2",children:"2"}),r.jsx("option",{value:"1",children:"1"})]}),typeof s.averageRating=="number"&&r.jsxs("span",{className:"text-amber-300",children:[s.averageRating.toFixed(1),""]})]})})]})]})};function Fo(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Vb=()=>{const{id:e}=ls(),t=$t(),{user:n}=Ae(),[s,a]=i.useState(null),[l,o]=i.useState([]),[c,d]=i.useState(!1),[u,f]=i.useState(!0),[m,h]=i.useState(!1),[v,b]=i.useState(null),[y,C]=i.useState([]),x=e?decodeURIComponent(e):"",p=!!(n&&(es(n)||Jc(n)));i.useEffect(()=>{const $=Fo();if(!$||!x){b(x?"API URL not set.":"Missing meme id."),f(!1);return}let R=!1;async function H(){var O,q;f(!0),b(null);try{const[W,se]=await Promise.all([Q(`${$}/memes?id=${encodeURIComponent(x)}`),Q(`${$}/memes/tags`)]);if(W.status===404||!W.ok){R||a(null);return}const J=await W.json(),V=await se.json();if(R)return;a(J.meme??null),o(((O=J.meme)==null?void 0:O.tags)??[]),d(((q=J.meme)==null?void 0:q.isPrivate)??!1),C((V.tags??[]).sort((ie,pe)=>ie.localeCompare(pe)))}catch(W){R||b((W==null?void 0:W.message)??"Failed to load meme.")}finally{R||f(!1)}}return H(),()=>{R=!0}},[x]);const g=i.useRef(null);i.useEffect(()=>{s&&g.current===null&&(g.current=s.isPrivate??!1)},[s]);const j=async()=>{const $=Fo();if(!(!$||!s)){h(!0),b(null);try{const R=await Q(`${$}/memes`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:s.PK,tags:l,isPrivate:c})});if(!R.ok){const O=await R.json();throw new Error(O.error||"Failed to save")}const H=g.current===(c??!1);try{sessionStorage.setItem("memes_my_cache_invalidate",JSON.stringify({memeId:s.PK,tagOnly:H,tags:l}))}catch{}t(`/memes/${encodeURIComponent(s.PK)}`)}catch(R){b((R==null?void 0:R.message)??"Failed to save")}finally{h(!1)}}};if(!n||!p)return r.jsxs("div",{className:"space-y-6",children:[r.jsxs(ce,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Memes"]}),r.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:"Sign in and join Memes group to edit."})]});if(u)return r.jsxs("div",{className:"space-y-4",children:[r.jsxs(ce,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Memes"]}),r.jsx("div",{className:"text-sm text-slate-400",children:"Loading"})]});if(v||!s)return r.jsxs("div",{className:"space-y-4",children:[r.jsxs(ce,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Memes"]}),r.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:v||"Meme not found."})]});const w=s.mediaUrl||s.thumbnailUrl,E=s.title||s.PK||"Untitled";return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("header",{className:"flex items-center gap-4",children:[r.jsxs(ce,{to:`/memes/${encodeURIComponent(s.PK)}`,className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Meme"]}),r.jsx("h1",{className:"text-xl font-semibold text-slate-50",children:"Edit meme"})]}),r.jsx("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 overflow-hidden min-h-[200px] flex items-center justify-center p-4",children:w?r.jsxs(r.Fragment,{children:[r.jsx("img",{src:w,alt:E,className:"w-full max-w-2xl mx-auto block object-contain max-h-[70vh]",onError:$=>{$.currentTarget.style.display="none";const R=$.currentTarget.nextElementSibling;R&&R.classList.remove("hidden")}}),r.jsx("div",{className:"hidden py-12 text-slate-500","aria-hidden":!0,children:"Image failed to load"})]}):r.jsx("div",{className:"py-12 text-slate-500",children:"No image"})}),r.jsx(Wp,{memeId:s.PK,title:E}),r.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-4 max-w-xl",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Tags"}),r.jsx(Gp,{tags:l,onTagsChange:o,allTags:y,fetchTags:async $=>{const R=Fo();if(!R)return[];const H=await Q(`${R}/memes/tags?q=${encodeURIComponent($)}`);return H.ok?(await H.json()).tags??[]:[]},placeholder:"Type to suggest or create tag, Tab to autocomplete"})]}),r.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:[r.jsx("input",{type:"checkbox",checked:c,onChange:$=>d($.target.checked),className:"rounded border-slate-600"}),"Private (only you can see)"]}),v&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:v}),r.jsx("button",{type:"button",onClick:j,disabled:m,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:m?"Saving":"Save"})]})]})},qb=()=>{const{user:e}=Ae(),{siteName:t}=Yc();return Ie.useEffect(()=>{t&&(document.title=t)},[t]),r.jsxs("div",{className:"min-h-screen bg-slate-950 text-slate-50 flex flex-col",children:[r.jsx(Wv,{}),r.jsx("main",{className:"flex-1 min-w-0",children:r.jsx("div",{className:"container-max py-6",children:r.jsxs(ig,{children:[r.jsx($e,{path:"/",element:r.jsx(Vv,{})}),r.jsx($e,{path:"/websites",element:r.jsx(qv,{})}),r.jsx($e,{path:"/websites/:id",element:r.jsx(Jv,{})}),r.jsx($e,{path:"/media",element:r.jsx(Yv,{})}),r.jsx($e,{path:"/media/:id",element:r.jsx(Qv,{})}),r.jsx($e,{path:"/internet-dashboard",element:r.jsx(nb,{})}),r.jsx($e,{path:"/recommended/highlights",element:r.jsx(sb,{})}),r.jsx($e,{path:"/recommended/highest-rated",element:r.jsx(ob,{})}),r.jsx($e,{path:"/squash",element:r.jsx(Ub,{})}),r.jsx($e,{path:"/squash-admin",element:r.jsx(Mb,{})}),r.jsx($e,{path:"/memes",element:r.jsx(Bb,{})}),r.jsx($e,{path:"/memes/create",element:r.jsx(Wb,{})}),r.jsx($e,{path:"/memes/:id/edit",element:r.jsx(Vb,{})}),r.jsx($e,{path:"/memes/:id",element:r.jsx(Kb,{})}),r.jsx($e,{path:"/financial",element:r.jsx(Db,{})}),r.jsx($e,{path:"/admin/financial",element:r.jsx(Ob,{})}),r.jsx($e,{path:"/admin/branding",element:r.jsx(ub,{})}),r.jsx($e,{path:"/admin/internet-dashboard",element:r.jsx(mb,{})}),r.jsx($e,{path:"/admin/recommended",element:r.jsx(fb,{})}),r.jsx($e,{path:"/admin/membership",element:r.jsx(hb,{})}),r.jsx($e,{path:"/admin/users/edit",element:r.jsx(Cb,{})}),r.jsx($e,{path:"/admin/websites",element:r.jsx(yb,{})}),r.jsx($e,{path:"/admin/sites/edit/:id",element:r.jsx(jb,{})}),r.jsx($e,{path:"/admin/media",element:r.jsx(bb,{})}),r.jsx($e,{path:"/admin/media/edit/:id",element:r.jsx(Nb,{})}),r.jsx($e,{path:"/admin",element:r.jsx(ib,{})}),r.jsx($e,{path:"/admin/*",element:r.jsx(lg,{to:"/admin",replace:!0})}),r.jsx($e,{path:"/profile",element:r.jsx($b,{})}),r.jsx($e,{path:"/auth",element:r.jsx(Eb,{})}),r.jsx($e,{path:"*",element:r.jsx("div",{children:"Not found"})})]})})}),r.jsx("footer",{className:"border-t border-slate-800 bg-slate-950",children:r.jsxs("div",{className:"container-max py-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[r.jsxs("div",{children:[r.jsx(ce,{to:"/",className:"text-lg font-display font-bold text-gradient",children:t}),r.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Shared internet intelligence. All data public, admin-managed curation."})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-400 uppercase tracking-wider mb-3",children:"Navigate"}),r.jsxs("nav",{className:"flex flex-wrap gap-x-4 gap-y-1 text-sm text-slate-500",children:[r.jsx(ce,{to:"/",className:"hover:text-slate-300 transition-colors",children:"Home"}),r.jsx(ce,{to:"/websites",className:"hover:text-slate-300 transition-colors",children:"Websites"}),r.jsx(ce,{to:"/media",className:"hover:text-slate-300 transition-colors",children:"Media"}),e&&r.jsx(ce,{to:"/profile",className:"hover:text-slate-300 transition-colors",children:"Profile"})]})]})]}),r.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-800 text-center text-xs text-slate-600",children:[" ",new Date().getFullYear()," ",t,". All data public."]})]})})]})},Wu=document.getElementById("root");Wu&&_o.createRoot(Wu).render(r.jsx(Ie.StrictMode,{children:r.jsx(gg,{children:r.jsx(Ng,{children:r.jsx(kg,{children:r.jsx(Tg,{children:r.jsx(qb,{})})})})})}));

function Kp(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const l=Object.getOwnPropertyDescriptor(r,a);l&&Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function Vp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Gu={exports:{}},Sl={},Wu={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ra=Symbol.for("react.element"),qp=Symbol.for("react.portal"),Jp=Symbol.for("react.fragment"),Qp=Symbol.for("react.strict_mode"),Yp=Symbol.for("react.profiler"),Zp=Symbol.for("react.provider"),Xp=Symbol.for("react.context"),e0=Symbol.for("react.forward_ref"),t0=Symbol.for("react.suspense"),n0=Symbol.for("react.memo"),s0=Symbol.for("react.lazy"),nd=Symbol.iterator;function r0(e){return e===null||typeof e!="object"?null:(e=nd&&e[nd]||e["@@iterator"],typeof e=="function"?e:null)}var Hu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ku=Object.assign,Vu={};function sr(e,t,n){this.props=e,this.context=t,this.refs=Vu,this.updater=n||Hu}sr.prototype.isReactComponent={};sr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};sr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function qu(){}qu.prototype=sr.prototype;function Xi(e,t,n){this.props=e,this.context=t,this.refs=Vu,this.updater=n||Hu}var ec=Xi.prototype=new qu;ec.constructor=Xi;Ku(ec,sr.prototype);ec.isPureReactComponent=!0;var sd=Array.isArray,Ju=Object.prototype.hasOwnProperty,tc={current:null},Qu={key:!0,ref:!0,__self:!0,__source:!0};function Yu(e,t,n){var r,a={},l=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(l=""+t.key),t)Ju.call(t,r)&&!Qu.hasOwnProperty(r)&&(a[r]=t[r]);var c=arguments.length-2;if(c===1)a.children=n;else if(1<c){for(var d=Array(c),u=0;u<c;u++)d[u]=arguments[u+2];a.children=d}if(e&&e.defaultProps)for(r in c=e.defaultProps,c)a[r]===void 0&&(a[r]=c[r]);return{$$typeof:ra,type:e,key:l,ref:o,props:a,_owner:tc.current}}function a0(e,t){return{$$typeof:ra,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function nc(e){return typeof e=="object"&&e!==null&&e.$$typeof===ra}function l0(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var rd=/\/+/g;function Zl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?l0(""+e.key):t.toString(36)}function Da(e,t,n,r,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case ra:case qp:o=!0}}if(o)return o=e,a=a(o),e=r===""?"."+Zl(o,0):r,sd(a)?(n="",e!=null&&(n=e.replace(rd,"$&/")+"/"),Da(a,t,n,"",function(u){return u})):a!=null&&(nc(a)&&(a=a0(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(rd,"$&/")+"/")+e)),t.push(a)),1;if(o=0,r=r===""?".":r+":",sd(e))for(var c=0;c<e.length;c++){l=e[c];var d=r+Zl(l,c);o+=Da(l,t,n,d,a)}else if(d=r0(e),typeof d=="function")for(e=d.call(e),c=0;!(l=e.next()).done;)l=l.value,d=r+Zl(l,c++),o+=Da(l,t,n,d,a);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function fa(e,t,n){if(e==null)return e;var r=[],a=0;return Da(e,r,"","",function(l){return t.call(n,l,a++)}),r}function o0(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var kt={current:null},Oa={transition:null},i0={ReactCurrentDispatcher:kt,ReactCurrentBatchConfig:Oa,ReactCurrentOwner:tc};function Zu(){throw Error("act(...) is not supported in production builds of React.")}Ce.Children={map:fa,forEach:function(e,t,n){fa(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return fa(e,function(){t++}),t},toArray:function(e){return fa(e,function(t){return t})||[]},only:function(e){if(!nc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ce.Component=sr;Ce.Fragment=Jp;Ce.Profiler=Yp;Ce.PureComponent=Xi;Ce.StrictMode=Qp;Ce.Suspense=t0;Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=i0;Ce.act=Zu;Ce.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Ku({},e.props),a=e.key,l=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,o=tc.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(d in t)Ju.call(t,d)&&!Qu.hasOwnProperty(d)&&(r[d]=t[d]===void 0&&c!==void 0?c[d]:t[d])}var d=arguments.length-2;if(d===1)r.children=n;else if(1<d){c=Array(d);for(var u=0;u<d;u++)c[u]=arguments[u+2];r.children=c}return{$$typeof:ra,type:e.type,key:a,ref:l,props:r,_owner:o}};Ce.createContext=function(e){return e={$$typeof:Xp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Zp,_context:e},e.Consumer=e};Ce.createElement=Yu;Ce.createFactory=function(e){var t=Yu.bind(null,e);return t.type=e,t};Ce.createRef=function(){return{current:null}};Ce.forwardRef=function(e){return{$$typeof:e0,render:e}};Ce.isValidElement=nc;Ce.lazy=function(e){return{$$typeof:s0,_payload:{_status:-1,_result:e},_init:o0}};Ce.memo=function(e,t){return{$$typeof:n0,type:e,compare:t===void 0?null:t}};Ce.startTransition=function(e){var t=Oa.transition;Oa.transition={};try{e()}finally{Oa.transition=t}};Ce.unstable_act=Zu;Ce.useCallback=function(e,t){return kt.current.useCallback(e,t)};Ce.useContext=function(e){return kt.current.useContext(e)};Ce.useDebugValue=function(){};Ce.useDeferredValue=function(e){return kt.current.useDeferredValue(e)};Ce.useEffect=function(e,t){return kt.current.useEffect(e,t)};Ce.useId=function(){return kt.current.useId()};Ce.useImperativeHandle=function(e,t,n){return kt.current.useImperativeHandle(e,t,n)};Ce.useInsertionEffect=function(e,t){return kt.current.useInsertionEffect(e,t)};Ce.useLayoutEffect=function(e,t){return kt.current.useLayoutEffect(e,t)};Ce.useMemo=function(e,t){return kt.current.useMemo(e,t)};Ce.useReducer=function(e,t,n){return kt.current.useReducer(e,t,n)};Ce.useRef=function(e){return kt.current.useRef(e)};Ce.useState=function(e){return kt.current.useState(e)};Ce.useSyncExternalStore=function(e,t,n){return kt.current.useSyncExternalStore(e,t,n)};Ce.useTransition=function(){return kt.current.useTransition()};Ce.version="18.3.1";Wu.exports=Ce;var i=Wu.exports;const Re=Vp(i),Vs=Kp({__proto__:null,default:Re},[i]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c0=i,d0=Symbol.for("react.element"),u0=Symbol.for("react.fragment"),m0=Object.prototype.hasOwnProperty,f0=c0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p0={key:!0,ref:!0,__self:!0,__source:!0};function Xu(e,t,n){var r,a={},l=null,o=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)m0.call(t,r)&&!p0.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:d0,type:e,key:l,ref:o,props:a,_owner:f0.current}}Sl.Fragment=u0;Sl.jsx=Xu;Sl.jsxs=Xu;Gu.exports=Sl;var s=Gu.exports,Ho={},em={exports:{}},Ot={},tm={exports:{}},nm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(S,P){var I=S.length;S.push(P);e:for(;0<I;){var B=I-1>>>1,k=S[B];if(0<a(k,P))S[B]=P,S[I]=k,I=B;else break e}}function n(S){return S.length===0?null:S[0]}function r(S){if(S.length===0)return null;var P=S[0],I=S.pop();if(I!==P){S[0]=I;e:for(var B=0,k=S.length,K=k>>>1;B<K;){var ne=2*(B+1)-1,_=S[ne],z=ne+1,U=S[z];if(0>a(_,I))z<k&&0>a(U,_)?(S[B]=U,S[z]=I,B=z):(S[B]=_,S[ne]=I,B=ne);else if(z<k&&0>a(U,I))S[B]=U,S[z]=I,B=z;else break e}}return P}function a(S,P){var I=S.sortIndex-P.sortIndex;return I!==0?I:S.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var o=Date,c=o.now();e.unstable_now=function(){return o.now()-c}}var d=[],u=[],f=1,m=null,x=3,b=!1,w=!1,y=!1,C=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(S){for(var P=n(u);P!==null;){if(P.callback===null)r(u);else if(P.startTime<=S)r(u),P.sortIndex=P.expirationTime,t(d,P);else break;P=n(u)}}function v(S){if(y=!1,g(S),!w)if(n(d)!==null)w=!0,ce(j);else{var P=n(u);P!==null&&pe(v,P.startTime-S)}}function j(S,P){w=!1,y&&(y=!1,h(R),R=-1),b=!0;var I=x;try{for(g(P),m=n(d);m!==null&&(!(m.expirationTime>P)||S&&!q());){var B=m.callback;if(typeof B=="function"){m.callback=null,x=m.priorityLevel;var k=B(m.expirationTime<=P);P=e.unstable_now(),typeof k=="function"?m.callback=k:m===n(d)&&r(d),g(P)}else r(d);m=n(d)}if(m!==null)var K=!0;else{var ne=n(u);ne!==null&&pe(v,ne.startTime-P),K=!1}return K}finally{m=null,x=I,b=!1}}var E=!1,$=null,R=-1,H=5,O=-1;function q(){return!(e.unstable_now()-O<H)}function W(){if($!==null){var S=e.unstable_now();O=S;var P=!0;try{P=$(!0,S)}finally{P?re():(E=!1,$=null)}}else E=!1}var re;if(typeof p=="function")re=function(){p(W)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,V=J.port2;J.port1.onmessage=W,re=function(){V.postMessage(null)}}else re=function(){C(W,0)};function ce(S){$=S,E||(E=!0,re())}function pe(S,P){R=C(function(){S(e.unstable_now())},P)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(S){S.callback=null},e.unstable_continueExecution=function(){w||b||(w=!0,ce(j))},e.unstable_forceFrameRate=function(S){0>S||125<S?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<S?Math.floor(1e3/S):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(S){switch(x){case 1:case 2:case 3:var P=3;break;default:P=x}var I=x;x=P;try{return S()}finally{x=I}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(S,P){switch(S){case 1:case 2:case 3:case 4:case 5:break;default:S=3}var I=x;x=S;try{return P()}finally{x=I}},e.unstable_scheduleCallback=function(S,P,I){var B=e.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?B+I:B):I=B,S){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=I+k,S={id:f++,callback:P,priorityLevel:S,startTime:I,expirationTime:k,sortIndex:-1},I>B?(S.sortIndex=I,t(u,S),n(d)===null&&S===n(u)&&(y?(h(R),R=-1):y=!0,pe(v,I-B))):(S.sortIndex=k,t(d,S),w||b||(w=!0,ce(j))),S},e.unstable_shouldYield=q,e.unstable_wrapCallback=function(S){var P=x;return function(){var I=x;x=P;try{return S.apply(this,arguments)}finally{x=I}}}})(nm);tm.exports=nm;var h0=tm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x0=i,Dt=h0;function se(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sm=new Set,Or={};function Ss(e,t){qs(e,t),qs(e+"Capture",t)}function qs(e,t){for(Or[e]=t,e=0;e<t.length;e++)sm.add(t[e])}var En=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ko=Object.prototype.hasOwnProperty,g0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ad={},ld={};function y0(e){return Ko.call(ld,e)?!0:Ko.call(ad,e)?!1:g0.test(e)?ld[e]=!0:(ad[e]=!0,!1)}function v0(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function b0(e,t,n,r){if(t===null||typeof t>"u"||v0(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ct(e,t,n,r,a,l,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=o}var xt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){xt[e]=new Ct(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];xt[t]=new Ct(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){xt[e]=new Ct(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){xt[e]=new Ct(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){xt[e]=new Ct(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){xt[e]=new Ct(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){xt[e]=new Ct(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){xt[e]=new Ct(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){xt[e]=new Ct(e,5,!1,e.toLowerCase(),null,!1,!1)});var sc=/[\-:]([a-z])/g;function rc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(sc,rc);xt[t]=new Ct(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(sc,rc);xt[t]=new Ct(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(sc,rc);xt[t]=new Ct(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){xt[e]=new Ct(e,1,!1,e.toLowerCase(),null,!1,!1)});xt.xlinkHref=new Ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){xt[e]=new Ct(e,1,!1,e.toLowerCase(),null,!0,!0)});function ac(e,t,n,r){var a=xt.hasOwnProperty(t)?xt[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(b0(t,n,a,r)&&(n=null),r||a===null?y0(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var An=x0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pa=Symbol.for("react.element"),Ts=Symbol.for("react.portal"),Rs=Symbol.for("react.fragment"),lc=Symbol.for("react.strict_mode"),Vo=Symbol.for("react.profiler"),rm=Symbol.for("react.provider"),am=Symbol.for("react.context"),oc=Symbol.for("react.forward_ref"),qo=Symbol.for("react.suspense"),Jo=Symbol.for("react.suspense_list"),ic=Symbol.for("react.memo"),Un=Symbol.for("react.lazy"),lm=Symbol.for("react.offscreen"),od=Symbol.iterator;function ur(e){return e===null||typeof e!="object"?null:(e=od&&e[od]||e["@@iterator"],typeof e=="function"?e:null)}var Ze=Object.assign,Xl;function Nr(e){if(Xl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Xl=t&&t[1]||""}return`
`+Xl+e}var eo=!1;function to(e,t){if(!e||eo)return"";eo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),l=r.stack.split(`
`),o=a.length-1,c=l.length-1;1<=o&&0<=c&&a[o]!==l[c];)c--;for(;1<=o&&0<=c;o--,c--)if(a[o]!==l[c]){if(o!==1||c!==1)do if(o--,c--,0>c||a[o]!==l[c]){var d=`
`+a[o].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=o&&0<=c);break}}}finally{eo=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Nr(e):""}function w0(e){switch(e.tag){case 5:return Nr(e.type);case 16:return Nr("Lazy");case 13:return Nr("Suspense");case 19:return Nr("SuspenseList");case 0:case 2:case 15:return e=to(e.type,!1),e;case 11:return e=to(e.type.render,!1),e;case 1:return e=to(e.type,!0),e;default:return""}}function Qo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Rs:return"Fragment";case Ts:return"Portal";case Vo:return"Profiler";case lc:return"StrictMode";case qo:return"Suspense";case Jo:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case am:return(e.displayName||"Context")+".Consumer";case rm:return(e._context.displayName||"Context")+".Provider";case oc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ic:return t=e.displayName||null,t!==null?t:Qo(e.type)||"Memo";case Un:t=e._payload,e=e._init;try{return Qo(e(t))}catch{}}return null}function j0(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qo(t);case 8:return t===lc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Zn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function om(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function N0(e){var t=om(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,l.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ha(e){e._valueTracker||(e._valueTracker=N0(e))}function im(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=om(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Qa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Yo(e,t){var n=t.checked;return Ze({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function id(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Zn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function cm(e,t){t=t.checked,t!=null&&ac(e,"checked",t,!1)}function Zo(e,t){cm(e,t);var n=Zn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Xo(e,t.type,n):t.hasOwnProperty("defaultValue")&&Xo(e,t.type,Zn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function cd(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Xo(e,t,n){(t!=="number"||Qa(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Sr=Array.isArray;function Bs(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Zn(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function ei(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(se(91));return Ze({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function dd(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(se(92));if(Sr(n)){if(1<n.length)throw Error(se(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Zn(n)}}function dm(e,t){var n=Zn(t.value),r=Zn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function ud(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function um(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ti(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?um(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var xa,mm=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(xa=xa||document.createElement("div"),xa.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=xa.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Fr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Tr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},S0=["Webkit","ms","Moz","O"];Object.keys(Tr).forEach(function(e){S0.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Tr[t]=Tr[e]})});function fm(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Tr.hasOwnProperty(e)&&Tr[e]?(""+t).trim():t+"px"}function pm(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=fm(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var k0=Ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ni(e,t){if(t){if(k0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(se(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(se(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(se(61))}if(t.style!=null&&typeof t.style!="object")throw Error(se(62))}}function si(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ri=null;function cc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ai=null,zs=null,Gs=null;function md(e){if(e=oa(e)){if(typeof ai!="function")throw Error(se(280));var t=e.stateNode;t&&(t=Tl(t),ai(e.stateNode,e.type,t))}}function hm(e){zs?Gs?Gs.push(e):Gs=[e]:zs=e}function xm(){if(zs){var e=zs,t=Gs;if(Gs=zs=null,md(e),t)for(e=0;e<t.length;e++)md(t[e])}}function gm(e,t){return e(t)}function ym(){}var no=!1;function vm(e,t,n){if(no)return e(t,n);no=!0;try{return gm(e,t,n)}finally{no=!1,(zs!==null||Gs!==null)&&(ym(),xm())}}function _r(e,t){var n=e.stateNode;if(n===null)return null;var r=Tl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(se(231,t,typeof n));return n}var li=!1;if(En)try{var mr={};Object.defineProperty(mr,"passive",{get:function(){li=!0}}),window.addEventListener("test",mr,mr),window.removeEventListener("test",mr,mr)}catch{li=!1}function C0(e,t,n,r,a,l,o,c,d){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(f){this.onError(f)}}var Rr=!1,Ya=null,Za=!1,oi=null,E0={onError:function(e){Rr=!0,Ya=e}};function P0(e,t,n,r,a,l,o,c,d){Rr=!1,Ya=null,C0.apply(E0,arguments)}function T0(e,t,n,r,a,l,o,c,d){if(P0.apply(this,arguments),Rr){if(Rr){var u=Ya;Rr=!1,Ya=null}else throw Error(se(198));Za||(Za=!0,oi=u)}}function ks(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function bm(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function fd(e){if(ks(e)!==e)throw Error(se(188))}function R0(e){var t=e.alternate;if(!t){if(t=ks(e),t===null)throw Error(se(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var l=a.alternate;if(l===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===n)return fd(a),e;if(l===r)return fd(a),t;l=l.sibling}throw Error(se(188))}if(n.return!==r.return)n=a,r=l;else{for(var o=!1,c=a.child;c;){if(c===n){o=!0,n=a,r=l;break}if(c===r){o=!0,r=a,n=l;break}c=c.sibling}if(!o){for(c=l.child;c;){if(c===n){o=!0,n=l,r=a;break}if(c===r){o=!0,r=l,n=a;break}c=c.sibling}if(!o)throw Error(se(189))}}if(n.alternate!==r)throw Error(se(190))}if(n.tag!==3)throw Error(se(188));return n.stateNode.current===n?e:t}function wm(e){return e=R0(e),e!==null?jm(e):null}function jm(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=jm(e);if(t!==null)return t;e=e.sibling}return null}var Nm=Dt.unstable_scheduleCallback,pd=Dt.unstable_cancelCallback,L0=Dt.unstable_shouldYield,A0=Dt.unstable_requestPaint,st=Dt.unstable_now,$0=Dt.unstable_getCurrentPriorityLevel,dc=Dt.unstable_ImmediatePriority,Sm=Dt.unstable_UserBlockingPriority,Xa=Dt.unstable_NormalPriority,I0=Dt.unstable_LowPriority,km=Dt.unstable_IdlePriority,kl=null,mn=null;function U0(e){if(mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(kl,e,void 0,(e.current.flags&128)===128)}catch{}}var sn=Math.clz32?Math.clz32:O0,M0=Math.log,D0=Math.LN2;function O0(e){return e>>>=0,e===0?32:31-(M0(e)/D0|0)|0}var ga=64,ya=4194304;function kr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function el(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,l=e.pingedLanes,o=n&268435455;if(o!==0){var c=o&~a;c!==0?r=kr(c):(l&=o,l!==0&&(r=kr(l)))}else o=n&~a,o!==0?r=kr(o):l!==0&&(r=kr(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,l=t&-t,a>=l||a===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-sn(t),a=1<<n,r|=e[n],t&=~a;return r}function F0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _0(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var o=31-sn(l),c=1<<o,d=a[o];d===-1?(!(c&n)||c&r)&&(a[o]=F0(c,t)):d<=t&&(e.expiredLanes|=c),l&=~c}}function ii(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Cm(){var e=ga;return ga<<=1,!(ga&4194240)&&(ga=64),e}function so(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function aa(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-sn(t),e[t]=n}function B0(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-sn(n),l=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~l}}function uc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-sn(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var ze=0;function Em(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Pm,mc,Tm,Rm,Lm,ci=!1,va=[],Gn=null,Wn=null,Hn=null,Br=new Map,zr=new Map,Dn=[],z0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hd(e,t){switch(e){case"focusin":case"focusout":Gn=null;break;case"dragenter":case"dragleave":Wn=null;break;case"mouseover":case"mouseout":Hn=null;break;case"pointerover":case"pointerout":Br.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":zr.delete(t.pointerId)}}function fr(e,t,n,r,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[a]},t!==null&&(t=oa(t),t!==null&&mc(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function G0(e,t,n,r,a){switch(t){case"focusin":return Gn=fr(Gn,e,t,n,r,a),!0;case"dragenter":return Wn=fr(Wn,e,t,n,r,a),!0;case"mouseover":return Hn=fr(Hn,e,t,n,r,a),!0;case"pointerover":var l=a.pointerId;return Br.set(l,fr(Br.get(l)||null,e,t,n,r,a)),!0;case"gotpointercapture":return l=a.pointerId,zr.set(l,fr(zr.get(l)||null,e,t,n,r,a)),!0}return!1}function Am(e){var t=us(e.target);if(t!==null){var n=ks(t);if(n!==null){if(t=n.tag,t===13){if(t=bm(n),t!==null){e.blockedOn=t,Lm(e.priority,function(){Tm(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Fa(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=di(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ri=r,n.target.dispatchEvent(r),ri=null}else return t=oa(n),t!==null&&mc(t),e.blockedOn=n,!1;t.shift()}return!0}function xd(e,t,n){Fa(e)&&n.delete(t)}function W0(){ci=!1,Gn!==null&&Fa(Gn)&&(Gn=null),Wn!==null&&Fa(Wn)&&(Wn=null),Hn!==null&&Fa(Hn)&&(Hn=null),Br.forEach(xd),zr.forEach(xd)}function pr(e,t){e.blockedOn===t&&(e.blockedOn=null,ci||(ci=!0,Dt.unstable_scheduleCallback(Dt.unstable_NormalPriority,W0)))}function Gr(e){function t(a){return pr(a,e)}if(0<va.length){pr(va[0],e);for(var n=1;n<va.length;n++){var r=va[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Gn!==null&&pr(Gn,e),Wn!==null&&pr(Wn,e),Hn!==null&&pr(Hn,e),Br.forEach(t),zr.forEach(t),n=0;n<Dn.length;n++)r=Dn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Dn.length&&(n=Dn[0],n.blockedOn===null);)Am(n),n.blockedOn===null&&Dn.shift()}var Ws=An.ReactCurrentBatchConfig,tl=!0;function H0(e,t,n,r){var a=ze,l=Ws.transition;Ws.transition=null;try{ze=1,fc(e,t,n,r)}finally{ze=a,Ws.transition=l}}function K0(e,t,n,r){var a=ze,l=Ws.transition;Ws.transition=null;try{ze=4,fc(e,t,n,r)}finally{ze=a,Ws.transition=l}}function fc(e,t,n,r){if(tl){var a=di(e,t,n,r);if(a===null)po(e,t,r,nl,n),hd(e,r);else if(G0(a,e,t,n,r))r.stopPropagation();else if(hd(e,r),t&4&&-1<z0.indexOf(e)){for(;a!==null;){var l=oa(a);if(l!==null&&Pm(l),l=di(e,t,n,r),l===null&&po(e,t,r,nl,n),l===a)break;a=l}a!==null&&r.stopPropagation()}else po(e,t,r,null,n)}}var nl=null;function di(e,t,n,r){if(nl=null,e=cc(r),e=us(e),e!==null)if(t=ks(e),t===null)e=null;else if(n=t.tag,n===13){if(e=bm(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return nl=e,null}function $m(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($0()){case dc:return 1;case Sm:return 4;case Xa:case I0:return 16;case km:return 536870912;default:return 16}default:return 16}}var _n=null,pc=null,_a=null;function Im(){if(_a)return _a;var e,t=pc,n=t.length,r,a="value"in _n?_n.value:_n.textContent,l=a.length;for(e=0;e<n&&t[e]===a[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===a[l-r];r++);return _a=a.slice(e,1<r?1-r:void 0)}function Ba(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ba(){return!0}function gd(){return!1}function Ft(e){function t(n,r,a,l,o){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(n=e[c],this[c]=n?n(l):l[c]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?ba:gd,this.isPropagationStopped=gd,this}return Ze(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ba)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ba)},persist:function(){},isPersistent:ba}),t}var rr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hc=Ft(rr),la=Ze({},rr,{view:0,detail:0}),V0=Ft(la),ro,ao,hr,Cl=Ze({},la,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hr&&(hr&&e.type==="mousemove"?(ro=e.screenX-hr.screenX,ao=e.screenY-hr.screenY):ao=ro=0,hr=e),ro)},movementY:function(e){return"movementY"in e?e.movementY:ao}}),yd=Ft(Cl),q0=Ze({},Cl,{dataTransfer:0}),J0=Ft(q0),Q0=Ze({},la,{relatedTarget:0}),lo=Ft(Q0),Y0=Ze({},rr,{animationName:0,elapsedTime:0,pseudoElement:0}),Z0=Ft(Y0),X0=Ze({},rr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),eh=Ft(X0),th=Ze({},rr,{data:0}),vd=Ft(th),nh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ah(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=rh[e])?!!t[e]:!1}function xc(){return ah}var lh=Ze({},la,{key:function(e){if(e.key){var t=nh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ba(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?sh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xc,charCode:function(e){return e.type==="keypress"?Ba(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ba(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),oh=Ft(lh),ih=Ze({},Cl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bd=Ft(ih),ch=Ze({},la,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xc}),dh=Ft(ch),uh=Ze({},rr,{propertyName:0,elapsedTime:0,pseudoElement:0}),mh=Ft(uh),fh=Ze({},Cl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ph=Ft(fh),hh=[9,13,27,32],gc=En&&"CompositionEvent"in window,Lr=null;En&&"documentMode"in document&&(Lr=document.documentMode);var xh=En&&"TextEvent"in window&&!Lr,Um=En&&(!gc||Lr&&8<Lr&&11>=Lr),wd=" ",jd=!1;function Mm(e,t){switch(e){case"keyup":return hh.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ls=!1;function gh(e,t){switch(e){case"compositionend":return Dm(t);case"keypress":return t.which!==32?null:(jd=!0,wd);case"textInput":return e=t.data,e===wd&&jd?null:e;default:return null}}function yh(e,t){if(Ls)return e==="compositionend"||!gc&&Mm(e,t)?(e=Im(),_a=pc=_n=null,Ls=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Um&&t.locale!=="ko"?null:t.data;default:return null}}var vh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!vh[e.type]:t==="textarea"}function Om(e,t,n,r){hm(r),t=sl(t,"onChange"),0<t.length&&(n=new hc("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ar=null,Wr=null;function bh(e){Jm(e,0)}function El(e){var t=Is(e);if(im(t))return e}function wh(e,t){if(e==="change")return t}var Fm=!1;if(En){var oo;if(En){var io="oninput"in document;if(!io){var Sd=document.createElement("div");Sd.setAttribute("oninput","return;"),io=typeof Sd.oninput=="function"}oo=io}else oo=!1;Fm=oo&&(!document.documentMode||9<document.documentMode)}function kd(){Ar&&(Ar.detachEvent("onpropertychange",_m),Wr=Ar=null)}function _m(e){if(e.propertyName==="value"&&El(Wr)){var t=[];Om(t,Wr,e,cc(e)),vm(bh,t)}}function jh(e,t,n){e==="focusin"?(kd(),Ar=t,Wr=n,Ar.attachEvent("onpropertychange",_m)):e==="focusout"&&kd()}function Nh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return El(Wr)}function Sh(e,t){if(e==="click")return El(t)}function kh(e,t){if(e==="input"||e==="change")return El(t)}function Ch(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var an=typeof Object.is=="function"?Object.is:Ch;function Hr(e,t){if(an(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Ko.call(t,a)||!an(e[a],t[a]))return!1}return!0}function Cd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ed(e,t){var n=Cd(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Cd(n)}}function Bm(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Bm(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function zm(){for(var e=window,t=Qa();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Qa(e.document)}return t}function yc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Eh(e){var t=zm(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Bm(n.ownerDocument.documentElement,n)){if(r!==null&&yc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,l=Math.min(r.start,a);r=r.end===void 0?l:Math.min(r.end,a),!e.extend&&l>r&&(a=r,r=l,l=a),a=Ed(n,l);var o=Ed(n,r);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ph=En&&"documentMode"in document&&11>=document.documentMode,As=null,ui=null,$r=null,mi=!1;function Pd(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;mi||As==null||As!==Qa(r)||(r=As,"selectionStart"in r&&yc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),$r&&Hr($r,r)||($r=r,r=sl(ui,"onSelect"),0<r.length&&(t=new hc("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=As)))}function wa(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var $s={animationend:wa("Animation","AnimationEnd"),animationiteration:wa("Animation","AnimationIteration"),animationstart:wa("Animation","AnimationStart"),transitionend:wa("Transition","TransitionEnd")},co={},Gm={};En&&(Gm=document.createElement("div").style,"AnimationEvent"in window||(delete $s.animationend.animation,delete $s.animationiteration.animation,delete $s.animationstart.animation),"TransitionEvent"in window||delete $s.transitionend.transition);function Pl(e){if(co[e])return co[e];if(!$s[e])return e;var t=$s[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Gm)return co[e]=t[n];return e}var Wm=Pl("animationend"),Hm=Pl("animationiteration"),Km=Pl("animationstart"),Vm=Pl("transitionend"),qm=new Map,Td="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ts(e,t){qm.set(e,t),Ss(t,[e])}for(var uo=0;uo<Td.length;uo++){var mo=Td[uo],Th=mo.toLowerCase(),Rh=mo[0].toUpperCase()+mo.slice(1);ts(Th,"on"+Rh)}ts(Wm,"onAnimationEnd");ts(Hm,"onAnimationIteration");ts(Km,"onAnimationStart");ts("dblclick","onDoubleClick");ts("focusin","onFocus");ts("focusout","onBlur");ts(Vm,"onTransitionEnd");qs("onMouseEnter",["mouseout","mouseover"]);qs("onMouseLeave",["mouseout","mouseover"]);qs("onPointerEnter",["pointerout","pointerover"]);qs("onPointerLeave",["pointerout","pointerover"]);Ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ss("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lh=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cr));function Rd(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,T0(r,t,void 0,e),e.currentTarget=null}function Jm(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var o=r.length-1;0<=o;o--){var c=r[o],d=c.instance,u=c.currentTarget;if(c=c.listener,d!==l&&a.isPropagationStopped())break e;Rd(a,c,u),l=d}else for(o=0;o<r.length;o++){if(c=r[o],d=c.instance,u=c.currentTarget,c=c.listener,d!==l&&a.isPropagationStopped())break e;Rd(a,c,u),l=d}}}if(Za)throw e=oi,Za=!1,oi=null,e}function Ve(e,t){var n=t[gi];n===void 0&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||(Qm(t,e,2,!1),n.add(r))}function fo(e,t,n){var r=0;t&&(r|=4),Qm(n,e,r,t)}var ja="_reactListening"+Math.random().toString(36).slice(2);function Kr(e){if(!e[ja]){e[ja]=!0,sm.forEach(function(n){n!=="selectionchange"&&(Lh.has(n)||fo(n,!1,e),fo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ja]||(t[ja]=!0,fo("selectionchange",!1,t))}}function Qm(e,t,n,r){switch($m(t)){case 1:var a=H0;break;case 4:a=K0;break;default:a=fc}n=a.bind(null,t,n,e),a=void 0,!li||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function po(e,t,n,r,a){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===a||c.nodeType===8&&c.parentNode===a)break;if(o===4)for(o=r.return;o!==null;){var d=o.tag;if((d===3||d===4)&&(d=o.stateNode.containerInfo,d===a||d.nodeType===8&&d.parentNode===a))return;o=o.return}for(;c!==null;){if(o=us(c),o===null)return;if(d=o.tag,d===5||d===6){r=l=o;continue e}c=c.parentNode}}r=r.return}vm(function(){var u=l,f=cc(n),m=[];e:{var x=qm.get(e);if(x!==void 0){var b=hc,w=e;switch(e){case"keypress":if(Ba(n)===0)break e;case"keydown":case"keyup":b=oh;break;case"focusin":w="focus",b=lo;break;case"focusout":w="blur",b=lo;break;case"beforeblur":case"afterblur":b=lo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=yd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=J0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=dh;break;case Wm:case Hm:case Km:b=Z0;break;case Vm:b=mh;break;case"scroll":b=V0;break;case"wheel":b=ph;break;case"copy":case"cut":case"paste":b=eh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=bd}var y=(t&4)!==0,C=!y&&e==="scroll",h=y?x!==null?x+"Capture":null:x;y=[];for(var p=u,g;p!==null;){g=p;var v=g.stateNode;if(g.tag===5&&v!==null&&(g=v,h!==null&&(v=_r(p,h),v!=null&&y.push(Vr(p,v,g)))),C)break;p=p.return}0<y.length&&(x=new b(x,w,null,n,f),m.push({event:x,listeners:y}))}}if(!(t&7)){e:{if(x=e==="mouseover"||e==="pointerover",b=e==="mouseout"||e==="pointerout",x&&n!==ri&&(w=n.relatedTarget||n.fromElement)&&(us(w)||w[Pn]))break e;if((b||x)&&(x=f.window===f?f:(x=f.ownerDocument)?x.defaultView||x.parentWindow:window,b?(w=n.relatedTarget||n.toElement,b=u,w=w?us(w):null,w!==null&&(C=ks(w),w!==C||w.tag!==5&&w.tag!==6)&&(w=null)):(b=null,w=u),b!==w)){if(y=yd,v="onMouseLeave",h="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(y=bd,v="onPointerLeave",h="onPointerEnter",p="pointer"),C=b==null?x:Is(b),g=w==null?x:Is(w),x=new y(v,p+"leave",b,n,f),x.target=C,x.relatedTarget=g,v=null,us(f)===u&&(y=new y(h,p+"enter",w,n,f),y.target=g,y.relatedTarget=C,v=y),C=v,b&&w)t:{for(y=b,h=w,p=0,g=y;g;g=Cs(g))p++;for(g=0,v=h;v;v=Cs(v))g++;for(;0<p-g;)y=Cs(y),p--;for(;0<g-p;)h=Cs(h),g--;for(;p--;){if(y===h||h!==null&&y===h.alternate)break t;y=Cs(y),h=Cs(h)}y=null}else y=null;b!==null&&Ld(m,x,b,y,!1),w!==null&&C!==null&&Ld(m,C,w,y,!0)}}e:{if(x=u?Is(u):window,b=x.nodeName&&x.nodeName.toLowerCase(),b==="select"||b==="input"&&x.type==="file")var j=wh;else if(Nd(x))if(Fm)j=kh;else{j=Nh;var E=jh}else(b=x.nodeName)&&b.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(j=Sh);if(j&&(j=j(e,u))){Om(m,j,n,f);break e}E&&E(e,x,u),e==="focusout"&&(E=x._wrapperState)&&E.controlled&&x.type==="number"&&Xo(x,"number",x.value)}switch(E=u?Is(u):window,e){case"focusin":(Nd(E)||E.contentEditable==="true")&&(As=E,ui=u,$r=null);break;case"focusout":$r=ui=As=null;break;case"mousedown":mi=!0;break;case"contextmenu":case"mouseup":case"dragend":mi=!1,Pd(m,n,f);break;case"selectionchange":if(Ph)break;case"keydown":case"keyup":Pd(m,n,f)}var $;if(gc)e:{switch(e){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Ls?Mm(e,n)&&(R="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(Um&&n.locale!=="ko"&&(Ls||R!=="onCompositionStart"?R==="onCompositionEnd"&&Ls&&($=Im()):(_n=f,pc="value"in _n?_n.value:_n.textContent,Ls=!0)),E=sl(u,R),0<E.length&&(R=new vd(R,e,null,n,f),m.push({event:R,listeners:E}),$?R.data=$:($=Dm(n),$!==null&&(R.data=$)))),($=xh?gh(e,n):yh(e,n))&&(u=sl(u,"onBeforeInput"),0<u.length&&(f=new vd("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:u}),f.data=$))}Jm(m,t)})}function Vr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function sl(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=_r(e,n),l!=null&&r.unshift(Vr(e,l,a)),l=_r(e,t),l!=null&&r.push(Vr(e,l,a))),e=e.return}return r}function Cs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ld(e,t,n,r,a){for(var l=t._reactName,o=[];n!==null&&n!==r;){var c=n,d=c.alternate,u=c.stateNode;if(d!==null&&d===r)break;c.tag===5&&u!==null&&(c=u,a?(d=_r(n,l),d!=null&&o.unshift(Vr(n,d,c))):a||(d=_r(n,l),d!=null&&o.push(Vr(n,d,c)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Ah=/\r\n?/g,$h=/\u0000|\uFFFD/g;function Ad(e){return(typeof e=="string"?e:""+e).replace(Ah,`
`).replace($h,"")}function Na(e,t,n){if(t=Ad(t),Ad(e)!==t&&n)throw Error(se(425))}function rl(){}var fi=null,pi=null;function hi(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var xi=typeof setTimeout=="function"?setTimeout:void 0,Ih=typeof clearTimeout=="function"?clearTimeout:void 0,$d=typeof Promise=="function"?Promise:void 0,Uh=typeof queueMicrotask=="function"?queueMicrotask:typeof $d<"u"?function(e){return $d.resolve(null).then(e).catch(Mh)}:xi;function Mh(e){setTimeout(function(){throw e})}function ho(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),Gr(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);Gr(t)}function Kn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Id(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ar=Math.random().toString(36).slice(2),un="__reactFiber$"+ar,qr="__reactProps$"+ar,Pn="__reactContainer$"+ar,gi="__reactEvents$"+ar,Dh="__reactListeners$"+ar,Oh="__reactHandles$"+ar;function us(e){var t=e[un];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Pn]||n[un]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Id(e);e!==null;){if(n=e[un])return n;e=Id(e)}return t}e=n,n=e.parentNode}return null}function oa(e){return e=e[un]||e[Pn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Is(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(se(33))}function Tl(e){return e[qr]||null}var yi=[],Us=-1;function ns(e){return{current:e}}function qe(e){0>Us||(e.current=yi[Us],yi[Us]=null,Us--)}function He(e,t){Us++,yi[Us]=e.current,e.current=t}var Xn={},jt=ns(Xn),Rt=ns(!1),vs=Xn;function Js(e,t){var n=e.type.contextTypes;if(!n)return Xn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in n)a[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Lt(e){return e=e.childContextTypes,e!=null}function al(){qe(Rt),qe(jt)}function Ud(e,t,n){if(jt.current!==Xn)throw Error(se(168));He(jt,t),He(Rt,n)}function Ym(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(se(108,j0(e)||"Unknown",a));return Ze({},n,r)}function ll(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Xn,vs=jt.current,He(jt,e),He(Rt,Rt.current),!0}function Md(e,t,n){var r=e.stateNode;if(!r)throw Error(se(169));n?(e=Ym(e,t,vs),r.__reactInternalMemoizedMergedChildContext=e,qe(Rt),qe(jt),He(jt,e)):qe(Rt),He(Rt,n)}var jn=null,Rl=!1,xo=!1;function Zm(e){jn===null?jn=[e]:jn.push(e)}function Fh(e){Rl=!0,Zm(e)}function ss(){if(!xo&&jn!==null){xo=!0;var e=0,t=ze;try{var n=jn;for(ze=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}jn=null,Rl=!1}catch(a){throw jn!==null&&(jn=jn.slice(e+1)),Nm(dc,ss),a}finally{ze=t,xo=!1}}return null}var Ms=[],Ds=0,ol=null,il=0,Ht=[],Kt=0,bs=null,Nn=1,Sn="";function is(e,t){Ms[Ds++]=il,Ms[Ds++]=ol,ol=e,il=t}function Xm(e,t,n){Ht[Kt++]=Nn,Ht[Kt++]=Sn,Ht[Kt++]=bs,bs=e;var r=Nn;e=Sn;var a=32-sn(r)-1;r&=~(1<<a),n+=1;var l=32-sn(t)+a;if(30<l){var o=a-a%5;l=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Nn=1<<32-sn(t)+a|n<<a|r,Sn=l+e}else Nn=1<<l|n<<a|r,Sn=e}function vc(e){e.return!==null&&(is(e,1),Xm(e,1,0))}function bc(e){for(;e===ol;)ol=Ms[--Ds],Ms[Ds]=null,il=Ms[--Ds],Ms[Ds]=null;for(;e===bs;)bs=Ht[--Kt],Ht[Kt]=null,Sn=Ht[--Kt],Ht[Kt]=null,Nn=Ht[--Kt],Ht[Kt]=null}var Mt=null,Ut=null,Je=!1,nn=null;function ef(e,t){var n=Vt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Dd(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Mt=e,Ut=Kn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Mt=e,Ut=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=bs!==null?{id:Nn,overflow:Sn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Vt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Mt=e,Ut=null,!0):!1;default:return!1}}function vi(e){return(e.mode&1)!==0&&(e.flags&128)===0}function bi(e){if(Je){var t=Ut;if(t){var n=t;if(!Dd(e,t)){if(vi(e))throw Error(se(418));t=Kn(n.nextSibling);var r=Mt;t&&Dd(e,t)?ef(r,n):(e.flags=e.flags&-4097|2,Je=!1,Mt=e)}}else{if(vi(e))throw Error(se(418));e.flags=e.flags&-4097|2,Je=!1,Mt=e}}}function Od(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Mt=e}function Sa(e){if(e!==Mt)return!1;if(!Je)return Od(e),Je=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!hi(e.type,e.memoizedProps)),t&&(t=Ut)){if(vi(e))throw tf(),Error(se(418));for(;t;)ef(e,t),t=Kn(t.nextSibling)}if(Od(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(se(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ut=Kn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ut=null}}else Ut=Mt?Kn(e.stateNode.nextSibling):null;return!0}function tf(){for(var e=Ut;e;)e=Kn(e.nextSibling)}function Qs(){Ut=Mt=null,Je=!1}function wc(e){nn===null?nn=[e]:nn.push(e)}var _h=An.ReactCurrentBatchConfig;function xr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(se(309));var r=n.stateNode}if(!r)throw Error(se(147,e));var a=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(o){var c=a.refs;o===null?delete c[l]:c[l]=o},t._stringRef=l,t)}if(typeof e!="string")throw Error(se(284));if(!n._owner)throw Error(se(290,e))}return e}function ka(e,t){throw e=Object.prototype.toString.call(t),Error(se(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Fd(e){var t=e._init;return t(e._payload)}function nf(e){function t(h,p){if(e){var g=h.deletions;g===null?(h.deletions=[p],h.flags|=16):g.push(p)}}function n(h,p){if(!e)return null;for(;p!==null;)t(h,p),p=p.sibling;return null}function r(h,p){for(h=new Map;p!==null;)p.key!==null?h.set(p.key,p):h.set(p.index,p),p=p.sibling;return h}function a(h,p){return h=Qn(h,p),h.index=0,h.sibling=null,h}function l(h,p,g){return h.index=g,e?(g=h.alternate,g!==null?(g=g.index,g<p?(h.flags|=2,p):g):(h.flags|=2,p)):(h.flags|=1048576,p)}function o(h){return e&&h.alternate===null&&(h.flags|=2),h}function c(h,p,g,v){return p===null||p.tag!==6?(p=No(g,h.mode,v),p.return=h,p):(p=a(p,g),p.return=h,p)}function d(h,p,g,v){var j=g.type;return j===Rs?f(h,p,g.props.children,v,g.key):p!==null&&(p.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Un&&Fd(j)===p.type)?(v=a(p,g.props),v.ref=xr(h,p,g),v.return=h,v):(v=qa(g.type,g.key,g.props,null,h.mode,v),v.ref=xr(h,p,g),v.return=h,v)}function u(h,p,g,v){return p===null||p.tag!==4||p.stateNode.containerInfo!==g.containerInfo||p.stateNode.implementation!==g.implementation?(p=So(g,h.mode,v),p.return=h,p):(p=a(p,g.children||[]),p.return=h,p)}function f(h,p,g,v,j){return p===null||p.tag!==7?(p=gs(g,h.mode,v,j),p.return=h,p):(p=a(p,g),p.return=h,p)}function m(h,p,g){if(typeof p=="string"&&p!==""||typeof p=="number")return p=No(""+p,h.mode,g),p.return=h,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case pa:return g=qa(p.type,p.key,p.props,null,h.mode,g),g.ref=xr(h,null,p),g.return=h,g;case Ts:return p=So(p,h.mode,g),p.return=h,p;case Un:var v=p._init;return m(h,v(p._payload),g)}if(Sr(p)||ur(p))return p=gs(p,h.mode,g,null),p.return=h,p;ka(h,p)}return null}function x(h,p,g,v){var j=p!==null?p.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return j!==null?null:c(h,p,""+g,v);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case pa:return g.key===j?d(h,p,g,v):null;case Ts:return g.key===j?u(h,p,g,v):null;case Un:return j=g._init,x(h,p,j(g._payload),v)}if(Sr(g)||ur(g))return j!==null?null:f(h,p,g,v,null);ka(h,g)}return null}function b(h,p,g,v,j){if(typeof v=="string"&&v!==""||typeof v=="number")return h=h.get(g)||null,c(p,h,""+v,j);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case pa:return h=h.get(v.key===null?g:v.key)||null,d(p,h,v,j);case Ts:return h=h.get(v.key===null?g:v.key)||null,u(p,h,v,j);case Un:var E=v._init;return b(h,p,g,E(v._payload),j)}if(Sr(v)||ur(v))return h=h.get(g)||null,f(p,h,v,j,null);ka(p,v)}return null}function w(h,p,g,v){for(var j=null,E=null,$=p,R=p=0,H=null;$!==null&&R<g.length;R++){$.index>R?(H=$,$=null):H=$.sibling;var O=x(h,$,g[R],v);if(O===null){$===null&&($=H);break}e&&$&&O.alternate===null&&t(h,$),p=l(O,p,R),E===null?j=O:E.sibling=O,E=O,$=H}if(R===g.length)return n(h,$),Je&&is(h,R),j;if($===null){for(;R<g.length;R++)$=m(h,g[R],v),$!==null&&(p=l($,p,R),E===null?j=$:E.sibling=$,E=$);return Je&&is(h,R),j}for($=r(h,$);R<g.length;R++)H=b($,h,R,g[R],v),H!==null&&(e&&H.alternate!==null&&$.delete(H.key===null?R:H.key),p=l(H,p,R),E===null?j=H:E.sibling=H,E=H);return e&&$.forEach(function(q){return t(h,q)}),Je&&is(h,R),j}function y(h,p,g,v){var j=ur(g);if(typeof j!="function")throw Error(se(150));if(g=j.call(g),g==null)throw Error(se(151));for(var E=j=null,$=p,R=p=0,H=null,O=g.next();$!==null&&!O.done;R++,O=g.next()){$.index>R?(H=$,$=null):H=$.sibling;var q=x(h,$,O.value,v);if(q===null){$===null&&($=H);break}e&&$&&q.alternate===null&&t(h,$),p=l(q,p,R),E===null?j=q:E.sibling=q,E=q,$=H}if(O.done)return n(h,$),Je&&is(h,R),j;if($===null){for(;!O.done;R++,O=g.next())O=m(h,O.value,v),O!==null&&(p=l(O,p,R),E===null?j=O:E.sibling=O,E=O);return Je&&is(h,R),j}for($=r(h,$);!O.done;R++,O=g.next())O=b($,h,R,O.value,v),O!==null&&(e&&O.alternate!==null&&$.delete(O.key===null?R:O.key),p=l(O,p,R),E===null?j=O:E.sibling=O,E=O);return e&&$.forEach(function(W){return t(h,W)}),Je&&is(h,R),j}function C(h,p,g,v){if(typeof g=="object"&&g!==null&&g.type===Rs&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case pa:e:{for(var j=g.key,E=p;E!==null;){if(E.key===j){if(j=g.type,j===Rs){if(E.tag===7){n(h,E.sibling),p=a(E,g.props.children),p.return=h,h=p;break e}}else if(E.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Un&&Fd(j)===E.type){n(h,E.sibling),p=a(E,g.props),p.ref=xr(h,E,g),p.return=h,h=p;break e}n(h,E);break}else t(h,E);E=E.sibling}g.type===Rs?(p=gs(g.props.children,h.mode,v,g.key),p.return=h,h=p):(v=qa(g.type,g.key,g.props,null,h.mode,v),v.ref=xr(h,p,g),v.return=h,h=v)}return o(h);case Ts:e:{for(E=g.key;p!==null;){if(p.key===E)if(p.tag===4&&p.stateNode.containerInfo===g.containerInfo&&p.stateNode.implementation===g.implementation){n(h,p.sibling),p=a(p,g.children||[]),p.return=h,h=p;break e}else{n(h,p);break}else t(h,p);p=p.sibling}p=So(g,h.mode,v),p.return=h,h=p}return o(h);case Un:return E=g._init,C(h,p,E(g._payload),v)}if(Sr(g))return w(h,p,g,v);if(ur(g))return y(h,p,g,v);ka(h,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,p!==null&&p.tag===6?(n(h,p.sibling),p=a(p,g),p.return=h,h=p):(n(h,p),p=No(g,h.mode,v),p.return=h,h=p),o(h)):n(h,p)}return C}var Ys=nf(!0),sf=nf(!1),cl=ns(null),dl=null,Os=null,jc=null;function Nc(){jc=Os=dl=null}function Sc(e){var t=cl.current;qe(cl),e._currentValue=t}function wi(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Hs(e,t){dl=e,jc=Os=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Tt=!0),e.firstContext=null)}function Jt(e){var t=e._currentValue;if(jc!==e)if(e={context:e,memoizedValue:t,next:null},Os===null){if(dl===null)throw Error(se(308));Os=e,dl.dependencies={lanes:0,firstContext:e}}else Os=Os.next=e;return t}var ms=null;function kc(e){ms===null?ms=[e]:ms.push(e)}function rf(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,kc(t)):(n.next=a.next,a.next=n),t.interleaved=n,Tn(e,r)}function Tn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Mn=!1;function Cc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function af(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function kn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Le&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Tn(e,n)}return a=r.interleaved,a===null?(t.next=t,kc(r)):(t.next=a.next,a.next=t),r.interleaved=t,Tn(e,n)}function za(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,uc(e,n)}}function _d(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?a=l=o:l=l.next=o,n=n.next}while(n!==null);l===null?a=l=t:l=l.next=t}else a=l=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ul(e,t,n,r){var a=e.updateQueue;Mn=!1;var l=a.firstBaseUpdate,o=a.lastBaseUpdate,c=a.shared.pending;if(c!==null){a.shared.pending=null;var d=c,u=d.next;d.next=null,o===null?l=u:o.next=u,o=d;var f=e.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==o&&(c===null?f.firstBaseUpdate=u:c.next=u,f.lastBaseUpdate=d))}if(l!==null){var m=a.baseState;o=0,f=u=d=null,c=l;do{var x=c.lane,b=c.eventTime;if((r&x)===x){f!==null&&(f=f.next={eventTime:b,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var w=e,y=c;switch(x=t,b=n,y.tag){case 1:if(w=y.payload,typeof w=="function"){m=w.call(b,m,x);break e}m=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=y.payload,x=typeof w=="function"?w.call(b,m,x):w,x==null)break e;m=Ze({},m,x);break e;case 2:Mn=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,x=a.effects,x===null?a.effects=[c]:x.push(c))}else b={eventTime:b,lane:x,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(u=f=b,d=m):f=f.next=b,o|=x;if(c=c.next,c===null){if(c=a.shared.pending,c===null)break;x=c,c=x.next,x.next=null,a.lastBaseUpdate=x,a.shared.pending=null}}while(!0);if(f===null&&(d=m),a.baseState=d,a.firstBaseUpdate=u,a.lastBaseUpdate=f,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else l===null&&(a.shared.lanes=0);js|=o,e.lanes=o,e.memoizedState=m}}function Bd(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(se(191,a));a.call(r)}}}var ia={},fn=ns(ia),Jr=ns(ia),Qr=ns(ia);function fs(e){if(e===ia)throw Error(se(174));return e}function Ec(e,t){switch(He(Qr,t),He(Jr,e),He(fn,ia),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ti(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ti(t,e)}qe(fn),He(fn,t)}function Zs(){qe(fn),qe(Jr),qe(Qr)}function lf(e){fs(Qr.current);var t=fs(fn.current),n=ti(t,e.type);t!==n&&(He(Jr,e),He(fn,n))}function Pc(e){Jr.current===e&&(qe(fn),qe(Jr))}var Qe=ns(0);function ml(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var go=[];function Tc(){for(var e=0;e<go.length;e++)go[e]._workInProgressVersionPrimary=null;go.length=0}var Ga=An.ReactCurrentDispatcher,yo=An.ReactCurrentBatchConfig,ws=0,Ye=null,ct=null,mt=null,fl=!1,Ir=!1,Yr=0,Bh=0;function yt(){throw Error(se(321))}function Rc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!an(e[n],t[n]))return!1;return!0}function Lc(e,t,n,r,a,l){if(ws=l,Ye=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ga.current=e===null||e.memoizedState===null?Hh:Kh,e=n(r,a),Ir){l=0;do{if(Ir=!1,Yr=0,25<=l)throw Error(se(301));l+=1,mt=ct=null,t.updateQueue=null,Ga.current=Vh,e=n(r,a)}while(Ir)}if(Ga.current=pl,t=ct!==null&&ct.next!==null,ws=0,mt=ct=Ye=null,fl=!1,t)throw Error(se(300));return e}function Ac(){var e=Yr!==0;return Yr=0,e}function dn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?Ye.memoizedState=mt=e:mt=mt.next=e,mt}function Qt(){if(ct===null){var e=Ye.alternate;e=e!==null?e.memoizedState:null}else e=ct.next;var t=mt===null?Ye.memoizedState:mt.next;if(t!==null)mt=t,ct=e;else{if(e===null)throw Error(se(310));ct=e,e={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},mt===null?Ye.memoizedState=mt=e:mt=mt.next=e}return mt}function Zr(e,t){return typeof t=="function"?t(e):t}function vo(e){var t=Qt(),n=t.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=e;var r=ct,a=r.baseQueue,l=n.pending;if(l!==null){if(a!==null){var o=a.next;a.next=l.next,l.next=o}r.baseQueue=a=l,n.pending=null}if(a!==null){l=a.next,r=r.baseState;var c=o=null,d=null,u=l;do{var f=u.lane;if((ws&f)===f)d!==null&&(d=d.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var m={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};d===null?(c=d=m,o=r):d=d.next=m,Ye.lanes|=f,js|=f}u=u.next}while(u!==null&&u!==l);d===null?o=r:d.next=c,an(r,t.memoizedState)||(Tt=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=d,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do l=a.lane,Ye.lanes|=l,js|=l,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function bo(e){var t=Qt(),n=t.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,l=t.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do l=e(l,o.action),o=o.next;while(o!==a);an(l,t.memoizedState)||(Tt=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function of(){}function cf(e,t){var n=Ye,r=Qt(),a=t(),l=!an(r.memoizedState,a);if(l&&(r.memoizedState=a,Tt=!0),r=r.queue,$c(mf.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||mt!==null&&mt.memoizedState.tag&1){if(n.flags|=2048,Xr(9,uf.bind(null,n,r,a,t),void 0,null),ft===null)throw Error(se(349));ws&30||df(n,t,a)}return a}function df(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ye.updateQueue,t===null?(t={lastEffect:null,stores:null},Ye.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function uf(e,t,n,r){t.value=n,t.getSnapshot=r,ff(t)&&pf(e)}function mf(e,t,n){return n(function(){ff(t)&&pf(e)})}function ff(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!an(e,n)}catch{return!0}}function pf(e){var t=Tn(e,1);t!==null&&rn(t,e,1,-1)}function zd(e){var t=dn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zr,lastRenderedState:e},t.queue=e,e=e.dispatch=Wh.bind(null,Ye,e),[t.memoizedState,e]}function Xr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ye.updateQueue,t===null?(t={lastEffect:null,stores:null},Ye.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function hf(){return Qt().memoizedState}function Wa(e,t,n,r){var a=dn();Ye.flags|=e,a.memoizedState=Xr(1|t,n,void 0,r===void 0?null:r)}function Ll(e,t,n,r){var a=Qt();r=r===void 0?null:r;var l=void 0;if(ct!==null){var o=ct.memoizedState;if(l=o.destroy,r!==null&&Rc(r,o.deps)){a.memoizedState=Xr(t,n,l,r);return}}Ye.flags|=e,a.memoizedState=Xr(1|t,n,l,r)}function Gd(e,t){return Wa(8390656,8,e,t)}function $c(e,t){return Ll(2048,8,e,t)}function xf(e,t){return Ll(4,2,e,t)}function gf(e,t){return Ll(4,4,e,t)}function yf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function vf(e,t,n){return n=n!=null?n.concat([e]):null,Ll(4,4,yf.bind(null,t,e),n)}function Ic(){}function bf(e,t){var n=Qt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Rc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function wf(e,t){var n=Qt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Rc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function jf(e,t,n){return ws&21?(an(n,t)||(n=Cm(),Ye.lanes|=n,js|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Tt=!0),e.memoizedState=n)}function zh(e,t){var n=ze;ze=n!==0&&4>n?n:4,e(!0);var r=yo.transition;yo.transition={};try{e(!1),t()}finally{ze=n,yo.transition=r}}function Nf(){return Qt().memoizedState}function Gh(e,t,n){var r=Jn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Sf(e))kf(t,n);else if(n=rf(e,t,n,r),n!==null){var a=St();rn(n,e,r,a),Cf(n,t,r)}}function Wh(e,t,n){var r=Jn(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Sf(e))kf(t,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var o=t.lastRenderedState,c=l(o,n);if(a.hasEagerState=!0,a.eagerState=c,an(c,o)){var d=t.interleaved;d===null?(a.next=a,kc(t)):(a.next=d.next,d.next=a),t.interleaved=a;return}}catch{}finally{}n=rf(e,t,a,r),n!==null&&(a=St(),rn(n,e,r,a),Cf(n,t,r))}}function Sf(e){var t=e.alternate;return e===Ye||t!==null&&t===Ye}function kf(e,t){Ir=fl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Cf(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,uc(e,n)}}var pl={readContext:Jt,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},Hh={readContext:Jt,useCallback:function(e,t){return dn().memoizedState=[e,t===void 0?null:t],e},useContext:Jt,useEffect:Gd,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Wa(4194308,4,yf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Wa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Wa(4,2,e,t)},useMemo:function(e,t){var n=dn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=dn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Gh.bind(null,Ye,e),[r.memoizedState,e]},useRef:function(e){var t=dn();return e={current:e},t.memoizedState=e},useState:zd,useDebugValue:Ic,useDeferredValue:function(e){return dn().memoizedState=e},useTransition:function(){var e=zd(!1),t=e[0];return e=zh.bind(null,e[1]),dn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ye,a=dn();if(Je){if(n===void 0)throw Error(se(407));n=n()}else{if(n=t(),ft===null)throw Error(se(349));ws&30||df(r,t,n)}a.memoizedState=n;var l={value:n,getSnapshot:t};return a.queue=l,Gd(mf.bind(null,r,l,e),[e]),r.flags|=2048,Xr(9,uf.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=dn(),t=ft.identifierPrefix;if(Je){var n=Sn,r=Nn;n=(r&~(1<<32-sn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Yr++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Bh++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Kh={readContext:Jt,useCallback:bf,useContext:Jt,useEffect:$c,useImperativeHandle:vf,useInsertionEffect:xf,useLayoutEffect:gf,useMemo:wf,useReducer:vo,useRef:hf,useState:function(){return vo(Zr)},useDebugValue:Ic,useDeferredValue:function(e){var t=Qt();return jf(t,ct.memoizedState,e)},useTransition:function(){var e=vo(Zr)[0],t=Qt().memoizedState;return[e,t]},useMutableSource:of,useSyncExternalStore:cf,useId:Nf,unstable_isNewReconciler:!1},Vh={readContext:Jt,useCallback:bf,useContext:Jt,useEffect:$c,useImperativeHandle:vf,useInsertionEffect:xf,useLayoutEffect:gf,useMemo:wf,useReducer:bo,useRef:hf,useState:function(){return bo(Zr)},useDebugValue:Ic,useDeferredValue:function(e){var t=Qt();return ct===null?t.memoizedState=e:jf(t,ct.memoizedState,e)},useTransition:function(){var e=bo(Zr)[0],t=Qt().memoizedState;return[e,t]},useMutableSource:of,useSyncExternalStore:cf,useId:Nf,unstable_isNewReconciler:!1};function en(e,t){if(e&&e.defaultProps){t=Ze({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ji(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ze({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Al={isMounted:function(e){return(e=e._reactInternals)?ks(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=St(),a=Jn(e),l=kn(r,a);l.payload=t,n!=null&&(l.callback=n),t=Vn(e,l,a),t!==null&&(rn(t,e,a,r),za(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=St(),a=Jn(e),l=kn(r,a);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=Vn(e,l,a),t!==null&&(rn(t,e,a,r),za(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=St(),r=Jn(e),a=kn(n,r);a.tag=2,t!=null&&(a.callback=t),t=Vn(e,a,r),t!==null&&(rn(t,e,r,n),za(t,e,r))}};function Wd(e,t,n,r,a,l,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,o):t.prototype&&t.prototype.isPureReactComponent?!Hr(n,r)||!Hr(a,l):!0}function Ef(e,t,n){var r=!1,a=Xn,l=t.contextType;return typeof l=="object"&&l!==null?l=Jt(l):(a=Lt(t)?vs:jt.current,r=t.contextTypes,l=(r=r!=null)?Js(e,a):Xn),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Al,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),t}function Hd(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Al.enqueueReplaceState(t,t.state,null)}function Ni(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Cc(e);var l=t.contextType;typeof l=="object"&&l!==null?a.context=Jt(l):(l=Lt(t)?vs:jt.current,a.context=Js(e,l)),a.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(ji(e,t,l,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Al.enqueueReplaceState(a,a.state,null),ul(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Xs(e,t){try{var n="",r=t;do n+=w0(r),r=r.return;while(r);var a=n}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:a,digest:null}}function wo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Si(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var qh=typeof WeakMap=="function"?WeakMap:Map;function Pf(e,t,n){n=kn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){xl||(xl=!0,Ii=r),Si(e,t)},n}function Tf(e,t,n){n=kn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){Si(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Si(e,t),typeof r!="function"&&(qn===null?qn=new Set([this]):qn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Kd(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new qh;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=ix.bind(null,e,t,n),t.then(e,e))}function Vd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function qd(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=kn(-1,1),t.tag=2,Vn(n,t,1))),n.lanes|=1),e)}var Jh=An.ReactCurrentOwner,Tt=!1;function Nt(e,t,n,r){t.child=e===null?sf(t,null,n,r):Ys(t,e.child,n,r)}function Jd(e,t,n,r,a){n=n.render;var l=t.ref;return Hs(t,a),r=Lc(e,t,n,r,l,a),n=Ac(),e!==null&&!Tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Rn(e,t,a)):(Je&&n&&vc(t),t.flags|=1,Nt(e,t,r,a),t.child)}function Qd(e,t,n,r,a){if(e===null){var l=n.type;return typeof l=="function"&&!zc(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,Rf(e,t,l,r,a)):(e=qa(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&a)){var o=l.memoizedProps;if(n=n.compare,n=n!==null?n:Hr,n(o,r)&&e.ref===t.ref)return Rn(e,t,a)}return t.flags|=1,e=Qn(l,r),e.ref=t.ref,e.return=t,t.child=e}function Rf(e,t,n,r,a){if(e!==null){var l=e.memoizedProps;if(Hr(l,r)&&e.ref===t.ref)if(Tt=!1,t.pendingProps=r=l,(e.lanes&a)!==0)e.flags&131072&&(Tt=!0);else return t.lanes=e.lanes,Rn(e,t,a)}return ki(e,t,n,r,a)}function Lf(e,t,n){var r=t.pendingProps,a=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(_s,It),It|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,He(_s,It),It|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,He(_s,It),It|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,He(_s,It),It|=r;return Nt(e,t,a,n),t.child}function Af(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ki(e,t,n,r,a){var l=Lt(n)?vs:jt.current;return l=Js(t,l),Hs(t,a),n=Lc(e,t,n,r,l,a),r=Ac(),e!==null&&!Tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Rn(e,t,a)):(Je&&r&&vc(t),t.flags|=1,Nt(e,t,n,a),t.child)}function Yd(e,t,n,r,a){if(Lt(n)){var l=!0;ll(t)}else l=!1;if(Hs(t,a),t.stateNode===null)Ha(e,t),Ef(t,n,r),Ni(t,n,r,a),r=!0;else if(e===null){var o=t.stateNode,c=t.memoizedProps;o.props=c;var d=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Jt(u):(u=Lt(n)?vs:jt.current,u=Js(t,u));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||d!==u)&&Hd(t,o,r,u),Mn=!1;var x=t.memoizedState;o.state=x,ul(t,r,o,a),d=t.memoizedState,c!==r||x!==d||Rt.current||Mn?(typeof f=="function"&&(ji(t,n,f,r),d=t.memoizedState),(c=Mn||Wd(t,n,c,r,x,d,u))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=d),o.props=r,o.state=d,o.context=u,r=c):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,af(e,t),c=t.memoizedProps,u=t.type===t.elementType?c:en(t.type,c),o.props=u,m=t.pendingProps,x=o.context,d=n.contextType,typeof d=="object"&&d!==null?d=Jt(d):(d=Lt(n)?vs:jt.current,d=Js(t,d));var b=n.getDerivedStateFromProps;(f=typeof b=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==m||x!==d)&&Hd(t,o,r,d),Mn=!1,x=t.memoizedState,o.state=x,ul(t,r,o,a);var w=t.memoizedState;c!==m||x!==w||Rt.current||Mn?(typeof b=="function"&&(ji(t,n,b,r),w=t.memoizedState),(u=Mn||Wd(t,n,u,r,x,w,d)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,d),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,d)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),o.props=r,o.state=w,o.context=d,r=u):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),r=!1)}return Ci(e,t,n,r,l,a)}function Ci(e,t,n,r,a,l){Af(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return a&&Md(t,n,!1),Rn(e,t,l);r=t.stateNode,Jh.current=t;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Ys(t,e.child,null,l),t.child=Ys(t,null,c,l)):Nt(e,t,c,l),t.memoizedState=r.state,a&&Md(t,n,!0),t.child}function $f(e){var t=e.stateNode;t.pendingContext?Ud(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ud(e,t.context,!1),Ec(e,t.containerInfo)}function Zd(e,t,n,r,a){return Qs(),wc(a),t.flags|=256,Nt(e,t,n,r),t.child}var Ei={dehydrated:null,treeContext:null,retryLane:0};function Pi(e){return{baseLanes:e,cachePool:null,transitions:null}}function If(e,t,n){var r=t.pendingProps,a=Qe.current,l=!1,o=(t.flags&128)!==0,c;if((c=o)||(c=e!==null&&e.memoizedState===null?!1:(a&2)!==0),c?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),He(Qe,a&1),e===null)return bi(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,l?(r=t.mode,l=t.child,o={mode:"hidden",children:o},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=o):l=Ul(o,r,0,null),e=gs(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Pi(n),t.memoizedState=Ei,e):Uc(t,o));if(a=e.memoizedState,a!==null&&(c=a.dehydrated,c!==null))return Qh(e,t,o,r,c,a,n);if(l){l=r.fallback,o=t.mode,a=e.child,c=a.sibling;var d={mode:"hidden",children:r.children};return!(o&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=d,t.deletions=null):(r=Qn(a,d),r.subtreeFlags=a.subtreeFlags&14680064),c!==null?l=Qn(c,l):(l=gs(l,o,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,o=e.child.memoizedState,o=o===null?Pi(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=e.childLanes&~n,t.memoizedState=Ei,r}return l=e.child,e=l.sibling,r=Qn(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Uc(e,t){return t=Ul({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ca(e,t,n,r){return r!==null&&wc(r),Ys(t,e.child,null,n),e=Uc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Qh(e,t,n,r,a,l,o){if(n)return t.flags&256?(t.flags&=-257,r=wo(Error(se(422))),Ca(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,a=t.mode,r=Ul({mode:"visible",children:r.children},a,0,null),l=gs(l,a,o,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&Ys(t,e.child,null,o),t.child.memoizedState=Pi(o),t.memoizedState=Ei,l);if(!(t.mode&1))return Ca(e,t,o,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var c=r.dgst;return r=c,l=Error(se(419)),r=wo(l,r,void 0),Ca(e,t,o,r)}if(c=(o&e.childLanes)!==0,Tt||c){if(r=ft,r!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|o)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,Tn(e,a),rn(r,e,a,-1))}return Bc(),r=wo(Error(se(421))),Ca(e,t,o,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=cx.bind(null,e),a._reactRetry=t,null):(e=l.treeContext,Ut=Kn(a.nextSibling),Mt=t,Je=!0,nn=null,e!==null&&(Ht[Kt++]=Nn,Ht[Kt++]=Sn,Ht[Kt++]=bs,Nn=e.id,Sn=e.overflow,bs=t),t=Uc(t,r.children),t.flags|=4096,t)}function Xd(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),wi(e.return,t,n)}function jo(e,t,n,r,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=a)}function Uf(e,t,n){var r=t.pendingProps,a=r.revealOrder,l=r.tail;if(Nt(e,t,r.children,n),r=Qe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Xd(e,n,t);else if(e.tag===19)Xd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(He(Qe,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&ml(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),jo(t,!1,a,n,l);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&ml(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}jo(t,!0,n,null,l);break;case"together":jo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ha(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Rn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),js|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(se(153));if(t.child!==null){for(e=t.child,n=Qn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Qn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Yh(e,t,n){switch(t.tag){case 3:$f(t),Qs();break;case 5:lf(t);break;case 1:Lt(t.type)&&ll(t);break;case 4:Ec(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;He(cl,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(He(Qe,Qe.current&1),t.flags|=128,null):n&t.child.childLanes?If(e,t,n):(He(Qe,Qe.current&1),e=Rn(e,t,n),e!==null?e.sibling:null);He(Qe,Qe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Uf(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),He(Qe,Qe.current),r)break;return null;case 22:case 23:return t.lanes=0,Lf(e,t,n)}return Rn(e,t,n)}var Mf,Ti,Df,Of;Mf=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ti=function(){};Df=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,fs(fn.current);var l=null;switch(n){case"input":a=Yo(e,a),r=Yo(e,r),l=[];break;case"select":a=Ze({},a,{value:void 0}),r=Ze({},r,{value:void 0}),l=[];break;case"textarea":a=ei(e,a),r=ei(e,r),l=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=rl)}ni(n,r);var o;n=null;for(u in a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var c=a[u];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Or.hasOwnProperty(u)?l||(l=[]):(l=l||[]).push(u,null));for(u in r){var d=r[u];if(c=a!=null?a[u]:void 0,r.hasOwnProperty(u)&&d!==c&&(d!=null||c!=null))if(u==="style")if(c){for(o in c)!c.hasOwnProperty(o)||d&&d.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in d)d.hasOwnProperty(o)&&c[o]!==d[o]&&(n||(n={}),n[o]=d[o])}else n||(l||(l=[]),l.push(u,n)),n=d;else u==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,c=c?c.__html:void 0,d!=null&&c!==d&&(l=l||[]).push(u,d)):u==="children"?typeof d!="string"&&typeof d!="number"||(l=l||[]).push(u,""+d):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Or.hasOwnProperty(u)?(d!=null&&u==="onScroll"&&Ve("scroll",e),l||c===d||(l=[])):(l=l||[]).push(u,d))}n&&(l=l||[]).push("style",n);var u=l;(t.updateQueue=u)&&(t.flags|=4)}};Of=function(e,t,n,r){n!==r&&(t.flags|=4)};function gr(e,t){if(!Je)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function vt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Zh(e,t,n){var r=t.pendingProps;switch(bc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(t),null;case 1:return Lt(t.type)&&al(),vt(t),null;case 3:return r=t.stateNode,Zs(),qe(Rt),qe(jt),Tc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Sa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,nn!==null&&(Di(nn),nn=null))),Ti(e,t),vt(t),null;case 5:Pc(t);var a=fs(Qr.current);if(n=t.type,e!==null&&t.stateNode!=null)Df(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(se(166));return vt(t),null}if(e=fs(fn.current),Sa(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[un]=t,r[qr]=l,e=(t.mode&1)!==0,n){case"dialog":Ve("cancel",r),Ve("close",r);break;case"iframe":case"object":case"embed":Ve("load",r);break;case"video":case"audio":for(a=0;a<Cr.length;a++)Ve(Cr[a],r);break;case"source":Ve("error",r);break;case"img":case"image":case"link":Ve("error",r),Ve("load",r);break;case"details":Ve("toggle",r);break;case"input":id(r,l),Ve("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},Ve("invalid",r);break;case"textarea":dd(r,l),Ve("invalid",r)}ni(n,l),a=null;for(var o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="children"?typeof c=="string"?r.textContent!==c&&(l.suppressHydrationWarning!==!0&&Na(r.textContent,c,e),a=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(l.suppressHydrationWarning!==!0&&Na(r.textContent,c,e),a=["children",""+c]):Or.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Ve("scroll",r)}switch(n){case"input":ha(r),cd(r,l,!0);break;case"textarea":ha(r),ud(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=rl)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=um(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[un]=t,e[qr]=r,Mf(e,t,!1,!1),t.stateNode=e;e:{switch(o=si(n,r),n){case"dialog":Ve("cancel",e),Ve("close",e),a=r;break;case"iframe":case"object":case"embed":Ve("load",e),a=r;break;case"video":case"audio":for(a=0;a<Cr.length;a++)Ve(Cr[a],e);a=r;break;case"source":Ve("error",e),a=r;break;case"img":case"image":case"link":Ve("error",e),Ve("load",e),a=r;break;case"details":Ve("toggle",e),a=r;break;case"input":id(e,r),a=Yo(e,r),Ve("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=Ze({},r,{value:void 0}),Ve("invalid",e);break;case"textarea":dd(e,r),a=ei(e,r),Ve("invalid",e);break;default:a=r}ni(n,a),c=a;for(l in c)if(c.hasOwnProperty(l)){var d=c[l];l==="style"?pm(e,d):l==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&mm(e,d)):l==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Fr(e,d):typeof d=="number"&&Fr(e,""+d):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Or.hasOwnProperty(l)?d!=null&&l==="onScroll"&&Ve("scroll",e):d!=null&&ac(e,l,d,o))}switch(n){case"input":ha(e),cd(e,r,!1);break;case"textarea":ha(e),ud(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Zn(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?Bs(e,!!r.multiple,l,!1):r.defaultValue!=null&&Bs(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=rl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return vt(t),null;case 6:if(e&&t.stateNode!=null)Of(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(se(166));if(n=fs(Qr.current),fs(fn.current),Sa(t)){if(r=t.stateNode,n=t.memoizedProps,r[un]=t,(l=r.nodeValue!==n)&&(e=Mt,e!==null))switch(e.tag){case 3:Na(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Na(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[un]=t,t.stateNode=r}return vt(t),null;case 13:if(qe(Qe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Je&&Ut!==null&&t.mode&1&&!(t.flags&128))tf(),Qs(),t.flags|=98560,l=!1;else if(l=Sa(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(se(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(se(317));l[un]=t}else Qs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;vt(t),l=!1}else nn!==null&&(Di(nn),nn=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Qe.current&1?dt===0&&(dt=3):Bc())),t.updateQueue!==null&&(t.flags|=4),vt(t),null);case 4:return Zs(),Ti(e,t),e===null&&Kr(t.stateNode.containerInfo),vt(t),null;case 10:return Sc(t.type._context),vt(t),null;case 17:return Lt(t.type)&&al(),vt(t),null;case 19:if(qe(Qe),l=t.memoizedState,l===null)return vt(t),null;if(r=(t.flags&128)!==0,o=l.rendering,o===null)if(r)gr(l,!1);else{if(dt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=ml(e),o!==null){for(t.flags|=128,gr(l,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,o=l.alternate,o===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,e=o.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return He(Qe,Qe.current&1|2),t.child}e=e.sibling}l.tail!==null&&st()>er&&(t.flags|=128,r=!0,gr(l,!1),t.lanes=4194304)}else{if(!r)if(e=ml(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),gr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!Je)return vt(t),null}else 2*st()-l.renderingStartTime>er&&n!==1073741824&&(t.flags|=128,r=!0,gr(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(n=l.last,n!==null?n.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=st(),t.sibling=null,n=Qe.current,He(Qe,r?n&1|2:n&1),t):(vt(t),null);case 22:case 23:return _c(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?It&1073741824&&(vt(t),t.subtreeFlags&6&&(t.flags|=8192)):vt(t),null;case 24:return null;case 25:return null}throw Error(se(156,t.tag))}function Xh(e,t){switch(bc(t),t.tag){case 1:return Lt(t.type)&&al(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Zs(),qe(Rt),qe(jt),Tc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Pc(t),null;case 13:if(qe(Qe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(se(340));Qs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return qe(Qe),null;case 4:return Zs(),null;case 10:return Sc(t.type._context),null;case 22:case 23:return _c(),null;case 24:return null;default:return null}}var Ea=!1,bt=!1,ex=typeof WeakSet=="function"?WeakSet:Set,fe=null;function Fs(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){et(e,t,r)}else n.current=null}function Ri(e,t,n){try{n()}catch(r){et(e,t,r)}}var eu=!1;function tx(e,t){if(fi=tl,e=zm(),yc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var o=0,c=-1,d=-1,u=0,f=0,m=e,x=null;t:for(;;){for(var b;m!==n||a!==0&&m.nodeType!==3||(c=o+a),m!==l||r!==0&&m.nodeType!==3||(d=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(b=m.firstChild)!==null;)x=m,m=b;for(;;){if(m===e)break t;if(x===n&&++u===a&&(c=o),x===l&&++f===r&&(d=o),(b=m.nextSibling)!==null)break;m=x,x=m.parentNode}m=b}n=c===-1||d===-1?null:{start:c,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(pi={focusedElem:e,selectionRange:n},tl=!1,fe=t;fe!==null;)if(t=fe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,fe=e;else for(;fe!==null;){t=fe;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var y=w.memoizedProps,C=w.memoizedState,h=t.stateNode,p=h.getSnapshotBeforeUpdate(t.elementType===t.type?y:en(t.type,y),C);h.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(se(163))}}catch(v){et(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,fe=e;break}fe=t.return}return w=eu,eu=!1,w}function Ur(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&Ri(t,n,l)}a=a.next}while(a!==r)}}function $l(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Li(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Ff(e){var t=e.alternate;t!==null&&(e.alternate=null,Ff(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[un],delete t[qr],delete t[gi],delete t[Dh],delete t[Oh])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function _f(e){return e.tag===5||e.tag===3||e.tag===4}function tu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||_f(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ai(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=rl));else if(r!==4&&(e=e.child,e!==null))for(Ai(e,t,n),e=e.sibling;e!==null;)Ai(e,t,n),e=e.sibling}function $i(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for($i(e,t,n),e=e.sibling;e!==null;)$i(e,t,n),e=e.sibling}var pt=null,tn=!1;function In(e,t,n){for(n=n.child;n!==null;)Bf(e,t,n),n=n.sibling}function Bf(e,t,n){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(kl,n)}catch{}switch(n.tag){case 5:bt||Fs(n,t);case 6:var r=pt,a=tn;pt=null,In(e,t,n),pt=r,tn=a,pt!==null&&(tn?(e=pt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):pt.removeChild(n.stateNode));break;case 18:pt!==null&&(tn?(e=pt,n=n.stateNode,e.nodeType===8?ho(e.parentNode,n):e.nodeType===1&&ho(e,n),Gr(e)):ho(pt,n.stateNode));break;case 4:r=pt,a=tn,pt=n.stateNode.containerInfo,tn=!0,In(e,t,n),pt=r,tn=a;break;case 0:case 11:case 14:case 15:if(!bt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var l=a,o=l.destroy;l=l.tag,o!==void 0&&(l&2||l&4)&&Ri(n,t,o),a=a.next}while(a!==r)}In(e,t,n);break;case 1:if(!bt&&(Fs(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){et(n,t,c)}In(e,t,n);break;case 21:In(e,t,n);break;case 22:n.mode&1?(bt=(r=bt)||n.memoizedState!==null,In(e,t,n),bt=r):In(e,t,n);break;default:In(e,t,n)}}function nu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new ex),t.forEach(function(r){var a=dx.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function Xt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var l=e,o=t,c=o;e:for(;c!==null;){switch(c.tag){case 5:pt=c.stateNode,tn=!1;break e;case 3:pt=c.stateNode.containerInfo,tn=!0;break e;case 4:pt=c.stateNode.containerInfo,tn=!0;break e}c=c.return}if(pt===null)throw Error(se(160));Bf(l,o,a),pt=null,tn=!1;var d=a.alternate;d!==null&&(d.return=null),a.return=null}catch(u){et(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)zf(t,e),t=t.sibling}function zf(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Xt(t,e),on(e),r&4){try{Ur(3,e,e.return),$l(3,e)}catch(y){et(e,e.return,y)}try{Ur(5,e,e.return)}catch(y){et(e,e.return,y)}}break;case 1:Xt(t,e),on(e),r&512&&n!==null&&Fs(n,n.return);break;case 5:if(Xt(t,e),on(e),r&512&&n!==null&&Fs(n,n.return),e.flags&32){var a=e.stateNode;try{Fr(a,"")}catch(y){et(e,e.return,y)}}if(r&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,o=n!==null?n.memoizedProps:l,c=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{c==="input"&&l.type==="radio"&&l.name!=null&&cm(a,l),si(c,o);var u=si(c,l);for(o=0;o<d.length;o+=2){var f=d[o],m=d[o+1];f==="style"?pm(a,m):f==="dangerouslySetInnerHTML"?mm(a,m):f==="children"?Fr(a,m):ac(a,f,m,u)}switch(c){case"input":Zo(a,l);break;case"textarea":dm(a,l);break;case"select":var x=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var b=l.value;b!=null?Bs(a,!!l.multiple,b,!1):x!==!!l.multiple&&(l.defaultValue!=null?Bs(a,!!l.multiple,l.defaultValue,!0):Bs(a,!!l.multiple,l.multiple?[]:"",!1))}a[qr]=l}catch(y){et(e,e.return,y)}}break;case 6:if(Xt(t,e),on(e),r&4){if(e.stateNode===null)throw Error(se(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(y){et(e,e.return,y)}}break;case 3:if(Xt(t,e),on(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Gr(t.containerInfo)}catch(y){et(e,e.return,y)}break;case 4:Xt(t,e),on(e);break;case 13:Xt(t,e),on(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(Oc=st())),r&4&&nu(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(bt=(u=bt)||f,Xt(t,e),bt=u):Xt(t,e),on(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(fe=e,f=e.child;f!==null;){for(m=fe=f;fe!==null;){switch(x=fe,b=x.child,x.tag){case 0:case 11:case 14:case 15:Ur(4,x,x.return);break;case 1:Fs(x,x.return);var w=x.stateNode;if(typeof w.componentWillUnmount=="function"){r=x,n=x.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(y){et(r,n,y)}}break;case 5:Fs(x,x.return);break;case 22:if(x.memoizedState!==null){ru(m);continue}}b!==null?(b.return=x,fe=b):ru(m)}f=f.sibling}e:for(f=null,m=e;;){if(m.tag===5){if(f===null){f=m;try{a=m.stateNode,u?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(c=m.stateNode,d=m.memoizedProps.style,o=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=fm("display",o))}catch(y){et(e,e.return,y)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=u?"":m.memoizedProps}catch(y){et(e,e.return,y)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Xt(t,e),on(e),r&4&&nu(e);break;case 21:break;default:Xt(t,e),on(e)}}function on(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(_f(n)){var r=n;break e}n=n.return}throw Error(se(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Fr(a,""),r.flags&=-33);var l=tu(e);$i(e,l,a);break;case 3:case 4:var o=r.stateNode.containerInfo,c=tu(e);Ai(e,c,o);break;default:throw Error(se(161))}}catch(d){et(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function nx(e,t,n){fe=e,Gf(e)}function Gf(e,t,n){for(var r=(e.mode&1)!==0;fe!==null;){var a=fe,l=a.child;if(a.tag===22&&r){var o=a.memoizedState!==null||Ea;if(!o){var c=a.alternate,d=c!==null&&c.memoizedState!==null||bt;c=Ea;var u=bt;if(Ea=o,(bt=d)&&!u)for(fe=a;fe!==null;)o=fe,d=o.child,o.tag===22&&o.memoizedState!==null?au(a):d!==null?(d.return=o,fe=d):au(a);for(;l!==null;)fe=l,Gf(l),l=l.sibling;fe=a,Ea=c,bt=u}su(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,fe=l):su(e)}}function su(e){for(;fe!==null;){var t=fe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:bt||$l(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!bt)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:en(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Bd(t,l,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Bd(t,o,n)}break;case 5:var c=t.stateNode;if(n===null&&t.flags&4){n=c;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&Gr(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(se(163))}bt||t.flags&512&&Li(t)}catch(x){et(t,t.return,x)}}if(t===e){fe=null;break}if(n=t.sibling,n!==null){n.return=t.return,fe=n;break}fe=t.return}}function ru(e){for(;fe!==null;){var t=fe;if(t===e){fe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,fe=n;break}fe=t.return}}function au(e){for(;fe!==null;){var t=fe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{$l(4,t)}catch(d){et(t,n,d)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(d){et(t,a,d)}}var l=t.return;try{Li(t)}catch(d){et(t,l,d)}break;case 5:var o=t.return;try{Li(t)}catch(d){et(t,o,d)}}}catch(d){et(t,t.return,d)}if(t===e){fe=null;break}var c=t.sibling;if(c!==null){c.return=t.return,fe=c;break}fe=t.return}}var sx=Math.ceil,hl=An.ReactCurrentDispatcher,Mc=An.ReactCurrentOwner,qt=An.ReactCurrentBatchConfig,Le=0,ft=null,rt=null,ht=0,It=0,_s=ns(0),dt=0,ea=null,js=0,Il=0,Dc=0,Mr=null,Pt=null,Oc=0,er=1/0,wn=null,xl=!1,Ii=null,qn=null,Pa=!1,Bn=null,gl=0,Dr=0,Ui=null,Ka=-1,Va=0;function St(){return Le&6?st():Ka!==-1?Ka:Ka=st()}function Jn(e){return e.mode&1?Le&2&&ht!==0?ht&-ht:_h.transition!==null?(Va===0&&(Va=Cm()),Va):(e=ze,e!==0||(e=window.event,e=e===void 0?16:$m(e.type)),e):1}function rn(e,t,n,r){if(50<Dr)throw Dr=0,Ui=null,Error(se(185));aa(e,n,r),(!(Le&2)||e!==ft)&&(e===ft&&(!(Le&2)&&(Il|=n),dt===4&&On(e,ht)),At(e,r),n===1&&Le===0&&!(t.mode&1)&&(er=st()+500,Rl&&ss()))}function At(e,t){var n=e.callbackNode;_0(e,t);var r=el(e,e===ft?ht:0);if(r===0)n!==null&&pd(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&pd(n),t===1)e.tag===0?Fh(lu.bind(null,e)):Zm(lu.bind(null,e)),Uh(function(){!(Le&6)&&ss()}),n=null;else{switch(Em(r)){case 1:n=dc;break;case 4:n=Sm;break;case 16:n=Xa;break;case 536870912:n=km;break;default:n=Xa}n=Yf(n,Wf.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Wf(e,t){if(Ka=-1,Va=0,Le&6)throw Error(se(327));var n=e.callbackNode;if(Ks()&&e.callbackNode!==n)return null;var r=el(e,e===ft?ht:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=yl(e,r);else{t=r;var a=Le;Le|=2;var l=Kf();(ft!==e||ht!==t)&&(wn=null,er=st()+500,xs(e,t));do try{lx();break}catch(c){Hf(e,c)}while(!0);Nc(),hl.current=l,Le=a,rt!==null?t=0:(ft=null,ht=0,t=dt)}if(t!==0){if(t===2&&(a=ii(e),a!==0&&(r=a,t=Mi(e,a))),t===1)throw n=ea,xs(e,0),On(e,r),At(e,st()),n;if(t===6)On(e,r);else{if(a=e.current.alternate,!(r&30)&&!rx(a)&&(t=yl(e,r),t===2&&(l=ii(e),l!==0&&(r=l,t=Mi(e,l))),t===1))throw n=ea,xs(e,0),On(e,r),At(e,st()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(se(345));case 2:cs(e,Pt,wn);break;case 3:if(On(e,r),(r&130023424)===r&&(t=Oc+500-st(),10<t)){if(el(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){St(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=xi(cs.bind(null,e,Pt,wn),t);break}cs(e,Pt,wn);break;case 4:if(On(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-sn(r);l=1<<o,o=t[o],o>a&&(a=o),r&=~l}if(r=a,r=st()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*sx(r/1960))-r,10<r){e.timeoutHandle=xi(cs.bind(null,e,Pt,wn),r);break}cs(e,Pt,wn);break;case 5:cs(e,Pt,wn);break;default:throw Error(se(329))}}}return At(e,st()),e.callbackNode===n?Wf.bind(null,e):null}function Mi(e,t){var n=Mr;return e.current.memoizedState.isDehydrated&&(xs(e,t).flags|=256),e=yl(e,t),e!==2&&(t=Pt,Pt=n,t!==null&&Di(t)),e}function Di(e){Pt===null?Pt=e:Pt.push.apply(Pt,e)}function rx(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],l=a.getSnapshot;a=a.value;try{if(!an(l(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function On(e,t){for(t&=~Dc,t&=~Il,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-sn(t),r=1<<n;e[n]=-1,t&=~r}}function lu(e){if(Le&6)throw Error(se(327));Ks();var t=el(e,0);if(!(t&1))return At(e,st()),null;var n=yl(e,t);if(e.tag!==0&&n===2){var r=ii(e);r!==0&&(t=r,n=Mi(e,r))}if(n===1)throw n=ea,xs(e,0),On(e,t),At(e,st()),n;if(n===6)throw Error(se(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,cs(e,Pt,wn),At(e,st()),null}function Fc(e,t){var n=Le;Le|=1;try{return e(t)}finally{Le=n,Le===0&&(er=st()+500,Rl&&ss())}}function Ns(e){Bn!==null&&Bn.tag===0&&!(Le&6)&&Ks();var t=Le;Le|=1;var n=qt.transition,r=ze;try{if(qt.transition=null,ze=1,e)return e()}finally{ze=r,qt.transition=n,Le=t,!(Le&6)&&ss()}}function _c(){It=_s.current,qe(_s)}function xs(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Ih(n)),rt!==null)for(n=rt.return;n!==null;){var r=n;switch(bc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&al();break;case 3:Zs(),qe(Rt),qe(jt),Tc();break;case 5:Pc(r);break;case 4:Zs();break;case 13:qe(Qe);break;case 19:qe(Qe);break;case 10:Sc(r.type._context);break;case 22:case 23:_c()}n=n.return}if(ft=e,rt=e=Qn(e.current,null),ht=It=t,dt=0,ea=null,Dc=Il=js=0,Pt=Mr=null,ms!==null){for(t=0;t<ms.length;t++)if(n=ms[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,l=n.pending;if(l!==null){var o=l.next;l.next=a,r.next=o}n.pending=r}ms=null}return e}function Hf(e,t){do{var n=rt;try{if(Nc(),Ga.current=pl,fl){for(var r=Ye.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}fl=!1}if(ws=0,mt=ct=Ye=null,Ir=!1,Yr=0,Mc.current=null,n===null||n.return===null){dt=1,ea=t,rt=null;break}e:{var l=e,o=n.return,c=n,d=t;if(t=ht,c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var u=d,f=c,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var x=f.alternate;x?(f.updateQueue=x.updateQueue,f.memoizedState=x.memoizedState,f.lanes=x.lanes):(f.updateQueue=null,f.memoizedState=null)}var b=Vd(o);if(b!==null){b.flags&=-257,qd(b,o,c,l,t),b.mode&1&&Kd(l,u,t),t=b,d=u;var w=t.updateQueue;if(w===null){var y=new Set;y.add(d),t.updateQueue=y}else w.add(d);break e}else{if(!(t&1)){Kd(l,u,t),Bc();break e}d=Error(se(426))}}else if(Je&&c.mode&1){var C=Vd(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),qd(C,o,c,l,t),wc(Xs(d,c));break e}}l=d=Xs(d,c),dt!==4&&(dt=2),Mr===null?Mr=[l]:Mr.push(l),l=o;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var h=Pf(l,d,t);_d(l,h);break e;case 1:c=d;var p=l.type,g=l.stateNode;if(!(l.flags&128)&&(typeof p.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(qn===null||!qn.has(g)))){l.flags|=65536,t&=-t,l.lanes|=t;var v=Tf(l,c,t);_d(l,v);break e}}l=l.return}while(l!==null)}qf(n)}catch(j){t=j,rt===n&&n!==null&&(rt=n=n.return);continue}break}while(!0)}function Kf(){var e=hl.current;return hl.current=pl,e===null?pl:e}function Bc(){(dt===0||dt===3||dt===2)&&(dt=4),ft===null||!(js&268435455)&&!(Il&268435455)||On(ft,ht)}function yl(e,t){var n=Le;Le|=2;var r=Kf();(ft!==e||ht!==t)&&(wn=null,xs(e,t));do try{ax();break}catch(a){Hf(e,a)}while(!0);if(Nc(),Le=n,hl.current=r,rt!==null)throw Error(se(261));return ft=null,ht=0,dt}function ax(){for(;rt!==null;)Vf(rt)}function lx(){for(;rt!==null&&!L0();)Vf(rt)}function Vf(e){var t=Qf(e.alternate,e,It);e.memoizedProps=e.pendingProps,t===null?qf(e):rt=t,Mc.current=null}function qf(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Xh(n,t),n!==null){n.flags&=32767,rt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{dt=6,rt=null;return}}else if(n=Zh(n,t,It),n!==null){rt=n;return}if(t=t.sibling,t!==null){rt=t;return}rt=t=e}while(t!==null);dt===0&&(dt=5)}function cs(e,t,n){var r=ze,a=qt.transition;try{qt.transition=null,ze=1,ox(e,t,n,r)}finally{qt.transition=a,ze=r}return null}function ox(e,t,n,r){do Ks();while(Bn!==null);if(Le&6)throw Error(se(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(se(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(B0(e,l),e===ft&&(rt=ft=null,ht=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Pa||(Pa=!0,Yf(Xa,function(){return Ks(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=qt.transition,qt.transition=null;var o=ze;ze=1;var c=Le;Le|=4,Mc.current=null,tx(e,n),zf(n,e),Eh(pi),tl=!!fi,pi=fi=null,e.current=n,nx(n),A0(),Le=c,ze=o,qt.transition=l}else e.current=n;if(Pa&&(Pa=!1,Bn=e,gl=a),l=e.pendingLanes,l===0&&(qn=null),U0(n.stateNode),At(e,st()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(xl)throw xl=!1,e=Ii,Ii=null,e;return gl&1&&e.tag!==0&&Ks(),l=e.pendingLanes,l&1?e===Ui?Dr++:(Dr=0,Ui=e):Dr=0,ss(),null}function Ks(){if(Bn!==null){var e=Em(gl),t=qt.transition,n=ze;try{if(qt.transition=null,ze=16>e?16:e,Bn===null)var r=!1;else{if(e=Bn,Bn=null,gl=0,Le&6)throw Error(se(331));var a=Le;for(Le|=4,fe=e.current;fe!==null;){var l=fe,o=l.child;if(fe.flags&16){var c=l.deletions;if(c!==null){for(var d=0;d<c.length;d++){var u=c[d];for(fe=u;fe!==null;){var f=fe;switch(f.tag){case 0:case 11:case 15:Ur(8,f,l)}var m=f.child;if(m!==null)m.return=f,fe=m;else for(;fe!==null;){f=fe;var x=f.sibling,b=f.return;if(Ff(f),f===u){fe=null;break}if(x!==null){x.return=b,fe=x;break}fe=b}}}var w=l.alternate;if(w!==null){var y=w.child;if(y!==null){w.child=null;do{var C=y.sibling;y.sibling=null,y=C}while(y!==null)}}fe=l}}if(l.subtreeFlags&2064&&o!==null)o.return=l,fe=o;else e:for(;fe!==null;){if(l=fe,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Ur(9,l,l.return)}var h=l.sibling;if(h!==null){h.return=l.return,fe=h;break e}fe=l.return}}var p=e.current;for(fe=p;fe!==null;){o=fe;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,fe=g;else e:for(o=p;fe!==null;){if(c=fe,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:$l(9,c)}}catch(j){et(c,c.return,j)}if(c===o){fe=null;break e}var v=c.sibling;if(v!==null){v.return=c.return,fe=v;break e}fe=c.return}}if(Le=a,ss(),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(kl,e)}catch{}r=!0}return r}finally{ze=n,qt.transition=t}}return!1}function ou(e,t,n){t=Xs(n,t),t=Pf(e,t,1),e=Vn(e,t,1),t=St(),e!==null&&(aa(e,1,t),At(e,t))}function et(e,t,n){if(e.tag===3)ou(e,e,n);else for(;t!==null;){if(t.tag===3){ou(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(qn===null||!qn.has(r))){e=Xs(n,e),e=Tf(t,e,1),t=Vn(t,e,1),e=St(),t!==null&&(aa(t,1,e),At(t,e));break}}t=t.return}}function ix(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=St(),e.pingedLanes|=e.suspendedLanes&n,ft===e&&(ht&n)===n&&(dt===4||dt===3&&(ht&130023424)===ht&&500>st()-Oc?xs(e,0):Dc|=n),At(e,t)}function Jf(e,t){t===0&&(e.mode&1?(t=ya,ya<<=1,!(ya&130023424)&&(ya=4194304)):t=1);var n=St();e=Tn(e,t),e!==null&&(aa(e,t,n),At(e,n))}function cx(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Jf(e,n)}function dx(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(se(314))}r!==null&&r.delete(t),Jf(e,n)}var Qf;Qf=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Rt.current)Tt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Tt=!1,Yh(e,t,n);Tt=!!(e.flags&131072)}else Tt=!1,Je&&t.flags&1048576&&Xm(t,il,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ha(e,t),e=t.pendingProps;var a=Js(t,jt.current);Hs(t,n),a=Lc(null,t,r,e,a,n);var l=Ac();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Lt(r)?(l=!0,ll(t)):l=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Cc(t),a.updater=Al,t.stateNode=a,a._reactInternals=t,Ni(t,r,e,n),t=Ci(null,t,r,!0,l,n)):(t.tag=0,Je&&l&&vc(t),Nt(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ha(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=mx(r),e=en(r,e),a){case 0:t=ki(null,t,r,e,n);break e;case 1:t=Yd(null,t,r,e,n);break e;case 11:t=Jd(null,t,r,e,n);break e;case 14:t=Qd(null,t,r,en(r.type,e),n);break e}throw Error(se(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:en(r,a),ki(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:en(r,a),Yd(e,t,r,a,n);case 3:e:{if($f(t),e===null)throw Error(se(387));r=t.pendingProps,l=t.memoizedState,a=l.element,af(e,t),ul(t,r,null,n);var o=t.memoizedState;if(r=o.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){a=Xs(Error(se(423)),t),t=Zd(e,t,r,n,a);break e}else if(r!==a){a=Xs(Error(se(424)),t),t=Zd(e,t,r,n,a);break e}else for(Ut=Kn(t.stateNode.containerInfo.firstChild),Mt=t,Je=!0,nn=null,n=sf(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qs(),r===a){t=Rn(e,t,n);break e}Nt(e,t,r,n)}t=t.child}return t;case 5:return lf(t),e===null&&bi(t),r=t.type,a=t.pendingProps,l=e!==null?e.memoizedProps:null,o=a.children,hi(r,a)?o=null:l!==null&&hi(r,l)&&(t.flags|=32),Af(e,t),Nt(e,t,o,n),t.child;case 6:return e===null&&bi(t),null;case 13:return If(e,t,n);case 4:return Ec(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ys(t,null,r,n):Nt(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:en(r,a),Jd(e,t,r,a,n);case 7:return Nt(e,t,t.pendingProps,n),t.child;case 8:return Nt(e,t,t.pendingProps.children,n),t.child;case 12:return Nt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,l=t.memoizedProps,o=a.value,He(cl,r._currentValue),r._currentValue=o,l!==null)if(an(l.value,o)){if(l.children===a.children&&!Rt.current){t=Rn(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var c=l.dependencies;if(c!==null){o=l.child;for(var d=c.firstContext;d!==null;){if(d.context===r){if(l.tag===1){d=kn(-1,n&-n),d.tag=2;var u=l.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?d.next=d:(d.next=f.next,f.next=d),u.pending=d}}l.lanes|=n,d=l.alternate,d!==null&&(d.lanes|=n),wi(l.return,n,t),c.lanes|=n;break}d=d.next}}else if(l.tag===10)o=l.type===t.type?null:l.child;else if(l.tag===18){if(o=l.return,o===null)throw Error(se(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),wi(o,n,t),o=l.sibling}else o=l.child;if(o!==null)o.return=l;else for(o=l;o!==null;){if(o===t){o=null;break}if(l=o.sibling,l!==null){l.return=o.return,o=l;break}o=o.return}l=o}Nt(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Hs(t,n),a=Jt(a),r=r(a),t.flags|=1,Nt(e,t,r,n),t.child;case 14:return r=t.type,a=en(r,t.pendingProps),a=en(r.type,a),Qd(e,t,r,a,n);case 15:return Rf(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:en(r,a),Ha(e,t),t.tag=1,Lt(r)?(e=!0,ll(t)):e=!1,Hs(t,n),Ef(t,r,a),Ni(t,r,a,n),Ci(null,t,r,!0,e,n);case 19:return Uf(e,t,n);case 22:return Lf(e,t,n)}throw Error(se(156,t.tag))};function Yf(e,t){return Nm(e,t)}function ux(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vt(e,t,n,r){return new ux(e,t,n,r)}function zc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function mx(e){if(typeof e=="function")return zc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===oc)return 11;if(e===ic)return 14}return 2}function Qn(e,t){var n=e.alternate;return n===null?(n=Vt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function qa(e,t,n,r,a,l){var o=2;if(r=e,typeof e=="function")zc(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Rs:return gs(n.children,a,l,t);case lc:o=8,a|=8;break;case Vo:return e=Vt(12,n,t,a|2),e.elementType=Vo,e.lanes=l,e;case qo:return e=Vt(13,n,t,a),e.elementType=qo,e.lanes=l,e;case Jo:return e=Vt(19,n,t,a),e.elementType=Jo,e.lanes=l,e;case lm:return Ul(n,a,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case rm:o=10;break e;case am:o=9;break e;case oc:o=11;break e;case ic:o=14;break e;case Un:o=16,r=null;break e}throw Error(se(130,e==null?e:typeof e,""))}return t=Vt(o,n,t,a),t.elementType=e,t.type=r,t.lanes=l,t}function gs(e,t,n,r){return e=Vt(7,e,r,t),e.lanes=n,e}function Ul(e,t,n,r){return e=Vt(22,e,r,t),e.elementType=lm,e.lanes=n,e.stateNode={isHidden:!1},e}function No(e,t,n){return e=Vt(6,e,null,t),e.lanes=n,e}function So(e,t,n){return t=Vt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function fx(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=so(0),this.expirationTimes=so(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=so(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Gc(e,t,n,r,a,l,o,c,d){return e=new fx(e,t,n,c,d),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Vt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cc(l),e}function px(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ts,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Zf(e){if(!e)return Xn;e=e._reactInternals;e:{if(ks(e)!==e||e.tag!==1)throw Error(se(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Lt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(se(171))}if(e.tag===1){var n=e.type;if(Lt(n))return Ym(e,n,t)}return t}function Xf(e,t,n,r,a,l,o,c,d){return e=Gc(n,r,!0,e,a,l,o,c,d),e.context=Zf(null),n=e.current,r=St(),a=Jn(n),l=kn(r,a),l.callback=t??null,Vn(n,l,a),e.current.lanes=a,aa(e,a,r),At(e,r),e}function Ml(e,t,n,r){var a=t.current,l=St(),o=Jn(a);return n=Zf(n),t.context===null?t.context=n:t.pendingContext=n,t=kn(l,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Vn(a,t,o),e!==null&&(rn(e,a,o,l),za(e,a,o)),o}function vl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function iu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Wc(e,t){iu(e,t),(e=e.alternate)&&iu(e,t)}function hx(){return null}var ep=typeof reportError=="function"?reportError:function(e){console.error(e)};function Hc(e){this._internalRoot=e}Dl.prototype.render=Hc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(se(409));Ml(e,t,null,null)};Dl.prototype.unmount=Hc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ns(function(){Ml(null,e,null,null)}),t[Pn]=null}};function Dl(e){this._internalRoot=e}Dl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Rm();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dn.length&&t!==0&&t<Dn[n].priority;n++);Dn.splice(n,0,e),n===0&&Am(e)}};function Kc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ol(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function cu(){}function xx(e,t,n,r,a){if(a){if(typeof r=="function"){var l=r;r=function(){var u=vl(o);l.call(u)}}var o=Xf(t,r,e,0,null,!1,!1,"",cu);return e._reactRootContainer=o,e[Pn]=o.current,Kr(e.nodeType===8?e.parentNode:e),Ns(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var c=r;r=function(){var u=vl(d);c.call(u)}}var d=Gc(e,0,!1,null,null,!1,!1,"",cu);return e._reactRootContainer=d,e[Pn]=d.current,Kr(e.nodeType===8?e.parentNode:e),Ns(function(){Ml(t,d,n,r)}),d}function Fl(e,t,n,r,a){var l=n._reactRootContainer;if(l){var o=l;if(typeof a=="function"){var c=a;a=function(){var d=vl(o);c.call(d)}}Ml(t,o,e,a)}else o=xx(n,t,e,a,r);return vl(o)}Pm=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=kr(t.pendingLanes);n!==0&&(uc(t,n|1),At(t,st()),!(Le&6)&&(er=st()+500,ss()))}break;case 13:Ns(function(){var r=Tn(e,1);if(r!==null){var a=St();rn(r,e,1,a)}}),Wc(e,1)}};mc=function(e){if(e.tag===13){var t=Tn(e,134217728);if(t!==null){var n=St();rn(t,e,134217728,n)}Wc(e,134217728)}};Tm=function(e){if(e.tag===13){var t=Jn(e),n=Tn(e,t);if(n!==null){var r=St();rn(n,e,t,r)}Wc(e,t)}};Rm=function(){return ze};Lm=function(e,t){var n=ze;try{return ze=e,t()}finally{ze=n}};ai=function(e,t,n){switch(t){case"input":if(Zo(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=Tl(r);if(!a)throw Error(se(90));im(r),Zo(r,a)}}}break;case"textarea":dm(e,n);break;case"select":t=n.value,t!=null&&Bs(e,!!n.multiple,t,!1)}};gm=Fc;ym=Ns;var gx={usingClientEntryPoint:!1,Events:[oa,Is,Tl,hm,xm,Fc]},yr={findFiberByHostInstance:us,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yx={bundleType:yr.bundleType,version:yr.version,rendererPackageName:yr.rendererPackageName,rendererConfig:yr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:An.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=wm(e),e===null?null:e.stateNode},findFiberByHostInstance:yr.findFiberByHostInstance||hx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ta=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ta.isDisabled&&Ta.supportsFiber)try{kl=Ta.inject(yx),mn=Ta}catch{}}Ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gx;Ot.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kc(t))throw Error(se(200));return px(e,t,null,n)};Ot.createRoot=function(e,t){if(!Kc(e))throw Error(se(299));var n=!1,r="",a=ep;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Gc(e,1,!1,null,null,n,!1,r,a),e[Pn]=t.current,Kr(e.nodeType===8?e.parentNode:e),new Hc(t)};Ot.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(se(188)):(e=Object.keys(e).join(","),Error(se(268,e)));return e=wm(t),e=e===null?null:e.stateNode,e};Ot.flushSync=function(e){return Ns(e)};Ot.hydrate=function(e,t,n){if(!Ol(t))throw Error(se(200));return Fl(null,e,t,!0,n)};Ot.hydrateRoot=function(e,t,n){if(!Kc(e))throw Error(se(405));var r=n!=null&&n.hydratedSources||null,a=!1,l="",o=ep;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Xf(t,null,e,1,n??null,a,!1,l,o),e[Pn]=t.current,Kr(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Dl(t)};Ot.render=function(e,t,n){if(!Ol(t))throw Error(se(200));return Fl(null,e,t,!1,n)};Ot.unmountComponentAtNode=function(e){if(!Ol(e))throw Error(se(40));return e._reactRootContainer?(Ns(function(){Fl(null,null,e,!1,function(){e._reactRootContainer=null,e[Pn]=null})}),!0):!1};Ot.unstable_batchedUpdates=Fc;Ot.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ol(n))throw Error(se(200));if(e==null||e._reactInternals===void 0)throw Error(se(38));return Fl(e,t,n,!1,r)};Ot.version="18.3.1-next-f1338f8080-20240426";function tp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tp)}catch(e){console.error(e)}}tp(),em.exports=Ot;var np=em.exports,du=np;Ho.createRoot=du.createRoot,Ho.hydrateRoot=du.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ta(){return ta=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ta.apply(this,arguments)}var zn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(zn||(zn={}));const uu="popstate";function vx(e){e===void 0&&(e={});function t(r,a){let{pathname:l,search:o,hash:c}=r.location;return Oi("",{pathname:l,search:o,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:bl(a)}return wx(t,n,null,e)}function tt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Vc(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function bx(){return Math.random().toString(36).substr(2,8)}function mu(e,t){return{usr:e.state,key:e.key,idx:t}}function Oi(e,t,n,r){return n===void 0&&(n=null),ta({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?lr(t):t,{state:n,key:t&&t.key||r||bx()})}function bl(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function lr(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function wx(e,t,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:l=!1}=r,o=a.history,c=zn.Pop,d=null,u=f();u==null&&(u=0,o.replaceState(ta({},o.state,{idx:u}),""));function f(){return(o.state||{idx:null}).idx}function m(){c=zn.Pop;let C=f(),h=C==null?null:C-u;u=C,d&&d({action:c,location:y.location,delta:h})}function x(C,h){c=zn.Push;let p=Oi(y.location,C,h);u=f()+1;let g=mu(p,u),v=y.createHref(p);try{o.pushState(g,"",v)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;a.location.assign(v)}l&&d&&d({action:c,location:y.location,delta:1})}function b(C,h){c=zn.Replace;let p=Oi(y.location,C,h);u=f();let g=mu(p,u),v=y.createHref(p);o.replaceState(g,"",v),l&&d&&d({action:c,location:y.location,delta:0})}function w(C){let h=a.location.origin!=="null"?a.location.origin:a.location.href,p=typeof C=="string"?C:bl(C);return p=p.replace(/ $/,"%20"),tt(h,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,h)}let y={get action(){return c},get location(){return e(a,o)},listen(C){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(uu,m),d=C,()=>{a.removeEventListener(uu,m),d=null}},createHref(C){return t(a,C)},createURL:w,encodeLocation(C){let h=w(C);return{pathname:h.pathname,search:h.search,hash:h.hash}},push:x,replace:b,go(C){return o.go(C)}};return y}var fu;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(fu||(fu={}));function jx(e,t,n){return n===void 0&&(n="/"),Nx(e,t,n)}function Nx(e,t,n,r){let a=typeof t=="string"?lr(t):t,l=tr(a.pathname||"/",n);if(l==null)return null;let o=sp(e);Sx(o);let c=null;for(let d=0;c==null&&d<o.length;++d){let u=Ux(l);c=$x(o[d],u)}return c}function sp(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(l,o,c)=>{let d={relativePath:c===void 0?l.path||"":c,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};d.relativePath.startsWith("/")&&(tt(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let u=Yn([r,d.relativePath]),f=n.concat(d);l.children&&l.children.length>0&&(tt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),sp(l.children,t,f,u)),!(l.path==null&&!l.index)&&t.push({path:u,score:Lx(u,l.index),routesMeta:f})};return e.forEach((l,o)=>{var c;if(l.path===""||!((c=l.path)!=null&&c.includes("?")))a(l,o);else for(let d of rp(l.path))a(l,o,d)}),t}function rp(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,a=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let o=rp(r.join("/")),c=[];return c.push(...o.map(d=>d===""?l:[l,d].join("/"))),a&&c.push(...o),c.map(d=>e.startsWith("/")&&d===""?"/":d)}function Sx(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Ax(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const kx=/^:[\w-]+$/,Cx=3,Ex=2,Px=1,Tx=10,Rx=-2,pu=e=>e==="*";function Lx(e,t){let n=e.split("/"),r=n.length;return n.some(pu)&&(r+=Rx),t&&(r+=Ex),n.filter(a=>!pu(a)).reduce((a,l)=>a+(kx.test(l)?Cx:l===""?Px:Tx),r)}function Ax(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function $x(e,t,n){let{routesMeta:r}=e,a={},l="/",o=[];for(let c=0;c<r.length;++c){let d=r[c],u=c===r.length-1,f=l==="/"?t:t.slice(l.length)||"/",m=Fi({path:d.relativePath,caseSensitive:d.caseSensitive,end:u},f),x=d.route;if(!m)return null;Object.assign(a,m.params),o.push({params:a,pathname:Yn([l,m.pathname]),pathnameBase:_x(Yn([l,m.pathnameBase])),route:x}),m.pathnameBase!=="/"&&(l=Yn([l,m.pathnameBase]))}return o}function Fi(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Ix(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let l=a[0],o=l.replace(/(.)\/+$/,"$1"),c=a.slice(1);return{params:r.reduce((u,f,m)=>{let{paramName:x,isOptional:b}=f;if(x==="*"){let y=c[m]||"";o=l.slice(0,l.length-y.length).replace(/(.)\/+$/,"$1")}const w=c[m];return b&&!w?u[x]=void 0:u[x]=(w||"").replace(/%2F/g,"/"),u},{}),pathname:l,pathnameBase:o,pattern:e}}function Ix(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Vc(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,d)=>(r.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function Ux(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Vc(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function tr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const Mx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Dx=e=>Mx.test(e);function Ox(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?lr(e):e,l;if(n)if(Dx(n))l=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Vc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?l=hu(n.substring(1),"/"):l=hu(n,t)}else l=t;return{pathname:l,search:Bx(r),hash:zx(a)}}function hu(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function ko(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Fx(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function ap(e,t){let n=Fx(e);return t?n.map((r,a)=>a===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function lp(e,t,n,r){r===void 0&&(r=!1);let a;typeof e=="string"?a=lr(e):(a=ta({},e),tt(!a.pathname||!a.pathname.includes("?"),ko("?","pathname","search",a)),tt(!a.pathname||!a.pathname.includes("#"),ko("#","pathname","hash",a)),tt(!a.search||!a.search.includes("#"),ko("#","search","hash",a)));let l=e===""||a.pathname==="",o=l?"/":a.pathname,c;if(o==null)c=n;else{let m=t.length-1;if(!r&&o.startsWith("..")){let x=o.split("/");for(;x[0]==="..";)x.shift(),m-=1;a.pathname=x.join("/")}c=m>=0?t[m]:"/"}let d=Ox(a,c),u=o&&o!=="/"&&o.endsWith("/"),f=(l||o===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(u||f)&&(d.pathname+="/"),d}const Yn=e=>e.join("/").replace(/\/\/+/g,"/"),_x=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Bx=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,zx=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Gx(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const op=["post","put","patch","delete"];new Set(op);const Wx=["get",...op];new Set(Wx);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function na(){return na=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},na.apply(this,arguments)}const _l=i.createContext(null),ip=i.createContext(null),rs=i.createContext(null),Bl=i.createContext(null),as=i.createContext({outlet:null,matches:[],isDataRoute:!1}),cp=i.createContext(null);function Hx(e,t){let{relative:n}=t===void 0?{}:t;ca()||tt(!1);let{basename:r,navigator:a}=i.useContext(rs),{hash:l,pathname:o,search:c}=zl(e,{relative:n}),d=o;return r!=="/"&&(d=o==="/"?r:Yn([r,o])),a.createHref({pathname:d,search:c,hash:l})}function ca(){return i.useContext(Bl)!=null}function or(){return ca()||tt(!1),i.useContext(Bl).location}function dp(e){i.useContext(rs).static||i.useLayoutEffect(e)}function _t(){let{isDataRoute:e}=i.useContext(as);return e?rg():Kx()}function Kx(){ca()||tt(!1);let e=i.useContext(_l),{basename:t,future:n,navigator:r}=i.useContext(rs),{matches:a}=i.useContext(as),{pathname:l}=or(),o=JSON.stringify(ap(a,n.v7_relativeSplatPath)),c=i.useRef(!1);return dp(()=>{c.current=!0}),i.useCallback(function(u,f){if(f===void 0&&(f={}),!c.current)return;if(typeof u=="number"){r.go(u);return}let m=lp(u,JSON.parse(o),l,f.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Yn([t,m.pathname])),(f.replace?r.replace:r.push)(m,f.state,f)},[t,r,o,l,e])}function ir(){let{matches:e}=i.useContext(as),t=e[e.length-1];return t?t.params:{}}function zl(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=i.useContext(rs),{matches:a}=i.useContext(as),{pathname:l}=or(),o=JSON.stringify(ap(a,r.v7_relativeSplatPath));return i.useMemo(()=>lp(e,JSON.parse(o),l,n==="path"),[e,o,l,n])}function Vx(e,t){return qx(e,t)}function qx(e,t,n,r){ca()||tt(!1);let{navigator:a}=i.useContext(rs),{matches:l}=i.useContext(as),o=l[l.length-1],c=o?o.params:{};o&&o.pathname;let d=o?o.pathnameBase:"/";o&&o.route;let u=or(),f;if(t){var m;let C=typeof t=="string"?lr(t):t;d==="/"||(m=C.pathname)!=null&&m.startsWith(d)||tt(!1),f=C}else f=u;let x=f.pathname||"/",b=x;if(d!=="/"){let C=d.replace(/^\//,"").split("/");b="/"+x.replace(/^\//,"").split("/").slice(C.length).join("/")}let w=jx(e,{pathname:b}),y=Xx(w&&w.map(C=>Object.assign({},C,{params:Object.assign({},c,C.params),pathname:Yn([d,a.encodeLocation?a.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?d:Yn([d,a.encodeLocation?a.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),l,n,r);return t&&y?i.createElement(Bl.Provider,{value:{location:na({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:zn.Pop}},y):y}function Jx(){let e=sg(),t=Gx(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:a},n):null,null)}const Qx=i.createElement(Jx,null);class Yx extends i.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?i.createElement(as.Provider,{value:this.props.routeContext},i.createElement(cp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Zx(e){let{routeContext:t,match:n,children:r}=e,a=i.useContext(_l);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(as.Provider,{value:t},r)}function Xx(e,t,n,r){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var l;if(!n)return null;if(n.errors)e=n.matches;else if((l=r)!=null&&l.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,c=(a=n)==null?void 0:a.errors;if(c!=null){let f=o.findIndex(m=>m.route.id&&(c==null?void 0:c[m.route.id])!==void 0);f>=0||tt(!1),o=o.slice(0,Math.min(o.length,f+1))}let d=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let m=o[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(u=f),m.route.id){let{loaderData:x,errors:b}=n,w=m.route.loader&&x[m.route.id]===void 0&&(!b||b[m.route.id]===void 0);if(m.route.lazy||w){d=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((f,m,x)=>{let b,w=!1,y=null,C=null;n&&(b=c&&m.route.id?c[m.route.id]:void 0,y=m.route.errorElement||Qx,d&&(u<0&&x===0?(ag("route-fallback"),w=!0,C=null):u===x&&(w=!0,C=m.route.hydrateFallbackElement||null)));let h=t.concat(o.slice(0,x+1)),p=()=>{let g;return b?g=y:w?g=C:m.route.Component?g=i.createElement(m.route.Component,null):m.route.element?g=m.route.element:g=f,i.createElement(Zx,{match:m,routeContext:{outlet:f,matches:h,isDataRoute:n!=null},children:g})};return n&&(m.route.ErrorBoundary||m.route.errorElement||x===0)?i.createElement(Yx,{location:n.location,revalidation:n.revalidation,component:y,error:b,children:p(),routeContext:{outlet:null,matches:h,isDataRoute:!0}}):p()},null)}var up=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(up||{}),mp=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(mp||{});function eg(e){let t=i.useContext(_l);return t||tt(!1),t}function tg(e){let t=i.useContext(ip);return t||tt(!1),t}function ng(e){let t=i.useContext(as);return t||tt(!1),t}function fp(e){let t=ng(),n=t.matches[t.matches.length-1];return n.route.id||tt(!1),n.route.id}function sg(){var e;let t=i.useContext(cp),n=tg(),r=fp();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function rg(){let{router:e}=eg(up.UseNavigateStable),t=fp(mp.UseNavigateStable),n=i.useRef(!1);return dp(()=>{n.current=!0}),i.useCallback(function(a,l){l===void 0&&(l={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,na({fromRouteId:t},l)))},[e,t])}const xu={};function ag(e,t,n){xu[e]||(xu[e]=!0)}function lg(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function De(e){tt(!1)}function og(e){let{basename:t="/",children:n=null,location:r,navigationType:a=zn.Pop,navigator:l,static:o=!1,future:c}=e;ca()&&tt(!1);let d=t.replace(/^\/*/,"/"),u=i.useMemo(()=>({basename:d,navigator:l,static:o,future:na({v7_relativeSplatPath:!1},c)}),[d,c,l,o]);typeof r=="string"&&(r=lr(r));let{pathname:f="/",search:m="",hash:x="",state:b=null,key:w="default"}=r,y=i.useMemo(()=>{let C=tr(f,d);return C==null?null:{location:{pathname:C,search:m,hash:x,state:b,key:w},navigationType:a}},[d,f,m,x,b,w,a]);return y==null?null:i.createElement(rs.Provider,{value:u},i.createElement(Bl.Provider,{children:n,value:y}))}function ig(e){let{children:t,location:n}=e;return Vx(_i(t),n)}new Promise(()=>{});function _i(e,t){t===void 0&&(t=[]);let n=[];return i.Children.forEach(e,(r,a)=>{if(!i.isValidElement(r))return;let l=[...t,a];if(r.type===i.Fragment){n.push.apply(n,_i(r.props.children,l));return}r.type!==De&&tt(!1),!r.props.index||!r.props.children||tt(!1);let o={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=_i(r.props.children,l)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wl(){return wl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wl.apply(this,arguments)}function pp(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,l;for(l=0;l<r.length;l++)a=r[l],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function cg(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function dg(e,t){return e.button===0&&(!t||t==="_self")&&!cg(e)}function Bi(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(a=>[n,a]):[[n,r]])},[]))}function ug(e,t){let n=Bi(e);return t&&t.forEach((r,a)=>{n.has(a)||t.getAll(a).forEach(l=>{n.append(a,l)})}),n}const mg=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],fg=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],pg="6";try{window.__reactRouterVersion=pg}catch{}const hg=i.createContext({isTransitioning:!1}),xg="startTransition",gu=Vs[xg];function gg(e){let{basename:t,children:n,future:r,window:a}=e,l=i.useRef();l.current==null&&(l.current=vx({window:a,v5Compat:!0}));let o=l.current,[c,d]=i.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},f=i.useCallback(m=>{u&&gu?gu(()=>d(m)):d(m)},[d,u]);return i.useLayoutEffect(()=>o.listen(f),[o,f]),i.useEffect(()=>lg(r),[r]),i.createElement(og,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:o,future:r})}const yg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",vg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ie=i.forwardRef(function(t,n){let{onClick:r,relative:a,reloadDocument:l,replace:o,state:c,target:d,to:u,preventScrollReset:f,viewTransition:m}=t,x=pp(t,mg),{basename:b}=i.useContext(rs),w,y=!1;if(typeof u=="string"&&vg.test(u)&&(w=u,yg))try{let g=new URL(window.location.href),v=u.startsWith("//")?new URL(g.protocol+u):new URL(u),j=tr(v.pathname,b);v.origin===g.origin&&j!=null?u=j+v.search+v.hash:y=!0}catch{}let C=Hx(u,{relative:a}),h=wg(u,{replace:o,state:c,target:d,preventScrollReset:f,relative:a,viewTransition:m});function p(g){r&&r(g),g.defaultPrevented||h(g)}return i.createElement("a",wl({},x,{href:w||C,onClick:y||l?r:p,ref:n,target:d}))}),zt=i.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:a=!1,className:l="",end:o=!1,style:c,to:d,viewTransition:u,children:f}=t,m=pp(t,fg),x=zl(d,{relative:m.relative}),b=or(),w=i.useContext(ip),{navigator:y,basename:C}=i.useContext(rs),h=w!=null&&jg(x)&&u===!0,p=y.encodeLocation?y.encodeLocation(x).pathname:x.pathname,g=b.pathname,v=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;a||(g=g.toLowerCase(),v=v?v.toLowerCase():null,p=p.toLowerCase()),v&&C&&(v=tr(v,C)||v);const j=p!=="/"&&p.endsWith("/")?p.length-1:p.length;let E=g===p||!o&&g.startsWith(p)&&g.charAt(j)==="/",$=v!=null&&(v===p||!o&&v.startsWith(p)&&v.charAt(p.length)==="/"),R={isActive:E,isPending:$,isTransitioning:h},H=E?r:void 0,O;typeof l=="function"?O=l(R):O=[l,E?"active":null,$?"pending":null,h?"transitioning":null].filter(Boolean).join(" ");let q=typeof c=="function"?c(R):c;return i.createElement(ie,wl({},m,{"aria-current":H,className:O,ref:n,style:q,to:d,viewTransition:u}),typeof f=="function"?f(R):f)});var zi;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(zi||(zi={}));var yu;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(yu||(yu={}));function bg(e){let t=i.useContext(_l);return t||tt(!1),t}function wg(e,t){let{target:n,replace:r,state:a,preventScrollReset:l,relative:o,viewTransition:c}=t===void 0?{}:t,d=_t(),u=or(),f=zl(e,{relative:o});return i.useCallback(m=>{if(dg(m,n)){m.preventDefault();let x=r!==void 0?r:bl(u)===bl(f);d(e,{replace:x,state:a,preventScrollReset:l,relative:o,viewTransition:c})}},[u,d,f,r,a,n,e,l,o,c])}function Yt(e){let t=i.useRef(Bi(e)),n=i.useRef(!1),r=or(),a=i.useMemo(()=>ug(r.search,n.current?null:t.current),[r.search]),l=_t(),o=i.useCallback((c,d)=>{const u=Bi(typeof c=="function"?c(a):c);n.current=!0,l("?"+u,d)},[l,a]);return[a,o]}function jg(e,t){t===void 0&&(t={});let n=i.useContext(hg);n==null&&tt(!1);let{basename:r}=bg(zi.useViewTransitionState),a=zl(e,{relative:t.relative});if(!n.isTransitioning)return!1;let l=tr(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=tr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Fi(a.pathname,o)!=null||Fi(a.pathname,l)!=null}function Ng({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const Ge=i.forwardRef(Ng);function Sg({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const qc=i.forwardRef(Sg);function kg({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"}))}const Cg=i.forwardRef(kg);function Eg({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const Pg=i.forwardRef(Eg);function Tg({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const Gt=i.forwardRef(Tg);function Rg({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const Wt=i.forwardRef(Rg);function Lg({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.057 1.123-.08M15.75 18H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08M15.75 18.75v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5A3.375 3.375 0 0 0 6.375 7.5H5.25m11.9-3.664A2.251 2.251 0 0 0 15 2.25h-1.5a2.251 2.251 0 0 0-2.15 1.586m5.8 0c.065.21.1.433.1.664v.75h-6V4.5c0-.231.035-.454.1-.664M6.75 7.5H4.875c-.621 0-1.125.504-1.125 1.125v12c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V16.5a9 9 0 0 0-9-9Z"}))}const Jc=i.forwardRef(Lg);function Ag({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const $g=i.forwardRef(Ag);function Ig({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Ug=i.forwardRef(Ig);function Mg({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"}))}const Dg=i.forwardRef(Mg);function Og({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"}))}const Qc=i.forwardRef(Og);function Fg({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))}const da=i.forwardRef(Fg);function _g({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const Bg=i.forwardRef(_g);function zg({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))}const Gg=i.forwardRef(zg);function Wg({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const Hg=i.forwardRef(Wg);function Kg({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-3.044 0"}))}const Vg=i.forwardRef(Kg);function qg({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const Jg=i.forwardRef(qg);function Qg({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const Yg=i.forwardRef(Qg);function Zg({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const Gl=i.forwardRef(Zg);var Xg=Object.defineProperty,ey=(e,t,n)=>t in e?Xg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Co=(e,t,n)=>(ey(e,typeof t!="symbol"?t+"":t,n),n);let ty=class{constructor(){Co(this,"current",this.detect()),Co(this,"handoffState","pending"),Co(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Cn=new ty,Ln=(e,t)=>{Cn.isServer?i.useEffect(e,t):i.useLayoutEffect(e,t)};function Wl(e){let t=i.useRef(e);return Ln(()=>{t.current=e},[e]),t}let wt=function(e){let t=Wl(e);return Re.useCallback((...n)=>t.current(...n),[t])};function Hl(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Kl(){let e=[],t={addEventListener(n,r,a,l){return n.addEventListener(r,a,l),t.add(()=>n.removeEventListener(r,a,l))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return Hl(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,a){let l=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:a}),this.add(()=>{Object.assign(n.style,{[r]:l})})},group(n){let r=Kl();return n(r),this.add(()=>r.dispose())},add(n){return e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let a of e.splice(r,1))a()}},dispose(){for(let n of e.splice(0))n()}};return t}function ny(){let[e]=i.useState(Kl);return i.useEffect(()=>()=>e.dispose(),[e]),e}function sy(){let e=typeof document>"u";return"useSyncExternalStore"in Vs?(t=>t.useSyncExternalStore)(Vs)(()=>()=>{},()=>!1,()=>!e):!1}function Vl(){let e=sy(),[t,n]=i.useState(Cn.isHandoffComplete);return t&&Cn.isHandoffComplete===!1&&n(!1),i.useEffect(()=>{t!==!0&&n(!0)},[t]),i.useEffect(()=>Cn.handoff(),[]),e?!1:t}var vu;let cr=(vu=Re.useId)!=null?vu:function(){let e=Vl(),[t,n]=Re.useState(e?()=>Cn.nextId():null);return Ln(()=>{t===null&&n(Cn.nextId())},[t]),t!=null?""+t:void 0};function es(e,t,...n){if(e in t){let a=t[e];return typeof a=="function"?a(...n):a}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(a=>`"${a}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,es),r}function hp(e){return Cn.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}let Gi=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var ds=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(ds||{}),xp=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(xp||{}),ry=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(ry||{});function ay(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Gi)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var gp=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(gp||{});function ly(e,t=0){var n;return e===((n=hp(e))==null?void 0:n.body)?!1:es(t,{0(){return e.matches(Gi)},1(){let r=e;for(;r!==null;){if(r.matches(Gi))return!0;r=r.parentElement}return!1}})}var oy=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(oy||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function ys(e){e==null||e.focus({preventScroll:!0})}let iy=["textarea","input"].join(",");function cy(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,iy))!=null?n:!1}function dy(e,t=n=>n){return e.slice().sort((n,r)=>{let a=t(n),l=t(r);if(a===null||l===null)return 0;let o=a.compareDocumentPosition(l);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Ja(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:a=[]}={}){let l=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,o=Array.isArray(e)?n?dy(e):e:ay(e);a.length>0&&o.length>1&&(o=o.filter(b=>!a.includes(b))),r=r??l.activeElement;let c=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,o.indexOf(r))-1;if(t&4)return Math.max(0,o.indexOf(r))+1;if(t&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=t&32?{preventScroll:!0}:{},f=0,m=o.length,x;do{if(f>=m||f+m<=0)return 0;let b=d+f;if(t&16)b=(b+m)%m;else{if(b<0)return 3;if(b>=m)return 1}x=o[b],x==null||x.focus(u),f+=c}while(x!==l.activeElement);return t&6&&cy(x)&&x.select(),2}function yp(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function uy(){return/Android/gi.test(window.navigator.userAgent)}function my(){return yp()||uy()}function Ra(e,t,n){let r=Wl(t);i.useEffect(()=>{function a(l){r.current(l)}return document.addEventListener(e,a,n),()=>document.removeEventListener(e,a,n)},[e,n])}function vp(e,t,n){let r=Wl(t);i.useEffect(()=>{function a(l){r.current(l)}return window.addEventListener(e,a,n),()=>window.removeEventListener(e,a,n)},[e,n])}function fy(e,t,n=!0){let r=i.useRef(!1);i.useEffect(()=>{requestAnimationFrame(()=>{r.current=n})},[n]);function a(o,c){if(!r.current||o.defaultPrevented)return;let d=c(o);if(d===null||!d.getRootNode().contains(d)||!d.isConnected)return;let u=function f(m){return typeof m=="function"?f(m()):Array.isArray(m)||m instanceof Set?m:[m]}(e);for(let f of u){if(f===null)continue;let m=f instanceof HTMLElement?f:f.current;if(m!=null&&m.contains(d)||o.composed&&o.composedPath().includes(m))return}return!ly(d,gp.Loose)&&d.tabIndex!==-1&&o.preventDefault(),t(o,d)}let l=i.useRef(null);Ra("pointerdown",o=>{var c,d;r.current&&(l.current=((d=(c=o.composedPath)==null?void 0:c.call(o))==null?void 0:d[0])||o.target)},!0),Ra("mousedown",o=>{var c,d;r.current&&(l.current=((d=(c=o.composedPath)==null?void 0:c.call(o))==null?void 0:d[0])||o.target)},!0),Ra("click",o=>{my()||l.current&&(a(o,()=>l.current),l.current=null)},!0),Ra("touchend",o=>a(o,()=>o.target instanceof HTMLElement?o.target:null),!0),vp("blur",o=>a(o,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function ua(...e){return i.useMemo(()=>hp(...e),[...e])}let bp=Symbol();function py(e,t=!0){return Object.assign(e,{[bp]:t})}function $n(...e){let t=i.useRef(e);i.useEffect(()=>{t.current=e},[e]);let n=wt(r=>{for(let a of t.current)a!=null&&(typeof a=="function"?a(r):a.current=r)});return e.every(r=>r==null||(r==null?void 0:r[bp]))?void 0:n}function Yc(e,t){let n=i.useRef([]),r=wt(e);i.useEffect(()=>{let a=[...n.current];for(let[l,o]of t.entries())if(n.current[l]!==o){let c=r(t,a);return n.current=t,c}},[r,...t])}function bu(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}var Wi=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Wi||{}),hy=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(hy||{});function hn({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:a,visible:l=!0,name:o,mergeRefs:c}){c=c??xy;let d=wp(t,e);if(l)return La(d,n,r,o,c);let u=a??0;if(u&2){let{static:f=!1,...m}=d;if(f)return La(m,n,r,o,c)}if(u&1){let{unmount:f=!0,...m}=d;return es(f?0:1,{0(){return null},1(){return La({...m,hidden:!0,style:{display:"none"}},n,r,o,c)}})}return La(d,n,r,o,c)}function La(e,t={},n,r,a){let{as:l=n,children:o,refName:c="ref",...d}=Eo(e,["unmount","static"]),u=e.ref!==void 0?{[c]:e.ref}:{},f=typeof o=="function"?o(t):o;"className"in d&&d.className&&typeof d.className=="function"&&(d.className=d.className(t));let m={};if(t){let x=!1,b=[];for(let[w,y]of Object.entries(t))typeof y=="boolean"&&(x=!0),y===!0&&b.push(w);x&&(m["data-headlessui-state"]=b.join(" "))}if(l===i.Fragment&&Object.keys(wu(d)).length>0){if(!i.isValidElement(f)||Array.isArray(f)&&f.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(d).map(y=>`  - ${y}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(y=>`  - ${y}`).join(`
`)].join(`
`));let x=f.props,b=typeof(x==null?void 0:x.className)=="function"?(...y)=>bu(x==null?void 0:x.className(...y),d.className):bu(x==null?void 0:x.className,d.className),w=b?{className:b}:{};return i.cloneElement(f,Object.assign({},wp(f.props,wu(Eo(d,["ref"]))),m,u,{ref:a(f.ref,u.ref)},w))}return i.createElement(l,Object.assign({},Eo(d,["ref"]),l!==i.Fragment&&u,l!==i.Fragment&&m),f)}function xy(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function wp(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let a in r)a.startsWith("on")&&typeof r[a]=="function"?(n[a]!=null||(n[a]=[]),n[a].push(r[a])):t[a]=r[a];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(n).map(r=>[r,void 0])));for(let r in n)Object.assign(t,{[r](a,...l){let o=n[r];for(let c of o){if((a instanceof Event||(a==null?void 0:a.nativeEvent)instanceof Event)&&a.defaultPrevented)return;c(a,...l)}}});return t}function xn(e){var t;return Object.assign(i.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function wu(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function Eo(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}let gy="div";var jl=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(jl||{});function yy(e,t){var n;let{features:r=1,...a}=e,l={ref:t,"aria-hidden":(r&2)===2?!0:(n=a["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return hn({ourProps:l,theirProps:a,slot:{},defaultTag:gy,name:"Hidden"})}let Hi=xn(yy),jp=i.createContext(null);jp.displayName="OpenClosedContext";var Er=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Er||{});function vy(){return i.useContext(jp)}function by(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Fn=[];by(()=>{function e(t){t.target instanceof HTMLElement&&t.target!==document.body&&Fn[0]!==t.target&&(Fn.unshift(t.target),Fn=Fn.filter(n=>n!=null&&n.isConnected),Fn.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function wy(e){let t=e.parentElement,n=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(n=t),t=t.parentElement;let r=(t==null?void 0:t.getAttribute("disabled"))==="";return r&&jy(n)?!1:r}function jy(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}var Np=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(Np||{});function Sp(e,t,n,r){let a=Wl(n);i.useEffect(()=>{e=e??window;function l(o){a.current(o)}return e.addEventListener(t,l,r),()=>e.removeEventListener(t,l,r)},[e,t,r])}function kp(){let e=i.useRef(!1);return Ln(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function Cp(e){let t=wt(e),n=i.useRef(!1);i.useEffect(()=>(n.current=!1,()=>{n.current=!0,Hl(()=>{n.current&&t()})}),[t])}var Pr=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Pr||{});function Ny(){let e=i.useRef(0);return vp("keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function Ep(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)n.current instanceof HTMLElement&&t.add(n.current);return t}let Sy="div";var Pp=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(Pp||{});function ky(e,t){let n=i.useRef(null),r=$n(n,t),{initialFocus:a,containers:l,features:o=30,...c}=e;Vl()||(o=1);let d=ua(n);Py({ownerDocument:d},!!(o&16));let u=Ty({ownerDocument:d,container:n,initialFocus:a},!!(o&2));Ry({ownerDocument:d,container:n,containers:l,previousActiveElement:u},!!(o&8));let f=Ny(),m=wt(y=>{let C=n.current;C&&(h=>h())(()=>{es(f.current,{[Pr.Forwards]:()=>{Ja(C,ds.First,{skipElements:[y.relatedTarget]})},[Pr.Backwards]:()=>{Ja(C,ds.Last,{skipElements:[y.relatedTarget]})}})})}),x=ny(),b=i.useRef(!1),w={ref:r,onKeyDown(y){y.key=="Tab"&&(b.current=!0,x.requestAnimationFrame(()=>{b.current=!1}))},onBlur(y){let C=Ep(l);n.current instanceof HTMLElement&&C.add(n.current);let h=y.relatedTarget;h instanceof HTMLElement&&h.dataset.headlessuiFocusGuard!=="true"&&(Tp(C,h)||(b.current?Ja(n.current,es(f.current,{[Pr.Forwards]:()=>ds.Next,[Pr.Backwards]:()=>ds.Previous})|ds.WrapAround,{relativeTo:y.target}):y.target instanceof HTMLElement&&ys(y.target)))}};return Re.createElement(Re.Fragment,null,!!(o&4)&&Re.createElement(Hi,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:m,features:jl.Focusable}),hn({ourProps:w,theirProps:c,defaultTag:Sy,name:"FocusTrap"}),!!(o&4)&&Re.createElement(Hi,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:m,features:jl.Focusable}))}let Cy=xn(ky),vr=Object.assign(Cy,{features:Pp});function Ey(e=!0){let t=i.useRef(Fn.slice());return Yc(([n],[r])=>{r===!0&&n===!1&&Hl(()=>{t.current.splice(0)}),r===!1&&n===!0&&(t.current=Fn.slice())},[e,Fn,t]),wt(()=>{var n;return(n=t.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function Py({ownerDocument:e},t){let n=Ey(t);Yc(()=>{t||(e==null?void 0:e.activeElement)===(e==null?void 0:e.body)&&ys(n())},[t]),Cp(()=>{t&&ys(n())})}function Ty({ownerDocument:e,container:t,initialFocus:n},r){let a=i.useRef(null),l=kp();return Yc(()=>{if(!r)return;let o=t.current;o&&Hl(()=>{if(!l.current)return;let c=e==null?void 0:e.activeElement;if(n!=null&&n.current){if((n==null?void 0:n.current)===c){a.current=c;return}}else if(o.contains(c)){a.current=c;return}n!=null&&n.current?ys(n.current):Ja(o,ds.First)===xp.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),a.current=e==null?void 0:e.activeElement})},[r]),a}function Ry({ownerDocument:e,container:t,containers:n,previousActiveElement:r},a){let l=kp();Sp(e==null?void 0:e.defaultView,"focus",o=>{if(!a||!l.current)return;let c=Ep(n);t.current instanceof HTMLElement&&c.add(t.current);let d=r.current;if(!d)return;let u=o.target;u&&u instanceof HTMLElement?Tp(c,u)?(r.current=u,ys(u)):(o.preventDefault(),o.stopPropagation(),ys(d)):ys(r.current)},!0)}function Tp(e,t){for(let n of e)if(n.contains(t))return!0;return!1}let Rp=i.createContext(!1);function Ly(){return i.useContext(Rp)}function Ki(e){return Re.createElement(Rp.Provider,{value:e.force},e.children)}function Ay(e){let t=Ly(),n=i.useContext(Lp),r=ua(e),[a,l]=i.useState(()=>{if(!t&&n!==null||Cn.isServer)return null;let o=r==null?void 0:r.getElementById("headlessui-portal-root");if(o)return o;if(r===null)return null;let c=r.createElement("div");return c.setAttribute("id","headlessui-portal-root"),r.body.appendChild(c)});return i.useEffect(()=>{a!==null&&(r!=null&&r.body.contains(a)||r==null||r.body.appendChild(a))},[a,r]),i.useEffect(()=>{t||n!==null&&l(n.current)},[n,l,t]),a}let $y=i.Fragment;function Iy(e,t){let n=e,r=i.useRef(null),a=$n(py(f=>{r.current=f}),t),l=ua(r),o=Ay(r),[c]=i.useState(()=>{var f;return Cn.isServer?null:(f=l==null?void 0:l.createElement("div"))!=null?f:null}),d=i.useContext(Vi),u=Vl();return Ln(()=>{!o||!c||o.contains(c)||(c.setAttribute("data-headlessui-portal",""),o.appendChild(c))},[o,c]),Ln(()=>{if(c&&d)return d.register(c)},[d,c]),Cp(()=>{var f;!o||!c||(c instanceof Node&&o.contains(c)&&o.removeChild(c),o.childNodes.length<=0&&((f=o.parentElement)==null||f.removeChild(o)))}),u?!o||!c?null:np.createPortal(hn({ourProps:{ref:a},theirProps:n,defaultTag:$y,name:"Portal"}),c):null}let Uy=i.Fragment,Lp=i.createContext(null);function My(e,t){let{target:n,...r}=e,a={ref:$n(t)};return Re.createElement(Lp.Provider,{value:n},hn({ourProps:a,theirProps:r,defaultTag:Uy,name:"Popover.Group"}))}let Vi=i.createContext(null);function Dy(){let e=i.useContext(Vi),t=i.useRef([]),n=wt(l=>(t.current.push(l),e&&e.register(l),()=>r(l))),r=wt(l=>{let o=t.current.indexOf(l);o!==-1&&t.current.splice(o,1),e&&e.unregister(l)}),a=i.useMemo(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,i.useMemo(()=>function({children:l}){return Re.createElement(Vi.Provider,{value:a},l)},[a])]}let Oy=xn(Iy),Fy=xn(My),qi=Object.assign(Oy,{Group:Fy});function _y(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}const By=typeof Object.is=="function"?Object.is:_y,{useState:zy,useEffect:Gy,useLayoutEffect:Wy,useDebugValue:Hy}=Vs;function Ky(e,t,n){const r=t(),[{inst:a},l]=zy({inst:{value:r,getSnapshot:t}});return Wy(()=>{a.value=r,a.getSnapshot=t,Po(a)&&l({inst:a})},[e,r,t]),Gy(()=>(Po(a)&&l({inst:a}),e(()=>{Po(a)&&l({inst:a})})),[e]),Hy(r),r}function Po(e){const t=e.getSnapshot,n=e.value;try{const r=t();return!By(n,r)}catch{return!0}}function Vy(e,t,n){return t()}const qy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Jy=!qy,Qy=Jy?Vy:Ky,Yy="useSyncExternalStore"in Vs?(e=>e.useSyncExternalStore)(Vs):Qy;function Zy(e){return Yy(e.subscribe,e.getSnapshot,e.getSnapshot)}function Xy(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(a){return r.add(a),()=>r.delete(a)},dispatch(a,...l){let o=t[a].call(n,...l);o&&(n=o,r.forEach(c=>c()))}}}function ev(){let e;return{before({doc:t}){var n;let r=t.documentElement;e=((n=t.defaultView)!=null?n:window).innerWidth-r.clientWidth},after({doc:t,d:n}){let r=t.documentElement,a=r.clientWidth-r.offsetWidth,l=e-a;n.style(r,"paddingRight",`${l}px`)}}}function tv(){return yp()?{before({doc:e,d:t,meta:n}){function r(a){return n.containers.flatMap(l=>l()).some(l=>l.contains(a))}t.microTask(()=>{var a;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let c=Kl();c.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>c.dispose()))}let l=(a=window.scrollY)!=null?a:window.pageYOffset,o=null;t.addEventListener(e,"click",c=>{if(c.target instanceof HTMLElement)try{let d=c.target.closest("a");if(!d)return;let{hash:u}=new URL(d.href),f=e.querySelector(u);f&&!r(f)&&(o=f)}catch{}},!0),t.addEventListener(e,"touchstart",c=>{if(c.target instanceof HTMLElement)if(r(c.target)){let d=c.target;for(;d.parentElement&&r(d.parentElement);)d=d.parentElement;t.style(d,"overscrollBehavior","contain")}else t.style(c.target,"touchAction","none")}),t.addEventListener(e,"touchmove",c=>{if(c.target instanceof HTMLElement)if(r(c.target)){let d=c.target;for(;d.parentElement&&d.dataset.headlessuiPortal!==""&&!(d.scrollHeight>d.clientHeight||d.scrollWidth>d.clientWidth);)d=d.parentElement;d.dataset.headlessuiPortal===""&&c.preventDefault()}else c.preventDefault()},{passive:!1}),t.add(()=>{var c;let d=(c=window.scrollY)!=null?c:window.pageYOffset;l!==d&&window.scrollTo(0,l),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function nv(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function sv(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let ps=Xy(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:Kl(),meta:new Set};return r.count++,r.meta.add(t),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let r={doc:e,d:t,meta:sv(n)},a=[tv(),ev(),nv()];a.forEach(({before:l})=>l==null?void 0:l(r)),a.forEach(({after:l})=>l==null?void 0:l(r))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});ps.subscribe(()=>{let e=ps.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",a=n.count!==0;(a&&!r||!a&&r)&&ps.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&ps.dispatch("TEARDOWN",n)}});function rv(e,t,n){let r=Zy(ps),a=e?r.get(e):void 0,l=a?a.count>0:!1;return Ln(()=>{if(!(!e||!t))return ps.dispatch("PUSH",e,n),()=>ps.dispatch("POP",e,n)},[t,e]),l}let To=new Map,br=new Map;function ju(e,t=!0){Ln(()=>{var n;if(!t)return;let r=typeof e=="function"?e():e.current;if(!r)return;function a(){var o;if(!r)return;let c=(o=br.get(r))!=null?o:1;if(c===1?br.delete(r):br.set(r,c-1),c!==1)return;let d=To.get(r);d&&(d["aria-hidden"]===null?r.removeAttribute("aria-hidden"):r.setAttribute("aria-hidden",d["aria-hidden"]),r.inert=d.inert,To.delete(r))}let l=(n=br.get(r))!=null?n:0;return br.set(r,l+1),l!==0||(To.set(r,{"aria-hidden":r.getAttribute("aria-hidden"),inert:r.inert}),r.setAttribute("aria-hidden","true"),r.inert=!0),a},[e,t])}function av({defaultContainers:e=[],portals:t,mainTreeNodeRef:n}={}){var r;let a=i.useRef((r=n==null?void 0:n.current)!=null?r:null),l=ua(a),o=wt(()=>{var c,d,u;let f=[];for(let m of e)m!==null&&(m instanceof HTMLElement?f.push(m):"current"in m&&m.current instanceof HTMLElement&&f.push(m.current));if(t!=null&&t.current)for(let m of t.current)f.push(m);for(let m of(c=l==null?void 0:l.querySelectorAll("html > *, body > *"))!=null?c:[])m!==document.body&&m!==document.head&&m instanceof HTMLElement&&m.id!=="headlessui-portal-root"&&(m.contains(a.current)||m.contains((u=(d=a.current)==null?void 0:d.getRootNode())==null?void 0:u.host)||f.some(x=>m.contains(x))||f.push(m));return f});return{resolveContainers:o,contains:wt(c=>o().some(d=>d.contains(c))),mainTreeNodeRef:a,MainTreeNode:i.useMemo(()=>function(){return n!=null?null:Re.createElement(Hi,{features:jl.Hidden,ref:a})},[a,n])}}let Zc=i.createContext(()=>{});Zc.displayName="StackContext";var Ji=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(Ji||{});function lv(){return i.useContext(Zc)}function ov({children:e,onUpdate:t,type:n,element:r,enabled:a}){let l=lv(),o=wt((...c)=>{t==null||t(...c),l(...c)});return Ln(()=>{let c=a===void 0||a===!0;return c&&o(0,n,r),()=>{c&&o(1,n,r)}},[o,n,r,a]),Re.createElement(Zc.Provider,{value:o},e)}let Ap=i.createContext(null);function $p(){let e=i.useContext(Ap);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,$p),t}return e}function iv(){let[e,t]=i.useState([]);return[e.length>0?e.join(" "):void 0,i.useMemo(()=>function(n){let r=wt(l=>(t(o=>[...o,l]),()=>t(o=>{let c=o.slice(),d=c.indexOf(l);return d!==-1&&c.splice(d,1),c}))),a=i.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props}),[r,n.slot,n.name,n.props]);return Re.createElement(Ap.Provider,{value:a},n.children)},[t])]}let cv="p";function dv(e,t){let n=cr(),{id:r=`headlessui-description-${n}`,...a}=e,l=$p(),o=$n(t);Ln(()=>l.register(r),[r,l.register]);let c={ref:o,...l.props,id:r};return hn({ourProps:c,theirProps:a,slot:l.slot||{},defaultTag:cv,name:l.name||"Description"})}let uv=xn(dv),mv=Object.assign(uv,{});var fv=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(fv||{}),pv=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(pv||{});let hv={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},Nl=i.createContext(null);Nl.displayName="DialogContext";function ma(e){let t=i.useContext(Nl);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ma),n}return t}function xv(e,t,n=()=>[document.body]){rv(e,t,r=>{var a;return{containers:[...(a=r.containers)!=null?a:[],n]}})}function gv(e,t){return es(t.type,hv,e,t)}let yv="div",vv=Wi.RenderStrategy|Wi.Static;function bv(e,t){let n=cr(),{id:r=`headlessui-dialog-${n}`,open:a,onClose:l,initialFocus:o,role:c="dialog",__demoMode:d=!1,...u}=e,[f,m]=i.useState(0),x=i.useRef(!1);c=function(){return c==="dialog"||c==="alertdialog"?c:(x.current||(x.current=!0,console.warn(`Invalid role [${c}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let b=vy();a===void 0&&b!==null&&(a=(b&Er.Open)===Er.Open);let w=i.useRef(null),y=$n(w,t),C=ua(w),h=e.hasOwnProperty("open")||b!==null,p=e.hasOwnProperty("onClose");if(!h&&!p)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!h)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!p)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(typeof a!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${a}`);if(typeof l!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${l}`);let g=a?0:1,[v,j]=i.useReducer(gv,{titleId:null,descriptionId:null,panelRef:i.createRef()}),E=wt(()=>l(!1)),$=wt(N=>j({type:0,id:N})),R=Vl()?d?!1:g===0:!1,H=f>1,O=i.useContext(Nl)!==null,[q,W]=Dy(),re={get current(){var N;return(N=v.panelRef.current)!=null?N:w.current}},{resolveContainers:J,mainTreeNodeRef:V,MainTreeNode:ce}=av({portals:q,defaultContainers:[re]}),pe=H?"parent":"leaf",S=b!==null?(b&Er.Closing)===Er.Closing:!1,P=O||S?!1:R,I=i.useCallback(()=>{var N,T;return(T=Array.from((N=C==null?void 0:C.querySelectorAll("body > *"))!=null?N:[]).find(G=>G.id==="headlessui-portal-root"?!1:G.contains(V.current)&&G instanceof HTMLElement))!=null?T:null},[V]);ju(I,P);let B=H?!0:R,k=i.useCallback(()=>{var N,T;return(T=Array.from((N=C==null?void 0:C.querySelectorAll("[data-headlessui-portal]"))!=null?N:[]).find(G=>G.contains(V.current)&&G instanceof HTMLElement))!=null?T:null},[V]);ju(k,B),fy(J,N=>{N.preventDefault(),E()},!(!R||H));let ne=!(H||g!==0);Sp(C==null?void 0:C.defaultView,"keydown",N=>{ne&&(N.defaultPrevented||N.key===Np.Escape&&(N.preventDefault(),N.stopPropagation(),E()))}),xv(C,!(S||g!==0||O),J),i.useEffect(()=>{if(g!==0||!w.current)return;let N=new ResizeObserver(T=>{for(let G of T){let Q=G.target.getBoundingClientRect();Q.x===0&&Q.y===0&&Q.width===0&&Q.height===0&&E()}});return N.observe(w.current),()=>N.disconnect()},[g,w,E]);let[z,U]=iv(),M=i.useMemo(()=>[{dialogState:g,close:E,setTitleId:$},v],[g,v,E,$]),F=i.useMemo(()=>({open:g===0}),[g]),Z={ref:y,id:r,role:c,"aria-modal":g===0?!0:void 0,"aria-labelledby":v.titleId,"aria-describedby":z};return Re.createElement(ov,{type:"Dialog",enabled:g===0,element:w,onUpdate:wt((N,T)=>{T==="Dialog"&&es(N,{[Ji.Add]:()=>m(G=>G+1),[Ji.Remove]:()=>m(G=>G-1)})})},Re.createElement(Ki,{force:!0},Re.createElement(qi,null,Re.createElement(Nl.Provider,{value:M},Re.createElement(qi.Group,{target:w},Re.createElement(Ki,{force:!1},Re.createElement(U,{slot:F,name:"Dialog.Description"},Re.createElement(vr,{initialFocus:o,containers:J,features:R?es(pe,{parent:vr.features.RestoreFocus,leaf:vr.features.All&~vr.features.FocusLock}):vr.features.None},Re.createElement(W,null,hn({ourProps:Z,theirProps:u,slot:F,defaultTag:yv,features:vv,visible:g===0,name:"Dialog"}))))))))),Re.createElement(ce,null))}let wv="div";function jv(e,t){let n=cr(),{id:r=`headlessui-dialog-overlay-${n}`,...a}=e,[{dialogState:l,close:o}]=ma("Dialog.Overlay"),c=$n(t),d=wt(f=>{if(f.target===f.currentTarget){if(wy(f.currentTarget))return f.preventDefault();f.preventDefault(),f.stopPropagation(),o()}}),u=i.useMemo(()=>({open:l===0}),[l]);return hn({ourProps:{ref:c,id:r,"aria-hidden":!0,onClick:d},theirProps:a,slot:u,defaultTag:wv,name:"Dialog.Overlay"})}let Nv="div";function Sv(e,t){let n=cr(),{id:r=`headlessui-dialog-backdrop-${n}`,...a}=e,[{dialogState:l},o]=ma("Dialog.Backdrop"),c=$n(t);i.useEffect(()=>{if(o.panelRef.current===null)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")},[o.panelRef]);let d=i.useMemo(()=>({open:l===0}),[l]);return Re.createElement(Ki,{force:!0},Re.createElement(qi,null,hn({ourProps:{ref:c,id:r,"aria-hidden":!0},theirProps:a,slot:d,defaultTag:Nv,name:"Dialog.Backdrop"})))}let kv="div";function Cv(e,t){let n=cr(),{id:r=`headlessui-dialog-panel-${n}`,...a}=e,[{dialogState:l},o]=ma("Dialog.Panel"),c=$n(t,o.panelRef),d=i.useMemo(()=>({open:l===0}),[l]),u=wt(f=>{f.stopPropagation()});return hn({ourProps:{ref:c,id:r,onClick:u},theirProps:a,slot:d,defaultTag:kv,name:"Dialog.Panel"})}let Ev="h2";function Pv(e,t){let n=cr(),{id:r=`headlessui-dialog-title-${n}`,...a}=e,[{dialogState:l,setTitleId:o}]=ma("Dialog.Title"),c=$n(t);i.useEffect(()=>(o(r),()=>o(null)),[r,o]);let d=i.useMemo(()=>({open:l===0}),[l]);return hn({ourProps:{ref:c,id:r},theirProps:a,slot:d,defaultTag:Ev,name:"Dialog.Title"})}let Tv=xn(bv),Rv=xn(Sv),Lv=xn(Cv),Av=xn(jv),$v=xn(Pv),pn=Object.assign(Tv,{Backdrop:Rv,Panel:Lv,Overlay:Av,Title:$v,Description:mv});const Qi="funkedupshift_impersonation",Ip=i.createContext(void 0);function Aa(){try{const e=sessionStorage.getItem(Qi);if(!e)return null;const t=JSON.parse(e);if(t!=null&&t.type&&(t!=null&&t.id))return t}catch{}return null}function Nu(e){try{e?sessionStorage.setItem(Qi,JSON.stringify(e)):sessionStorage.removeItem(Qi)}catch{}}const Iv=({children:e})=>{const[t,n]=i.useState(Aa);i.useEffect(()=>{const c=Aa();n(c)},[]);const r=i.useCallback(c=>{n(c),Nu(c)},[]),a=i.useCallback(()=>{n(null),Nu(null)},[]),l=i.useCallback(()=>{const c=t??Aa();return c?c.type==="user"?{"X-Impersonate-User":c.id}:{"X-Impersonate-Role":c.id}:{}},[t]),o={impersonation:t??Aa(),setImpersonation:r,clearImpersonation:a,getImpersonationHeaders:l};return s.jsx(Ip.Provider,{value:o,children:e})};function Xc(){const e=i.useContext(Ip);return e||{impersonation:null,setImpersonation:()=>{},clearImpersonation:()=>{},getImpersonationHeaders:()=>({})}}const Up=i.createContext(void 0);function Uv(e){return e.includes("admin")?"superadmin":e.includes("manager")?"manager":e.includes("user")?"user":"guest"}function Su(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Mv=({children:e})=>{const[t,n]=i.useState(null),[r,a]=i.useState(!0),{getImpersonationHeaders:l}=Xc(),o=Re.useCallback(async()=>{const u=Su();if(!u){a(!1);return}try{const f=window;if(!f.auth||typeof f.auth.getAccessToken!="function"){a(!1);return}await new Promise(h=>{f.auth.isAuthenticated(p=>{if(!p){n(null),a(!1),h();return}h()})});const m=await new Promise(h=>{window.auth.getAccessToken(p=>h(p))});if(!m){n(null),a(!1);return}const x=await fetch(`${u}/me`,{headers:{Authorization:`Bearer ${m}`,...l()}});if(!x.ok){n(null),a(!1);return}const b=await x.json(),w=Array.isArray(b.groups)?b.groups.map(String):[],y=Uv(w),C=Array.isArray(b.customGroups)?b.customGroups.map(String):[];n({userId:String(b.userId||""),email:String(b.email||""),groups:w,role:y,customGroups:C,impersonated:!!b.impersonated,impersonatedAs:b.impersonatedAs})}catch{n(null)}finally{a(!1)}},[l]);i.useEffect(()=>{o()},[o]);const c=Re.useCallback(async()=>{Su()&&await o()},[o]),d=()=>{const u=window;u.auth&&typeof u.auth.signOut=="function"&&u.auth.signOut(),n(null)};return s.jsx(Up.Provider,{value:{user:t,isLoading:r,signOut:d,refreshAuth:c},children:e})};function Oe(){const e=i.useContext(Up);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}function lt(e,t){if(t==="guest")return!0;if(!e)return!1;const n=["guest","user","manager","superadmin"];return n.indexOf(e.role)>=n.indexOf(t)}function ql(e){return e!=null&&e.userId?e.role==="superadmin"?!0:(e.customGroups??[]).includes("Squash"):!1}function Jl(e){return e!=null&&e.userId?e.role==="superadmin"?!0:e.role!=="manager"?!1:(e.customGroups??[]).includes("Squash"):!1}function Dv(e){return!0}function Ov(e){return e!=null&&e.userId?e.role==="user"||e.role==="manager"||e.role==="superadmin":!1}function Ql(e){return e!=null&&e.userId?e.role==="superadmin":!1}function sa(e){return e!=null&&e.userId?e.role==="superadmin"?!0:(e.customGroups??[]).includes("Memes"):!1}function Mp(e){return!!(e!=null&&e.userId)}function nr(e){return e!=null&&e.userId?e.role==="superadmin"?!0:e.role==="guest"?!1:(e.customGroups??[]).includes("Memes"):!1}function ed(e){return e!=null&&e.userId?e.role==="superadmin"?!0:e.role!=="manager"?!1:(e.customGroups??[]).includes("Memes"):!1}const Fv=[{id:"websites",label:"Websites",path:"/websites",section:"discover",minRole:"guest"},{id:"media",label:"Media",path:"/media",section:"discover",minRole:"guest"},{id:"internet-dashboard",label:"Internet Dashboard",path:"/internet-dashboard",section:"discover",minRole:"guest"},{id:"profile",label:"Profile",path:"/profile",section:"discover",minRole:"user",authOnly:!0},{id:"squash",label:"Squash",path:"/squash",section:"squash",minRole:"user",visibility:ql},{id:"squash-admin",label:"Squash Admin",path:"/squash-admin",section:"squash",minRole:"manager",visibility:Jl},{id:"memes",label:"Memes",path:"/memes",section:"memes",minRole:"guest"},{id:"meme-generator",label:"Meme Generator",path:"/memes/create",section:"memes",minRole:"user",visibility:nr},{id:"financial",label:"Financial",path:"/financial",section:"financial",minRole:"guest",visibility:Dv},{id:"financial-admin",label:"Financial Admin",path:"/admin/financial",section:"financial",minRole:"superadmin",visibility:Ql},{id:"highlights",label:"Highlights",path:"/recommended/highlights",section:"recommended",minRole:"guest"},{id:"highest-rated",label:"Highest Rated",path:"/recommended/highest-rated",section:"recommended",minRole:"guest"}],_v=[{id:"websites",label:"Websites",path:"/admin/websites",description:"Add and manage curated sites, categories, and logos.",icon:Dg,minRole:"manager"},{id:"media",label:"Media",path:"/admin/media",description:"Upload and organize media files.",icon:Bg,minRole:"manager"},{id:"internet-dashboard",label:"Internet Dashboard",path:"/admin/internet-dashboard",description:"Manage domains shown on the internet dashboard.",icon:Pg,minRole:"superadmin"},{id:"recommended",label:"Recommended",path:"/admin/recommended",description:"Curate highlights and highest-rated lists.",icon:Gg,minRole:"manager"},{id:"membership",label:"Membership",path:"/admin/membership",description:"Manage custom groups and member access.",icon:Yg,minRole:"manager"},{id:"branding",label:"Branding",path:"/admin/branding",description:"Set global logo and branding assets.",icon:$g,minRole:"superadmin"},{id:"financial",label:"Financial",path:"/admin/financial",description:"Manage default symbols and financial config.",icon:Ug,minRole:"superadmin"},{id:"squash",label:"Squash",path:"/squash-admin",description:"Manage squash players and matches.",icon:Vg,minRole:"manager"}];function Bv(e){return Fv.filter(t=>t.authOnly?e!==null:t.visibility?t.visibility(e):lt(e,t.minRole))}function zv(e){const t=Bv(e),n={};for(const r of t)r.section!=="admin"&&(n[r.section]||(n[r.section]=[]),n[r.section].push(r));return n}function Gv(e){return e?_v.filter(t=>lt(e,t.minRole)):[]}function Dp(){try{const e=sessionStorage.getItem("funkedupshift_impersonation");if(!e)return{};const t=JSON.parse(e);if((t==null?void 0:t.type)==="user"&&(t!=null&&t.id))return{"X-Impersonate-User":t.id};if((t==null?void 0:t.type)==="role"&&(t!=null&&t.id))return{"X-Impersonate-Role":t.id}}catch{}return{}}async function Y(e,t){var l;const n=window;if(!((l=n.auth)!=null&&l.getAccessToken))throw new Error("Not signed in");const r=await new Promise(o=>n.auth.getAccessToken(o)),a={...t==null?void 0:t.headers,Authorization:`Bearer ${r}`,...Dp()};return fetch(e,{...t,headers:a})}async function at(e,t){var l;const n=window;if(!((l=n.auth)!=null&&l.getAccessToken))return fetch(e,t);const r=await new Promise(o=>n.auth.getAccessToken(o));if(!r)return fetch(e,t);const a={...t==null?void 0:t.headers,Authorization:`Bearer ${r}`,...Dp()};return fetch(e,{...t,headers:a})}const Op=i.createContext(void 0);function Wv(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const ku="Funked Up Shift",Hv=({children:e})=>{const[t,n]=i.useState(null),[r,a]=i.useState(ku);return i.useEffect(()=>{const l=Wv();if(!l)return;let o=!1;const c=typeof window<"u"?window.location.hostname:"",d=c?`${l}/branding/logo?domain=${encodeURIComponent(c)}`:`${l}/branding/logo`;return(async()=>{try{const u=await at(d);if(!u.ok||!(u.headers.get("Content-Type")||"").includes("application/json"))return;const m=await u.json();if(o)return;m&&m.url&&n({url:String(m.url),alt:String(m.alt||ku)}),m!=null&&m.siteName&&typeof m.siteName=="string"&&m.siteName.trim()?a(m.siteName.trim()):m!=null&&m.alt&&typeof m.alt=="string"&&m.alt.trim()&&a(m.alt.trim())}catch{}})(),()=>{o=!0}},[]),s.jsx(Op.Provider,{value:{logo:t,siteName:r},children:e})};function Fp(){const e=i.useContext(Op);if(!e)throw new Error("useBranding must be used within BrandingProvider");return e}const Kv=()=>{const{impersonation:e,clearImpersonation:t}=Xc(),{user:n,refreshAuth:r}=Oe();if(!e)return null;const a=n!=null&&n.impersonated?n.impersonatedAs||n.email:e.label,l=()=>{t(),r()};return s.jsxs("div",{className:"sticky top-0 z-50 flex items-center justify-between gap-4 bg-amber-600 px-4 py-2 text-sm font-medium text-amber-950 shadow-md",children:[s.jsxs("span",{children:["Viewing as: ",s.jsx("strong",{children:a||e.id})]}),s.jsxs("button",{type:"button",onClick:l,className:"flex items-center gap-1 rounded-md px-2 py-1 font-semibold hover:bg-amber-500/50","aria-label":"Stop impersonating",children:[s.jsx(Gl,{className:"h-4 w-4"}),"Stop impersonating"]})]})};function Vv(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const qv=()=>{const{user:e,refreshAuth:t}=Oe(),{impersonation:n,setImpersonation:r,clearImpersonation:a}=Xc(),[l,o]=i.useState(!1),[c,d]=i.useState([]),[u,f]=i.useState([]),[m,x]=i.useState(!1),[b,w]=i.useState(null),y=Vv();if(i.useEffect(()=>{var j;if(!l||!y||!((j=window.auth)!=null&&j.getAccessToken))return;x(!0),w(null),(async()=>{try{const[E,$]=await Promise.all([Y(`${y}/admin/users?limit=100`),Y(`${y}/admin/roles`)]),R=E.ok?await E.json():null,H=$.ok?await $.json():null;if(!E.ok)throw new Error("Failed to load users");if(!$.ok)throw new Error("Failed to load roles");d((R==null?void 0:R.users)??[]),f((H==null?void 0:H.roles)??[])}catch(E){w((E==null?void 0:E.message)??"Failed to load")}finally{x(!1)}})()},[l,y]),(e==null?void 0:e.role)!=="superadmin")return null;const C=g=>{r({type:"user",id:g.username,label:g.email||g.username}),o(!1),t()},h=g=>{r({type:"role",id:g.name,label:g.name}),o(!1),t()},p=()=>{a(),o(!1),t()};return s.jsxs(s.Fragment,{children:[s.jsxs("button",{type:"button",onClick:()=>o(!0),className:"flex items-center gap-1.5 rounded-md px-2 py-1.5 text-xs font-medium text-amber-200 hover:bg-amber-500/20",title:"Impersonate user or role",children:[s.jsx(Jg,{className:"h-4 w-4"}),n?"Change":"Impersonate"]}),s.jsxs(pn,{open:l,onClose:()=>o(!1),className:"relative z-50",children:[s.jsx("div",{className:"fixed inset-0 bg-black/60","aria-hidden":"true"}),s.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:s.jsxs(pn.Panel,{className:"mx-auto max-h-[80vh] w-full max-w-md overflow-y-auto rounded-xl border border-slate-700 bg-slate-900 p-4 shadow-xl",children:[s.jsx(pn.Title,{className:"text-lg font-semibold text-slate-100",children:"User impersonation"}),s.jsx("p",{className:"mt-1 text-sm text-slate-400",children:"View the site as another user or a defined role."}),b&&s.jsx("div",{className:"mt-2 rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:b}),m?s.jsx("p",{className:"mt-4 text-sm text-slate-500",children:"Loading"}):s.jsxs("div",{className:"mt-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-300",children:"Users"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Superadmins cannot be impersonated."}),s.jsxs("ul",{className:"mt-2 max-h-40 overflow-y-auto space-y-1",children:[c.map(g=>s.jsx("li",{children:s.jsx("button",{type:"button",onClick:()=>C(g),className:"w-full rounded-md px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:g.email||g.username})},g.username)),c.length===0&&s.jsx("li",{className:"px-3 py-2 text-sm text-slate-500",children:"No users"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-300",children:"Roles"}),s.jsxs("ul",{className:"mt-2 max-h-40 overflow-y-auto space-y-1",children:[u.map(g=>s.jsx("li",{children:s.jsx("button",{type:"button",onClick:()=>h(g),className:"w-full rounded-md px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:g.name})},g.name)),u.length===0&&s.jsx("li",{className:"px-3 py-2 text-sm text-slate-500",children:"No roles defined"})]})]}),n&&s.jsx("button",{type:"button",onClick:p,className:"rounded-md border border-slate-600 px-3 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Stop impersonating"})]})]})})]})]})};function Jv(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Cu=160,Eu=16,Qv=2,Yv=()=>{const{user:e}=Oe(),t=ql(e),n=sa(e),[r,a]=i.useState([]),[l,o]=i.useState(4),c=i.useRef(null),[d,u]=i.useState(null);i.useEffect(()=>{const x=Jv();if(!x)return;let b=!1;return fetch(`${x}/memes/cache?limit=20`).then(w=>w.ok?w.json():Promise.reject()).then(w=>{b||a(w.memes??[])}).catch(()=>{}),()=>{b=!0}},[]),i.useEffect(()=>{const x=c.current;if(!x)return;const b=()=>{const y=x.clientWidth;o(Math.max(1,Math.floor((y+Eu)/(Cu+Eu))))};b();const w=new ResizeObserver(()=>b());return w.observe(x),()=>w.disconnect()},[r.length]);const f=r.slice(0,l*Qv),m=async x=>{try{await navigator.clipboard.writeText(x),u(x),setTimeout(()=>u(null),2e3)}catch{}};return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("section",{className:"relative overflow-hidden rounded-2xl border border-slate-800 bg-gradient-to-br from-brand-orange/20 via-brand-navy/10 to-brand-teal/20 px-6 py-10",children:[s.jsxs("div",{className:"max-w-xl space-y-4",children:[s.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-slate-200",children:"Shared internet intelligence"}),s.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold tracking-tight text-slate-50",children:"Discover, rate, and enrich the sites that matter."}),s.jsx("p",{className:"text-sm text-slate-100/80",children:"Funkedupshift is a living index of websites, media, and experiments  curated by admins, enriched by everyone."}),s.jsxs("div",{className:"flex flex-wrap gap-3 pt-2",children:[s.jsx(ie,{to:"/websites",className:"inline-flex items-center rounded-full border border-slate-500/60 px-4 py-2 text-sm font-semibold text-slate-100 hover:border-slate-300/80",children:"Browse websites"}),s.jsx(ie,{to:"/media",className:"inline-flex items-center rounded-full border border-slate-500/60 px-4 py-2 text-sm font-semibold text-slate-100 hover:border-slate-300/80",children:"Explore media"}),s.jsx(ie,{to:"/internet-dashboard",className:"inline-flex items-center rounded-full border border-slate-500/60 px-4 py-2 text-sm font-semibold text-slate-100 hover:border-slate-300/80",children:"Internet Dashboard"}),t&&s.jsx(ie,{to:"/squash",className:"inline-flex items-center rounded-full border border-slate-500/60 px-4 py-2 text-sm font-semibold text-slate-100 hover:border-slate-300/80",children:"Squash"}),n&&s.jsx(ie,{to:"/memes",className:"inline-flex items-center rounded-full border border-slate-500/60 px-4 py-2 text-sm font-semibold text-slate-100 hover:border-slate-300/80",children:"Memes"})]})]}),s.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 w-1/2 opacity-60",children:s.jsx("div",{className:"absolute -inset-24 bg-[radial-gradient(circle_at_top,_#f97316_0,_transparent_55%),radial-gradient(circle_at_bottom,_#06d6a0_0,_transparent_55%)]"})})]}),r.length>0&&s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wider text-slate-400",children:"Latest Memes"}),s.jsx(ie,{to:"/memes",className:"text-xs text-brand-orange hover:text-orange-400",children:"View all "})]}),s.jsx("div",{ref:c,className:"grid gap-4",style:{gridTemplateColumns:`repeat(auto-fill, minmax(${Cu}px, 1fr))`},children:f.map(x=>{const b=x.thumbnailUrl||x.mediaUrl,w=x.title||"Untitled",y=d===x.mediaUrl;return s.jsxs("div",{className:"group rounded-lg border border-slate-800 bg-slate-900/60 overflow-hidden flex flex-col",children:[s.jsx(ie,{to:`/memes/${encodeURIComponent(x.PK)}`,className:"block aspect-square overflow-hidden bg-slate-900",children:b?s.jsx("img",{src:b,alt:w,className:"h-full w-full object-cover transition-transform group-hover:scale-105",onError:C=>{C.currentTarget.style.visibility="hidden"}}):s.jsx("div",{className:"flex h-full items-center justify-center text-2xl text-slate-600",children:""})}),s.jsxs("div",{className:"p-2 space-y-1 flex-1 flex flex-col",children:[s.jsx(ie,{to:`/memes/${encodeURIComponent(x.PK)}`,className:"block truncate text-xs font-medium text-slate-200 hover:text-brand-orange",children:w}),s.jsxs("div",{className:"flex items-center justify-between mt-auto pt-1",children:[typeof x.averageRating=="number"?s.jsxs("span",{className:"text-[11px] text-amber-300",children:[x.averageRating.toFixed(1),""]}):s.jsx("span",{}),x.mediaUrl&&s.jsx("button",{type:"button",onClick:()=>m(x.mediaUrl),className:"inline-flex items-center gap-1 text-[10px] text-slate-500 hover:text-slate-300 transition-colors",title:"Copy media URL",children:y?s.jsx("span",{className:"text-emerald-400",children:" Copied"}):s.jsxs(s.Fragment,{children:[s.jsx(Jc,{className:"h-3 w-3"}),s.jsx("span",{children:"Copy URL"})]})})]})]})]},x.PK)})})]}),s.jsxs("section",{className:"grid gap-4 sm:grid-cols-3",children:[s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.22em] text-slate-500 mb-2",children:"Everyone"}),s.jsx("p",{className:"text-sm text-slate-200",children:"Browse all sites and media without signing in. Ratings and metadata are public by design."})]}),s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.22em] text-slate-500 mb-2",children:"Users"}),s.jsx("p",{className:"text-sm text-slate-200",children:"Sign in to rate sites, add notes, and personalize your view of the internet."})]}),s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.22em] text-slate-500 mb-2",children:"Admins"}),s.jsx("p",{className:"text-sm text-slate-200",children:"Curate the corpus, manage categories and groups, and control branding from a single admin surface."})]})]})]})};function Ro(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Lo=10,Zv=()=>{const{user:e}=Oe(),[t,n]=Yt(),[r,a]=i.useState([]),[l,o]=i.useState(()=>t.get("q")??""),[c,d]=i.useState(()=>{const S=t.get("categoryIds");return S?S.split(",").filter(Boolean):[]}),[u,f]=i.useState(()=>t.get("categoryMode")==="or"?"or":"and"),[m,x]=i.useState(!1),[b,w]=i.useState(""),[y,C]=i.useState("avgDesc"),[h,p]=i.useState(1),[g,v]=i.useState(!1),[j,E]=i.useState(null),$=!!e,R=i.useRef(null),[H,O]=i.useState([]);i.useEffect(()=>{const S=Ro();if(!S)return;let P=!1;return at(`${S}/categories`).then(I=>I.ok?I.json():Promise.reject(new Error("Failed to load categories"))).then(I=>{if(P)return;const B=(I.categories??[]).map(k=>({id:k.PK||k.id||"",name:k.name||k.PK||""}));B.sort((k,K)=>(k.name||"").localeCompare(K.name||"")),O(B)}).catch(()=>{}),()=>{P=!0}},[]);const q=i.useMemo(()=>{if(u==="or"&&H.length>0)return H;const S=new Map;r.forEach(I=>(I.categories||[]).forEach(B=>{B.id&&!S.has(B.id)&&S.set(B.id,B)}));const P=[...H];return S.forEach(I=>{P.some(B=>B.id===I.id)||P.push(I)}),P.sort((I,B)=>(I.name||"").localeCompare(B.name||"")),P},[H,u,r]),W=i.useMemo(()=>q.filter(S=>!c.includes(S.id)&&(!b.trim()||(S.name||"").toLowerCase().includes(b.toLowerCase()))),[q,c,b]),re=l.trim().length>0||c.length>0;i.useEffect(()=>{if(re){const S=new URLSearchParams;l.trim()&&S.set("q",l.trim()),c.length&&(S.set("categoryIds",c.join(",")),S.set("categoryMode",u)),n(S,{replace:!0})}else n({},{replace:!0})},[re,l,c,u,n]),i.useEffect(()=>{if(!re){a([]),p(1),v(!1),E(null);return}const S=Ro();if(!S){E("API URL not set. Deploy via CI or set window.API_BASE_URL in config.js.");return}let P=!1;async function I(){v(!0),E(null);try{const B=new URLSearchParams;B.set("limit","100"),l.trim()&&B.set("q",l.trim()),c.length>0&&(B.set("categoryIds",c.join(",")),B.set("categoryMode",u));const k=await at(`${S}/sites?${B.toString()}`);if(!k.ok){const ne=await k.text();throw new Error(`HTTP ${k.status}: ${ne}`)}const K=await k.json();if(P)return;a(K.sites??[]),p(1)}catch(B){P||E((B==null?void 0:B.message)??"Failed to load sites.")}finally{P||v(!1)}}return I(),()=>{P=!0}},[re,l,c,u]),i.useEffect(()=>{function S(P){R.current&&!R.current.contains(P.target)&&x(!1)}if(m)return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[m]);const J=i.useMemo(()=>{const S=[...r];return S.sort((P,I)=>{const B=(P.title||P.url||P.PK||"").toLowerCase(),k=(I.title||I.url||I.PK||"").toLowerCase(),K=typeof P.averageRating=="number"?P.averageRating:0,ne=typeof I.averageRating=="number"?I.averageRating:0;return y==="avgDesc"?ne!==K?ne-K:B.localeCompare(k):y==="avgAsc"?K!==ne?K-ne:B.localeCompare(k):y==="alphaAsc"?B.localeCompare(k):y==="alphaDesc"?k.localeCompare(B):0}),S},[r,y]),V=Math.max(1,Math.ceil(J.length/Lo)),ce=J.slice((h-1)*Lo,h*Lo),pe=async(S,P)=>{const I=Ro();if(!I)return;const B=window;if(!B.auth||typeof B.auth.getAccessToken!="function")return;const k=await new Promise(K=>{B.auth.getAccessToken(ne=>K(ne))});k&&await at(`${I}/stars`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${k}`},body:JSON.stringify({siteId:S,rating:P})}).catch(()=>{})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Websites"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Browse curated sites, see ratings, and jump straight into the interesting corners of the internet."})]}),s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-4","aria-label":"Search and filter",children:[s.jsxs("form",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",onSubmit:S=>{S.preventDefault(),o(l.trim())},children:[s.jsx("input",{type:"text",value:l,onChange:S=>o(S.target.value),placeholder:"Search sites (title, URL, description)",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("button",{type:"submit",className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500",children:"Search"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-4 sm:gap-6",children:[s.jsxs("div",{ref:R,className:"relative flex-shrink-0 min-w-0 max-w-sm",children:[s.jsx("label",{htmlFor:"website-category-filter",className:"block text-xs font-medium text-slate-400 mb-1",children:"Categories (filter by)"}),s.jsx("input",{id:"website-category-filter",type:"text",value:b,onChange:S=>w(S.target.value),onFocus:()=>x(!0),placeholder:"Search and select categories",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",autoComplete:"off"}),m&&s.jsx("div",{className:"absolute left-0 top-full z-10 mt-1 w-full max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",role:"listbox","aria-label":"Category options",children:W.length>0?W.map(S=>s.jsx("button",{type:"button",role:"option",onClick:()=>{d(P=>P.includes(S.id)?P:[...P,S.id]),w("")},className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:S.name},S.id)):s.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:q.length===0?"No categories yet.":"No matches or all selected."})}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:c.map(S=>{const P=q.find(I=>I.id===S);return s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(P==null?void 0:P.name)??S,s.jsx("button",{type:"button",onClick:()=>d(I=>I.filter(B=>B!==S)),className:"hover:text-red-400","aria-label":"Remove category filter",children:""})]},S)})}),c.length>0&&s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-slate-500",children:"Match:"}),s.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[s.jsx("button",{type:"button",onClick:()=>f("and"),className:`rounded px-2 py-0.5 text-xs font-medium ${u==="and"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"AND"}),s.jsx("button",{type:"button",onClick:()=>f("or"),className:`rounded px-2 py-0.5 text-xs font-medium ${u==="or"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"OR"})]})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-3 items-center text-xs text-slate-400",children:[s.jsx("span",{className:"font-medium text-slate-200",children:"Sort:"}),s.jsxs("select",{value:y,onChange:S=>{C(S.target.value),p(1)},className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",children:[s.jsx("option",{value:"avgDesc",children:"Avg stars (high first)"}),s.jsx("option",{value:"avgAsc",children:"Avg stars (low first)"}),s.jsx("option",{value:"alphaAsc",children:"Title AZ"}),s.jsx("option",{value:"alphaDesc",children:"Title ZA"})]}),s.jsx("span",{className:"text-slate-500",children:re?J.length===0?"No sites found.":`${J.length} sites`:""})]})]})]}),j&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:j}),re?g?s.jsx("div",{className:"text-sm text-slate-400",children:"Loading sites"}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"rounded-md border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm text-slate-400",children:J.length===0?"No results":`${J.length} results`}),s.jsx("ul",{className:"space-y-2 mt-2",children:ce.map(S=>{const P=S.title||S.url||S.PK||"Untitled",I=S.logoUrl;return s.jsxs("li",{className:"flex gap-3 rounded-xl border border-slate-800 bg-slate-950/60 p-3",children:[s.jsx("div",{className:"h-12 w-12 flex-shrink-0 overflow-hidden rounded-lg border border-slate-700 bg-slate-900",children:I?s.jsx("img",{src:I,alt:"",className:"h-full w-full object-cover",onError:B=>{B.currentTarget.style.visibility="hidden"}}):null}),s.jsxs("div",{className:"min-w-0 flex-1 space-y-1",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("h2",{className:"truncate text-sm font-semibold text-slate-50",children:s.jsx(ie,{to:`/websites/${encodeURIComponent(S.PK)}`,className:"hover:text-brand-orange",children:P})}),typeof S.averageRating=="number"&&s.jsxs("span",{className:"inline-flex items-center rounded-full bg-slate-900 px-2 py-0.5 text-[11px] text-amber-300",children:[S.averageRating.toFixed(1),""]})]}),S.url&&s.jsx("a",{href:S.url,target:"_blank",rel:"noopener noreferrer",className:"block truncate text-xs text-slate-400 hover:text-slate-200",children:S.url}),S.description&&s.jsxs("p",{className:"text-xs text-slate-300 line-clamp-3",children:[S.description,S.descriptionAiGenerated&&s.jsx("span",{className:"ml-1 text-[11px] uppercase tracking-wide text-slate-500",children:"AI summary"})]}),S.categories&&S.categories.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1 pt-1",children:S.categories.map(B=>s.jsx("span",{className:"rounded-full bg-slate-900 px-2 py-0.5 text-[11px] text-slate-300",children:B.name},B.id))}),$&&s.jsx("div",{className:"pt-1",children:s.jsxs("label",{className:"inline-flex items-center gap-1 text-[11px] text-slate-400",children:[s.jsx("span",{children:"Rate:"}),s.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-1 py-0.5 text-[11px] text-slate-50",onChange:B=>{const k=Number(B.target.value);k>=1&&k<=5&&pe(S.PK,k)},defaultValue:"",children:[s.jsx("option",{value:"",children:"--"}),s.jsx("option",{value:"1",children:"1"}),s.jsx("option",{value:"2",children:"2"}),s.jsx("option",{value:"3",children:"3"}),s.jsx("option",{value:"4",children:"4"}),s.jsx("option",{value:"5",children:"5"})]})]})})]})]},S.PK)})})]}):s.jsx("div",{className:"flex items-center justify-center min-h-[280px]",children:s.jsx("p",{className:"text-2xl sm:text-3xl font-light text-slate-500/80 tracking-wide animate-pulse",children:"Enter search term or select categories"})}),re&&V>1&&s.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-center gap-2 text-xs",children:[s.jsx("button",{type:"button",disabled:h<=1,onClick:()=>p(S=>Math.max(1,S-1)),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 disabled:opacity-40",children:"Prev"}),s.jsxs("span",{className:"text-slate-500",children:["Page ",h," of ",V]}),s.jsx("button",{type:"button",disabled:h>=V,onClick:()=>p(S=>Math.min(V,S+1)),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 disabled:opacity-40",children:"Next"})]})]})};function Ao(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Xv=()=>{var b,w;const{id:e}=ir(),{user:t}=Oe(),n=lt(t??null,"manager"),[r,a]=i.useState(null),[l,o]=i.useState(null),[c,d]=i.useState(!0),[u,f]=i.useState(null);i.useEffect(()=>{const y=Ao();if(!y||!e){f(e?"API URL not set.":"Missing site id."),d(!1);return}let C=!1;async function h(){d(!0),f(null);try{const p=new URLSearchParams;p.set("id",decodeURIComponent(e));const g=await at(`${y}/sites?${p.toString()}`);if(g.status===404){C||a(null);return}if(!g.ok){const j=await g.text();throw new Error(`HTTP ${g.status}: ${j}`)}const v=await g.json();if(C)return;a(v.site??null)}catch(p){C||f((p==null?void 0:p.message)??"Failed to load site.")}finally{C||d(!1)}}return h(),()=>{C=!0}},[e]),i.useEffect(()=>{if(!t||!(r!=null&&r.PK))return;const y=Ao();if(!y)return;let C=!1;return(async()=>{try{const h=await Y(`${y}/stars?siteId=${encodeURIComponent(r.PK)}`);if(C)return;if(h.ok){const p=await h.json();o(typeof p.rating=="number"?p.rating:null)}}catch{}})(),()=>{C=!0}},[t,r==null?void 0:r.PK]);const m=async(y,C)=>{const h=Ao();if(h)try{await Y(`${h}/stars`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({siteId:y,rating:C})}),o(C)}catch{}};if(c)return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(ie,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Websites"]}),s.jsx("div",{className:"text-sm text-slate-400",children:"Loading"})]});if(u||!r)return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(ie,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Websites"]}),s.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:u||"Site not found."})]});const x=r.title||r.url||r.PK||"Untitled";return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsxs(ie,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Websites"]}),n&&r&&s.jsxs(ie,{to:`/admin/sites/edit/${encodeURIComponent(r.PK)}`,className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(da,{className:"h-4 w-4"}),"Edit site"]})]}),s.jsxs("article",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 sm:p-6",children:[s.jsxs("header",{className:"flex flex-wrap gap-4",children:[s.jsx("div",{className:"h-16 w-16 flex-shrink-0 overflow-hidden rounded-lg border border-slate-700 bg-slate-900",children:r.logoUrl?s.jsx("img",{src:r.logoUrl,alt:"",className:"h-full w-full object-cover",onError:y=>{y.currentTarget.style.visibility="hidden"}}):null}),s.jsxs("div",{className:"min-w-0 flex-1 space-y-1",children:[s.jsx("h1",{className:"text-xl font-semibold tracking-tight text-slate-50",children:x}),typeof r.averageRating=="number"&&s.jsxs("span",{className:"inline-flex items-center rounded-full bg-slate-800 px-2 py-0.5 text-sm text-amber-300",children:[r.averageRating.toFixed(1)," average"]}),r.url&&s.jsx("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:"block truncate text-sm text-slate-400 hover:text-slate-200",children:r.url})]})]}),r.description&&s.jsx("div",{className:"mt-4",children:s.jsxs("p",{className:"text-sm text-slate-300",children:[r.description,r.descriptionAiGenerated&&s.jsx("span",{className:"ml-1 text-xs uppercase tracking-wide text-slate-500",children:"AI summary"})]})}),(((b=r.categories)==null?void 0:b.length)??0)>0&&s.jsx("div",{className:"mt-3 flex flex-wrap gap-1",children:r.categories.map(y=>s.jsx("span",{className:"rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-300",children:y.name},y.id))}),(((w=r.tags)==null?void 0:w.length)??0)>0&&s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:r.tags.map(y=>s.jsx("span",{className:"rounded-full bg-slate-900 px-2 py-0.5 text-xs text-slate-400",children:y},y))}),t&&s.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3",children:[l!==null&&s.jsxs("span",{className:"text-xs text-slate-400",children:["Your rating: ",l,""]}),s.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-400",children:[s.jsx("span",{children:"Rate:"}),s.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-2 py-1 text-sm text-slate-50",value:l??"",onChange:y=>{const C=Number(y.target.value);C>=1&&C<=5&&m(r.PK,C)},children:[s.jsx("option",{value:"",children:"--"}),s.jsx("option",{value:"1",children:"1"}),s.jsx("option",{value:"2",children:"2"}),s.jsx("option",{value:"3",children:"3"}),s.jsx("option",{value:"4",children:"4"}),s.jsx("option",{value:"5",children:"5"})]})]})]}),r.scrapedContent&&s.jsxs("section",{className:"mt-6 border-t border-slate-800 pt-4",children:[s.jsx("h2",{className:"text-sm font-medium text-slate-400",children:"About / Scraped content"}),s.jsx("div",{className:"mt-2 overflow-x-auto rounded-lg border border-slate-800 bg-slate-900/60 p-3",children:s.jsx("pre",{className:"whitespace-pre-wrap break-words font-sans text-sm text-slate-300",children:r.scrapedContent})})]})]})]})};function $o(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Io=10,eb=()=>{const{user:e}=Oe(),[t,n]=Yt(),[r,a]=i.useState([]),[l,o]=i.useState(()=>t.get("q")??""),[c,d]=i.useState(()=>{const P=t.get("categoryIds");return P?P.split(",").filter(Boolean):[]}),[u,f]=i.useState(()=>t.get("categoryMode")==="or"?"or":"and"),[m,x]=i.useState(!1),[b,w]=i.useState(""),[y,C]=i.useState("avgDesc"),[h,p]=i.useState(1),[g,v]=i.useState(!1),[j,E]=i.useState(null),$=!!e,R=lt(e??null,"manager"),H=i.useRef(null),[O,q]=i.useState([]);i.useEffect(()=>{const P=$o();if(!P)return;let I=!1;return at(`${P}/media-categories`).then(B=>B.ok?B.json():Promise.reject(new Error("Failed to load categories"))).then(B=>{if(I)return;const k=(B.categories??[]).map(K=>({id:K.PK||K.id||"",name:K.name||K.PK||""}));k.sort((K,ne)=>(K.name||"").localeCompare(ne.name||"")),q(k)}).catch(()=>{}),()=>{I=!0}},[]);const W=i.useMemo(()=>{if(u==="or"&&O.length>0)return O;const P=new Map;r.forEach(B=>(B.categories||[]).forEach(k=>{k.id&&!P.has(k.id)&&P.set(k.id,k)}));const I=[...O];return P.forEach(B=>{I.some(k=>k.id===B.id)||I.push(B)}),I.sort((B,k)=>(B.name||"").localeCompare(k.name||"")),I},[O,u,r]),re=i.useMemo(()=>W.filter(P=>!c.includes(P.id)&&(!b.trim()||(P.name||"").toLowerCase().includes(b.toLowerCase()))),[W,c,b]),J=l.trim().length>0||c.length>0;i.useEffect(()=>{if(J){const P=new URLSearchParams;l.trim()&&P.set("q",l.trim()),c.length&&(P.set("categoryIds",c.join(",")),P.set("categoryMode",u)),n(P,{replace:!0})}else n({},{replace:!0})},[J,l,c,u,n]),i.useEffect(()=>{if(!J){a([]),p(1),v(!1),E(null);return}const P=$o();if(!P){E("API URL not set. Deploy via CI or set window.API_BASE_URL in config.js.");return}let I=!1;async function B(){v(!0),E(null);try{const k=new URLSearchParams;k.set("limit","100"),l.trim()&&k.set("q",l.trim()),c.length>0&&(k.set("categoryIds",c.join(",")),k.set("categoryMode",u));const K=await at(`${P}/media?${k.toString()}`);if(!K.ok){const _=await K.text();throw new Error(`HTTP ${K.status}: ${_}`)}const ne=await K.json();if(I)return;a(ne.media??[]),p(1)}catch(k){I||E((k==null?void 0:k.message)??"Failed to load media.")}finally{I||v(!1)}}return B(),()=>{I=!0}},[J,l,c,u]),i.useEffect(()=>{function P(I){H.current&&!H.current.contains(I.target)&&x(!1)}if(m)return document.addEventListener("mousedown",P),()=>document.removeEventListener("mousedown",P)},[m]);const V=i.useMemo(()=>{const P=[...r];return P.sort((I,B)=>{const k=(I.title||I.PK||"").toLowerCase(),K=(B.title||B.PK||"").toLowerCase(),ne=typeof I.averageRating=="number"?I.averageRating:0,_=typeof B.averageRating=="number"?B.averageRating:0;return y==="avgDesc"?_!==ne?_-ne:k.localeCompare(K):y==="avgAsc"?ne!==_?ne-_:k.localeCompare(K):y==="alphaAsc"?k.localeCompare(K):y==="alphaDesc"?K.localeCompare(k):0}),P},[r,y]),ce=Math.max(1,Math.ceil(V.length/Io)),pe=V.slice((h-1)*Io,h*Io),S=async(P,I)=>{const B=$o();if(!B)return;const k=window;if(!k.auth||typeof k.auth.getAccessToken!="function")return;const K=await new Promise(ne=>{k.auth.getAccessToken(_=>ne(_))});K&&await at(`${B}/media/stars`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${K}`},body:JSON.stringify({mediaId:P,rating:I})}).catch(()=>{})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Media"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Images and videos attached to sites and experiments across Funkedupshift."})]}),s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-4","aria-label":"Search and filter",children:[s.jsxs("form",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",onSubmit:P=>{P.preventDefault(),o(l.trim())},children:[s.jsx("input",{type:"text",value:l,onChange:P=>o(P.target.value),placeholder:"Search media by title or description",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("button",{type:"submit",className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500",children:"Search"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-4 sm:gap-6",children:[s.jsxs("div",{ref:H,className:"relative flex-shrink-0 min-w-0 max-w-sm",children:[s.jsx("label",{htmlFor:"media-category-filter",className:"block text-xs font-medium text-slate-400 mb-1",children:"Categories (filter by)"}),s.jsx("input",{id:"media-category-filter",type:"text",value:b,onChange:P=>w(P.target.value),onFocus:()=>x(!0),placeholder:"Search and select categories",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",autoComplete:"off"}),m&&s.jsx("div",{className:"absolute left-0 top-full z-10 mt-1 w-full max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",role:"listbox","aria-label":"Category options",children:re.length>0?re.map(P=>s.jsx("button",{type:"button",role:"option",onClick:()=>{d(I=>I.includes(P.id)?I:[...I,P.id]),w("")},className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:P.name},P.id)):s.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:W.length===0?"No categories yet.":"No matches or all selected."})}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:c.map(P=>{const I=W.find(B=>B.id===P);return s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(I==null?void 0:I.name)??P,s.jsx("button",{type:"button",onClick:()=>d(B=>B.filter(k=>k!==P)),className:"hover:text-red-400","aria-label":"Remove category filter",children:""})]},P)})}),c.length>0&&s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-slate-500",children:"Match:"}),s.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[s.jsx("button",{type:"button",onClick:()=>f("and"),className:`rounded px-2 py-0.5 text-xs font-medium ${u==="and"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"AND"}),s.jsx("button",{type:"button",onClick:()=>f("or"),className:`rounded px-2 py-0.5 text-xs font-medium ${u==="or"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"OR"})]})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-3 items-center text-xs text-slate-400",children:[s.jsx("span",{className:"font-medium text-slate-200",children:"Sort:"}),s.jsxs("select",{value:y,onChange:P=>{C(P.target.value),p(1)},className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",children:[s.jsx("option",{value:"avgDesc",children:"Avg stars (high first)"}),s.jsx("option",{value:"avgAsc",children:"Avg stars (low first)"}),s.jsx("option",{value:"alphaAsc",children:"Title AZ"}),s.jsx("option",{value:"alphaDesc",children:"Title ZA"})]}),s.jsx("span",{className:"text-slate-500",children:J?V.length===0?"No media found.":`${V.length} items`:""})]})]})]}),j&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:j}),J?g?s.jsx("div",{className:"text-sm text-slate-400",children:"Loading media"}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"rounded-md border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm text-slate-400",children:V.length===0?"No results":`${V.length} results`}),s.jsx("ul",{className:"space-y-3 mt-2",children:pe.map(P=>{const I=P.thumbnailUrl||(P.mediaType==="image"?P.mediaUrl:void 0),B=P.title||P.PK||"Untitled",k=P.mediaType==="video"?"Video":"Image",K=`/media/${encodeURIComponent(P.PK)}`;return s.jsxs("li",{className:"flex gap-3 rounded-xl border border-slate-800 bg-slate-950/60 p-3",children:[s.jsx(ie,{to:K,className:"h-16 w-24 flex-shrink-0 overflow-hidden rounded-lg border border-slate-700 bg-slate-900 flex items-center justify-center text-xl hover:border-slate-600",children:I?s.jsx("img",{src:I,alt:"",className:"h-full w-full object-cover",onError:ne=>{ne.currentTarget.style.visibility="hidden"}}):s.jsx("span",{children:P.mediaType==="video"?"":""})}),s.jsxs("div",{className:"min-w-0 flex-1 space-y-1",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("h2",{className:"truncate text-sm font-semibold text-slate-50",children:s.jsx(ie,{to:K,className:"hover:text-brand-orange",children:B})}),typeof P.averageRating=="number"&&s.jsxs("span",{className:"inline-flex items-center rounded-full bg-slate-900 px-2 py-0.5 text-[11px] text-amber-300",children:[P.averageRating.toFixed(1),""]}),s.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-900 px-2 py-0.5 text-[10px] uppercase tracking-wide text-slate-400",children:k})]}),P.description&&s.jsx("p",{className:"text-xs text-slate-300 line-clamp-3",children:P.description}),P.categories&&P.categories.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1 pt-1",children:P.categories.map(ne=>s.jsx("span",{className:"rounded-full bg-slate-900 px-2 py-0.5 text-[11px] text-slate-300",children:ne.name},ne.id))}),R&&s.jsx("div",{className:"pt-1",children:s.jsxs(ie,{to:`/admin/media/edit/${encodeURIComponent(P.PK)}`,className:"inline-flex items-center gap-1 text-[11px] text-slate-400 hover:text-slate-200",children:[s.jsx(da,{className:"h-3.5 w-3.5"}),"Edit"]})}),$&&s.jsx("div",{className:"pt-1",children:s.jsxs("label",{className:"inline-flex items-center gap-1 text-[11px] text-slate-400",children:[s.jsx("span",{children:"Rate:"}),s.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-1 py-0.5 text-[11px] text-slate-50",onChange:ne=>{const _=Number(ne.target.value);_>=1&&_<=5&&S(P.PK,_)},defaultValue:"",children:[s.jsx("option",{value:"",children:"--"}),s.jsx("option",{value:"1",children:"1"}),s.jsx("option",{value:"2",children:"2"}),s.jsx("option",{value:"3",children:"3"}),s.jsx("option",{value:"4",children:"4"}),s.jsx("option",{value:"5",children:"5"})]})]})})]})]},P.PK)})})]}):s.jsx("div",{className:"flex items-center justify-center min-h-[280px]",children:s.jsx("p",{className:"text-2xl sm:text-3xl font-light text-slate-500/80 tracking-wide animate-pulse",children:"Enter search term or select categories"})}),J&&ce>1&&s.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-center gap-2 text-xs",children:[s.jsx("button",{type:"button",disabled:h<=1,onClick:()=>p(P=>Math.max(1,P-1)),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 disabled:opacity-40",children:"Prev"}),s.jsxs("span",{className:"text-slate-500",children:["Page ",h," of ",ce]}),s.jsx("button",{type:"button",disabled:h>=ce,onClick:()=>p(P=>Math.min(ce,P+1)),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 disabled:opacity-40",children:"Next"})]})]})};function Pu(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const tb=()=>{var y;const{id:e}=ir(),{user:t}=Oe(),[n,r]=i.useState(null),[a,l]=i.useState(null),[o,c]=i.useState(!0),[d,u]=i.useState(null),f=lt(t??null,"manager"),m=e?decodeURIComponent(e):"";i.useEffect(()=>{const C=Pu();if(!C||!m){u(m?"API URL not set.":"Missing media id."),c(!1);return}let h=!1;async function p(){c(!0),u(null);try{const g=await at(`${C}/media?id=${encodeURIComponent(m)}`);if(g.status===404){h||r(null);return}if(!g.ok){const E=await g.text();throw new Error(`HTTP ${g.status}: ${E}`)}const v=await g.json();if(h)return;const j=Array.isArray(v.media)?v.media[0]:v.media;r(j??null)}catch(g){h||u((g==null?void 0:g.message)??"Failed to load media.")}finally{h||c(!1)}}return p(),()=>{h=!0}},[m]);const x=async C=>{const h=Pu();if(!(!h||!n))try{await Y(`${h}/media/stars`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mediaId:n.PK,rating:C})}),l(C)}catch{}};if(o)return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(ie,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Media"]}),s.jsx("div",{className:"text-sm text-slate-400",children:"Loading"})]});if(d||!n)return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(ie,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Media"]}),s.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:d||"Media not found."})]});const b=n.title||n.PK||"Untitled",w=n.mediaType==="video";return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsxs(ie,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Media"]}),f&&s.jsxs(ie,{to:`/admin/media/edit/${encodeURIComponent(n.PK)}`,className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(da,{className:"h-4 w-4"}),"Edit"]})]}),s.jsxs("article",{className:"rounded-xl border border-slate-800 bg-slate-950/60 overflow-hidden",children:[s.jsxs("header",{className:"p-4 sm:p-6 border-b border-slate-800",children:[s.jsx("h1",{className:"text-xl font-semibold tracking-tight text-slate-50",children:b}),s.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[typeof n.averageRating=="number"&&s.jsxs("span",{className:"inline-flex items-center rounded-full bg-slate-800 px-2 py-0.5 text-sm text-amber-300",children:[n.averageRating.toFixed(1)," average"]}),s.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-800 px-2 py-0.5 text-xs uppercase tracking-wide text-slate-400",children:w?"Video":"Image"})]}),n.description&&s.jsx("p",{className:"mt-3 text-sm text-slate-300",children:n.description}),(((y=n.categories)==null?void 0:y.length)??0)>0&&s.jsx("div",{className:"mt-3 flex flex-wrap gap-1",children:n.categories.map(C=>s.jsx("span",{className:"rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-300",children:C.name},C.id))}),t&&s.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3",children:[a!==null&&s.jsxs("span",{className:"text-xs text-slate-400",children:["Your rating: ",a,""]}),s.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-400",children:[s.jsx("span",{children:"Rate:"}),s.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-2 py-1 text-sm text-slate-50",value:a??"",onChange:C=>{const h=Number(C.target.value);h>=1&&h<=5&&x(h)},children:[s.jsx("option",{value:"",children:"--"}),s.jsx("option",{value:"1",children:"1"}),s.jsx("option",{value:"2",children:"2"}),s.jsx("option",{value:"3",children:"3"}),s.jsx("option",{value:"4",children:"4"}),s.jsx("option",{value:"5",children:"5"})]})]})]})]}),s.jsx("div",{className:"p-4 sm:p-6 bg-slate-900/40 flex justify-center items-center min-h-[200px]",children:n.mediaUrl?w?s.jsx("video",{src:n.mediaUrl,controls:!0,className:"max-w-full max-h-[70vh] rounded-lg border border-slate-700",playsInline:!0}):s.jsx("img",{src:n.mediaUrl,alt:b,className:"max-w-full max-h-[70vh] w-auto h-auto object-contain rounded-lg border border-slate-700"}):s.jsx("p",{className:"text-sm text-slate-500",children:"No media URL available."})})]})]})},_p="funkedupshift_internet_dashboard",nb=5*60*1e3;function sb(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function rb(){try{const e=localStorage.getItem(_p);if(!e)return null;const t=JSON.parse(e);return!(t!=null&&t.sites)||!(t!=null&&t.lastFetchTime)||Date.now()-new Date(t.lastFetchTime).getTime()>=nb?null:t.sites}catch{return null}}function ab(e){try{localStorage.setItem(_p,JSON.stringify({sites:e,lastFetchTime:new Date().toISOString()}))}catch{}}const lb=()=>{const{user:e}=Oe(),[t,n]=i.useState([]),[r,a]=i.useState(!0),[l,o]=i.useState(null),c=i.useCallback(async()=>{const d=sb(),u=rb();if(u&&u.length>0){n(u),a(!1),o(null);return}if(!d){o("API URL not set."),a(!1);return}a(!0),o(null);try{const f=await at(`${d}/internet-dashboard`);if(!f.ok){const b=await f.text();throw new Error(b||`HTTP ${f.status}`)}const m=await f.json(),x=Array.isArray(m.sites)?m.sites:[];x.length>0?(ab(x),n(x)):(o(u!=null&&u.length?void 0:"No data returned."),u!=null&&u.length&&n(u))}catch(f){const m=f instanceof Error?f.message:"Failed to load dashboard.";u&&u.length>0?(n(u),o(null)):(o(m),n([]))}finally{a(!1)}},[]);return i.useEffect(()=>{c()},[c]),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Internet dashboard"}),s.jsxs("div",{className:"rounded-xl border border-teal-800/60 bg-gradient-to-br from-teal-900/40 to-teal-950/60 p-4 shadow-lg",children:[s.jsx("p",{className:"text-sm font-medium text-teal-100",children:"Live status of popular sites"}),s.jsx("p",{className:"mt-1 text-xs text-teal-200/80",children:"Refreshes when data is older than 5 minutes"}),lt(e??null,"superadmin")&&s.jsx("p",{className:"mt-2",children:s.jsx(ie,{to:"/admin/internet-dashboard",className:"text-brand-orange hover:text-orange-400 text-sm",children:"Edit sites list"})})]}),r&&s.jsx("p",{className:"text-sm text-slate-400",children:"Loading"}),l&&!t.length&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:l}),s.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(140px,1fr))] gap-3",children:t.map(d=>{const u=(d.status||"down").toLowerCase(),f=u==="up"?"border-emerald-500/50 bg-emerald-500/15 text-emerald-200":u==="degraded"?"border-amber-500/50 bg-amber-500/15 text-amber-200":"border-red-500/50 bg-red-500/15 text-red-200",m=d.responseTimeMs!=null?`${d.responseTimeMs} ms`:null;return s.jsxs("div",{className:`rounded-lg border p-3 text-center text-sm transition-all duration-200 hover:scale-[1.02] hover:shadow-lg ${f}`,children:[s.jsx("a",{href:`https://${d.domain}`,target:"_blank",rel:"noopener noreferrer",className:"font-semibold break-all hover:underline block",children:d.domain}),s.jsx("div",{className:"mt-1 text-xs capitalize opacity-90",children:u}),m&&s.jsx("div",{className:"mt-0.5 text-[11px] opacity-75",children:m})]},d.domain)})})]})};function ob(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return!e||e==="API_URL_PLACEHOLDER"||!e.startsWith("http")?null:e.replace(/\/$/,"")}const ib=()=>{const{user:e}=Oe(),[t,n]=i.useState([]),[r,a]=i.useState(null),[l,o]=i.useState(!0),[c,d]=i.useState(null),u=i.useCallback(async()=>{const m=ob();if(!m){d("API URL not set. For local dev, edit public/config.js and set window.API_BASE_URL to your staging API (e.g. terraform -chdir=infra output -raw apiInvokeUrl)."),o(!1);return}o(!0),d(null);try{const x=await at(`${m}/recommended/highlights`),b=await x.text();if(!x.ok)throw new Error(b||`HTTP ${x.status}`);if(b.trim().startsWith("<"))throw new Error("API returned HTML instead of JSON. For local dev, set window.API_BASE_URL in public/config.js to your staging API URL (e.g. terraform -chdir=infra output -raw apiInvokeUrl)");let w;try{w=JSON.parse(b)}catch{throw new Error("API returned invalid JSON.")}const y=Array.isArray(w.sites)?w.sites:[];n(y),d(null)}catch(x){const b=x instanceof Error?x.message:"Failed to load.";d(b),n([])}finally{o(!1)}},[]);i.useEffect(()=>{u()},[u]);const f=lt(e??null,"manager");return s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-violet-200",children:"Highlights and faves"}),s.jsxs("div",{className:"rounded-xl border border-violet-800/60 bg-gradient-to-br from-violet-900/40 to-violet-950/60 p-4 shadow-lg",children:[s.jsx("p",{className:"text-sm font-medium text-violet-100",children:"Our curated list of exceptional sites"}),s.jsx("p",{className:"mt-1 text-xs text-violet-200/80",children:"Click a card below for more detail"}),f&&s.jsx("p",{className:"mt-2",children:s.jsx(ie,{to:"/admin/recommended?tab=highlights",className:"text-violet-300 hover:text-violet-200 font-semibold text-sm",children:"Edit sites list"})})]}),l&&s.jsx("p",{className:"text-sm text-slate-400",children:"Loading"}),c&&!t.length&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:c}),!l&&t.length===0&&!c&&s.jsxs("p",{className:"text-sm text-slate-400",children:["No sites configured yet."," ",f&&s.jsx(ie,{to:"/admin/recommended?tab=highlights",className:"text-violet-400 hover:text-violet-300",children:"Add sites"})]}),t.length>0&&s.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(260px,1fr))] gap-4",children:t.map(m=>{const x=(m.status||"up").toLowerCase(),b=x==="up"?"border-violet-400/50 bg-violet-400/20 text-violet-200":x==="degraded"?"border-violet-500/50 bg-violet-500/15 text-violet-200":"border-violet-600/50 bg-violet-600/15 text-violet-200",w=(m.description||"").trim().length>0,y=m.title||m.domain,C=m.url||`https://${m.domain}`;return s.jsxs("div",{className:`rounded-lg border p-4 text-left text-sm min-w-0 cursor-pointer transition-all duration-200 hover:scale-[1.01] hover:shadow-lg ${b}`,onClick:()=>a(m),role:"button",tabIndex:0,onKeyDown:h=>{(h.key==="Enter"||h.key===" ")&&(h.preventDefault(),a(m))},children:[s.jsxs("span",{className:"relative group block",children:[s.jsx("a",{href:C,target:"_blank",rel:"noopener noreferrer",className:"font-semibold block hover:underline break-all",onClick:h=>h.stopPropagation(),children:y}),s.jsx("span",{className:"absolute left-0 top-full mt-1 px-2 py-1.5 rounded bg-slate-900 border border-violet-700/60 text-xs text-violet-200 break-all max-w-[280px] shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-opacity z-10 pointer-events-none",role:"tooltip",children:C})]}),w&&s.jsx("div",{className:"mt-2 text-xs text-violet-200/90 leading-relaxed break-words",children:m.description})]},m.url||m.domain)})}),s.jsxs(pn,{open:!!r,onClose:()=>a(null),className:"relative z-50",children:[s.jsx("div",{className:"fixed inset-0 bg-black/50","aria-hidden":"true"}),s.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:s.jsx(pn.Panel,{className:"mx-auto w-full max-w-xl rounded-xl border border-violet-800/60 bg-gradient-to-br from-violet-900/40 to-violet-950/60 p-6 shadow-xl",children:r&&s.jsxs("div",{className:"relative flex min-h-[12rem] items-center justify-center",children:[s.jsx("button",{type:"button",onClick:()=>a(null),className:"absolute right-0 top-0 rounded p-1 text-violet-400 hover:bg-violet-800/40 hover:text-violet-200","aria-label":"Close modal",children:s.jsx(Gl,{className:"h-6 w-6"})}),r.logoUrl?s.jsx("img",{src:r.logoUrl,alt:"",className:"max-h-48 max-w-full object-contain",onError:m=>{m.currentTarget.style.visibility="hidden"}}):s.jsx("div",{className:"h-24 w-24 rounded-lg border border-violet-700/60 bg-violet-900/40"})]})})})]})]})};function cb({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{fillRule:"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.006 5.404.434c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.434 2.082-5.005Z",clipRule:"evenodd"}))}const Bp=i.forwardRef(cb);function db(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return!e||e==="API_URL_PLACEHOLDER"||!e.startsWith("http")?null:e.replace(/\/$/,"")}const ub=()=>{const{user:e}=Oe(),[t,n]=i.useState([]),[r,a]=i.useState(null),[l,o]=i.useState(!0),[c,d]=i.useState(null),u=i.useCallback(async()=>{const m=db();if(!m){d("API URL not set. For local dev, edit public/config.js and set window.API_BASE_URL to your staging API (e.g. terraform -chdir=infra output -raw apiInvokeUrl)."),o(!1);return}o(!0),d(null);try{const x=await at(`${m}/recommended/highest-rated`),b=await x.text();if(!x.ok)throw new Error(b||`HTTP ${x.status}`);if(b.trim().startsWith("<"))throw new Error("API returned HTML instead of JSON. For local dev, set window.API_BASE_URL in public/config.js to your staging API URL (e.g. terraform -chdir=infra output -raw apiInvokeUrl)");let w;try{w=JSON.parse(b)}catch{throw new Error("API returned invalid JSON.")}const y=Array.isArray(w.sites)?w.sites:[];n(y),d(null)}catch(x){const b=x instanceof Error?x.message:"Failed to load.";d(b),n([])}finally{o(!1)}},[]);i.useEffect(()=>{u()},[u]);const f=lt(e??null,"manager");return s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-amber-200",children:"Highest rated"}),s.jsxs("div",{className:"rounded-xl border border-amber-800/60 bg-gradient-to-br from-amber-900/40 to-amber-950/60 p-4 shadow-lg",children:[s.jsx("p",{className:"text-sm font-medium text-amber-100",children:"Top sites and media rated by our community"}),s.jsx("p",{className:"mt-1 text-xs text-amber-200/80",children:"Click a card below for more detail"}),f&&s.jsx("p",{className:"mt-2",children:s.jsx(ie,{to:"/admin/recommended?tab=highest-rated",className:"text-amber-300 hover:text-amber-200 font-semibold text-sm",children:"Edit list"})})]}),l&&s.jsx("p",{className:"text-sm text-slate-400",children:"Loading"}),c&&!t.length&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:c}),!l&&t.length===0&&!c&&s.jsxs("p",{className:"text-sm text-slate-400",children:["No items configured yet."," ",f&&s.jsx(ie,{to:"/admin/recommended?tab=highest-rated",className:"text-amber-400 hover:text-amber-300",children:"Generate cache"})]}),t.length>0&&s.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(260px,1fr))] gap-4",children:t.map(m=>{const x=(m.status||"up").toLowerCase(),b=x==="up"?"border-amber-400/50 bg-amber-400/20 text-amber-200":x==="degraded"?"border-amber-500/50 bg-amber-500/15 text-amber-200":"border-amber-600/50 bg-amber-600/15 text-amber-200",w=(m.description||"").trim().length>0,y=m.title||m.domain,C=m.type==="media",h=m.id||m.url||m.domain;return s.jsxs("div",{className:`rounded-lg border p-4 text-left text-sm min-w-0 cursor-pointer transition-all duration-200 hover:scale-[1.01] hover:shadow-lg ${b}`,onClick:()=>a(m),role:"button",tabIndex:0,onKeyDown:p=>{(p.key==="Enter"||p.key===" ")&&(p.preventDefault(),a(m))},children:[s.jsxs("span",{className:"relative group block",children:[C?s.jsx(ie,{to:m.link,className:"font-semibold block hover:underline break-all",onClick:p=>p.stopPropagation(),children:y}):s.jsx("a",{href:m.link,target:"_blank",rel:"noopener noreferrer",className:"font-semibold block hover:underline break-all",onClick:p=>p.stopPropagation(),children:y}),s.jsx("span",{className:"absolute left-0 top-full mt-1 px-2 py-1.5 rounded bg-slate-900 border border-amber-700/60 text-xs text-amber-200 break-all max-w-[280px] shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-opacity z-10 pointer-events-none",role:"tooltip",children:m.link})]}),m.averageRating!=null&&s.jsxs("div",{className:"mt-1 flex items-center gap-0.5 text-amber-300",children:[s.jsx(Bp,{className:"h-3.5 w-3.5"}),s.jsx("span",{className:"font-medium",children:m.averageRating})]}),w&&s.jsx("div",{className:"mt-2 text-xs text-amber-200/90 leading-relaxed break-words",children:m.description})]},h)})}),s.jsxs(pn,{open:!!r,onClose:()=>a(null),className:"relative z-50",children:[s.jsx("div",{className:"fixed inset-0 bg-black/50","aria-hidden":"true"}),s.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:s.jsx(pn.Panel,{className:"mx-auto w-full max-w-xl rounded-xl border border-amber-800/60 bg-gradient-to-br from-amber-900/40 to-amber-950/60 p-6 shadow-xl",children:r&&s.jsxs("div",{className:"relative flex min-h-[12rem] items-center justify-center",children:[s.jsx("button",{type:"button",onClick:()=>a(null),className:"absolute right-0 top-0 rounded p-1 text-amber-400 hover:bg-amber-800/40 hover:text-amber-200","aria-label":"Close modal",children:s.jsx(Gl,{className:"h-6 w-6"})}),r.logoUrl?s.jsx("img",{src:r.logoUrl,alt:"",className:"max-h-48 max-w-full object-contain",onError:m=>{m.currentTarget.style.visibility="hidden"}}):s.jsx("div",{className:"h-24 w-24 rounded-lg border border-amber-700/60 bg-amber-900/40"})]})})})]})]})};function mb(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const fb=["image/png","image/jpeg","image/jpg","image/gif","image/webp"],pb=()=>{const{user:e}=Oe(),{logo:t}=Fp(),[n,r]=i.useState(null),[a,l]=i.useState("Funkedupshift"),[o,c]=i.useState(null),[d,u]=i.useState(!1),[f,m]=i.useState(null),[x,b]=i.useState(null);if(!lt(e??null,"superadmin"))return s.jsxs("div",{className:"space-y-3",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Branding"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Only superadmin users can manage global branding assets."})]});const y=h=>{var g;const p=(g=h.target.files)==null?void 0:g[0];r(p??null),m(null),b(null),o&&(URL.revokeObjectURL(o),c(null)),p&&c(URL.createObjectURL(p))},C=async h=>{if(h.preventDefault(),b(null),m(null),!n){b("Choose an image file first.");return}const p=n.type||"image/png";if(!fb.includes(p)){b("Logo must be PNG, JPEG, GIF, or WEBP.");return}const g=mb();if(!g){b("API URL not configured.");return}const v=window;if(!v.auth||typeof v.auth.getAccessToken!="function"){b("Auth not initialized.");return}u(!0);try{const j=await Y(`${g}/branding/logo`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contentType:p,alt:a})});if(!j.ok){const R=await j.text();throw new Error(R||`Metadata request failed with ${j.status}`)}const E=await j.json();if(!E.uploadUrl)throw new Error("uploadUrl missing from response.");const $=await fetch(E.uploadUrl,{method:"PUT",headers:{"Content-Type":p},body:n});if(!$.ok)throw new Error(`Upload failed with ${$.status}`);m("Logo updated. It may take a moment for caches to refresh.")}catch(j){b((j==null?void 0:j.message)??"Failed to update logo.")}finally{u(!1)}};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Branding"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Upload a new global logo for Funkedupshift. This logo is used in the navigation bar and other shared surfaces."})]}),s.jsxs("form",{className:"space-y-4 max-w-md",onSubmit:C,children:[s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsx("label",{className:"block text-slate-200",children:"Logo image"}),t&&!o&&s.jsxs("div",{className:"space-y-1 mb-3",children:[s.jsx("p",{className:"text-slate-200",children:"Current logo"}),s.jsx("div",{className:"inline-flex items-center rounded-lg border border-slate-800 bg-slate-950 p-2",children:s.jsx("img",{src:t.url,alt:t.alt,className:"h-12 w-auto rounded-md object-contain"})})]}),s.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/jpg,image/gif,image/webp",onChange:y,className:"block w-full text-xs text-slate-300 file:mr-3 file:rounded-md file:border-0 file:bg-slate-800 file:px-3 file:py-1.5 file:text-xs file:font-semibold file:text-slate-100 hover:file:bg-slate-700"}),s.jsx("p",{className:"text-xs text-slate-500",children:"PNG, JPEG, GIF, or WEBP. Recommended square or horizontal layout."})]}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsx("label",{className:"block text-slate-200",children:"Alt text"}),s.jsx("input",{type:"text",value:a,onChange:h=>l(h.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),o&&s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsx("p",{className:"text-slate-200",children:"Preview"}),s.jsxs("div",{className:"inline-flex items-center rounded-lg border border-slate-800 bg-slate-950 p-2",children:[s.jsx("img",{src:o,alt:"Preview",className:"h-12 w-auto rounded-md object-contain"}),s.jsx("span",{className:"ml-3 text-xs text-slate-400 truncate max-w-[12rem]",children:n==null?void 0:n.name})]})]}),s.jsx("button",{type:"submit",disabled:d||!n,className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:d?"Updating":"Update logo"}),f&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-xs text-emerald-200",children:f}),x&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:x})]})]})};function Tu(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const hb=()=>{const{user:e}=Oe(),[t,n]=i.useState([]),[r,a]=i.useState("custom"),[l,o]=i.useState(null),[c,d]=i.useState(null),[u,f]=i.useState(""),[m,x]=i.useState(!0),[b,w]=i.useState(!1),[y,C]=i.useState(null),[h,p]=i.useState(null),g=lt(e??null,"superadmin"),v=i.useCallback(async()=>{const J=Tu();if(!J){p("API URL not set."),x(!1);return}x(!0),p(null);try{const V=await Y(`${J}/admin/internet-dashboard/sites`);if(!V.ok){const pe=await V.json().catch(()=>({}));throw new Error(pe.error||"Failed to load")}const ce=await V.json();n(Array.isArray(ce.sites)?ce.sites:[])}catch(V){p((V==null?void 0:V.message)??"Failed to load sites.")}finally{x(!1)}},[Y]);i.useEffect(()=>{g&&v()},[g,v]);const j=async J=>{const V=Tu();if(V){w(!0),C(null),p(null);try{const ce=await Y(`${V}/admin/internet-dashboard/sites`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({sites:J})});if(!ce.ok){const pe=await ce.json().catch(()=>({}));throw new Error(pe.error||"Failed to save")}n(J),C("Sites list saved.")}catch(ce){p((ce==null?void 0:ce.message)??"Failed to save.")}finally{w(!1)}}},E=J=>{J.preventDefault();const V=u.trim().toLowerCase().replace(/^https?:\/\//,"").replace(/\/.*$/,"");if(!V)return;if(t.includes(V)){p("Domain already in list.");return}const ce=[...t,V];f(""),p(null),j(ce)},$=i.useMemo(()=>{if(r==="custom")return[...t];const J=[...t];return J.sort((V,ce)=>r==="a-z"?V.localeCompare(ce):ce.localeCompare(V)),J},[t,r]),R=J=>{o(J)},H=(J,V)=>{J.preventDefault(),J.dataTransfer.dropEffect="move",d(V)},O=()=>{d(null)},q=()=>{o(null),d(null)},W=(J,V)=>{if(J.preventDefault(),d(null),r!=="custom"||l===null||l===V){o(null);return}const ce=[...$],[pe]=ce.splice(l,1);ce.splice(V,0,pe),n(ce),j(ce),o(null)},re=J=>{const V=t.filter(ce=>ce!==J);if(V.length===0){p("At least one site is required.");return}p(null),j(V)};return g?m?s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Internet Dashboard"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Loading sites"})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ie,{to:"/internet-dashboard",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Internet Dashboard"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Internet Dashboard"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Edit the list of sites shown on the Internet Dashboard. Only SuperAdmin can change this."})]}),s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-4 max-w-2xl",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsxs("h2",{className:"text-base font-semibold text-slate-200",children:["Sites list (",t.length,")"]}),s.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[s.jsx("button",{type:"button",onClick:()=>a("custom"),className:`rounded px-2 py-0.5 text-xs font-medium ${r==="custom"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"Custom"}),s.jsx("button",{type:"button",onClick:()=>a("a-z"),className:`rounded px-2 py-0.5 text-xs font-medium ${r==="a-z"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"AZ"}),s.jsx("button",{type:"button",onClick:()=>a("z-a"),className:`rounded px-2 py-0.5 text-xs font-medium ${r==="z-a"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"ZA"})]})]}),s.jsxs("form",{onSubmit:E,className:"flex gap-2 flex-wrap items-end",children:[s.jsxs("div",{className:"flex-1 min-w-[12rem]",children:[s.jsx("label",{htmlFor:"newDomain",className:"block text-xs font-medium text-slate-400 mb-1",children:"Add domain"}),s.jsx("input",{id:"newDomain",type:"text",value:u,onChange:J=>f(J.target.value),placeholder:"example.com",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsx("button",{type:"submit",disabled:b||!u.trim(),className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:"Add"})]}),s.jsx("ul",{className:"space-y-2",children:$.map((J,V)=>s.jsxs("li",{draggable:r==="custom",onDragStart:()=>R(V),onDragOver:ce=>H(ce,V),onDragLeave:O,onDragEnd:q,onDrop:ce=>W(ce,V),className:`flex items-center gap-2 rounded-md border px-3 py-2 ${l===V?"border-brand-orange bg-slate-800 opacity-60":c===V?"border-brand-orange/70 bg-slate-800/80":"border-slate-700 bg-slate-900"} ${r==="custom"?"cursor-grab active:cursor-grabbing":""}`,children:[r==="custom"&&s.jsx(qc,{className:"h-4 w-4 flex-shrink-0 text-slate-500","aria-hidden":!0}),s.jsx("span",{className:"font-medium text-slate-200 break-all flex-1",children:J}),s.jsx("button",{type:"button",onClick:()=>re(J),disabled:b||t.length<=1,className:"flex-shrink-0 rounded-md border border-red-500/60 bg-red-500/10 px-2 py-1 text-xs font-medium text-red-300 hover:bg-red-500/20 disabled:opacity-50",children:"Remove"})]},J))}),y&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:y}),h&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:h})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Internet Dashboard"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Only SuperAdmin users can edit the dashboard sites list."})]})};function Uo(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function Ru(e){const t=e.trim();return t?t.toLowerCase().startsWith("http://")||t.toLowerCase().startsWith("https://")?t:`https://${t.replace(/^https?:\/\//i,"")}`:null}function Lu(e){try{return new URL(e.startsWith("http")?e:`https://${e}`).hostname}catch{return e}}const wr=[{id:"highlights",label:"Highlights",fetchPath:"/admin/recommended/highlights/sites",savePath:"/admin/recommended/highlights/sites",generatePath:"/admin/recommended/highlights/generate",generateLabel:"Generate new cache",listLabel:"Highlights list",emptyMessage:"No highlights yet. Generate from the highlight category or add a URL above.",generateSuccessMessage:"Cache generated from sites in the highlight category.",saveSuccessMessage:"Highlights list saved.",buttonClass:"bg-violet-600 hover:bg-violet-500",viewPath:"/recommended/highlights"},{id:"highestRated",label:"Highest Rated",fetchPath:"/admin/recommended/highest-rated/sites",savePath:"/admin/recommended/highest-rated/sites",generatePath:"/admin/recommended/highest-rated/generate",generateLabel:"Generate new cache",listLabel:"Highest rated list",emptyMessage:"No items yet. Generate from top 12 by star rating or add a URL above.",generateSuccessMessage:"Cache generated from top 12 sites and media by star rating.",saveSuccessMessage:"Highest rated list saved.",buttonClass:"bg-amber-600 hover:bg-amber-500",viewPath:"/recommended/highest-rated"}],Au=({config:e})=>{const[t,n]=i.useState([]),[r,a]=i.useState(null),[l,o]=i.useState(!1),[c,d]=i.useState("custom"),[u,f]=i.useState(null),[m,x]=i.useState(null),[b,w]=i.useState(""),[y,C]=i.useState(null),[h,p]=i.useState(""),[g,v]=i.useState(!1),[j,E]=i.useState(null),[$,R]=i.useState(null),H=i.useRef([]);i.useEffect(()=>{H.current=t},[t]);const O=i.useCallback(async()=>{const M=Uo();if(M){R(null);try{const F=await Y(`${M}${e.fetchPath}`);if(!F.ok){const T=await F.json().catch(()=>({}));throw new Error(T.error||"Failed to load")}const Z=await F.json(),N=Array.isArray(Z.sites)?Z.sites:[];n(N.map(T=>typeof T=="string"?{type:"site",url:T,description:""}:(T.type||"site")==="media"?{type:"media",id:T.id||"",description:T.description||"",title:T.title,thumbnailKey:T.thumbnailKey,averageRating:T.averageRating}:{type:"site",url:T.url||"",description:T.description||"",title:T.title,logoKey:T.logoKey,averageRating:T.averageRating})),a(Z.updatedAt??null)}catch(F){R((F==null?void 0:F.message)??"Failed to load sites.")}}},[Y,e.fetchPath]);i.useEffect(()=>{O()},[O]);const q=async()=>{const M=Uo();if(M){o(!0),E(null),R(null);try{const F=await Y(`${M}${e.generatePath}`,{method:"POST"}),Z=await F.json();if(!F.ok)throw new Error(Z.error||"Failed to generate");const N=Array.isArray(Z.sites)?Z.sites:[];n(N.map(T=>typeof T=="string"?{type:"site",url:T,description:""}:(T.type||"site")==="media"?{type:"media",id:T.id||"",description:T.description||"",title:T.title,thumbnailKey:T.thumbnailKey,averageRating:T.averageRating}:{type:"site",url:T.url||"",description:T.description||"",title:T.title,logoKey:T.logoKey,averageRating:T.averageRating})),a(Z.updatedAt??null),E(e.generateSuccessMessage)}catch(F){R((F==null?void 0:F.message)??"Failed to generate cache.")}finally{o(!1)}}},W=async M=>{const F=Uo();if(F){v(!0),E(null),R(null);try{const Z={sites:M.map(G=>G.type==="media"?{type:"media",id:G.id,description:G.description,...G.title&&{title:G.title},...G.thumbnailKey&&{thumbnailKey:G.thumbnailKey},...G.averageRating!=null&&{averageRating:G.averageRating}}:{type:"site",url:G.url,description:G.description,...G.title&&{title:G.title},...G.logoKey&&{logoKey:G.logoKey},...G.averageRating!=null&&{averageRating:G.averageRating}})},N=await Y(`${F}${e.savePath}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Z)}),T=await N.json();if(!N.ok)throw new Error(T.error||"Failed to save");n(M),E(e.saveSuccessMessage),a(T.updatedAt??null)}catch(Z){R((Z==null?void 0:Z.message)??"Failed to save.")}finally{v(!1)}}},re=M=>{M.preventDefault();const F=Ru(b);if(F){if(t.some(Z=>Z.url===F)){R("URL already in list.");return}w(""),R(null),W([...t,{type:"site",url:F,description:""}])}},J=M=>M.type==="media"?(M.title||M.id||"").toLowerCase():Lu(M.url||"").toLowerCase(),V=i.useMemo(()=>{if(c==="custom")return[...t];const M=[...t];return M.sort((F,Z)=>{const N=J(F),T=J(Z);return c==="a-z"?N.localeCompare(T):T.localeCompare(N)}),M},[t,c]),ce=M=>{const F=V[M];F.type!=="media"&&(C(M),p(F.url||""))},pe=()=>{if(y===null)return;const M=Ru(h);if(!M){R("Invalid URL.");return}const F=V[y];if(F.type==="media")return;if(t.some(N=>N.type==="site"&&N.url===M&&N.url!==F.url)){R("URL already in list.");return}R(null);const Z=t.map(N=>N.type==="site"&&N.url===F.url?{...N,url:M}:N);n(Z),W(Z),C(null),p("")},S=()=>{C(null),p("")},P=(M,F)=>{n(Z=>Z.map(N=>(N.type==="media"?N.id===M.id:N.url===M.url)?{...N,description:F.slice(0,255)}:N))},I=()=>{W(H.current)},B=M=>f(M),k=(M,F)=>{M.preventDefault(),M.dataTransfer.dropEffect="move",x(F)},K=()=>x(null),ne=()=>{f(null),x(null)},_=(M,F)=>{if(M.preventDefault(),x(null),c!=="custom"||u===null||u===F){f(null);return}const Z=[...V],[N]=Z.splice(u,1);Z.splice(F,0,N),n(Z),W(Z),f(null)},z=M=>{R(null),W(t.filter(F=>F.type==="media"?F.id!==M.id:F.url!==M.url))},U=r?new Date(r).toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"}):null;return s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-4 max-w-2xl",children:[s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsxs("h2",{className:"text-base font-semibold text-slate-200",children:[e.listLabel," (",t.length,")"]}),U&&s.jsxs("span",{className:"text-xs text-slate-500",children:["Cache was last updated ",U]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ie,{to:e.viewPath,className:"text-sm text-slate-400 hover:text-slate-200",children:"View"}),s.jsx("button",{type:"button",onClick:q,disabled:l,className:`rounded-md px-4 py-2 text-sm font-medium text-white disabled:opacity-50 ${e.buttonClass}`,children:l?"Generating":e.generateLabel})]})]}),s.jsx("div",{className:"flex flex-wrap items-center gap-3",children:s.jsx("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:["custom","a-z","z-a"].map(M=>s.jsx("button",{type:"button",onClick:()=>d(M),className:`rounded px-2 py-0.5 text-xs font-medium ${c===M?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:M==="custom"?"Custom":M==="a-z"?"AZ":"ZA"},M))})}),s.jsxs("form",{onSubmit:re,className:"flex gap-2 flex-wrap items-end",children:[s.jsxs("div",{className:"flex-1 min-w-[12rem]",children:[s.jsx("label",{htmlFor:"newUrl",className:"block text-xs font-medium text-slate-400 mb-1",children:"Add URL"}),s.jsx("input",{id:"newUrl",type:"text",value:b,onChange:M=>w(M.target.value),placeholder:"https://example.com or example.com",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsx("button",{type:"submit",disabled:g||!b.trim(),className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:"Add"})]}),s.jsx("ul",{className:"space-y-3",children:V.map((M,F)=>s.jsxs("li",{draggable:c==="custom"&&y===null,onDragStart:()=>B(F),onDragOver:Z=>k(Z,F),onDragLeave:K,onDragEnd:ne,onDrop:Z=>_(Z,F),className:`flex flex-col gap-2 rounded-md border px-3 py-2 ${u===F?"border-brand-orange bg-slate-800 opacity-60":m===F?"border-brand-orange/70 bg-slate-800/80":"border-slate-700 bg-slate-900"} ${c==="custom"&&y===null?"cursor-grab active:cursor-grabbing":""}`,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[c==="custom"&&s.jsx(qc,{className:"h-4 w-4 flex-shrink-0 text-slate-500","aria-hidden":!0}),y===F?s.jsx("input",{type:"text",value:h,onChange:Z=>p(Z.target.value),onBlur:pe,onKeyDown:Z=>{Z.key==="Enter"&&pe(),Z.key==="Escape"&&S()},autoFocus:!0,className:"flex-1 rounded-md border border-slate-600 bg-slate-900 px-2 py-1 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}):M.type==="media"?s.jsx("span",{className:"font-medium text-slate-200 break-all flex-1",children:M.title||M.id}):s.jsx("button",{type:"button",onClick:()=>ce(F),className:"font-medium text-slate-200 break-all flex-1 text-left hover:text-brand-orange hover:underline",children:Lu(M.url||"")}),e.id==="highestRated"&&M.averageRating!=null&&s.jsxs("span",{className:"flex items-center gap-0.5 text-amber-400 text-xs",children:[s.jsx(Bp,{className:"h-3.5 w-3.5"}),M.averageRating]}),s.jsx("button",{type:"button",onClick:()=>z(M),disabled:g||y!==null,className:"flex-shrink-0 rounded-md border border-red-500/60 bg-red-500/10 px-2 py-1 text-xs font-medium text-red-300 hover:bg-red-500/20 disabled:opacity-50",children:"Remove"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:`desc-${e.id}-${F}`,className:"block text-xs font-medium text-slate-400 mb-0.5",children:"Description"}),s.jsx("input",{id:`desc-${e.id}-${F}`,type:"text",value:M.description,onChange:Z=>P(M,Z.target.value),onBlur:I,maxLength:255,placeholder:"One-line description (255 chars max)",disabled:g,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange disabled:opacity-50"}),s.jsxs("span",{className:"text-[10px] text-slate-500",children:[M.description.length,"/255"]})]})]},M.id||M.url||F))}),V.length===0&&s.jsx("p",{className:"text-sm text-slate-500",children:e.emptyMessage}),j&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:j}),$&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:$})]})},xb=()=>{const{user:e}=Oe(),[t,n]=Yt(),r=t.get("tab"),a=r==="highest-rated"||r==="highestRated"?"highestRated":"highlights",[l,o]=i.useState(a);i.useEffect(()=>{o(r==="highest-rated"||r==="highestRated"?"highestRated":"highlights")},[r]);const c=u=>{o(u),n({tab:u==="highestRated"?"highest-rated":u},{replace:!0})},d=lt(e??null,"manager");return wr.find(u=>u.id===l)??wr[0],d?s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ie,{to:"/recommended/highlights",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Recommended"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Recommended Admin"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manage highlighted and highest-rated site lists. Generate from categories or star ratings, or edit manually."})]}),s.jsx("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:wr.map(u=>s.jsx("button",{type:"button",onClick:()=>c(u.id),className:`px-4 py-2 rounded-md text-sm font-medium ${l===u.id?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:u.label},u.id))}),l==="highlights"&&s.jsx(Au,{config:wr[0]}),l==="highestRated"&&s.jsx(Au,{config:wr[1]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Recommended Admin"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Only Manager or SuperAdmin users can edit the recommended caches."})]})},$a={admin:"SuperAdmin",manager:"Manager",user:"User"},$u=["admin","manager","user"],Yi=[{value:-8,label:"UTC-8"},{value:-5,label:"UTC-5"},{value:0,label:"UTC+0/GMT"}];function cn(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function gb(e,t,n){if(!e&&!n)return"";if(!e)return n?`from ${n}`:"";try{const r=new Date(e);if(isNaN(r.getTime()))return e+(n?` from ${n}`:"");const a=r.getTime()+(t||0)*36e5,l=new Date(a),o=y=>y<10?"0"+y:""+y,c=l.getUTCFullYear(),d=o(l.getUTCMonth()+1),u=o(l.getUTCDate()),f=o(l.getUTCHours()),m=o(l.getUTCMinutes()),x=Yi.find(y=>y.value===t),b=x?x.label:t<0?"UTC"+t:"UTC+"+t;let w=`${c}-${d}-${u} ${f}:${m} ${b}`;return n&&(w+=` from ${n}`),w}catch{return e+(n?` from ${n}`:"")}}const yb=()=>{const{user:e}=Oe(),t=_t(),[n,r]=Yt(),a=n.get("tab"),l=a==="groups"?"groups":a==="roles"?"roles":"users",[o,c]=i.useState(l);i.useEffect(()=>{c(a==="groups"?"groups":a==="roles"?"roles":"users")},[a]);const d=L=>{c(L);const te=new URLSearchParams(n);L==="groups"?te.set("tab","groups"):L==="roles"?te.set("tab","roles"):te.delete("tab"),r(te)},[u,f]=i.useState([]),[m,x]=i.useState(!0),[b,w]=i.useState(null),[y,C]=i.useState(""),[h,p]=i.useState(-8),[g,v]=i.useState([]),[j,E]=i.useState(!0),[$,R]=i.useState(null),[H,O]=i.useState(""),[q,W]=i.useState(""),[re,J]=i.useState(""),[V,ce]=i.useState(!1),[pe,S]=i.useState(null),[P,I]=i.useState(null),[B,k]=i.useState(""),[K,ne]=i.useState(""),[_,z]=i.useState(!1),[U,M]=i.useState(null),[F,Z]=i.useState(null),[N,T]=i.useState([]),[G,Q]=i.useState(!0),[D,X]=i.useState(null),[ae,ue]=i.useState(""),[xe,ye]=i.useState([]),[be,Ke]=i.useState([]),[ot,le]=i.useState(!1),[Ne,Fe]=i.useState(null),[Te,Se]=i.useState(null),[_e,Be]=i.useState([]),[Xe,it]=i.useState([]),[nt,$t]=i.useState(!1),[gn,Et]=i.useState(null),[ln,oe]=i.useState(null),ge=lt(e??null,"manager"),We=(e==null?void 0:e.role)==="superadmin",$e=async L=>{var de;const te=cn();if(!te){w("API URL not set."),x(!1);return}if(!((de=window.auth)!=null&&de.getAccessToken)){w("Sign in required."),x(!1);return}x(!0),w(null);try{let je=`${te}/admin/users`;L&&(je+=`?paginationToken=${encodeURIComponent(L)}`);const we=await Y(je);if(!we.ok){const Zt=await we.json().catch(()=>({}));throw new Error(Zt.error||"Failed to load users")}const Pe=await we.json();f(Zt=>L?[...Zt,...Pe.users??[]]:Pe.users??[]),C(Pe.paginationToken??"")}catch(je){w((je==null?void 0:je.message)??"Failed to load users")}finally{x(!1)}},ke=async L=>{const te=cn();if(!te)return{cognitoGroups:[],customGroups:[]};try{const ve=await Y(`${te}/admin/users/${encodeURIComponent(L.username)}/groups`);if(!ve.ok)return{cognitoGroups:[],customGroups:[]};const de=await ve.json();return{cognitoGroups:de.cognitoGroups??[],customGroups:de.customGroups??[]}}catch{return{cognitoGroups:[],customGroups:[]}}},ee=async()=>{var ve;const L=cn();if(!L){R("API URL not set."),E(!1);return}if(!((ve=window.auth)!=null&&ve.getAccessToken)){R("Sign in required."),E(!1);return}E(!0),R(null);try{const de=await Y(`${L}/admin/groups`);if(!de.ok)throw new Error(await de.text());const we=((await de.json()).groups??[]).map(Pe=>({name:Pe.name??(Pe.PK??"").replace("GROUP#",""),description:Pe.description,permissions:Array.isArray(Pe.permissions)?Pe.permissions:[]}));we.sort((Pe,Zt)=>Pe.name.toLowerCase().localeCompare(Zt.name.toLowerCase())),v(we)}catch(de){R((de==null?void 0:de.message)??"Failed to load groups")}finally{E(!1)}};i.useEffect(()=>{const L=parseInt(sessionStorage.getItem("funkedupshift_lastlogin_tz")??"-8",10);!isNaN(L)&&Yi.some(te=>te.value===L)&&p(L)},[]),i.useEffect(()=>{ge&&o==="users"&&$e()},[ge,o]),i.useEffect(()=>{ge&&(o==="groups"||o==="roles")&&ee()},[ge,o]);const me=async()=>{var ve;const L=cn();if(!L){X("API URL not set."),Q(!1);return}if(!((ve=window.auth)!=null&&ve.getAccessToken)){X("Sign in required."),Q(!1);return}Q(!0),X(null);try{const de=await Y(`${L}/admin/roles`);if(!de.ok){const we=await de.json().catch(()=>({}));throw new Error(we.error||"Failed to load roles")}const je=await de.json();T(je.roles??[])}catch(de){X((de==null?void 0:de.message)??"Failed to load roles")}finally{Q(!1)}};i.useEffect(()=>{We&&o==="roles"&&me()},[We,o]);const Ie=L=>{t(`/admin/users/edit?username=${encodeURIComponent(L.username)}&email=${encodeURIComponent(L.email??"")}&status=${encodeURIComponent(L.status??"")}`)},Ue=(L,te)=>{const ve=[];return(L||[]).forEach(de=>{const je=$a[de]||de,we=de==="admin"?"bg-amber-500/20 text-amber-200":de==="manager"?"bg-blue-500/20 text-blue-200":"bg-slate-600/30 text-slate-300";ve.push(s.jsx("span",{className:`inline-block px-2 py-0.5 rounded text-xs mr-1 ${we}`,children:je},`c-${de}`))}),(te||[]).forEach(de=>{ve.push(s.jsx("span",{className:"inline-block px-2 py-0.5 rounded text-xs mr-1 bg-emerald-500/20 text-emerald-200",children:de},`x-${de}`))}),ve.length?ve:s.jsx("span",{className:"text-slate-500",children:""})},Ee=L=>{I(L.name),k(L.description??""),ne((L.permissions??[]).join(", ")),M(null)},Ae=()=>{I(null),k(""),ne(""),M(null)},Me=async L=>{var we;L.preventDefault();const te=H.trim();if(!te)return;const ve=cn();if(!ve||!((we=window.auth)!=null&&we.getAccessToken))return;const je=re.split(",").map(Pe=>Pe.trim()).filter(Boolean);ce(!0),S(null),R(null);try{const Pe=await Y(`${ve}/admin/groups`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:te,description:q.trim(),permissions:je})});if(!Pe.ok){const Zt=await Pe.json().catch(()=>({}));throw new Error(Zt.error||"Failed to create group")}O(""),W(""),J(""),S("Group created."),ee()}catch(Pe){R((Pe==null?void 0:Pe.message)??"Failed to create group")}finally{ce(!1)}},yn=async L=>{var je;if(L.preventDefault(),!P)return;const te=cn();if(!te||!((je=window.auth)!=null&&je.getAccessToken))return;const de=K.split(",").map(we=>we.trim()).filter(Boolean);z(!0),M(null);try{const we=await Y(`${te}/admin/groups/${encodeURIComponent(P)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:B,permissions:de})});if(!we.ok){const Pe=await we.json().catch(()=>({}));throw new Error(Pe.error||"Failed to update group")}v(Pe=>Pe.map(Zt=>Zt.name===P?{...Zt,description:B,permissions:de}:Zt)),Ae()}catch(we){M((we==null?void 0:we.message)??"Failed to update group")}finally{z(!1)}},vn=async L=>{var de;if(!window.confirm(`Delete group "${L}"? Members will lose access.`))return;const te=cn();if(!(!te||!((de=window.auth)!=null&&de.getAccessToken))){Z(L);try{const je=await Y(`${te}/admin/groups/${encodeURIComponent(L)}`,{method:"DELETE"});if(!je.ok){const we=await je.json().catch(()=>({}));throw new Error(we.error||"Failed to delete group")}v(we=>we.filter(Pe=>Pe.name!==L)),P===L&&Ae()}catch(je){R((je==null?void 0:je.message)??"Failed to delete group")}finally{Z(null)}}},gt=L=>{const te=parseInt(L.target.value,10);p(te),sessionStorage.setItem("funkedupshift_lastlogin_tz",String(te))},ut=(L,te,ve)=>{te.includes(L)?ve(te.filter(de=>de!==L)):ve([...te,L])},bn=(L,te,ve)=>{te.includes(L)?ve(te.filter(de=>de!==L)):ve([...te,L])},dr=async L=>{var je;L.preventDefault();const te=ae.trim();if(!te)return;const ve=cn();if(!(!ve||!((je=window.auth)!=null&&je.getAccessToken))){le(!0),Fe(null),X(null);try{const we=await Y(`${ve}/admin/roles`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:te,cognitoGroups:xe,customGroups:be})});if(!we.ok){const Pe=await we.json().catch(()=>({}));throw new Error(Pe.error||"Failed to create role")}ue(""),ye([]),Ke([]),Fe("Role created."),me()}catch(we){X((we==null?void 0:we.message)??"Failed to create role")}finally{le(!1)}}},Yl=L=>{Se(L.name),Be(L.cognitoGroups??[]),it(L.customGroups??[]),Et(null)},Bt=()=>{Se(null),Be([]),it([]),Et(null)},A=async L=>{var de;if(L.preventDefault(),!Te)return;const te=cn();if(!(!te||!((de=window.auth)!=null&&de.getAccessToken))){$t(!0),Et(null);try{const je=await Y(`${te}/admin/roles/${encodeURIComponent(Te)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({cognitoGroups:_e,customGroups:Xe})});if(!je.ok){const we=await je.json().catch(()=>({}));throw new Error(we.error||"Failed to update role")}T(we=>we.map(Pe=>Pe.name===Te?{...Pe,cognitoGroups:_e,customGroups:Xe}:Pe)),Bt()}catch(je){Et((je==null?void 0:je.message)??"Failed to update role")}finally{$t(!1)}}},he=async L=>{var de;if(!window.confirm(`Delete role "${L}"?`))return;const te=cn();if(!(!te||!((de=window.auth)!=null&&de.getAccessToken))){oe(L);try{const je=await Y(`${te}/admin/roles/${encodeURIComponent(L)}`,{method:"DELETE"});if(!je.ok){const we=await je.json().catch(()=>({}));throw new Error(we.error||"Failed to delete role")}T(we=>we.filter(Pe=>Pe.name!==L)),Te===L&&Bt()}catch(je){X((je==null?void 0:je.message)??"Failed to delete role")}finally{oe(null)}}};return ge?s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ie,{to:"/",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Home"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Membership"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manage users and groups."})]}),s.jsxs("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:[s.jsx("button",{type:"button",onClick:()=>d("users"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="users"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Users"}),s.jsx("button",{type:"button",onClick:()=>d("groups"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="groups"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Groups"}),We&&s.jsx("button",{type:"button",onClick:()=>d("roles"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="roles"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Roles"})]}),o==="users"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("label",{htmlFor:"tz-select",className:"text-slate-500",children:"Last login timezone:"}),s.jsx("select",{id:"tz-select",value:h,onChange:gt,className:"rounded border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 text-sm",children:Yi.map(L=>s.jsx("option",{value:L.value,children:L.label},L.value))})]}),b&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:b}),s.jsx("div",{className:"overflow-x-auto rounded-lg border border-slate-800",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-800",children:[s.jsx("thead",{className:"bg-slate-900/80",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Email"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Status"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Last login"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"System Roles"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Custom Groups"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-800",children:m&&u.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-slate-500",children:"Loading"})}):u.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-slate-500",children:"No users found."})}):u.map(L=>s.jsx(vb,{user:L,tzOffset:h,formatLastLogin:gb,renderGroupBadges:Ue,loadUserGroups:ke,onClick:()=>Ie(L)},L.username))})]})}),y&&s.jsx("div",{className:"flex justify-center",children:s.jsx("button",{type:"button",onClick:()=>$e(y),disabled:m,className:"rounded-md border border-slate-700 px-4 py-2 text-sm font-medium text-slate-200 hover:bg-slate-800 disabled:opacity-50",children:m?"Loading":"Load more"})})]}),o==="groups"&&s.jsxs(s.Fragment,{children:[s.jsxs("form",{className:"space-y-3 max-w-md",onSubmit:Me,children:[s.jsx("h2",{className:"text-sm font-medium text-slate-300",children:"Create group"}),s.jsx("input",{type:"text",value:H,onChange:L=>O(L.target.value),placeholder:"Name (alphanumeric, underscore, hyphen)",required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("input",{type:"text",value:q,onChange:L=>W(L.target.value),placeholder:"Description (optional)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("input",{type:"text",value:re,onChange:L=>J(L.target.value),placeholder:"Permissions (comma-separated, e.g. media:edit, sites:add)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("button",{type:"submit",disabled:V||!H.trim(),className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:V?"Creating":"Create"}),pe&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:pe}),$&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:$})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-sm font-medium text-slate-300 mb-2",children:"Custom groups"}),j?s.jsx("p",{className:"text-sm text-slate-500",children:"Loading"}):g.length===0?s.jsx("p",{className:"text-sm text-slate-500",children:"No custom groups yet. Create one above."}):s.jsx("ul",{className:"space-y-2",children:g.map(L=>s.jsx("li",{className:"rounded-lg border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm",children:P===L.name?s.jsxs("form",{onSubmit:yn,className:"space-y-2",children:[s.jsx("span",{className:"font-medium text-slate-200",children:L.name}),s.jsx("input",{type:"text",value:B,onChange:te=>k(te.target.value),placeholder:"Description (optional)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("input",{type:"text",value:K,onChange:te=>ne(te.target.value),placeholder:"Permissions (comma-separated)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsxs("div",{className:"flex gap-2 flex-wrap",children:[s.jsx("button",{type:"submit",disabled:_,className:"rounded-md bg-brand-orange px-3 py-1.5 text-xs font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:_?"Saving":"Save"}),s.jsx("button",{type:"button",onClick:Ae,className:"rounded-md border border-slate-700 px-3 py-1.5 text-xs font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"}),s.jsx("button",{type:"button",onClick:()=>vn(L.name),disabled:F===L.name,className:"rounded-md border border-red-500/60 px-3 py-1.5 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:F===L.name?"Deleting":"Delete"})]}),U&&s.jsx("p",{className:"text-xs text-red-400",children:U})]}):s.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("span",{className:"font-medium text-slate-200",children:L.name}),L.description&&s.jsx("span",{className:"text-slate-500 ml-2",children:L.description}),L.permissions&&L.permissions.length>0&&s.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Permissions: ",L.permissions.join(", ")]})]}),s.jsxs("div",{className:"flex gap-2 shrink-0",children:[s.jsx("button",{type:"button",onClick:()=>Ee(L),className:"rounded-md border border-slate-700 px-2 py-1 text-xs font-medium text-slate-300 hover:bg-slate-800",children:"Edit"}),s.jsx("button",{type:"button",onClick:()=>vn(L.name),disabled:F===L.name,className:"rounded-md border border-red-500/60 px-2 py-1 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:F===L.name?"Deleting":"Delete"})]})]})},L.name))})]})]}),o==="roles"&&We&&s.jsxs(s.Fragment,{children:[s.jsxs("form",{className:"space-y-3 max-w-md",onSubmit:dr,children:[s.jsx("h2",{className:"text-sm font-medium text-slate-300",children:"Create role"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Define a named role by selecting Cognito groups and custom groups. Use for impersonation."}),s.jsx("input",{type:"text",value:ae,onChange:L=>ue(L.target.value),placeholder:"Role name (e.g. Squash Manager)",required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Cognito groups"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:$u.map(L=>s.jsx("button",{type:"button",onClick:()=>ut(L,xe,ye),className:`rounded-md px-2 py-1 text-xs font-medium ${xe.includes(L)?"bg-blue-500/30 text-blue-200":"border border-slate-600 text-slate-400 hover:bg-slate-800"}`,children:$a[L]||L},L))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Custom groups"}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[g.map(L=>s.jsx("button",{type:"button",onClick:()=>bn(L.name,be,Ke),className:`rounded-md px-2 py-1 text-xs font-medium ${be.includes(L.name)?"bg-emerald-500/30 text-emerald-200":"border border-slate-600 text-slate-400 hover:bg-slate-800"}`,children:L.name},L.name)),g.length===0&&s.jsx("span",{className:"text-xs text-slate-500",children:"Create groups first."})]})]}),s.jsx("button",{type:"submit",disabled:ot||!ae.trim(),className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:ot?"Creating":"Create"}),Ne&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:Ne}),D&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:D})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-sm font-medium text-slate-300 mb-2",children:"Defined roles"}),G?s.jsx("p",{className:"text-sm text-slate-500",children:"Loading"}):N.length===0?s.jsx("p",{className:"text-sm text-slate-500",children:"No roles yet. Create one above."}):s.jsx("ul",{className:"space-y-2",children:N.map(L=>s.jsx("li",{className:"rounded-lg border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm",children:Te===L.name?s.jsxs("form",{onSubmit:A,className:"space-y-2",children:[s.jsx("span",{className:"font-medium text-slate-200",children:L.name}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Cognito groups"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:$u.map(te=>s.jsx("button",{type:"button",onClick:()=>ut(te,_e,Be),className:`rounded-md px-2 py-1 text-xs ${_e.includes(te)?"bg-blue-500/30 text-blue-200":"border border-slate-600 text-slate-400"}`,children:$a[te]||te},te))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Custom groups"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(te=>s.jsx("button",{type:"button",onClick:()=>bn(te.name,Xe,it),className:`rounded-md px-2 py-1 text-xs ${Xe.includes(te.name)?"bg-emerald-500/30 text-emerald-200":"border border-slate-600 text-slate-400"}`,children:te.name},te.name))})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"submit",disabled:nt,className:"rounded-md bg-brand-orange px-3 py-1.5 text-xs font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:nt?"Saving":"Save"}),s.jsx("button",{type:"button",onClick:Bt,className:"rounded-md border border-slate-700 px-3 py-1.5 text-xs text-slate-300 hover:bg-slate-800",children:"Cancel"}),s.jsx("button",{type:"button",onClick:()=>he(L.name),disabled:ln===L.name,className:"rounded-md border border-red-500/60 px-3 py-1.5 text-xs text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:ln===L.name?"Deleting":"Delete"})]}),gn&&s.jsx("p",{className:"text-xs text-red-400",children:gn})]}):s.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("span",{className:"font-medium text-slate-200",children:L.name}),s.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[(L.cognitoGroups??[]).map(te=>s.jsx("span",{className:"inline-block px-2 py-0.5 rounded text-xs bg-blue-500/20 text-blue-200",children:$a[te]||te},`c-${te}`)),(L.customGroups??[]).map(te=>s.jsx("span",{className:"inline-block px-2 py-0.5 rounded text-xs bg-emerald-500/20 text-emerald-200",children:te},`x-${te}`))]})]}),s.jsxs("div",{className:"flex gap-2 shrink-0",children:[s.jsx("button",{type:"button",onClick:()=>Yl(L),className:"rounded-md border border-slate-700 px-2 py-1 text-xs text-slate-300 hover:bg-slate-800",children:"Edit"}),s.jsx("button",{type:"button",onClick:()=>he(L.name),disabled:ln===L.name,className:"rounded-md border border-red-500/60 px-2 py-1 text-xs text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:ln===L.name?"Deleting":"Delete"})]})]})},L.name))})]})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Membership"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})},vb=({user:e,tzOffset:t,formatLastLogin:n,renderGroupBadges:r,loadUserGroups:a,onClick:l})=>{const[o,c]=i.useState(null);return i.useEffect(()=>{let d=!1;return a(e).then(u=>{d||c(u)}),()=>{d=!0}},[e.username]),s.jsxs("tr",{className:"cursor-pointer hover:bg-slate-800/50 transition-colors",onClick:l,children:[s.jsx("td",{className:"px-4 py-3 text-sm text-slate-200",children:e.email||e.username||""}),s.jsx("td",{className:"px-4 py-3 text-sm text-slate-400",children:e.status||""}),s.jsx("td",{className:"px-4 py-3 text-sm text-slate-400",children:n(e.lastLoginAt??"",t,e.lastLoginIp)}),s.jsx("td",{className:"px-4 py-3 text-sm",children:o?r(o.cognitoGroups,[]):s.jsx("span",{className:"text-slate-500",children:""})}),s.jsx("td",{className:"px-4 py-3 text-sm",children:o?r([],o.customGroups):s.jsx("span",{className:"text-slate-500",children:""})})]})};function ls(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Iu=100,bb=5*1024*1024,wb=()=>{const e=_t(),{user:t}=Oe(),[n,r]=Yt(),a=n.get("tab"),l=a==="categories"?"categories":"add",[o,c]=i.useState(l);i.useEffect(()=>{c(a==="categories"?"categories":"add")},[a]);const d=ee=>{c(ee);const me=new URLSearchParams(n);ee==="categories"?me.set("tab","categories"):me.delete("tab"),r(me)},[u,f]=i.useState([]),[m,x]=i.useState(""),[b,w]=i.useState(""),[y,C]=i.useState(""),[h,p]=i.useState(!1),[g,v]=i.useState(null),[j,E]=i.useState(null),[$,R]=i.useState(null),[H,O]=i.useState(""),[q,W]=i.useState([]),[re,J]=i.useState(""),[V,ce]=i.useState(!1),[pe,S]=i.useState(!1),[P,I]=i.useState(null),[B,k]=i.useState(null),[K,ne]=i.useState(!1),_=i.useRef(null),[z,U]=i.useState(!0),[M,F]=i.useState(null),[Z,N]=i.useState(""),[T,G]=i.useState(""),[Q,D]=i.useState(!1),[X,ae]=i.useState(null),[ue,xe]=i.useState(null),[ye,be]=i.useState(""),[Ke,ot]=i.useState(""),[le,Ne]=i.useState(!1),[Fe,Te]=i.useState(null),[Se,_e]=i.useState(null),Be=lt(t??null,"manager");i.useEffect(()=>{var Ie;if(!Be)return;const ee=ls();if(!ee)return;const me=window;(Ie=me.auth)!=null&&Ie.getAccessToken&&(async()=>{if(!await new Promise(Me=>me.auth.getAccessToken(Me)))return;const Ue=await Y(`${ee}/categories`);if(!Ue.ok)return;const Ae=((await Ue.json()).categories??[]).map(Me=>({id:Me.PK||Me.id||"",name:Me.name||Me.PK||"",description:Me.description}));f(Ae)})()},[Be]),i.useEffect(()=>{function ee(me){_.current&&!_.current.contains(me.target)&&ce(!1)}if(V)return document.addEventListener("mousedown",ee),()=>document.removeEventListener("mousedown",ee)},[V]);const Xe=u.filter(ee=>!q.includes(ee.id)&&(!re.trim()||(ee.name||"").toLowerCase().includes(re.toLowerCase()))),it=ee=>{var Ue;const me=(Ue=ee.target.files)==null?void 0:Ue[0];if(v(me??null),me&&O(""),R(null),j&&(URL.revokeObjectURL(j),E(null)),!me)return;if(me.size>bb){R("Logo must be 5 MB or smaller.");return}const Ie=new Image;Ie.onload=()=>{if(Ie.naturalWidth<Iu||Ie.naturalHeight<Iu){R("Logo must be at least 100100 pixels.");return}R(null),E(URL.createObjectURL(me))},Ie.onerror=()=>R("Please choose a valid image file."),Ie.src=URL.createObjectURL(me)},nt=ee=>{q.includes(ee)||W([...q,ee]),J("")},$t=ee=>{W(q.filter(me=>me!==ee))},gn=async()=>{var Ie;const ee=ls();if(!ee){F("API URL not set."),U(!1);return}if(!((Ie=window.auth)!=null&&Ie.getAccessToken)){F("Sign in required."),U(!1);return}U(!0),F(null);try{const Ue=await Y(`${ee}/categories`);if(!Ue.ok)throw new Error(await Ue.text());const Ae=((await Ue.json()).categories??[]).map(Me=>({id:Me.PK||Me.id||"",name:Me.name||Me.PK||"",description:Me.description}));f(Ae)}catch(Ue){F((Ue==null?void 0:Ue.message)??"Failed to load categories.")}finally{U(!1)}};i.useEffect(()=>{Be&&o==="categories"&&gn()},[Be,o]);const Et=async()=>{var Ue;const ee=m.trim();if(!ee){k("Enter URL first.");return}const me=ls();if(!me){k("API URL not set.");return}if(!((Ue=window.auth)!=null&&Ue.getAccessToken)){k("Sign in required.");return}ne(!0),k(null);try{const Ee=await Y(`${me}/sites/generate-description`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:ee})});if(!Ee.ok)throw new Error(await Ee.text());const Ae=await Ee.json();C(Ae.description??""),p(!0)}catch(Ee){k((Ee==null?void 0:Ee.message)??"Failed to generate description.")}finally{ne(!1)}},ln=async ee=>{var Ee;ee.preventDefault();const me=m.trim();if(!me){k("URL is required.");return}const Ie=ls();if(!Ie){k("API URL not set.");return}if(!((Ee=window.auth)!=null&&Ee.getAccessToken)){k("Sign in required.");return}if(!(g&&$)){S(!0),k(null),I(null);try{let Ae=null;if(H.trim()){const gt=await Y(`${Ie}/sites/logo-from-url`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({siteId:"new",imageUrl:H.trim()})});if(!gt.ok){const bn=await gt.json().catch(()=>({}));throw new Error(bn.error||await gt.text())}const ut=await gt.json();ut.key&&(Ae=ut.key)}else if(g){const gt=await Y(`${Ie}/sites/logo-upload`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({siteId:"new",contentType:g.type||"image/png"})});if(!gt.ok)throw new Error("Logo upload request failed");const{uploadUrl:ut,key:bn}=await gt.json();if(!(await fetch(ut,{method:"PUT",headers:{"Content-Type":g.type||"image/png"},body:g})).ok)throw new Error("Logo upload failed");Ae=bn}const Me={url:me,title:b.trim()||me,description:y.trim(),categoryIds:q};h&&(Me.descriptionAiGenerated=!0),Ae&&(Me.logoKey=Ae);const yn=await Y(`${Ie}/sites`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Me)});if(!yn.ok)throw new Error(await yn.text());const vn=await yn.json();I(`Site added: ${vn.title||vn.url||me}`),x(""),w(""),C(""),p(!1),v(null),j&&URL.revokeObjectURL(j),E(null),W([]),setTimeout(()=>e("/websites"),1500)}catch(Ae){k((Ae==null?void 0:Ae.message)??"Failed to add site.")}finally{S(!1)}}},oe=ee=>{xe(ee.id),be(ee.name),ot(ee.description??"")},ge=()=>{xe(null),be(""),ot(""),Te(null)},We=async ee=>{var Ue;if(ee.preventDefault(),!ue)return;const me=ls();if(!(!me||!((Ue=window.auth)!=null&&Ue.getAccessToken))){Ne(!0),Te(null);try{const Ee=await Y(`${me}/categories`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:ue,name:ye.trim(),description:Ke.trim()||void 0})});if(!Ee.ok)throw new Error(await Ee.text());f(Ae=>Ae.map(Me=>Me.id===ue?{...Me,name:ye.trim(),description:Ke.trim()||void 0}:Me)),ge()}catch(Ee){Te((Ee==null?void 0:Ee.message)??"Failed to update category.")}finally{Ne(!1)}}},$e=async ee=>{var Ue;if(!window.confirm("Delete this category? Sites using it will lose this category."))return;const me=ls();if(!(!me||!((Ue=window.auth)!=null&&Ue.getAccessToken))){_e(ee);try{const Ee=await Y(`${me}/categories?id=${encodeURIComponent(ee)}`,{method:"DELETE"});if(!Ee.ok)throw new Error(await Ee.text());f(Ae=>Ae.filter(Me=>Me.id!==ee)),ue===ee&&ge()}catch(Ee){F((Ee==null?void 0:Ee.message)??"Failed to delete category.")}finally{_e(null)}}},ke=async ee=>{var Ee;ee.preventDefault();const me=Z.trim();if(!me)return;const Ie=ls();if(!(!Ie||!((Ee=window.auth)!=null&&Ee.getAccessToken))){D(!0),ae(null),F(null);try{const Ae=await Y(`${Ie}/categories`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:me,description:T.trim()})});if(!Ae.ok)throw new Error(await Ae.text());N(""),G(""),ae("Category created."),gn()}catch(Ae){F((Ae==null?void 0:Ae.message)??"Failed to create category.")}finally{D(!1)}}};return Be?s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ie,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Websites"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Websites"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Add sites and manage website categories."})]}),s.jsxs("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:[s.jsx("button",{type:"button",onClick:()=>d("add"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="add"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Add Site"}),s.jsx("button",{type:"button",onClick:()=>d("categories"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="categories"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Website Categories"})]}),o==="add"&&s.jsxs("form",{className:"space-y-4 max-w-xl",onSubmit:ln,children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"URL *"}),s.jsx("input",{type:"url",value:m,onChange:ee=>x(ee.target.value),placeholder:"https://example.com",required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Title (optional)"}),s.jsx("input",{type:"text",value:b,onChange:ee=>w(ee.target.value),placeholder:"Display title",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description (optional)"}),s.jsx("textarea",{value:y,onChange:ee=>{C(ee.target.value),p(!1)},placeholder:"Short description",rows:4,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("button",{type:"button",onClick:Et,disabled:K||!m.trim(),className:"mt-2 rounded-md border border-slate-700 bg-slate-800 px-3 py-1.5 text-xs font-medium text-slate-200 hover:bg-slate-700 disabled:opacity-50",children:K?"Generating":"Generate AI description"}),h&&s.jsx("span",{className:"ml-2 text-xs uppercase tracking-wide text-slate-500",children:"AI summary"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Logo (optional, min 100100, max 5 MB)"}),s.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/gif,image/webp",onChange:it,className:"block w-full text-xs text-slate-300 file:mr-3 file:rounded-md file:border-0 file:bg-slate-800 file:px-3 file:py-1.5 file:text-slate-100"}),s.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Or paste image URL (image will be copied to S3 on save):"}),s.jsx("input",{type:"url",value:H,onChange:ee=>{O(ee.target.value),ee.target.value.trim()&&v(null)},placeholder:"https://example.com/logo.png",className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),j&&s.jsx("div",{className:"mt-2",children:s.jsx("img",{src:j,alt:"Preview",className:"h-16 w-16 rounded-lg border border-slate-700 object-cover"})}),$&&s.jsx("p",{className:"mt-1 text-xs text-red-400",children:$})]}),s.jsxs("div",{ref:_,className:"relative",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Categories (optional)"}),s.jsx("input",{type:"text",value:re,onChange:ee=>J(ee.target.value),onFocus:()=>ce(!0),placeholder:"Search and select",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),V&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"absolute left-0 right-0 top-full z-10 mt-1 max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",children:Xe.length?Xe.map(ee=>s.jsx("button",{type:"button",onClick:()=>nt(ee.id),className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:ee.name},ee.id)):s.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:"No matches"})}),u.length===0&&s.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["No categories."," ",s.jsx("button",{type:"button",onClick:()=>d("categories"),className:"text-brand-orange hover:underline",children:"Create categories"})]})]}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:q.map(ee=>{const me=u.find(Ie=>Ie.id===ee);return s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(me==null?void 0:me.name)??ee,s.jsx("button",{type:"button",onClick:()=>$t(ee),className:"hover:text-red-400","aria-label":"Remove",children:""})]},ee)})})]}),s.jsx("button",{type:"submit",disabled:pe,className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:pe?"Adding":"Add Site"}),P&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:P}),B&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:B})]}),o==="categories"&&s.jsxs(s.Fragment,{children:[s.jsxs("form",{className:"space-y-3 max-w-md",onSubmit:ke,children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"New category name"}),s.jsx("input",{type:"text",value:Z,onChange:ee=>N(ee.target.value),placeholder:"e.g. Developer tools",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description (optional)"}),s.jsx("input",{type:"text",value:T,onChange:ee=>G(ee.target.value),placeholder:"Optional description",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsx("button",{type:"submit",disabled:Q||!Z.trim(),className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:Q?"Creating":"Create category"}),X&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:X}),M&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:M})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-sm font-medium text-slate-300 mb-2",children:"Existing categories"}),z?s.jsx("p",{className:"text-sm text-slate-500",children:"Loading"}):u.length===0?s.jsx("p",{className:"text-sm text-slate-500",children:"No categories yet. Create one above."}):s.jsx("ul",{className:"space-y-2",children:u.map(ee=>s.jsx("li",{className:"rounded-lg border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm",children:ue===ee.id?s.jsxs("form",{onSubmit:We,className:"space-y-2",children:[s.jsx("input",{type:"text",value:ye,onChange:me=>be(me.target.value),placeholder:"Name",required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",autoFocus:!0}),s.jsx("input",{type:"text",value:Ke,onChange:me=>ot(me.target.value),placeholder:"Description (optional)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsxs("div",{className:"flex gap-2 flex-wrap",children:[s.jsx("button",{type:"submit",disabled:le||!ye.trim(),className:"rounded-md bg-brand-orange px-3 py-1.5 text-xs font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:le?"Saving":"Save"}),s.jsx("button",{type:"button",onClick:ge,className:"rounded-md border border-slate-700 px-3 py-1.5 text-xs font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"}),s.jsx("button",{type:"button",onClick:()=>$e(ee.id),disabled:Se===ee.id,className:"rounded-md border border-red-500/60 px-3 py-1.5 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:Se===ee.id?"Deleting":"Delete"})]}),Fe&&s.jsx("p",{className:"text-xs text-red-400",children:Fe})]}):s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>oe(ee),className:"flex-1 min-w-0 text-left hover:bg-slate-800/50 rounded px-1 -mx-1 py-1 -my-1 transition-colors",children:[s.jsx("span",{className:"font-medium text-slate-200",children:ee.name}),ee.description&&s.jsx("span",{className:"text-slate-500 truncate max-w-xs ml-2",children:ee.description})]}),s.jsx("button",{type:"button",onClick:()=>$e(ee.id),disabled:Se===ee.id,className:"rounded px-2 py-1 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50 shrink-0","aria-label":"Delete category",children:Se===ee.id?"":"Delete"})]})},ee.id))})]})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Websites"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})};function Es(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function jb(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}const Nb=()=>{const e=_t(),{user:t}=Oe(),[n,r]=Yt(),a=n.get("tab"),l=a==="categories"?"categories":"add",[o,c]=i.useState(l);i.useEffect(()=>{c(a==="categories"?"categories":"add")},[a]);const d=oe=>{c(oe);const ge=new URLSearchParams(n);oe==="categories"?ge.set("tab","categories"):ge.delete("tab"),r(ge)},[u,f]=i.useState([]),[m,x]=i.useState(""),[b,w]=i.useState(""),[y,C]=i.useState(null),[h,p]=i.useState(null),[g,v]=i.useState(null),[j,E]=i.useState(!1),[$,R]=i.useState([]),[H,O]=i.useState(""),[q,W]=i.useState(!1),[re,J]=i.useState(!1),[V,ce]=i.useState(null),[pe,S]=i.useState(null),P=i.useRef(null),[I,B]=i.useState(!0),[k,K]=i.useState(null),[ne,_]=i.useState(""),[z,U]=i.useState(""),[M,F]=i.useState(!1),[Z,N]=i.useState(null),[T,G]=i.useState(null),[Q,D]=i.useState(""),[X,ae]=i.useState(""),[ue,xe]=i.useState(!1),[ye,be]=i.useState(null),[Ke,ot]=i.useState(null),le=lt(t??null,"manager");i.useEffect(()=>{if(!le)return;const oe=Es();oe&&(async()=>{try{const ge=await Y(`${oe}/media-categories`);if(!ge.ok)return;const $e=((await ge.json()).categories??[]).map(ke=>({id:ke.PK||ke.id||"",name:ke.name||ke.PK||"",description:ke.description}));f($e)}catch{}})()},[le]),i.useEffect(()=>{function oe(ge){P.current&&!P.current.contains(ge.target)&&W(!1)}if(q)return document.addEventListener("mousedown",oe),()=>document.removeEventListener("mousedown",oe)},[q]);const Ne=u.filter(oe=>!$.includes(oe.id)&&(!H.trim()||(oe.name||"").toLowerCase().includes(H.toLowerCase()))),Fe=oe=>{var We;const ge=(We=oe.target.files)==null?void 0:We[0];C(ge??null),v(null),S(null),h&&(URL.revokeObjectURL(h),p(null)),ge&&(p(URL.createObjectURL(ge)),ge.type.startsWith("video/")&&E(!0))},Te=i.useRef(null),Se=oe=>{var We;const ge=(We=oe.target.files)==null?void 0:We[0];ge&&ge.type.startsWith("image/")&&(v(ge),E(!1)),oe.target.value=""},_e=oe=>{$.includes(oe)||R([...$,oe]),O("")},Be=oe=>{R($.filter(ge=>ge!==oe))},Xe=async()=>{var We;const oe=Es();if(!oe){K("API URL not set."),B(!1);return}if(!((We=window.auth)!=null&&We.getAccessToken)){K("Sign in required."),B(!1);return}B(!0),K(null);try{const $e=await Y(`${oe}/media-categories`);if(!$e.ok)throw new Error(await $e.text());const ee=((await $e.json()).categories??[]).map(me=>({id:me.PK||me.id||"",name:me.name||me.PK||"",description:me.description}));f(ee)}catch($e){K(($e==null?void 0:$e.message)??"Failed to load media categories.")}finally{B(!1)}};i.useEffect(()=>{le&&o==="categories"&&Xe()},[le,o]);const it=async oe=>{var ee;if(oe.preventDefault(),!y){S("Please select an image or video file.");return}const ge=Es();if(!ge){S("API URL not set.");return}if(!((ee=window.auth)!=null&&ee.getAccessToken)){S("Sign in required.");return}const $e=y.type.startsWith("video/")?"video":"image",ke=`MEDIA#${jb()}`;J(!0),S(null),ce(null);try{const me=await Y(`${ge}/media/upload`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mediaId:ke,mediaType:$e,contentType:y.type||($e==="image"?"image/png":"video/mp4")})});if(!me.ok)throw new Error("Upload request failed");const{uploadUrl:Ie,key:Ue}=await me.json(),Ee=await Y(`${ge}/media`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:ke,mediaKey:Ue,title:m.trim()||"Untitled",description:b.trim(),mediaType:$e,categoryIds:$})});if(!Ee.ok)throw new Error(await Ee.text());if(!(await fetch(Ie,{method:"PUT",headers:{"Content-Type":y.type||($e==="image"?"image/png":"video/mp4")},body:y})).ok)throw new Error("File upload failed");if($e==="video"&&g){const Me=await Y(`${ge}/media/thumbnail-upload`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mediaId:ke,contentType:g.type||"image/jpeg"})});if(Me.ok){const{uploadUrl:yn,key:vn}=await Me.json();(await fetch(yn,{method:"PUT",headers:{"Content-Type":g.type||"image/jpeg"},body:g})).ok&&((await Y(`${ge}/media`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:ke,thumbnailKey:vn})})).ok||console.warn("Thumbnail uploaded but update failed"))}}ce("Media added."),x(""),w(""),C(null),v(null),h&&URL.revokeObjectURL(h),p(null),R([]),setTimeout(()=>e("/media"),1500)}catch(me){S((me==null?void 0:me.message)??"Failed to add media.")}finally{J(!1)}},nt=oe=>{G(oe.id),D(oe.name),ae(oe.description??"")},$t=()=>{G(null),D(""),ae(""),be(null)},gn=async oe=>{var $e;if(oe.preventDefault(),!T)return;const ge=Es();if(!(!ge||!(($e=window.auth)!=null&&$e.getAccessToken))){xe(!0),be(null);try{const ke=await Y(`${ge}/media-categories`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:T,name:Q.trim(),description:X.trim()||void 0})});if(!ke.ok)throw new Error(await ke.text());f(ee=>ee.map(me=>me.id===T?{...me,name:Q.trim(),description:X.trim()||void 0}:me)),$t()}catch(ke){be((ke==null?void 0:ke.message)??"Failed to update media category.")}finally{xe(!1)}}},Et=async oe=>{var $e;if(!window.confirm("Delete this media category? Media using it will lose this category."))return;const ge=Es();if(!(!ge||!(($e=window.auth)!=null&&$e.getAccessToken))){ot(oe);try{const ke=await Y(`${ge}/media-categories?id=${encodeURIComponent(oe)}`,{method:"DELETE"});if(!ke.ok)throw new Error(await ke.text());f(ee=>ee.filter(me=>me.id!==oe)),T===oe&&$t()}catch(ke){K((ke==null?void 0:ke.message)??"Failed to delete media category.")}finally{ot(null)}}},ln=async oe=>{var ke;oe.preventDefault();const ge=ne.trim();if(!ge)return;const We=Es();if(!(!We||!((ke=window.auth)!=null&&ke.getAccessToken))){F(!0),N(null),K(null);try{const ee=await Y(`${We}/media-categories`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:ge,description:z.trim()})});if(!ee.ok)throw new Error(await ee.text());_(""),U(""),N("Media category created."),Xe()}catch(ee){K((ee==null?void 0:ee.message)??"Failed to create media category.")}finally{F(!1)}}};return le?s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ie,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Media"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Media"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Add media and manage media categories."})]}),s.jsxs("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:[s.jsx("button",{type:"button",onClick:()=>d("add"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="add"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Add Media"}),s.jsx("button",{type:"button",onClick:()=>d("categories"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="categories"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Media Categories"})]}),o==="add"&&s.jsxs("form",{className:"space-y-4 max-w-xl",onSubmit:it,children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Title (optional)"}),s.jsx("input",{type:"text",value:m,onChange:oe=>x(oe.target.value),placeholder:"Untitled",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description (optional)"}),s.jsx("textarea",{value:b,onChange:oe=>w(oe.target.value),placeholder:"Description",rows:3,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Image or video *"}),s.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/gif,image/webp,video/mp4,video/webm",onChange:Fe,className:"block w-full text-xs text-slate-300 file:mr-3 file:rounded-md file:border-0 file:bg-slate-800 file:px-3 file:py-1.5 file:text-slate-100"}),s.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Videos get an auto-generated thumbnail from the 34 sec frame. Change it when editing."}),(y==null?void 0:y.type.startsWith("video/"))&&g&&s.jsxs("p",{className:"mt-1 text-xs text-emerald-400",children:["Custom thumbnail: ",g.name," ",s.jsx("button",{type:"button",onClick:()=>E(!0),className:"text-brand-orange hover:underline",children:"Change"})]}),j&&(y==null?void 0:y.type.startsWith("video/"))&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",role:"dialog","aria-modal":"true","aria-labelledby":"thumbnail-dialog-title",onClick:()=>E(!1),children:s.jsxs("div",{className:"rounded-lg border border-slate-700 bg-slate-900 p-6 shadow-xl max-w-sm w-full mx-4",onClick:oe=>oe.stopPropagation(),children:[s.jsx("h2",{id:"thumbnail-dialog-title",className:"text-lg font-medium text-slate-100 mb-2",children:"Add thumbnail"}),s.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"Choose a custom thumbnail image for this video (optional)."}),s.jsx("input",{ref:Te,type:"file",accept:"image/png,image/jpeg,image/gif,image/webp",onChange:Se,className:"hidden"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:()=>{var oe;return(oe=Te.current)==null?void 0:oe.click()},className:"rounded-md bg-slate-700 px-3 py-2 text-sm font-medium text-slate-100 hover:bg-slate-600",children:"Choose file"}),s.jsx("button",{type:"button",onClick:()=>E(!1),className:"rounded-md border border-slate-600 px-3 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Skip"})]})]})}),h&&s.jsx("div",{className:"mt-2",children:y!=null&&y.type.startsWith("video/")?s.jsx("video",{src:h,muted:!0,controls:!0,className:"max-h-32 rounded-lg border border-slate-700"}):s.jsx("img",{src:h,alt:"Preview",className:"h-24 w-auto rounded-lg border border-slate-700 object-cover"})})]}),s.jsxs("div",{ref:P,className:"relative",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Media categories (optional)"}),s.jsx("input",{type:"text",value:H,onChange:oe=>O(oe.target.value),onFocus:()=>W(!0),placeholder:"Search and select",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),q&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"absolute left-0 right-0 top-full z-10 mt-1 max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",children:Ne.length?Ne.map(oe=>s.jsx("button",{type:"button",onClick:()=>_e(oe.id),className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:oe.name},oe.id)):s.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:"No matches"})}),u.length===0&&s.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["No categories."," ",s.jsx("button",{type:"button",onClick:()=>d("categories"),className:"text-brand-orange hover:underline",children:"Create media categories"})]})]}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:$.map(oe=>{const ge=u.find(We=>We.id===oe);return s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(ge==null?void 0:ge.name)??oe,s.jsx("button",{type:"button",onClick:()=>Be(oe),className:"hover:text-red-400","aria-label":"Remove",children:""})]},oe)})})]}),s.jsx("button",{type:"submit",disabled:re||!y,className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:re?"Uploading":"Add Media"}),V&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:V}),pe&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:pe})]}),o==="categories"&&s.jsxs(s.Fragment,{children:[s.jsxs("form",{className:"space-y-3 max-w-md",onSubmit:ln,children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"New category name"}),s.jsx("input",{type:"text",value:ne,onChange:oe=>_(oe.target.value),placeholder:"e.g. Tutorials",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description (optional)"}),s.jsx("input",{type:"text",value:z,onChange:oe=>U(oe.target.value),placeholder:"Optional description",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsx("button",{type:"submit",disabled:M||!ne.trim(),className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:M?"Creating":"Create media category"}),Z&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:Z}),k&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:k})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-sm font-medium text-slate-300 mb-2",children:"Existing media categories"}),I?s.jsx("p",{className:"text-sm text-slate-500",children:"Loading"}):u.length===0?s.jsx("p",{className:"text-sm text-slate-500",children:"No media categories yet. Create one above."}):s.jsx("ul",{className:"space-y-2",children:u.map(oe=>s.jsx("li",{className:"rounded-lg border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm",children:T===oe.id?s.jsxs("form",{onSubmit:gn,className:"space-y-2",children:[s.jsx("input",{type:"text",value:Q,onChange:ge=>D(ge.target.value),placeholder:"Name",required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",autoFocus:!0}),s.jsx("input",{type:"text",value:X,onChange:ge=>ae(ge.target.value),placeholder:"Description (optional)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsxs("div",{className:"flex gap-2 flex-wrap",children:[s.jsx("button",{type:"submit",disabled:ue||!Q.trim(),className:"rounded-md bg-brand-orange px-3 py-1.5 text-xs font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:ue?"Saving":"Save"}),s.jsx("button",{type:"button",onClick:$t,className:"rounded-md border border-slate-700 px-3 py-1.5 text-xs font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"}),s.jsx("button",{type:"button",onClick:()=>Et(oe.id),disabled:Ke===oe.id,className:"rounded-md border border-red-500/60 px-3 py-1.5 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:Ke===oe.id?"Deleting":"Delete"})]}),ye&&s.jsx("p",{className:"text-xs text-red-400",children:ye})]}):s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>nt(oe),className:"flex-1 min-w-0 text-left hover:bg-slate-800/50 rounded px-1 -mx-1 py-1 -my-1 transition-colors",children:[s.jsx("span",{className:"font-medium text-slate-200",children:oe.name}),oe.description&&s.jsx("span",{className:"text-slate-500 truncate max-w-xs ml-2",children:oe.description})]}),s.jsx("button",{type:"button",onClick:()=>Et(oe.id),disabled:Ke===oe.id,className:"rounded px-2 py-1 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50 shrink-0","aria-label":"Delete category",children:Ke===oe.id?"":"Delete"})]})},oe.id))})]})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Media"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})};function Ia(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Uu=100,Sb=5*1024*1024,kb=()=>{const{id:e}=ir(),t=_t(),{user:n}=Oe(),[r,a]=i.useState(!0),[l,o]=i.useState(""),[c,d]=i.useState(""),[u,f]=i.useState(""),[m,x]=i.useState(!1),[b,w]=i.useState([]),[y,C]=i.useState(""),[h,p]=i.useState(""),[g,v]=i.useState(null),[j,E]=i.useState(!1),[$,R]=i.useState(null),[H,O]=i.useState(""),[q,W]=i.useState(null),[re,J]=i.useState(null),[V,ce]=i.useState([]),[pe,S]=i.useState([]),[P,I]=i.useState(""),[B,k]=i.useState(!1),[K,ne]=i.useState(!1),[_,z]=i.useState(!1),[U,M]=i.useState(!1),[F,Z]=i.useState(null),[N,T]=i.useState(null),G=lt(n??null,"manager"),Q=e?decodeURIComponent(e):"";i.useEffect(()=>{var Te;if(!G||!Q){a(!1);return}const le=Ia();if(!le){T("API URL not set."),a(!1);return}if(!((Te=window.auth)!=null&&Te.getAccessToken)){T("Sign in required."),a(!1);return}let Fe=!1;return(async()=>{try{const Se=await Y(`${le}/sites?id=${encodeURIComponent(Q)}`);if(Se.status===404||!Se.ok){Fe||T("Site not found.");return}const Be=(await Se.json()).site;if(Fe||!Be)return;o(Be.url??""),d(Be.title??""),f(Be.description??""),x(!!Be.descriptionAiGenerated),w(Array.isArray(Be.tags)?Be.tags:[]),C(""),p(Be.scrapedContent??""),v(Be.logoUrl||null),S(Array.isArray(Be.categoryIds)?Be.categoryIds:[]);const Xe=await Y(`${le}/categories`);if(Xe.ok&&!Fe){const it=await Xe.json();ce((it.categories??[]).map(nt=>({id:nt.PK||nt.id||"",name:nt.name||nt.PK||""})))}}catch(Se){Fe||T((Se==null?void 0:Se.message)??"Failed to load.")}finally{Fe||a(!1)}})(),()=>{Fe=!0}},[G,Q]);const D=le=>{var Te;const Ne=(Te=le.target.files)==null?void 0:Te[0];if(R(Ne??null),O(""),J(null),E(!1),q&&(URL.revokeObjectURL(q),W(null)),!Ne)return;if(Ne.size>Sb){J("Logo must be 5 MB or smaller.");return}const Fe=new Image;Fe.onload=()=>{if(Fe.naturalWidth<Uu||Fe.naturalHeight<Uu){J("Logo must be at least 100100 pixels.");return}J(null),W(URL.createObjectURL(Ne))},Fe.onerror=()=>J("Please choose a valid image file."),Fe.src=URL.createObjectURL(Ne)},X=le=>{pe.includes(le)||S([...pe,le]),I(""),k(!1)},ae=le=>{S(pe.filter(Ne=>Ne!==le))},ue=()=>{const le=y.trim();le&&!b.includes(le)&&w([...b,le]),C("")},xe=le=>w(b.filter(Ne=>Ne!==le)),ye=V.filter(le=>!pe.includes(le.id)&&(!P.trim()||(le.name||"").toLowerCase().includes(P.toLowerCase()))),be=async()=>{var Te;const le=l.trim();if(!le){T("Enter URL first.");return}const Ne=Ia();if(!Ne){T("API URL not set.");return}if(!((Te=window.auth)!=null&&Te.getAccessToken)){T("Sign in required.");return}M(!0),T(null);try{const Se=await Y(`${Ne}/sites/generate-description`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:le})});if(!Se.ok)throw new Error(await Se.text());const _e=await Se.json();f(_e.description??""),x(!0)}catch(Se){T((Se==null?void 0:Se.message)??"Failed to generate description.")}finally{M(!1)}},Ke=async le=>{var Te;if(le.preventDefault(),!Q)return;const Ne=Ia();if(!Ne){T("API URL not set.");return}if(!((Te=window.auth)!=null&&Te.getAccessToken)){T("Sign in required.");return}if(!($&&re)){ne(!0),T(null),Z(null);try{let Se=null;if($){const Xe=await Y(`${Ne}/sites/logo-upload`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({siteId:Q,contentType:$.type||"image/png"})});if(!Xe.ok)throw new Error("Logo upload request failed");const{uploadUrl:it,key:nt}=await Xe.json();if(!(await fetch(it,{method:"PUT",headers:{"Content-Type":$.type||"image/png"},body:$})).ok)throw new Error("Logo upload failed");Se=nt}else if(H.trim()){const Xe=await Y(`${Ne}/sites/logo-from-url`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({siteId:Q,imageUrl:H.trim()})});if(!Xe.ok){const nt=await Xe.json().catch(()=>({}));throw new Error(nt.error||await Xe.text())}const it=await Xe.json();it.key&&(Se=it.key)}const _e={id:Q,url:l.trim(),title:c.trim()||l.trim(),description:u.trim(),descriptionAiGenerated:m,categoryIds:pe,tags:b,scrapedContent:h.trim()||void 0};j?_e.deleteLogo=!0:Se&&(_e.logoKey=Se);const Be=await Y(`${Ne}/sites`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(_e)});if(!Be.ok)throw new Error(await Be.text());Z("Site updated."),q&&URL.revokeObjectURL(q),R(null),W(null),O(""),setTimeout(()=>t(`/websites/${encodeURIComponent(Q)}`),1200)}catch(Se){T((Se==null?void 0:Se.message)??"Failed to update site.")}finally{ne(!1)}}},ot=async()=>{var Fe;if(!Q||!window.confirm("Delete this site? This cannot be undone."))return;const le=Ia();if(!(!le||!((Fe=window.auth)!=null&&Fe.getAccessToken))){z(!0),T(null);try{const Te=await Y(`${le}/sites`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:Q})});if(!Te.ok)throw new Error(await Te.text());t("/websites")}catch(Te){T((Te==null?void 0:Te.message)??"Failed to delete site.")}finally{z(!1)}}};return G?r?s.jsxs("div",{className:"space-y-4",children:[s.jsxs(ie,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Websites"]}),s.jsx("p",{className:"text-sm text-slate-400",children:"Loading"})]}):N&&!l&&!c?s.jsxs("div",{className:"space-y-4",children:[s.jsxs(ie,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Websites"]}),s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:N})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ie,{to:`/websites/${encodeURIComponent(Q)}`,className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to site"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit Site"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Update URL, title, description, logo, categories, and scraped content."})]}),s.jsxs("form",{className:"space-y-4 max-w-xl",onSubmit:Ke,children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"URL *"}),s.jsx("input",{type:"url",value:l,onChange:le=>o(le.target.value),required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Title"}),s.jsx("input",{type:"text",value:c,onChange:le=>d(le.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description"}),s.jsx("textarea",{value:u,onChange:le=>{f(le.target.value),x(!1)},placeholder:"Short description",rows:4,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("button",{type:"button",onClick:be,disabled:U||!l.trim(),className:"mt-2 rounded-md border border-slate-700 bg-slate-800 px-3 py-1.5 text-xs font-medium text-slate-200 hover:bg-slate-700 disabled:opacity-50",children:U?"Generating":"Generate AI description"}),m&&s.jsx("span",{className:"ml-2 text-xs uppercase tracking-wide text-slate-500",children:"AI summary"}),s.jsxs("label",{className:"mt-2 block inline-flex items-center gap-2 text-xs text-slate-500",children:[s.jsx("input",{type:"checkbox",checked:m,onChange:le=>x(le.target.checked)}),"AI-generated summary"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Logo"}),g&&!j&&!q&&s.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[s.jsx("img",{src:g,alt:"Current logo",className:"h-12 w-12 rounded-lg border border-slate-700 object-cover"}),s.jsxs("label",{className:"text-xs text-slate-400",children:[s.jsx("input",{type:"checkbox",checked:j,onChange:le=>E(le.target.checked)}),s.jsx("span",{className:"ml-1",children:"Remove logo"})]})]}),s.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/gif,image/webp",onChange:D,className:"block w-full text-xs text-slate-300 file:mr-3 file:rounded-md file:border-0 file:bg-slate-800 file:px-3 file:py-1.5 file:text-slate-100"}),s.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Or paste image URL (image will be copied to S3 on save):"}),s.jsx("input",{type:"url",value:H,onChange:le=>{O(le.target.value),le.target.value.trim()&&R(null)},placeholder:"https://example.com/logo.png",className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),q&&s.jsx("div",{className:"mt-2",children:s.jsx("img",{src:q,alt:"New logo",className:"h-16 w-16 rounded-lg border border-slate-700 object-cover"})}),re&&s.jsx("p",{className:"mt-1 text-xs text-red-400",children:re})]}),s.jsxs("div",{className:"relative",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Categories"}),s.jsx("input",{type:"text",value:P,onChange:le=>I(le.target.value),onFocus:()=>k(!0),placeholder:"Search and select",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),B&&s.jsx("div",{className:"absolute left-0 right-0 top-full z-10 mt-1 max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",children:ye.length?ye.map(le=>s.jsx("button",{type:"button",onClick:()=>X(le.id),className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:le.name},le.id)):s.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:"No matches"})}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:pe.map(le=>{const Ne=V.find(Fe=>Fe.id===le);return s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(Ne==null?void 0:Ne.name)??le,s.jsx("button",{type:"button",onClick:()=>ae(le),className:"hover:text-red-400","aria-label":"Remove",children:""})]},le)})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Tags"}),s.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:b.map(le=>s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[le,s.jsx("button",{type:"button",onClick:()=>xe(le),className:"hover:text-red-400","aria-label":"Remove",children:""})]},le))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:y,onChange:le=>C(le.target.value),onKeyDown:le=>le.key==="Enter"&&(le.preventDefault(),ue()),placeholder:"Add tag",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("button",{type:"button",onClick:ue,className:"rounded-md border border-slate-700 bg-slate-800 px-3 py-2 text-sm text-slate-200 hover:bg-slate-700",children:"Add"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Scraped content (optional)"}),s.jsx("textarea",{value:h,onChange:le=>p(le.target.value),rows:6,placeholder:"Paste or edit scraped content (e.g. README, about page)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm font-mono text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsx("button",{type:"submit",disabled:K,className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:K?"Saving":"Save changes"}),s.jsx("button",{type:"button",onClick:ot,disabled:_||K,className:"rounded-md border border-red-500/60 px-4 py-2 text-sm font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:_?"Deleting":"Delete entry"})]}),F&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:F}),N&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:N})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit Site"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})};function Ps(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Cb=()=>{const{id:e}=ir(),t=_t(),{user:n}=Oe(),[r,a]=i.useState(!0),[l,o]=i.useState(""),[c,d]=i.useState(""),[u,f]=i.useState(null),[m,x]=i.useState(null),[b,w]=i.useState("image"),[y,C]=i.useState(!1),[h,p]=i.useState(!1),[g,v]=i.useState(!1),[j,E]=i.useState([]),[$,R]=i.useState([]),[H,O]=i.useState(""),[q,W]=i.useState(!1),[re,J]=i.useState(!1),[V,ce]=i.useState(!1),[pe,S]=i.useState(null),[P,I]=i.useState(null),B=lt(n??null,"manager"),k=e?decodeURIComponent(e):"";i.useEffect(()=>{var Q;if(!B||!k){a(!1);return}const N=Ps();if(!N){I("API URL not set."),a(!1);return}if(!((Q=window.auth)!=null&&Q.getAccessToken)){I("Sign in required."),a(!1);return}let G=!1;return(async()=>{try{const D=await Y(`${N}/media?id=${encodeURIComponent(k)}`);if(D.status===404||!D.ok){G||I("Media not found.");return}const X=await D.json(),ae=Array.isArray(X.media)?X.media[0]:X.media;if(G||!ae)return;const ue=ae;o(ue.title??""),d(ue.description??""),f(ue.mediaUrl||null),x(ue.thumbnailUrl||null),w(ue.mediaType||"image"),R(Array.isArray(ue.categoryIds)?ue.categoryIds:[]);const xe=await Y(`${N}/media-categories`);if(xe.ok&&!G){const ye=await xe.json();E((ye.categories??[]).map(be=>({id:be.PK||be.id||"",name:be.name||be.PK||""})))}}catch(D){G||I((D==null?void 0:D.message)??"Failed to load.")}finally{G||a(!1)}})(),()=>{G=!0}},[B,k]);const K=N=>{$.includes(N)||R([...$,N]),O(""),W(!1)},ne=N=>{R($.filter(T=>T!==N))},_=j.filter(N=>!$.includes(N.id)&&(!H.trim()||(N.name||"").toLowerCase().includes(H.toLowerCase()))),z=async N=>{var Q;if(N.preventDefault(),!k)return;const T=Ps();if(!T){I("API URL not set.");return}const G=window;if(!((Q=G.auth)!=null&&Q.getAccessToken)){I("Sign in required.");return}J(!0),I(null),S(null);try{const D=await new Promise(ae=>G.auth.getAccessToken(ae)),X=await Y(`${T}/media`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${D}`},body:JSON.stringify({id:k,title:l.trim()||"Untitled",description:c.trim(),categoryIds:$})});if(!X.ok)throw new Error(await X.text());S("Media updated."),setTimeout(()=>t("/media"),1200)}catch(D){I((D==null?void 0:D.message)??"Failed to update media.")}finally{J(!1)}},U=async N=>{var D,X;const T=(D=N.target.files)==null?void 0:D[0];if(!T||!k)return;if(!T.type.startsWith("image/")){I("Please choose an image (PNG, JPEG, GIF, WebP).");return}const G=Ps();if(!G)return;const Q=window;if((X=Q.auth)!=null&&X.getAccessToken){p(!0),I(null),S(null);try{const ae=await new Promise(le=>Q.auth.getAccessToken(le)),ue=await Y(`${G}/media/thumbnail-upload`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ae}`},body:JSON.stringify({mediaId:k,contentType:T.type||"image/png"})});if(!ue.ok)throw new Error("Upload request failed");const{uploadUrl:xe,key:ye}=await ue.json();if(!(await fetch(xe,{method:"PUT",headers:{"Content-Type":T.type||"image/png"},body:T})).ok)throw new Error("File upload failed");const Ke=await Y(`${G}/media`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ae}`},body:JSON.stringify({id:k,thumbnailKey:ye})});if(!Ke.ok)throw new Error(await Ke.text());const ot=await Y(`${G}/media?id=${encodeURIComponent(k)}`);if(ot.ok){const le=await ot.json(),Ne=Array.isArray(le.media)?le.media[0]:le.media;Ne!=null&&Ne.thumbnailUrl&&x(Ne.thumbnailUrl)}S("Logo/thumbnail updated.")}catch(ae){I((ae==null?void 0:ae.message)??"Failed to upload thumbnail.")}finally{p(!1),N.target.value=""}}},M=async()=>{var G;if(!k||!window.confirm("Remove the custom logo/thumbnail? You can regenerate from video or upload a new one."))return;const N=Ps();if(!N)return;const T=window;if((G=T.auth)!=null&&G.getAccessToken){v(!0),I(null),S(null);try{const Q=await new Promise(X=>T.auth.getAccessToken(X)),D=await Y(`${N}/media`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Q}`},body:JSON.stringify({id:k,deleteThumbnail:!0})});if(!D.ok)throw new Error(await D.text());x(null),S("Logo/thumbnail removed.")}catch(Q){I((Q==null?void 0:Q.message)??"Failed to remove thumbnail.")}finally{v(!1)}}},F=async()=>{var G;if(!k)return;const N=Ps();if(!N)return;const T=window;if((G=T.auth)!=null&&G.getAccessToken){C(!0),I(null),S(null);try{const Q=await new Promise(ae=>T.auth.getAccessToken(ae)),D=await Y(`${N}/media/regenerate-thumbnail`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Q}`},body:JSON.stringify({mediaId:k})});if(!D.ok)throw new Error(await D.text());S("Thumbnail regeneration started. New thumbnail will appear in 3060 seconds.");const X=async ae=>{if(ae>6)return;await new Promise(xe=>setTimeout(xe,1e4));const ue=await Y(`${N}/media?id=${encodeURIComponent(k)}`);if(ue.ok){const xe=await ue.json(),ye=Array.isArray(xe.media)?xe.media[0]:xe.media;if(ye!=null&&ye.thumbnailUrl){x(ye.thumbnailUrl),S("Thumbnail updated.");return}}X(ae+1)};X(1)}catch(Q){I((Q==null?void 0:Q.message)??"Failed to regenerate thumbnail.")}finally{C(!1)}}},Z=async()=>{var G;if(!k||!window.confirm("Delete this media item? This cannot be undone."))return;const N=Ps();if(!N)return;const T=window;if((G=T.auth)!=null&&G.getAccessToken){ce(!0),I(null);try{const Q=await new Promise(X=>T.auth.getAccessToken(X)),D=await Y(`${N}/media?id=${encodeURIComponent(k)}`,{method:"DELETE",headers:{Authorization:`Bearer ${Q}`}});if(!D.ok)throw new Error(await D.text());t("/media")}catch(Q){I((Q==null?void 0:Q.message)??"Failed to delete media.")}finally{ce(!1)}}};return B?r?s.jsxs("div",{className:"space-y-4",children:[s.jsxs(ie,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Media"]}),s.jsx("p",{className:"text-sm text-slate-400",children:"Loading"})]}):P&&!l&&!c?s.jsxs("div",{className:"space-y-4",children:[s.jsxs(ie,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Media"]}),s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:P})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ie,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Media"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit Media"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Update title, description, and categories. The file itself cannot be changed here."})]}),u&&s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 overflow-hidden max-w-2xl",children:[s.jsx("p",{className:"px-4 py-2 text-xs font-medium text-slate-400 border-b border-slate-800",children:"Current media"}),s.jsx("div",{className:"p-4 flex justify-center items-center bg-slate-900/40 min-h-[160px]",children:b==="video"?s.jsx("video",{src:u,controls:!0,className:"max-w-full max-h-[50vh] rounded-lg border border-slate-700",playsInline:!0}):s.jsx("img",{src:u,alt:l||"Media",className:"max-w-full max-h-[50vh] w-auto h-auto object-contain rounded-lg border border-slate-700"})}),b==="video"&&s.jsxs("div",{className:"px-4 py-3 border-t border-slate-800 space-y-2",children:[s.jsx("p",{className:"text-xs font-medium text-slate-400",children:"Logo / Thumbnail"}),s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[m&&s.jsx("img",{src:m,alt:"Thumbnail",className:"h-16 w-auto rounded border border-slate-700 object-cover"}),s.jsx("button",{type:"button",onClick:F,disabled:y,className:"rounded-md border border-slate-600 px-3 py-1.5 text-sm font-medium text-slate-200 hover:bg-slate-800 disabled:opacity-50",children:y?"Regenerating":"Take screenshot"}),s.jsxs("label",{className:"cursor-pointer rounded-md border border-slate-600 px-3 py-1.5 text-sm font-medium text-slate-200 hover:bg-slate-800",children:[h?"Uploading":"Add logo",s.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/gif,image/webp",className:"hidden",onChange:U,disabled:h})]}),m&&s.jsx("button",{type:"button",onClick:M,disabled:g,className:"rounded-md border border-red-500/60 px-3 py-1.5 text-sm font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:g?"Removing":"Delete logo"})]})]})]}),s.jsxs("form",{className:"space-y-4 max-w-xl",onSubmit:z,children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Title"}),s.jsx("input",{type:"text",value:l,onChange:N=>o(N.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description"}),s.jsx("textarea",{value:c,onChange:N=>d(N.target.value),rows:4,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Media categories"}),s.jsx("input",{type:"text",value:H,onChange:N=>O(N.target.value),onFocus:()=>W(!0),placeholder:"Search and select",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),q&&s.jsx("div",{className:"absolute left-0 right-0 top-full z-10 mt-1 max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",children:_.length?_.map(N=>s.jsx("button",{type:"button",onClick:()=>K(N.id),className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:N.name},N.id)):s.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:"No matches"})}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:$.map(N=>{const T=j.find(G=>G.id===N);return s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(T==null?void 0:T.name)??N,s.jsx("button",{type:"button",onClick:()=>ne(N),className:"hover:text-red-400","aria-label":"Remove",children:""})]},N)})})]}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsx("button",{type:"submit",disabled:re,className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:re?"Saving":"Save changes"}),s.jsx("button",{type:"button",onClick:Z,disabled:V||re,className:"rounded-md border border-red-500/60 px-4 py-2 text-sm font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:V?"Deleting":"Delete entry"})]}),pe&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:pe}),P&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:P})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit Media"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})},Mu={admin:"SuperAdmin",manager:"Manager",user:"User"},Zi=[{value:-8,label:"UTC-8"},{value:-5,label:"UTC-5"},{value:0,label:"UTC+0/GMT"}];function Mo(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function Eb(e,t,n){if(!e&&!n)return"";if(!e)return n?`from ${n}`:"";try{const r=new Date(e);if(isNaN(r.getTime()))return e+(n?` from ${n}`:"");const a=r.getTime()+(t||0)*36e5,l=new Date(a),o=y=>y<10?"0"+y:""+y,c=l.getUTCFullYear(),d=o(l.getUTCMonth()+1),u=o(l.getUTCDate()),f=o(l.getUTCHours()),m=o(l.getUTCMinutes()),x=Zi.find(y=>y.value===t),b=x?x.label:t<0?"UTC"+t:"UTC+"+t;let w=`${c}-${d}-${u} ${f}:${m} ${b}`;return n&&(w+=` from ${n}`),w}catch{return e+(n?` from ${n}`:"")}}const Pb=e=>e==="admin"?"bg-amber-500/20 text-amber-200":e==="manager"?"bg-blue-500/20 text-blue-200":e==="user"?"bg-slate-600/30 text-slate-300":"bg-emerald-500/20 text-emerald-200",Tb=()=>{var z;const e=_t(),[t]=Yt(),n=t.get("username")??"",r=t.get("email")??"",a=t.get("status")??"",{user:l}=Oe(),[o,c]=i.useState(!0),[d,u]=i.useState(null),[f,m]=i.useState(null),[x,b]=i.useState([]),[w,y]=i.useState([]),[C,h]=i.useState([]),[p,g]=i.useState(""),[v,j]=i.useState(!1),[E,$]=i.useState(!1),[R,H]=i.useState(null),[O,q]=i.useState(!1),[W,re]=i.useState(-8),J=lt(l??null,"manager"),V=((z=l==null?void 0:l.groups)==null?void 0:z.includes("admin"))??!1,ce=V?["admin","manager","user"]:["user"],pe=async()=>{var F;if(!n)return;const U=Mo();if(!U){u("API URL not set."),c(!1);return}if(!((F=window.auth)!=null&&F.getAccessToken)){u("Sign in required."),c(!1);return}c(!0),u(null);try{const[Z,N]=await Promise.all([Y(`${U}/admin/users/${encodeURIComponent(n)}/groups`),Y(`${U}/admin/groups`)]);if(!Z.ok){const D=await Z.json().catch(()=>({}));throw new Error(D.error||"Failed to load user")}const T=await Z.json(),Q=((await N.json()).groups??[]).map(D=>D.name??(D.PK??"").replace("GROUP#","")).filter(Boolean);m({email:T.username??n,status:a,lastLoginAt:T.lastLoginAt??"",lastLoginIp:T.lastLoginIp??"",cognitoGroups:T.cognitoGroups??[],customGroups:T.customGroups??[]}),y([...T.cognitoGroups??[]]),h([...T.customGroups??[]]),b(Q)}catch(Z){u((Z==null?void 0:Z.message)??"Failed to load user")}finally{c(!1)}};i.useEffect(()=>{const U=parseInt(sessionStorage.getItem("funkedupshift_lastlogin_tz")??"-8",10);!isNaN(U)&&Zi.some(M=>M.value===U)&&re(U)},[]),i.useEffect(()=>{J&&n&&pe()},[J,n]);const S=U=>{U&&!w.includes(U)&&y(M=>[...M,U])},P=U=>{y(M=>M.filter(F=>F!==U))},I=U=>{U&&!C.includes(U)&&(h(M=>[...M,U]),g(""),j(!1))},B=U=>{h(M=>M.filter(F=>F!==U))},k=x.filter(U=>C.includes(U)?!1:p.trim()?U.toLowerCase().includes(p.toLowerCase().trim()):!0),K=async U=>{var X;if(U.preventDefault(),!n)return;const M=Mo();if(!M||!((X=window.auth)!=null&&X.getAccessToken))return;const Z=(f==null?void 0:f.cognitoGroups)??[],N=(f==null?void 0:f.customGroups)??[];let T=w.filter(ae=>!Z.includes(ae)),G=Z.filter(ae=>!w.includes(ae));V||(T=T.filter(ae=>ae==="user"),G=G.filter(ae=>ae==="user"));const Q=C.filter(ae=>!N.includes(ae)),D=N.filter(ae=>!C.includes(ae));$(!0),H(null);try{const ae=encodeURIComponent,ue=[];T.forEach(be=>ue.push(Y(`${M}/admin/users/${ae(n)}/groups`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groupName:be})}))),G.forEach(be=>ue.push(Y(`${M}/admin/users/${ae(n)}/groups/${ae(be)}`,{method:"DELETE"}))),Q.forEach(be=>ue.push(Y(`${M}/admin/users/${ae(n)}/groups`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groupName:be})}))),D.forEach(be=>ue.push(Y(`${M}/admin/users/${ae(n)}/groups/${ae(be)}`,{method:"DELETE"})));const ye=(await Promise.all(ue)).find(be=>!be.ok);if(ye){const be=await ye.json().catch(()=>({}));throw new Error(be.error||"Failed to save")}window.alert("Changes saved"),e("/admin/membership")}catch(ae){H((ae==null?void 0:ae.message)??"Failed to save")}finally{$(!1)}},ne=U=>{const M=parseInt(U.target.value,10);re(M),sessionStorage.setItem("funkedupshift_lastlogin_tz",String(M))},_=async()=>{var Z;const U=r||(f==null?void 0:f.email)||n;if(!window.confirm(`Delete user "${U}"? This cannot be undone.`))return;const M=Mo();if(!(!M||!((Z=window.auth)!=null&&Z.getAccessToken))){q(!0);try{const N=await Y(`${M}/admin/users/${encodeURIComponent(n)}`,{method:"DELETE"});if(!N.ok){const T=await N.json().catch(()=>({}));throw new Error(T.error||"Failed to delete user")}e("/admin/membership")}catch(N){H((N==null?void 0:N.message)??"Failed to delete user")}finally{q(!1)}}};return J?n?o?s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit User"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Loading"})]}):d||!f?s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit User"}),s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:d??"Failed to load user"})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ie,{to:"/admin/membership",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to users"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit User"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Adjust system roles and custom groups."}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("label",{htmlFor:"tz-select",className:"text-slate-500",children:"Last login timezone:"}),s.jsx("select",{id:"tz-select",value:W,onChange:ne,className:"rounded border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 text-sm",children:Zi.map(U=>s.jsx("option",{value:U.value,children:U.label},U.value))})]})]}),s.jsxs("form",{onSubmit:K,className:"space-y-6 max-w-2xl",children:[s.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("h2",{className:"text-sm font-medium text-slate-300 mb-3",children:"User info"}),s.jsx("table",{className:"text-sm",children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{className:"py-1 pr-4 font-medium text-slate-400 w-28",children:"Email"}),s.jsx("td",{className:"py-1 text-slate-200",children:r||f.email})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"py-1 pr-4 font-medium text-slate-400",children:"Status"}),s.jsx("td",{className:"py-1 text-slate-200",children:a||f.status||""})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"py-1 pr-4 font-medium text-slate-400",children:"Last login"}),s.jsx("td",{className:"py-1 text-slate-200",children:Eb(f.lastLoginAt,W,f.lastLoginIp)})]})]})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200",children:"System roles"}),s.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-200 w-full max-w-xs",onChange:U=>{const M=U.target.value;M&&S(M),U.target.value=""},children:[s.jsx("option",{value:"",children:"Select role to add"}),ce.filter(U=>!w.includes(U)).map(U=>s.jsx("option",{value:U,children:Mu[U]??U},U))]}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:w.map(U=>{const M=V||U==="user";return s.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded text-sm ${Pb(U)}`,children:[Mu[U]??U,M&&s.jsx("button",{type:"button",onClick:()=>P(U),className:"ml-0.5 hover:text-red-300","aria-label":"Remove",children:""})]},U)})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-200",children:"Custom groups"}),x.length===0?s.jsxs("p",{className:"text-sm text-slate-500",children:["No custom groups. ",s.jsx(ie,{to:"/admin/membership?tab=groups",className:"text-brand-orange hover:underline",children:"Create groups"}),"."]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"relative max-w-xs",children:[s.jsx("input",{type:"text",value:p,onChange:U=>{g(U.target.value),j(!0)},onFocus:()=>j(!0),placeholder:"Search or select groups",className:"w-full rounded border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-200 placeholder:text-slate-500"}),v&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>j(!1),"aria-hidden":"true"}),s.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 max-h-48 overflow-y-auto rounded border border-slate-700 bg-slate-900 shadow-lg z-20",children:k.length===0?s.jsx("div",{className:"px-3 py-2 text-sm text-slate-500",children:"No matches"}):k.map(U=>s.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",onClick:()=>I(U),children:U},U))})]})]}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:C.map(U=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-sm bg-emerald-500/20 text-emerald-200",children:[U,s.jsx("button",{type:"button",onClick:()=>B(U),className:"ml-0.5 hover:text-red-300","aria-label":"Remove",children:""})]},U))})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[s.jsx("button",{type:"submit",disabled:E,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:E?"Saving":"Save"}),s.jsx(ie,{to:"/admin/membership",className:"rounded-md border border-slate-700 px-4 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"}),V&&s.jsx("button",{type:"button",onClick:_,disabled:O||E,className:"rounded-md border border-red-500/60 bg-red-500/10 px-4 py-2 text-sm font-medium text-red-200 hover:bg-red-500/20 disabled:opacity-50",children:O?"Deleting":"Delete user"})]}),R&&s.jsx("p",{className:"text-sm text-red-400",children:R})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit User"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Missing username in URL."})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit User"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})},Rb=()=>{const{user:e,refreshAuth:t}=Oe(),n=_t(),[r,a]=i.useState("signin"),[l,o]=i.useState(""),[c,d]=i.useState(""),[u,f]=i.useState(!1),[m,x]=i.useState(null),[b,w]=i.useState(null),y=h=>{a(h),x(null),w(null)},C=async h=>{h.preventDefault(),x(null),w(null);const p=l.trim(),g=c.trim();if(!p||!g){x("Email and password are required.");return}const v=window;if(!v.auth){x("Auth is not configured. Check Cognito frontend setup.");return}f(!0);try{r==="signin"?(await new Promise((j,E)=>{v.auth.signIn(p,g,$=>{$?E($):j()})}),w("Signed in successfully. Redirecting"),await t()):(await new Promise((j,E)=>{v.auth.signUp(p,g,$=>{$?E($):j()})}),w("Account created successfully. You can now sign in."),a("signin")),r==="signin"&&setTimeout(()=>n("/"),800)}catch(j){const E=(j==null?void 0:j.message)||"Authentication failed. Please try again.";x(E)}finally{f(!1)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Sign in / Sign up"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Use your Funkedupshift account to rate sites, add notes, and manage curated content (based on your role)."})]}),e&&s.jsxs("div",{className:"rounded-xl border border-emerald-600/60 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-100",children:["You're currently signed in as"," ",s.jsx("span",{className:"font-semibold text-emerald-200",children:e.email})," (",e.role==="superadmin"?"SuperAdmin":e.role,"). You can safely close this page or continue browsing websites and media."]}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-[minmax(0,1.3fr)_minmax(0,1fr)] items-start",children:[s.jsxs("section",{className:"rounded-2xl border border-slate-800 bg-slate-950/70 p-5 shadow-lg shadow-slate-950/40",children:[s.jsxs("div",{className:"mb-4 flex gap-2 rounded-full bg-slate-900/70 p-1 text-xs font-medium text-slate-300",children:[s.jsx("button",{type:"button",onClick:()=>y("signin"),className:["flex-1 rounded-full px-3 py-1.5 transition-colors",r==="signin"?"bg-slate-50 text-slate-950":"hover:bg-slate-800/80"].join(" "),children:"Sign in"}),s.jsx("button",{type:"button",onClick:()=>y("signup"),className:["flex-1 rounded-full px-3 py-1.5 transition-colors",r==="signup"?"bg-slate-50 text-slate-950":"hover:bg-slate-800/80"].join(" "),children:"Sign up"})]}),s.jsxs("form",{className:"space-y-4",onSubmit:C,children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{htmlFor:"authEmail",className:"text-xs font-medium uppercase tracking-[0.18em] text-slate-400",children:"Email"}),s.jsx("input",{id:"authEmail",type:"email",autoComplete:"email",value:l,onChange:h=>o(h.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",placeholder:"you@example.com",required:!0})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{htmlFor:"authPassword",className:"text-xs font-medium uppercase tracking-[0.18em] text-slate-400",children:"Password"}),s.jsx("input",{id:"authPassword",type:"password",autoComplete:r==="signin"?"current-password":"new-password",value:c,onChange:h=>d(h.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",placeholder:r==="signup"?"At least 8 characters":"Your password",minLength:8,required:!0})]}),m&&s.jsx("div",{className:"rounded-md border border-red-500/70 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:m}),b&&!m&&s.jsx("div",{className:"rounded-md border border-emerald-500/70 bg-emerald-500/10 px-3 py-2 text-xs text-emerald-100",children:b}),s.jsx("button",{type:"submit",disabled:u,className:"inline-flex w-full items-center justify-center rounded-full bg-brand-orange px-4 py-2.5 text-sm font-semibold text-slate-950 shadow-md shadow-orange-500/40 transition hover:bg-orange-500 disabled:cursor-not-allowed disabled:opacity-70",children:u?r==="signin"?"Signing in":"Creating account":r==="signin"?"Sign in":"Create account"})]})]}),s.jsxs("aside",{className:"space-y-3 rounded-2xl border border-slate-800 bg-slate-950/40 p-4 text-xs text-slate-300",children:[s.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-[0.25em] text-slate-500",children:"How access works"}),s.jsxs("ul",{className:"space-y-2",children:[s.jsxs("li",{children:[s.jsx("span",{className:"font-semibold text-slate-100",children:"Guests"})," can browse all websites and media without signing in."]}),s.jsxs("li",{children:[s.jsx("span",{className:"font-semibold text-slate-100",children:"Signed-in users"})," can star sites and media, and later add their own metadata and comments."]}),s.jsxs("li",{children:[s.jsx("span",{className:"font-semibold text-slate-100",children:"Managers & admins"})," can curate sites, media, and categories, with extra tooling in the admin area."]})]}),s.jsx("p",{className:"text-slate-500",children:"If you don't see expected admin controls after signing in, confirm your Cognito group membership in the AWS Console."})]})]})]})},Lb={admin:"SuperAdmin",manager:"Manager",user:"User"},td=[{value:-8,label:"UTC-8"},{value:-5,label:"UTC-5"},{value:0,label:"UTC+0/GMT"}],zp="funkedupshift_lastlogin_tz";function Ab(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function $b(){try{const e=parseInt(sessionStorage.getItem(zp)??"",10);if(!isNaN(e)&&td.some(t=>t.value===e))return e}catch{}return-8}function Ib(e){try{sessionStorage.setItem(zp,String(e))}catch{}}function Ub(e,t,n){if(!e)return n?`from ${n}`:"";try{const r=new Date(e);if(isNaN(r.getTime()))return e;const a=r.getTime()+t*36e5,l=new Date(a),o=y=>y<10?"0"+y:""+y,c=l.getUTCFullYear(),d=o(l.getUTCMonth()+1),u=o(l.getUTCDate()),f=o(l.getUTCHours()),m=o(l.getUTCMinutes()),x=td.find(y=>y.value===t),b=x?x.label:t<0?`UTC${t}`:`UTC+${t}`;let w=`${c}-${d}-${u} ${f}:${m} ${b}`;return n&&(w+=` from ${n}`),w}catch{return e}}const Mb=()=>{var U,M,F,Z;const{user:e,refreshAuth:t}=Oe(),[n,r]=Yt(),a=n.get("tab"),l=a==="groups"?"groups":"profile",[o,c]=i.useState(l),[d,u]=i.useState(null),[f,m]=i.useState(""),[x,b]=i.useState($b),[w,y]=i.useState(!0),[C,h]=i.useState(!1),[p,g]=i.useState(null),[v,j]=i.useState(""),[E,$]=i.useState(!1),[R,H]=i.useState(null),[O,q]=i.useState([]),[W,re]=i.useState(!1),[J,V]=i.useState(null),[ce,pe]=i.useState(null),S=Ab();i.useEffect(()=>{c(a==="groups"?"groups":"profile")},[a]);const P=N=>{c(N);const T=new URLSearchParams(n);N==="groups"?T.set("tab","groups"):T.delete("tab"),r(T)};i.useEffect(()=>{if(!e||!S){y(!1);return}let N=!1;return Y(`${S}/profile`).then(T=>T.ok?T.json():T.json().then(G=>Promise.reject(new Error(G.error||"Failed")))).then(T=>{var G;N||(u(T),m(((G=T.profile)==null?void 0:G.description)??""))}).catch(T=>{N||H({text:`Failed to load profile: ${(T==null?void 0:T.message)??"Unknown"}`,error:!0})}).finally(()=>{N||y(!1)}),()=>{N=!0}},[e,S]);const I=Re.useCallback(async()=>{if(S){re(!0),V(null);try{const N=await Y(`${S}/groups`);if(!N.ok){const G=await N.json().catch(()=>({}));throw new Error(G.error||"Failed to load groups")}const T=await N.json();q(T.groups??[])}catch(N){V({text:`Failed: ${(N==null?void 0:N.message)??"Unknown"}`,error:!0})}finally{re(!1)}}},[S]);i.useEffect(()=>{o==="groups"&&e&&S&&I()},[o,e,S,I]);const B=async(N,T)=>{if(S){pe(N),V(null);try{if(T){const G=await Y(`${S}/me/groups/${encodeURIComponent(N)}`,{method:"DELETE"});if(!G.ok){const Q=await G.json().catch(()=>({}));throw new Error(Q.error||"Failed to leave")}u(Q=>Q?{...Q,customGroups:(Q.customGroups??[]).filter(D=>D!==N)}:null),V({text:`Left ${N}.`,error:!1})}else{const G=await Y(`${S}/me/groups`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groupName:N})});if(!G.ok){const Q=await G.json().catch(()=>({}));throw new Error(Q.error||"Failed to join")}u(Q=>Q?{...Q,customGroups:[...Q.customGroups??[],N]}:null),V({text:`Joined ${N}.`,error:!1})}await t()}catch(G){V({text:`Error: ${(G==null?void 0:G.message)??"Unknown"}`,error:!0})}finally{pe(null)}}},k=async()=>{if(S){h(!0),H(null);try{const N=await Y(`${S}/profile`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:f.trim().slice(0,100)})});if(!N.ok){const T=await N.json();throw new Error(T.error||"Failed")}H({text:"Saved.",error:!1})}catch(N){H({text:`Error: ${(N==null?void 0:N.message)??"Unknown"}`,error:!0})}finally{h(!1)}}},K=async N=>{var Q,D;const T=(Q=N.target.files)==null?void 0:Q[0];if(N.target.value="",!T||!S)return;if(g(null),!((D=T.type)!=null&&D.match(/^image\/(png|jpeg|jpg|gif|webp)$/))){g("Please choose PNG, JPEG, GIF, or WebP.");return}const G=T.type||"image/png";try{const X=await Y(`${S}/profile/avatar-upload`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contentType:G})});if(!X.ok){const Ke=await X.json();throw new Error(Ke.error||"Upload failed")}const{uploadUrl:ae,key:ue}=await X.json();if(!(await fetch(ae,{method:"PUT",body:T,headers:{"Content-Type":G}})).ok)throw new Error("Upload failed");const ye=await Y(`${S}/profile`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({avatarKey:ue})});if(!ye.ok){const Ke=await ye.json();throw new Error(Ke.error||"Failed")}const be=await Y(`${S}/profile`).then(Ke=>Ke.json());u(be)}catch(X){g(`Error: ${(X==null?void 0:X.message)??"Unknown"}`)}},ne=async()=>{if(S){g(null);try{const N=await Y(`${S}/profile/avatar`,{method:"DELETE"});if(!N.ok){const T=await N.json();throw new Error(T.error||"Failed")}u(T=>T?{...T,profile:{...T.profile,avatarUrl:void 0,avatarKey:void 0}}:null)}catch(N){g(`Error: ${(N==null?void 0:N.message)??"Unknown"}`)}}},_=async()=>{const N=v.trim();if(!(!N||!S)){g(null),$(!0);try{const T=await Y(`${S}/profile/avatar-from-url`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageUrl:N})});if(!T.ok){const X=await T.json();throw new Error(X.error||"Import failed")}const{key:G}=await T.json(),Q=await Y(`${S}/profile`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({avatarKey:G})});if(!Q.ok){const X=await Q.json();throw new Error(X.error||"Failed")}const D=await Y(`${S}/profile`).then(X=>X.json());u(D),j("")}catch(T){g(`Error: ${(T==null?void 0:T.message)??"Unknown"}`)}finally{$(!1)}}};if(!e)return s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"My Profile"}),s.jsxs("p",{className:"text-sm text-slate-400",children:[s.jsx(ie,{to:"/auth",className:"text-brand-orange hover:underline",children:"Sign in"})," ","to view and edit your profile."]})]});if(!S)return s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"My Profile"}),s.jsx("p",{className:"text-sm text-red-400",children:"API URL not set."})]});if(w)return s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"My Profile"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Loading profile"})]});const z=d!=null&&d.profile?Ub(d.profile.lastLoginAt,x,d.profile.lastLoginIp):"";return s.jsxs("div",{className:"space-y-6 max-w-2xl",children:[s.jsx(ie,{to:"/",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:" Back to Home"}),s.jsx("header",{children:s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"My Profile"})}),s.jsxs("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:[s.jsx("button",{type:"button",onClick:()=>P("profile"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="profile"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Profile"}),s.jsx("button",{type:"button",onClick:()=>P("groups"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="groups"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Custom groups"})]}),o==="groups"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-slate-400",children:"Add or remove yourself from custom groups. Changes take effect immediately."}),J&&s.jsx("div",{className:`rounded-md px-3 py-2 text-sm ${J.error?"border-red-500/60 bg-red-500/10 text-red-200":"border-green-500/40 bg-green-500/10 text-green-200"}`,children:J.text}),W?s.jsx("p",{className:"text-sm text-slate-500",children:"Loading groups"}):O.length===0?s.jsx("p",{className:"text-sm text-slate-500",children:"No custom groups available. Admins can create groups in Membership."}):s.jsx("ul",{className:"space-y-2",children:O.map(N=>{const T=((d==null?void 0:d.customGroups)??[]).includes(N.name);return s.jsxs("li",{className:"flex items-center justify-between rounded-lg border border-slate-800 bg-slate-950/60 px-3 py-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-slate-200",children:N.name}),N.description&&s.jsx("span",{className:"text-slate-500 ml-2 text-sm",children:N.description})]}),s.jsx("button",{type:"button",onClick:()=>B(N.name,T),disabled:ce===N.name,className:`rounded-md px-3 py-1.5 text-xs font-medium ${T?"border border-amber-500/60 bg-amber-500/10 text-amber-300 hover:bg-amber-500/20":"border border-emerald-500/60 bg-emerald-500/10 text-emerald-300 hover:bg-emerald-500/20"} disabled:opacity-50`,children:ce===N.name?"":T?"Leave":"Join"})]},N.name)})})]}),o==="profile"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400",children:"Last login timezone"}),s.jsx("select",{value:x,onChange:N=>{const T=parseInt(N.target.value,10);Ib(T),b(T)},className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",children:td.map(N=>s.jsx("option",{value:N.value,children:N.label},N.value))})]}),R&&s.jsx("div",{className:`rounded-md px-3 py-2 text-sm ${R.error?"border-red-500/60 bg-red-500/10 text-red-200":"border-green-500/40 bg-green-500/10 text-green-200"}`,children:R.text}),d&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("h2",{className:"text-sm font-semibold text-slate-200 mb-3",children:"User info"}),s.jsx("table",{className:"w-full text-sm",children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{className:"py-1 pr-4 font-medium text-slate-300 w-28",children:"Email"}),s.jsx("td",{className:"text-slate-400",children:d.email??""})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"py-1 pr-4 font-medium text-slate-300",children:"Status"}),s.jsx("td",{className:"text-slate-400",children:d.status??""})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"py-1 pr-4 font-medium text-slate-300",children:"Last login"}),s.jsx("td",{className:"text-slate-400",children:z})]})]})})]}),s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("h2",{className:"text-sm font-semibold text-slate-200 mb-3",children:"System role"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:(((U=d.cognitoGroups)==null?void 0:U.length)??0)>0?d.cognitoGroups.map(N=>{const T=Lb[N]??N,G=N==="admin"?"bg-amber-500/20 text-amber-300":N==="manager"?"bg-blue-500/20 text-blue-300":"bg-slate-700 text-slate-200";return s.jsx("span",{className:`rounded-md px-2 py-0.5 text-xs font-medium ${G}`,children:T},N)}):s.jsx("span",{className:"rounded-md px-2 py-0.5 text-xs font-medium bg-slate-700 text-slate-200",children:"User"})})]}),s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("h2",{className:"text-sm font-semibold text-slate-200 mb-3",children:"Custom groups"}),(((M=d.customGroups)==null?void 0:M.length)??0)>0?s.jsx("div",{className:"flex flex-wrap gap-2",children:d.customGroups.map(N=>s.jsx("span",{className:"rounded-md px-2 py-0.5 text-xs font-medium bg-emerald-500/20 text-emerald-300",children:N},N))}):s.jsx("p",{className:"text-sm text-slate-500",children:"Not in any custom groups."})]}),s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("h2",{className:"text-sm font-semibold text-slate-200 mb-3",children:"Edit profile"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Profile icon"}),s.jsxs("div",{className:"flex items-start gap-4",children:[(F=d.profile)!=null&&F.avatarUrl?s.jsx("img",{src:d.profile.avatarUrl,alt:"Profile",className:"h-24 w-24 rounded-full border-2 border-slate-700 object-cover"}):s.jsx("div",{className:"h-24 w-24 rounded-full border-2 border-slate-700 bg-slate-800 flex items-center justify-center text-2xl text-slate-500",children:"?"}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/gif,image/webp",onChange:K,className:"block w-full text-xs text-slate-300 file:mr-3 file:rounded-md file:border-0 file:bg-slate-800 file:px-3 file:py-1.5 file:text-slate-100"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Or paste image URL (min 4848, max 5 MB):"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"url",value:v,onChange:N=>j(N.target.value),placeholder:"https://example.com/avatar.png",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("button",{type:"button",onClick:_,disabled:!v.trim()||E,className:"rounded-md border border-slate-600 px-3 py-2 text-sm font-medium text-slate-200 hover:bg-slate-800 disabled:opacity-50",children:E?"Importing":"Use from URL"})]}),((Z=d.profile)==null?void 0:Z.avatarUrl)&&s.jsx("button",{type:"button",onClick:ne,className:"self-start rounded-md border border-red-500/60 bg-red-500/10 px-2 py-1 text-xs font-medium text-red-300 hover:bg-red-500/20",children:"Remove icon"})]})]}),s.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"PNG, JPEG, GIF, or WebP. Same constraints as thumbnail uploads."}),p&&s.jsx("p",{className:"mt-1 text-xs text-red-400",children:p})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"profile-description",className:"block text-xs font-medium text-slate-400 mb-1",children:"Description"}),s.jsx("textarea",{id:"profile-description",value:f,onChange:N=>m(N.target.value),maxLength:100,placeholder:"About you (max 100 characters)",rows:4,className:"w-full max-w-md rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsxs("div",{className:`mt-1 text-xs ${f.length>=100?"text-red-400":"text-slate-500"}`,children:[f.length," / 100"]})]}),s.jsx("button",{type:"button",onClick:k,disabled:C,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:C?"Saving":"Save"})]})]})]})]})]})},Db=/^\d{4}-\d{2}-\d{2}$/;function Du(e){if(!Db.test(e))return!1;const t=new Date(e);return!isNaN(t.getTime())}const hs=({id:e,value:t,onChange:n,label:r,required:a,className:l="",inputClassName:o=""})=>{const c=i.useRef(null),d=i.useRef(null),u=y=>{const h=y.target.value.replace(/[^\d-]/g,"");n(h)},f=()=>{const y=t.trim();y&&!Du(y)&&n("")},m=y=>{const C=y.target.value;C&&n(C)},x=()=>{const y=c.current;y&&(y.focus(),typeof y.showPicker=="function"&&y.showPicker())},b="rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",w=t&&Du(t);return s.jsxs("div",{className:l,children:[s.jsxs("label",{htmlFor:`${e}-text`,className:"block text-xs font-semibold text-slate-400 mb-1",children:[r,s.jsx("span",{className:"block font-normal text-slate-500 mt-0.5",children:"yyyy-MM-DD or use calendar"})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("input",{ref:d,type:"text",id:`${e}-text`,value:t,onChange:u,onBlur:f,placeholder:"yyyy-MM-DD",required:a,pattern:a?"[0-9]{4}-[0-9]{2}-[0-9]{2}":void 0,title:a?"Enter date as yyyy-MM-DD":void 0,className:`${b} flex-1 min-w-0 ${o}`,inputMode:"numeric",autoComplete:"off"}),s.jsx("input",{ref:c,type:"date",id:e,value:w?t:"",onChange:m,required:a,className:"sr-only","aria-hidden":!0}),s.jsx("button",{type:"button",onClick:x,title:"Open calendar","aria-label":"Open calendar",className:"rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-slate-400 hover:bg-slate-800 hover:text-slate-200 focus:border-brand-orange focus:outline-none shrink-0",children:s.jsx(Cg,{className:"h-5 w-5"})})]})]})};function Ou(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Do=10,Ob=()=>{const{user:e}=Oe(),[t,n]=Yt(),[r,a]=i.useState([]),[l,o]=i.useState(()=>{const D=t.get("playerIds");return D?D.split(",").filter(Boolean):[]}),[c,d]=i.useState([]),[u,f]=i.useState(1),[m,x]=i.useState(!1),[b,w]=i.useState(()=>t.get("date")??""),[y,C]=i.useState(()=>t.get("dateFrom")??""),[h,p]=i.useState(()=>t.get("dateTo")??""),[g,v]=i.useState(""),[j,E]=i.useState(!1),[$,R]=i.useState(null),[H,O]=i.useState(null),[q,W]=i.useState(!1),[re,J]=i.useState(()=>t.get("sortOrder")==="oldest"?"oldest":"newest"),[V,ce]=i.useState(()=>t.get("playerMode")==="or"?"or":"and"),pe=i.useRef(null),S=ql(e),P=Jl(e),I=D=>{const X=r.find(ae=>ae.id===D||ae.PK===D);return X&&(X.name||X.id)||D},B=async()=>{const D=Ou();if(D)try{const X=await Y(`${D}/squash/players`);if(!X.ok){const xe=await X.json().catch(()=>({}));throw new Error(xe.error||"Failed")}const ue=((await X.json()).players??[]).map(xe=>({...xe,id:xe.id||xe.PK||""}));a(ue)}catch(X){O((X==null?void 0:X.message)??"Failed to load players")}},k=async()=>{const D=Ou();if(!D)return;const X=new URLSearchParams;b&&X.set("date",b),y&&X.set("dateFrom",y),h&&X.set("dateTo",h),l.length&&(X.set("playerIds",l.join(",")),X.set("playerMode",V));const ae=X.toString()?`?${X.toString()}`:"";W(!0),O(null);try{const ue=await Y(`${D}/squash/matches${ae}`);if(!ue.ok){const be=await ue.json().catch(()=>({}));throw new Error(be.error||"Failed")}const xe=await ue.json();d(xe.matches??[]),x(!0),f(1);const ye=new URLSearchParams;b&&ye.set("date",b),y&&ye.set("dateFrom",y),h&&ye.set("dateTo",h),l.length&&(ye.set("playerIds",l.join(",")),ye.set("playerMode",V)),ye.set("sortOrder",re),n(ye,{replace:!0})}catch(ue){O((ue==null?void 0:ue.message)??"Failed to search matches")}finally{W(!1)}},K=()=>{w(""),C(""),p(""),o([]),v(""),ce("and"),x(!1),d([]),f(1),n({},{replace:!0})},ne=D=>{l.includes(D)||o([...l,D]),v("")},_=D=>{o(l.filter(X=>X!==D))},z=r.filter(D=>!l.includes(D.id)&&(!g.trim()||(D.name||"").toLowerCase().includes(g.toLowerCase())));i.useEffect(()=>{S&&B()},[S]);const U=t.get("date")||t.get("dateFrom")||t.get("dateTo")||t.get("playerIds");i.useEffect(()=>{!S||!U||k()},[]),i.useEffect(()=>{function D(X){pe.current&&!pe.current.contains(X.target)&&E(!1)}if(j)return document.addEventListener("mousedown",D),()=>document.removeEventListener("mousedown",D)},[j]);const M=i.useMemo(()=>{const D=[...c];return D.sort((X,ae)=>{const ue=X.date||"",xe=ae.date||"";return re==="newest"?xe.localeCompare(ue):ue.localeCompare(xe)}),D},[c,re]),F=Math.max(1,Math.ceil(M.length/Do)),Z=(u-1)*Do,N=M.slice(Z,Z+Do),T=D=>{const X=D.teamAGames??0,ae=D.teamBGames??0,ue=D.winningTeam==="B"?ae:X,xe=D.winningTeam==="B"?X:ae;return`${ue}-${xe}`},G=D=>{const X=[I(D.teamAPlayer1Id||""),I(D.teamAPlayer2Id||"")].filter(Boolean).join(" & "),ae=[I(D.teamBPlayer1Id||""),I(D.teamBPlayer2Id||"")].filter(Boolean).join(" & "),ue=D.winningTeam==="B"?ae:X,xe=D.winningTeam==="B"?X:ae;return s.jsxs("li",{className:"flex items-center gap-2 flex-wrap py-2 border-b border-slate-800 last:border-0",children:[s.jsx("span",{className:"font-semibold text-slate-200",children:D.date||""}),s.jsxs("span",{className:"text-slate-300",children:[ue," vs ",xe]}),s.jsx("span",{className:"italic text-slate-400",children:T(D)})]},D.id||D.date+ue)},Q=[];if(F<=7)for(let D=1;D<=F;D++)Q.push(D);else{const D=u;Q.push(1),D>3&&Q.push("");for(let X=Math.max(2,D-1);X<=Math.min(F-1,D+1);X++)Q.includes(X)||Q.push(X);D<F-2&&Q.push(""),F>1&&Q.push(F)}return e?S?s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Doubles"}),P&&s.jsx("p",{className:"text-sm text-slate-400",children:s.jsx(ie,{to:"/squash-admin",className:"text-brand-orange hover:text-orange-400",children:"Squash Admin"})}),($||H)&&s.jsx("div",{className:`rounded-md px-4 py-3 text-sm ${H?"bg-red-900/30 border border-red-800/50 text-red-200":"bg-emerald-900/30 border border-emerald-800/50 text-emerald-200"}`,children:H||$}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-base font-semibold text-slate-200 mb-3",children:"Search matches"}),s.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[s.jsx(hs,{id:"searchDate",value:b,onChange:w,label:"Date (exact)",className:"max-w-[12rem]"}),s.jsx(hs,{id:"searchDateFrom",value:y,onChange:C,label:"Date from",className:"max-w-[12rem]"}),s.jsx(hs,{id:"searchDateTo",value:h,onChange:p,label:"Date to",className:"max-w-[12rem]"}),s.jsxs("div",{className:"relative max-w-[14rem] min-w-[12rem]",ref:pe,children:[s.jsx("label",{className:"block text-xs font-semibold text-slate-400 mb-1",children:"Filter by players"}),s.jsx("input",{type:"text",value:g,onChange:D=>v(D.target.value),onFocus:()=>E(!0),placeholder:"Search players...",autoComplete:"off",className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none"}),j&&s.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-slate-900 border border-slate-700 rounded-md max-h-48 overflow-y-auto z-10",children:z.length?z.map(D=>s.jsx("button",{type:"button",onClick:()=>ne(D.id),className:"w-full text-left px-3 py-2 text-sm text-slate-200 hover:bg-slate-800",children:D.name||D.id},D.id)):s.jsx("div",{className:"px-3 py-2 text-sm text-slate-500",children:"No matches"})}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:l.map(D=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-slate-700 text-slate-200 text-xs",children:[I(D),s.jsx("button",{type:"button",onClick:()=>_(D),className:"text-slate-400 hover:text-slate-100","aria-label":"Remove",children:""})]},D))}),l.length>0&&s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-slate-500",children:"Match:"}),s.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[s.jsx("button",{type:"button",onClick:()=>ce("and"),className:`rounded px-2 py-0.5 text-xs font-medium ${V==="and"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"AND"}),s.jsx("button",{type:"button",onClick:()=>ce("or"),className:`rounded px-2 py-0.5 text-xs font-medium ${V==="or"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"OR"})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:k,disabled:q,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:q?"Searching":"Search"}),s.jsx("button",{type:"button",onClick:K,className:"rounded-md border border-slate-600 px-4 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Clear"})]})]})]}),s.jsxs("section",{children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-3",children:[s.jsx("h2",{className:"text-base font-semibold text-slate-200",children:"Results"}),m&&M.length>0&&s.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[s.jsx("button",{type:"button",onClick:()=>J("newest"),className:`rounded px-2 py-0.5 text-xs font-medium ${re==="newest"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"Newest first"}),s.jsx("button",{type:"button",onClick:()=>J("oldest"),className:`rounded px-2 py-0.5 text-xs font-medium ${re==="oldest"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"Oldest first"})]})]}),m&&s.jsx("div",{className:"rounded-md border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm text-slate-400 mb-3",children:M.length===0?"No results":`${M.length} results`}),m?N.length===0?s.jsx("ul",{className:"list-none p-0",children:s.jsx("li",{className:"py-2 text-slate-400",children:"No matches found."})}):s.jsxs(s.Fragment,{children:[s.jsx("ul",{className:"list-none p-0",children:N.map(G)}),F>1&&s.jsxs("div",{className:"flex items-center gap-2 mt-4 flex-wrap",children:[s.jsx("button",{type:"button",disabled:u<=1,onClick:()=>f(D=>Math.max(1,D-1)),className:"rounded-md border border-slate-600 px-3 py-1 text-sm disabled:opacity-50 disabled:cursor-not-allowed text-slate-300 hover:bg-slate-800",children:"Prev"}),s.jsx("span",{className:"flex items-center gap-1",children:Q.map((D,X)=>D===""?s.jsx("span",{className:"px-1 text-slate-500",children:""},`ellipsis-${X}`):D===u?s.jsx("span",{className:"min-w-[2rem] px-2 py-1 text-center font-semibold text-slate-200",children:D},D):s.jsx("button",{type:"button",onClick:()=>f(D),className:"min-w-[2rem] rounded px-2 py-1 text-sm text-slate-300 hover:bg-slate-800 border border-slate-600",children:D},D))}),s.jsx("button",{type:"button",disabled:u>=F,onClick:()=>f(D=>Math.min(F,D+1)),className:"rounded-md border border-slate-600 px-3 py-1 text-sm disabled:opacity-50 disabled:cursor-not-allowed text-slate-300 hover:bg-slate-800",children:"Next"})]})]}):s.jsx("div",{className:"flex items-center justify-center min-h-[280px]",children:s.jsx("p",{className:"text-2xl sm:text-3xl font-light text-slate-500/80 tracking-wide animate-pulse",children:"Enter search criteria and click Search to find matches."})})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Doubles"}),s.jsx("div",{className:"rounded-md bg-amber-900/30 border border-amber-800/50 px-4 py-3 text-sm text-amber-200",children:"You do not have access to the Squash section. Join the Squash group or contact an admin."})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Doubles"}),s.jsxs("div",{className:"rounded-md bg-red-900/30 border border-red-800/50 px-4 py-3 text-sm text-red-200",children:["Sign in required. ",s.jsx(ie,{to:"/auth",className:"underline hover:text-red-100",children:"Sign in"})]})]})};function os(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Oo=10,Fb=()=>{const{user:e}=Oe(),[t,n]=Yt(),[r,a]=i.useState("matches"),[l,o]=i.useState([]),[c,d]=i.useState(()=>{const A=t.get("playerIds");return A?A.split(",").filter(Boolean):[]}),[u,f]=i.useState([]),[m,x]=i.useState(1),[b,w]=i.useState(!1),[y,C]=i.useState(()=>t.get("date")??""),[h,p]=i.useState(()=>t.get("dateFrom")??""),[g,v]=i.useState(()=>t.get("dateTo")??""),[j,E]=i.useState(""),[$,R]=i.useState(!1),[H,O]=i.useState(null),[q,W]=i.useState(""),[re,J]=i.useState(""),[V,ce]=i.useState(""),[pe,S]=i.useState(""),[P,I]=i.useState(""),[B,k]=i.useState("A"),[K,ne]=i.useState(0),[_,z]=i.useState(!1),[U,M]=i.useState(!1),[F,Z]=i.useState(()=>t.get("sortOrder")==="oldest"?"oldest":"newest"),[N,T]=i.useState(()=>t.get("playerMode")==="or"?"or":"and"),G=i.useRef(null),[Q,D]=i.useState([]),[X,ae]=i.useState([]),[ue,xe]=i.useState(null),[ye,be]=i.useState(""),[Ke,ot]=i.useState(""),[le,Ne]=i.useState(""),[Fe,Te]=i.useState(!1),[Se,_e]=i.useState(null),[Be,Xe]=i.useState(null),it=Jl(e),nt=A=>{const he=l.find(L=>L.id===A||L.PK===A);return he&&(he.name||he.id)||A},$t=async()=>{const A=os();if(A)try{const he=await Y(`${A}/squash/players`);if(!he.ok){const ve=await he.json().catch(()=>({}));throw new Error(ve.error||"Failed")}const te=((await he.json()).players??[]).map(ve=>({...ve,id:ve.id||ve.PK||""}));o(te),D(te)}catch(he){_e((he==null?void 0:he.message)??"Failed to load players")}},gn=async()=>{const A=os();if(A)try{const he=await Y(`${A}/admin/users?limit=60`);if(!he.ok)return;const L=await he.json();ae(L.users??[])}catch{ae([])}},Et=async()=>{const A=os();if(!A)return;const he=new URLSearchParams;y&&he.set("date",y),h&&he.set("dateFrom",h),g&&he.set("dateTo",g),c.length&&(he.set("playerIds",c.join(",")),he.set("playerMode",N));const L=he.toString()?`?${he.toString()}`:"";M(!0),_e(null);try{const te=await Y(`${A}/squash/matches${L}`);if(!te.ok){const je=await te.json().catch(()=>({}));throw new Error(je.error||"Failed")}const ve=await te.json();f(ve.matches??[]),w(!0),x(1);const de=new URLSearchParams;y&&de.set("date",y),h&&de.set("dateFrom",h),g&&de.set("dateTo",g),c.length&&(de.set("playerIds",c.join(",")),de.set("playerMode",N)),de.set("sortOrder",F),n(de,{replace:!0})}catch(te){_e((te==null?void 0:te.message)??"Failed to search matches")}finally{M(!1)}},ln=()=>{C(""),p(""),v(""),d([]),T("and"),E(""),w(!1),f([]),x(1),n({},{replace:!0})},oe=A=>{c.includes(A)||d([...c,A]),E("")},ge=A=>{d(c.filter(he=>he!==A))},We=l.filter(A=>!c.includes(A.id)&&(!j.trim()||(A.name||"").toLowerCase().includes(j.toLowerCase()))),$e=[re,V,pe,P],ke=A=>{const he=A==="p1"?0:A==="p2"?1:A==="p3"?2:3,L=$e.filter((te,ve)=>ve!==he);return l.filter(te=>!L.includes(te.id))},ee=async A=>{if(A.preventDefault(),!q||!re||!V||!pe||!P){_e("All fields are required.");return}const he=[re,V,pe,P];if(new Set(he).size!==4){_e("Each player can only be on one team.");return}const L=os();if(!L)return;const de={date:q,teamAPlayer1Id:re,teamAPlayer2Id:V,teamBPlayer1Id:pe,teamBPlayer2Id:P,winningTeam:B,teamAGames:B==="A"?3:K,teamBGames:B==="B"?3:K},je=H?"PUT":"POST";H&&(de.id=H),z(!0),_e(null);try{const we=await Y(`${L}/squash/matches`,{method:je,headers:{"Content-Type":"application/json"},body:JSON.stringify(de)});if(!we.ok){const Pe=await we.json().catch(()=>({}));throw new Error(Pe.error||"Failed")}O(null),W(""),J(""),ce(""),S(""),I(""),k("A"),ne(0),Et()}catch(we){_e((we==null?void 0:we.message)??"Failed")}finally{z(!1)}},me=()=>{O(null),W(""),J(""),ce(""),S(""),I(""),k("A"),ne(0)},Ie=A=>{var L,te;const he=A.id||((te=(L=A.PK)==null?void 0:L.replace)==null?void 0:te.call(L,"SQUASH#MATCH#",""))||"";O(he),W(A.date||""),J(A.teamAPlayer1Id||""),ce(A.teamAPlayer2Id||""),S(A.teamBPlayer1Id||""),I(A.teamBPlayer2Id||""),k(A.winningTeam||"A"),ne(A.winningTeam==="A"?A.teamBGames??0:A.teamAGames??0)},Ue=async A=>{if(!confirm("Delete this match?"))return;const he=os();if(he)try{const L=await Y(`${he}/squash/matches?id=${encodeURIComponent(A)}`,{method:"DELETE"});if(!L.ok){const te=await L.json().catch(()=>({}));throw new Error(te.error||"Failed")}Et()}catch(L){_e((L==null?void 0:L.message)??"Delete failed")}},Ee=async A=>{A.preventDefault();const he=ye.trim();if(!he){_e("Name is required.");return}const L=os();if(!L)return;const te={name:he,email:Ke.trim()||void 0,userId:le||void 0},ve=ue?"PUT":"POST";ue&&(te.id=ue),Te(!0),_e(null);try{const de=await Y(`${L}/squash/players`,{method:ve,headers:{"Content-Type":"application/json"},body:JSON.stringify(te)});if(!de.ok){const je=await de.json().catch(()=>({}));throw new Error(je.error||"Failed")}xe(null),be(""),ot(""),Ne(""),$t()}catch(de){_e((de==null?void 0:de.message)??"Failed")}finally{Te(!1)}},Ae=()=>{xe(null),be(""),ot(""),Ne("")},Me=A=>{xe(A.id),be(A.name||""),ot(A.email||""),Ne(A.userId||"")},yn=async A=>{if(!confirm("Delete this player?"))return;const he=os();if(he)try{const L=await Y(`${he}/squash/players?id=${encodeURIComponent(A)}`,{method:"DELETE"});if(!L.ok){const te=await L.json().catch(()=>({}));throw new Error(te.error||"Failed")}$t()}catch(L){_e((L==null?void 0:L.message)??"Delete failed")}};i.useEffect(()=>{it&&($t(),r==="players"&&gn())},[it,r]);const vn=t.get("date")||t.get("dateFrom")||t.get("dateTo")||t.get("playerIds");i.useEffect(()=>{!it||!vn||Et()},[]),i.useEffect(()=>{function A(he){G.current&&!G.current.contains(he.target)&&R(!1)}if($)return document.addEventListener("mousedown",A),()=>document.removeEventListener("mousedown",A)},[$]);const gt=i.useMemo(()=>{const A=[...u];return A.sort((he,L)=>{const te=he.date||"",ve=L.date||"";return F==="newest"?ve.localeCompare(te):te.localeCompare(ve)}),A},[u,F]),ut=Math.max(1,Math.ceil(gt.length/Oo)),bn=(m-1)*Oo,dr=gt.slice(bn,bn+Oo),Yl=A=>{const he=A.teamAGames??0,L=A.teamBGames??0;return A.winningTeam==="A"?`${he}-${L}`:`${L}-${he}`},Bt=[];if(ut<=7)for(let A=1;A<=ut;A++)Bt.push(A);else{const A=m;Bt.push(1),A>3&&Bt.push("");for(let he=Math.max(2,A-1);he<=Math.min(ut-1,A+1);he++)Bt.includes(he)||Bt.push(he);A<ut-2&&Bt.push(""),ut>1&&Bt.push(ut)}return e?it?s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Admin"}),s.jsx("p",{className:"text-sm text-slate-400",children:s.jsx(ie,{to:"/squash",className:"text-brand-orange hover:text-orange-400",children:"Squash"})}),(Be||Se)&&s.jsx("div",{className:`rounded-md px-4 py-3 text-sm ${Se?"bg-red-900/30 border border-red-800/50 text-red-200":"bg-emerald-900/30 border border-emerald-800/50 text-emerald-200"}`,children:Se||Be}),s.jsxs("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:[s.jsx("button",{type:"button",onClick:()=>a("matches"),className:`px-4 py-2 rounded-md text-sm font-medium ${r==="matches"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Matches"}),s.jsx("button",{type:"button",onClick:()=>a("players"),className:`px-4 py-2 rounded-md text-sm font-medium ${r==="players"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Players"})]}),r==="matches"&&s.jsxs(s.Fragment,{children:[s.jsxs("section",{children:[s.jsx("h2",{className:"text-base font-semibold text-slate-200 mb-3",children:"Add match"}),s.jsxs("form",{onSubmit:ee,className:"grid grid-cols-2 gap-4 max-w-2xl",children:[s.jsx("div",{className:"col-span-2",children:s.jsx(hs,{id:"matchDate",value:q,onChange:W,label:"Date",required:!0})}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"matchTeamAP1",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Team A  Player 1"}),s.jsxs("select",{id:"matchTeamAP1",value:re,onChange:A=>J(A.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[s.jsx("option",{value:"",children:" Select "}),ke("p1").map(A=>s.jsx("option",{value:A.id,children:A.name||A.id},A.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"matchTeamAP2",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Team A  Player 2"}),s.jsxs("select",{id:"matchTeamAP2",value:V,onChange:A=>ce(A.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[s.jsx("option",{value:"",children:" Select "}),ke("p2").map(A=>s.jsx("option",{value:A.id,children:A.name||A.id},A.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"matchTeamBP1",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Team B  Player 1"}),s.jsxs("select",{id:"matchTeamBP1",value:pe,onChange:A=>S(A.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[s.jsx("option",{value:"",children:" Select "}),ke("p3").map(A=>s.jsx("option",{value:A.id,children:A.name||A.id},A.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"matchTeamBP2",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Team B  Player 2"}),s.jsxs("select",{id:"matchTeamBP2",value:P,onChange:A=>I(A.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[s.jsx("option",{value:"",children:" Select "}),ke("p4").map(A=>s.jsx("option",{value:A.id,children:A.name||A.id},A.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"matchWinningTeam",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Winning team"}),s.jsxs("select",{id:"matchWinningTeam",value:B,onChange:A=>k(A.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[s.jsx("option",{value:"A",children:"Team A"}),s.jsx("option",{value:"B",children:"Team B"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"matchLoserGames",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Games won by losing team"}),s.jsxs("select",{id:"matchLoserGames",value:K,onChange:A=>ne(parseInt(A.target.value,10)),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[s.jsx("option",{value:0,children:"0"}),s.jsx("option",{value:1,children:"1"}),s.jsx("option",{value:2,children:"2"})]})]}),s.jsxs("div",{className:"col-span-2 flex gap-2",children:[s.jsx("button",{type:"submit",disabled:_,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:H?"Update match":"Add match"}),s.jsx("button",{type:"button",onClick:me,className:"rounded-md border border-slate-600 px-4 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"})]})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-base font-semibold text-slate-200 mb-3",children:"Search matches"}),s.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[s.jsx(hs,{id:"searchDate",value:y,onChange:C,label:"Date (exact)",className:"max-w-[12rem]"}),s.jsx(hs,{id:"searchDateFrom",value:h,onChange:p,label:"Date from",className:"max-w-[12rem]"}),s.jsx(hs,{id:"searchDateTo",value:g,onChange:v,label:"Date to",className:"max-w-[12rem]"}),s.jsxs("div",{className:"relative max-w-[14rem] min-w-[12rem]",ref:G,children:[s.jsx("label",{className:"block text-xs font-semibold text-slate-400 mb-1",children:"Filter by players"}),s.jsx("input",{type:"text",value:j,onChange:A=>E(A.target.value),onFocus:()=>R(!0),placeholder:"Search players...",autoComplete:"off",className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none"}),$&&s.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-slate-900 border border-slate-700 rounded-md max-h-48 overflow-y-auto z-10",children:We.length?We.map(A=>s.jsx("button",{type:"button",onClick:()=>oe(A.id),className:"w-full text-left px-3 py-2 text-sm text-slate-200 hover:bg-slate-800",children:A.name||A.id},A.id)):s.jsx("div",{className:"px-3 py-2 text-sm text-slate-500",children:"No matches"})}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:c.map(A=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-slate-700 text-slate-200 text-xs",children:[nt(A),s.jsx("button",{type:"button",onClick:()=>ge(A),className:"text-slate-400 hover:text-slate-100","aria-label":"Remove",children:""})]},A))}),c.length>0&&s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-slate-500",children:"Match:"}),s.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[s.jsx("button",{type:"button",onClick:()=>T("and"),className:`rounded px-2 py-0.5 text-xs font-medium ${N==="and"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"AND"}),s.jsx("button",{type:"button",onClick:()=>T("or"),className:`rounded px-2 py-0.5 text-xs font-medium ${N==="or"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"OR"})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:Et,disabled:U,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:U?"Searching":"Search"}),s.jsx("button",{type:"button",onClick:ln,className:"rounded-md border border-slate-600 px-4 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Clear"})]})]})]}),s.jsxs("section",{children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-3",children:[s.jsx("h2",{className:"text-base font-semibold text-slate-200",children:"Search results"}),b&&gt.length>0&&s.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[s.jsx("button",{type:"button",onClick:()=>Z("newest"),className:`rounded px-2 py-0.5 text-xs font-medium ${F==="newest"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"Newest first"}),s.jsx("button",{type:"button",onClick:()=>Z("oldest"),className:`rounded px-2 py-0.5 text-xs font-medium ${F==="oldest"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"Oldest first"})]})]}),b&&s.jsx("div",{className:"rounded-md border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm text-slate-400 mb-3",children:gt.length===0?"No results":`${gt.length} results`}),b?dr.length===0?s.jsx("ul",{className:"list-none p-0",children:s.jsx("li",{className:"py-2 text-slate-400",children:"No matches found."})}):s.jsxs(s.Fragment,{children:[s.jsx("ul",{className:"list-none p-0",children:dr.map(A=>{var ve,de;const he=A.id||((de=(ve=A.PK)==null?void 0:ve.replace)==null?void 0:de.call(ve,"SQUASH#MATCH#",""))||"",L=[nt(A.teamAPlayer1Id||""),nt(A.teamAPlayer2Id||"")].filter(Boolean).join(" & "),te=[nt(A.teamBPlayer1Id||""),nt(A.teamBPlayer2Id||"")].filter(Boolean).join(" & ");return s.jsxs("li",{className:"flex items-center gap-2 flex-wrap py-2 border-b border-slate-800 last:border-0",children:[s.jsx("span",{className:"font-semibold text-slate-200",children:A.date||""}),s.jsxs("span",{className:"text-slate-300",children:[L," vs ",te]}),s.jsx("span",{className:"italic text-slate-400",children:Yl(A)}),s.jsx("button",{type:"button",onClick:()=>Ie(A),className:"rounded-md border border-slate-600 px-2 py-1 text-xs text-slate-300 hover:bg-slate-800",children:"Edit"}),s.jsx("button",{type:"button",onClick:()=>Ue(he),className:"rounded-md border border-red-800/50 px-2 py-1 text-xs text-red-300 hover:bg-red-900/30",children:"Delete"})]},he)})}),ut>1&&s.jsxs("div",{className:"flex items-center gap-2 mt-4 flex-wrap",children:[s.jsx("button",{type:"button",disabled:m<=1,onClick:()=>x(A=>Math.max(1,A-1)),className:"rounded-md border border-slate-600 px-3 py-1 text-sm disabled:opacity-50 disabled:cursor-not-allowed text-slate-300 hover:bg-slate-800",children:"Prev"}),s.jsx("span",{className:"flex items-center gap-1",children:Bt.map((A,he)=>A===""?s.jsx("span",{className:"px-1 text-slate-500",children:""},`ellipsis-${he}`):A===m?s.jsx("span",{className:"min-w-[2rem] px-2 py-1 text-center font-semibold text-slate-200",children:A},A):s.jsx("button",{type:"button",onClick:()=>x(A),className:"min-w-[2rem] rounded px-2 py-1 text-sm text-slate-300 hover:bg-slate-800 border border-slate-600",children:A},A))}),s.jsx("button",{type:"button",disabled:m>=ut,onClick:()=>x(A=>Math.min(ut,A+1)),className:"rounded-md border border-slate-600 px-3 py-1 text-sm disabled:opacity-50 disabled:cursor-not-allowed text-slate-300 hover:bg-slate-800",children:"Next"})]})]}):s.jsx("div",{className:"flex items-center justify-center min-h-[280px]",children:s.jsx("p",{className:"text-2xl sm:text-3xl font-light text-slate-500/80 tracking-wide animate-pulse",children:"Enter search criteria and click Search to find matches."})})]})]}),r==="players"&&s.jsxs(s.Fragment,{children:[s.jsxs("section",{children:[s.jsx("h2",{className:"text-base font-semibold text-slate-200 mb-3",children:"Players"}),s.jsxs("form",{onSubmit:Ee,className:"space-y-4 max-w-md",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"playerName",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Name"}),s.jsx("input",{type:"text",id:"playerName",value:ye,onChange:A=>be(A.target.value),required:!0,placeholder:"Player name",className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"playerEmail",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Email (optional)"}),s.jsx("input",{type:"email",id:"playerEmail",value:Ke,onChange:A=>ot(A.target.value),placeholder:"player@example.com",className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"playerUserId",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Link to user (optional)"}),s.jsxs("select",{id:"playerUserId",value:le,onChange:A=>Ne(A.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[s.jsx("option",{value:"",children:" None "}),X.map(A=>s.jsx("option",{value:A.sub||"",children:A.email||A.username||A.sub},A.sub||A.username))]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"submit",disabled:Fe,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:ue?"Update player":"Add player"}),s.jsx("button",{type:"button",onClick:Ae,className:"rounded-md border border-slate-600 px-4 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"})]})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-base font-semibold text-slate-200 mb-3",children:"Player list"}),Q.length===0?s.jsx("p",{className:"text-sm text-slate-500",children:"No players yet. Add players above."}):s.jsx("ul",{className:"list-none p-0",children:Q.map(A=>s.jsxs("li",{className:"flex items-center gap-2 flex-wrap py-2 border-b border-slate-800 last:border-0",children:[s.jsx("span",{className:"font-semibold text-slate-200",children:A.name||A.id}),A.email&&s.jsxs("span",{className:"text-slate-500 text-sm",children:["(",A.email,")"]}),s.jsx("button",{type:"button",onClick:()=>Me(A),className:"rounded-md border border-slate-600 px-2 py-1 text-xs text-slate-300 hover:bg-slate-800",children:"Edit"}),s.jsx("button",{type:"button",onClick:()=>yn(A.id),className:"rounded-md border border-red-800/50 px-2 py-1 text-xs text-red-300 hover:bg-red-900/30",children:"Delete"})]},A.id))})]})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Admin"}),s.jsx("div",{className:"rounded-md bg-amber-900/30 border border-amber-800/50 px-4 py-3 text-sm text-amber-200",children:"Squash Admin requires manager (in Squash group) or SuperAdmin access."})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Admin"}),s.jsxs("div",{className:"rounded-md bg-red-900/30 border border-red-800/50 px-4 py-3 text-sm text-red-200",children:["Sign in required. ",s.jsx(ie,{to:"/auth",className:"underline hover:text-red-100",children:"Sign in"})]})]})};function Fo(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const _o="funkedupshift_financial_guest_symbols",_b=()=>{const{user:e}=Oe(),t=Ov(e),n=Ql(e),[r,a]=i.useState([]),[l,o]=i.useState({}),[c,d]=i.useState("yahoo"),[u,f]=i.useState([]),[m,x]=i.useState(!0),[b,w]=i.useState(!1),[y,C]=i.useState(""),[h,p]=i.useState(null),[g,v]=i.useState(null),j=i.useCallback(async()=>{const O=Fo();if(O){x(!0),p(null);try{const q=await at(`${O}/financial/config`),W=q.ok?await q.json():{symbols:[],source:"yahoo",availableSources:["yahoo"]},re=W.symbols??[];if(d(W.source??"yahoo"),f(W.availableSources??["yahoo"]),t&&(e!=null&&e.userId)){const J=await Y(`${O}/financial/watchlist`);if(J.ok){const ce=(await J.json()).symbols??[];a(ce.length>0?ce:re)}else a(re)}else{const J=(()=>{try{const V=sessionStorage.getItem(_o);return V?JSON.parse(V):[]}catch{return[]}})();a(J.length>0?J:re)}}catch(q){p((q==null?void 0:q.message)??"Failed to load watchlist")}finally{x(!1)}}},[t,e==null?void 0:e.userId]),E=i.useCallback(async()=>{const O=Fo();if(!O||r.length===0)return;const q={};for(const W of r)try{const re=await at(`${O}/financial/quote?symbol=${encodeURIComponent(W)}&source=${encodeURIComponent(c)}`);if(re.ok){const J=await re.json();q[W]=J}else q[W]=null}catch{q[W]=null}o(q)},[r,c]);i.useEffect(()=>{j()},[j]),i.useEffect(()=>{r.length>0?E():o({})},[r,c,E]);const $=()=>{const O=y.trim().toUpperCase();!O||r.includes(O)||(a(q=>{const W=[...q,O];if(!t)try{sessionStorage.setItem(_o,JSON.stringify(W))}catch{}return W}),C(""))},R=O=>{a(q=>{const W=q.filter(re=>re!==O);if(!t)try{sessionStorage.setItem(_o,JSON.stringify(W))}catch{}return W}),o(q=>{const W={...q};return delete W[O],W})},H=async()=>{const O=Fo();if(O){w(!0),p(null),v(null);try{const q=await Y(`${O}/financial/watchlist`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbols:r})});if(!q.ok){const W=await q.json().catch(()=>({}));throw new Error(W.error??"Failed to save")}v("Watchlist saved.")}catch(q){p((q==null?void 0:q.message)??"Failed to save")}finally{w(!1)}}};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Financial"}),n&&s.jsx("p",{className:"text-sm text-slate-400",children:s.jsx(ie,{to:"/admin/financial",className:"text-brand-orange hover:text-orange-400",children:"Financial Admin"})}),m?s.jsx("p",{className:"text-sm text-slate-500",children:"Loading"}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-wrap gap-2 items-end",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"newSymbol",className:"block text-xs text-slate-500 mb-1",children:"Add symbol"}),s.jsx("input",{id:"newSymbol",type:"text",value:y,onChange:O=>C(O.target.value.toUpperCase()),onKeyDown:O=>O.key==="Enter"&&(O.preventDefault(),$()),placeholder:"AAPL",className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 w-24"})]}),s.jsx("button",{type:"button",onClick:$,disabled:!y.trim(),className:"rounded-md bg-brand-orange px-3 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:"Add"}),u.length>1&&s.jsxs("div",{className:"ml-4",children:[s.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Data source"}),s.jsx("select",{value:c,onChange:O=>d(O.target.value),className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50",children:u.map(O=>s.jsx("option",{value:O,children:O==="yahoo"?"Yahoo Finance":"Alpha Vantage"},O))})]})]}),r.length>0&&s.jsx("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-800",children:[s.jsx("thead",{className:"bg-slate-900/80",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Symbol"}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase",children:"Price"}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase",children:"Change"}),s.jsx("th",{className:"px-4 py-3 w-10"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-800",children:r.map(O=>{const q=l[O];return s.jsxs("tr",{className:"hover:bg-slate-800/50",children:[s.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-200",children:O}),s.jsx("td",{className:"px-4 py-3 text-sm text-right text-slate-300",children:q?`$${q.price.toFixed(2)}`:""}),s.jsx("td",{className:"px-4 py-3 text-sm text-right",children:q?s.jsxs("span",{className:q.change>=0?"text-emerald-400":"text-red-400",children:[q.change>=0?"+":"",q.change.toFixed(2)," (",q.changePercent>=0?"+":"",q.changePercent.toFixed(2),"%)"]}):s.jsx("span",{className:"text-slate-500",children:""})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("button",{type:"button",onClick:()=>R(O),className:"text-slate-500 hover:text-red-400","aria-label":`Remove ${O}`,children:""})})]},O)})})]})}),t&&r.length>0&&s.jsx("button",{type:"button",onClick:H,disabled:b,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:b?"Saving":"Save watchlist"}),!t&&s.jsx("p",{className:"text-sm text-slate-500",children:"Sign in to save your watchlist. Guest symbols are temporary and expire when you close the browser."}),r.length===0&&s.jsx("p",{className:"text-sm text-slate-500",children:"Add symbols above to build your watchlist. Default symbols from admin may appear when you first load."})]}),g&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:g}),h&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:h})]})};function Fu(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Bb=()=>{const{user:e}=Oe(),[t,n]=Yt(),r=t.get("tab"),a=r==="members"?"members":r==="symbols"?"symbols":"overview",[l,o]=i.useState(a),[c,d]=i.useState([]),[u,f]=i.useState("yahoo"),[m,x]=i.useState(!1),[b,w]=i.useState(!1),[y,C]=i.useState(null),[h,p]=i.useState(null),[g,v]=i.useState(""),[j]=i.useState(["yahoo","alpha_vantage"]);i.useEffect(()=>{o(r==="members"?"members":r==="symbols"?"symbols":"overview")},[r]);const E=W=>{o(W),n(W==="overview"?{}:{tab:W},{replace:!0})},$=i.useCallback(async()=>{const W=Fu();if(W){x(!0),C(null);try{const re=await Y(`${W}/admin/financial/default-symbols`);if(!re.ok)throw new Error("Failed to load");const J=await re.json();d(J.symbols??[]),f(J.source??"yahoo")}catch(re){C((re==null?void 0:re.message)??"Failed to load")}finally{x(!1)}}},[]);i.useEffect(()=>{l==="symbols"&&$()},[l,$]);const R=()=>{const W=g.trim().toUpperCase();!W||c.includes(W)||(d(re=>[...re,W]),v(""))},H=W=>{d(re=>re.filter(J=>J!==W))},O=async()=>{const W=Fu();if(W){w(!0),C(null),p(null);try{const re=await Y(`${W}/admin/financial/default-symbols`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbols:c,source:u})});if(!re.ok){const J=await re.json().catch(()=>({}));throw new Error(J.error??"Failed to save")}p("Default symbols saved.")}catch(re){C((re==null?void 0:re.message)??"Failed to save")}finally{w(!1)}}};return Ql(e)?s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ie,{to:"/financial",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Financial"]}),s.jsxs("header",{className:"space-y-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Financial Admin"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Manage Financial section settings, members, and data sources."})]}),s.jsxs("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:[s.jsx("button",{type:"button",onClick:()=>E("overview"),className:`px-4 py-2 rounded-md text-sm font-medium ${l==="overview"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Overview"}),s.jsx("button",{type:"button",onClick:()=>E("symbols"),className:`px-4 py-2 rounded-md text-sm font-medium ${l==="symbols"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Tracked Symbols"}),s.jsx("button",{type:"button",onClick:()=>E("members"),className:`px-4 py-2 rounded-md text-sm font-medium ${l==="members"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Members"})]}),l==="overview"&&s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-6 text-sm text-slate-400",children:[s.jsx("p",{className:"mb-2",children:"Admin configuration:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 text-slate-500",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Tracked symbols"}),"  Default symbols for new users' watchlists"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Data source"}),"  Yahoo Finance (no key) or Alpha Vantage (API key in Terraform)"]})]})]}),l==="symbols"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-wrap gap-2 items-end",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"newSymbol",className:"block text-xs text-slate-500 mb-1",children:"Add symbol"}),s.jsx("input",{id:"newSymbol",type:"text",value:g,onChange:W=>v(W.target.value.toUpperCase()),onKeyDown:W=>W.key==="Enter"&&(W.preventDefault(),R()),placeholder:"AAPL",className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 w-24"})]}),s.jsx("button",{type:"button",onClick:R,disabled:!g.trim(),className:"rounded-md bg-brand-orange px-3 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:"Add"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Default data source"}),s.jsx("select",{value:u,onChange:W=>f(W.target.value),className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50",children:j.map(W=>s.jsx("option",{value:W,children:W==="yahoo"?"Yahoo Finance":"Alpha Vantage"},W))})]}),c.length>0&&s.jsx("ul",{className:"flex flex-wrap gap-2",children:c.map(W=>s.jsxs("li",{className:"inline-flex items-center gap-1 rounded-md bg-slate-800 px-2 py-1 text-sm text-slate-200",children:[W,s.jsx("button",{type:"button",onClick:()=>H(W),className:"text-slate-500 hover:text-red-400","aria-label":`Remove ${W}`,children:""})]},W))}),s.jsx("button",{type:"button",onClick:O,disabled:b||m,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:b?"Saving":"Save defaults"}),h&&s.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:h}),y&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:y})]}),l==="members"&&s.jsx("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-6 text-sm text-slate-400",children:s.jsx("p",{className:"mb-2",children:"Financial access is RBAC-based: guests view default symbols (session-only custom symbols); logged-in users can save their watchlist. No custom group required."})})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Financial Admin"}),s.jsx("p",{className:"text-sm text-slate-400",children:"SuperAdmin access is required."})]})};function zb(e){return typeof window>"u"?e:`${window.location.origin}${e.startsWith("/")?e:`/${e}`}`}const Gb=({memeId:e,title:t="",trigger:n,className:r=""})=>{const[a,l]=i.useState(!1),[o,c]=i.useState(!1),d=i.useRef(null),u=zb(`/memes/${encodeURIComponent(e)}`),f=encodeURIComponent(u),m=encodeURIComponent(t||"Meme"),x=async()=>{try{await navigator.clipboard.writeText(u),c(!0),setTimeout(()=>c(!1),2e3)}catch{}};return i.useEffect(()=>{function b(w){d.current&&!d.current.contains(w.target)&&l(!1)}if(a)return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[a]),s.jsxs("div",{className:`relative inline-block ${r}`,ref:d,children:[s.jsx("button",{type:"button",onClick:()=>l(b=>!b),className:"inline-flex items-center gap-1 text-[11px] text-slate-400 hover:text-slate-200",children:n}),a&&s.jsxs("div",{className:"absolute left-0 top-full z-20 mt-1 min-w-[180px] rounded-lg border border-slate-700 bg-slate-900 p-2 shadow-xl",children:[s.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 mb-2 text-xs font-medium text-slate-500 uppercase",children:[s.jsx(Qc,{className:"h-3.5 w-3.5"}),"Share"]}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsxs("button",{type:"button",onClick:x,className:"flex items-center gap-2 rounded px-2 py-1.5 text-left text-sm text-slate-200 hover:bg-slate-800",children:[s.jsx(Jc,{className:"h-4 w-4 text-slate-500"}),"Copy link",o&&s.jsx("span",{className:"text-emerald-400 text-xs",children:""})]}),s.jsx("a",{href:"https://www.instagram.com/",target:"_blank",rel:"noopener noreferrer",title:"Open Instagram",className:"flex items-center gap-2 rounded px-2 py-1.5 text-left text-sm text-slate-200 hover:bg-slate-800",onClick:()=>l(!1),children:"Instagram"}),s.jsx("a",{href:`https://www.facebook.com/sharer/sharer.php?u=${f}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 rounded px-2 py-1.5 text-left text-sm text-slate-200 hover:bg-slate-800",onClick:()=>l(!1),children:"Facebook"}),s.jsx("a",{href:`https://bsky.app/intent/compose?text=${f}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 rounded px-2 py-1.5 text-left text-sm text-slate-200 hover:bg-slate-800",onClick:()=>l(!1),children:"Bluesky"}),s.jsx("a",{href:`https://www.reddit.com/submit?url=${f}&title=${m}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 rounded px-2 py-1.5 text-left text-sm text-slate-200 hover:bg-slate-800",onClick:()=>l(!1),children:"Reddit"})]})]})]})};function Bo(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const _u="memes_my_cache_invalidate",Wb=()=>{const{user:e}=Oe(),[t,n]=Yt(),r=(t.get("tab")||"all")==="mine"?"mine":"all",[a,l]=i.useState([]),[o,c]=i.useState(()=>t.get("q")??""),[d,u]=i.useState(()=>{const k=t.get("tagIds");return k?k.split(",").filter(Boolean):[]}),[f,m]=i.useState(()=>t.get("tagMode")==="and"?"and":"or"),[x,b]=i.useState(!1),[w,y]=i.useState(""),[C,h]=i.useState("newest"),[p,g]=i.useState(!1),[v,j]=i.useState(null),E=i.useRef(null),[$,R]=i.useState([]),H=i.useRef(null),[O,q]=i.useState(!1),W=Mp(e),re=nr(e),J=ed(e),V=e&&nr(e),ce=k=>J||re&&k.userId===(e==null?void 0:e.userId),pe=o.trim().length>0||d.length>0;i.useEffect(()=>{try{const k=sessionStorage.getItem(_u);if(!k)return;sessionStorage.removeItem(_u);const K=JSON.parse(k);if(K.tagOnly&&K.memeId&&K.tags){const ne=(H.current??[]).map(_=>_.PK===K.memeId?{..._,tags:K.tags}:_);if(H.current=ne,r==="mine"){let _=ne;d.length>0&&(_=f==="and"?ne.filter(z=>d.every(U=>(z.tags??[]).includes(U))):ne.filter(z=>d.some(U=>(z.tags??[]).includes(U)))),l(_)}}else q(!0)}catch{}},[]),i.useEffect(()=>{const k=Bo();if(!k)return;let K=!1;return at(`${k}/memes/tags`).then(ne=>ne.ok?ne.json():Promise.reject(new Error("Failed to load tags"))).then(ne=>{K||R((ne.tags??[]).sort((_,z)=>_.localeCompare(z)))}).catch(()=>{}),()=>{K=!0}},[]),i.useEffect(()=>{const k=new URLSearchParams;r==="mine"&&k.set("tab","mine"),pe&&(o.trim()&&k.set("q",o.trim()),d.length&&(k.set("tagIds",d.join(",")),k.set("tagMode",f))),n(k,{replace:!0})},[r,pe,o,d,f,n]),i.useEffect(()=>{const k=Bo();if(!k){j("API URL not set.");return}let K=!1;if(r==="mine"&&V){const _=H.current,z=d.length>0;if(_&&!O&&!o.trim()){q(!1);let U=_;z&&(f==="and"?U=_.filter(M=>d.every(F=>(M.tags??[]).includes(F))):U=_.filter(M=>d.some(F=>(M.tags??[]).includes(F)))),l(U),g(!1);return}}async function ne(){g(!0),j(null);const _=r==="mine"&&V;try{const z=new URLSearchParams;z.set("limit",_?"100":"20"),_&&z.set("mine","1"),o.trim()&&z.set("q",o.trim()),d.length>0&&!_&&(z.set("tagIds",d.join(",")),z.set("tagMode",f));const M=await at(`${k}${e?"/memes":"/memes/cache"}?${z.toString()}`);if(!M.ok){const N=await M.text();throw new Error(`HTTP ${M.status}: ${N}`)}const F=await M.json();if(K)return;const Z=F.memes??[];if(_)if(H.current=Z,q(!1),d.length>0){const N=f==="and"?Z.filter(T=>d.every(G=>(T.tags??[]).includes(G))):Z.filter(T=>d.some(G=>(T.tags??[]).includes(G)));l(N)}else l(Z);else l(Z)}catch(z){K||j((z==null?void 0:z.message)??"Failed to load memes.")}finally{K||g(!1)}}return ne(),()=>{K=!0}},[r,o,d,f,O,V,e]),i.useEffect(()=>{function k(K){E.current&&!E.current.contains(K.target)&&b(!1)}if(x)return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[x]);const S=i.useMemo(()=>$.filter(k=>!d.includes(k)&&(!w.trim()||k.toLowerCase().includes(w.toLowerCase()))),[$,d,w]),P=i.useMemo(()=>{const k=[...a];return k.sort((K,ne)=>{const _=(K.title||K.PK||"").toLowerCase(),z=(ne.title||ne.PK||"").toLowerCase(),U=typeof K.averageRating=="number"?K.averageRating:0,M=typeof ne.averageRating=="number"?ne.averageRating:0,F=K.createdAt||"",Z=ne.createdAt||"";if(C==="newest"){const N=Z.localeCompare(F);return N!==0?N:_.localeCompare(z)}if(C==="oldest"){const N=F.localeCompare(Z);return N!==0?N:_.localeCompare(z)}return C==="avgDesc"?M!==U?M-U:_.localeCompare(z):C==="avgAsc"?U!==M?U-M:_.localeCompare(z):C==="alphaAsc"?_.localeCompare(z):C==="alphaDesc"?z.localeCompare(_):0}),k},[a,C]),I=async(k,K)=>{const ne=Bo();if(ne)try{await at(`${ne}/memes/stars`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({memeId:k,rating:K})}),l(_=>_.map(z=>z.PK===k?{...z,averageRating:K}:z))}catch{}};if(e&&!sa(e))return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Memes"}),s.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:"You do not have access to Memes. Join the Memes custom group or contact an admin."})]});const B=k=>{const K=new URLSearchParams(t);k==="mine"?K.set("tab","mine"):K.delete("tab"),n(K,{replace:!0})};return i.useEffect(()=>{r==="mine"&&!V&&n(k=>{const K=new URLSearchParams(k);return K.delete("tab"),K},{replace:!0})},[r,V,n]),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("header",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Memes"}),V&&s.jsxs("div",{className:"flex rounded-lg border border-slate-700 bg-slate-900/60 p-0.5",children:[s.jsx("button",{type:"button",onClick:()=>B("all"),className:`rounded-md px-3 py-1 text-sm font-medium transition-colors ${r==="all"?"bg-slate-700 text-slate-50":"text-slate-400 hover:text-slate-200"}`,children:"All"}),s.jsx("button",{type:"button",onClick:()=>B("mine"),className:`rounded-md px-3 py-1 text-sm font-medium transition-colors ${r==="mine"?"bg-slate-700 text-slate-50":"text-slate-400 hover:text-slate-200"}`,children:"My Memes"})]})]}),s.jsx("p",{className:"text-sm text-slate-400",children:r==="mine"?"Your memes, newest first. Filter by tags below.":e?"Browse and rate memes. Latest 20 shown by default.":"The latest user created memes. Sign in to rate or create."})]}),e&&s.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-4","aria-label":"Search and filter",children:[s.jsxs("form",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",onSubmit:k=>{k.preventDefault(),c(o.trim())},children:[s.jsx("input",{type:"text",value:o,onChange:k=>c(k.target.value),placeholder:"Search memes (title, description)",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),s.jsx("button",{type:"submit",className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500",children:"Search"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-4 sm:gap-6",children:[s.jsxs("div",{ref:E,className:"relative flex-shrink-0 min-w-0 max-w-sm",children:[s.jsx("label",{htmlFor:"meme-tag-filter",className:"block text-xs font-medium text-slate-400 mb-1",children:"Tags (filter by)"}),s.jsx("input",{id:"meme-tag-filter",type:"text",value:w,onChange:k=>y(k.target.value),onFocus:()=>b(!0),placeholder:"Search and select tags",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",autoComplete:"off"}),x&&s.jsx("div",{className:"absolute left-0 top-full z-10 mt-1 w-full max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",role:"listbox",children:S.length>0?S.map(k=>s.jsx("button",{type:"button",role:"option",onClick:()=>{u(K=>K.includes(k)?K:[...K,k]),y("")},className:"block w-full text-left px-3 py-2 text-sm text-slate-200 hover:bg-slate-800",children:k},k)):s.jsx("div",{className:"px-3 py-2 text-xs text-slate-500",children:"No matching tags"})}),d.length>0&&s.jsxs("div",{className:"mt-2 flex flex-wrap gap-1",children:[d.map(k=>s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-300",children:[k,s.jsx("button",{type:"button",onClick:()=>u(K=>K.filter(ne=>ne!==k)),className:"hover:text-slate-100","aria-label":`Remove ${k}`,children:""})]},k)),s.jsxs("select",{value:f,onChange:k=>m(k.target.value),className:"rounded border border-slate-700 bg-slate-950 px-2 py-0.5 text-[11px] text-slate-400",children:[s.jsx("option",{value:"or",children:"OR"}),s.jsx("option",{value:"and",children:"AND"})]})]})]}),s.jsxs("div",{className:"flex items-end gap-2",children:[s.jsx("label",{className:"text-xs font-medium text-slate-400",children:"Sort"}),s.jsxs("select",{value:C,onChange:k=>h(k.target.value),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",children:[s.jsx("option",{value:"newest",children:"Newest first"}),s.jsx("option",{value:"oldest",children:"Oldest first"}),s.jsx("option",{value:"avgDesc",children:"Avg stars (high first)"}),s.jsx("option",{value:"avgAsc",children:"Avg stars (low first)"}),s.jsx("option",{value:"alphaAsc",children:"Title AZ"}),s.jsx("option",{value:"alphaDesc",children:"Title ZA"})]}),s.jsx("span",{className:"text-slate-500",children:P.length===0?"No memes":`${P.length} memes`})]})]})]}),v&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:v}),p?s.jsx("div",{className:"text-sm text-slate-400",children:"Loading memes"}):s.jsxs(s.Fragment,{children:[s.jsx("ul",{className:"space-y-3 mt-2",children:P.map(k=>{const K=k.thumbnailUrl||k.mediaUrl,ne=k.title||k.PK||"Untitled",_=`/memes/${encodeURIComponent(k.PK)}`;return s.jsxs("li",{className:"flex gap-3 rounded-xl border border-slate-800 bg-slate-950/60 p-3",children:[s.jsx(ie,{to:_,className:"h-16 w-24 flex-shrink-0 overflow-hidden rounded-lg border border-slate-700 bg-slate-900 flex items-center justify-center text-xl hover:border-slate-600",children:K?s.jsx("img",{src:K,alt:"",className:"h-full w-full object-cover",onError:z=>{z.currentTarget.style.visibility="hidden"}}):s.jsx("span",{children:""})}),s.jsxs("div",{className:"min-w-0 flex-1 space-y-1",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("h2",{className:"truncate text-sm font-semibold text-slate-50",children:s.jsx(ie,{to:_,className:"hover:text-brand-orange",children:ne})}),k.isPrivate&&s.jsx("span",{className:"inline-flex rounded-full bg-slate-900 px-2 py-0.5 text-[10px] uppercase text-slate-500",children:"Private"}),typeof k.averageRating=="number"&&s.jsxs("span",{className:"inline-flex rounded-full bg-slate-900 px-2 py-0.5 text-[11px] text-amber-300",children:[k.averageRating.toFixed(1),""]})]}),k.description&&s.jsx("p",{className:"text-xs text-slate-300 line-clamp-3",children:k.description}),k.tags&&k.tags.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1 pt-1",children:k.tags.map(z=>s.jsx("span",{className:"rounded-full bg-slate-900 px-2 py-0.5 text-[11px] text-slate-300",children:z},z))}),s.jsxs("div",{className:"pt-1 flex items-center gap-3 flex-wrap",children:[s.jsx(Gb,{memeId:k.PK,title:ne,trigger:s.jsxs(s.Fragment,{children:[s.jsx(Qc,{className:"h-3.5 w-3.5"}),"Share"]})}),ce(k)&&s.jsxs(ie,{to:`/memes/${encodeURIComponent(k.PK)}/edit`,className:"inline-flex items-center gap-1 text-[11px] text-slate-400 hover:text-slate-200",children:[s.jsx(da,{className:"h-3.5 w-3.5"}),"Edit"]}),W&&s.jsxs("label",{className:"inline-flex items-center gap-1 text-[11px] text-slate-400",children:[s.jsx("span",{children:"Rate:"}),s.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-1 py-0.5 text-[11px] text-slate-50",onChange:z=>{const U=Number(z.target.value);U>=1&&U<=5&&I(k.PK,U)},defaultValue:"",children:[s.jsx("option",{value:"",children:"--"}),s.jsx("option",{value:"5",children:"5"}),s.jsx("option",{value:"4",children:"4"}),s.jsx("option",{value:"3",children:"3"}),s.jsx("option",{value:"2",children:"2"}),s.jsx("option",{value:"1",children:"1"})]})]})]})]})]},k.PK)})}),P.length===0&&!p&&s.jsx("div",{className:"flex items-center justify-center min-h-[200px]",children:s.jsx("p",{className:"text-lg text-slate-500",children:r==="mine"?pe?"No memes match the selected tags.":"You haven't created any memes yet. Create one!":pe?"No memes found.":"No memes yet. Create one!"})})]})]})},Gp=({tags:e,onTagsChange:t,allTags:n,fetchTags:r,placeholder:a="Type to suggest or create tag, Tab to autocomplete",className:l=""})=>{const[o,c]=i.useState(""),[d,u]=i.useState(!1),[f,m]=i.useState(0),[x,b]=i.useState(null),w=i.useRef(null),y=i.useRef(null),C=i.useRef(null);i.useEffect(()=>{function j(E){C.current&&!C.current.contains(E.target)&&u(!1)}return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),i.useEffect(()=>{if(!r){b(null);return}const j=o.trim();if(j.length===0){b(null);return}w.current&&w.current.abort();const E=new AbortController;w.current=E;const $=setTimeout(()=>{r(j).then(R=>{E.signal.aborted||b(R)}).catch(()=>{E.signal.aborted||b(null)})},80);return()=>{clearTimeout($),E.abort()}},[o,r]);const h=i.useMemo(()=>{const j=o.trim().toLowerCase();return r&&x!==null?x.filter(E=>!e.includes(E)):j?n.filter(E=>!e.includes(E)&&E.toLowerCase().includes(j)):n.filter(E=>!e.includes(E))},[n,e,o,r,x]),p=j=>{const E=j.trim();E&&!e.includes(E)&&t([...e,E]),c(""),m(0)},g=j=>{t(e.filter(E=>E!==j))},v=j=>{if(j.key==="Tab"||j.key==="Enter"){if(j.preventDefault(),h.length>0)p(h[f]??h[0]);else{const E=o.trim();E&&p(E)}return}if(j.key==="ArrowDown"){j.preventDefault(),m(E=>(E+1)%Math.max(1,h.length));return}if(j.key==="ArrowUp"){j.preventDefault(),m(E=>E<=0?Math.max(0,h.length-1):E-1);return}j.key==="Escape"&&(u(!1),m(0))};return s.jsxs("div",{ref:C,className:`relative ${l}`,children:[s.jsx("input",{ref:y,type:"text",value:o,onChange:j=>{c(j.target.value),u(!0),m(0)},onFocus:()=>u(!0),onKeyDown:v,placeholder:a,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",autoComplete:"off"}),d&&(h.length>0||o.trim())&&s.jsx("div",{className:"absolute left-0 top-full z-10 mt-1 w-full max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",role:"listbox",children:h.length>0?h.map((j,E)=>s.jsx("button",{type:"button",role:"option","aria-selected":E===f,onClick:()=>p(j),onMouseEnter:()=>m(E),className:`block w-full text-left px-3 py-2 text-sm text-slate-200 hover:bg-slate-800 ${E===f?"bg-slate-800":""}`,children:j},j)):s.jsxs("button",{type:"button",onClick:()=>o.trim()&&p(o.trim()),className:"block w-full text-left px-3 py-2 text-sm text-slate-200 hover:bg-slate-800",children:['Create "',o.trim(),'"']})}),e.length>0&&s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:e.map(j=>s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-300",children:[j,s.jsx("button",{type:"button",onClick:()=>g(j),className:"hover:text-slate-100","aria-label":`Remove ${j}`,children:""})]},j))})]})},Bu=["Impact","Arial Black","Comic Sans MS","Georgia","Verdana","Times New Roman","Courier New"],zo=[{id:"top-left",x:.05,y:.05,align:"left"},{id:"top-center",x:.5,y:.05,align:"center"},{id:"top-right",x:.95,y:.05,align:"right"},{id:"center",x:.5,y:.5,align:"center"},{id:"bottom-left",x:.05,y:.95,align:"left"},{id:"bottom-center",x:.5,y:.95,align:"center"},{id:"bottom-right",x:.95,y:.95,align:"right"}],Ua=500,Hb=2048,Kb=10*1024*1024;function jr(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Vb=()=>{const{user:e}=Oe(),t=_t(),n=i.useRef(null),r=i.useRef([]),[a,l]=i.useState(null),[o,c]=i.useState(null),[d,u]=i.useState(""),[f,m]=i.useState([]),[x,b]=i.useState(null),[w,y]=i.useState(""),[C,h]=i.useState(""),[p,g]=i.useState(!1),[v,j]=i.useState("resize"),[E,$]=i.useState(!1),[R,H]=i.useState(null),[O,q]=i.useState(!1),[W,re]=i.useState([]),[J,V]=i.useState([]),ce=_=>{const z=r.current;if(z.some(M=>M.zoneId===_))return;const U=[...z,{zoneId:_,text:"",font:Bu[0],color:"#ffffff",size:32}];r.current=U,m(U),b(_)},pe=_=>{const U=r.current.filter(M=>M.zoneId!==_);r.current=U,m(U),x===_&&b(null)},S=(_,z)=>{const M=r.current.map(F=>F.zoneId===_?{...F,...z}:F);r.current=M,m(M)},P=_=>{if(_.size>Kb){H("File too large (max 10MB)");return}if(!["image/jpeg","image/png","image/gif","image/webp","image/bmp"].includes(_.type)){H("Invalid image type");return}H(null);const U=new FileReader;U.onload=()=>l(U.result),U.readAsDataURL(_),c(_),u("")},I=async()=>{const _=d.trim();if(_){H(null);try{const U=await(await Y(`${jr()}/memes/import-from-url`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:_})})).json();if(!U.presignedUrl){H(U.error||"Failed to load image from URL");return}l(U.presignedUrl),c(null)}catch(z){H((z==null?void 0:z.message)??"Failed to load image from URL")}}},B=async()=>{const _=jr();if(_){q(!0),H(null);try{const U=await(await Y(`${_}/memes/generate-title`,{method:"POST"})).json();U.title&&y(U.title)}catch{y(`Meme ${Date.now().toString(36)}`)}finally{q(!1)}}},k=i.useCallback(()=>{const _=n.current;if(!_||!a)return Promise.resolve();const z=_.getContext("2d");return z?new Promise((U,M)=>{const F=new Image;F.crossOrigin="anonymous",F.onload=()=>{const Z=_.width,N=_.height;z.clearRect(0,0,Z,N);let T=0,G=0,Q=Z,D=N;if(v==="resize")z.drawImage(F,0,0,Z,N);else{const ae=Math.min(Z/F.width,N/F.height);Q=F.width*ae,D=F.height*ae,T=(Z-Q)/2,G=(N-D)/2,z.drawImage(F,T,G,Q,D)}const X=v==="original"?Math.min(Q,D)/Ua:1;r.current.forEach(ae=>{const ue=zo.find(be=>be.id===ae.zoneId);if(!ue||!ae.text)return;z.font=`${Math.round(ae.size*X)}px ${ae.font}`,z.fillStyle=ae.color,z.textAlign=ue.align,z.textBaseline=ue.y<.5?"top":"bottom";const xe=T+ue.x*Q,ye=G+ue.y*D;z.fillText(ae.text,xe,ye)}),U()},F.onerror=()=>{H("Failed to load image"),M(new Error("Failed to load image"))},F.src=a}):Promise.resolve()},[a,f,v]);i.useEffect(()=>{k().catch(()=>{})},[k]),i.useEffect(()=>{const _=jr();if(!_)return;let z=!1;return fetch(`${_}/memes/tags`).then(U=>U.ok?U.json():Promise.reject(new Error("Failed to load tags"))).then(U=>{z||V((U.tags??[]).sort((M,F)=>M.localeCompare(F)))}).catch(()=>{}),()=>{z=!0}},[]);const K=async()=>{if(!a){H("Add an image first");return}const _=jr();if(!_){H("API not configured");return}$(!0),H(null);try{let z;if(v==="original"){const T=await new Promise((xe,ye)=>{const be=new Image;be.crossOrigin="anonymous",be.onload=()=>xe(be),be.onerror=()=>ye(new Error("Failed to load image")),be.src=a}),G=Math.min(1,Hb/Math.max(T.width,T.height)),Q=Math.round(T.width*G),D=Math.round(T.height*G),X=document.createElement("canvas");X.width=Q,X.height=D;const ae=X.getContext("2d");ae.drawImage(T,0,0,Q,D);const ue=Math.min(Q,D)/Ua;r.current.forEach(xe=>{const ye=zo.find(be=>be.id===xe.zoneId);!ye||!xe.text||(ae.font=`${Math.round(xe.size*ue)}px ${xe.font}`,ae.fillStyle=xe.color,ae.textAlign=ye.align,ae.textBaseline=ye.y<.5?"top":"bottom",ae.fillText(xe.text,ye.x*Q,ye.y*D))}),z=await new Promise(xe=>{X.toBlob(ye=>xe(ye),"image/png",.95)})}else{const T=n.current;if(!T)throw new Error("Canvas not available");await k(),await new Promise(G=>requestAnimationFrame(G)),z=await new Promise(G=>{T.toBlob(Q=>G(Q),"image/png",.95)})}if(!z)throw new Error("Failed to export canvas");const M=await(await Y(`${_}/memes/upload`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contentType:"image/png"})})).json();if(!M.uploadUrl||!M.key)throw new Error(M.error||"Failed to get upload URL");const F=M.key;await fetch(M.uploadUrl,{method:"PUT",body:z,headers:{"Content-Type":"image/png"}});const Z=await Y(`${_}/memes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mediaKey:F,title:w.trim()||void 0,description:C.trim()||void 0,isPrivate:p,textBoxes:r.current,sizeMode:v,tags:W})});if(!Z.ok){const T=await Z.json();throw new Error(T.error||"Failed to save meme")}const N=await Z.json();try{sessionStorage.setItem("memes_my_cache_invalidate",JSON.stringify({tagOnly:!1}))}catch{}t(N.id?`/memes/${encodeURIComponent(N.id)}`:"/memes")}catch(z){H((z==null?void 0:z.message)??"Failed to save meme")}finally{$(!1)}},ne=nr(e)||!!(e!=null&&e.impersonated);return e?ne?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("header",{className:"flex items-center gap-4",children:[s.jsxs(ie,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Memes"]}),s.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Meme Generator"})]}),s.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1fr,320px]",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-2",children:"Image"}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("input",{type:"file",accept:"image/jpeg,image/png,image/gif,image/webp,image/bmp",onChange:_=>{var z;return((z=_.target.files)==null?void 0:z[0])&&P(_.target.files[0])},className:"text-sm text-slate-300 file:mr-2 file:rounded file:border-0 file:bg-brand-orange file:px-3 file:py-1 file:text-slate-950"}),s.jsx("span",{className:"text-xs text-slate-500",children:"or"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"url",value:d,onChange:_=>u(_.target.value),placeholder:"Paste image URL",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500"}),s.jsx("button",{type:"button",onClick:I,className:"rounded-md bg-slate-700 px-3 py-2 text-sm text-slate-200 hover:bg-slate-600",children:"Load"})]})]})]}),a&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{className:"text-xs font-medium text-slate-400",children:"Preview"}),s.jsxs("div",{className:"flex rounded-md border border-slate-700 overflow-hidden",children:[s.jsx("button",{type:"button",onClick:()=>j("resize"),className:`px-3 py-1 text-xs transition-colors ${v==="resize"?"bg-brand-orange text-slate-950 font-medium":"bg-slate-950 text-slate-400 hover:text-slate-200"}`,children:"Resize to fit"}),s.jsx("button",{type:"button",onClick:()=>j("original"),className:`px-3 py-1 text-xs transition-colors ${v==="original"?"bg-brand-orange text-slate-950 font-medium":"bg-slate-950 text-slate-400 hover:text-slate-200"}`,children:"Original"})]})]}),s.jsx("canvas",{ref:n,width:Ua,height:Ua,className:"w-full max-w-[500px] border border-slate-700 rounded-lg bg-slate-900"})]}),s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-2",children:"Text boxes (fixed zones)"}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:zo.map(_=>{const z=f.find(U=>U.zoneId===_.id);return s.jsxs("div",{className:"rounded border border-slate-700 p-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"text-xs text-slate-400",children:_.id}),z?s.jsx("button",{type:"button",onClick:()=>pe(_.id),className:"text-red-400 hover:text-red-300 text-xs",children:"Remove"}):s.jsx("button",{type:"button",onClick:()=>ce(_.id),className:"text-brand-orange hover:text-orange-400 text-xs",children:"Add"})]}),z&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("input",{type:"text",value:z.text,onChange:U=>S(_.id,{text:U.target.value}),placeholder:"Text",className:"w-full rounded border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-50"}),s.jsx("select",{value:z.font,onChange:U=>S(_.id,{font:U.target.value}),className:"w-full rounded border border-slate-700 bg-slate-950 px-2 py-1 text-[11px] text-slate-300",children:Bu.map(U=>s.jsx("option",{value:U,children:U},U))}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("input",{type:"color",value:z.color,onChange:U=>S(_.id,{color:U.target.value}),className:"h-6 w-8 cursor-pointer rounded border border-slate-700"}),s.jsx("input",{type:"number",value:z.size,onChange:U=>S(_.id,{size:Number(U.target.value)||32}),min:12,max:72,className:"w-14 rounded border border-slate-700 bg-slate-950 px-1 py-0.5 text-[11px] text-slate-50"})]})]})]},_.id)})})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Title (optional)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:w,onChange:_=>y(_.target.value),placeholder:"Generate or type",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500"}),s.jsx("button",{type:"button",onClick:B,disabled:O,className:"rounded-md bg-brand-orange px-3 py-2 text-sm font-medium text-slate-950 disabled:opacity-50",children:O?"":"Generate"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Description (optional)"}),s.jsx("textarea",{value:C,onChange:_=>h(_.target.value),placeholder:"Optional description",rows:3,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Tags"}),s.jsx(Gp,{tags:W,onTagsChange:re,allTags:J,fetchTags:async _=>{const z=jr();if(!z)return[];const U=await Y(`${z}/memes/tags?q=${encodeURIComponent(_)}`);return U.ok?(await U.json()).tags??[]:[]},placeholder:"Type to suggest or create tag, Tab to autocomplete"})]}),s.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:[s.jsx("input",{type:"checkbox",checked:p,onChange:_=>g(_.target.checked),className:"rounded border-slate-600"}),"Private (only you can see)"]})]}),R&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:R}),s.jsx("button",{type:"button",onClick:K,disabled:!a||E,className:"w-full rounded-md bg-brand-orange px-4 py-3 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50 disabled:cursor-not-allowed",children:E?"Saving":"Save meme"})]})]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-2xl font-semibold text-slate-50",children:"Meme Generator"}),s.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:"Meme creator access required (user + Memes group). Join the Memes custom group or contact an admin."})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-2xl font-semibold text-slate-50",children:"Meme Generator"}),s.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:"Sign in to create memes."})]})};function qb(e){return typeof window>"u"?e:`${window.location.origin}${e.startsWith("/")?e:`/${e}`}`}const Wp=({memeId:e,title:t="",className:n="",mediaUrl:r})=>{const[a,l]=i.useState(!1),[o,c]=i.useState(!1),d=qb(`/memes/${encodeURIComponent(e)}`),u=encodeURIComponent(d),f=encodeURIComponent(t||"Meme"),b=[{label:"Copy link",icon:a?"":null,onClick:async()=>{try{await navigator.clipboard.writeText(d),l(!0),setTimeout(()=>l(!1),2e3)}catch{}},href:null},...r?[{label:"Copy URL",icon:o?"":null,onClick:async()=>{if(r)try{await navigator.clipboard.writeText(r),c(!0),setTimeout(()=>c(!1),2e3)}catch{}},href:null}]:[],{label:"Instagram",href:"https://www.instagram.com/",title:"Open Instagram (copy link first to share)"},{label:"Facebook",href:`https://www.facebook.com/sharer/sharer.php?u=${u}`},{label:"Bluesky",href:`https://bsky.app/intent/compose?text=${u}`},{label:"Reddit",href:`https://www.reddit.com/submit?url=${u}&title=${f}`}];return s.jsxs("div",{className:`rounded-xl border border-slate-800 bg-slate-950/60 p-4 ${n}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Qc,{className:"h-4 w-4 text-slate-400"}),s.jsx("span",{className:"text-xs font-medium text-slate-400 uppercase",children:"Share"})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:b.map(w=>w.onClick?s.jsxs("button",{type:"button",onClick:w.onClick,className:"inline-flex items-center gap-1.5 rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 hover:bg-slate-800 hover:border-slate-600",children:[w.icon?s.jsx("span",{className:"text-emerald-400",children:w.icon}):s.jsx(Jc,{className:"h-4 w-4 text-slate-400"}),w.label]},w.label):s.jsx("a",{href:w.href,target:"_blank",rel:"noopener noreferrer",title:w.title,className:"inline-flex items-center gap-1.5 rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 hover:bg-slate-800 hover:border-slate-600",children:w.label},w.label))})]})};function Go(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Jb=()=>{const{id:e}=ir(),{user:t}=Oe(),n=_t(),[r,a]=i.useState(null),[l,o]=i.useState(!0),[c,d]=i.useState(null),[u,f]=i.useState(!1),[m,x]=i.useState(!1),b=!!r&&(ed(t)||nr(t)&&r.userId===(t==null?void 0:t.userId)),w=!!r&&lt(t,"superadmin"),y=e?decodeURIComponent(e):"";i.useEffect(()=>{const v=Go();if(!v||!y){d(y?"API URL not set.":"Missing meme id."),o(!1);return}let j=!1;async function E(){o(!0),d(null);try{const R=await at(`${v}${t?"/memes":"/memes/cache"}?id=${encodeURIComponent(y)}`);if(R.status===404){j||a(null);return}if(!R.ok){const O=await R.text();throw new Error(`HTTP ${R.status}: ${O}`)}const H=await R.json();if(j)return;a(H.meme??null)}catch($){j||d(($==null?void 0:$.message)??"Failed to load meme.")}finally{j||o(!1)}}return E(),()=>{j=!0}},[y,t]);const C=async v=>{const j=Go();if(!(!j||!r))try{const E=await at(`${j}/memes/stars`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({memeId:r.PK,rating:v})});if(E.ok){const $=await E.json();a(R=>R?{...R,averageRating:$.averageRating??v}:null)}}catch{}},h=async()=>{const v=Go();if(!(!v||!r)){f(!0),d(null);try{const j=await at(`${v}/memes`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r.PK})});if(!j.ok){const E=await j.json();throw new Error(E.error||"Failed to delete meme")}try{sessionStorage.setItem("memes_my_cache_invalidate",JSON.stringify({tagOnly:!1}))}catch{}n("/memes")}catch(j){d((j==null?void 0:j.message)??"Failed to delete meme"),x(!1)}finally{f(!1)}}};if(!t||sa(t),t&&!sa(t))return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ie,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Memes"]}),s.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:"Sign in and join Memes group to view."})]});if(l)return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(ie,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Memes"]}),s.jsx("div",{className:"text-sm text-slate-400",children:"Loading"})]});if(c||!r)return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(ie,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Memes"]}),s.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:c||"Meme not found."})]});const p=r.title||r.PK||"Untitled",g=r.mediaUrl||r.thumbnailUrl;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("header",{className:"flex items-center justify-between gap-4",children:[s.jsxs(ie,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Memes"]}),s.jsxs("div",{className:"flex items-center gap-3",children:[b&&s.jsxs(ie,{to:`/memes/${encodeURIComponent(r.PK)}/edit`,className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(da,{className:"h-4 w-4"}),"Edit"]}),w&&!m&&s.jsxs("button",{type:"button",onClick:()=>x(!0),className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-red-400",children:[s.jsx(Hg,{className:"h-4 w-4"}),"Delete"]}),w&&m&&s.jsxs("span",{className:"inline-flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"text-red-400",children:"Delete this meme?"}),s.jsx("button",{type:"button",onClick:h,disabled:u,className:"rounded-md bg-red-600 px-2.5 py-1 text-xs font-semibold text-white hover:bg-red-500 disabled:opacity-50",children:u?"Deleting":"Confirm"}),s.jsx("button",{type:"button",onClick:()=>x(!1),disabled:u,className:"text-xs text-slate-500 hover:text-slate-300",children:"Cancel"})]})]})]}),s.jsx("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 overflow-hidden min-h-[200px] flex items-center justify-center p-4",children:g?s.jsxs(s.Fragment,{children:[s.jsx("img",{src:g,alt:p,className:"w-full max-w-2xl mx-auto block object-contain max-h-[70vh]",onError:v=>{v.currentTarget.style.display="none";const j=v.currentTarget.nextElementSibling;j&&j.classList.remove("hidden")}}),s.jsx("div",{className:"hidden py-12 text-slate-500","aria-hidden":!0,children:"Image failed to load"})]}):s.jsx("div",{className:"py-12 text-slate-500",children:"No image"})}),s.jsx(Wp,{memeId:r.PK,title:p,mediaUrl:lt(t,"manager")?g:void 0}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-50",children:p}),r.isPrivate&&s.jsx("span",{className:"inline-flex rounded-full bg-slate-900 px-2 py-0.5 text-xs uppercase text-slate-500",children:"Private"}),r.description&&s.jsx("p",{className:"text-sm text-slate-300",children:r.description}),s.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[s.jsx("span",{className:"text-xs text-slate-500",children:"Tags:"}),r.tags&&r.tags.length>0?r.tags.map(v=>s.jsx("span",{className:"rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-300",children:v},v)):s.jsx("span",{className:"text-xs text-slate-500",children:""})]}),t&&Mp(t)&&s.jsx("div",{className:"pt-2",children:s.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-400",children:[s.jsx("span",{children:"Rate:"}),s.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-2 py-1 text-sm text-slate-50",onChange:v=>{const j=Number(v.target.value);j>=1&&j<=5&&C(j)},defaultValue:"",children:[s.jsx("option",{value:"",children:"--"}),s.jsx("option",{value:"5",children:"5"}),s.jsx("option",{value:"4",children:"4"}),s.jsx("option",{value:"3",children:"3"}),s.jsx("option",{value:"2",children:"2"}),s.jsx("option",{value:"1",children:"1"})]}),typeof r.averageRating=="number"&&s.jsxs("span",{className:"text-amber-300",children:[r.averageRating.toFixed(1),""]})]})})]})]})};function Wo(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Qb=()=>{const{id:e}=ir(),t=_t(),{user:n}=Oe(),[r,a]=i.useState(null),[l,o]=i.useState([]),[c,d]=i.useState(!1),[u,f]=i.useState(!0),[m,x]=i.useState(!1),[b,w]=i.useState(null),[y,C]=i.useState([]),h=e?decodeURIComponent(e):"",p=!!(n&&(nr(n)||ed(n)));i.useEffect(()=>{const $=Wo();if(!$||!h){w(h?"API URL not set.":"Missing meme id."),f(!1);return}let R=!1;async function H(){var O,q;f(!0),w(null);try{const[W,re]=await Promise.all([Y(`${$}/memes?id=${encodeURIComponent(h)}`),Y(`${$}/memes/tags`)]);if(W.status===404||!W.ok){R||a(null);return}const J=await W.json(),V=await re.json();if(R)return;a(J.meme??null),o(((O=J.meme)==null?void 0:O.tags)??[]),d(((q=J.meme)==null?void 0:q.isPrivate)??!1),C((V.tags??[]).sort((ce,pe)=>ce.localeCompare(pe)))}catch(W){R||w((W==null?void 0:W.message)??"Failed to load meme.")}finally{R||f(!1)}}return H(),()=>{R=!0}},[h]);const g=i.useRef(null);i.useEffect(()=>{r&&g.current===null&&(g.current=r.isPrivate??!1)},[r]);const v=async()=>{const $=Wo();if(!(!$||!r)){x(!0),w(null);try{const R=await Y(`${$}/memes`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r.PK,tags:l,isPrivate:c})});if(!R.ok){const O=await R.json();throw new Error(O.error||"Failed to save")}const H=g.current===(c??!1);try{sessionStorage.setItem("memes_my_cache_invalidate",JSON.stringify({memeId:r.PK,tagOnly:H,tags:l}))}catch{}t(`/memes/${encodeURIComponent(r.PK)}`)}catch(R){w((R==null?void 0:R.message)??"Failed to save")}finally{x(!1)}}};if(!n||!p)return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ie,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Memes"]}),s.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:"Sign in and join Memes group to edit."})]});if(u)return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(ie,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Memes"]}),s.jsx("div",{className:"text-sm text-slate-400",children:"Loading"})]});if(b||!r)return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(ie,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Memes"]}),s.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:b||"Meme not found."})]});const j=r.mediaUrl||r.thumbnailUrl,E=r.title||r.PK||"Untitled";return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("header",{className:"flex items-center gap-4",children:[s.jsxs(ie,{to:`/memes/${encodeURIComponent(r.PK)}`,className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Back to Meme"]}),s.jsx("h1",{className:"text-xl font-semibold text-slate-50",children:"Edit meme"})]}),s.jsx("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 overflow-hidden min-h-[200px] flex items-center justify-center p-4",children:j?s.jsxs(s.Fragment,{children:[s.jsx("img",{src:j,alt:E,className:"w-full max-w-2xl mx-auto block object-contain max-h-[70vh]",onError:$=>{$.currentTarget.style.display="none";const R=$.currentTarget.nextElementSibling;R&&R.classList.remove("hidden")}}),s.jsx("div",{className:"hidden py-12 text-slate-500","aria-hidden":!0,children:"Image failed to load"})]}):s.jsx("div",{className:"py-12 text-slate-500",children:"No image"})}),s.jsx(Wp,{memeId:r.PK,title:E}),s.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-4 max-w-xl",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Tags"}),s.jsx(Gp,{tags:l,onTagsChange:o,allTags:y,fetchTags:async $=>{const R=Wo();if(!R)return[];const H=await Y(`${R}/memes/tags?q=${encodeURIComponent($)}`);return H.ok?(await H.json()).tags??[]:[]},placeholder:"Type to suggest or create tag, Tab to autocomplete"})]}),s.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:[s.jsx("input",{type:"checkbox",checked:c,onChange:$=>d($.target.checked),className:"rounded border-slate-600"}),"Private (only you can see)"]}),b&&s.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:b}),s.jsx("button",{type:"button",onClick:v,disabled:m,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:m?"Saving":"Save"})]})]})},Hp="funkedupshift_sectionOpen";function Ma(){return{discover:!0,squash:!1,memes:!1,financial:!1,recommended:!0,admin:!1}}function Yb(){try{const e=sessionStorage.getItem(Hp);if(!e)return Ma();const t=JSON.parse(e);return typeof t!="object"||t===null?Ma():{...Ma(),...t}}catch{return Ma()}}function Zb(e){try{sessionStorage.setItem(Hp,JSON.stringify(e))}catch{}}const Xb=()=>{const{user:e,isLoading:t,signOut:n}=Oe(),{logo:r,siteName:a}=Fp(),l=_t();Re.useEffect(()=>{a&&(document.title=a)},[a]);const[o,c]=Re.useState(!1),[d,u]=Re.useState(Yb),f=v=>{u(j=>{const E={...j,[v]:!j[v]};return Zb(E),E})},m=()=>{n(),c(!1),l("/")},x=zv(e),b=x.discover??[],w=x.recommended??[],y=x.squash??[],C=x.memes??[],h=x.financial??[],p=Gv(e),g=({isActive:v})=>["flex items-center rounded-md px-3 py-2 text-sm font-medium",v?"bg-slate-800 text-white":"text-slate-300 hover:bg-slate-800/70 hover:text-white"].join(" ");return s.jsxs("div",{className:"min-h-screen bg-slate-950 text-slate-50 flex flex-col",children:[s.jsx(Kv,{}),s.jsx("header",{className:"border-b border-slate-800 bg-slate-950/80 backdrop-blur z-20 sticky top-0",children:s.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-3 flex items-center justify-between gap-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-md p-2 text-slate-200 hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-brand-orange lg:hidden",onClick:()=>c(!0),"aria-label":"Open main navigation",children:s.jsx(qc,{className:"h-6 w-6"})}),s.jsxs(ie,{to:"/",className:"flex items-center gap-2",children:[r?s.jsx("img",{src:r.url,alt:r.alt,className:"h-8 w-auto rounded-md border border-slate-700 object-contain"}):s.jsx("div",{className:"h-8 w-8 rounded-md border border-slate-700 bg-gradient-to-br from-brand-orange to-brand-navy"}),s.jsx("span",{className:"text-sm font-semibold tracking-[0.2em] uppercase text-slate-100",children:a})]})]}),s.jsx("div",{className:"flex items-center gap-3",children:e?s.jsxs(s.Fragment,{children:[s.jsx(qv,{}),s.jsxs("span",{className:"hidden sm:inline text-xs text-slate-300",children:[e.email," ",s.jsxs("span",{className:"text-slate-500",children:["(",e.role==="superadmin"?"SuperAdmin":e.role,")"]})]}),s.jsx("button",{type:"button",onClick:m,className:"rounded-full border border-slate-700 px-3 py-1 text-xs font-medium text-slate-200 hover:bg-slate-800",children:"Sign out"})]}):t?s.jsx("span",{className:"text-xs text-slate-400",children:"Loading..."}):s.jsx(ie,{to:"/auth",className:"rounded-full bg-brand-orange px-3 py-1 text-xs font-semibold text-slate-950 hover:bg-orange-500",children:"Sign in"})})]})}),s.jsxs("div",{className:"flex-1 flex",children:[s.jsx("aside",{className:"hidden lg:block w-64 border-r border-slate-800 bg-slate-950/80",children:s.jsxs("nav",{className:"h-full overflow-y-auto px-4 py-6 space-y-6 text-sm",children:[s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>f("discover"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Discover",d.discover??!0?s.jsx(Gt,{className:"h-4 w-4 shrink-0"}):s.jsx(Wt,{className:"h-4 w-4 shrink-0"})]}),(d.discover??!0)&&s.jsx("div",{className:"space-y-1",children:b.map(v=>s.jsx(zt,{to:v.path,className:g,children:v.label},v.path))})]}),y.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>f("squash"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Squash",d.squash??!1?s.jsx(Gt,{className:"h-4 w-4 shrink-0"}):s.jsx(Wt,{className:"h-4 w-4 shrink-0"})]}),(d.squash??!1)&&s.jsx("div",{className:"space-y-1",children:y.map(v=>s.jsx(zt,{to:v.path,className:g,children:v.label},v.path))})]}),C.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>f("memes"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Memes",d.memes??!1?s.jsx(Gt,{className:"h-4 w-4 shrink-0"}):s.jsx(Wt,{className:"h-4 w-4 shrink-0"})]}),(d.memes??!1)&&s.jsx("div",{className:"space-y-1",children:C.map(v=>s.jsx(zt,{to:v.path,className:g,children:v.label},v.path))})]}),w.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>f("recommended"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Recommended",d.recommended??!0?s.jsx(Gt,{className:"h-4 w-4 shrink-0"}):s.jsx(Wt,{className:"h-4 w-4 shrink-0"})]}),(d.recommended??!0)&&s.jsx("div",{className:"space-y-1",children:w.map(v=>s.jsx(zt,{to:v.path,className:g,children:v.label},v.path))})]}),h.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>f("financial"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Financial",d.financial??!1?s.jsx(Gt,{className:"h-4 w-4 shrink-0"}):s.jsx(Wt,{className:"h-4 w-4 shrink-0"})]}),(d.financial??!1)&&s.jsx("div",{className:"space-y-1",children:h.map(v=>s.jsx(zt,{to:v.path,className:g,children:v.label},v.path))})]}),p.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>f("admin"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Admin",d.admin??!1?s.jsx(Gt,{className:"h-4 w-4 shrink-0"}):s.jsx(Wt,{className:"h-4 w-4 shrink-0"})]}),(d.admin??!1)&&s.jsx("div",{className:"space-y-1",children:p.map(v=>s.jsx(zt,{to:v.path,className:g,children:v.label},v.path))})]})]})}),s.jsxs(pn,{open:o,onClose:c,className:"lg:hidden",children:[s.jsx("div",{className:"fixed inset-0 bg-black/40","aria-hidden":"true"}),s.jsxs(pn.Panel,{className:"fixed inset-y-0 left-0 w-72 bg-slate-950 border-r border-slate-800 p-4 flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx(pn.Title,{className:"text-sm font-semibold tracking-[0.15em] uppercase text-slate-100",children:a}),s.jsx("button",{type:"button",className:"rounded-md p-1 text-slate-200 hover:bg-slate-800",onClick:()=>c(!1),"aria-label":"Close main navigation",children:s.jsx(Gl,{className:"h-5 w-5"})})]}),s.jsxs("nav",{className:"flex-1 overflow-y-auto space-y-6 text-sm",children:[s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>f("discover"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Discover",d.discover??!0?s.jsx(Gt,{className:"h-4 w-4 shrink-0"}):s.jsx(Wt,{className:"h-4 w-4 shrink-0"})]}),(d.discover??!0)&&s.jsx("div",{className:"space-y-1",children:b.map(v=>s.jsx(zt,{to:v.path,className:g,onClick:()=>c(!1),children:v.label},v.path))})]}),w.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>f("recommended"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Recommended",d.recommended??!0?s.jsx(Gt,{className:"h-4 w-4 shrink-0"}):s.jsx(Wt,{className:"h-4 w-4 shrink-0"})]}),(d.recommended??!0)&&s.jsx("div",{className:"space-y-1",children:w.map(v=>s.jsx(zt,{to:v.path,className:g,onClick:()=>c(!1),children:v.label},v.path))})]}),C.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>f("memes"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Memes",d.memes??!1?s.jsx(Gt,{className:"h-4 w-4 shrink-0"}):s.jsx(Wt,{className:"h-4 w-4 shrink-0"})]}),(d.memes??!1)&&s.jsx("div",{className:"space-y-1",children:C.map(v=>s.jsx(zt,{to:v.path,className:g,onClick:()=>c(!1),children:v.label},v.path))})]}),y.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>f("squash"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Squash",d.squash??!1?s.jsx(Gt,{className:"h-4 w-4 shrink-0"}):s.jsx(Wt,{className:"h-4 w-4 shrink-0"})]}),(d.squash??!1)&&s.jsx("div",{className:"space-y-1",children:y.map(v=>s.jsx(zt,{to:v.path,className:g,onClick:()=>c(!1),children:v.label},v.path))})]}),h.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>f("financial"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Financial",d.financial??!1?s.jsx(Gt,{className:"h-4 w-4 shrink-0"}):s.jsx(Wt,{className:"h-4 w-4 shrink-0"})]}),(d.financial??!1)&&s.jsx("div",{className:"space-y-1",children:h.map(v=>s.jsx(zt,{to:v.path,className:g,onClick:()=>c(!1),children:v.label},v.path))})]}),p.length>0&&s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>f("admin"),className:"flex w-full items-center justify-between rounded-md px-3 py-2 text-xs font-semibold text-slate-500 uppercase mb-2 hover:bg-slate-800/70 hover:text-slate-300",children:["Admin",d.admin??!1?s.jsx(Gt,{className:"h-4 w-4 shrink-0"}):s.jsx(Wt,{className:"h-4 w-4 shrink-0"})]}),(d.admin??!1)&&s.jsx("div",{className:"space-y-1",children:p.map(v=>s.jsx(zt,{to:v.path,className:g,onClick:()=>c(!1),children:v.label},v.path))})]})]})]})]}),s.jsx("main",{className:"flex-1 min-w-0",children:s.jsx("div",{className:"mx-auto max-w-6xl px-4 py-6",children:s.jsxs(ig,{children:[s.jsx(De,{path:"/",element:s.jsx(Yv,{})}),s.jsx(De,{path:"/websites",element:s.jsx(Zv,{})}),s.jsx(De,{path:"/websites/:id",element:s.jsx(Xv,{})}),s.jsx(De,{path:"/media",element:s.jsx(eb,{})}),s.jsx(De,{path:"/media/:id",element:s.jsx(tb,{})}),s.jsx(De,{path:"/internet-dashboard",element:s.jsx(lb,{})}),s.jsx(De,{path:"/recommended/highlights",element:s.jsx(ib,{})}),s.jsx(De,{path:"/recommended/highest-rated",element:s.jsx(ub,{})}),s.jsx(De,{path:"/squash",element:s.jsx(Ob,{})}),s.jsx(De,{path:"/squash-admin",element:s.jsx(Fb,{})}),s.jsx(De,{path:"/memes",element:s.jsx(Wb,{})}),s.jsx(De,{path:"/memes/create",element:s.jsx(Vb,{})}),s.jsx(De,{path:"/memes/:id/edit",element:s.jsx(Qb,{})}),s.jsx(De,{path:"/memes/:id",element:s.jsx(Jb,{})}),s.jsx(De,{path:"/financial",element:s.jsx(_b,{})}),s.jsx(De,{path:"/admin/financial",element:s.jsx(Bb,{})}),s.jsx(De,{path:"/admin/branding",element:s.jsx(pb,{})}),s.jsx(De,{path:"/admin/internet-dashboard",element:s.jsx(hb,{})}),s.jsx(De,{path:"/admin/recommended",element:s.jsx(xb,{})}),s.jsx(De,{path:"/admin/membership",element:s.jsx(yb,{})}),s.jsx(De,{path:"/admin/users/edit",element:s.jsx(Tb,{})}),s.jsx(De,{path:"/admin/websites",element:s.jsx(wb,{})}),s.jsx(De,{path:"/admin/sites/edit/:id",element:s.jsx(kb,{})}),s.jsx(De,{path:"/admin/media",element:s.jsx(Nb,{})}),s.jsx(De,{path:"/admin/media/edit/:id",element:s.jsx(Cb,{})}),s.jsx(De,{path:"/admin/*",element:s.jsx("div",{children:"Admin area"})}),s.jsx(De,{path:"/profile",element:s.jsx(Mb,{})}),s.jsx(De,{path:"/auth",element:s.jsx(Rb,{})}),s.jsx(De,{path:"*",element:s.jsx("div",{children:"Not found"})})]})})})]}),s.jsx("footer",{className:"border-t border-slate-800 bg-slate-950",children:s.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-4 flex flex-col sm:flex-row items-center justify-between gap-3 text-xs text-slate-500",children:[s.jsxs("nav",{className:"flex flex-wrap gap-3 justify-center sm:justify-start",children:[s.jsx(ie,{to:"/",className:"hover:text-slate-300",children:"Home"}),s.jsx(ie,{to:"/websites",className:"hover:text-slate-300",children:"Websites"}),s.jsx(ie,{to:"/media",className:"hover:text-slate-300",children:"Media"}),s.jsx(ie,{to:"/internet-dashboard",className:"hover:text-slate-300",children:"Internet dashboard"}),s.jsx(ie,{to:"/recommended/highlights",className:"hover:text-slate-300",children:"Highlights"}),s.jsx(ie,{to:"/recommended/highest-rated",className:"hover:text-slate-300",children:"Highest rated"}),e&&s.jsx(ie,{to:"/profile",className:"hover:text-slate-300",children:"Profile"}),lt(e??null,"superadmin")&&s.jsx(ie,{to:"/admin/branding",className:"hover:text-slate-300",children:"Branding"}),ql(e)&&s.jsx(ie,{to:"/squash",className:"hover:text-slate-300",children:"Squash"}),Jl(e)&&s.jsx(ie,{to:"/squash-admin",className:"hover:text-slate-300",children:"Squash Admin"}),(!e||sa(e))&&s.jsx(ie,{to:"/memes",className:"hover:text-slate-300",children:"Memes"}),s.jsx(ie,{to:"/financial",className:"hover:text-slate-300",children:"Financial"}),Ql(e)&&s.jsx(ie,{to:"/admin/financial",className:"hover:text-slate-300",children:"Financial Admin"})]}),s.jsxs("div",{className:"text-slate-600",children:[s.jsx("span",{className:"font-mono text-[11px]",children:a.toLowerCase().replace(/\s+/g,"")})," ",s.jsx("span",{className:"text-slate-700",children:""})," ",s.jsx("span",{children:"All data public, admin-managed curation"})]})]})})]})},zu=document.getElementById("root");zu&&Ho.createRoot(zu).render(s.jsx(Re.StrictMode,{children:s.jsx(gg,{children:s.jsx(Iv,{children:s.jsx(Mv,{children:s.jsx(Hv,{children:s.jsx(Xb,{})})})})})}));

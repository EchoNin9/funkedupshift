function Wp(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const l=Object.getOwnPropertyDescriptor(s,a);l&&Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function Hp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Gu={exports:{}},wl={},Wu={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ta=Symbol.for("react.element"),Kp=Symbol.for("react.portal"),Vp=Symbol.for("react.fragment"),qp=Symbol.for("react.strict_mode"),Jp=Symbol.for("react.profiler"),Qp=Symbol.for("react.provider"),Yp=Symbol.for("react.context"),Zp=Symbol.for("react.forward_ref"),Xp=Symbol.for("react.suspense"),e0=Symbol.for("react.memo"),t0=Symbol.for("react.lazy"),td=Symbol.iterator;function n0(e){return e===null||typeof e!="object"?null:(e=td&&e[td]||e["@@iterator"],typeof e=="function"?e:null)}var Hu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ku=Object.assign,Vu={};function es(e,t,n){this.props=e,this.context=t,this.refs=Vu,this.updater=n||Hu}es.prototype.isReactComponent={};es.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};es.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function qu(){}qu.prototype=es.prototype;function Yi(e,t,n){this.props=e,this.context=t,this.refs=Vu,this.updater=n||Hu}var Zi=Yi.prototype=new qu;Zi.constructor=Yi;Ku(Zi,es.prototype);Zi.isPureReactComponent=!0;var nd=Array.isArray,Ju=Object.prototype.hasOwnProperty,Xi={current:null},Qu={key:!0,ref:!0,__self:!0,__source:!0};function Yu(e,t,n){var s,a={},l=null,o=null;if(t!=null)for(s in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(l=""+t.key),t)Ju.call(t,s)&&!Qu.hasOwnProperty(s)&&(a[s]=t[s]);var c=arguments.length-2;if(c===1)a.children=n;else if(1<c){for(var d=Array(c),u=0;u<c;u++)d[u]=arguments[u+2];a.children=d}if(e&&e.defaultProps)for(s in c=e.defaultProps,c)a[s]===void 0&&(a[s]=c[s]);return{$$typeof:ta,type:e,key:l,ref:o,props:a,_owner:Xi.current}}function r0(e,t){return{$$typeof:ta,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ec(e){return typeof e=="object"&&e!==null&&e.$$typeof===ta}function s0(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var rd=/\/+/g;function Jl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?s0(""+e.key):t.toString(36)}function Ia(e,t,n,s,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case ta:case Kp:o=!0}}if(o)return o=e,a=a(o),e=s===""?"."+Jl(o,0):s,nd(a)?(n="",e!=null&&(n=e.replace(rd,"$&/")+"/"),Ia(a,t,n,"",function(u){return u})):a!=null&&(ec(a)&&(a=r0(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(rd,"$&/")+"/")+e)),t.push(a)),1;if(o=0,s=s===""?".":s+":",nd(e))for(var c=0;c<e.length;c++){l=e[c];var d=s+Jl(l,c);o+=Ia(l,t,n,d,a)}else if(d=n0(e),typeof d=="function")for(e=d.call(e),c=0;!(l=e.next()).done;)l=l.value,d=s+Jl(l,c++),o+=Ia(l,t,n,d,a);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function da(e,t,n){if(e==null)return e;var s=[],a=0;return Ia(e,s,"","",function(l){return t.call(n,l,a++)}),s}function a0(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var kt={current:null},Ua={transition:null},l0={ReactCurrentDispatcher:kt,ReactCurrentBatchConfig:Ua,ReactCurrentOwner:Xi};function Zu(){throw Error("act(...) is not supported in production builds of React.")}Ce.Children={map:da,forEach:function(e,t,n){da(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return da(e,function(){t++}),t},toArray:function(e){return da(e,function(t){return t})||[]},only:function(e){if(!ec(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ce.Component=es;Ce.Fragment=Vp;Ce.Profiler=Jp;Ce.PureComponent=Yi;Ce.StrictMode=qp;Ce.Suspense=Xp;Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=l0;Ce.act=Zu;Ce.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=Ku({},e.props),a=e.key,l=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,o=Xi.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(d in t)Ju.call(t,d)&&!Qu.hasOwnProperty(d)&&(s[d]=t[d]===void 0&&c!==void 0?c[d]:t[d])}var d=arguments.length-2;if(d===1)s.children=n;else if(1<d){c=Array(d);for(var u=0;u<d;u++)c[u]=arguments[u+2];s.children=c}return{$$typeof:ta,type:e.type,key:a,ref:l,props:s,_owner:o}};Ce.createContext=function(e){return e={$$typeof:Yp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Qp,_context:e},e.Consumer=e};Ce.createElement=Yu;Ce.createFactory=function(e){var t=Yu.bind(null,e);return t.type=e,t};Ce.createRef=function(){return{current:null}};Ce.forwardRef=function(e){return{$$typeof:Zp,render:e}};Ce.isValidElement=ec;Ce.lazy=function(e){return{$$typeof:t0,_payload:{_status:-1,_result:e},_init:a0}};Ce.memo=function(e,t){return{$$typeof:e0,type:e,compare:t===void 0?null:t}};Ce.startTransition=function(e){var t=Ua.transition;Ua.transition={};try{e()}finally{Ua.transition=t}};Ce.unstable_act=Zu;Ce.useCallback=function(e,t){return kt.current.useCallback(e,t)};Ce.useContext=function(e){return kt.current.useContext(e)};Ce.useDebugValue=function(){};Ce.useDeferredValue=function(e){return kt.current.useDeferredValue(e)};Ce.useEffect=function(e,t){return kt.current.useEffect(e,t)};Ce.useId=function(){return kt.current.useId()};Ce.useImperativeHandle=function(e,t,n){return kt.current.useImperativeHandle(e,t,n)};Ce.useInsertionEffect=function(e,t){return kt.current.useInsertionEffect(e,t)};Ce.useLayoutEffect=function(e,t){return kt.current.useLayoutEffect(e,t)};Ce.useMemo=function(e,t){return kt.current.useMemo(e,t)};Ce.useReducer=function(e,t,n){return kt.current.useReducer(e,t,n)};Ce.useRef=function(e){return kt.current.useRef(e)};Ce.useState=function(e){return kt.current.useState(e)};Ce.useSyncExternalStore=function(e,t,n){return kt.current.useSyncExternalStore(e,t,n)};Ce.useTransition=function(){return kt.current.useTransition()};Ce.version="18.3.1";Wu.exports=Ce;var i=Wu.exports;const Ae=Hp(i),Wr=Wp({__proto__:null,default:Ae},[i]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o0=i,i0=Symbol.for("react.element"),c0=Symbol.for("react.fragment"),d0=Object.prototype.hasOwnProperty,u0=o0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,m0={key:!0,ref:!0,__self:!0,__source:!0};function Xu(e,t,n){var s,a={},l=null,o=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(o=t.ref);for(s in t)d0.call(t,s)&&!m0.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:i0,type:e,key:l,ref:o,props:a,_owner:u0.current}}wl.Fragment=c0;wl.jsx=Xu;wl.jsxs=Xu;Gu.exports=wl;var r=Gu.exports,Go={},em={exports:{}},Ot={},tm={exports:{}},nm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(S,P){var I=S.length;S.push(P);e:for(;0<I;){var B=I-1>>>1,k=S[B];if(0<a(k,P))S[B]=P,S[I]=k,I=B;else break e}}function n(S){return S.length===0?null:S[0]}function s(S){if(S.length===0)return null;var P=S[0],I=S.pop();if(I!==P){S[0]=I;e:for(var B=0,k=S.length,K=k>>>1;B<K;){var ne=2*(B+1)-1,_=S[ne],z=ne+1,U=S[z];if(0>a(_,I))z<k&&0>a(U,_)?(S[B]=U,S[z]=I,B=z):(S[B]=_,S[ne]=I,B=ne);else if(z<k&&0>a(U,I))S[B]=U,S[z]=I,B=z;else break e}}return P}function a(S,P){var I=S.sortIndex-P.sortIndex;return I!==0?I:S.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var o=Date,c=o.now();e.unstable_now=function(){return o.now()-c}}var d=[],u=[],f=1,m=null,h=3,v=!1,b=!1,y=!1,C=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(S){for(var P=n(u);P!==null;){if(P.callback===null)s(u);else if(P.startTime<=S)s(u),P.sortIndex=P.expirationTime,t(d,P);else break;P=n(u)}}function j(S){if(y=!1,g(S),!b)if(n(d)!==null)b=!0,ce(w);else{var P=n(u);P!==null&&pe(j,P.startTime-S)}}function w(S,P){b=!1,y&&(y=!1,x(R),R=-1),v=!0;var I=h;try{for(g(P),m=n(d);m!==null&&(!(m.expirationTime>P)||S&&!q());){var B=m.callback;if(typeof B=="function"){m.callback=null,h=m.priorityLevel;var k=B(m.expirationTime<=P);P=e.unstable_now(),typeof k=="function"?m.callback=k:m===n(d)&&s(d),g(P)}else s(d);m=n(d)}if(m!==null)var K=!0;else{var ne=n(u);ne!==null&&pe(j,ne.startTime-P),K=!1}return K}finally{m=null,h=I,v=!1}}var E=!1,$=null,R=-1,H=5,O=-1;function q(){return!(e.unstable_now()-O<H)}function W(){if($!==null){var S=e.unstable_now();O=S;var P=!0;try{P=$(!0,S)}finally{P?se():(E=!1,$=null)}}else E=!1}var se;if(typeof p=="function")se=function(){p(W)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,V=J.port2;J.port1.onmessage=W,se=function(){V.postMessage(null)}}else se=function(){C(W,0)};function ce(S){$=S,E||(E=!0,se())}function pe(S,P){R=C(function(){S(e.unstable_now())},P)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(S){S.callback=null},e.unstable_continueExecution=function(){b||v||(b=!0,ce(w))},e.unstable_forceFrameRate=function(S){0>S||125<S?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<S?Math.floor(1e3/S):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(S){switch(h){case 1:case 2:case 3:var P=3;break;default:P=h}var I=h;h=P;try{return S()}finally{h=I}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(S,P){switch(S){case 1:case 2:case 3:case 4:case 5:break;default:S=3}var I=h;h=S;try{return P()}finally{h=I}},e.unstable_scheduleCallback=function(S,P,I){var B=e.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?B+I:B):I=B,S){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=I+k,S={id:f++,callback:P,priorityLevel:S,startTime:I,expirationTime:k,sortIndex:-1},I>B?(S.sortIndex=I,t(u,S),n(d)===null&&S===n(u)&&(y?(x(R),R=-1):y=!0,pe(j,I-B))):(S.sortIndex=k,t(d,S),b||v||(b=!0,ce(w))),S},e.unstable_shouldYield=q,e.unstable_wrapCallback=function(S){var P=h;return function(){var I=h;h=P;try{return S.apply(this,arguments)}finally{h=I}}}})(nm);tm.exports=nm;var f0=tm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p0=i,Dt=f0;function re(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rm=new Set,Us={};function wr(e,t){Hr(e,t),Hr(e+"Capture",t)}function Hr(e,t){for(Us[e]=t,e=0;e<t.length;e++)rm.add(t[e])}var Nn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wo=Object.prototype.hasOwnProperty,h0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sd={},ad={};function x0(e){return Wo.call(ad,e)?!0:Wo.call(sd,e)?!1:h0.test(e)?ad[e]=!0:(sd[e]=!0,!1)}function g0(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function y0(e,t,n,s){if(t===null||typeof t>"u"||g0(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ct(e,t,n,s,a,l,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=o}var xt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){xt[e]=new Ct(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];xt[t]=new Ct(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){xt[e]=new Ct(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){xt[e]=new Ct(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){xt[e]=new Ct(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){xt[e]=new Ct(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){xt[e]=new Ct(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){xt[e]=new Ct(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){xt[e]=new Ct(e,5,!1,e.toLowerCase(),null,!1,!1)});var tc=/[\-:]([a-z])/g;function nc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(tc,nc);xt[t]=new Ct(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(tc,nc);xt[t]=new Ct(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(tc,nc);xt[t]=new Ct(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){xt[e]=new Ct(e,1,!1,e.toLowerCase(),null,!1,!1)});xt.xlinkHref=new Ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){xt[e]=new Ct(e,1,!1,e.toLowerCase(),null,!0,!0)});function rc(e,t,n,s){var a=xt.hasOwnProperty(t)?xt[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(y0(t,n,a,s)&&(n=null),s||a===null?x0(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,s=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var Pn=p0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ua=Symbol.for("react.element"),Cr=Symbol.for("react.portal"),Er=Symbol.for("react.fragment"),sc=Symbol.for("react.strict_mode"),Ho=Symbol.for("react.profiler"),sm=Symbol.for("react.provider"),am=Symbol.for("react.context"),ac=Symbol.for("react.forward_ref"),Ko=Symbol.for("react.suspense"),Vo=Symbol.for("react.suspense_list"),lc=Symbol.for("react.memo"),Ln=Symbol.for("react.lazy"),lm=Symbol.for("react.offscreen"),ld=Symbol.iterator;function is(e){return e===null||typeof e!="object"?null:(e=ld&&e[ld]||e["@@iterator"],typeof e=="function"?e:null)}var Ze=Object.assign,Ql;function bs(e){if(Ql===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ql=t&&t[1]||""}return`
`+Ql+e}var Yl=!1;function Zl(e,t){if(!e||Yl)return"";Yl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var s=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){s=u}e.call(t.prototype)}else{try{throw Error()}catch(u){s=u}e()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),l=s.stack.split(`
`),o=a.length-1,c=l.length-1;1<=o&&0<=c&&a[o]!==l[c];)c--;for(;1<=o&&0<=c;o--,c--)if(a[o]!==l[c]){if(o!==1||c!==1)do if(o--,c--,0>c||a[o]!==l[c]){var d=`
`+a[o].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=o&&0<=c);break}}}finally{Yl=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?bs(e):""}function v0(e){switch(e.tag){case 5:return bs(e.type);case 16:return bs("Lazy");case 13:return bs("Suspense");case 19:return bs("SuspenseList");case 0:case 2:case 15:return e=Zl(e.type,!1),e;case 11:return e=Zl(e.type.render,!1),e;case 1:return e=Zl(e.type,!0),e;default:return""}}function qo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Er:return"Fragment";case Cr:return"Portal";case Ho:return"Profiler";case sc:return"StrictMode";case Ko:return"Suspense";case Vo:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case am:return(e.displayName||"Context")+".Consumer";case sm:return(e._context.displayName||"Context")+".Provider";case ac:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case lc:return t=e.displayName||null,t!==null?t:qo(e.type)||"Memo";case Ln:t=e._payload,e=e._init;try{return qo(e(t))}catch{}}return null}function b0(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qo(t);case 8:return t===sc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function qn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function om(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function w0(e){var t=om(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){s=""+o,l.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ma(e){e._valueTracker||(e._valueTracker=w0(e))}function im(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=om(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function Va(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Jo(e,t){var n=t.checked;return Ze({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function od(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=qn(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function cm(e,t){t=t.checked,t!=null&&rc(e,"checked",t,!1)}function Qo(e,t){cm(e,t);var n=qn(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Yo(e,t.type,n):t.hasOwnProperty("defaultValue")&&Yo(e,t.type,qn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function id(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Yo(e,t,n){(t!=="number"||Va(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ws=Array.isArray;function Or(e,t,n,s){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&s&&(e[n].defaultSelected=!0)}else{for(n=""+qn(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Zo(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(re(91));return Ze({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function cd(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(re(92));if(ws(n)){if(1<n.length)throw Error(re(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:qn(n)}}function dm(e,t){var n=qn(t.value),s=qn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function dd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function um(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xo(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?um(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var fa,mm=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(fa=fa||document.createElement("div"),fa.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=fa.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ms(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Cs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},j0=["Webkit","ms","Moz","O"];Object.keys(Cs).forEach(function(e){j0.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Cs[t]=Cs[e]})});function fm(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Cs.hasOwnProperty(e)&&Cs[e]?(""+t).trim():t+"px"}function pm(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,a=fm(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,a):e[n]=a}}var N0=Ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ei(e,t){if(t){if(N0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(re(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(re(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(re(61))}if(t.style!=null&&typeof t.style!="object")throw Error(re(62))}}function ti(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ni=null;function oc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ri=null,Fr=null,_r=null;function ud(e){if(e=sa(e)){if(typeof ri!="function")throw Error(re(280));var t=e.stateNode;t&&(t=Cl(t),ri(e.stateNode,e.type,t))}}function hm(e){Fr?_r?_r.push(e):_r=[e]:Fr=e}function xm(){if(Fr){var e=Fr,t=_r;if(_r=Fr=null,ud(e),t)for(e=0;e<t.length;e++)ud(t[e])}}function gm(e,t){return e(t)}function ym(){}var Xl=!1;function vm(e,t,n){if(Xl)return e(t,n);Xl=!0;try{return gm(e,t,n)}finally{Xl=!1,(Fr!==null||_r!==null)&&(ym(),xm())}}function Ds(e,t){var n=e.stateNode;if(n===null)return null;var s=Cl(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(re(231,t,typeof n));return n}var si=!1;if(Nn)try{var cs={};Object.defineProperty(cs,"passive",{get:function(){si=!0}}),window.addEventListener("test",cs,cs),window.removeEventListener("test",cs,cs)}catch{si=!1}function S0(e,t,n,s,a,l,o,c,d){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(f){this.onError(f)}}var Es=!1,qa=null,Ja=!1,ai=null,k0={onError:function(e){Es=!0,qa=e}};function C0(e,t,n,s,a,l,o,c,d){Es=!1,qa=null,S0.apply(k0,arguments)}function E0(e,t,n,s,a,l,o,c,d){if(C0.apply(this,arguments),Es){if(Es){var u=qa;Es=!1,qa=null}else throw Error(re(198));Ja||(Ja=!0,ai=u)}}function jr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function bm(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function md(e){if(jr(e)!==e)throw Error(re(188))}function P0(e){var t=e.alternate;if(!t){if(t=jr(e),t===null)throw Error(re(188));return t!==e?null:e}for(var n=e,s=t;;){var a=n.return;if(a===null)break;var l=a.alternate;if(l===null){if(s=a.return,s!==null){n=s;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===n)return md(a),e;if(l===s)return md(a),t;l=l.sibling}throw Error(re(188))}if(n.return!==s.return)n=a,s=l;else{for(var o=!1,c=a.child;c;){if(c===n){o=!0,n=a,s=l;break}if(c===s){o=!0,s=a,n=l;break}c=c.sibling}if(!o){for(c=l.child;c;){if(c===n){o=!0,n=l,s=a;break}if(c===s){o=!0,s=l,n=a;break}c=c.sibling}if(!o)throw Error(re(189))}}if(n.alternate!==s)throw Error(re(190))}if(n.tag!==3)throw Error(re(188));return n.stateNode.current===n?e:t}function wm(e){return e=P0(e),e!==null?jm(e):null}function jm(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=jm(e);if(t!==null)return t;e=e.sibling}return null}var Nm=Dt.unstable_scheduleCallback,fd=Dt.unstable_cancelCallback,T0=Dt.unstable_shouldYield,R0=Dt.unstable_requestPaint,rt=Dt.unstable_now,L0=Dt.unstable_getCurrentPriorityLevel,ic=Dt.unstable_ImmediatePriority,Sm=Dt.unstable_UserBlockingPriority,Qa=Dt.unstable_NormalPriority,A0=Dt.unstable_LowPriority,km=Dt.unstable_IdlePriority,jl=null,cn=null;function $0(e){if(cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(jl,e,void 0,(e.current.flags&128)===128)}catch{}}var en=Math.clz32?Math.clz32:M0,I0=Math.log,U0=Math.LN2;function M0(e){return e>>>=0,e===0?32:31-(I0(e)/U0|0)|0}var pa=64,ha=4194304;function js(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ya(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,a=e.suspendedLanes,l=e.pingedLanes,o=n&268435455;if(o!==0){var c=o&~a;c!==0?s=js(c):(l&=o,l!==0&&(s=js(l)))}else o=n&~a,o!==0?s=js(o):l!==0&&(s=js(l));if(s===0)return 0;if(t!==0&&t!==s&&!(t&a)&&(a=s&-s,l=t&-t,a>=l||a===16&&(l&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-en(t),a=1<<n,s|=e[n],t&=~a;return s}function D0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function O0(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var o=31-en(l),c=1<<o,d=a[o];d===-1?(!(c&n)||c&s)&&(a[o]=D0(c,t)):d<=t&&(e.expiredLanes|=c),l&=~c}}function li(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Cm(){var e=pa;return pa<<=1,!(pa&4194240)&&(pa=64),e}function eo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function na(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-en(t),e[t]=n}function F0(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-en(n),l=1<<a;t[a]=0,s[a]=-1,e[a]=-1,n&=~l}}function cc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-en(n),a=1<<s;a&t|e[s]&t&&(e[s]|=t),n&=~a}}var ze=0;function Em(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Pm,dc,Tm,Rm,Lm,oi=!1,xa=[],Fn=null,_n=null,Bn=null,Os=new Map,Fs=new Map,$n=[],_0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pd(e,t){switch(e){case"focusin":case"focusout":Fn=null;break;case"dragenter":case"dragleave":_n=null;break;case"mouseover":case"mouseout":Bn=null;break;case"pointerover":case"pointerout":Os.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fs.delete(t.pointerId)}}function ds(e,t,n,s,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:l,targetContainers:[a]},t!==null&&(t=sa(t),t!==null&&dc(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function B0(e,t,n,s,a){switch(t){case"focusin":return Fn=ds(Fn,e,t,n,s,a),!0;case"dragenter":return _n=ds(_n,e,t,n,s,a),!0;case"mouseover":return Bn=ds(Bn,e,t,n,s,a),!0;case"pointerover":var l=a.pointerId;return Os.set(l,ds(Os.get(l)||null,e,t,n,s,a)),!0;case"gotpointercapture":return l=a.pointerId,Fs.set(l,ds(Fs.get(l)||null,e,t,n,s,a)),!0}return!1}function Am(e){var t=or(e.target);if(t!==null){var n=jr(t);if(n!==null){if(t=n.tag,t===13){if(t=bm(n),t!==null){e.blockedOn=t,Lm(e.priority,function(){Tm(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ma(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ii(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);ni=s,n.target.dispatchEvent(s),ni=null}else return t=sa(n),t!==null&&dc(t),e.blockedOn=n,!1;t.shift()}return!0}function hd(e,t,n){Ma(e)&&n.delete(t)}function z0(){oi=!1,Fn!==null&&Ma(Fn)&&(Fn=null),_n!==null&&Ma(_n)&&(_n=null),Bn!==null&&Ma(Bn)&&(Bn=null),Os.forEach(hd),Fs.forEach(hd)}function us(e,t){e.blockedOn===t&&(e.blockedOn=null,oi||(oi=!0,Dt.unstable_scheduleCallback(Dt.unstable_NormalPriority,z0)))}function _s(e){function t(a){return us(a,e)}if(0<xa.length){us(xa[0],e);for(var n=1;n<xa.length;n++){var s=xa[n];s.blockedOn===e&&(s.blockedOn=null)}}for(Fn!==null&&us(Fn,e),_n!==null&&us(_n,e),Bn!==null&&us(Bn,e),Os.forEach(t),Fs.forEach(t),n=0;n<$n.length;n++)s=$n[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<$n.length&&(n=$n[0],n.blockedOn===null);)Am(n),n.blockedOn===null&&$n.shift()}var Br=Pn.ReactCurrentBatchConfig,Za=!0;function G0(e,t,n,s){var a=ze,l=Br.transition;Br.transition=null;try{ze=1,uc(e,t,n,s)}finally{ze=a,Br.transition=l}}function W0(e,t,n,s){var a=ze,l=Br.transition;Br.transition=null;try{ze=4,uc(e,t,n,s)}finally{ze=a,Br.transition=l}}function uc(e,t,n,s){if(Za){var a=ii(e,t,n,s);if(a===null)uo(e,t,s,Xa,n),pd(e,s);else if(B0(a,e,t,n,s))s.stopPropagation();else if(pd(e,s),t&4&&-1<_0.indexOf(e)){for(;a!==null;){var l=sa(a);if(l!==null&&Pm(l),l=ii(e,t,n,s),l===null&&uo(e,t,s,Xa,n),l===a)break;a=l}a!==null&&s.stopPropagation()}else uo(e,t,s,null,n)}}var Xa=null;function ii(e,t,n,s){if(Xa=null,e=oc(s),e=or(e),e!==null)if(t=jr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=bm(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xa=e,null}function $m(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(L0()){case ic:return 1;case Sm:return 4;case Qa:case A0:return 16;case km:return 536870912;default:return 16}default:return 16}}var Mn=null,mc=null,Da=null;function Im(){if(Da)return Da;var e,t=mc,n=t.length,s,a="value"in Mn?Mn.value:Mn.textContent,l=a.length;for(e=0;e<n&&t[e]===a[e];e++);var o=n-e;for(s=1;s<=o&&t[n-s]===a[l-s];s++);return Da=a.slice(e,1<s?1-s:void 0)}function Oa(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ga(){return!0}function xd(){return!1}function Ft(e){function t(n,s,a,l,o){this._reactName=n,this._targetInst=a,this.type=s,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(n=e[c],this[c]=n?n(l):l[c]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?ga:xd,this.isPropagationStopped=xd,this}return Ze(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ga)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ga)},persist:function(){},isPersistent:ga}),t}var ts={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fc=Ft(ts),ra=Ze({},ts,{view:0,detail:0}),H0=Ft(ra),to,no,ms,Nl=Ze({},ra,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ms&&(ms&&e.type==="mousemove"?(to=e.screenX-ms.screenX,no=e.screenY-ms.screenY):no=to=0,ms=e),to)},movementY:function(e){return"movementY"in e?e.movementY:no}}),gd=Ft(Nl),K0=Ze({},Nl,{dataTransfer:0}),V0=Ft(K0),q0=Ze({},ra,{relatedTarget:0}),ro=Ft(q0),J0=Ze({},ts,{animationName:0,elapsedTime:0,pseudoElement:0}),Q0=Ft(J0),Y0=Ze({},ts,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Z0=Ft(Y0),X0=Ze({},ts,{data:0}),yd=Ft(X0),eh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},th={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=nh[e])?!!t[e]:!1}function pc(){return rh}var sh=Ze({},ra,{key:function(e){if(e.key){var t=eh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Oa(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?th[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pc,charCode:function(e){return e.type==="keypress"?Oa(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Oa(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ah=Ft(sh),lh=Ze({},Nl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vd=Ft(lh),oh=Ze({},ra,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pc}),ih=Ft(oh),ch=Ze({},ts,{propertyName:0,elapsedTime:0,pseudoElement:0}),dh=Ft(ch),uh=Ze({},Nl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),mh=Ft(uh),fh=[9,13,27,32],hc=Nn&&"CompositionEvent"in window,Ps=null;Nn&&"documentMode"in document&&(Ps=document.documentMode);var ph=Nn&&"TextEvent"in window&&!Ps,Um=Nn&&(!hc||Ps&&8<Ps&&11>=Ps),bd=" ",wd=!1;function Mm(e,t){switch(e){case"keyup":return fh.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Pr=!1;function hh(e,t){switch(e){case"compositionend":return Dm(t);case"keypress":return t.which!==32?null:(wd=!0,bd);case"textInput":return e=t.data,e===bd&&wd?null:e;default:return null}}function xh(e,t){if(Pr)return e==="compositionend"||!hc&&Mm(e,t)?(e=Im(),Da=mc=Mn=null,Pr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Um&&t.locale!=="ko"?null:t.data;default:return null}}var gh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!gh[e.type]:t==="textarea"}function Om(e,t,n,s){hm(s),t=el(t,"onChange"),0<t.length&&(n=new fc("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Ts=null,Bs=null;function yh(e){Jm(e,0)}function Sl(e){var t=Lr(e);if(im(t))return e}function vh(e,t){if(e==="change")return t}var Fm=!1;if(Nn){var so;if(Nn){var ao="oninput"in document;if(!ao){var Nd=document.createElement("div");Nd.setAttribute("oninput","return;"),ao=typeof Nd.oninput=="function"}so=ao}else so=!1;Fm=so&&(!document.documentMode||9<document.documentMode)}function Sd(){Ts&&(Ts.detachEvent("onpropertychange",_m),Bs=Ts=null)}function _m(e){if(e.propertyName==="value"&&Sl(Bs)){var t=[];Om(t,Bs,e,oc(e)),vm(yh,t)}}function bh(e,t,n){e==="focusin"?(Sd(),Ts=t,Bs=n,Ts.attachEvent("onpropertychange",_m)):e==="focusout"&&Sd()}function wh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Sl(Bs)}function jh(e,t){if(e==="click")return Sl(t)}function Nh(e,t){if(e==="input"||e==="change")return Sl(t)}function Sh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var nn=typeof Object.is=="function"?Object.is:Sh;function zs(e,t){if(nn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var a=n[s];if(!Wo.call(t,a)||!nn(e[a],t[a]))return!1}return!0}function kd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Cd(e,t){var n=kd(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=kd(n)}}function Bm(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Bm(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function zm(){for(var e=window,t=Va();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Va(e.document)}return t}function xc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function kh(e){var t=zm(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Bm(n.ownerDocument.documentElement,n)){if(s!==null&&xc(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,l=Math.min(s.start,a);s=s.end===void 0?l:Math.min(s.end,a),!e.extend&&l>s&&(a=s,s=l,l=a),a=Cd(n,l);var o=Cd(n,s);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),l>s?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ch=Nn&&"documentMode"in document&&11>=document.documentMode,Tr=null,ci=null,Rs=null,di=!1;function Ed(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;di||Tr==null||Tr!==Va(s)||(s=Tr,"selectionStart"in s&&xc(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Rs&&zs(Rs,s)||(Rs=s,s=el(ci,"onSelect"),0<s.length&&(t=new fc("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=Tr)))}function ya(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Rr={animationend:ya("Animation","AnimationEnd"),animationiteration:ya("Animation","AnimationIteration"),animationstart:ya("Animation","AnimationStart"),transitionend:ya("Transition","TransitionEnd")},lo={},Gm={};Nn&&(Gm=document.createElement("div").style,"AnimationEvent"in window||(delete Rr.animationend.animation,delete Rr.animationiteration.animation,delete Rr.animationstart.animation),"TransitionEvent"in window||delete Rr.transitionend.transition);function kl(e){if(lo[e])return lo[e];if(!Rr[e])return e;var t=Rr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Gm)return lo[e]=t[n];return e}var Wm=kl("animationend"),Hm=kl("animationiteration"),Km=kl("animationstart"),Vm=kl("transitionend"),qm=new Map,Pd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yn(e,t){qm.set(e,t),wr(t,[e])}for(var oo=0;oo<Pd.length;oo++){var io=Pd[oo],Eh=io.toLowerCase(),Ph=io[0].toUpperCase()+io.slice(1);Yn(Eh,"on"+Ph)}Yn(Wm,"onAnimationEnd");Yn(Hm,"onAnimationIteration");Yn(Km,"onAnimationStart");Yn("dblclick","onDoubleClick");Yn("focusin","onFocus");Yn("focusout","onBlur");Yn(Vm,"onTransitionEnd");Hr("onMouseEnter",["mouseout","mouseover"]);Hr("onMouseLeave",["mouseout","mouseover"]);Hr("onPointerEnter",["pointerout","pointerover"]);Hr("onPointerLeave",["pointerout","pointerover"]);wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wr("onBeforeInput",["compositionend","keypress","textInput","paste"]);wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ns="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Th=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ns));function Td(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,E0(s,t,void 0,e),e.currentTarget=null}function Jm(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],a=s.event;s=s.listeners;e:{var l=void 0;if(t)for(var o=s.length-1;0<=o;o--){var c=s[o],d=c.instance,u=c.currentTarget;if(c=c.listener,d!==l&&a.isPropagationStopped())break e;Td(a,c,u),l=d}else for(o=0;o<s.length;o++){if(c=s[o],d=c.instance,u=c.currentTarget,c=c.listener,d!==l&&a.isPropagationStopped())break e;Td(a,c,u),l=d}}}if(Ja)throw e=ai,Ja=!1,ai=null,e}function Ve(e,t){var n=t[hi];n===void 0&&(n=t[hi]=new Set);var s=e+"__bubble";n.has(s)||(Qm(t,e,2,!1),n.add(s))}function co(e,t,n){var s=0;t&&(s|=4),Qm(n,e,s,t)}var va="_reactListening"+Math.random().toString(36).slice(2);function Gs(e){if(!e[va]){e[va]=!0,rm.forEach(function(n){n!=="selectionchange"&&(Th.has(n)||co(n,!1,e),co(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[va]||(t[va]=!0,co("selectionchange",!1,t))}}function Qm(e,t,n,s){switch($m(t)){case 1:var a=G0;break;case 4:a=W0;break;default:a=uc}n=a.bind(null,t,n,e),a=void 0,!si||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function uo(e,t,n,s,a){var l=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var c=s.stateNode.containerInfo;if(c===a||c.nodeType===8&&c.parentNode===a)break;if(o===4)for(o=s.return;o!==null;){var d=o.tag;if((d===3||d===4)&&(d=o.stateNode.containerInfo,d===a||d.nodeType===8&&d.parentNode===a))return;o=o.return}for(;c!==null;){if(o=or(c),o===null)return;if(d=o.tag,d===5||d===6){s=l=o;continue e}c=c.parentNode}}s=s.return}vm(function(){var u=l,f=oc(n),m=[];e:{var h=qm.get(e);if(h!==void 0){var v=fc,b=e;switch(e){case"keypress":if(Oa(n)===0)break e;case"keydown":case"keyup":v=ah;break;case"focusin":b="focus",v=ro;break;case"focusout":b="blur",v=ro;break;case"beforeblur":case"afterblur":v=ro;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=gd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=V0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=ih;break;case Wm:case Hm:case Km:v=Q0;break;case Vm:v=dh;break;case"scroll":v=H0;break;case"wheel":v=mh;break;case"copy":case"cut":case"paste":v=Z0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=vd}var y=(t&4)!==0,C=!y&&e==="scroll",x=y?h!==null?h+"Capture":null:h;y=[];for(var p=u,g;p!==null;){g=p;var j=g.stateNode;if(g.tag===5&&j!==null&&(g=j,x!==null&&(j=Ds(p,x),j!=null&&y.push(Ws(p,j,g)))),C)break;p=p.return}0<y.length&&(h=new v(h,b,null,n,f),m.push({event:h,listeners:y}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",h&&n!==ni&&(b=n.relatedTarget||n.fromElement)&&(or(b)||b[Sn]))break e;if((v||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,v?(b=n.relatedTarget||n.toElement,v=u,b=b?or(b):null,b!==null&&(C=jr(b),b!==C||b.tag!==5&&b.tag!==6)&&(b=null)):(v=null,b=u),v!==b)){if(y=gd,j="onMouseLeave",x="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(y=vd,j="onPointerLeave",x="onPointerEnter",p="pointer"),C=v==null?h:Lr(v),g=b==null?h:Lr(b),h=new y(j,p+"leave",v,n,f),h.target=C,h.relatedTarget=g,j=null,or(f)===u&&(y=new y(x,p+"enter",b,n,f),y.target=g,y.relatedTarget=C,j=y),C=j,v&&b)t:{for(y=v,x=b,p=0,g=y;g;g=Nr(g))p++;for(g=0,j=x;j;j=Nr(j))g++;for(;0<p-g;)y=Nr(y),p--;for(;0<g-p;)x=Nr(x),g--;for(;p--;){if(y===x||x!==null&&y===x.alternate)break t;y=Nr(y),x=Nr(x)}y=null}else y=null;v!==null&&Rd(m,h,v,y,!1),b!==null&&C!==null&&Rd(m,C,b,y,!0)}}e:{if(h=u?Lr(u):window,v=h.nodeName&&h.nodeName.toLowerCase(),v==="select"||v==="input"&&h.type==="file")var w=vh;else if(jd(h))if(Fm)w=Nh;else{w=wh;var E=bh}else(v=h.nodeName)&&v.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=jh);if(w&&(w=w(e,u))){Om(m,w,n,f);break e}E&&E(e,h,u),e==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&Yo(h,"number",h.value)}switch(E=u?Lr(u):window,e){case"focusin":(jd(E)||E.contentEditable==="true")&&(Tr=E,ci=u,Rs=null);break;case"focusout":Rs=ci=Tr=null;break;case"mousedown":di=!0;break;case"contextmenu":case"mouseup":case"dragend":di=!1,Ed(m,n,f);break;case"selectionchange":if(Ch)break;case"keydown":case"keyup":Ed(m,n,f)}var $;if(hc)e:{switch(e){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Pr?Mm(e,n)&&(R="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(Um&&n.locale!=="ko"&&(Pr||R!=="onCompositionStart"?R==="onCompositionEnd"&&Pr&&($=Im()):(Mn=f,mc="value"in Mn?Mn.value:Mn.textContent,Pr=!0)),E=el(u,R),0<E.length&&(R=new yd(R,e,null,n,f),m.push({event:R,listeners:E}),$?R.data=$:($=Dm(n),$!==null&&(R.data=$)))),($=ph?hh(e,n):xh(e,n))&&(u=el(u,"onBeforeInput"),0<u.length&&(f=new yd("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:u}),f.data=$))}Jm(m,t)})}function Ws(e,t,n){return{instance:e,listener:t,currentTarget:n}}function el(e,t){for(var n=t+"Capture",s=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=Ds(e,n),l!=null&&s.unshift(Ws(e,l,a)),l=Ds(e,t),l!=null&&s.push(Ws(e,l,a))),e=e.return}return s}function Nr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Rd(e,t,n,s,a){for(var l=t._reactName,o=[];n!==null&&n!==s;){var c=n,d=c.alternate,u=c.stateNode;if(d!==null&&d===s)break;c.tag===5&&u!==null&&(c=u,a?(d=Ds(n,l),d!=null&&o.unshift(Ws(n,d,c))):a||(d=Ds(n,l),d!=null&&o.push(Ws(n,d,c)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Rh=/\r\n?/g,Lh=/\u0000|\uFFFD/g;function Ld(e){return(typeof e=="string"?e:""+e).replace(Rh,`
`).replace(Lh,"")}function ba(e,t,n){if(t=Ld(t),Ld(e)!==t&&n)throw Error(re(425))}function tl(){}var ui=null,mi=null;function fi(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var pi=typeof setTimeout=="function"?setTimeout:void 0,Ah=typeof clearTimeout=="function"?clearTimeout:void 0,Ad=typeof Promise=="function"?Promise:void 0,$h=typeof queueMicrotask=="function"?queueMicrotask:typeof Ad<"u"?function(e){return Ad.resolve(null).then(e).catch(Ih)}:pi;function Ih(e){setTimeout(function(){throw e})}function mo(e,t){var n=t,s=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(s===0){e.removeChild(a),_s(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=a}while(n);_s(t)}function zn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function $d(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ns=Math.random().toString(36).slice(2),on="__reactFiber$"+ns,Hs="__reactProps$"+ns,Sn="__reactContainer$"+ns,hi="__reactEvents$"+ns,Uh="__reactListeners$"+ns,Mh="__reactHandles$"+ns;function or(e){var t=e[on];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Sn]||n[on]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=$d(e);e!==null;){if(n=e[on])return n;e=$d(e)}return t}e=n,n=e.parentNode}return null}function sa(e){return e=e[on]||e[Sn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Lr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(re(33))}function Cl(e){return e[Hs]||null}var xi=[],Ar=-1;function Zn(e){return{current:e}}function qe(e){0>Ar||(e.current=xi[Ar],xi[Ar]=null,Ar--)}function He(e,t){Ar++,xi[Ar]=e.current,e.current=t}var Jn={},jt=Zn(Jn),Rt=Zn(!1),xr=Jn;function Kr(e,t){var n=e.type.contextTypes;if(!n)return Jn;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in n)a[l]=t[l];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Lt(e){return e=e.childContextTypes,e!=null}function nl(){qe(Rt),qe(jt)}function Id(e,t,n){if(jt.current!==Jn)throw Error(re(168));He(jt,t),He(Rt,n)}function Ym(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error(re(108,b0(e)||"Unknown",a));return Ze({},n,s)}function rl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Jn,xr=jt.current,He(jt,e),He(Rt,Rt.current),!0}function Ud(e,t,n){var s=e.stateNode;if(!s)throw Error(re(169));n?(e=Ym(e,t,xr),s.__reactInternalMemoizedMergedChildContext=e,qe(Rt),qe(jt),He(jt,e)):qe(Rt),He(Rt,n)}var yn=null,El=!1,fo=!1;function Zm(e){yn===null?yn=[e]:yn.push(e)}function Dh(e){El=!0,Zm(e)}function Xn(){if(!fo&&yn!==null){fo=!0;var e=0,t=ze;try{var n=yn;for(ze=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}yn=null,El=!1}catch(a){throw yn!==null&&(yn=yn.slice(e+1)),Nm(ic,Xn),a}finally{ze=t,fo=!1}}return null}var $r=[],Ir=0,sl=null,al=0,Bt=[],zt=0,gr=null,vn=1,bn="";function sr(e,t){$r[Ir++]=al,$r[Ir++]=sl,sl=e,al=t}function Xm(e,t,n){Bt[zt++]=vn,Bt[zt++]=bn,Bt[zt++]=gr,gr=e;var s=vn;e=bn;var a=32-en(s)-1;s&=~(1<<a),n+=1;var l=32-en(t)+a;if(30<l){var o=a-a%5;l=(s&(1<<o)-1).toString(32),s>>=o,a-=o,vn=1<<32-en(t)+a|n<<a|s,bn=l+e}else vn=1<<l|n<<a|s,bn=e}function gc(e){e.return!==null&&(sr(e,1),Xm(e,1,0))}function yc(e){for(;e===sl;)sl=$r[--Ir],$r[Ir]=null,al=$r[--Ir],$r[Ir]=null;for(;e===gr;)gr=Bt[--zt],Bt[zt]=null,bn=Bt[--zt],Bt[zt]=null,vn=Bt[--zt],Bt[zt]=null}var Mt=null,Ut=null,Je=!1,Xt=null;function ef(e,t){var n=Gt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Md(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Mt=e,Ut=zn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Mt=e,Ut=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=gr!==null?{id:vn,overflow:bn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Gt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Mt=e,Ut=null,!0):!1;default:return!1}}function gi(e){return(e.mode&1)!==0&&(e.flags&128)===0}function yi(e){if(Je){var t=Ut;if(t){var n=t;if(!Md(e,t)){if(gi(e))throw Error(re(418));t=zn(n.nextSibling);var s=Mt;t&&Md(e,t)?ef(s,n):(e.flags=e.flags&-4097|2,Je=!1,Mt=e)}}else{if(gi(e))throw Error(re(418));e.flags=e.flags&-4097|2,Je=!1,Mt=e}}}function Dd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Mt=e}function wa(e){if(e!==Mt)return!1;if(!Je)return Dd(e),Je=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!fi(e.type,e.memoizedProps)),t&&(t=Ut)){if(gi(e))throw tf(),Error(re(418));for(;t;)ef(e,t),t=zn(t.nextSibling)}if(Dd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(re(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ut=zn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ut=null}}else Ut=Mt?zn(e.stateNode.nextSibling):null;return!0}function tf(){for(var e=Ut;e;)e=zn(e.nextSibling)}function Vr(){Ut=Mt=null,Je=!1}function vc(e){Xt===null?Xt=[e]:Xt.push(e)}var Oh=Pn.ReactCurrentBatchConfig;function fs(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(re(309));var s=n.stateNode}if(!s)throw Error(re(147,e));var a=s,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(o){var c=a.refs;o===null?delete c[l]:c[l]=o},t._stringRef=l,t)}if(typeof e!="string")throw Error(re(284));if(!n._owner)throw Error(re(290,e))}return e}function ja(e,t){throw e=Object.prototype.toString.call(t),Error(re(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Od(e){var t=e._init;return t(e._payload)}function nf(e){function t(x,p){if(e){var g=x.deletions;g===null?(x.deletions=[p],x.flags|=16):g.push(p)}}function n(x,p){if(!e)return null;for(;p!==null;)t(x,p),p=p.sibling;return null}function s(x,p){for(x=new Map;p!==null;)p.key!==null?x.set(p.key,p):x.set(p.index,p),p=p.sibling;return x}function a(x,p){return x=Kn(x,p),x.index=0,x.sibling=null,x}function l(x,p,g){return x.index=g,e?(g=x.alternate,g!==null?(g=g.index,g<p?(x.flags|=2,p):g):(x.flags|=2,p)):(x.flags|=1048576,p)}function o(x){return e&&x.alternate===null&&(x.flags|=2),x}function c(x,p,g,j){return p===null||p.tag!==6?(p=bo(g,x.mode,j),p.return=x,p):(p=a(p,g),p.return=x,p)}function d(x,p,g,j){var w=g.type;return w===Er?f(x,p,g.props.children,j,g.key):p!==null&&(p.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Ln&&Od(w)===p.type)?(j=a(p,g.props),j.ref=fs(x,p,g),j.return=x,j):(j=Ha(g.type,g.key,g.props,null,x.mode,j),j.ref=fs(x,p,g),j.return=x,j)}function u(x,p,g,j){return p===null||p.tag!==4||p.stateNode.containerInfo!==g.containerInfo||p.stateNode.implementation!==g.implementation?(p=wo(g,x.mode,j),p.return=x,p):(p=a(p,g.children||[]),p.return=x,p)}function f(x,p,g,j,w){return p===null||p.tag!==7?(p=fr(g,x.mode,j,w),p.return=x,p):(p=a(p,g),p.return=x,p)}function m(x,p,g){if(typeof p=="string"&&p!==""||typeof p=="number")return p=bo(""+p,x.mode,g),p.return=x,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case ua:return g=Ha(p.type,p.key,p.props,null,x.mode,g),g.ref=fs(x,null,p),g.return=x,g;case Cr:return p=wo(p,x.mode,g),p.return=x,p;case Ln:var j=p._init;return m(x,j(p._payload),g)}if(ws(p)||is(p))return p=fr(p,x.mode,g,null),p.return=x,p;ja(x,p)}return null}function h(x,p,g,j){var w=p!==null?p.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return w!==null?null:c(x,p,""+g,j);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case ua:return g.key===w?d(x,p,g,j):null;case Cr:return g.key===w?u(x,p,g,j):null;case Ln:return w=g._init,h(x,p,w(g._payload),j)}if(ws(g)||is(g))return w!==null?null:f(x,p,g,j,null);ja(x,g)}return null}function v(x,p,g,j,w){if(typeof j=="string"&&j!==""||typeof j=="number")return x=x.get(g)||null,c(p,x,""+j,w);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case ua:return x=x.get(j.key===null?g:j.key)||null,d(p,x,j,w);case Cr:return x=x.get(j.key===null?g:j.key)||null,u(p,x,j,w);case Ln:var E=j._init;return v(x,p,g,E(j._payload),w)}if(ws(j)||is(j))return x=x.get(g)||null,f(p,x,j,w,null);ja(p,j)}return null}function b(x,p,g,j){for(var w=null,E=null,$=p,R=p=0,H=null;$!==null&&R<g.length;R++){$.index>R?(H=$,$=null):H=$.sibling;var O=h(x,$,g[R],j);if(O===null){$===null&&($=H);break}e&&$&&O.alternate===null&&t(x,$),p=l(O,p,R),E===null?w=O:E.sibling=O,E=O,$=H}if(R===g.length)return n(x,$),Je&&sr(x,R),w;if($===null){for(;R<g.length;R++)$=m(x,g[R],j),$!==null&&(p=l($,p,R),E===null?w=$:E.sibling=$,E=$);return Je&&sr(x,R),w}for($=s(x,$);R<g.length;R++)H=v($,x,R,g[R],j),H!==null&&(e&&H.alternate!==null&&$.delete(H.key===null?R:H.key),p=l(H,p,R),E===null?w=H:E.sibling=H,E=H);return e&&$.forEach(function(q){return t(x,q)}),Je&&sr(x,R),w}function y(x,p,g,j){var w=is(g);if(typeof w!="function")throw Error(re(150));if(g=w.call(g),g==null)throw Error(re(151));for(var E=w=null,$=p,R=p=0,H=null,O=g.next();$!==null&&!O.done;R++,O=g.next()){$.index>R?(H=$,$=null):H=$.sibling;var q=h(x,$,O.value,j);if(q===null){$===null&&($=H);break}e&&$&&q.alternate===null&&t(x,$),p=l(q,p,R),E===null?w=q:E.sibling=q,E=q,$=H}if(O.done)return n(x,$),Je&&sr(x,R),w;if($===null){for(;!O.done;R++,O=g.next())O=m(x,O.value,j),O!==null&&(p=l(O,p,R),E===null?w=O:E.sibling=O,E=O);return Je&&sr(x,R),w}for($=s(x,$);!O.done;R++,O=g.next())O=v($,x,R,O.value,j),O!==null&&(e&&O.alternate!==null&&$.delete(O.key===null?R:O.key),p=l(O,p,R),E===null?w=O:E.sibling=O,E=O);return e&&$.forEach(function(W){return t(x,W)}),Je&&sr(x,R),w}function C(x,p,g,j){if(typeof g=="object"&&g!==null&&g.type===Er&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case ua:e:{for(var w=g.key,E=p;E!==null;){if(E.key===w){if(w=g.type,w===Er){if(E.tag===7){n(x,E.sibling),p=a(E,g.props.children),p.return=x,x=p;break e}}else if(E.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Ln&&Od(w)===E.type){n(x,E.sibling),p=a(E,g.props),p.ref=fs(x,E,g),p.return=x,x=p;break e}n(x,E);break}else t(x,E);E=E.sibling}g.type===Er?(p=fr(g.props.children,x.mode,j,g.key),p.return=x,x=p):(j=Ha(g.type,g.key,g.props,null,x.mode,j),j.ref=fs(x,p,g),j.return=x,x=j)}return o(x);case Cr:e:{for(E=g.key;p!==null;){if(p.key===E)if(p.tag===4&&p.stateNode.containerInfo===g.containerInfo&&p.stateNode.implementation===g.implementation){n(x,p.sibling),p=a(p,g.children||[]),p.return=x,x=p;break e}else{n(x,p);break}else t(x,p);p=p.sibling}p=wo(g,x.mode,j),p.return=x,x=p}return o(x);case Ln:return E=g._init,C(x,p,E(g._payload),j)}if(ws(g))return b(x,p,g,j);if(is(g))return y(x,p,g,j);ja(x,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,p!==null&&p.tag===6?(n(x,p.sibling),p=a(p,g),p.return=x,x=p):(n(x,p),p=bo(g,x.mode,j),p.return=x,x=p),o(x)):n(x,p)}return C}var qr=nf(!0),rf=nf(!1),ll=Zn(null),ol=null,Ur=null,bc=null;function wc(){bc=Ur=ol=null}function jc(e){var t=ll.current;qe(ll),e._currentValue=t}function vi(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function zr(e,t){ol=e,bc=Ur=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Tt=!0),e.firstContext=null)}function Ht(e){var t=e._currentValue;if(bc!==e)if(e={context:e,memoizedValue:t,next:null},Ur===null){if(ol===null)throw Error(re(308));Ur=e,ol.dependencies={lanes:0,firstContext:e}}else Ur=Ur.next=e;return t}var ir=null;function Nc(e){ir===null?ir=[e]:ir.push(e)}function sf(e,t,n,s){var a=t.interleaved;return a===null?(n.next=n,Nc(t)):(n.next=a.next,a.next=n),t.interleaved=n,kn(e,s)}function kn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var An=!1;function Sc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function af(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function wn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Gn(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Re&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,kn(e,n)}return a=s.interleaved,a===null?(t.next=t,Nc(s)):(t.next=a.next,a.next=t),s.interleaved=t,kn(e,n)}function Fa(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,cc(e,n)}}function Fd(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var a=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?a=l=o:l=l.next=o,n=n.next}while(n!==null);l===null?a=l=t:l=l.next=t}else a=l=t;n={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function il(e,t,n,s){var a=e.updateQueue;An=!1;var l=a.firstBaseUpdate,o=a.lastBaseUpdate,c=a.shared.pending;if(c!==null){a.shared.pending=null;var d=c,u=d.next;d.next=null,o===null?l=u:o.next=u,o=d;var f=e.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==o&&(c===null?f.firstBaseUpdate=u:c.next=u,f.lastBaseUpdate=d))}if(l!==null){var m=a.baseState;o=0,f=u=d=null,c=l;do{var h=c.lane,v=c.eventTime;if((s&h)===h){f!==null&&(f=f.next={eventTime:v,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var b=e,y=c;switch(h=t,v=n,y.tag){case 1:if(b=y.payload,typeof b=="function"){m=b.call(v,m,h);break e}m=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=y.payload,h=typeof b=="function"?b.call(v,m,h):b,h==null)break e;m=Ze({},m,h);break e;case 2:An=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[c]:h.push(c))}else v={eventTime:v,lane:h,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(u=f=v,d=m):f=f.next=v,o|=h;if(c=c.next,c===null){if(c=a.shared.pending,c===null)break;h=c,c=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(f===null&&(d=m),a.baseState=d,a.firstBaseUpdate=u,a.lastBaseUpdate=f,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else l===null&&(a.shared.lanes=0);vr|=o,e.lanes=o,e.memoizedState=m}}function _d(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=n,typeof a!="function")throw Error(re(191,a));a.call(s)}}}var aa={},dn=Zn(aa),Ks=Zn(aa),Vs=Zn(aa);function cr(e){if(e===aa)throw Error(re(174));return e}function kc(e,t){switch(He(Vs,t),He(Ks,e),He(dn,aa),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Xo(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Xo(t,e)}qe(dn),He(dn,t)}function Jr(){qe(dn),qe(Ks),qe(Vs)}function lf(e){cr(Vs.current);var t=cr(dn.current),n=Xo(t,e.type);t!==n&&(He(Ks,e),He(dn,n))}function Cc(e){Ks.current===e&&(qe(dn),qe(Ks))}var Qe=Zn(0);function cl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var po=[];function Ec(){for(var e=0;e<po.length;e++)po[e]._workInProgressVersionPrimary=null;po.length=0}var _a=Pn.ReactCurrentDispatcher,ho=Pn.ReactCurrentBatchConfig,yr=0,Ye=null,ct=null,mt=null,dl=!1,Ls=!1,qs=0,Fh=0;function yt(){throw Error(re(321))}function Pc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!nn(e[n],t[n]))return!1;return!0}function Tc(e,t,n,s,a,l){if(yr=l,Ye=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_a.current=e===null||e.memoizedState===null?Gh:Wh,e=n(s,a),Ls){l=0;do{if(Ls=!1,qs=0,25<=l)throw Error(re(301));l+=1,mt=ct=null,t.updateQueue=null,_a.current=Hh,e=n(s,a)}while(Ls)}if(_a.current=ul,t=ct!==null&&ct.next!==null,yr=0,mt=ct=Ye=null,dl=!1,t)throw Error(re(300));return e}function Rc(){var e=qs!==0;return qs=0,e}function ln(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?Ye.memoizedState=mt=e:mt=mt.next=e,mt}function Kt(){if(ct===null){var e=Ye.alternate;e=e!==null?e.memoizedState:null}else e=ct.next;var t=mt===null?Ye.memoizedState:mt.next;if(t!==null)mt=t,ct=e;else{if(e===null)throw Error(re(310));ct=e,e={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},mt===null?Ye.memoizedState=mt=e:mt=mt.next=e}return mt}function Js(e,t){return typeof t=="function"?t(e):t}function xo(e){var t=Kt(),n=t.queue;if(n===null)throw Error(re(311));n.lastRenderedReducer=e;var s=ct,a=s.baseQueue,l=n.pending;if(l!==null){if(a!==null){var o=a.next;a.next=l.next,l.next=o}s.baseQueue=a=l,n.pending=null}if(a!==null){l=a.next,s=s.baseState;var c=o=null,d=null,u=l;do{var f=u.lane;if((yr&f)===f)d!==null&&(d=d.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:e(s,u.action);else{var m={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};d===null?(c=d=m,o=s):d=d.next=m,Ye.lanes|=f,vr|=f}u=u.next}while(u!==null&&u!==l);d===null?o=s:d.next=c,nn(s,t.memoizedState)||(Tt=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=d,n.lastRenderedState=s}if(e=n.interleaved,e!==null){a=e;do l=a.lane,Ye.lanes|=l,vr|=l,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function go(e){var t=Kt(),n=t.queue;if(n===null)throw Error(re(311));n.lastRenderedReducer=e;var s=n.dispatch,a=n.pending,l=t.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do l=e(l,o.action),o=o.next;while(o!==a);nn(l,t.memoizedState)||(Tt=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,s]}function of(){}function cf(e,t){var n=Ye,s=Kt(),a=t(),l=!nn(s.memoizedState,a);if(l&&(s.memoizedState=a,Tt=!0),s=s.queue,Lc(mf.bind(null,n,s,e),[e]),s.getSnapshot!==t||l||mt!==null&&mt.memoizedState.tag&1){if(n.flags|=2048,Qs(9,uf.bind(null,n,s,a,t),void 0,null),ft===null)throw Error(re(349));yr&30||df(n,t,a)}return a}function df(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ye.updateQueue,t===null?(t={lastEffect:null,stores:null},Ye.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function uf(e,t,n,s){t.value=n,t.getSnapshot=s,ff(t)&&pf(e)}function mf(e,t,n){return n(function(){ff(t)&&pf(e)})}function ff(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!nn(e,n)}catch{return!0}}function pf(e){var t=kn(e,1);t!==null&&tn(t,e,1,-1)}function Bd(e){var t=ln();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Js,lastRenderedState:e},t.queue=e,e=e.dispatch=zh.bind(null,Ye,e),[t.memoizedState,e]}function Qs(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=Ye.updateQueue,t===null?(t={lastEffect:null,stores:null},Ye.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function hf(){return Kt().memoizedState}function Ba(e,t,n,s){var a=ln();Ye.flags|=e,a.memoizedState=Qs(1|t,n,void 0,s===void 0?null:s)}function Pl(e,t,n,s){var a=Kt();s=s===void 0?null:s;var l=void 0;if(ct!==null){var o=ct.memoizedState;if(l=o.destroy,s!==null&&Pc(s,o.deps)){a.memoizedState=Qs(t,n,l,s);return}}Ye.flags|=e,a.memoizedState=Qs(1|t,n,l,s)}function zd(e,t){return Ba(8390656,8,e,t)}function Lc(e,t){return Pl(2048,8,e,t)}function xf(e,t){return Pl(4,2,e,t)}function gf(e,t){return Pl(4,4,e,t)}function yf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function vf(e,t,n){return n=n!=null?n.concat([e]):null,Pl(4,4,yf.bind(null,t,e),n)}function Ac(){}function bf(e,t){var n=Kt();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Pc(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function wf(e,t){var n=Kt();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Pc(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function jf(e,t,n){return yr&21?(nn(n,t)||(n=Cm(),Ye.lanes|=n,vr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Tt=!0),e.memoizedState=n)}function _h(e,t){var n=ze;ze=n!==0&&4>n?n:4,e(!0);var s=ho.transition;ho.transition={};try{e(!1),t()}finally{ze=n,ho.transition=s}}function Nf(){return Kt().memoizedState}function Bh(e,t,n){var s=Hn(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},Sf(e))kf(t,n);else if(n=sf(e,t,n,s),n!==null){var a=St();tn(n,e,s,a),Cf(n,t,s)}}function zh(e,t,n){var s=Hn(e),a={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(Sf(e))kf(t,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var o=t.lastRenderedState,c=l(o,n);if(a.hasEagerState=!0,a.eagerState=c,nn(c,o)){var d=t.interleaved;d===null?(a.next=a,Nc(t)):(a.next=d.next,d.next=a),t.interleaved=a;return}}catch{}finally{}n=sf(e,t,a,s),n!==null&&(a=St(),tn(n,e,s,a),Cf(n,t,s))}}function Sf(e){var t=e.alternate;return e===Ye||t!==null&&t===Ye}function kf(e,t){Ls=dl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Cf(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,cc(e,n)}}var ul={readContext:Ht,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},Gh={readContext:Ht,useCallback:function(e,t){return ln().memoizedState=[e,t===void 0?null:t],e},useContext:Ht,useEffect:zd,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ba(4194308,4,yf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ba(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ba(4,2,e,t)},useMemo:function(e,t){var n=ln();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=ln();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Bh.bind(null,Ye,e),[s.memoizedState,e]},useRef:function(e){var t=ln();return e={current:e},t.memoizedState=e},useState:Bd,useDebugValue:Ac,useDeferredValue:function(e){return ln().memoizedState=e},useTransition:function(){var e=Bd(!1),t=e[0];return e=_h.bind(null,e[1]),ln().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=Ye,a=ln();if(Je){if(n===void 0)throw Error(re(407));n=n()}else{if(n=t(),ft===null)throw Error(re(349));yr&30||df(s,t,n)}a.memoizedState=n;var l={value:n,getSnapshot:t};return a.queue=l,zd(mf.bind(null,s,l,e),[e]),s.flags|=2048,Qs(9,uf.bind(null,s,l,n,t),void 0,null),n},useId:function(){var e=ln(),t=ft.identifierPrefix;if(Je){var n=bn,s=vn;n=(s&~(1<<32-en(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=qs++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Fh++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Wh={readContext:Ht,useCallback:bf,useContext:Ht,useEffect:Lc,useImperativeHandle:vf,useInsertionEffect:xf,useLayoutEffect:gf,useMemo:wf,useReducer:xo,useRef:hf,useState:function(){return xo(Js)},useDebugValue:Ac,useDeferredValue:function(e){var t=Kt();return jf(t,ct.memoizedState,e)},useTransition:function(){var e=xo(Js)[0],t=Kt().memoizedState;return[e,t]},useMutableSource:of,useSyncExternalStore:cf,useId:Nf,unstable_isNewReconciler:!1},Hh={readContext:Ht,useCallback:bf,useContext:Ht,useEffect:Lc,useImperativeHandle:vf,useInsertionEffect:xf,useLayoutEffect:gf,useMemo:wf,useReducer:go,useRef:hf,useState:function(){return go(Js)},useDebugValue:Ac,useDeferredValue:function(e){var t=Kt();return ct===null?t.memoizedState=e:jf(t,ct.memoizedState,e)},useTransition:function(){var e=go(Js)[0],t=Kt().memoizedState;return[e,t]},useMutableSource:of,useSyncExternalStore:cf,useId:Nf,unstable_isNewReconciler:!1};function Yt(e,t){if(e&&e.defaultProps){t=Ze({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function bi(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:Ze({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Tl={isMounted:function(e){return(e=e._reactInternals)?jr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=St(),a=Hn(e),l=wn(s,a);l.payload=t,n!=null&&(l.callback=n),t=Gn(e,l,a),t!==null&&(tn(t,e,a,s),Fa(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=St(),a=Hn(e),l=wn(s,a);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=Gn(e,l,a),t!==null&&(tn(t,e,a,s),Fa(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=St(),s=Hn(e),a=wn(n,s);a.tag=2,t!=null&&(a.callback=t),t=Gn(e,a,s),t!==null&&(tn(t,e,s,n),Fa(t,e,s))}};function Gd(e,t,n,s,a,l,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,l,o):t.prototype&&t.prototype.isPureReactComponent?!zs(n,s)||!zs(a,l):!0}function Ef(e,t,n){var s=!1,a=Jn,l=t.contextType;return typeof l=="object"&&l!==null?l=Ht(l):(a=Lt(t)?xr:jt.current,s=t.contextTypes,l=(s=s!=null)?Kr(e,a):Jn),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Tl,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),t}function Wd(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&Tl.enqueueReplaceState(t,t.state,null)}function wi(e,t,n,s){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Sc(e);var l=t.contextType;typeof l=="object"&&l!==null?a.context=Ht(l):(l=Lt(t)?xr:jt.current,a.context=Kr(e,l)),a.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(bi(e,t,l,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Tl.enqueueReplaceState(a,a.state,null),il(e,n,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Qr(e,t){try{var n="",s=t;do n+=v0(s),s=s.return;while(s);var a=n}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:a,digest:null}}function yo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ji(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Kh=typeof WeakMap=="function"?WeakMap:Map;function Pf(e,t,n){n=wn(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){fl||(fl=!0,Ai=s),ji(e,t)},n}function Tf(e,t,n){n=wn(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;n.payload=function(){return s(a)},n.callback=function(){ji(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){ji(e,t),typeof s!="function"&&(Wn===null?Wn=new Set([this]):Wn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Hd(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new Kh;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(n)||(a.add(n),e=lx.bind(null,e,t,n),t.then(e,e))}function Kd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Vd(e,t,n,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=wn(-1,1),t.tag=2,Gn(n,t,1))),n.lanes|=1),e)}var Vh=Pn.ReactCurrentOwner,Tt=!1;function Nt(e,t,n,s){t.child=e===null?rf(t,null,n,s):qr(t,e.child,n,s)}function qd(e,t,n,s,a){n=n.render;var l=t.ref;return zr(t,a),s=Tc(e,t,n,s,l,a),n=Rc(),e!==null&&!Tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Cn(e,t,a)):(Je&&n&&gc(t),t.flags|=1,Nt(e,t,s,a),t.child)}function Jd(e,t,n,s,a){if(e===null){var l=n.type;return typeof l=="function"&&!_c(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,Rf(e,t,l,s,a)):(e=Ha(n.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&a)){var o=l.memoizedProps;if(n=n.compare,n=n!==null?n:zs,n(o,s)&&e.ref===t.ref)return Cn(e,t,a)}return t.flags|=1,e=Kn(l,s),e.ref=t.ref,e.return=t,t.child=e}function Rf(e,t,n,s,a){if(e!==null){var l=e.memoizedProps;if(zs(l,s)&&e.ref===t.ref)if(Tt=!1,t.pendingProps=s=l,(e.lanes&a)!==0)e.flags&131072&&(Tt=!0);else return t.lanes=e.lanes,Cn(e,t,a)}return Ni(e,t,n,s,a)}function Lf(e,t,n){var s=t.pendingProps,a=s.children,l=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(Dr,It),It|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,He(Dr,It),It|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=l!==null?l.baseLanes:n,He(Dr,It),It|=s}else l!==null?(s=l.baseLanes|n,t.memoizedState=null):s=n,He(Dr,It),It|=s;return Nt(e,t,a,n),t.child}function Af(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ni(e,t,n,s,a){var l=Lt(n)?xr:jt.current;return l=Kr(t,l),zr(t,a),n=Tc(e,t,n,s,l,a),s=Rc(),e!==null&&!Tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Cn(e,t,a)):(Je&&s&&gc(t),t.flags|=1,Nt(e,t,n,a),t.child)}function Qd(e,t,n,s,a){if(Lt(n)){var l=!0;rl(t)}else l=!1;if(zr(t,a),t.stateNode===null)za(e,t),Ef(t,n,s),wi(t,n,s,a),s=!0;else if(e===null){var o=t.stateNode,c=t.memoizedProps;o.props=c;var d=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ht(u):(u=Lt(n)?xr:jt.current,u=Kr(t,u));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==s||d!==u)&&Wd(t,o,s,u),An=!1;var h=t.memoizedState;o.state=h,il(t,s,o,a),d=t.memoizedState,c!==s||h!==d||Rt.current||An?(typeof f=="function"&&(bi(t,n,f,s),d=t.memoizedState),(c=An||Gd(t,n,c,s,h,d,u))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=d),o.props=s,o.state=d,o.context=u,s=c):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,af(e,t),c=t.memoizedProps,u=t.type===t.elementType?c:Yt(t.type,c),o.props=u,m=t.pendingProps,h=o.context,d=n.contextType,typeof d=="object"&&d!==null?d=Ht(d):(d=Lt(n)?xr:jt.current,d=Kr(t,d));var v=n.getDerivedStateFromProps;(f=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==m||h!==d)&&Wd(t,o,s,d),An=!1,h=t.memoizedState,o.state=h,il(t,s,o,a);var b=t.memoizedState;c!==m||h!==b||Rt.current||An?(typeof v=="function"&&(bi(t,n,v,s),b=t.memoizedState),(u=An||Gd(t,n,u,s,h,b,d)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,b,d),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,b,d)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=b),o.props=s,o.state=b,o.context=d,s=u):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),s=!1)}return Si(e,t,n,s,l,a)}function Si(e,t,n,s,a,l){Af(e,t);var o=(t.flags&128)!==0;if(!s&&!o)return a&&Ud(t,n,!1),Cn(e,t,l);s=t.stateNode,Vh.current=t;var c=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&o?(t.child=qr(t,e.child,null,l),t.child=qr(t,null,c,l)):Nt(e,t,c,l),t.memoizedState=s.state,a&&Ud(t,n,!0),t.child}function $f(e){var t=e.stateNode;t.pendingContext?Id(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Id(e,t.context,!1),kc(e,t.containerInfo)}function Yd(e,t,n,s,a){return Vr(),vc(a),t.flags|=256,Nt(e,t,n,s),t.child}var ki={dehydrated:null,treeContext:null,retryLane:0};function Ci(e){return{baseLanes:e,cachePool:null,transitions:null}}function If(e,t,n){var s=t.pendingProps,a=Qe.current,l=!1,o=(t.flags&128)!==0,c;if((c=o)||(c=e!==null&&e.memoizedState===null?!1:(a&2)!==0),c?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),He(Qe,a&1),e===null)return yi(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=s.children,e=s.fallback,l?(s=t.mode,l=t.child,o={mode:"hidden",children:o},!(s&1)&&l!==null?(l.childLanes=0,l.pendingProps=o):l=Al(o,s,0,null),e=fr(e,s,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Ci(n),t.memoizedState=ki,e):$c(t,o));if(a=e.memoizedState,a!==null&&(c=a.dehydrated,c!==null))return qh(e,t,o,s,c,a,n);if(l){l=s.fallback,o=t.mode,a=e.child,c=a.sibling;var d={mode:"hidden",children:s.children};return!(o&1)&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=d,t.deletions=null):(s=Kn(a,d),s.subtreeFlags=a.subtreeFlags&14680064),c!==null?l=Kn(c,l):(l=fr(l,o,n,null),l.flags|=2),l.return=t,s.return=t,s.sibling=l,t.child=s,s=l,l=t.child,o=e.child.memoizedState,o=o===null?Ci(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=e.childLanes&~n,t.memoizedState=ki,s}return l=e.child,e=l.sibling,s=Kn(l,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function $c(e,t){return t=Al({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Na(e,t,n,s){return s!==null&&vc(s),qr(t,e.child,null,n),e=$c(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function qh(e,t,n,s,a,l,o){if(n)return t.flags&256?(t.flags&=-257,s=yo(Error(re(422))),Na(e,t,o,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=s.fallback,a=t.mode,s=Al({mode:"visible",children:s.children},a,0,null),l=fr(l,a,o,null),l.flags|=2,s.return=t,l.return=t,s.sibling=l,t.child=s,t.mode&1&&qr(t,e.child,null,o),t.child.memoizedState=Ci(o),t.memoizedState=ki,l);if(!(t.mode&1))return Na(e,t,o,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var c=s.dgst;return s=c,l=Error(re(419)),s=yo(l,s,void 0),Na(e,t,o,s)}if(c=(o&e.childLanes)!==0,Tt||c){if(s=ft,s!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|o)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,kn(e,a),tn(s,e,a,-1))}return Fc(),s=yo(Error(re(421))),Na(e,t,o,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=ox.bind(null,e),a._reactRetry=t,null):(e=l.treeContext,Ut=zn(a.nextSibling),Mt=t,Je=!0,Xt=null,e!==null&&(Bt[zt++]=vn,Bt[zt++]=bn,Bt[zt++]=gr,vn=e.id,bn=e.overflow,gr=t),t=$c(t,s.children),t.flags|=4096,t)}function Zd(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),vi(e.return,t,n)}function vo(e,t,n,s,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:a}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=s,l.tail=n,l.tailMode=a)}function Uf(e,t,n){var s=t.pendingProps,a=s.revealOrder,l=s.tail;if(Nt(e,t,s.children,n),s=Qe.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Zd(e,n,t);else if(e.tag===19)Zd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(He(Qe,s),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&cl(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),vo(t,!1,a,n,l);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&cl(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}vo(t,!0,n,null,l);break;case"together":vo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function za(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Cn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),vr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(re(153));if(t.child!==null){for(e=t.child,n=Kn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Kn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Jh(e,t,n){switch(t.tag){case 3:$f(t),Vr();break;case 5:lf(t);break;case 1:Lt(t.type)&&rl(t);break;case 4:kc(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;He(ll,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(He(Qe,Qe.current&1),t.flags|=128,null):n&t.child.childLanes?If(e,t,n):(He(Qe,Qe.current&1),e=Cn(e,t,n),e!==null?e.sibling:null);He(Qe,Qe.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return Uf(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),He(Qe,Qe.current),s)break;return null;case 22:case 23:return t.lanes=0,Lf(e,t,n)}return Cn(e,t,n)}var Mf,Ei,Df,Of;Mf=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ei=function(){};Df=function(e,t,n,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,cr(dn.current);var l=null;switch(n){case"input":a=Jo(e,a),s=Jo(e,s),l=[];break;case"select":a=Ze({},a,{value:void 0}),s=Ze({},s,{value:void 0}),l=[];break;case"textarea":a=Zo(e,a),s=Zo(e,s),l=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=tl)}ei(n,s);var o;n=null;for(u in a)if(!s.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var c=a[u];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Us.hasOwnProperty(u)?l||(l=[]):(l=l||[]).push(u,null));for(u in s){var d=s[u];if(c=a!=null?a[u]:void 0,s.hasOwnProperty(u)&&d!==c&&(d!=null||c!=null))if(u==="style")if(c){for(o in c)!c.hasOwnProperty(o)||d&&d.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in d)d.hasOwnProperty(o)&&c[o]!==d[o]&&(n||(n={}),n[o]=d[o])}else n||(l||(l=[]),l.push(u,n)),n=d;else u==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,c=c?c.__html:void 0,d!=null&&c!==d&&(l=l||[]).push(u,d)):u==="children"?typeof d!="string"&&typeof d!="number"||(l=l||[]).push(u,""+d):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Us.hasOwnProperty(u)?(d!=null&&u==="onScroll"&&Ve("scroll",e),l||c===d||(l=[])):(l=l||[]).push(u,d))}n&&(l=l||[]).push("style",n);var u=l;(t.updateQueue=u)&&(t.flags|=4)}};Of=function(e,t,n,s){n!==s&&(t.flags|=4)};function ps(e,t){if(!Je)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function vt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function Qh(e,t,n){var s=t.pendingProps;switch(yc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(t),null;case 1:return Lt(t.type)&&nl(),vt(t),null;case 3:return s=t.stateNode,Jr(),qe(Rt),qe(jt),Ec(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(wa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Xt!==null&&(Ui(Xt),Xt=null))),Ei(e,t),vt(t),null;case 5:Cc(t);var a=cr(Vs.current);if(n=t.type,e!==null&&t.stateNode!=null)Df(e,t,n,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(re(166));return vt(t),null}if(e=cr(dn.current),wa(t)){s=t.stateNode,n=t.type;var l=t.memoizedProps;switch(s[on]=t,s[Hs]=l,e=(t.mode&1)!==0,n){case"dialog":Ve("cancel",s),Ve("close",s);break;case"iframe":case"object":case"embed":Ve("load",s);break;case"video":case"audio":for(a=0;a<Ns.length;a++)Ve(Ns[a],s);break;case"source":Ve("error",s);break;case"img":case"image":case"link":Ve("error",s),Ve("load",s);break;case"details":Ve("toggle",s);break;case"input":od(s,l),Ve("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!l.multiple},Ve("invalid",s);break;case"textarea":cd(s,l),Ve("invalid",s)}ei(n,l),a=null;for(var o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="children"?typeof c=="string"?s.textContent!==c&&(l.suppressHydrationWarning!==!0&&ba(s.textContent,c,e),a=["children",c]):typeof c=="number"&&s.textContent!==""+c&&(l.suppressHydrationWarning!==!0&&ba(s.textContent,c,e),a=["children",""+c]):Us.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Ve("scroll",s)}switch(n){case"input":ma(s),id(s,l,!0);break;case"textarea":ma(s),dd(s);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(s.onclick=tl)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=um(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=o.createElement(n,{is:s.is}):(e=o.createElement(n),n==="select"&&(o=e,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):e=o.createElementNS(e,n),e[on]=t,e[Hs]=s,Mf(e,t,!1,!1),t.stateNode=e;e:{switch(o=ti(n,s),n){case"dialog":Ve("cancel",e),Ve("close",e),a=s;break;case"iframe":case"object":case"embed":Ve("load",e),a=s;break;case"video":case"audio":for(a=0;a<Ns.length;a++)Ve(Ns[a],e);a=s;break;case"source":Ve("error",e),a=s;break;case"img":case"image":case"link":Ve("error",e),Ve("load",e),a=s;break;case"details":Ve("toggle",e),a=s;break;case"input":od(e,s),a=Jo(e,s),Ve("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=Ze({},s,{value:void 0}),Ve("invalid",e);break;case"textarea":cd(e,s),a=Zo(e,s),Ve("invalid",e);break;default:a=s}ei(n,a),c=a;for(l in c)if(c.hasOwnProperty(l)){var d=c[l];l==="style"?pm(e,d):l==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&mm(e,d)):l==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Ms(e,d):typeof d=="number"&&Ms(e,""+d):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Us.hasOwnProperty(l)?d!=null&&l==="onScroll"&&Ve("scroll",e):d!=null&&rc(e,l,d,o))}switch(n){case"input":ma(e),id(e,s,!1);break;case"textarea":ma(e),dd(e);break;case"option":s.value!=null&&e.setAttribute("value",""+qn(s.value));break;case"select":e.multiple=!!s.multiple,l=s.value,l!=null?Or(e,!!s.multiple,l,!1):s.defaultValue!=null&&Or(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=tl)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return vt(t),null;case 6:if(e&&t.stateNode!=null)Of(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(re(166));if(n=cr(Vs.current),cr(dn.current),wa(t)){if(s=t.stateNode,n=t.memoizedProps,s[on]=t,(l=s.nodeValue!==n)&&(e=Mt,e!==null))switch(e.tag){case 3:ba(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ba(s.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[on]=t,t.stateNode=s}return vt(t),null;case 13:if(qe(Qe),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Je&&Ut!==null&&t.mode&1&&!(t.flags&128))tf(),Vr(),t.flags|=98560,l=!1;else if(l=wa(t),s!==null&&s.dehydrated!==null){if(e===null){if(!l)throw Error(re(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(re(317));l[on]=t}else Vr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;vt(t),l=!1}else Xt!==null&&(Ui(Xt),Xt=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Qe.current&1?dt===0&&(dt=3):Fc())),t.updateQueue!==null&&(t.flags|=4),vt(t),null);case 4:return Jr(),Ei(e,t),e===null&&Gs(t.stateNode.containerInfo),vt(t),null;case 10:return jc(t.type._context),vt(t),null;case 17:return Lt(t.type)&&nl(),vt(t),null;case 19:if(qe(Qe),l=t.memoizedState,l===null)return vt(t),null;if(s=(t.flags&128)!==0,o=l.rendering,o===null)if(s)ps(l,!1);else{if(dt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=cl(e),o!==null){for(t.flags|=128,ps(l,!1),s=o.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)l=n,e=s,l.flags&=14680066,o=l.alternate,o===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,e=o.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return He(Qe,Qe.current&1|2),t.child}e=e.sibling}l.tail!==null&&rt()>Yr&&(t.flags|=128,s=!0,ps(l,!1),t.lanes=4194304)}else{if(!s)if(e=cl(o),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ps(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!Je)return vt(t),null}else 2*rt()-l.renderingStartTime>Yr&&n!==1073741824&&(t.flags|=128,s=!0,ps(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(n=l.last,n!==null?n.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=rt(),t.sibling=null,n=Qe.current,He(Qe,s?n&1|2:n&1),t):(vt(t),null);case 22:case 23:return Oc(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?It&1073741824&&(vt(t),t.subtreeFlags&6&&(t.flags|=8192)):vt(t),null;case 24:return null;case 25:return null}throw Error(re(156,t.tag))}function Yh(e,t){switch(yc(t),t.tag){case 1:return Lt(t.type)&&nl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Jr(),qe(Rt),qe(jt),Ec(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Cc(t),null;case 13:if(qe(Qe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(re(340));Vr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return qe(Qe),null;case 4:return Jr(),null;case 10:return jc(t.type._context),null;case 22:case 23:return Oc(),null;case 24:return null;default:return null}}var Sa=!1,bt=!1,Zh=typeof WeakSet=="function"?WeakSet:Set,fe=null;function Mr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){et(e,t,s)}else n.current=null}function Pi(e,t,n){try{n()}catch(s){et(e,t,s)}}var Xd=!1;function Xh(e,t){if(ui=Za,e=zm(),xc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var a=s.anchorOffset,l=s.focusNode;s=s.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var o=0,c=-1,d=-1,u=0,f=0,m=e,h=null;t:for(;;){for(var v;m!==n||a!==0&&m.nodeType!==3||(c=o+a),m!==l||s!==0&&m.nodeType!==3||(d=o+s),m.nodeType===3&&(o+=m.nodeValue.length),(v=m.firstChild)!==null;)h=m,m=v;for(;;){if(m===e)break t;if(h===n&&++u===a&&(c=o),h===l&&++f===s&&(d=o),(v=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=v}n=c===-1||d===-1?null:{start:c,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(mi={focusedElem:e,selectionRange:n},Za=!1,fe=t;fe!==null;)if(t=fe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,fe=e;else for(;fe!==null;){t=fe;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var y=b.memoizedProps,C=b.memoizedState,x=t.stateNode,p=x.getSnapshotBeforeUpdate(t.elementType===t.type?y:Yt(t.type,y),C);x.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(re(163))}}catch(j){et(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,fe=e;break}fe=t.return}return b=Xd,Xd=!1,b}function As(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&Pi(t,n,l)}a=a.next}while(a!==s)}}function Rl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function Ti(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Ff(e){var t=e.alternate;t!==null&&(e.alternate=null,Ff(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[on],delete t[Hs],delete t[hi],delete t[Uh],delete t[Mh])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function _f(e){return e.tag===5||e.tag===3||e.tag===4}function eu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||_f(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ri(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=tl));else if(s!==4&&(e=e.child,e!==null))for(Ri(e,t,n),e=e.sibling;e!==null;)Ri(e,t,n),e=e.sibling}function Li(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Li(e,t,n),e=e.sibling;e!==null;)Li(e,t,n),e=e.sibling}var pt=null,Zt=!1;function Rn(e,t,n){for(n=n.child;n!==null;)Bf(e,t,n),n=n.sibling}function Bf(e,t,n){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(jl,n)}catch{}switch(n.tag){case 5:bt||Mr(n,t);case 6:var s=pt,a=Zt;pt=null,Rn(e,t,n),pt=s,Zt=a,pt!==null&&(Zt?(e=pt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):pt.removeChild(n.stateNode));break;case 18:pt!==null&&(Zt?(e=pt,n=n.stateNode,e.nodeType===8?mo(e.parentNode,n):e.nodeType===1&&mo(e,n),_s(e)):mo(pt,n.stateNode));break;case 4:s=pt,a=Zt,pt=n.stateNode.containerInfo,Zt=!0,Rn(e,t,n),pt=s,Zt=a;break;case 0:case 11:case 14:case 15:if(!bt&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var l=a,o=l.destroy;l=l.tag,o!==void 0&&(l&2||l&4)&&Pi(n,t,o),a=a.next}while(a!==s)}Rn(e,t,n);break;case 1:if(!bt&&(Mr(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(c){et(n,t,c)}Rn(e,t,n);break;case 21:Rn(e,t,n);break;case 22:n.mode&1?(bt=(s=bt)||n.memoizedState!==null,Rn(e,t,n),bt=s):Rn(e,t,n);break;default:Rn(e,t,n)}}function tu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Zh),t.forEach(function(s){var a=ix.bind(null,e,s);n.has(s)||(n.add(s),s.then(a,a))})}}function Qt(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var a=n[s];try{var l=e,o=t,c=o;e:for(;c!==null;){switch(c.tag){case 5:pt=c.stateNode,Zt=!1;break e;case 3:pt=c.stateNode.containerInfo,Zt=!0;break e;case 4:pt=c.stateNode.containerInfo,Zt=!0;break e}c=c.return}if(pt===null)throw Error(re(160));Bf(l,o,a),pt=null,Zt=!1;var d=a.alternate;d!==null&&(d.return=null),a.return=null}catch(u){et(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)zf(t,e),t=t.sibling}function zf(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Qt(t,e),sn(e),s&4){try{As(3,e,e.return),Rl(3,e)}catch(y){et(e,e.return,y)}try{As(5,e,e.return)}catch(y){et(e,e.return,y)}}break;case 1:Qt(t,e),sn(e),s&512&&n!==null&&Mr(n,n.return);break;case 5:if(Qt(t,e),sn(e),s&512&&n!==null&&Mr(n,n.return),e.flags&32){var a=e.stateNode;try{Ms(a,"")}catch(y){et(e,e.return,y)}}if(s&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,o=n!==null?n.memoizedProps:l,c=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{c==="input"&&l.type==="radio"&&l.name!=null&&cm(a,l),ti(c,o);var u=ti(c,l);for(o=0;o<d.length;o+=2){var f=d[o],m=d[o+1];f==="style"?pm(a,m):f==="dangerouslySetInnerHTML"?mm(a,m):f==="children"?Ms(a,m):rc(a,f,m,u)}switch(c){case"input":Qo(a,l);break;case"textarea":dm(a,l);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var v=l.value;v!=null?Or(a,!!l.multiple,v,!1):h!==!!l.multiple&&(l.defaultValue!=null?Or(a,!!l.multiple,l.defaultValue,!0):Or(a,!!l.multiple,l.multiple?[]:"",!1))}a[Hs]=l}catch(y){et(e,e.return,y)}}break;case 6:if(Qt(t,e),sn(e),s&4){if(e.stateNode===null)throw Error(re(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(y){et(e,e.return,y)}}break;case 3:if(Qt(t,e),sn(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{_s(t.containerInfo)}catch(y){et(e,e.return,y)}break;case 4:Qt(t,e),sn(e);break;case 13:Qt(t,e),sn(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(Mc=rt())),s&4&&tu(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(bt=(u=bt)||f,Qt(t,e),bt=u):Qt(t,e),sn(e),s&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(fe=e,f=e.child;f!==null;){for(m=fe=f;fe!==null;){switch(h=fe,v=h.child,h.tag){case 0:case 11:case 14:case 15:As(4,h,h.return);break;case 1:Mr(h,h.return);var b=h.stateNode;if(typeof b.componentWillUnmount=="function"){s=h,n=h.return;try{t=s,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(y){et(s,n,y)}}break;case 5:Mr(h,h.return);break;case 22:if(h.memoizedState!==null){ru(m);continue}}v!==null?(v.return=h,fe=v):ru(m)}f=f.sibling}e:for(f=null,m=e;;){if(m.tag===5){if(f===null){f=m;try{a=m.stateNode,u?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(c=m.stateNode,d=m.memoizedProps.style,o=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=fm("display",o))}catch(y){et(e,e.return,y)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=u?"":m.memoizedProps}catch(y){et(e,e.return,y)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Qt(t,e),sn(e),s&4&&tu(e);break;case 21:break;default:Qt(t,e),sn(e)}}function sn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(_f(n)){var s=n;break e}n=n.return}throw Error(re(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(Ms(a,""),s.flags&=-33);var l=eu(e);Li(e,l,a);break;case 3:case 4:var o=s.stateNode.containerInfo,c=eu(e);Ri(e,c,o);break;default:throw Error(re(161))}}catch(d){et(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ex(e,t,n){fe=e,Gf(e)}function Gf(e,t,n){for(var s=(e.mode&1)!==0;fe!==null;){var a=fe,l=a.child;if(a.tag===22&&s){var o=a.memoizedState!==null||Sa;if(!o){var c=a.alternate,d=c!==null&&c.memoizedState!==null||bt;c=Sa;var u=bt;if(Sa=o,(bt=d)&&!u)for(fe=a;fe!==null;)o=fe,d=o.child,o.tag===22&&o.memoizedState!==null?su(a):d!==null?(d.return=o,fe=d):su(a);for(;l!==null;)fe=l,Gf(l),l=l.sibling;fe=a,Sa=c,bt=u}nu(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,fe=l):nu(e)}}function nu(e){for(;fe!==null;){var t=fe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:bt||Rl(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!bt)if(n===null)s.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Yt(t.type,n.memoizedProps);s.componentDidUpdate(a,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&_d(t,l,s);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}_d(t,o,n)}break;case 5:var c=t.stateNode;if(n===null&&t.flags&4){n=c;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&_s(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(re(163))}bt||t.flags&512&&Ti(t)}catch(h){et(t,t.return,h)}}if(t===e){fe=null;break}if(n=t.sibling,n!==null){n.return=t.return,fe=n;break}fe=t.return}}function ru(e){for(;fe!==null;){var t=fe;if(t===e){fe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,fe=n;break}fe=t.return}}function su(e){for(;fe!==null;){var t=fe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Rl(4,t)}catch(d){et(t,n,d)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(d){et(t,a,d)}}var l=t.return;try{Ti(t)}catch(d){et(t,l,d)}break;case 5:var o=t.return;try{Ti(t)}catch(d){et(t,o,d)}}}catch(d){et(t,t.return,d)}if(t===e){fe=null;break}var c=t.sibling;if(c!==null){c.return=t.return,fe=c;break}fe=t.return}}var tx=Math.ceil,ml=Pn.ReactCurrentDispatcher,Ic=Pn.ReactCurrentOwner,Wt=Pn.ReactCurrentBatchConfig,Re=0,ft=null,st=null,ht=0,It=0,Dr=Zn(0),dt=0,Ys=null,vr=0,Ll=0,Uc=0,$s=null,Pt=null,Mc=0,Yr=1/0,gn=null,fl=!1,Ai=null,Wn=null,ka=!1,Dn=null,pl=0,Is=0,$i=null,Ga=-1,Wa=0;function St(){return Re&6?rt():Ga!==-1?Ga:Ga=rt()}function Hn(e){return e.mode&1?Re&2&&ht!==0?ht&-ht:Oh.transition!==null?(Wa===0&&(Wa=Cm()),Wa):(e=ze,e!==0||(e=window.event,e=e===void 0?16:$m(e.type)),e):1}function tn(e,t,n,s){if(50<Is)throw Is=0,$i=null,Error(re(185));na(e,n,s),(!(Re&2)||e!==ft)&&(e===ft&&(!(Re&2)&&(Ll|=n),dt===4&&In(e,ht)),At(e,s),n===1&&Re===0&&!(t.mode&1)&&(Yr=rt()+500,El&&Xn()))}function At(e,t){var n=e.callbackNode;O0(e,t);var s=Ya(e,e===ft?ht:0);if(s===0)n!==null&&fd(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&fd(n),t===1)e.tag===0?Dh(au.bind(null,e)):Zm(au.bind(null,e)),$h(function(){!(Re&6)&&Xn()}),n=null;else{switch(Em(s)){case 1:n=ic;break;case 4:n=Sm;break;case 16:n=Qa;break;case 536870912:n=km;break;default:n=Qa}n=Yf(n,Wf.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Wf(e,t){if(Ga=-1,Wa=0,Re&6)throw Error(re(327));var n=e.callbackNode;if(Gr()&&e.callbackNode!==n)return null;var s=Ya(e,e===ft?ht:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=hl(e,s);else{t=s;var a=Re;Re|=2;var l=Kf();(ft!==e||ht!==t)&&(gn=null,Yr=rt()+500,mr(e,t));do try{sx();break}catch(c){Hf(e,c)}while(!0);wc(),ml.current=l,Re=a,st!==null?t=0:(ft=null,ht=0,t=dt)}if(t!==0){if(t===2&&(a=li(e),a!==0&&(s=a,t=Ii(e,a))),t===1)throw n=Ys,mr(e,0),In(e,s),At(e,rt()),n;if(t===6)In(e,s);else{if(a=e.current.alternate,!(s&30)&&!nx(a)&&(t=hl(e,s),t===2&&(l=li(e),l!==0&&(s=l,t=Ii(e,l))),t===1))throw n=Ys,mr(e,0),In(e,s),At(e,rt()),n;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(re(345));case 2:ar(e,Pt,gn);break;case 3:if(In(e,s),(s&130023424)===s&&(t=Mc+500-rt(),10<t)){if(Ya(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){St(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=pi(ar.bind(null,e,Pt,gn),t);break}ar(e,Pt,gn);break;case 4:if(In(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var o=31-en(s);l=1<<o,o=t[o],o>a&&(a=o),s&=~l}if(s=a,s=rt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*tx(s/1960))-s,10<s){e.timeoutHandle=pi(ar.bind(null,e,Pt,gn),s);break}ar(e,Pt,gn);break;case 5:ar(e,Pt,gn);break;default:throw Error(re(329))}}}return At(e,rt()),e.callbackNode===n?Wf.bind(null,e):null}function Ii(e,t){var n=$s;return e.current.memoizedState.isDehydrated&&(mr(e,t).flags|=256),e=hl(e,t),e!==2&&(t=Pt,Pt=n,t!==null&&Ui(t)),e}function Ui(e){Pt===null?Pt=e:Pt.push.apply(Pt,e)}function nx(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var a=n[s],l=a.getSnapshot;a=a.value;try{if(!nn(l(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function In(e,t){for(t&=~Uc,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-en(t),s=1<<n;e[n]=-1,t&=~s}}function au(e){if(Re&6)throw Error(re(327));Gr();var t=Ya(e,0);if(!(t&1))return At(e,rt()),null;var n=hl(e,t);if(e.tag!==0&&n===2){var s=li(e);s!==0&&(t=s,n=Ii(e,s))}if(n===1)throw n=Ys,mr(e,0),In(e,t),At(e,rt()),n;if(n===6)throw Error(re(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ar(e,Pt,gn),At(e,rt()),null}function Dc(e,t){var n=Re;Re|=1;try{return e(t)}finally{Re=n,Re===0&&(Yr=rt()+500,El&&Xn())}}function br(e){Dn!==null&&Dn.tag===0&&!(Re&6)&&Gr();var t=Re;Re|=1;var n=Wt.transition,s=ze;try{if(Wt.transition=null,ze=1,e)return e()}finally{ze=s,Wt.transition=n,Re=t,!(Re&6)&&Xn()}}function Oc(){It=Dr.current,qe(Dr)}function mr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Ah(n)),st!==null)for(n=st.return;n!==null;){var s=n;switch(yc(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&nl();break;case 3:Jr(),qe(Rt),qe(jt),Ec();break;case 5:Cc(s);break;case 4:Jr();break;case 13:qe(Qe);break;case 19:qe(Qe);break;case 10:jc(s.type._context);break;case 22:case 23:Oc()}n=n.return}if(ft=e,st=e=Kn(e.current,null),ht=It=t,dt=0,Ys=null,Uc=Ll=vr=0,Pt=$s=null,ir!==null){for(t=0;t<ir.length;t++)if(n=ir[t],s=n.interleaved,s!==null){n.interleaved=null;var a=s.next,l=n.pending;if(l!==null){var o=l.next;l.next=a,s.next=o}n.pending=s}ir=null}return e}function Hf(e,t){do{var n=st;try{if(wc(),_a.current=ul,dl){for(var s=Ye.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}dl=!1}if(yr=0,mt=ct=Ye=null,Ls=!1,qs=0,Ic.current=null,n===null||n.return===null){dt=1,Ys=t,st=null;break}e:{var l=e,o=n.return,c=n,d=t;if(t=ht,c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var u=d,f=c,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=Kd(o);if(v!==null){v.flags&=-257,Vd(v,o,c,l,t),v.mode&1&&Hd(l,u,t),t=v,d=u;var b=t.updateQueue;if(b===null){var y=new Set;y.add(d),t.updateQueue=y}else b.add(d);break e}else{if(!(t&1)){Hd(l,u,t),Fc();break e}d=Error(re(426))}}else if(Je&&c.mode&1){var C=Kd(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Vd(C,o,c,l,t),vc(Qr(d,c));break e}}l=d=Qr(d,c),dt!==4&&(dt=2),$s===null?$s=[l]:$s.push(l),l=o;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var x=Pf(l,d,t);Fd(l,x);break e;case 1:c=d;var p=l.type,g=l.stateNode;if(!(l.flags&128)&&(typeof p.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Wn===null||!Wn.has(g)))){l.flags|=65536,t&=-t,l.lanes|=t;var j=Tf(l,c,t);Fd(l,j);break e}}l=l.return}while(l!==null)}qf(n)}catch(w){t=w,st===n&&n!==null&&(st=n=n.return);continue}break}while(!0)}function Kf(){var e=ml.current;return ml.current=ul,e===null?ul:e}function Fc(){(dt===0||dt===3||dt===2)&&(dt=4),ft===null||!(vr&268435455)&&!(Ll&268435455)||In(ft,ht)}function hl(e,t){var n=Re;Re|=2;var s=Kf();(ft!==e||ht!==t)&&(gn=null,mr(e,t));do try{rx();break}catch(a){Hf(e,a)}while(!0);if(wc(),Re=n,ml.current=s,st!==null)throw Error(re(261));return ft=null,ht=0,dt}function rx(){for(;st!==null;)Vf(st)}function sx(){for(;st!==null&&!T0();)Vf(st)}function Vf(e){var t=Qf(e.alternate,e,It);e.memoizedProps=e.pendingProps,t===null?qf(e):st=t,Ic.current=null}function qf(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Yh(n,t),n!==null){n.flags&=32767,st=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{dt=6,st=null;return}}else if(n=Qh(n,t,It),n!==null){st=n;return}if(t=t.sibling,t!==null){st=t;return}st=t=e}while(t!==null);dt===0&&(dt=5)}function ar(e,t,n){var s=ze,a=Wt.transition;try{Wt.transition=null,ze=1,ax(e,t,n,s)}finally{Wt.transition=a,ze=s}return null}function ax(e,t,n,s){do Gr();while(Dn!==null);if(Re&6)throw Error(re(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(re(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(F0(e,l),e===ft&&(st=ft=null,ht=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ka||(ka=!0,Yf(Qa,function(){return Gr(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Wt.transition,Wt.transition=null;var o=ze;ze=1;var c=Re;Re|=4,Ic.current=null,Xh(e,n),zf(n,e),kh(mi),Za=!!ui,mi=ui=null,e.current=n,ex(n),R0(),Re=c,ze=o,Wt.transition=l}else e.current=n;if(ka&&(ka=!1,Dn=e,pl=a),l=e.pendingLanes,l===0&&(Wn=null),$0(n.stateNode),At(e,rt()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],s(a.value,{componentStack:a.stack,digest:a.digest});if(fl)throw fl=!1,e=Ai,Ai=null,e;return pl&1&&e.tag!==0&&Gr(),l=e.pendingLanes,l&1?e===$i?Is++:(Is=0,$i=e):Is=0,Xn(),null}function Gr(){if(Dn!==null){var e=Em(pl),t=Wt.transition,n=ze;try{if(Wt.transition=null,ze=16>e?16:e,Dn===null)var s=!1;else{if(e=Dn,Dn=null,pl=0,Re&6)throw Error(re(331));var a=Re;for(Re|=4,fe=e.current;fe!==null;){var l=fe,o=l.child;if(fe.flags&16){var c=l.deletions;if(c!==null){for(var d=0;d<c.length;d++){var u=c[d];for(fe=u;fe!==null;){var f=fe;switch(f.tag){case 0:case 11:case 15:As(8,f,l)}var m=f.child;if(m!==null)m.return=f,fe=m;else for(;fe!==null;){f=fe;var h=f.sibling,v=f.return;if(Ff(f),f===u){fe=null;break}if(h!==null){h.return=v,fe=h;break}fe=v}}}var b=l.alternate;if(b!==null){var y=b.child;if(y!==null){b.child=null;do{var C=y.sibling;y.sibling=null,y=C}while(y!==null)}}fe=l}}if(l.subtreeFlags&2064&&o!==null)o.return=l,fe=o;else e:for(;fe!==null;){if(l=fe,l.flags&2048)switch(l.tag){case 0:case 11:case 15:As(9,l,l.return)}var x=l.sibling;if(x!==null){x.return=l.return,fe=x;break e}fe=l.return}}var p=e.current;for(fe=p;fe!==null;){o=fe;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,fe=g;else e:for(o=p;fe!==null;){if(c=fe,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Rl(9,c)}}catch(w){et(c,c.return,w)}if(c===o){fe=null;break e}var j=c.sibling;if(j!==null){j.return=c.return,fe=j;break e}fe=c.return}}if(Re=a,Xn(),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(jl,e)}catch{}s=!0}return s}finally{ze=n,Wt.transition=t}}return!1}function lu(e,t,n){t=Qr(n,t),t=Pf(e,t,1),e=Gn(e,t,1),t=St(),e!==null&&(na(e,1,t),At(e,t))}function et(e,t,n){if(e.tag===3)lu(e,e,n);else for(;t!==null;){if(t.tag===3){lu(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Wn===null||!Wn.has(s))){e=Qr(n,e),e=Tf(t,e,1),t=Gn(t,e,1),e=St(),t!==null&&(na(t,1,e),At(t,e));break}}t=t.return}}function lx(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=St(),e.pingedLanes|=e.suspendedLanes&n,ft===e&&(ht&n)===n&&(dt===4||dt===3&&(ht&130023424)===ht&&500>rt()-Mc?mr(e,0):Uc|=n),At(e,t)}function Jf(e,t){t===0&&(e.mode&1?(t=ha,ha<<=1,!(ha&130023424)&&(ha=4194304)):t=1);var n=St();e=kn(e,t),e!==null&&(na(e,t,n),At(e,n))}function ox(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Jf(e,n)}function ix(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(re(314))}s!==null&&s.delete(t),Jf(e,n)}var Qf;Qf=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Rt.current)Tt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Tt=!1,Jh(e,t,n);Tt=!!(e.flags&131072)}else Tt=!1,Je&&t.flags&1048576&&Xm(t,al,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;za(e,t),e=t.pendingProps;var a=Kr(t,jt.current);zr(t,n),a=Tc(null,t,s,e,a,n);var l=Rc();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Lt(s)?(l=!0,rl(t)):l=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Sc(t),a.updater=Tl,t.stateNode=a,a._reactInternals=t,wi(t,s,e,n),t=Si(null,t,s,!0,l,n)):(t.tag=0,Je&&l&&gc(t),Nt(null,t,a,n),t=t.child),t;case 16:s=t.elementType;e:{switch(za(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=dx(s),e=Yt(s,e),a){case 0:t=Ni(null,t,s,e,n);break e;case 1:t=Qd(null,t,s,e,n);break e;case 11:t=qd(null,t,s,e,n);break e;case 14:t=Jd(null,t,s,Yt(s.type,e),n);break e}throw Error(re(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Yt(s,a),Ni(e,t,s,a,n);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Yt(s,a),Qd(e,t,s,a,n);case 3:e:{if($f(t),e===null)throw Error(re(387));s=t.pendingProps,l=t.memoizedState,a=l.element,af(e,t),il(t,s,null,n);var o=t.memoizedState;if(s=o.element,l.isDehydrated)if(l={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){a=Qr(Error(re(423)),t),t=Yd(e,t,s,n,a);break e}else if(s!==a){a=Qr(Error(re(424)),t),t=Yd(e,t,s,n,a);break e}else for(Ut=zn(t.stateNode.containerInfo.firstChild),Mt=t,Je=!0,Xt=null,n=rf(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Vr(),s===a){t=Cn(e,t,n);break e}Nt(e,t,s,n)}t=t.child}return t;case 5:return lf(t),e===null&&yi(t),s=t.type,a=t.pendingProps,l=e!==null?e.memoizedProps:null,o=a.children,fi(s,a)?o=null:l!==null&&fi(s,l)&&(t.flags|=32),Af(e,t),Nt(e,t,o,n),t.child;case 6:return e===null&&yi(t),null;case 13:return If(e,t,n);case 4:return kc(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=qr(t,null,s,n):Nt(e,t,s,n),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Yt(s,a),qd(e,t,s,a,n);case 7:return Nt(e,t,t.pendingProps,n),t.child;case 8:return Nt(e,t,t.pendingProps.children,n),t.child;case 12:return Nt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,l=t.memoizedProps,o=a.value,He(ll,s._currentValue),s._currentValue=o,l!==null)if(nn(l.value,o)){if(l.children===a.children&&!Rt.current){t=Cn(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var c=l.dependencies;if(c!==null){o=l.child;for(var d=c.firstContext;d!==null;){if(d.context===s){if(l.tag===1){d=wn(-1,n&-n),d.tag=2;var u=l.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?d.next=d:(d.next=f.next,f.next=d),u.pending=d}}l.lanes|=n,d=l.alternate,d!==null&&(d.lanes|=n),vi(l.return,n,t),c.lanes|=n;break}d=d.next}}else if(l.tag===10)o=l.type===t.type?null:l.child;else if(l.tag===18){if(o=l.return,o===null)throw Error(re(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),vi(o,n,t),o=l.sibling}else o=l.child;if(o!==null)o.return=l;else for(o=l;o!==null;){if(o===t){o=null;break}if(l=o.sibling,l!==null){l.return=o.return,o=l;break}o=o.return}l=o}Nt(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,zr(t,n),a=Ht(a),s=s(a),t.flags|=1,Nt(e,t,s,n),t.child;case 14:return s=t.type,a=Yt(s,t.pendingProps),a=Yt(s.type,a),Jd(e,t,s,a,n);case 15:return Rf(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Yt(s,a),za(e,t),t.tag=1,Lt(s)?(e=!0,rl(t)):e=!1,zr(t,n),Ef(t,s,a),wi(t,s,a,n),Si(null,t,s,!0,e,n);case 19:return Uf(e,t,n);case 22:return Lf(e,t,n)}throw Error(re(156,t.tag))};function Yf(e,t){return Nm(e,t)}function cx(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gt(e,t,n,s){return new cx(e,t,n,s)}function _c(e){return e=e.prototype,!(!e||!e.isReactComponent)}function dx(e){if(typeof e=="function")return _c(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ac)return 11;if(e===lc)return 14}return 2}function Kn(e,t){var n=e.alternate;return n===null?(n=Gt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ha(e,t,n,s,a,l){var o=2;if(s=e,typeof e=="function")_c(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Er:return fr(n.children,a,l,t);case sc:o=8,a|=8;break;case Ho:return e=Gt(12,n,t,a|2),e.elementType=Ho,e.lanes=l,e;case Ko:return e=Gt(13,n,t,a),e.elementType=Ko,e.lanes=l,e;case Vo:return e=Gt(19,n,t,a),e.elementType=Vo,e.lanes=l,e;case lm:return Al(n,a,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case sm:o=10;break e;case am:o=9;break e;case ac:o=11;break e;case lc:o=14;break e;case Ln:o=16,s=null;break e}throw Error(re(130,e==null?e:typeof e,""))}return t=Gt(o,n,t,a),t.elementType=e,t.type=s,t.lanes=l,t}function fr(e,t,n,s){return e=Gt(7,e,s,t),e.lanes=n,e}function Al(e,t,n,s){return e=Gt(22,e,s,t),e.elementType=lm,e.lanes=n,e.stateNode={isHidden:!1},e}function bo(e,t,n){return e=Gt(6,e,null,t),e.lanes=n,e}function wo(e,t,n){return t=Gt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ux(e,t,n,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=eo(0),this.expirationTimes=eo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=eo(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,s,a,l,o,c,d){return e=new ux(e,t,n,c,d),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Gt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sc(l),e}function mx(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cr,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function Zf(e){if(!e)return Jn;e=e._reactInternals;e:{if(jr(e)!==e||e.tag!==1)throw Error(re(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Lt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(re(171))}if(e.tag===1){var n=e.type;if(Lt(n))return Ym(e,n,t)}return t}function Xf(e,t,n,s,a,l,o,c,d){return e=Bc(n,s,!0,e,a,l,o,c,d),e.context=Zf(null),n=e.current,s=St(),a=Hn(n),l=wn(s,a),l.callback=t??null,Gn(n,l,a),e.current.lanes=a,na(e,a,s),At(e,s),e}function $l(e,t,n,s){var a=t.current,l=St(),o=Hn(a);return n=Zf(n),t.context===null?t.context=n:t.pendingContext=n,t=wn(l,o),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Gn(a,t,o),e!==null&&(tn(e,a,o,l),Fa(e,a,o)),o}function xl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ou(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function zc(e,t){ou(e,t),(e=e.alternate)&&ou(e,t)}function fx(){return null}var ep=typeof reportError=="function"?reportError:function(e){console.error(e)};function Gc(e){this._internalRoot=e}Il.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(re(409));$l(e,t,null,null)};Il.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;br(function(){$l(null,e,null,null)}),t[Sn]=null}};function Il(e){this._internalRoot=e}Il.prototype.unstable_scheduleHydration=function(e){if(e){var t=Rm();e={blockedOn:null,target:e,priority:t};for(var n=0;n<$n.length&&t!==0&&t<$n[n].priority;n++);$n.splice(n,0,e),n===0&&Am(e)}};function Wc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ul(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function iu(){}function px(e,t,n,s,a){if(a){if(typeof s=="function"){var l=s;s=function(){var u=xl(o);l.call(u)}}var o=Xf(t,s,e,0,null,!1,!1,"",iu);return e._reactRootContainer=o,e[Sn]=o.current,Gs(e.nodeType===8?e.parentNode:e),br(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var c=s;s=function(){var u=xl(d);c.call(u)}}var d=Bc(e,0,!1,null,null,!1,!1,"",iu);return e._reactRootContainer=d,e[Sn]=d.current,Gs(e.nodeType===8?e.parentNode:e),br(function(){$l(t,d,n,s)}),d}function Ml(e,t,n,s,a){var l=n._reactRootContainer;if(l){var o=l;if(typeof a=="function"){var c=a;a=function(){var d=xl(o);c.call(d)}}$l(t,o,e,a)}else o=px(n,t,e,a,s);return xl(o)}Pm=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=js(t.pendingLanes);n!==0&&(cc(t,n|1),At(t,rt()),!(Re&6)&&(Yr=rt()+500,Xn()))}break;case 13:br(function(){var s=kn(e,1);if(s!==null){var a=St();tn(s,e,1,a)}}),zc(e,1)}};dc=function(e){if(e.tag===13){var t=kn(e,134217728);if(t!==null){var n=St();tn(t,e,134217728,n)}zc(e,134217728)}};Tm=function(e){if(e.tag===13){var t=Hn(e),n=kn(e,t);if(n!==null){var s=St();tn(n,e,t,s)}zc(e,t)}};Rm=function(){return ze};Lm=function(e,t){var n=ze;try{return ze=e,t()}finally{ze=n}};ri=function(e,t,n){switch(t){case"input":if(Qo(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var a=Cl(s);if(!a)throw Error(re(90));im(s),Qo(s,a)}}}break;case"textarea":dm(e,n);break;case"select":t=n.value,t!=null&&Or(e,!!n.multiple,t,!1)}};gm=Dc;ym=br;var hx={usingClientEntryPoint:!1,Events:[sa,Lr,Cl,hm,xm,Dc]},hs={findFiberByHostInstance:or,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xx={bundleType:hs.bundleType,version:hs.version,rendererPackageName:hs.rendererPackageName,rendererConfig:hs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=wm(e),e===null?null:e.stateNode},findFiberByHostInstance:hs.findFiberByHostInstance||fx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ca=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ca.isDisabled&&Ca.supportsFiber)try{jl=Ca.inject(xx),cn=Ca}catch{}}Ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hx;Ot.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wc(t))throw Error(re(200));return mx(e,t,null,n)};Ot.createRoot=function(e,t){if(!Wc(e))throw Error(re(299));var n=!1,s="",a=ep;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Bc(e,1,!1,null,null,n,!1,s,a),e[Sn]=t.current,Gs(e.nodeType===8?e.parentNode:e),new Gc(t)};Ot.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(re(188)):(e=Object.keys(e).join(","),Error(re(268,e)));return e=wm(t),e=e===null?null:e.stateNode,e};Ot.flushSync=function(e){return br(e)};Ot.hydrate=function(e,t,n){if(!Ul(t))throw Error(re(200));return Ml(null,e,t,!0,n)};Ot.hydrateRoot=function(e,t,n){if(!Wc(e))throw Error(re(405));var s=n!=null&&n.hydratedSources||null,a=!1,l="",o=ep;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Xf(t,null,e,1,n??null,a,!1,l,o),e[Sn]=t.current,Gs(e),s)for(e=0;e<s.length;e++)n=s[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Il(t)};Ot.render=function(e,t,n){if(!Ul(t))throw Error(re(200));return Ml(null,e,t,!1,n)};Ot.unmountComponentAtNode=function(e){if(!Ul(e))throw Error(re(40));return e._reactRootContainer?(br(function(){Ml(null,null,e,!1,function(){e._reactRootContainer=null,e[Sn]=null})}),!0):!1};Ot.unstable_batchedUpdates=Dc;Ot.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!Ul(n))throw Error(re(200));if(e==null||e._reactInternals===void 0)throw Error(re(38));return Ml(e,t,n,!1,s)};Ot.version="18.3.1-next-f1338f8080-20240426";function tp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tp)}catch(e){console.error(e)}}tp(),em.exports=Ot;var np=em.exports,cu=np;Go.createRoot=cu.createRoot,Go.hydrateRoot=cu.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zs(){return Zs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Zs.apply(this,arguments)}var On;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(On||(On={}));const du="popstate";function gx(e){e===void 0&&(e={});function t(s,a){let{pathname:l,search:o,hash:c}=s.location;return Mi("",{pathname:l,search:o,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){return typeof a=="string"?a:gl(a)}return vx(t,n,null,e)}function tt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Hc(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function yx(){return Math.random().toString(36).substr(2,8)}function uu(e,t){return{usr:e.state,key:e.key,idx:t}}function Mi(e,t,n,s){return n===void 0&&(n=null),Zs({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?rs(t):t,{state:n,key:t&&t.key||s||yx()})}function gl(e){let{pathname:t="/",search:n="",hash:s=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function rs(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function vx(e,t,n,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:l=!1}=s,o=a.history,c=On.Pop,d=null,u=f();u==null&&(u=0,o.replaceState(Zs({},o.state,{idx:u}),""));function f(){return(o.state||{idx:null}).idx}function m(){c=On.Pop;let C=f(),x=C==null?null:C-u;u=C,d&&d({action:c,location:y.location,delta:x})}function h(C,x){c=On.Push;let p=Mi(y.location,C,x);u=f()+1;let g=uu(p,u),j=y.createHref(p);try{o.pushState(g,"",j)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;a.location.assign(j)}l&&d&&d({action:c,location:y.location,delta:1})}function v(C,x){c=On.Replace;let p=Mi(y.location,C,x);u=f();let g=uu(p,u),j=y.createHref(p);o.replaceState(g,"",j),l&&d&&d({action:c,location:y.location,delta:0})}function b(C){let x=a.location.origin!=="null"?a.location.origin:a.location.href,p=typeof C=="string"?C:gl(C);return p=p.replace(/ $/,"%20"),tt(x,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,x)}let y={get action(){return c},get location(){return e(a,o)},listen(C){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(du,m),d=C,()=>{a.removeEventListener(du,m),d=null}},createHref(C){return t(a,C)},createURL:b,encodeLocation(C){let x=b(C);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:v,go(C){return o.go(C)}};return y}var mu;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(mu||(mu={}));function bx(e,t,n){return n===void 0&&(n="/"),wx(e,t,n)}function wx(e,t,n,s){let a=typeof t=="string"?rs(t):t,l=Zr(a.pathname||"/",n);if(l==null)return null;let o=rp(e);jx(o);let c=null;for(let d=0;c==null&&d<o.length;++d){let u=$x(l);c=Lx(o[d],u)}return c}function rp(e,t,n,s){t===void 0&&(t=[]),n===void 0&&(n=[]),s===void 0&&(s="");let a=(l,o,c)=>{let d={relativePath:c===void 0?l.path||"":c,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};d.relativePath.startsWith("/")&&(tt(d.relativePath.startsWith(s),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(s.length));let u=Vn([s,d.relativePath]),f=n.concat(d);l.children&&l.children.length>0&&(tt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),rp(l.children,t,f,u)),!(l.path==null&&!l.index)&&t.push({path:u,score:Tx(u,l.index),routesMeta:f})};return e.forEach((l,o)=>{var c;if(l.path===""||!((c=l.path)!=null&&c.includes("?")))a(l,o);else for(let d of sp(l.path))a(l,o,d)}),t}function sp(e){let t=e.split("/");if(t.length===0)return[];let[n,...s]=t,a=n.endsWith("?"),l=n.replace(/\?$/,"");if(s.length===0)return a?[l,""]:[l];let o=sp(s.join("/")),c=[];return c.push(...o.map(d=>d===""?l:[l,d].join("/"))),a&&c.push(...o),c.map(d=>e.startsWith("/")&&d===""?"/":d)}function jx(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Rx(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const Nx=/^:[\w-]+$/,Sx=3,kx=2,Cx=1,Ex=10,Px=-2,fu=e=>e==="*";function Tx(e,t){let n=e.split("/"),s=n.length;return n.some(fu)&&(s+=Px),t&&(s+=kx),n.filter(a=>!fu(a)).reduce((a,l)=>a+(Nx.test(l)?Sx:l===""?Cx:Ex),s)}function Rx(e,t){return e.length===t.length&&e.slice(0,-1).every((s,a)=>s===t[a])?e[e.length-1]-t[t.length-1]:0}function Lx(e,t,n){let{routesMeta:s}=e,a={},l="/",o=[];for(let c=0;c<s.length;++c){let d=s[c],u=c===s.length-1,f=l==="/"?t:t.slice(l.length)||"/",m=Di({path:d.relativePath,caseSensitive:d.caseSensitive,end:u},f),h=d.route;if(!m)return null;Object.assign(a,m.params),o.push({params:a,pathname:Vn([l,m.pathname]),pathnameBase:Ox(Vn([l,m.pathnameBase])),route:h}),m.pathnameBase!=="/"&&(l=Vn([l,m.pathnameBase]))}return o}function Di(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=Ax(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let l=a[0],o=l.replace(/(.)\/+$/,"$1"),c=a.slice(1);return{params:s.reduce((u,f,m)=>{let{paramName:h,isOptional:v}=f;if(h==="*"){let y=c[m]||"";o=l.slice(0,l.length-y.length).replace(/(.)\/+$/,"$1")}const b=c[m];return v&&!b?u[h]=void 0:u[h]=(b||"").replace(/%2F/g,"/"),u},{}),pathname:l,pathnameBase:o,pattern:e}}function Ax(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Hc(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,d)=>(s.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function $x(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Hc(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Zr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&s!=="/"?null:e.slice(n)||"/"}const Ix=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ux=e=>Ix.test(e);function Mx(e,t){t===void 0&&(t="/");let{pathname:n,search:s="",hash:a=""}=typeof e=="string"?rs(e):e,l;if(n)if(Ux(n))l=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Hc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?l=pu(n.substring(1),"/"):l=pu(n,t)}else l=t;return{pathname:l,search:Fx(s),hash:_x(a)}}function pu(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function jo(e,t,n,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Dx(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function ap(e,t){let n=Dx(e);return t?n.map((s,a)=>a===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function lp(e,t,n,s){s===void 0&&(s=!1);let a;typeof e=="string"?a=rs(e):(a=Zs({},e),tt(!a.pathname||!a.pathname.includes("?"),jo("?","pathname","search",a)),tt(!a.pathname||!a.pathname.includes("#"),jo("#","pathname","hash",a)),tt(!a.search||!a.search.includes("#"),jo("#","search","hash",a)));let l=e===""||a.pathname==="",o=l?"/":a.pathname,c;if(o==null)c=n;else{let m=t.length-1;if(!s&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),m-=1;a.pathname=h.join("/")}c=m>=0?t[m]:"/"}let d=Mx(a,c),u=o&&o!=="/"&&o.endsWith("/"),f=(l||o===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(u||f)&&(d.pathname+="/"),d}const Vn=e=>e.join("/").replace(/\/\/+/g,"/"),Ox=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Fx=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,_x=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Bx(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const op=["post","put","patch","delete"];new Set(op);const zx=["get",...op];new Set(zx);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xs(){return Xs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Xs.apply(this,arguments)}const Dl=i.createContext(null),ip=i.createContext(null),er=i.createContext(null),Ol=i.createContext(null),tr=i.createContext({outlet:null,matches:[],isDataRoute:!1}),cp=i.createContext(null);function Gx(e,t){let{relative:n}=t===void 0?{}:t;la()||tt(!1);let{basename:s,navigator:a}=i.useContext(er),{hash:l,pathname:o,search:c}=Fl(e,{relative:n}),d=o;return s!=="/"&&(d=o==="/"?s:Vn([s,o])),a.createHref({pathname:d,search:c,hash:l})}function la(){return i.useContext(Ol)!=null}function ss(){return la()||tt(!1),i.useContext(Ol).location}function dp(e){i.useContext(er).static||i.useLayoutEffect(e)}function Vt(){let{isDataRoute:e}=i.useContext(tr);return e?ng():Wx()}function Wx(){la()||tt(!1);let e=i.useContext(Dl),{basename:t,future:n,navigator:s}=i.useContext(er),{matches:a}=i.useContext(tr),{pathname:l}=ss(),o=JSON.stringify(ap(a,n.v7_relativeSplatPath)),c=i.useRef(!1);return dp(()=>{c.current=!0}),i.useCallback(function(u,f){if(f===void 0&&(f={}),!c.current)return;if(typeof u=="number"){s.go(u);return}let m=lp(u,JSON.parse(o),l,f.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Vn([t,m.pathname])),(f.replace?s.replace:s.push)(m,f.state,f)},[t,s,o,l,e])}function as(){let{matches:e}=i.useContext(tr),t=e[e.length-1];return t?t.params:{}}function Fl(e,t){let{relative:n}=t===void 0?{}:t,{future:s}=i.useContext(er),{matches:a}=i.useContext(tr),{pathname:l}=ss(),o=JSON.stringify(ap(a,s.v7_relativeSplatPath));return i.useMemo(()=>lp(e,JSON.parse(o),l,n==="path"),[e,o,l,n])}function Hx(e,t){return Kx(e,t)}function Kx(e,t,n,s){la()||tt(!1);let{navigator:a}=i.useContext(er),{matches:l}=i.useContext(tr),o=l[l.length-1],c=o?o.params:{};o&&o.pathname;let d=o?o.pathnameBase:"/";o&&o.route;let u=ss(),f;if(t){var m;let C=typeof t=="string"?rs(t):t;d==="/"||(m=C.pathname)!=null&&m.startsWith(d)||tt(!1),f=C}else f=u;let h=f.pathname||"/",v=h;if(d!=="/"){let C=d.replace(/^\//,"").split("/");v="/"+h.replace(/^\//,"").split("/").slice(C.length).join("/")}let b=bx(e,{pathname:v}),y=Yx(b&&b.map(C=>Object.assign({},C,{params:Object.assign({},c,C.params),pathname:Vn([d,a.encodeLocation?a.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?d:Vn([d,a.encodeLocation?a.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),l,n,s);return t&&y?i.createElement(Ol.Provider,{value:{location:Xs({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:On.Pop}},y):y}function Vx(){let e=tg(),t=Bx(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:a},n):null,null)}const qx=i.createElement(Vx,null);class Jx extends i.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?i.createElement(tr.Provider,{value:this.props.routeContext},i.createElement(cp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Qx(e){let{routeContext:t,match:n,children:s}=e,a=i.useContext(Dl);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(tr.Provider,{value:t},s)}function Yx(e,t,n,s){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),s===void 0&&(s=null),e==null){var l;if(!n)return null;if(n.errors)e=n.matches;else if((l=s)!=null&&l.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,c=(a=n)==null?void 0:a.errors;if(c!=null){let f=o.findIndex(m=>m.route.id&&(c==null?void 0:c[m.route.id])!==void 0);f>=0||tt(!1),o=o.slice(0,Math.min(o.length,f+1))}let d=!1,u=-1;if(n&&s&&s.v7_partialHydration)for(let f=0;f<o.length;f++){let m=o[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(u=f),m.route.id){let{loaderData:h,errors:v}=n,b=m.route.loader&&h[m.route.id]===void 0&&(!v||v[m.route.id]===void 0);if(m.route.lazy||b){d=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((f,m,h)=>{let v,b=!1,y=null,C=null;n&&(v=c&&m.route.id?c[m.route.id]:void 0,y=m.route.errorElement||qx,d&&(u<0&&h===0?(rg("route-fallback"),b=!0,C=null):u===h&&(b=!0,C=m.route.hydrateFallbackElement||null)));let x=t.concat(o.slice(0,h+1)),p=()=>{let g;return v?g=y:b?g=C:m.route.Component?g=i.createElement(m.route.Component,null):m.route.element?g=m.route.element:g=f,i.createElement(Qx,{match:m,routeContext:{outlet:f,matches:x,isDataRoute:n!=null},children:g})};return n&&(m.route.ErrorBoundary||m.route.errorElement||h===0)?i.createElement(Jx,{location:n.location,revalidation:n.revalidation,component:y,error:v,children:p(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):p()},null)}var up=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(up||{}),mp=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(mp||{});function Zx(e){let t=i.useContext(Dl);return t||tt(!1),t}function Xx(e){let t=i.useContext(ip);return t||tt(!1),t}function eg(e){let t=i.useContext(tr);return t||tt(!1),t}function fp(e){let t=eg(),n=t.matches[t.matches.length-1];return n.route.id||tt(!1),n.route.id}function tg(){var e;let t=i.useContext(cp),n=Xx(),s=fp();return t!==void 0?t:(e=n.errors)==null?void 0:e[s]}function ng(){let{router:e}=Zx(up.UseNavigateStable),t=fp(mp.UseNavigateStable),n=i.useRef(!1);return dp(()=>{n.current=!0}),i.useCallback(function(a,l){l===void 0&&(l={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Xs({fromRouteId:t},l)))},[e,t])}const hu={};function rg(e,t,n){hu[e]||(hu[e]=!0)}function sg(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Oe(e){tt(!1)}function ag(e){let{basename:t="/",children:n=null,location:s,navigationType:a=On.Pop,navigator:l,static:o=!1,future:c}=e;la()&&tt(!1);let d=t.replace(/^\/*/,"/"),u=i.useMemo(()=>({basename:d,navigator:l,static:o,future:Xs({v7_relativeSplatPath:!1},c)}),[d,c,l,o]);typeof s=="string"&&(s=rs(s));let{pathname:f="/",search:m="",hash:h="",state:v=null,key:b="default"}=s,y=i.useMemo(()=>{let C=Zr(f,d);return C==null?null:{location:{pathname:C,search:m,hash:h,state:v,key:b},navigationType:a}},[d,f,m,h,v,b,a]);return y==null?null:i.createElement(er.Provider,{value:u},i.createElement(Ol.Provider,{children:n,value:y}))}function lg(e){let{children:t,location:n}=e;return Hx(Oi(t),n)}new Promise(()=>{});function Oi(e,t){t===void 0&&(t=[]);let n=[];return i.Children.forEach(e,(s,a)=>{if(!i.isValidElement(s))return;let l=[...t,a];if(s.type===i.Fragment){n.push.apply(n,Oi(s.props.children,l));return}s.type!==Oe&&tt(!1),!s.props.index||!s.props.children||tt(!1);let o={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=Oi(s.props.children,l)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yl(){return yl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},yl.apply(this,arguments)}function pp(e,t){if(e==null)return{};var n={},s=Object.keys(e),a,l;for(l=0;l<s.length;l++)a=s[l],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function og(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function ig(e,t){return e.button===0&&(!t||t==="_self")&&!og(e)}function Fi(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let s=e[n];return t.concat(Array.isArray(s)?s.map(a=>[n,a]):[[n,s]])},[]))}function cg(e,t){let n=Fi(e);return t&&t.forEach((s,a)=>{n.has(a)||t.getAll(a).forEach(l=>{n.append(a,l)})}),n}const dg=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ug=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],mg="6";try{window.__reactRouterVersion=mg}catch{}const fg=i.createContext({isTransitioning:!1}),pg="startTransition",xu=Wr[pg];function hg(e){let{basename:t,children:n,future:s,window:a}=e,l=i.useRef();l.current==null&&(l.current=gx({window:a,v5Compat:!0}));let o=l.current,[c,d]=i.useState({action:o.action,location:o.location}),{v7_startTransition:u}=s||{},f=i.useCallback(m=>{u&&xu?xu(()=>d(m)):d(m)},[d,u]);return i.useLayoutEffect(()=>o.listen(f),[o,f]),i.useEffect(()=>sg(s),[s]),i.createElement(ag,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:o,future:s})}const xg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ie=i.forwardRef(function(t,n){let{onClick:s,relative:a,reloadDocument:l,replace:o,state:c,target:d,to:u,preventScrollReset:f,viewTransition:m}=t,h=pp(t,dg),{basename:v}=i.useContext(er),b,y=!1;if(typeof u=="string"&&gg.test(u)&&(b=u,xg))try{let g=new URL(window.location.href),j=u.startsWith("//")?new URL(g.protocol+u):new URL(u),w=Zr(j.pathname,v);j.origin===g.origin&&w!=null?u=w+j.search+j.hash:y=!0}catch{}let C=Gx(u,{relative:a}),x=vg(u,{replace:o,state:c,target:d,preventScrollReset:f,relative:a,viewTransition:m});function p(g){s&&s(g),g.defaultPrevented||x(g)}return i.createElement("a",yl({},h,{href:b||C,onClick:y||l?s:p,ref:n,target:d}))}),Ea=i.forwardRef(function(t,n){let{"aria-current":s="page",caseSensitive:a=!1,className:l="",end:o=!1,style:c,to:d,viewTransition:u,children:f}=t,m=pp(t,ug),h=Fl(d,{relative:m.relative}),v=ss(),b=i.useContext(ip),{navigator:y,basename:C}=i.useContext(er),x=b!=null&&bg(h)&&u===!0,p=y.encodeLocation?y.encodeLocation(h).pathname:h.pathname,g=v.pathname,j=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;a||(g=g.toLowerCase(),j=j?j.toLowerCase():null,p=p.toLowerCase()),j&&C&&(j=Zr(j,C)||j);const w=p!=="/"&&p.endsWith("/")?p.length-1:p.length;let E=g===p||!o&&g.startsWith(p)&&g.charAt(w)==="/",$=j!=null&&(j===p||!o&&j.startsWith(p)&&j.charAt(p.length)==="/"),R={isActive:E,isPending:$,isTransitioning:x},H=E?s:void 0,O;typeof l=="function"?O=l(R):O=[l,E?"active":null,$?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let q=typeof c=="function"?c(R):c;return i.createElement(ie,yl({},m,{"aria-current":H,className:O,ref:n,style:q,to:d,viewTransition:u}),typeof f=="function"?f(R):f)});var _i;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(_i||(_i={}));var gu;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(gu||(gu={}));function yg(e){let t=i.useContext(Dl);return t||tt(!1),t}function vg(e,t){let{target:n,replace:s,state:a,preventScrollReset:l,relative:o,viewTransition:c}=t===void 0?{}:t,d=Vt(),u=ss(),f=Fl(e,{relative:o});return i.useCallback(m=>{if(ig(m,n)){m.preventDefault();let h=s!==void 0?s:gl(u)===gl(f);d(e,{replace:h,state:a,preventScrollReset:l,relative:o,viewTransition:c})}},[u,d,f,s,a,n,e,l,o,c])}function qt(e){let t=i.useRef(Fi(e)),n=i.useRef(!1),s=ss(),a=i.useMemo(()=>cg(s.search,n.current?null:t.current),[s.search]),l=Vt(),o=i.useCallback((c,d)=>{const u=Fi(typeof c=="function"?c(a):c);n.current=!0,l("?"+u,d)},[l,a]);return[a,o]}function bg(e,t){t===void 0&&(t={});let n=i.useContext(fg);n==null&&tt(!1);let{basename:s}=yg(_i.useViewTransitionState),a=Fl(e,{relative:t.relative});if(!n.isTransitioning)return!1;let l=Zr(n.currentLocation.pathname,s)||n.currentLocation.pathname,o=Zr(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Di(a.pathname,o)!=null||Di(a.pathname,l)!=null}const Bi="funkedupshift_impersonation",hp=i.createContext(void 0);function Pa(){try{const e=sessionStorage.getItem(Bi);if(!e)return null;const t=JSON.parse(e);if(t!=null&&t.type&&(t!=null&&t.id))return t}catch{}return null}function yu(e){try{e?sessionStorage.setItem(Bi,JSON.stringify(e)):sessionStorage.removeItem(Bi)}catch{}}const wg=({children:e})=>{const[t,n]=i.useState(Pa);i.useEffect(()=>{const c=Pa();n(c)},[]);const s=i.useCallback(c=>{n(c),yu(c)},[]),a=i.useCallback(()=>{n(null),yu(null)},[]),l=i.useCallback(()=>{const c=t??Pa();return c?c.type==="user"?{"X-Impersonate-User":c.id}:{"X-Impersonate-Role":c.id}:{}},[t]),o={impersonation:t??Pa(),setImpersonation:s,clearImpersonation:a,getImpersonationHeaders:l};return r.jsx(hp.Provider,{value:o,children:e})};function Kc(){const e=i.useContext(hp);return e||{impersonation:null,setImpersonation:()=>{},clearImpersonation:()=>{},getImpersonationHeaders:()=>({})}}const xp=i.createContext(void 0);function jg(e){return e.includes("admin")?"superadmin":e.includes("manager")?"manager":e.includes("user")?"user":"guest"}function vu(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Ng=({children:e})=>{const[t,n]=i.useState(null),[s,a]=i.useState(!0),{getImpersonationHeaders:l}=Kc(),o=Ae.useCallback(async()=>{const u=vu();if(!u){a(!1);return}try{const f=window;if(!f.auth||typeof f.auth.getAccessToken!="function"){a(!1);return}await new Promise(x=>{f.auth.isAuthenticated(p=>{if(!p){n(null),a(!1),x();return}x()})});const m=await new Promise(x=>{window.auth.getAccessToken(p=>x(p))});if(!m){n(null),a(!1);return}const h=await fetch(`${u}/me`,{headers:{Authorization:`Bearer ${m}`,...l()}});if(!h.ok){n(null),a(!1);return}const v=await h.json(),b=Array.isArray(v.groups)?v.groups.map(String):[],y=jg(b),C=Array.isArray(v.customGroups)?v.customGroups.map(String):[];n({userId:String(v.userId||""),email:String(v.email||""),groups:b,role:y,customGroups:C,impersonated:!!v.impersonated,impersonatedAs:v.impersonatedAs})}catch{n(null)}finally{a(!1)}},[l]);i.useEffect(()=>{o()},[o]);const c=Ae.useCallback(async()=>{vu()&&await o()},[o]),d=()=>{const u=window;u.auth&&typeof u.auth.signOut=="function"&&u.auth.signOut(),n(null)};return r.jsx(xp.Provider,{value:{user:t,isLoading:s,signOut:d,refreshAuth:c},children:e})};function $e(){const e=i.useContext(xp);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}function lt(e,t){if(t==="guest")return!0;if(!e)return!1;const n=["guest","user","manager","superadmin"];return n.indexOf(e.role)>=n.indexOf(t)}function _l(e){return e!=null&&e.userId?e.role==="superadmin"?!0:(e.customGroups??[]).includes("Squash"):!1}function Bl(e){return e!=null&&e.userId?e.role==="superadmin"?!0:e.role!=="manager"?!1:(e.customGroups??[]).includes("Squash"):!1}function Sg(e){return!0}function kg(e){return e!=null&&e.userId?e.role==="user"||e.role==="manager"||e.role==="superadmin":!1}function zl(e){return e!=null&&e.userId?e.role==="superadmin":!1}function ea(e){return e!=null&&e.userId?e.role==="superadmin"?!0:(e.customGroups??[]).includes("Memes"):!1}function gp(e){return!!(e!=null&&e.userId)}function Xr(e){return e!=null&&e.userId?e.role==="superadmin"?!0:e.role==="guest"?!1:(e.customGroups??[]).includes("Memes"):!1}function Vc(e){return e!=null&&e.userId?e.role==="superadmin"?!0:e.role!=="manager"?!1:(e.customGroups??[]).includes("Memes"):!1}function yp(){try{const e=sessionStorage.getItem("funkedupshift_impersonation");if(!e)return{};const t=JSON.parse(e);if((t==null?void 0:t.type)==="user"&&(t!=null&&t.id))return{"X-Impersonate-User":t.id};if((t==null?void 0:t.type)==="role"&&(t!=null&&t.id))return{"X-Impersonate-Role":t.id}}catch{}return{}}async function Y(e,t){var l;const n=window;if(!((l=n.auth)!=null&&l.getAccessToken))throw new Error("Not signed in");const s=await new Promise(o=>n.auth.getAccessToken(o)),a={...t==null?void 0:t.headers,Authorization:`Bearer ${s}`,...yp()};return fetch(e,{...t,headers:a})}async function at(e,t){var l;const n=window;if(!((l=n.auth)!=null&&l.getAccessToken))return fetch(e,t);const s=await new Promise(o=>n.auth.getAccessToken(o));if(!s)return fetch(e,t);const a={...t==null?void 0:t.headers,Authorization:`Bearer ${s}`,...yp()};return fetch(e,{...t,headers:a})}const vp=i.createContext(void 0);function Cg(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const bu="Funked Up Shift",Eg=({children:e})=>{const[t,n]=i.useState(null),[s,a]=i.useState(bu);return i.useEffect(()=>{const l=Cg();if(!l)return;let o=!1;const c=typeof window<"u"?window.location.hostname:"",d=c?`${l}/branding/logo?domain=${encodeURIComponent(c)}`:`${l}/branding/logo`;return(async()=>{try{const u=await at(d);if(!u.ok||!(u.headers.get("Content-Type")||"").includes("application/json"))return;const m=await u.json();if(o)return;m&&m.url&&n({url:String(m.url),alt:String(m.alt||bu)}),m!=null&&m.siteName&&typeof m.siteName=="string"&&m.siteName.trim()?a(m.siteName.trim()):m!=null&&m.alt&&typeof m.alt=="string"&&m.alt.trim()&&a(m.alt.trim())}catch{}})(),()=>{o=!0}},[]),r.jsx(vp.Provider,{value:{logo:t,siteName:s},children:e})};function qc(){const e=i.useContext(vp);if(!e)throw new Error("useBranding must be used within BrandingProvider");return e}function Pg({title:e,titleId:t,...n},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const Ge=i.forwardRef(Pg);function Tg({title:e,titleId:t,...n},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const Jc=i.forwardRef(Tg);function Rg({title:e,titleId:t,...n},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"}))}const Lg=i.forwardRef(Rg);function Ag({title:e,titleId:t,...n},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const $g=i.forwardRef(Ag);function Ig({title:e,titleId:t,...n},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.057 1.123-.08M15.75 18H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08M15.75 18.75v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5A3.375 3.375 0 0 0 6.375 7.5H5.25m11.9-3.664A2.251 2.251 0 0 0 15 2.25h-1.5a2.251 2.251 0 0 0-2.15 1.586m5.8 0c.065.21.1.433.1.664v.75h-6V4.5c0-.231.035-.454.1-.664M6.75 7.5H4.875c-.621 0-1.125.504-1.125 1.125v12c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V16.5a9 9 0 0 0-9-9Z"}))}const Qc=i.forwardRef(Ig);function Ug({title:e,titleId:t,...n},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const Mg=i.forwardRef(Ug);function Dg({title:e,titleId:t,...n},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Og=i.forwardRef(Dg);function Fg({title:e,titleId:t,...n},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"}))}const _g=i.forwardRef(Fg);function Bg({title:e,titleId:t,...n},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"}))}const Yc=i.forwardRef(Bg);function zg({title:e,titleId:t,...n},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))}const oa=i.forwardRef(zg);function Gg({title:e,titleId:t,...n},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const Wg=i.forwardRef(Gg);function Hg({title:e,titleId:t,...n},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))}const Kg=i.forwardRef(Hg);function Vg({title:e,titleId:t,...n},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const qg=i.forwardRef(Vg);function Jg({title:e,titleId:t,...n},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-3.044 0"}))}const Qg=i.forwardRef(Jg);function Yg({title:e,titleId:t,...n},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const Zg=i.forwardRef(Yg);function Xg({title:e,titleId:t,...n},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const ey=i.forwardRef(Xg);function ty({title:e,titleId:t,...n},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const Gl=i.forwardRef(ty),ny=[{id:"websites",label:"Websites",path:"/websites",section:"discover",minRole:"guest"},{id:"media",label:"Media",path:"/media",section:"discover",minRole:"guest"},{id:"internet-dashboard",label:"Internet Dashboard",path:"/internet-dashboard",section:"discover",minRole:"guest"},{id:"profile",label:"Profile",path:"/profile",section:"discover",minRole:"user",authOnly:!0},{id:"squash",label:"Squash",path:"/squash",section:"squash",minRole:"user",visibility:_l},{id:"squash-admin",label:"Squash Admin",path:"/squash-admin",section:"squash",minRole:"manager",visibility:Bl},{id:"memes",label:"Memes",path:"/memes",section:"memes",minRole:"guest"},{id:"meme-generator",label:"Meme Generator",path:"/memes/create",section:"memes",minRole:"user",visibility:Xr},{id:"financial",label:"Financial",path:"/financial",section:"financial",minRole:"guest",visibility:Sg},{id:"financial-admin",label:"Financial Admin",path:"/admin/financial",section:"financial",minRole:"superadmin",visibility:zl},{id:"highlights",label:"Highlights",path:"/recommended/highlights",section:"recommended",minRole:"guest"},{id:"highest-rated",label:"Highest Rated",path:"/recommended/highest-rated",section:"recommended",minRole:"guest"}],ry=[{id:"websites",label:"Websites",path:"/admin/websites",description:"Add and manage curated sites, categories, and logos.",icon:_g,minRole:"manager"},{id:"media",label:"Media",path:"/admin/media",description:"Upload and organize media files.",icon:Wg,minRole:"manager"},{id:"internet-dashboard",label:"Internet Dashboard",path:"/admin/internet-dashboard",description:"Manage domains shown on the internet dashboard.",icon:$g,minRole:"superadmin"},{id:"recommended",label:"Recommended",path:"/admin/recommended",description:"Curate highlights and highest-rated lists.",icon:Kg,minRole:"manager"},{id:"membership",label:"Membership",path:"/admin/membership",description:"Manage custom groups and member access.",icon:ey,minRole:"manager"},{id:"branding",label:"Branding",path:"/admin/branding",description:"Set global logo and branding assets.",icon:Mg,minRole:"superadmin"},{id:"financial",label:"Financial",path:"/admin/financial",description:"Manage default symbols and financial config.",icon:Og,minRole:"superadmin"},{id:"squash",label:"Squash",path:"/squash-admin",description:"Manage squash players and matches.",icon:Qg,minRole:"manager"}];function sy(e){return ny.filter(t=>t.authOnly?e!==null:t.visibility?t.visibility(e):lt(e,t.minRole))}function ay(e){return e?ry.filter(t=>lt(e,t.minRole)):[]}const ly=()=>{const{impersonation:e,clearImpersonation:t}=Kc(),{user:n,refreshAuth:s}=$e();if(!e)return null;const a=n!=null&&n.impersonated?n.impersonatedAs||n.email:e.label,l=()=>{t(),s()};return r.jsxs("div",{className:"sticky top-0 z-50 flex items-center justify-between gap-4 bg-amber-600 px-4 py-2 text-sm font-medium text-amber-950 shadow-md",children:[r.jsxs("span",{children:["Viewing as: ",r.jsx("strong",{children:a||e.id})]}),r.jsxs("button",{type:"button",onClick:l,className:"flex items-center gap-1 rounded-md px-2 py-1 font-semibold hover:bg-amber-500/50","aria-label":"Stop impersonating",children:[r.jsx(Gl,{className:"h-4 w-4"}),"Stop impersonating"]})]})};var oy=Object.defineProperty,iy=(e,t,n)=>t in e?oy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,No=(e,t,n)=>(iy(e,typeof t!="symbol"?t+"":t,n),n);let cy=class{constructor(){No(this,"current",this.detect()),No(this,"handoffState","pending"),No(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},jn=new cy,En=(e,t)=>{jn.isServer?i.useEffect(e,t):i.useLayoutEffect(e,t)};function Wl(e){let t=i.useRef(e);return En(()=>{t.current=e},[e]),t}let wt=function(e){let t=Wl(e);return Ae.useCallback((...n)=>t.current(...n),[t])};function Hl(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Kl(){let e=[],t={addEventListener(n,s,a,l){return n.addEventListener(s,a,l),t.add(()=>n.removeEventListener(s,a,l))},requestAnimationFrame(...n){let s=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(s))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let s=setTimeout(...n);return t.add(()=>clearTimeout(s))},microTask(...n){let s={current:!0};return Hl(()=>{s.current&&n[0]()}),t.add(()=>{s.current=!1})},style(n,s,a){let l=n.style.getPropertyValue(s);return Object.assign(n.style,{[s]:a}),this.add(()=>{Object.assign(n.style,{[s]:l})})},group(n){let s=Kl();return n(s),this.add(()=>s.dispose())},add(n){return e.push(n),()=>{let s=e.indexOf(n);if(s>=0)for(let a of e.splice(s,1))a()}},dispose(){for(let n of e.splice(0))n()}};return t}function dy(){let[e]=i.useState(Kl);return i.useEffect(()=>()=>e.dispose(),[e]),e}function uy(){let e=typeof document>"u";return"useSyncExternalStore"in Wr?(t=>t.useSyncExternalStore)(Wr)(()=>()=>{},()=>!1,()=>!e):!1}function Vl(){let e=uy(),[t,n]=i.useState(jn.isHandoffComplete);return t&&jn.isHandoffComplete===!1&&n(!1),i.useEffect(()=>{t!==!0&&n(!0)},[t]),i.useEffect(()=>jn.handoff(),[]),e?!1:t}var wu;let ls=(wu=Ae.useId)!=null?wu:function(){let e=Vl(),[t,n]=Ae.useState(e?()=>jn.nextId():null);return En(()=>{t===null&&n(jn.nextId())},[t]),t!=null?""+t:void 0};function Qn(e,t,...n){if(e in t){let a=t[e];return typeof a=="function"?a(...n):a}let s=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(a=>`"${a}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,Qn),s}function bp(e){return jn.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}let zi=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var lr=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(lr||{}),wp=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(wp||{}),my=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(my||{});function fy(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(zi)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var jp=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(jp||{});function py(e,t=0){var n;return e===((n=bp(e))==null?void 0:n.body)?!1:Qn(t,{0(){return e.matches(zi)},1(){let s=e;for(;s!==null;){if(s.matches(zi))return!0;s=s.parentElement}return!1}})}var hy=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(hy||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function pr(e){e==null||e.focus({preventScroll:!0})}let xy=["textarea","input"].join(",");function gy(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,xy))!=null?n:!1}function yy(e,t=n=>n){return e.slice().sort((n,s)=>{let a=t(n),l=t(s);if(a===null||l===null)return 0;let o=a.compareDocumentPosition(l);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Ka(e,t,{sorted:n=!0,relativeTo:s=null,skipElements:a=[]}={}){let l=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,o=Array.isArray(e)?n?yy(e):e:fy(e);a.length>0&&o.length>1&&(o=o.filter(v=>!a.includes(v))),s=s??l.activeElement;let c=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,o.indexOf(s))-1;if(t&4)return Math.max(0,o.indexOf(s))+1;if(t&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=t&32?{preventScroll:!0}:{},f=0,m=o.length,h;do{if(f>=m||f+m<=0)return 0;let v=d+f;if(t&16)v=(v+m)%m;else{if(v<0)return 3;if(v>=m)return 1}h=o[v],h==null||h.focus(u),f+=c}while(h!==l.activeElement);return t&6&&gy(h)&&h.select(),2}function Np(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function vy(){return/Android/gi.test(window.navigator.userAgent)}function by(){return Np()||vy()}function Ta(e,t,n){let s=Wl(t);i.useEffect(()=>{function a(l){s.current(l)}return document.addEventListener(e,a,n),()=>document.removeEventListener(e,a,n)},[e,n])}function Sp(e,t,n){let s=Wl(t);i.useEffect(()=>{function a(l){s.current(l)}return window.addEventListener(e,a,n),()=>window.removeEventListener(e,a,n)},[e,n])}function wy(e,t,n=!0){let s=i.useRef(!1);i.useEffect(()=>{requestAnimationFrame(()=>{s.current=n})},[n]);function a(o,c){if(!s.current||o.defaultPrevented)return;let d=c(o);if(d===null||!d.getRootNode().contains(d)||!d.isConnected)return;let u=function f(m){return typeof m=="function"?f(m()):Array.isArray(m)||m instanceof Set?m:[m]}(e);for(let f of u){if(f===null)continue;let m=f instanceof HTMLElement?f:f.current;if(m!=null&&m.contains(d)||o.composed&&o.composedPath().includes(m))return}return!py(d,jp.Loose)&&d.tabIndex!==-1&&o.preventDefault(),t(o,d)}let l=i.useRef(null);Ta("pointerdown",o=>{var c,d;s.current&&(l.current=((d=(c=o.composedPath)==null?void 0:c.call(o))==null?void 0:d[0])||o.target)},!0),Ta("mousedown",o=>{var c,d;s.current&&(l.current=((d=(c=o.composedPath)==null?void 0:c.call(o))==null?void 0:d[0])||o.target)},!0),Ta("click",o=>{by()||l.current&&(a(o,()=>l.current),l.current=null)},!0),Ta("touchend",o=>a(o,()=>o.target instanceof HTMLElement?o.target:null),!0),Sp("blur",o=>a(o,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function ia(...e){return i.useMemo(()=>bp(...e),[...e])}let kp=Symbol();function jy(e,t=!0){return Object.assign(e,{[kp]:t})}function Tn(...e){let t=i.useRef(e);i.useEffect(()=>{t.current=e},[e]);let n=wt(s=>{for(let a of t.current)a!=null&&(typeof a=="function"?a(s):a.current=s)});return e.every(s=>s==null||(s==null?void 0:s[kp]))?void 0:n}function Zc(e,t){let n=i.useRef([]),s=wt(e);i.useEffect(()=>{let a=[...n.current];for(let[l,o]of t.entries())if(n.current[l]!==o){let c=s(t,a);return n.current=t,c}},[s,...t])}function ju(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}var Gi=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Gi||{}),Ny=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Ny||{});function un({ourProps:e,theirProps:t,slot:n,defaultTag:s,features:a,visible:l=!0,name:o,mergeRefs:c}){c=c??Sy;let d=Cp(t,e);if(l)return Ra(d,n,s,o,c);let u=a??0;if(u&2){let{static:f=!1,...m}=d;if(f)return Ra(m,n,s,o,c)}if(u&1){let{unmount:f=!0,...m}=d;return Qn(f?0:1,{0(){return null},1(){return Ra({...m,hidden:!0,style:{display:"none"}},n,s,o,c)}})}return Ra(d,n,s,o,c)}function Ra(e,t={},n,s,a){let{as:l=n,children:o,refName:c="ref",...d}=So(e,["unmount","static"]),u=e.ref!==void 0?{[c]:e.ref}:{},f=typeof o=="function"?o(t):o;"className"in d&&d.className&&typeof d.className=="function"&&(d.className=d.className(t));let m={};if(t){let h=!1,v=[];for(let[b,y]of Object.entries(t))typeof y=="boolean"&&(h=!0),y===!0&&v.push(b);h&&(m["data-headlessui-state"]=v.join(" "))}if(l===i.Fragment&&Object.keys(Nu(d)).length>0){if(!i.isValidElement(f)||Array.isArray(f)&&f.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${s} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(d).map(y=>`  - ${y}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(y=>`  - ${y}`).join(`
`)].join(`
`));let h=f.props,v=typeof(h==null?void 0:h.className)=="function"?(...y)=>ju(h==null?void 0:h.className(...y),d.className):ju(h==null?void 0:h.className,d.className),b=v?{className:v}:{};return i.cloneElement(f,Object.assign({},Cp(f.props,Nu(So(d,["ref"]))),m,u,{ref:a(f.ref,u.ref)},b))}return i.createElement(l,Object.assign({},So(d,["ref"]),l!==i.Fragment&&u,l!==i.Fragment&&m),f)}function Sy(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function Cp(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let s of e)for(let a in s)a.startsWith("on")&&typeof s[a]=="function"?(n[a]!=null||(n[a]=[]),n[a].push(s[a])):t[a]=s[a];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(n).map(s=>[s,void 0])));for(let s in n)Object.assign(t,{[s](a,...l){let o=n[s];for(let c of o){if((a instanceof Event||(a==null?void 0:a.nativeEvent)instanceof Event)&&a.defaultPrevented)return;c(a,...l)}}});return t}function mn(e){var t;return Object.assign(i.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function Nu(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function So(e,t=[]){let n=Object.assign({},e);for(let s of t)s in n&&delete n[s];return n}let ky="div";var vl=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(vl||{});function Cy(e,t){var n;let{features:s=1,...a}=e,l={ref:t,"aria-hidden":(s&2)===2?!0:(n=a["aria-hidden"])!=null?n:void 0,hidden:(s&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(s&4)===4&&(s&2)!==2&&{display:"none"}}};return un({ourProps:l,theirProps:a,slot:{},defaultTag:ky,name:"Hidden"})}let Wi=mn(Cy),Ep=i.createContext(null);Ep.displayName="OpenClosedContext";var Ss=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Ss||{});function Ey(){return i.useContext(Ep)}function Py(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Un=[];Py(()=>{function e(t){t.target instanceof HTMLElement&&t.target!==document.body&&Un[0]!==t.target&&(Un.unshift(t.target),Un=Un.filter(n=>n!=null&&n.isConnected),Un.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function Ty(e){let t=e.parentElement,n=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(n=t),t=t.parentElement;let s=(t==null?void 0:t.getAttribute("disabled"))==="";return s&&Ry(n)?!1:s}function Ry(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}var Pp=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(Pp||{});function Tp(e,t,n,s){let a=Wl(n);i.useEffect(()=>{e=e??window;function l(o){a.current(o)}return e.addEventListener(t,l,s),()=>e.removeEventListener(t,l,s)},[e,t,s])}function Rp(){let e=i.useRef(!1);return En(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function Lp(e){let t=wt(e),n=i.useRef(!1);i.useEffect(()=>(n.current=!1,()=>{n.current=!0,Hl(()=>{n.current&&t()})}),[t])}var ks=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(ks||{});function Ly(){let e=i.useRef(0);return Sp("keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function Ap(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)n.current instanceof HTMLElement&&t.add(n.current);return t}let Ay="div";var $p=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))($p||{});function $y(e,t){let n=i.useRef(null),s=Tn(n,t),{initialFocus:a,containers:l,features:o=30,...c}=e;Vl()||(o=1);let d=ia(n);My({ownerDocument:d},!!(o&16));let u=Dy({ownerDocument:d,container:n,initialFocus:a},!!(o&2));Oy({ownerDocument:d,container:n,containers:l,previousActiveElement:u},!!(o&8));let f=Ly(),m=wt(y=>{let C=n.current;C&&(x=>x())(()=>{Qn(f.current,{[ks.Forwards]:()=>{Ka(C,lr.First,{skipElements:[y.relatedTarget]})},[ks.Backwards]:()=>{Ka(C,lr.Last,{skipElements:[y.relatedTarget]})}})})}),h=dy(),v=i.useRef(!1),b={ref:s,onKeyDown(y){y.key=="Tab"&&(v.current=!0,h.requestAnimationFrame(()=>{v.current=!1}))},onBlur(y){let C=Ap(l);n.current instanceof HTMLElement&&C.add(n.current);let x=y.relatedTarget;x instanceof HTMLElement&&x.dataset.headlessuiFocusGuard!=="true"&&(Ip(C,x)||(v.current?Ka(n.current,Qn(f.current,{[ks.Forwards]:()=>lr.Next,[ks.Backwards]:()=>lr.Previous})|lr.WrapAround,{relativeTo:y.target}):y.target instanceof HTMLElement&&pr(y.target)))}};return Ae.createElement(Ae.Fragment,null,!!(o&4)&&Ae.createElement(Wi,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:m,features:vl.Focusable}),un({ourProps:b,theirProps:c,defaultTag:Ay,name:"FocusTrap"}),!!(o&4)&&Ae.createElement(Wi,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:m,features:vl.Focusable}))}let Iy=mn($y),xs=Object.assign(Iy,{features:$p});function Uy(e=!0){let t=i.useRef(Un.slice());return Zc(([n],[s])=>{s===!0&&n===!1&&Hl(()=>{t.current.splice(0)}),s===!1&&n===!0&&(t.current=Un.slice())},[e,Un,t]),wt(()=>{var n;return(n=t.current.find(s=>s!=null&&s.isConnected))!=null?n:null})}function My({ownerDocument:e},t){let n=Uy(t);Zc(()=>{t||(e==null?void 0:e.activeElement)===(e==null?void 0:e.body)&&pr(n())},[t]),Lp(()=>{t&&pr(n())})}function Dy({ownerDocument:e,container:t,initialFocus:n},s){let a=i.useRef(null),l=Rp();return Zc(()=>{if(!s)return;let o=t.current;o&&Hl(()=>{if(!l.current)return;let c=e==null?void 0:e.activeElement;if(n!=null&&n.current){if((n==null?void 0:n.current)===c){a.current=c;return}}else if(o.contains(c)){a.current=c;return}n!=null&&n.current?pr(n.current):Ka(o,lr.First)===wp.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),a.current=e==null?void 0:e.activeElement})},[s]),a}function Oy({ownerDocument:e,container:t,containers:n,previousActiveElement:s},a){let l=Rp();Tp(e==null?void 0:e.defaultView,"focus",o=>{if(!a||!l.current)return;let c=Ap(n);t.current instanceof HTMLElement&&c.add(t.current);let d=s.current;if(!d)return;let u=o.target;u&&u instanceof HTMLElement?Ip(c,u)?(s.current=u,pr(u)):(o.preventDefault(),o.stopPropagation(),pr(d)):pr(s.current)},!0)}function Ip(e,t){for(let n of e)if(n.contains(t))return!0;return!1}let Up=i.createContext(!1);function Fy(){return i.useContext(Up)}function Hi(e){return Ae.createElement(Up.Provider,{value:e.force},e.children)}function _y(e){let t=Fy(),n=i.useContext(Mp),s=ia(e),[a,l]=i.useState(()=>{if(!t&&n!==null||jn.isServer)return null;let o=s==null?void 0:s.getElementById("headlessui-portal-root");if(o)return o;if(s===null)return null;let c=s.createElement("div");return c.setAttribute("id","headlessui-portal-root"),s.body.appendChild(c)});return i.useEffect(()=>{a!==null&&(s!=null&&s.body.contains(a)||s==null||s.body.appendChild(a))},[a,s]),i.useEffect(()=>{t||n!==null&&l(n.current)},[n,l,t]),a}let By=i.Fragment;function zy(e,t){let n=e,s=i.useRef(null),a=Tn(jy(f=>{s.current=f}),t),l=ia(s),o=_y(s),[c]=i.useState(()=>{var f;return jn.isServer?null:(f=l==null?void 0:l.createElement("div"))!=null?f:null}),d=i.useContext(Ki),u=Vl();return En(()=>{!o||!c||o.contains(c)||(c.setAttribute("data-headlessui-portal",""),o.appendChild(c))},[o,c]),En(()=>{if(c&&d)return d.register(c)},[d,c]),Lp(()=>{var f;!o||!c||(c instanceof Node&&o.contains(c)&&o.removeChild(c),o.childNodes.length<=0&&((f=o.parentElement)==null||f.removeChild(o)))}),u?!o||!c?null:np.createPortal(un({ourProps:{ref:a},theirProps:n,defaultTag:By,name:"Portal"}),c):null}let Gy=i.Fragment,Mp=i.createContext(null);function Wy(e,t){let{target:n,...s}=e,a={ref:Tn(t)};return Ae.createElement(Mp.Provider,{value:n},un({ourProps:a,theirProps:s,defaultTag:Gy,name:"Popover.Group"}))}let Ki=i.createContext(null);function Hy(){let e=i.useContext(Ki),t=i.useRef([]),n=wt(l=>(t.current.push(l),e&&e.register(l),()=>s(l))),s=wt(l=>{let o=t.current.indexOf(l);o!==-1&&t.current.splice(o,1),e&&e.unregister(l)}),a=i.useMemo(()=>({register:n,unregister:s,portals:t}),[n,s,t]);return[t,i.useMemo(()=>function({children:l}){return Ae.createElement(Ki.Provider,{value:a},l)},[a])]}let Ky=mn(zy),Vy=mn(Wy),Vi=Object.assign(Ky,{Group:Vy});function qy(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}const Jy=typeof Object.is=="function"?Object.is:qy,{useState:Qy,useEffect:Yy,useLayoutEffect:Zy,useDebugValue:Xy}=Wr;function ev(e,t,n){const s=t(),[{inst:a},l]=Qy({inst:{value:s,getSnapshot:t}});return Zy(()=>{a.value=s,a.getSnapshot=t,ko(a)&&l({inst:a})},[e,s,t]),Yy(()=>(ko(a)&&l({inst:a}),e(()=>{ko(a)&&l({inst:a})})),[e]),Xy(s),s}function ko(e){const t=e.getSnapshot,n=e.value;try{const s=t();return!Jy(n,s)}catch{return!0}}function tv(e,t,n){return t()}const nv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",rv=!nv,sv=rv?tv:ev,av="useSyncExternalStore"in Wr?(e=>e.useSyncExternalStore)(Wr):sv;function lv(e){return av(e.subscribe,e.getSnapshot,e.getSnapshot)}function ov(e,t){let n=e(),s=new Set;return{getSnapshot(){return n},subscribe(a){return s.add(a),()=>s.delete(a)},dispatch(a,...l){let o=t[a].call(n,...l);o&&(n=o,s.forEach(c=>c()))}}}function iv(){let e;return{before({doc:t}){var n;let s=t.documentElement;e=((n=t.defaultView)!=null?n:window).innerWidth-s.clientWidth},after({doc:t,d:n}){let s=t.documentElement,a=s.clientWidth-s.offsetWidth,l=e-a;n.style(s,"paddingRight",`${l}px`)}}}function cv(){return Np()?{before({doc:e,d:t,meta:n}){function s(a){return n.containers.flatMap(l=>l()).some(l=>l.contains(a))}t.microTask(()=>{var a;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let c=Kl();c.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>c.dispose()))}let l=(a=window.scrollY)!=null?a:window.pageYOffset,o=null;t.addEventListener(e,"click",c=>{if(c.target instanceof HTMLElement)try{let d=c.target.closest("a");if(!d)return;let{hash:u}=new URL(d.href),f=e.querySelector(u);f&&!s(f)&&(o=f)}catch{}},!0),t.addEventListener(e,"touchstart",c=>{if(c.target instanceof HTMLElement)if(s(c.target)){let d=c.target;for(;d.parentElement&&s(d.parentElement);)d=d.parentElement;t.style(d,"overscrollBehavior","contain")}else t.style(c.target,"touchAction","none")}),t.addEventListener(e,"touchmove",c=>{if(c.target instanceof HTMLElement)if(s(c.target)){let d=c.target;for(;d.parentElement&&d.dataset.headlessuiPortal!==""&&!(d.scrollHeight>d.clientHeight||d.scrollWidth>d.clientWidth);)d=d.parentElement;d.dataset.headlessuiPortal===""&&c.preventDefault()}else c.preventDefault()},{passive:!1}),t.add(()=>{var c;let d=(c=window.scrollY)!=null?c:window.pageYOffset;l!==d&&window.scrollTo(0,l),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function dv(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function uv(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let dr=ov(()=>new Map,{PUSH(e,t){var n;let s=(n=this.get(e))!=null?n:{doc:e,count:0,d:Kl(),meta:new Set};return s.count++,s.meta.add(t),this.set(e,s),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let s={doc:e,d:t,meta:uv(n)},a=[cv(),iv(),dv()];a.forEach(({before:l})=>l==null?void 0:l(s)),a.forEach(({after:l})=>l==null?void 0:l(s))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});dr.subscribe(()=>{let e=dr.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let s=t.get(n.doc)==="hidden",a=n.count!==0;(a&&!s||!a&&s)&&dr.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&dr.dispatch("TEARDOWN",n)}});function mv(e,t,n){let s=lv(dr),a=e?s.get(e):void 0,l=a?a.count>0:!1;return En(()=>{if(!(!e||!t))return dr.dispatch("PUSH",e,n),()=>dr.dispatch("POP",e,n)},[t,e]),l}let Co=new Map,gs=new Map;function Su(e,t=!0){En(()=>{var n;if(!t)return;let s=typeof e=="function"?e():e.current;if(!s)return;function a(){var o;if(!s)return;let c=(o=gs.get(s))!=null?o:1;if(c===1?gs.delete(s):gs.set(s,c-1),c!==1)return;let d=Co.get(s);d&&(d["aria-hidden"]===null?s.removeAttribute("aria-hidden"):s.setAttribute("aria-hidden",d["aria-hidden"]),s.inert=d.inert,Co.delete(s))}let l=(n=gs.get(s))!=null?n:0;return gs.set(s,l+1),l!==0||(Co.set(s,{"aria-hidden":s.getAttribute("aria-hidden"),inert:s.inert}),s.setAttribute("aria-hidden","true"),s.inert=!0),a},[e,t])}function fv({defaultContainers:e=[],portals:t,mainTreeNodeRef:n}={}){var s;let a=i.useRef((s=n==null?void 0:n.current)!=null?s:null),l=ia(a),o=wt(()=>{var c,d,u;let f=[];for(let m of e)m!==null&&(m instanceof HTMLElement?f.push(m):"current"in m&&m.current instanceof HTMLElement&&f.push(m.current));if(t!=null&&t.current)for(let m of t.current)f.push(m);for(let m of(c=l==null?void 0:l.querySelectorAll("html > *, body > *"))!=null?c:[])m!==document.body&&m!==document.head&&m instanceof HTMLElement&&m.id!=="headlessui-portal-root"&&(m.contains(a.current)||m.contains((u=(d=a.current)==null?void 0:d.getRootNode())==null?void 0:u.host)||f.some(h=>m.contains(h))||f.push(m));return f});return{resolveContainers:o,contains:wt(c=>o().some(d=>d.contains(c))),mainTreeNodeRef:a,MainTreeNode:i.useMemo(()=>function(){return n!=null?null:Ae.createElement(Wi,{features:vl.Hidden,ref:a})},[a,n])}}let Xc=i.createContext(()=>{});Xc.displayName="StackContext";var qi=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(qi||{});function pv(){return i.useContext(Xc)}function hv({children:e,onUpdate:t,type:n,element:s,enabled:a}){let l=pv(),o=wt((...c)=>{t==null||t(...c),l(...c)});return En(()=>{let c=a===void 0||a===!0;return c&&o(0,n,s),()=>{c&&o(1,n,s)}},[o,n,s,a]),Ae.createElement(Xc.Provider,{value:o},e)}let Dp=i.createContext(null);function Op(){let e=i.useContext(Dp);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Op),t}return e}function xv(){let[e,t]=i.useState([]);return[e.length>0?e.join(" "):void 0,i.useMemo(()=>function(n){let s=wt(l=>(t(o=>[...o,l]),()=>t(o=>{let c=o.slice(),d=c.indexOf(l);return d!==-1&&c.splice(d,1),c}))),a=i.useMemo(()=>({register:s,slot:n.slot,name:n.name,props:n.props}),[s,n.slot,n.name,n.props]);return Ae.createElement(Dp.Provider,{value:a},n.children)},[t])]}let gv="p";function yv(e,t){let n=ls(),{id:s=`headlessui-description-${n}`,...a}=e,l=Op(),o=Tn(t);En(()=>l.register(s),[s,l.register]);let c={ref:o,...l.props,id:s};return un({ourProps:c,theirProps:a,slot:l.slot||{},defaultTag:gv,name:l.name||"Description"})}let vv=mn(yv),bv=Object.assign(vv,{});var wv=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(wv||{}),jv=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(jv||{});let Nv={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},bl=i.createContext(null);bl.displayName="DialogContext";function ca(e){let t=i.useContext(bl);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ca),n}return t}function Sv(e,t,n=()=>[document.body]){mv(e,t,s=>{var a;return{containers:[...(a=s.containers)!=null?a:[],n]}})}function kv(e,t){return Qn(t.type,Nv,e,t)}let Cv="div",Ev=Gi.RenderStrategy|Gi.Static;function Pv(e,t){let n=ls(),{id:s=`headlessui-dialog-${n}`,open:a,onClose:l,initialFocus:o,role:c="dialog",__demoMode:d=!1,...u}=e,[f,m]=i.useState(0),h=i.useRef(!1);c=function(){return c==="dialog"||c==="alertdialog"?c:(h.current||(h.current=!0,console.warn(`Invalid role [${c}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let v=Ey();a===void 0&&v!==null&&(a=(v&Ss.Open)===Ss.Open);let b=i.useRef(null),y=Tn(b,t),C=ia(b),x=e.hasOwnProperty("open")||v!==null,p=e.hasOwnProperty("onClose");if(!x&&!p)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!x)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!p)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(typeof a!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${a}`);if(typeof l!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${l}`);let g=a?0:1,[j,w]=i.useReducer(kv,{titleId:null,descriptionId:null,panelRef:i.createRef()}),E=wt(()=>l(!1)),$=wt(N=>w({type:0,id:N})),R=Vl()?d?!1:g===0:!1,H=f>1,O=i.useContext(bl)!==null,[q,W]=Hy(),se={get current(){var N;return(N=j.panelRef.current)!=null?N:b.current}},{resolveContainers:J,mainTreeNodeRef:V,MainTreeNode:ce}=fv({portals:q,defaultContainers:[se]}),pe=H?"parent":"leaf",S=v!==null?(v&Ss.Closing)===Ss.Closing:!1,P=O||S?!1:R,I=i.useCallback(()=>{var N,T;return(T=Array.from((N=C==null?void 0:C.querySelectorAll("body > *"))!=null?N:[]).find(G=>G.id==="headlessui-portal-root"?!1:G.contains(V.current)&&G instanceof HTMLElement))!=null?T:null},[V]);Su(I,P);let B=H?!0:R,k=i.useCallback(()=>{var N,T;return(T=Array.from((N=C==null?void 0:C.querySelectorAll("[data-headlessui-portal]"))!=null?N:[]).find(G=>G.contains(V.current)&&G instanceof HTMLElement))!=null?T:null},[V]);Su(k,B),wy(J,N=>{N.preventDefault(),E()},!(!R||H));let ne=!(H||g!==0);Tp(C==null?void 0:C.defaultView,"keydown",N=>{ne&&(N.defaultPrevented||N.key===Pp.Escape&&(N.preventDefault(),N.stopPropagation(),E()))}),Sv(C,!(S||g!==0||O),J),i.useEffect(()=>{if(g!==0||!b.current)return;let N=new ResizeObserver(T=>{for(let G of T){let Q=G.target.getBoundingClientRect();Q.x===0&&Q.y===0&&Q.width===0&&Q.height===0&&E()}});return N.observe(b.current),()=>N.disconnect()},[g,b,E]);let[z,U]=xv(),M=i.useMemo(()=>[{dialogState:g,close:E,setTitleId:$},j],[g,j,E,$]),F=i.useMemo(()=>({open:g===0}),[g]),Z={ref:y,id:s,role:c,"aria-modal":g===0?!0:void 0,"aria-labelledby":j.titleId,"aria-describedby":z};return Ae.createElement(hv,{type:"Dialog",enabled:g===0,element:b,onUpdate:wt((N,T)=>{T==="Dialog"&&Qn(N,{[qi.Add]:()=>m(G=>G+1),[qi.Remove]:()=>m(G=>G-1)})})},Ae.createElement(Hi,{force:!0},Ae.createElement(Vi,null,Ae.createElement(bl.Provider,{value:M},Ae.createElement(Vi.Group,{target:b},Ae.createElement(Hi,{force:!1},Ae.createElement(U,{slot:F,name:"Dialog.Description"},Ae.createElement(xs,{initialFocus:o,containers:J,features:R?Qn(pe,{parent:xs.features.RestoreFocus,leaf:xs.features.All&~xs.features.FocusLock}):xs.features.None},Ae.createElement(W,null,un({ourProps:Z,theirProps:u,slot:F,defaultTag:Cv,features:Ev,visible:g===0,name:"Dialog"}))))))))),Ae.createElement(ce,null))}let Tv="div";function Rv(e,t){let n=ls(),{id:s=`headlessui-dialog-overlay-${n}`,...a}=e,[{dialogState:l,close:o}]=ca("Dialog.Overlay"),c=Tn(t),d=wt(f=>{if(f.target===f.currentTarget){if(Ty(f.currentTarget))return f.preventDefault();f.preventDefault(),f.stopPropagation(),o()}}),u=i.useMemo(()=>({open:l===0}),[l]);return un({ourProps:{ref:c,id:s,"aria-hidden":!0,onClick:d},theirProps:a,slot:u,defaultTag:Tv,name:"Dialog.Overlay"})}let Lv="div";function Av(e,t){let n=ls(),{id:s=`headlessui-dialog-backdrop-${n}`,...a}=e,[{dialogState:l},o]=ca("Dialog.Backdrop"),c=Tn(t);i.useEffect(()=>{if(o.panelRef.current===null)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")},[o.panelRef]);let d=i.useMemo(()=>({open:l===0}),[l]);return Ae.createElement(Hi,{force:!0},Ae.createElement(Vi,null,un({ourProps:{ref:c,id:s,"aria-hidden":!0},theirProps:a,slot:d,defaultTag:Lv,name:"Dialog.Backdrop"})))}let $v="div";function Iv(e,t){let n=ls(),{id:s=`headlessui-dialog-panel-${n}`,...a}=e,[{dialogState:l},o]=ca("Dialog.Panel"),c=Tn(t,o.panelRef),d=i.useMemo(()=>({open:l===0}),[l]),u=wt(f=>{f.stopPropagation()});return un({ourProps:{ref:c,id:s,onClick:u},theirProps:a,slot:d,defaultTag:$v,name:"Dialog.Panel"})}let Uv="h2";function Mv(e,t){let n=ls(),{id:s=`headlessui-dialog-title-${n}`,...a}=e,[{dialogState:l,setTitleId:o}]=ca("Dialog.Title"),c=Tn(t);i.useEffect(()=>(o(s),()=>o(null)),[s,o]);let d=i.useMemo(()=>({open:l===0}),[l]);return un({ourProps:{ref:c,id:s},theirProps:a,slot:d,defaultTag:Uv,name:"Dialog.Title"})}let Dv=mn(Pv),Ov=mn(Av),Fv=mn(Iv),_v=mn(Rv),Bv=mn(Mv),hr=Object.assign(Dv,{Backdrop:Ov,Panel:Fv,Overlay:_v,Title:Bv,Description:bv});function zv(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const ku=()=>{const{user:e,refreshAuth:t}=$e(),{impersonation:n,setImpersonation:s,clearImpersonation:a}=Kc(),[l,o]=i.useState(!1),[c,d]=i.useState([]),[u,f]=i.useState([]),[m,h]=i.useState(!1),[v,b]=i.useState(null),y=zv();if(i.useEffect(()=>{var w;if(!l||!y||!((w=window.auth)!=null&&w.getAccessToken))return;h(!0),b(null),(async()=>{try{const[E,$]=await Promise.all([Y(`${y}/admin/users?limit=100`),Y(`${y}/admin/roles`)]),R=E.ok?await E.json():null,H=$.ok?await $.json():null;if(!E.ok)throw new Error("Failed to load users");if(!$.ok)throw new Error("Failed to load roles");d((R==null?void 0:R.users)??[]),f((H==null?void 0:H.roles)??[])}catch(E){b((E==null?void 0:E.message)??"Failed to load")}finally{h(!1)}})()},[l,y]),(e==null?void 0:e.role)!=="superadmin")return null;const C=g=>{s({type:"user",id:g.username,label:g.email||g.username}),o(!1),t()},x=g=>{s({type:"role",id:g.name,label:g.name}),o(!1),t()},p=()=>{a(),o(!1),t()};return r.jsxs(r.Fragment,{children:[r.jsxs("button",{type:"button",onClick:()=>o(!0),className:"flex items-center gap-1.5 rounded-md px-2 py-1.5 text-xs font-medium text-amber-200 hover:bg-amber-500/20",title:"Impersonate user or role",children:[r.jsx(Zg,{className:"h-4 w-4"}),n?"Change":"Impersonate"]}),r.jsxs(hr,{open:l,onClose:()=>o(!1),className:"relative z-50",children:[r.jsx("div",{className:"fixed inset-0 bg-black/60","aria-hidden":"true"}),r.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:r.jsxs(hr.Panel,{className:"mx-auto max-h-[80vh] w-full max-w-md overflow-y-auto rounded-xl border border-slate-700 bg-slate-900 p-4 shadow-xl",children:[r.jsx(hr.Title,{className:"text-lg font-semibold text-slate-100",children:"User impersonation"}),r.jsx("p",{className:"mt-1 text-sm text-slate-400",children:"View the site as another user or a defined role."}),v&&r.jsx("div",{className:"mt-2 rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:v}),m?r.jsx("p",{className:"mt-4 text-sm text-slate-500",children:"Loading"}):r.jsxs("div",{className:"mt-4 space-y-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-slate-300",children:"Users"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Superadmins cannot be impersonated."}),r.jsxs("ul",{className:"mt-2 max-h-40 overflow-y-auto space-y-1",children:[c.map(g=>r.jsx("li",{children:r.jsx("button",{type:"button",onClick:()=>C(g),className:"w-full rounded-md px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:g.email||g.username})},g.username)),c.length===0&&r.jsx("li",{className:"px-3 py-2 text-sm text-slate-500",children:"No users"})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-slate-300",children:"Roles"}),r.jsxs("ul",{className:"mt-2 max-h-40 overflow-y-auto space-y-1",children:[u.map(g=>r.jsx("li",{children:r.jsx("button",{type:"button",onClick:()=>x(g),className:"w-full rounded-md px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:g.name})},g.name)),u.length===0&&r.jsx("li",{className:"px-3 py-2 text-sm text-slate-500",children:"No roles defined"})]})]}),n&&r.jsx("button",{type:"button",onClick:p,className:"rounded-md border border-slate-600 px-3 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Stop impersonating"})]})]})})]})]})},Eo=({isActive:e})=>`transition-colors duration-200 ${e?"text-primary-400 font-semibold":"text-slate-300 hover:text-white"}`;function Gv(){const{user:e,isLoading:t,signOut:n}=$e(),{logo:s,siteName:a}=qc(),[l,o]=i.useState(!1),[c,d]=i.useState(!1),u=sy(e),m=ay(e).length>0;i.useEffect(()=>{const b=()=>d(window.scrollY>20);return window.addEventListener("scroll",b),()=>window.removeEventListener("scroll",b)},[]);const h=()=>{n(),o(!1)},v=[...u.map(b=>({path:b.path,label:b.label})),...m?[{path:"/admin",label:"Admin"}]:[]];return r.jsxs("header",{className:`sticky top-0 z-50 transition-all duration-300 ${c?"bg-slate-950/95 backdrop-blur-sm shadow-lg":"bg-slate-950"}`,children:[r.jsx(ly,{}),r.jsxs("nav",{className:"container-max flex items-center justify-between py-3",children:[r.jsxs(ie,{to:"/",className:"flex items-center gap-2 shrink-0",children:[s?r.jsx("img",{src:s.url,alt:s.alt,className:"h-8 w-auto rounded-md border border-slate-700 object-contain"}):r.jsx("div",{className:"h-8 w-8 rounded-md border border-slate-700 bg-gradient-to-br from-brand-orange to-brand-navy"}),r.jsx("span",{className:"text-sm font-semibold tracking-[0.2em] uppercase text-slate-100 hidden sm:inline",children:a})]}),r.jsxs("div",{className:"hidden md:flex items-center gap-4 lg:gap-6 text-sm font-medium",children:[u.map(b=>r.jsx(Ea,{to:b.path,className:Eo,children:b.label},b.path)),m&&r.jsx(Ea,{to:"/admin",className:Eo,children:"Admin"}),e?r.jsxs("div",{className:"flex items-center gap-3 ml-2 pl-4 border-l border-slate-700",children:[r.jsx(ku,{}),r.jsx("span",{className:"text-xs text-slate-400 hidden lg:inline truncate max-w-[140px]",children:e.email}),r.jsx(Ea,{to:"/profile",className:Eo,children:"Profile"}),r.jsx("button",{onClick:h,className:"text-slate-400 hover:text-red-400 transition-colors text-xs font-medium",children:"Sign out"})]}):t?r.jsx("span",{className:"text-xs text-slate-500",children:"Loading..."}):r.jsx(ie,{to:"/auth",className:"btn-primary text-xs !px-4 !py-1.5 ml-2",children:"Sign in"})]}),r.jsxs("div",{className:"flex md:hidden items-center gap-2",children:[e&&r.jsx(ku,{}),r.jsx("button",{type:"button",onClick:()=>o(!l),className:"p-2 text-slate-300 hover:text-white rounded-md hover:bg-slate-800","aria-label":l?"Close menu":"Open menu",children:l?r.jsx(Gl,{className:"w-6 h-6"}):r.jsx(Jc,{className:"w-6 h-6"})})]})]}),l&&r.jsx("div",{className:"md:hidden border-t border-slate-800 bg-slate-950/95 backdrop-blur-sm",children:r.jsxs("div",{className:"container-max py-4 space-y-1",children:[v.map(b=>r.jsx(Ea,{to:b.path,className:({isActive:y})=>`block px-3 py-2.5 rounded-md transition-colors ${y?"bg-slate-800 text-primary-400 font-medium":"text-slate-300 hover:bg-slate-800 hover:text-white"}`,onClick:()=>o(!1),children:b.label},b.path)),e&&r.jsx("button",{onClick:h,className:"block w-full text-left px-3 py-2.5 rounded-md text-red-400 hover:bg-slate-800 transition-colors font-medium",children:"Sign out"}),!e&&!t&&r.jsx(ie,{to:"/auth",className:"block px-3 py-2.5 rounded-md text-primary-400 hover:bg-slate-800 font-medium",onClick:()=>o(!1),children:"Sign in"})]})})]})}function Wv(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Cu=160,Eu=16,Hv=2,Kv=()=>{const{user:e}=$e(),t=_l(e),n=ea(e),[s,a]=i.useState([]),[l,o]=i.useState(4),c=i.useRef(null),[d,u]=i.useState(null);i.useEffect(()=>{const h=Wv();if(!h)return;let v=!1;return fetch(`${h}/memes/cache?limit=20`).then(b=>b.ok?b.json():Promise.reject()).then(b=>{v||a(b.memes??[])}).catch(()=>{}),()=>{v=!0}},[]),i.useEffect(()=>{const h=c.current;if(!h)return;const v=()=>{const y=h.clientWidth;o(Math.max(1,Math.floor((y+Eu)/(Cu+Eu))))};v();const b=new ResizeObserver(()=>v());return b.observe(h),()=>b.disconnect()},[s.length]);const f=s.slice(0,l*Hv),m=async h=>{try{await navigator.clipboard.writeText(h),u(h),setTimeout(()=>u(null),2e3)}catch{}};return r.jsxs("div",{className:"space-y-8",children:[r.jsxs("section",{className:"relative overflow-hidden rounded-2xl border border-slate-800 bg-gradient-to-br from-brand-orange/20 via-brand-navy/10 to-brand-teal/20 px-6 py-10",children:[r.jsxs("div",{className:"max-w-xl space-y-4",children:[r.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-slate-200",children:"Shared internet intelligence"}),r.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold tracking-tight text-slate-50",children:"Discover, rate, and enrich the sites that matter."}),r.jsx("p",{className:"text-sm text-slate-100/80",children:"Funkedupshift is a living index of websites, media, and experiments  curated by admins, enriched by everyone."}),r.jsxs("div",{className:"flex flex-wrap gap-3 pt-2",children:[r.jsx(ie,{to:"/websites",className:"inline-flex items-center rounded-full border border-slate-500/60 px-4 py-2 text-sm font-semibold text-slate-100 hover:border-slate-300/80",children:"Browse websites"}),r.jsx(ie,{to:"/media",className:"inline-flex items-center rounded-full border border-slate-500/60 px-4 py-2 text-sm font-semibold text-slate-100 hover:border-slate-300/80",children:"Explore media"}),r.jsx(ie,{to:"/internet-dashboard",className:"inline-flex items-center rounded-full border border-slate-500/60 px-4 py-2 text-sm font-semibold text-slate-100 hover:border-slate-300/80",children:"Internet Dashboard"}),t&&r.jsx(ie,{to:"/squash",className:"inline-flex items-center rounded-full border border-slate-500/60 px-4 py-2 text-sm font-semibold text-slate-100 hover:border-slate-300/80",children:"Squash"}),n&&r.jsx(ie,{to:"/memes",className:"inline-flex items-center rounded-full border border-slate-500/60 px-4 py-2 text-sm font-semibold text-slate-100 hover:border-slate-300/80",children:"Memes"})]})]}),r.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 w-1/2 opacity-60",children:r.jsx("div",{className:"absolute -inset-24 bg-[radial-gradient(circle_at_top,_#f97316_0,_transparent_55%),radial-gradient(circle_at_bottom,_#06d6a0_0,_transparent_55%)]"})})]}),s.length>0&&r.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wider text-slate-400",children:"Latest Memes"}),r.jsx(ie,{to:"/memes",className:"text-xs text-brand-orange hover:text-orange-400",children:"View all "})]}),r.jsx("div",{ref:c,className:"grid gap-4",style:{gridTemplateColumns:`repeat(auto-fill, minmax(${Cu}px, 1fr))`},children:f.map(h=>{const v=h.thumbnailUrl||h.mediaUrl,b=h.title||"Untitled",y=d===h.mediaUrl;return r.jsxs("div",{className:"group rounded-lg border border-slate-800 bg-slate-900/60 overflow-hidden flex flex-col",children:[r.jsx(ie,{to:`/memes/${encodeURIComponent(h.PK)}`,className:"block aspect-square overflow-hidden bg-slate-900",children:v?r.jsx("img",{src:v,alt:b,className:"h-full w-full object-cover transition-transform group-hover:scale-105",onError:C=>{C.currentTarget.style.visibility="hidden"}}):r.jsx("div",{className:"flex h-full items-center justify-center text-2xl text-slate-600",children:""})}),r.jsxs("div",{className:"p-2 space-y-1 flex-1 flex flex-col",children:[r.jsx(ie,{to:`/memes/${encodeURIComponent(h.PK)}`,className:"block truncate text-xs font-medium text-slate-200 hover:text-brand-orange",children:b}),r.jsxs("div",{className:"flex items-center justify-between mt-auto pt-1",children:[typeof h.averageRating=="number"?r.jsxs("span",{className:"text-[11px] text-amber-300",children:[h.averageRating.toFixed(1),""]}):r.jsx("span",{}),h.mediaUrl&&r.jsx("button",{type:"button",onClick:()=>m(h.mediaUrl),className:"inline-flex items-center gap-1 text-[10px] text-slate-500 hover:text-slate-300 transition-colors",title:"Copy media URL",children:y?r.jsx("span",{className:"text-emerald-400",children:" Copied"}):r.jsxs(r.Fragment,{children:[r.jsx(Qc,{className:"h-3 w-3"}),r.jsx("span",{children:"Copy URL"})]})})]})]})]},h.PK)})})]}),r.jsxs("section",{className:"grid gap-4 sm:grid-cols-3",children:[r.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[r.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.22em] text-slate-500 mb-2",children:"Everyone"}),r.jsx("p",{className:"text-sm text-slate-200",children:"Browse all sites and media without signing in. Ratings and metadata are public by design."})]}),r.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[r.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.22em] text-slate-500 mb-2",children:"Users"}),r.jsx("p",{className:"text-sm text-slate-200",children:"Sign in to rate sites, add notes, and personalize your view of the internet."})]}),r.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[r.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.22em] text-slate-500 mb-2",children:"Admins"}),r.jsx("p",{className:"text-sm text-slate-200",children:"Curate the corpus, manage categories and groups, and control branding from a single admin surface."})]})]})]})};function Po(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const To=10,Vv=()=>{const{user:e}=$e(),[t,n]=qt(),[s,a]=i.useState([]),[l,o]=i.useState(()=>t.get("q")??""),[c,d]=i.useState(()=>{const S=t.get("categoryIds");return S?S.split(",").filter(Boolean):[]}),[u,f]=i.useState(()=>t.get("categoryMode")==="or"?"or":"and"),[m,h]=i.useState(!1),[v,b]=i.useState(""),[y,C]=i.useState("avgDesc"),[x,p]=i.useState(1),[g,j]=i.useState(!1),[w,E]=i.useState(null),$=!!e,R=i.useRef(null),[H,O]=i.useState([]);i.useEffect(()=>{const S=Po();if(!S)return;let P=!1;return at(`${S}/categories`).then(I=>I.ok?I.json():Promise.reject(new Error("Failed to load categories"))).then(I=>{if(P)return;const B=(I.categories??[]).map(k=>({id:k.PK||k.id||"",name:k.name||k.PK||""}));B.sort((k,K)=>(k.name||"").localeCompare(K.name||"")),O(B)}).catch(()=>{}),()=>{P=!0}},[]);const q=i.useMemo(()=>{if(u==="or"&&H.length>0)return H;const S=new Map;s.forEach(I=>(I.categories||[]).forEach(B=>{B.id&&!S.has(B.id)&&S.set(B.id,B)}));const P=[...H];return S.forEach(I=>{P.some(B=>B.id===I.id)||P.push(I)}),P.sort((I,B)=>(I.name||"").localeCompare(B.name||"")),P},[H,u,s]),W=i.useMemo(()=>q.filter(S=>!c.includes(S.id)&&(!v.trim()||(S.name||"").toLowerCase().includes(v.toLowerCase()))),[q,c,v]),se=l.trim().length>0||c.length>0;i.useEffect(()=>{if(se){const S=new URLSearchParams;l.trim()&&S.set("q",l.trim()),c.length&&(S.set("categoryIds",c.join(",")),S.set("categoryMode",u)),n(S,{replace:!0})}else n({},{replace:!0})},[se,l,c,u,n]),i.useEffect(()=>{if(!se){a([]),p(1),j(!1),E(null);return}const S=Po();if(!S){E("API URL not set. Deploy via CI or set window.API_BASE_URL in config.js.");return}let P=!1;async function I(){j(!0),E(null);try{const B=new URLSearchParams;B.set("limit","100"),l.trim()&&B.set("q",l.trim()),c.length>0&&(B.set("categoryIds",c.join(",")),B.set("categoryMode",u));const k=await at(`${S}/sites?${B.toString()}`);if(!k.ok){const ne=await k.text();throw new Error(`HTTP ${k.status}: ${ne}`)}const K=await k.json();if(P)return;a(K.sites??[]),p(1)}catch(B){P||E((B==null?void 0:B.message)??"Failed to load sites.")}finally{P||j(!1)}}return I(),()=>{P=!0}},[se,l,c,u]),i.useEffect(()=>{function S(P){R.current&&!R.current.contains(P.target)&&h(!1)}if(m)return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[m]);const J=i.useMemo(()=>{const S=[...s];return S.sort((P,I)=>{const B=(P.title||P.url||P.PK||"").toLowerCase(),k=(I.title||I.url||I.PK||"").toLowerCase(),K=typeof P.averageRating=="number"?P.averageRating:0,ne=typeof I.averageRating=="number"?I.averageRating:0;return y==="avgDesc"?ne!==K?ne-K:B.localeCompare(k):y==="avgAsc"?K!==ne?K-ne:B.localeCompare(k):y==="alphaAsc"?B.localeCompare(k):y==="alphaDesc"?k.localeCompare(B):0}),S},[s,y]),V=Math.max(1,Math.ceil(J.length/To)),ce=J.slice((x-1)*To,x*To),pe=async(S,P)=>{const I=Po();if(!I)return;const B=window;if(!B.auth||typeof B.auth.getAccessToken!="function")return;const k=await new Promise(K=>{B.auth.getAccessToken(ne=>K(ne))});k&&await at(`${I}/stars`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${k}`},body:JSON.stringify({siteId:S,rating:P})}).catch(()=>{})};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("header",{className:"space-y-2",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Websites"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Browse curated sites, see ratings, and jump straight into the interesting corners of the internet."})]}),r.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-4","aria-label":"Search and filter",children:[r.jsxs("form",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",onSubmit:S=>{S.preventDefault(),o(l.trim())},children:[r.jsx("input",{type:"text",value:l,onChange:S=>o(S.target.value),placeholder:"Search sites (title, URL, description)",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),r.jsx("button",{type:"submit",className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500",children:"Search"})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-4 sm:gap-6",children:[r.jsxs("div",{ref:R,className:"relative flex-shrink-0 min-w-0 max-w-sm",children:[r.jsx("label",{htmlFor:"website-category-filter",className:"block text-xs font-medium text-slate-400 mb-1",children:"Categories (filter by)"}),r.jsx("input",{id:"website-category-filter",type:"text",value:v,onChange:S=>b(S.target.value),onFocus:()=>h(!0),placeholder:"Search and select categories",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",autoComplete:"off"}),m&&r.jsx("div",{className:"absolute left-0 top-full z-10 mt-1 w-full max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",role:"listbox","aria-label":"Category options",children:W.length>0?W.map(S=>r.jsx("button",{type:"button",role:"option",onClick:()=>{d(P=>P.includes(S.id)?P:[...P,S.id]),b("")},className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:S.name},S.id)):r.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:q.length===0?"No categories yet.":"No matches or all selected."})}),r.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:c.map(S=>{const P=q.find(I=>I.id===S);return r.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(P==null?void 0:P.name)??S,r.jsx("button",{type:"button",onClick:()=>d(I=>I.filter(B=>B!==S)),className:"hover:text-red-400","aria-label":"Remove category filter",children:""})]},S)})}),c.length>0&&r.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[r.jsx("span",{className:"text-xs text-slate-500",children:"Match:"}),r.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[r.jsx("button",{type:"button",onClick:()=>f("and"),className:`rounded px-2 py-0.5 text-xs font-medium ${u==="and"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"AND"}),r.jsx("button",{type:"button",onClick:()=>f("or"),className:`rounded px-2 py-0.5 text-xs font-medium ${u==="or"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"OR"})]})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-3 items-center text-xs text-slate-400",children:[r.jsx("span",{className:"font-medium text-slate-200",children:"Sort:"}),r.jsxs("select",{value:y,onChange:S=>{C(S.target.value),p(1)},className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",children:[r.jsx("option",{value:"avgDesc",children:"Avg stars (high first)"}),r.jsx("option",{value:"avgAsc",children:"Avg stars (low first)"}),r.jsx("option",{value:"alphaAsc",children:"Title AZ"}),r.jsx("option",{value:"alphaDesc",children:"Title ZA"})]}),r.jsx("span",{className:"text-slate-500",children:se?J.length===0?"No sites found.":`${J.length} sites`:""})]})]})]}),w&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:w}),se?g?r.jsx("div",{className:"text-sm text-slate-400",children:"Loading sites"}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"rounded-md border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm text-slate-400",children:J.length===0?"No results":`${J.length} results`}),r.jsx("ul",{className:"space-y-2 mt-2",children:ce.map(S=>{const P=S.title||S.url||S.PK||"Untitled",I=S.logoUrl;return r.jsxs("li",{className:"flex gap-3 rounded-xl border border-slate-800 bg-slate-950/60 p-3",children:[r.jsx("div",{className:"h-12 w-12 flex-shrink-0 overflow-hidden rounded-lg border border-slate-700 bg-slate-900",children:I?r.jsx("img",{src:I,alt:"",className:"h-full w-full object-cover",onError:B=>{B.currentTarget.style.visibility="hidden"}}):null}),r.jsxs("div",{className:"min-w-0 flex-1 space-y-1",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsx("h2",{className:"truncate text-sm font-semibold text-slate-50",children:r.jsx(ie,{to:`/websites/${encodeURIComponent(S.PK)}`,className:"hover:text-brand-orange",children:P})}),typeof S.averageRating=="number"&&r.jsxs("span",{className:"inline-flex items-center rounded-full bg-slate-900 px-2 py-0.5 text-[11px] text-amber-300",children:[S.averageRating.toFixed(1),""]})]}),S.url&&r.jsx("a",{href:S.url,target:"_blank",rel:"noopener noreferrer",className:"block truncate text-xs text-slate-400 hover:text-slate-200",children:S.url}),S.description&&r.jsxs("p",{className:"text-xs text-slate-300 line-clamp-3",children:[S.description,S.descriptionAiGenerated&&r.jsx("span",{className:"ml-1 text-[11px] uppercase tracking-wide text-slate-500",children:"AI summary"})]}),S.categories&&S.categories.length>0&&r.jsx("div",{className:"flex flex-wrap gap-1 pt-1",children:S.categories.map(B=>r.jsx("span",{className:"rounded-full bg-slate-900 px-2 py-0.5 text-[11px] text-slate-300",children:B.name},B.id))}),$&&r.jsx("div",{className:"pt-1",children:r.jsxs("label",{className:"inline-flex items-center gap-1 text-[11px] text-slate-400",children:[r.jsx("span",{children:"Rate:"}),r.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-1 py-0.5 text-[11px] text-slate-50",onChange:B=>{const k=Number(B.target.value);k>=1&&k<=5&&pe(S.PK,k)},defaultValue:"",children:[r.jsx("option",{value:"",children:"--"}),r.jsx("option",{value:"1",children:"1"}),r.jsx("option",{value:"2",children:"2"}),r.jsx("option",{value:"3",children:"3"}),r.jsx("option",{value:"4",children:"4"}),r.jsx("option",{value:"5",children:"5"})]})]})})]})]},S.PK)})})]}):r.jsx("div",{className:"flex items-center justify-center min-h-[280px]",children:r.jsx("p",{className:"text-2xl sm:text-3xl font-light text-slate-500/80 tracking-wide animate-pulse",children:"Enter search term or select categories"})}),se&&V>1&&r.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-center gap-2 text-xs",children:[r.jsx("button",{type:"button",disabled:x<=1,onClick:()=>p(S=>Math.max(1,S-1)),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 disabled:opacity-40",children:"Prev"}),r.jsxs("span",{className:"text-slate-500",children:["Page ",x," of ",V]}),r.jsx("button",{type:"button",disabled:x>=V,onClick:()=>p(S=>Math.min(V,S+1)),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 disabled:opacity-40",children:"Next"})]})]})};function Ro(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const qv=()=>{var v,b;const{id:e}=as(),{user:t}=$e(),n=lt(t??null,"manager"),[s,a]=i.useState(null),[l,o]=i.useState(null),[c,d]=i.useState(!0),[u,f]=i.useState(null);i.useEffect(()=>{const y=Ro();if(!y||!e){f(e?"API URL not set.":"Missing site id."),d(!1);return}let C=!1;async function x(){d(!0),f(null);try{const p=new URLSearchParams;p.set("id",decodeURIComponent(e));const g=await at(`${y}/sites?${p.toString()}`);if(g.status===404){C||a(null);return}if(!g.ok){const w=await g.text();throw new Error(`HTTP ${g.status}: ${w}`)}const j=await g.json();if(C)return;a(j.site??null)}catch(p){C||f((p==null?void 0:p.message)??"Failed to load site.")}finally{C||d(!1)}}return x(),()=>{C=!0}},[e]),i.useEffect(()=>{if(!t||!(s!=null&&s.PK))return;const y=Ro();if(!y)return;let C=!1;return(async()=>{try{const x=await Y(`${y}/stars?siteId=${encodeURIComponent(s.PK)}`);if(C)return;if(x.ok){const p=await x.json();o(typeof p.rating=="number"?p.rating:null)}}catch{}})(),()=>{C=!0}},[t,s==null?void 0:s.PK]);const m=async(y,C)=>{const x=Ro();if(x)try{await Y(`${x}/stars`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({siteId:y,rating:C})}),o(C)}catch{}};if(c)return r.jsxs("div",{className:"space-y-4",children:[r.jsxs(ie,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Websites"]}),r.jsx("div",{className:"text-sm text-slate-400",children:"Loading"})]});if(u||!s)return r.jsxs("div",{className:"space-y-4",children:[r.jsxs(ie,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Websites"]}),r.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:u||"Site not found."})]});const h=s.title||s.url||s.PK||"Untitled";return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsxs(ie,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Websites"]}),n&&s&&r.jsxs(ie,{to:`/admin/sites/edit/${encodeURIComponent(s.PK)}`,className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(oa,{className:"h-4 w-4"}),"Edit site"]})]}),r.jsxs("article",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 sm:p-6",children:[r.jsxs("header",{className:"flex flex-wrap gap-4",children:[r.jsx("div",{className:"h-16 w-16 flex-shrink-0 overflow-hidden rounded-lg border border-slate-700 bg-slate-900",children:s.logoUrl?r.jsx("img",{src:s.logoUrl,alt:"",className:"h-full w-full object-cover",onError:y=>{y.currentTarget.style.visibility="hidden"}}):null}),r.jsxs("div",{className:"min-w-0 flex-1 space-y-1",children:[r.jsx("h1",{className:"text-xl font-semibold tracking-tight text-slate-50",children:h}),typeof s.averageRating=="number"&&r.jsxs("span",{className:"inline-flex items-center rounded-full bg-slate-800 px-2 py-0.5 text-sm text-amber-300",children:[s.averageRating.toFixed(1)," average"]}),s.url&&r.jsx("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"block truncate text-sm text-slate-400 hover:text-slate-200",children:s.url})]})]}),s.description&&r.jsx("div",{className:"mt-4",children:r.jsxs("p",{className:"text-sm text-slate-300",children:[s.description,s.descriptionAiGenerated&&r.jsx("span",{className:"ml-1 text-xs uppercase tracking-wide text-slate-500",children:"AI summary"})]})}),(((v=s.categories)==null?void 0:v.length)??0)>0&&r.jsx("div",{className:"mt-3 flex flex-wrap gap-1",children:s.categories.map(y=>r.jsx("span",{className:"rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-300",children:y.name},y.id))}),(((b=s.tags)==null?void 0:b.length)??0)>0&&r.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:s.tags.map(y=>r.jsx("span",{className:"rounded-full bg-slate-900 px-2 py-0.5 text-xs text-slate-400",children:y},y))}),t&&r.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3",children:[l!==null&&r.jsxs("span",{className:"text-xs text-slate-400",children:["Your rating: ",l,""]}),r.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-400",children:[r.jsx("span",{children:"Rate:"}),r.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-2 py-1 text-sm text-slate-50",value:l??"",onChange:y=>{const C=Number(y.target.value);C>=1&&C<=5&&m(s.PK,C)},children:[r.jsx("option",{value:"",children:"--"}),r.jsx("option",{value:"1",children:"1"}),r.jsx("option",{value:"2",children:"2"}),r.jsx("option",{value:"3",children:"3"}),r.jsx("option",{value:"4",children:"4"}),r.jsx("option",{value:"5",children:"5"})]})]})]}),s.scrapedContent&&r.jsxs("section",{className:"mt-6 border-t border-slate-800 pt-4",children:[r.jsx("h2",{className:"text-sm font-medium text-slate-400",children:"About / Scraped content"}),r.jsx("div",{className:"mt-2 overflow-x-auto rounded-lg border border-slate-800 bg-slate-900/60 p-3",children:r.jsx("pre",{className:"whitespace-pre-wrap break-words font-sans text-sm text-slate-300",children:s.scrapedContent})})]})]})]})};function Lo(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Ao=10,Jv=()=>{const{user:e}=$e(),[t,n]=qt(),[s,a]=i.useState([]),[l,o]=i.useState(()=>t.get("q")??""),[c,d]=i.useState(()=>{const P=t.get("categoryIds");return P?P.split(",").filter(Boolean):[]}),[u,f]=i.useState(()=>t.get("categoryMode")==="or"?"or":"and"),[m,h]=i.useState(!1),[v,b]=i.useState(""),[y,C]=i.useState("avgDesc"),[x,p]=i.useState(1),[g,j]=i.useState(!1),[w,E]=i.useState(null),$=!!e,R=lt(e??null,"manager"),H=i.useRef(null),[O,q]=i.useState([]);i.useEffect(()=>{const P=Lo();if(!P)return;let I=!1;return at(`${P}/media-categories`).then(B=>B.ok?B.json():Promise.reject(new Error("Failed to load categories"))).then(B=>{if(I)return;const k=(B.categories??[]).map(K=>({id:K.PK||K.id||"",name:K.name||K.PK||""}));k.sort((K,ne)=>(K.name||"").localeCompare(ne.name||"")),q(k)}).catch(()=>{}),()=>{I=!0}},[]);const W=i.useMemo(()=>{if(u==="or"&&O.length>0)return O;const P=new Map;s.forEach(B=>(B.categories||[]).forEach(k=>{k.id&&!P.has(k.id)&&P.set(k.id,k)}));const I=[...O];return P.forEach(B=>{I.some(k=>k.id===B.id)||I.push(B)}),I.sort((B,k)=>(B.name||"").localeCompare(k.name||"")),I},[O,u,s]),se=i.useMemo(()=>W.filter(P=>!c.includes(P.id)&&(!v.trim()||(P.name||"").toLowerCase().includes(v.toLowerCase()))),[W,c,v]),J=l.trim().length>0||c.length>0;i.useEffect(()=>{if(J){const P=new URLSearchParams;l.trim()&&P.set("q",l.trim()),c.length&&(P.set("categoryIds",c.join(",")),P.set("categoryMode",u)),n(P,{replace:!0})}else n({},{replace:!0})},[J,l,c,u,n]),i.useEffect(()=>{if(!J){a([]),p(1),j(!1),E(null);return}const P=Lo();if(!P){E("API URL not set. Deploy via CI or set window.API_BASE_URL in config.js.");return}let I=!1;async function B(){j(!0),E(null);try{const k=new URLSearchParams;k.set("limit","100"),l.trim()&&k.set("q",l.trim()),c.length>0&&(k.set("categoryIds",c.join(",")),k.set("categoryMode",u));const K=await at(`${P}/media?${k.toString()}`);if(!K.ok){const _=await K.text();throw new Error(`HTTP ${K.status}: ${_}`)}const ne=await K.json();if(I)return;a(ne.media??[]),p(1)}catch(k){I||E((k==null?void 0:k.message)??"Failed to load media.")}finally{I||j(!1)}}return B(),()=>{I=!0}},[J,l,c,u]),i.useEffect(()=>{function P(I){H.current&&!H.current.contains(I.target)&&h(!1)}if(m)return document.addEventListener("mousedown",P),()=>document.removeEventListener("mousedown",P)},[m]);const V=i.useMemo(()=>{const P=[...s];return P.sort((I,B)=>{const k=(I.title||I.PK||"").toLowerCase(),K=(B.title||B.PK||"").toLowerCase(),ne=typeof I.averageRating=="number"?I.averageRating:0,_=typeof B.averageRating=="number"?B.averageRating:0;return y==="avgDesc"?_!==ne?_-ne:k.localeCompare(K):y==="avgAsc"?ne!==_?ne-_:k.localeCompare(K):y==="alphaAsc"?k.localeCompare(K):y==="alphaDesc"?K.localeCompare(k):0}),P},[s,y]),ce=Math.max(1,Math.ceil(V.length/Ao)),pe=V.slice((x-1)*Ao,x*Ao),S=async(P,I)=>{const B=Lo();if(!B)return;const k=window;if(!k.auth||typeof k.auth.getAccessToken!="function")return;const K=await new Promise(ne=>{k.auth.getAccessToken(_=>ne(_))});K&&await at(`${B}/media/stars`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${K}`},body:JSON.stringify({mediaId:P,rating:I})}).catch(()=>{})};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("header",{className:"space-y-2",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Media"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Images and videos attached to sites and experiments across Funkedupshift."})]}),r.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-4","aria-label":"Search and filter",children:[r.jsxs("form",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",onSubmit:P=>{P.preventDefault(),o(l.trim())},children:[r.jsx("input",{type:"text",value:l,onChange:P=>o(P.target.value),placeholder:"Search media by title or description",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),r.jsx("button",{type:"submit",className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500",children:"Search"})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-4 sm:gap-6",children:[r.jsxs("div",{ref:H,className:"relative flex-shrink-0 min-w-0 max-w-sm",children:[r.jsx("label",{htmlFor:"media-category-filter",className:"block text-xs font-medium text-slate-400 mb-1",children:"Categories (filter by)"}),r.jsx("input",{id:"media-category-filter",type:"text",value:v,onChange:P=>b(P.target.value),onFocus:()=>h(!0),placeholder:"Search and select categories",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",autoComplete:"off"}),m&&r.jsx("div",{className:"absolute left-0 top-full z-10 mt-1 w-full max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",role:"listbox","aria-label":"Category options",children:se.length>0?se.map(P=>r.jsx("button",{type:"button",role:"option",onClick:()=>{d(I=>I.includes(P.id)?I:[...I,P.id]),b("")},className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:P.name},P.id)):r.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:W.length===0?"No categories yet.":"No matches or all selected."})}),r.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:c.map(P=>{const I=W.find(B=>B.id===P);return r.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(I==null?void 0:I.name)??P,r.jsx("button",{type:"button",onClick:()=>d(B=>B.filter(k=>k!==P)),className:"hover:text-red-400","aria-label":"Remove category filter",children:""})]},P)})}),c.length>0&&r.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[r.jsx("span",{className:"text-xs text-slate-500",children:"Match:"}),r.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[r.jsx("button",{type:"button",onClick:()=>f("and"),className:`rounded px-2 py-0.5 text-xs font-medium ${u==="and"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"AND"}),r.jsx("button",{type:"button",onClick:()=>f("or"),className:`rounded px-2 py-0.5 text-xs font-medium ${u==="or"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"OR"})]})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-3 items-center text-xs text-slate-400",children:[r.jsx("span",{className:"font-medium text-slate-200",children:"Sort:"}),r.jsxs("select",{value:y,onChange:P=>{C(P.target.value),p(1)},className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",children:[r.jsx("option",{value:"avgDesc",children:"Avg stars (high first)"}),r.jsx("option",{value:"avgAsc",children:"Avg stars (low first)"}),r.jsx("option",{value:"alphaAsc",children:"Title AZ"}),r.jsx("option",{value:"alphaDesc",children:"Title ZA"})]}),r.jsx("span",{className:"text-slate-500",children:J?V.length===0?"No media found.":`${V.length} items`:""})]})]})]}),w&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:w}),J?g?r.jsx("div",{className:"text-sm text-slate-400",children:"Loading media"}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"rounded-md border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm text-slate-400",children:V.length===0?"No results":`${V.length} results`}),r.jsx("ul",{className:"space-y-3 mt-2",children:pe.map(P=>{const I=P.thumbnailUrl||(P.mediaType==="image"?P.mediaUrl:void 0),B=P.title||P.PK||"Untitled",k=P.mediaType==="video"?"Video":"Image",K=`/media/${encodeURIComponent(P.PK)}`;return r.jsxs("li",{className:"flex gap-3 rounded-xl border border-slate-800 bg-slate-950/60 p-3",children:[r.jsx(ie,{to:K,className:"h-16 w-24 flex-shrink-0 overflow-hidden rounded-lg border border-slate-700 bg-slate-900 flex items-center justify-center text-xl hover:border-slate-600",children:I?r.jsx("img",{src:I,alt:"",className:"h-full w-full object-cover",onError:ne=>{ne.currentTarget.style.visibility="hidden"}}):r.jsx("span",{children:P.mediaType==="video"?"":""})}),r.jsxs("div",{className:"min-w-0 flex-1 space-y-1",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsx("h2",{className:"truncate text-sm font-semibold text-slate-50",children:r.jsx(ie,{to:K,className:"hover:text-brand-orange",children:B})}),typeof P.averageRating=="number"&&r.jsxs("span",{className:"inline-flex items-center rounded-full bg-slate-900 px-2 py-0.5 text-[11px] text-amber-300",children:[P.averageRating.toFixed(1),""]}),r.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-900 px-2 py-0.5 text-[10px] uppercase tracking-wide text-slate-400",children:k})]}),P.description&&r.jsx("p",{className:"text-xs text-slate-300 line-clamp-3",children:P.description}),P.categories&&P.categories.length>0&&r.jsx("div",{className:"flex flex-wrap gap-1 pt-1",children:P.categories.map(ne=>r.jsx("span",{className:"rounded-full bg-slate-900 px-2 py-0.5 text-[11px] text-slate-300",children:ne.name},ne.id))}),R&&r.jsx("div",{className:"pt-1",children:r.jsxs(ie,{to:`/admin/media/edit/${encodeURIComponent(P.PK)}`,className:"inline-flex items-center gap-1 text-[11px] text-slate-400 hover:text-slate-200",children:[r.jsx(oa,{className:"h-3.5 w-3.5"}),"Edit"]})}),$&&r.jsx("div",{className:"pt-1",children:r.jsxs("label",{className:"inline-flex items-center gap-1 text-[11px] text-slate-400",children:[r.jsx("span",{children:"Rate:"}),r.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-1 py-0.5 text-[11px] text-slate-50",onChange:ne=>{const _=Number(ne.target.value);_>=1&&_<=5&&S(P.PK,_)},defaultValue:"",children:[r.jsx("option",{value:"",children:"--"}),r.jsx("option",{value:"1",children:"1"}),r.jsx("option",{value:"2",children:"2"}),r.jsx("option",{value:"3",children:"3"}),r.jsx("option",{value:"4",children:"4"}),r.jsx("option",{value:"5",children:"5"})]})]})})]})]},P.PK)})})]}):r.jsx("div",{className:"flex items-center justify-center min-h-[280px]",children:r.jsx("p",{className:"text-2xl sm:text-3xl font-light text-slate-500/80 tracking-wide animate-pulse",children:"Enter search term or select categories"})}),J&&ce>1&&r.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-center gap-2 text-xs",children:[r.jsx("button",{type:"button",disabled:x<=1,onClick:()=>p(P=>Math.max(1,P-1)),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 disabled:opacity-40",children:"Prev"}),r.jsxs("span",{className:"text-slate-500",children:["Page ",x," of ",ce]}),r.jsx("button",{type:"button",disabled:x>=ce,onClick:()=>p(P=>Math.min(ce,P+1)),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 disabled:opacity-40",children:"Next"})]})]})};function Pu(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Qv=()=>{var y;const{id:e}=as(),{user:t}=$e(),[n,s]=i.useState(null),[a,l]=i.useState(null),[o,c]=i.useState(!0),[d,u]=i.useState(null),f=lt(t??null,"manager"),m=e?decodeURIComponent(e):"";i.useEffect(()=>{const C=Pu();if(!C||!m){u(m?"API URL not set.":"Missing media id."),c(!1);return}let x=!1;async function p(){c(!0),u(null);try{const g=await at(`${C}/media?id=${encodeURIComponent(m)}`);if(g.status===404){x||s(null);return}if(!g.ok){const E=await g.text();throw new Error(`HTTP ${g.status}: ${E}`)}const j=await g.json();if(x)return;const w=Array.isArray(j.media)?j.media[0]:j.media;s(w??null)}catch(g){x||u((g==null?void 0:g.message)??"Failed to load media.")}finally{x||c(!1)}}return p(),()=>{x=!0}},[m]);const h=async C=>{const x=Pu();if(!(!x||!n))try{await Y(`${x}/media/stars`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mediaId:n.PK,rating:C})}),l(C)}catch{}};if(o)return r.jsxs("div",{className:"space-y-4",children:[r.jsxs(ie,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Media"]}),r.jsx("div",{className:"text-sm text-slate-400",children:"Loading"})]});if(d||!n)return r.jsxs("div",{className:"space-y-4",children:[r.jsxs(ie,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Media"]}),r.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:d||"Media not found."})]});const v=n.title||n.PK||"Untitled",b=n.mediaType==="video";return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsxs(ie,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Media"]}),f&&r.jsxs(ie,{to:`/admin/media/edit/${encodeURIComponent(n.PK)}`,className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(oa,{className:"h-4 w-4"}),"Edit"]})]}),r.jsxs("article",{className:"rounded-xl border border-slate-800 bg-slate-950/60 overflow-hidden",children:[r.jsxs("header",{className:"p-4 sm:p-6 border-b border-slate-800",children:[r.jsx("h1",{className:"text-xl font-semibold tracking-tight text-slate-50",children:v}),r.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[typeof n.averageRating=="number"&&r.jsxs("span",{className:"inline-flex items-center rounded-full bg-slate-800 px-2 py-0.5 text-sm text-amber-300",children:[n.averageRating.toFixed(1)," average"]}),r.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-800 px-2 py-0.5 text-xs uppercase tracking-wide text-slate-400",children:b?"Video":"Image"})]}),n.description&&r.jsx("p",{className:"mt-3 text-sm text-slate-300",children:n.description}),(((y=n.categories)==null?void 0:y.length)??0)>0&&r.jsx("div",{className:"mt-3 flex flex-wrap gap-1",children:n.categories.map(C=>r.jsx("span",{className:"rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-300",children:C.name},C.id))}),t&&r.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3",children:[a!==null&&r.jsxs("span",{className:"text-xs text-slate-400",children:["Your rating: ",a,""]}),r.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-400",children:[r.jsx("span",{children:"Rate:"}),r.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-2 py-1 text-sm text-slate-50",value:a??"",onChange:C=>{const x=Number(C.target.value);x>=1&&x<=5&&h(x)},children:[r.jsx("option",{value:"",children:"--"}),r.jsx("option",{value:"1",children:"1"}),r.jsx("option",{value:"2",children:"2"}),r.jsx("option",{value:"3",children:"3"}),r.jsx("option",{value:"4",children:"4"}),r.jsx("option",{value:"5",children:"5"})]})]})]})]}),r.jsx("div",{className:"p-4 sm:p-6 bg-slate-900/40 flex justify-center items-center min-h-[200px]",children:n.mediaUrl?b?r.jsx("video",{src:n.mediaUrl,controls:!0,className:"max-w-full max-h-[70vh] rounded-lg border border-slate-700",playsInline:!0}):r.jsx("img",{src:n.mediaUrl,alt:v,className:"max-w-full max-h-[70vh] w-auto h-auto object-contain rounded-lg border border-slate-700"}):r.jsx("p",{className:"text-sm text-slate-500",children:"No media URL available."})})]})]})},Fp="funkedupshift_internet_dashboard",Yv=5*60*1e3;function Zv(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function Xv(){try{const e=localStorage.getItem(Fp);if(!e)return null;const t=JSON.parse(e);return!(t!=null&&t.sites)||!(t!=null&&t.lastFetchTime)||Date.now()-new Date(t.lastFetchTime).getTime()>=Yv?null:t.sites}catch{return null}}function eb(e){try{localStorage.setItem(Fp,JSON.stringify({sites:e,lastFetchTime:new Date().toISOString()}))}catch{}}const tb=()=>{const{user:e}=$e(),[t,n]=i.useState([]),[s,a]=i.useState(!0),[l,o]=i.useState(null),c=i.useCallback(async()=>{const d=Zv(),u=Xv();if(u&&u.length>0){n(u),a(!1),o(null);return}if(!d){o("API URL not set."),a(!1);return}a(!0),o(null);try{const f=await at(`${d}/internet-dashboard`);if(!f.ok){const v=await f.text();throw new Error(v||`HTTP ${f.status}`)}const m=await f.json(),h=Array.isArray(m.sites)?m.sites:[];h.length>0?(eb(h),n(h)):(o(u!=null&&u.length?void 0:"No data returned."),u!=null&&u.length&&n(u))}catch(f){const m=f instanceof Error?f.message:"Failed to load dashboard.";u&&u.length>0?(n(u),o(null)):(o(m),n([]))}finally{a(!1)}},[]);return i.useEffect(()=>{c()},[c]),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Internet dashboard"}),r.jsxs("div",{className:"rounded-xl border border-teal-800/60 bg-gradient-to-br from-teal-900/40 to-teal-950/60 p-4 shadow-lg",children:[r.jsx("p",{className:"text-sm font-medium text-teal-100",children:"Live status of popular sites"}),r.jsx("p",{className:"mt-1 text-xs text-teal-200/80",children:"Refreshes when data is older than 5 minutes"}),lt(e??null,"superadmin")&&r.jsx("p",{className:"mt-2",children:r.jsx(ie,{to:"/admin/internet-dashboard",className:"text-brand-orange hover:text-orange-400 text-sm",children:"Edit sites list"})})]}),s&&r.jsx("p",{className:"text-sm text-slate-400",children:"Loading"}),l&&!t.length&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:l}),r.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(140px,1fr))] gap-3",children:t.map(d=>{const u=(d.status||"down").toLowerCase(),f=u==="up"?"border-emerald-500/50 bg-emerald-500/15 text-emerald-200":u==="degraded"?"border-amber-500/50 bg-amber-500/15 text-amber-200":"border-red-500/50 bg-red-500/15 text-red-200",m=d.responseTimeMs!=null?`${d.responseTimeMs} ms`:null;return r.jsxs("div",{className:`rounded-lg border p-3 text-center text-sm transition-all duration-200 hover:scale-[1.02] hover:shadow-lg ${f}`,children:[r.jsx("a",{href:`https://${d.domain}`,target:"_blank",rel:"noopener noreferrer",className:"font-semibold break-all hover:underline block",children:d.domain}),r.jsx("div",{className:"mt-1 text-xs capitalize opacity-90",children:u}),m&&r.jsx("div",{className:"mt-0.5 text-[11px] opacity-75",children:m})]},d.domain)})})]})};function nb(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return!e||e==="API_URL_PLACEHOLDER"||!e.startsWith("http")?null:e.replace(/\/$/,"")}const rb=()=>{const{user:e}=$e(),[t,n]=i.useState([]),[s,a]=i.useState(null),[l,o]=i.useState(!0),[c,d]=i.useState(null),u=i.useCallback(async()=>{const m=nb();if(!m){d("API URL not set. For local dev, edit public/config.js and set window.API_BASE_URL to your staging API (e.g. terraform -chdir=infra output -raw apiInvokeUrl)."),o(!1);return}o(!0),d(null);try{const h=await at(`${m}/recommended/highlights`),v=await h.text();if(!h.ok)throw new Error(v||`HTTP ${h.status}`);if(v.trim().startsWith("<"))throw new Error("API returned HTML instead of JSON. For local dev, set window.API_BASE_URL in public/config.js to your staging API URL (e.g. terraform -chdir=infra output -raw apiInvokeUrl)");let b;try{b=JSON.parse(v)}catch{throw new Error("API returned invalid JSON.")}const y=Array.isArray(b.sites)?b.sites:[];n(y),d(null)}catch(h){const v=h instanceof Error?h.message:"Failed to load.";d(v),n([])}finally{o(!1)}},[]);i.useEffect(()=>{u()},[u]);const f=lt(e??null,"manager");return r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-violet-200",children:"Highlights and faves"}),r.jsxs("div",{className:"rounded-xl border border-violet-800/60 bg-gradient-to-br from-violet-900/40 to-violet-950/60 p-4 shadow-lg",children:[r.jsx("p",{className:"text-sm font-medium text-violet-100",children:"Our curated list of exceptional sites"}),r.jsx("p",{className:"mt-1 text-xs text-violet-200/80",children:"Click a card below for more detail"}),f&&r.jsx("p",{className:"mt-2",children:r.jsx(ie,{to:"/admin/recommended?tab=highlights",className:"text-violet-300 hover:text-violet-200 font-semibold text-sm",children:"Edit sites list"})})]}),l&&r.jsx("p",{className:"text-sm text-slate-400",children:"Loading"}),c&&!t.length&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:c}),!l&&t.length===0&&!c&&r.jsxs("p",{className:"text-sm text-slate-400",children:["No sites configured yet."," ",f&&r.jsx(ie,{to:"/admin/recommended?tab=highlights",className:"text-violet-400 hover:text-violet-300",children:"Add sites"})]}),t.length>0&&r.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(260px,1fr))] gap-4",children:t.map(m=>{const h=(m.status||"up").toLowerCase(),v=h==="up"?"border-violet-400/50 bg-violet-400/20 text-violet-200":h==="degraded"?"border-violet-500/50 bg-violet-500/15 text-violet-200":"border-violet-600/50 bg-violet-600/15 text-violet-200",b=(m.description||"").trim().length>0,y=m.title||m.domain,C=m.url||`https://${m.domain}`;return r.jsxs("div",{className:`rounded-lg border p-4 text-left text-sm min-w-0 cursor-pointer transition-all duration-200 hover:scale-[1.01] hover:shadow-lg ${v}`,onClick:()=>a(m),role:"button",tabIndex:0,onKeyDown:x=>{(x.key==="Enter"||x.key===" ")&&(x.preventDefault(),a(m))},children:[r.jsxs("span",{className:"relative group block",children:[r.jsx("a",{href:C,target:"_blank",rel:"noopener noreferrer",className:"font-semibold block hover:underline break-all",onClick:x=>x.stopPropagation(),children:y}),r.jsx("span",{className:"absolute left-0 top-full mt-1 px-2 py-1.5 rounded bg-slate-900 border border-violet-700/60 text-xs text-violet-200 break-all max-w-[280px] shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-opacity z-10 pointer-events-none",role:"tooltip",children:C})]}),b&&r.jsx("div",{className:"mt-2 text-xs text-violet-200/90 leading-relaxed break-words",children:m.description})]},m.url||m.domain)})}),r.jsxs(hr,{open:!!s,onClose:()=>a(null),className:"relative z-50",children:[r.jsx("div",{className:"fixed inset-0 bg-black/50","aria-hidden":"true"}),r.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:r.jsx(hr.Panel,{className:"mx-auto w-full max-w-xl rounded-xl border border-violet-800/60 bg-gradient-to-br from-violet-900/40 to-violet-950/60 p-6 shadow-xl",children:s&&r.jsxs("div",{className:"relative flex min-h-[12rem] items-center justify-center",children:[r.jsx("button",{type:"button",onClick:()=>a(null),className:"absolute right-0 top-0 rounded p-1 text-violet-400 hover:bg-violet-800/40 hover:text-violet-200","aria-label":"Close modal",children:r.jsx(Gl,{className:"h-6 w-6"})}),s.logoUrl?r.jsx("img",{src:s.logoUrl,alt:"",className:"max-h-48 max-w-full object-contain",onError:m=>{m.currentTarget.style.visibility="hidden"}}):r.jsx("div",{className:"h-24 w-24 rounded-lg border border-violet-700/60 bg-violet-900/40"})]})})})]})]})};function sb({title:e,titleId:t,...n},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{fillRule:"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.006 5.404.434c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.434 2.082-5.005Z",clipRule:"evenodd"}))}const _p=i.forwardRef(sb);function ab(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return!e||e==="API_URL_PLACEHOLDER"||!e.startsWith("http")?null:e.replace(/\/$/,"")}const lb=()=>{const{user:e}=$e(),[t,n]=i.useState([]),[s,a]=i.useState(null),[l,o]=i.useState(!0),[c,d]=i.useState(null),u=i.useCallback(async()=>{const m=ab();if(!m){d("API URL not set. For local dev, edit public/config.js and set window.API_BASE_URL to your staging API (e.g. terraform -chdir=infra output -raw apiInvokeUrl)."),o(!1);return}o(!0),d(null);try{const h=await at(`${m}/recommended/highest-rated`),v=await h.text();if(!h.ok)throw new Error(v||`HTTP ${h.status}`);if(v.trim().startsWith("<"))throw new Error("API returned HTML instead of JSON. For local dev, set window.API_BASE_URL in public/config.js to your staging API URL (e.g. terraform -chdir=infra output -raw apiInvokeUrl)");let b;try{b=JSON.parse(v)}catch{throw new Error("API returned invalid JSON.")}const y=Array.isArray(b.sites)?b.sites:[];n(y),d(null)}catch(h){const v=h instanceof Error?h.message:"Failed to load.";d(v),n([])}finally{o(!1)}},[]);i.useEffect(()=>{u()},[u]);const f=lt(e??null,"manager");return r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-amber-200",children:"Highest rated"}),r.jsxs("div",{className:"rounded-xl border border-amber-800/60 bg-gradient-to-br from-amber-900/40 to-amber-950/60 p-4 shadow-lg",children:[r.jsx("p",{className:"text-sm font-medium text-amber-100",children:"Top sites and media rated by our community"}),r.jsx("p",{className:"mt-1 text-xs text-amber-200/80",children:"Click a card below for more detail"}),f&&r.jsx("p",{className:"mt-2",children:r.jsx(ie,{to:"/admin/recommended?tab=highest-rated",className:"text-amber-300 hover:text-amber-200 font-semibold text-sm",children:"Edit list"})})]}),l&&r.jsx("p",{className:"text-sm text-slate-400",children:"Loading"}),c&&!t.length&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:c}),!l&&t.length===0&&!c&&r.jsxs("p",{className:"text-sm text-slate-400",children:["No items configured yet."," ",f&&r.jsx(ie,{to:"/admin/recommended?tab=highest-rated",className:"text-amber-400 hover:text-amber-300",children:"Generate cache"})]}),t.length>0&&r.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(260px,1fr))] gap-4",children:t.map(m=>{const h=(m.status||"up").toLowerCase(),v=h==="up"?"border-amber-400/50 bg-amber-400/20 text-amber-200":h==="degraded"?"border-amber-500/50 bg-amber-500/15 text-amber-200":"border-amber-600/50 bg-amber-600/15 text-amber-200",b=(m.description||"").trim().length>0,y=m.title||m.domain,C=m.type==="media",x=m.id||m.url||m.domain;return r.jsxs("div",{className:`rounded-lg border p-4 text-left text-sm min-w-0 cursor-pointer transition-all duration-200 hover:scale-[1.01] hover:shadow-lg ${v}`,onClick:()=>a(m),role:"button",tabIndex:0,onKeyDown:p=>{(p.key==="Enter"||p.key===" ")&&(p.preventDefault(),a(m))},children:[r.jsxs("span",{className:"relative group block",children:[C?r.jsx(ie,{to:m.link,className:"font-semibold block hover:underline break-all",onClick:p=>p.stopPropagation(),children:y}):r.jsx("a",{href:m.link,target:"_blank",rel:"noopener noreferrer",className:"font-semibold block hover:underline break-all",onClick:p=>p.stopPropagation(),children:y}),r.jsx("span",{className:"absolute left-0 top-full mt-1 px-2 py-1.5 rounded bg-slate-900 border border-amber-700/60 text-xs text-amber-200 break-all max-w-[280px] shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-opacity z-10 pointer-events-none",role:"tooltip",children:m.link})]}),m.averageRating!=null&&r.jsxs("div",{className:"mt-1 flex items-center gap-0.5 text-amber-300",children:[r.jsx(_p,{className:"h-3.5 w-3.5"}),r.jsx("span",{className:"font-medium",children:m.averageRating})]}),b&&r.jsx("div",{className:"mt-2 text-xs text-amber-200/90 leading-relaxed break-words",children:m.description})]},x)})}),r.jsxs(hr,{open:!!s,onClose:()=>a(null),className:"relative z-50",children:[r.jsx("div",{className:"fixed inset-0 bg-black/50","aria-hidden":"true"}),r.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:r.jsx(hr.Panel,{className:"mx-auto w-full max-w-xl rounded-xl border border-amber-800/60 bg-gradient-to-br from-amber-900/40 to-amber-950/60 p-6 shadow-xl",children:s&&r.jsxs("div",{className:"relative flex min-h-[12rem] items-center justify-center",children:[r.jsx("button",{type:"button",onClick:()=>a(null),className:"absolute right-0 top-0 rounded p-1 text-amber-400 hover:bg-amber-800/40 hover:text-amber-200","aria-label":"Close modal",children:r.jsx(Gl,{className:"h-6 w-6"})}),s.logoUrl?r.jsx("img",{src:s.logoUrl,alt:"",className:"max-h-48 max-w-full object-contain",onError:m=>{m.currentTarget.style.visibility="hidden"}}):r.jsx("div",{className:"h-24 w-24 rounded-lg border border-amber-700/60 bg-amber-900/40"})]})})})]})]})};function ob(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const ib=["image/png","image/jpeg","image/jpg","image/gif","image/webp"],cb=()=>{const{user:e}=$e(),{logo:t}=qc(),[n,s]=i.useState(null),[a,l]=i.useState("Funkedupshift"),[o,c]=i.useState(null),[d,u]=i.useState(!1),[f,m]=i.useState(null),[h,v]=i.useState(null);if(!lt(e??null,"superadmin"))return r.jsxs("div",{className:"space-y-3",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Branding"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Only superadmin users can manage global branding assets."})]});const y=x=>{var g;const p=(g=x.target.files)==null?void 0:g[0];s(p??null),m(null),v(null),o&&(URL.revokeObjectURL(o),c(null)),p&&c(URL.createObjectURL(p))},C=async x=>{if(x.preventDefault(),v(null),m(null),!n){v("Choose an image file first.");return}const p=n.type||"image/png";if(!ib.includes(p)){v("Logo must be PNG, JPEG, GIF, or WEBP.");return}const g=ob();if(!g){v("API URL not configured.");return}const j=window;if(!j.auth||typeof j.auth.getAccessToken!="function"){v("Auth not initialized.");return}u(!0);try{const w=await Y(`${g}/branding/logo`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contentType:p,alt:a})});if(!w.ok){const R=await w.text();throw new Error(R||`Metadata request failed with ${w.status}`)}const E=await w.json();if(!E.uploadUrl)throw new Error("uploadUrl missing from response.");const $=await fetch(E.uploadUrl,{method:"PUT",headers:{"Content-Type":p},body:n});if(!$.ok)throw new Error(`Upload failed with ${$.status}`);m("Logo updated. It may take a moment for caches to refresh.")}catch(w){v((w==null?void 0:w.message)??"Failed to update logo.")}finally{u(!1)}};return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("header",{className:"space-y-2",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Branding"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Upload a new global logo for Funkedupshift. This logo is used in the navigation bar and other shared surfaces."})]}),r.jsxs("form",{className:"space-y-4 max-w-md",onSubmit:C,children:[r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"block text-slate-200",children:"Logo image"}),t&&!o&&r.jsxs("div",{className:"space-y-1 mb-3",children:[r.jsx("p",{className:"text-slate-200",children:"Current logo"}),r.jsx("div",{className:"inline-flex items-center rounded-lg border border-slate-800 bg-slate-950 p-2",children:r.jsx("img",{src:t.url,alt:t.alt,className:"h-12 w-auto rounded-md object-contain"})})]}),r.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/jpg,image/gif,image/webp",onChange:y,className:"block w-full text-xs text-slate-300 file:mr-3 file:rounded-md file:border-0 file:bg-slate-800 file:px-3 file:py-1.5 file:text-xs file:font-semibold file:text-slate-100 hover:file:bg-slate-700"}),r.jsx("p",{className:"text-xs text-slate-500",children:"PNG, JPEG, GIF, or WEBP. Recommended square or horizontal layout."})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("label",{className:"block text-slate-200",children:"Alt text"}),r.jsx("input",{type:"text",value:a,onChange:x=>l(x.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),o&&r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsx("p",{className:"text-slate-200",children:"Preview"}),r.jsxs("div",{className:"inline-flex items-center rounded-lg border border-slate-800 bg-slate-950 p-2",children:[r.jsx("img",{src:o,alt:"Preview",className:"h-12 w-auto rounded-md object-contain"}),r.jsx("span",{className:"ml-3 text-xs text-slate-400 truncate max-w-[12rem]",children:n==null?void 0:n.name})]})]}),r.jsx("button",{type:"submit",disabled:d||!n,className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:d?"Updating":"Update logo"}),f&&r.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-xs text-emerald-200",children:f}),h&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:h})]})]})};function Tu(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const db=()=>{const{user:e}=$e(),[t,n]=i.useState([]),[s,a]=i.useState("custom"),[l,o]=i.useState(null),[c,d]=i.useState(null),[u,f]=i.useState(""),[m,h]=i.useState(!0),[v,b]=i.useState(!1),[y,C]=i.useState(null),[x,p]=i.useState(null),g=lt(e??null,"superadmin"),j=i.useCallback(async()=>{const J=Tu();if(!J){p("API URL not set."),h(!1);return}h(!0),p(null);try{const V=await Y(`${J}/admin/internet-dashboard/sites`);if(!V.ok){const pe=await V.json().catch(()=>({}));throw new Error(pe.error||"Failed to load")}const ce=await V.json();n(Array.isArray(ce.sites)?ce.sites:[])}catch(V){p((V==null?void 0:V.message)??"Failed to load sites.")}finally{h(!1)}},[Y]);i.useEffect(()=>{g&&j()},[g,j]);const w=async J=>{const V=Tu();if(V){b(!0),C(null),p(null);try{const ce=await Y(`${V}/admin/internet-dashboard/sites`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({sites:J})});if(!ce.ok){const pe=await ce.json().catch(()=>({}));throw new Error(pe.error||"Failed to save")}n(J),C("Sites list saved.")}catch(ce){p((ce==null?void 0:ce.message)??"Failed to save.")}finally{b(!1)}}},E=J=>{J.preventDefault();const V=u.trim().toLowerCase().replace(/^https?:\/\//,"").replace(/\/.*$/,"");if(!V)return;if(t.includes(V)){p("Domain already in list.");return}const ce=[...t,V];f(""),p(null),w(ce)},$=i.useMemo(()=>{if(s==="custom")return[...t];const J=[...t];return J.sort((V,ce)=>s==="a-z"?V.localeCompare(ce):ce.localeCompare(V)),J},[t,s]),R=J=>{o(J)},H=(J,V)=>{J.preventDefault(),J.dataTransfer.dropEffect="move",d(V)},O=()=>{d(null)},q=()=>{o(null),d(null)},W=(J,V)=>{if(J.preventDefault(),d(null),s!=="custom"||l===null||l===V){o(null);return}const ce=[...$],[pe]=ce.splice(l,1);ce.splice(V,0,pe),n(ce),w(ce),o(null)},se=J=>{const V=t.filter(ce=>ce!==J);if(V.length===0){p("At least one site is required.");return}p(null),w(V)};return g?m?r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Internet Dashboard"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Loading sites"})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs(ie,{to:"/internet-dashboard",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Internet Dashboard"]}),r.jsxs("header",{className:"space-y-2",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Internet Dashboard"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Edit the list of sites shown on the Internet Dashboard. Only SuperAdmin can change this."})]}),r.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-4 max-w-2xl",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsxs("h2",{className:"text-base font-semibold text-slate-200",children:["Sites list (",t.length,")"]}),r.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[r.jsx("button",{type:"button",onClick:()=>a("custom"),className:`rounded px-2 py-0.5 text-xs font-medium ${s==="custom"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"Custom"}),r.jsx("button",{type:"button",onClick:()=>a("a-z"),className:`rounded px-2 py-0.5 text-xs font-medium ${s==="a-z"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"AZ"}),r.jsx("button",{type:"button",onClick:()=>a("z-a"),className:`rounded px-2 py-0.5 text-xs font-medium ${s==="z-a"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"ZA"})]})]}),r.jsxs("form",{onSubmit:E,className:"flex gap-2 flex-wrap items-end",children:[r.jsxs("div",{className:"flex-1 min-w-[12rem]",children:[r.jsx("label",{htmlFor:"newDomain",className:"block text-xs font-medium text-slate-400 mb-1",children:"Add domain"}),r.jsx("input",{id:"newDomain",type:"text",value:u,onChange:J=>f(J.target.value),placeholder:"example.com",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),r.jsx("button",{type:"submit",disabled:v||!u.trim(),className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:"Add"})]}),r.jsx("ul",{className:"space-y-2",children:$.map((J,V)=>r.jsxs("li",{draggable:s==="custom",onDragStart:()=>R(V),onDragOver:ce=>H(ce,V),onDragLeave:O,onDragEnd:q,onDrop:ce=>W(ce,V),className:`flex items-center gap-2 rounded-md border px-3 py-2 ${l===V?"border-brand-orange bg-slate-800 opacity-60":c===V?"border-brand-orange/70 bg-slate-800/80":"border-slate-700 bg-slate-900"} ${s==="custom"?"cursor-grab active:cursor-grabbing":""}`,children:[s==="custom"&&r.jsx(Jc,{className:"h-4 w-4 flex-shrink-0 text-slate-500","aria-hidden":!0}),r.jsx("span",{className:"font-medium text-slate-200 break-all flex-1",children:J}),r.jsx("button",{type:"button",onClick:()=>se(J),disabled:v||t.length<=1,className:"flex-shrink-0 rounded-md border border-red-500/60 bg-red-500/10 px-2 py-1 text-xs font-medium text-red-300 hover:bg-red-500/20 disabled:opacity-50",children:"Remove"})]},J))}),y&&r.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:y}),x&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:x})]})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Internet Dashboard"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Only SuperAdmin users can edit the dashboard sites list."})]})};function $o(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function Ru(e){const t=e.trim();return t?t.toLowerCase().startsWith("http://")||t.toLowerCase().startsWith("https://")?t:`https://${t.replace(/^https?:\/\//i,"")}`:null}function Lu(e){try{return new URL(e.startsWith("http")?e:`https://${e}`).hostname}catch{return e}}const ys=[{id:"highlights",label:"Highlights",fetchPath:"/admin/recommended/highlights/sites",savePath:"/admin/recommended/highlights/sites",generatePath:"/admin/recommended/highlights/generate",generateLabel:"Generate new cache",listLabel:"Highlights list",emptyMessage:"No highlights yet. Generate from the highlight category or add a URL above.",generateSuccessMessage:"Cache generated from sites in the highlight category.",saveSuccessMessage:"Highlights list saved.",buttonClass:"bg-violet-600 hover:bg-violet-500",viewPath:"/recommended/highlights"},{id:"highestRated",label:"Highest Rated",fetchPath:"/admin/recommended/highest-rated/sites",savePath:"/admin/recommended/highest-rated/sites",generatePath:"/admin/recommended/highest-rated/generate",generateLabel:"Generate new cache",listLabel:"Highest rated list",emptyMessage:"No items yet. Generate from top 12 by star rating or add a URL above.",generateSuccessMessage:"Cache generated from top 12 sites and media by star rating.",saveSuccessMessage:"Highest rated list saved.",buttonClass:"bg-amber-600 hover:bg-amber-500",viewPath:"/recommended/highest-rated"}],Au=({config:e})=>{const[t,n]=i.useState([]),[s,a]=i.useState(null),[l,o]=i.useState(!1),[c,d]=i.useState("custom"),[u,f]=i.useState(null),[m,h]=i.useState(null),[v,b]=i.useState(""),[y,C]=i.useState(null),[x,p]=i.useState(""),[g,j]=i.useState(!1),[w,E]=i.useState(null),[$,R]=i.useState(null),H=i.useRef([]);i.useEffect(()=>{H.current=t},[t]);const O=i.useCallback(async()=>{const M=$o();if(M){R(null);try{const F=await Y(`${M}${e.fetchPath}`);if(!F.ok){const T=await F.json().catch(()=>({}));throw new Error(T.error||"Failed to load")}const Z=await F.json(),N=Array.isArray(Z.sites)?Z.sites:[];n(N.map(T=>typeof T=="string"?{type:"site",url:T,description:""}:(T.type||"site")==="media"?{type:"media",id:T.id||"",description:T.description||"",title:T.title,thumbnailKey:T.thumbnailKey,averageRating:T.averageRating}:{type:"site",url:T.url||"",description:T.description||"",title:T.title,logoKey:T.logoKey,averageRating:T.averageRating})),a(Z.updatedAt??null)}catch(F){R((F==null?void 0:F.message)??"Failed to load sites.")}}},[Y,e.fetchPath]);i.useEffect(()=>{O()},[O]);const q=async()=>{const M=$o();if(M){o(!0),E(null),R(null);try{const F=await Y(`${M}${e.generatePath}`,{method:"POST"}),Z=await F.json();if(!F.ok)throw new Error(Z.error||"Failed to generate");const N=Array.isArray(Z.sites)?Z.sites:[];n(N.map(T=>typeof T=="string"?{type:"site",url:T,description:""}:(T.type||"site")==="media"?{type:"media",id:T.id||"",description:T.description||"",title:T.title,thumbnailKey:T.thumbnailKey,averageRating:T.averageRating}:{type:"site",url:T.url||"",description:T.description||"",title:T.title,logoKey:T.logoKey,averageRating:T.averageRating})),a(Z.updatedAt??null),E(e.generateSuccessMessage)}catch(F){R((F==null?void 0:F.message)??"Failed to generate cache.")}finally{o(!1)}}},W=async M=>{const F=$o();if(F){j(!0),E(null),R(null);try{const Z={sites:M.map(G=>G.type==="media"?{type:"media",id:G.id,description:G.description,...G.title&&{title:G.title},...G.thumbnailKey&&{thumbnailKey:G.thumbnailKey},...G.averageRating!=null&&{averageRating:G.averageRating}}:{type:"site",url:G.url,description:G.description,...G.title&&{title:G.title},...G.logoKey&&{logoKey:G.logoKey},...G.averageRating!=null&&{averageRating:G.averageRating}})},N=await Y(`${F}${e.savePath}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Z)}),T=await N.json();if(!N.ok)throw new Error(T.error||"Failed to save");n(M),E(e.saveSuccessMessage),a(T.updatedAt??null)}catch(Z){R((Z==null?void 0:Z.message)??"Failed to save.")}finally{j(!1)}}},se=M=>{M.preventDefault();const F=Ru(v);if(F){if(t.some(Z=>Z.url===F)){R("URL already in list.");return}b(""),R(null),W([...t,{type:"site",url:F,description:""}])}},J=M=>M.type==="media"?(M.title||M.id||"").toLowerCase():Lu(M.url||"").toLowerCase(),V=i.useMemo(()=>{if(c==="custom")return[...t];const M=[...t];return M.sort((F,Z)=>{const N=J(F),T=J(Z);return c==="a-z"?N.localeCompare(T):T.localeCompare(N)}),M},[t,c]),ce=M=>{const F=V[M];F.type!=="media"&&(C(M),p(F.url||""))},pe=()=>{if(y===null)return;const M=Ru(x);if(!M){R("Invalid URL.");return}const F=V[y];if(F.type==="media")return;if(t.some(N=>N.type==="site"&&N.url===M&&N.url!==F.url)){R("URL already in list.");return}R(null);const Z=t.map(N=>N.type==="site"&&N.url===F.url?{...N,url:M}:N);n(Z),W(Z),C(null),p("")},S=()=>{C(null),p("")},P=(M,F)=>{n(Z=>Z.map(N=>(N.type==="media"?N.id===M.id:N.url===M.url)?{...N,description:F.slice(0,255)}:N))},I=()=>{W(H.current)},B=M=>f(M),k=(M,F)=>{M.preventDefault(),M.dataTransfer.dropEffect="move",h(F)},K=()=>h(null),ne=()=>{f(null),h(null)},_=(M,F)=>{if(M.preventDefault(),h(null),c!=="custom"||u===null||u===F){f(null);return}const Z=[...V],[N]=Z.splice(u,1);Z.splice(F,0,N),n(Z),W(Z),f(null)},z=M=>{R(null),W(t.filter(F=>F.type==="media"?F.id!==M.id:F.url!==M.url))},U=s?new Date(s).toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"}):null;return r.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-4 max-w-2xl",children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsxs("h2",{className:"text-base font-semibold text-slate-200",children:[e.listLabel," (",t.length,")"]}),U&&r.jsxs("span",{className:"text-xs text-slate-500",children:["Cache was last updated ",U]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ie,{to:e.viewPath,className:"text-sm text-slate-400 hover:text-slate-200",children:"View"}),r.jsx("button",{type:"button",onClick:q,disabled:l,className:`rounded-md px-4 py-2 text-sm font-medium text-white disabled:opacity-50 ${e.buttonClass}`,children:l?"Generating":e.generateLabel})]})]}),r.jsx("div",{className:"flex flex-wrap items-center gap-3",children:r.jsx("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:["custom","a-z","z-a"].map(M=>r.jsx("button",{type:"button",onClick:()=>d(M),className:`rounded px-2 py-0.5 text-xs font-medium ${c===M?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:M==="custom"?"Custom":M==="a-z"?"AZ":"ZA"},M))})}),r.jsxs("form",{onSubmit:se,className:"flex gap-2 flex-wrap items-end",children:[r.jsxs("div",{className:"flex-1 min-w-[12rem]",children:[r.jsx("label",{htmlFor:"newUrl",className:"block text-xs font-medium text-slate-400 mb-1",children:"Add URL"}),r.jsx("input",{id:"newUrl",type:"text",value:v,onChange:M=>b(M.target.value),placeholder:"https://example.com or example.com",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),r.jsx("button",{type:"submit",disabled:g||!v.trim(),className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:"Add"})]}),r.jsx("ul",{className:"space-y-3",children:V.map((M,F)=>r.jsxs("li",{draggable:c==="custom"&&y===null,onDragStart:()=>B(F),onDragOver:Z=>k(Z,F),onDragLeave:K,onDragEnd:ne,onDrop:Z=>_(Z,F),className:`flex flex-col gap-2 rounded-md border px-3 py-2 ${u===F?"border-brand-orange bg-slate-800 opacity-60":m===F?"border-brand-orange/70 bg-slate-800/80":"border-slate-700 bg-slate-900"} ${c==="custom"&&y===null?"cursor-grab active:cursor-grabbing":""}`,children:[r.jsxs("div",{className:"flex items-center gap-2",children:[c==="custom"&&r.jsx(Jc,{className:"h-4 w-4 flex-shrink-0 text-slate-500","aria-hidden":!0}),y===F?r.jsx("input",{type:"text",value:x,onChange:Z=>p(Z.target.value),onBlur:pe,onKeyDown:Z=>{Z.key==="Enter"&&pe(),Z.key==="Escape"&&S()},autoFocus:!0,className:"flex-1 rounded-md border border-slate-600 bg-slate-900 px-2 py-1 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}):M.type==="media"?r.jsx("span",{className:"font-medium text-slate-200 break-all flex-1",children:M.title||M.id}):r.jsx("button",{type:"button",onClick:()=>ce(F),className:"font-medium text-slate-200 break-all flex-1 text-left hover:text-brand-orange hover:underline",children:Lu(M.url||"")}),e.id==="highestRated"&&M.averageRating!=null&&r.jsxs("span",{className:"flex items-center gap-0.5 text-amber-400 text-xs",children:[r.jsx(_p,{className:"h-3.5 w-3.5"}),M.averageRating]}),r.jsx("button",{type:"button",onClick:()=>z(M),disabled:g||y!==null,className:"flex-shrink-0 rounded-md border border-red-500/60 bg-red-500/10 px-2 py-1 text-xs font-medium text-red-300 hover:bg-red-500/20 disabled:opacity-50",children:"Remove"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:`desc-${e.id}-${F}`,className:"block text-xs font-medium text-slate-400 mb-0.5",children:"Description"}),r.jsx("input",{id:`desc-${e.id}-${F}`,type:"text",value:M.description,onChange:Z=>P(M,Z.target.value),onBlur:I,maxLength:255,placeholder:"One-line description (255 chars max)",disabled:g,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange disabled:opacity-50"}),r.jsxs("span",{className:"text-[10px] text-slate-500",children:[M.description.length,"/255"]})]})]},M.id||M.url||F))}),V.length===0&&r.jsx("p",{className:"text-sm text-slate-500",children:e.emptyMessage}),w&&r.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:w}),$&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:$})]})},ub=()=>{const{user:e}=$e(),[t,n]=qt(),s=t.get("tab"),a=s==="highest-rated"||s==="highestRated"?"highestRated":"highlights",[l,o]=i.useState(a);i.useEffect(()=>{o(s==="highest-rated"||s==="highestRated"?"highestRated":"highlights")},[s]);const c=u=>{o(u),n({tab:u==="highestRated"?"highest-rated":u},{replace:!0})},d=lt(e??null,"manager");return ys.find(u=>u.id===l)??ys[0],d?r.jsxs("div",{className:"space-y-6",children:[r.jsxs(ie,{to:"/recommended/highlights",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Recommended"]}),r.jsxs("header",{className:"space-y-2",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Recommended Admin"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Manage highlighted and highest-rated site lists. Generate from categories or star ratings, or edit manually."})]}),r.jsx("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:ys.map(u=>r.jsx("button",{type:"button",onClick:()=>c(u.id),className:`px-4 py-2 rounded-md text-sm font-medium ${l===u.id?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:u.label},u.id))}),l==="highlights"&&r.jsx(Au,{config:ys[0]}),l==="highestRated"&&r.jsx(Au,{config:ys[1]})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Recommended Admin"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Only Manager or SuperAdmin users can edit the recommended caches."})]})},La={admin:"SuperAdmin",manager:"Manager",user:"User"},$u=["admin","manager","user"],Ji=[{value:-8,label:"UTC-8"},{value:-5,label:"UTC-5"},{value:0,label:"UTC+0/GMT"}];function an(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function mb(e,t,n){if(!e&&!n)return"";if(!e)return n?`from ${n}`:"";try{const s=new Date(e);if(isNaN(s.getTime()))return e+(n?` from ${n}`:"");const a=s.getTime()+(t||0)*36e5,l=new Date(a),o=y=>y<10?"0"+y:""+y,c=l.getUTCFullYear(),d=o(l.getUTCMonth()+1),u=o(l.getUTCDate()),f=o(l.getUTCHours()),m=o(l.getUTCMinutes()),h=Ji.find(y=>y.value===t),v=h?h.label:t<0?"UTC"+t:"UTC+"+t;let b=`${c}-${d}-${u} ${f}:${m} ${v}`;return n&&(b+=` from ${n}`),b}catch{return e+(n?` from ${n}`:"")}}const fb=()=>{const{user:e}=$e(),t=Vt(),[n,s]=qt(),a=n.get("tab"),l=a==="groups"?"groups":a==="roles"?"roles":"users",[o,c]=i.useState(l);i.useEffect(()=>{c(a==="groups"?"groups":a==="roles"?"roles":"users")},[a]);const d=L=>{c(L);const te=new URLSearchParams(n);L==="groups"?te.set("tab","groups"):L==="roles"?te.set("tab","roles"):te.delete("tab"),s(te)},[u,f]=i.useState([]),[m,h]=i.useState(!0),[v,b]=i.useState(null),[y,C]=i.useState(""),[x,p]=i.useState(-8),[g,j]=i.useState([]),[w,E]=i.useState(!0),[$,R]=i.useState(null),[H,O]=i.useState(""),[q,W]=i.useState(""),[se,J]=i.useState(""),[V,ce]=i.useState(!1),[pe,S]=i.useState(null),[P,I]=i.useState(null),[B,k]=i.useState(""),[K,ne]=i.useState(""),[_,z]=i.useState(!1),[U,M]=i.useState(null),[F,Z]=i.useState(null),[N,T]=i.useState([]),[G,Q]=i.useState(!0),[D,X]=i.useState(null),[ae,ue]=i.useState(""),[xe,ye]=i.useState([]),[be,Ke]=i.useState([]),[ot,le]=i.useState(!1),[Ne,Fe]=i.useState(null),[Te,Se]=i.useState(null),[_e,Be]=i.useState([]),[Xe,it]=i.useState([]),[nt,$t]=i.useState(!1),[fn,Et]=i.useState(null),[rn,oe]=i.useState(null),ge=lt(e??null,"manager"),We=(e==null?void 0:e.role)==="superadmin",Ie=async L=>{var de;const te=an();if(!te){b("API URL not set."),h(!1);return}if(!((de=window.auth)!=null&&de.getAccessToken)){b("Sign in required."),h(!1);return}h(!0),b(null);try{let je=`${te}/admin/users`;L&&(je+=`?paginationToken=${encodeURIComponent(L)}`);const we=await Y(je);if(!we.ok){const Jt=await we.json().catch(()=>({}));throw new Error(Jt.error||"Failed to load users")}const Pe=await we.json();f(Jt=>L?[...Jt,...Pe.users??[]]:Pe.users??[]),C(Pe.paginationToken??"")}catch(je){b((je==null?void 0:je.message)??"Failed to load users")}finally{h(!1)}},ke=async L=>{const te=an();if(!te)return{cognitoGroups:[],customGroups:[]};try{const ve=await Y(`${te}/admin/users/${encodeURIComponent(L.username)}/groups`);if(!ve.ok)return{cognitoGroups:[],customGroups:[]};const de=await ve.json();return{cognitoGroups:de.cognitoGroups??[],customGroups:de.customGroups??[]}}catch{return{cognitoGroups:[],customGroups:[]}}},ee=async()=>{var ve;const L=an();if(!L){R("API URL not set."),E(!1);return}if(!((ve=window.auth)!=null&&ve.getAccessToken)){R("Sign in required."),E(!1);return}E(!0),R(null);try{const de=await Y(`${L}/admin/groups`);if(!de.ok)throw new Error(await de.text());const we=((await de.json()).groups??[]).map(Pe=>({name:Pe.name??(Pe.PK??"").replace("GROUP#",""),description:Pe.description,permissions:Array.isArray(Pe.permissions)?Pe.permissions:[]}));we.sort((Pe,Jt)=>Pe.name.toLowerCase().localeCompare(Jt.name.toLowerCase())),j(we)}catch(de){R((de==null?void 0:de.message)??"Failed to load groups")}finally{E(!1)}};i.useEffect(()=>{const L=parseInt(sessionStorage.getItem("funkedupshift_lastlogin_tz")??"-8",10);!isNaN(L)&&Ji.some(te=>te.value===L)&&p(L)},[]),i.useEffect(()=>{ge&&o==="users"&&Ie()},[ge,o]),i.useEffect(()=>{ge&&(o==="groups"||o==="roles")&&ee()},[ge,o]);const me=async()=>{var ve;const L=an();if(!L){X("API URL not set."),Q(!1);return}if(!((ve=window.auth)!=null&&ve.getAccessToken)){X("Sign in required."),Q(!1);return}Q(!0),X(null);try{const de=await Y(`${L}/admin/roles`);if(!de.ok){const we=await de.json().catch(()=>({}));throw new Error(we.error||"Failed to load roles")}const je=await de.json();T(je.roles??[])}catch(de){X((de==null?void 0:de.message)??"Failed to load roles")}finally{Q(!1)}};i.useEffect(()=>{We&&o==="roles"&&me()},[We,o]);const Ue=L=>{t(`/admin/users/edit?username=${encodeURIComponent(L.username)}&email=${encodeURIComponent(L.email??"")}&status=${encodeURIComponent(L.status??"")}`)},Me=(L,te)=>{const ve=[];return(L||[]).forEach(de=>{const je=La[de]||de,we=de==="admin"?"bg-amber-500/20 text-amber-200":de==="manager"?"bg-blue-500/20 text-blue-200":"bg-slate-600/30 text-slate-300";ve.push(r.jsx("span",{className:`inline-block px-2 py-0.5 rounded text-xs mr-1 ${we}`,children:je},`c-${de}`))}),(te||[]).forEach(de=>{ve.push(r.jsx("span",{className:"inline-block px-2 py-0.5 rounded text-xs mr-1 bg-emerald-500/20 text-emerald-200",children:de},`x-${de}`))}),ve.length?ve:r.jsx("span",{className:"text-slate-500",children:""})},Ee=L=>{I(L.name),k(L.description??""),ne((L.permissions??[]).join(", ")),M(null)},Le=()=>{I(null),k(""),ne(""),M(null)},De=async L=>{var we;L.preventDefault();const te=H.trim();if(!te)return;const ve=an();if(!ve||!((we=window.auth)!=null&&we.getAccessToken))return;const je=se.split(",").map(Pe=>Pe.trim()).filter(Boolean);ce(!0),S(null),R(null);try{const Pe=await Y(`${ve}/admin/groups`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:te,description:q.trim(),permissions:je})});if(!Pe.ok){const Jt=await Pe.json().catch(()=>({}));throw new Error(Jt.error||"Failed to create group")}O(""),W(""),J(""),S("Group created."),ee()}catch(Pe){R((Pe==null?void 0:Pe.message)??"Failed to create group")}finally{ce(!1)}},pn=async L=>{var je;if(L.preventDefault(),!P)return;const te=an();if(!te||!((je=window.auth)!=null&&je.getAccessToken))return;const de=K.split(",").map(we=>we.trim()).filter(Boolean);z(!0),M(null);try{const we=await Y(`${te}/admin/groups/${encodeURIComponent(P)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:B,permissions:de})});if(!we.ok){const Pe=await we.json().catch(()=>({}));throw new Error(Pe.error||"Failed to update group")}j(Pe=>Pe.map(Jt=>Jt.name===P?{...Jt,description:B,permissions:de}:Jt)),Le()}catch(we){M((we==null?void 0:we.message)??"Failed to update group")}finally{z(!1)}},hn=async L=>{var de;if(!window.confirm(`Delete group "${L}"? Members will lose access.`))return;const te=an();if(!(!te||!((de=window.auth)!=null&&de.getAccessToken))){Z(L);try{const je=await Y(`${te}/admin/groups/${encodeURIComponent(L)}`,{method:"DELETE"});if(!je.ok){const we=await je.json().catch(()=>({}));throw new Error(we.error||"Failed to delete group")}j(we=>we.filter(Pe=>Pe.name!==L)),P===L&&Le()}catch(je){R((je==null?void 0:je.message)??"Failed to delete group")}finally{Z(null)}}},gt=L=>{const te=parseInt(L.target.value,10);p(te),sessionStorage.setItem("funkedupshift_lastlogin_tz",String(te))},ut=(L,te,ve)=>{te.includes(L)?ve(te.filter(de=>de!==L)):ve([...te,L])},xn=(L,te,ve)=>{te.includes(L)?ve(te.filter(de=>de!==L)):ve([...te,L])},os=async L=>{var je;L.preventDefault();const te=ae.trim();if(!te)return;const ve=an();if(!(!ve||!((je=window.auth)!=null&&je.getAccessToken))){le(!0),Fe(null),X(null);try{const we=await Y(`${ve}/admin/roles`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:te,cognitoGroups:xe,customGroups:be})});if(!we.ok){const Pe=await we.json().catch(()=>({}));throw new Error(Pe.error||"Failed to create role")}ue(""),ye([]),Ke([]),Fe("Role created."),me()}catch(we){X((we==null?void 0:we.message)??"Failed to create role")}finally{le(!1)}}},ql=L=>{Se(L.name),Be(L.cognitoGroups??[]),it(L.customGroups??[]),Et(null)},_t=()=>{Se(null),Be([]),it([]),Et(null)},A=async L=>{var de;if(L.preventDefault(),!Te)return;const te=an();if(!(!te||!((de=window.auth)!=null&&de.getAccessToken))){$t(!0),Et(null);try{const je=await Y(`${te}/admin/roles/${encodeURIComponent(Te)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({cognitoGroups:_e,customGroups:Xe})});if(!je.ok){const we=await je.json().catch(()=>({}));throw new Error(we.error||"Failed to update role")}T(we=>we.map(Pe=>Pe.name===Te?{...Pe,cognitoGroups:_e,customGroups:Xe}:Pe)),_t()}catch(je){Et((je==null?void 0:je.message)??"Failed to update role")}finally{$t(!1)}}},he=async L=>{var de;if(!window.confirm(`Delete role "${L}"?`))return;const te=an();if(!(!te||!((de=window.auth)!=null&&de.getAccessToken))){oe(L);try{const je=await Y(`${te}/admin/roles/${encodeURIComponent(L)}`,{method:"DELETE"});if(!je.ok){const we=await je.json().catch(()=>({}));throw new Error(we.error||"Failed to delete role")}T(we=>we.filter(Pe=>Pe.name!==L)),Te===L&&_t()}catch(je){X((je==null?void 0:je.message)??"Failed to delete role")}finally{oe(null)}}};return ge?r.jsxs("div",{className:"space-y-6",children:[r.jsxs(ie,{to:"/",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Home"]}),r.jsxs("header",{className:"space-y-2",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Membership"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Manage users and groups."})]}),r.jsxs("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:[r.jsx("button",{type:"button",onClick:()=>d("users"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="users"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Users"}),r.jsx("button",{type:"button",onClick:()=>d("groups"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="groups"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Groups"}),We&&r.jsx("button",{type:"button",onClick:()=>d("roles"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="roles"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Roles"})]}),o==="users"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("label",{htmlFor:"tz-select",className:"text-slate-500",children:"Last login timezone:"}),r.jsx("select",{id:"tz-select",value:x,onChange:gt,className:"rounded border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 text-sm",children:Ji.map(L=>r.jsx("option",{value:L.value,children:L.label},L.value))})]}),v&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:v}),r.jsx("div",{className:"overflow-x-auto rounded-lg border border-slate-800",children:r.jsxs("table",{className:"min-w-full divide-y divide-slate-800",children:[r.jsx("thead",{className:"bg-slate-900/80",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Email"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Status"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Last login"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"System Roles"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Custom Groups"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-800",children:m&&u.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-slate-500",children:"Loading"})}):u.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-slate-500",children:"No users found."})}):u.map(L=>r.jsx(pb,{user:L,tzOffset:x,formatLastLogin:mb,renderGroupBadges:Me,loadUserGroups:ke,onClick:()=>Ue(L)},L.username))})]})}),y&&r.jsx("div",{className:"flex justify-center",children:r.jsx("button",{type:"button",onClick:()=>Ie(y),disabled:m,className:"rounded-md border border-slate-700 px-4 py-2 text-sm font-medium text-slate-200 hover:bg-slate-800 disabled:opacity-50",children:m?"Loading":"Load more"})})]}),o==="groups"&&r.jsxs(r.Fragment,{children:[r.jsxs("form",{className:"space-y-3 max-w-md",onSubmit:De,children:[r.jsx("h2",{className:"text-sm font-medium text-slate-300",children:"Create group"}),r.jsx("input",{type:"text",value:H,onChange:L=>O(L.target.value),placeholder:"Name (alphanumeric, underscore, hyphen)",required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),r.jsx("input",{type:"text",value:q,onChange:L=>W(L.target.value),placeholder:"Description (optional)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),r.jsx("input",{type:"text",value:se,onChange:L=>J(L.target.value),placeholder:"Permissions (comma-separated, e.g. media:edit, sites:add)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),r.jsx("button",{type:"submit",disabled:V||!H.trim(),className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:V?"Creating":"Create"}),pe&&r.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:pe}),$&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:$})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-sm font-medium text-slate-300 mb-2",children:"Custom groups"}),w?r.jsx("p",{className:"text-sm text-slate-500",children:"Loading"}):g.length===0?r.jsx("p",{className:"text-sm text-slate-500",children:"No custom groups yet. Create one above."}):r.jsx("ul",{className:"space-y-2",children:g.map(L=>r.jsx("li",{className:"rounded-lg border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm",children:P===L.name?r.jsxs("form",{onSubmit:pn,className:"space-y-2",children:[r.jsx("span",{className:"font-medium text-slate-200",children:L.name}),r.jsx("input",{type:"text",value:B,onChange:te=>k(te.target.value),placeholder:"Description (optional)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),r.jsx("input",{type:"text",value:K,onChange:te=>ne(te.target.value),placeholder:"Permissions (comma-separated)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),r.jsxs("div",{className:"flex gap-2 flex-wrap",children:[r.jsx("button",{type:"submit",disabled:_,className:"rounded-md bg-brand-orange px-3 py-1.5 text-xs font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:_?"Saving":"Save"}),r.jsx("button",{type:"button",onClick:Le,className:"rounded-md border border-slate-700 px-3 py-1.5 text-xs font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"}),r.jsx("button",{type:"button",onClick:()=>hn(L.name),disabled:F===L.name,className:"rounded-md border border-red-500/60 px-3 py-1.5 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:F===L.name?"Deleting":"Delete"})]}),U&&r.jsx("p",{className:"text-xs text-red-400",children:U})]}):r.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("span",{className:"font-medium text-slate-200",children:L.name}),L.description&&r.jsx("span",{className:"text-slate-500 ml-2",children:L.description}),L.permissions&&L.permissions.length>0&&r.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Permissions: ",L.permissions.join(", ")]})]}),r.jsxs("div",{className:"flex gap-2 shrink-0",children:[r.jsx("button",{type:"button",onClick:()=>Ee(L),className:"rounded-md border border-slate-700 px-2 py-1 text-xs font-medium text-slate-300 hover:bg-slate-800",children:"Edit"}),r.jsx("button",{type:"button",onClick:()=>hn(L.name),disabled:F===L.name,className:"rounded-md border border-red-500/60 px-2 py-1 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:F===L.name?"Deleting":"Delete"})]})]})},L.name))})]})]}),o==="roles"&&We&&r.jsxs(r.Fragment,{children:[r.jsxs("form",{className:"space-y-3 max-w-md",onSubmit:os,children:[r.jsx("h2",{className:"text-sm font-medium text-slate-300",children:"Create role"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Define a named role by selecting Cognito groups and custom groups. Use for impersonation."}),r.jsx("input",{type:"text",value:ae,onChange:L=>ue(L.target.value),placeholder:"Role name (e.g. Squash Manager)",required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Cognito groups"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:$u.map(L=>r.jsx("button",{type:"button",onClick:()=>ut(L,xe,ye),className:`rounded-md px-2 py-1 text-xs font-medium ${xe.includes(L)?"bg-blue-500/30 text-blue-200":"border border-slate-600 text-slate-400 hover:bg-slate-800"}`,children:La[L]||L},L))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Custom groups"}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[g.map(L=>r.jsx("button",{type:"button",onClick:()=>xn(L.name,be,Ke),className:`rounded-md px-2 py-1 text-xs font-medium ${be.includes(L.name)?"bg-emerald-500/30 text-emerald-200":"border border-slate-600 text-slate-400 hover:bg-slate-800"}`,children:L.name},L.name)),g.length===0&&r.jsx("span",{className:"text-xs text-slate-500",children:"Create groups first."})]})]}),r.jsx("button",{type:"submit",disabled:ot||!ae.trim(),className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:ot?"Creating":"Create"}),Ne&&r.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:Ne}),D&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:D})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-sm font-medium text-slate-300 mb-2",children:"Defined roles"}),G?r.jsx("p",{className:"text-sm text-slate-500",children:"Loading"}):N.length===0?r.jsx("p",{className:"text-sm text-slate-500",children:"No roles yet. Create one above."}):r.jsx("ul",{className:"space-y-2",children:N.map(L=>r.jsx("li",{className:"rounded-lg border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm",children:Te===L.name?r.jsxs("form",{onSubmit:A,className:"space-y-2",children:[r.jsx("span",{className:"font-medium text-slate-200",children:L.name}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Cognito groups"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:$u.map(te=>r.jsx("button",{type:"button",onClick:()=>ut(te,_e,Be),className:`rounded-md px-2 py-1 text-xs ${_e.includes(te)?"bg-blue-500/30 text-blue-200":"border border-slate-600 text-slate-400"}`,children:La[te]||te},te))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Custom groups"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(te=>r.jsx("button",{type:"button",onClick:()=>xn(te.name,Xe,it),className:`rounded-md px-2 py-1 text-xs ${Xe.includes(te.name)?"bg-emerald-500/30 text-emerald-200":"border border-slate-600 text-slate-400"}`,children:te.name},te.name))})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"submit",disabled:nt,className:"rounded-md bg-brand-orange px-3 py-1.5 text-xs font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:nt?"Saving":"Save"}),r.jsx("button",{type:"button",onClick:_t,className:"rounded-md border border-slate-700 px-3 py-1.5 text-xs text-slate-300 hover:bg-slate-800",children:"Cancel"}),r.jsx("button",{type:"button",onClick:()=>he(L.name),disabled:rn===L.name,className:"rounded-md border border-red-500/60 px-3 py-1.5 text-xs text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:rn===L.name?"Deleting":"Delete"})]}),fn&&r.jsx("p",{className:"text-xs text-red-400",children:fn})]}):r.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("span",{className:"font-medium text-slate-200",children:L.name}),r.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[(L.cognitoGroups??[]).map(te=>r.jsx("span",{className:"inline-block px-2 py-0.5 rounded text-xs bg-blue-500/20 text-blue-200",children:La[te]||te},`c-${te}`)),(L.customGroups??[]).map(te=>r.jsx("span",{className:"inline-block px-2 py-0.5 rounded text-xs bg-emerald-500/20 text-emerald-200",children:te},`x-${te}`))]})]}),r.jsxs("div",{className:"flex gap-2 shrink-0",children:[r.jsx("button",{type:"button",onClick:()=>ql(L),className:"rounded-md border border-slate-700 px-2 py-1 text-xs text-slate-300 hover:bg-slate-800",children:"Edit"}),r.jsx("button",{type:"button",onClick:()=>he(L.name),disabled:rn===L.name,className:"rounded-md border border-red-500/60 px-2 py-1 text-xs text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:rn===L.name?"Deleting":"Delete"})]})]})},L.name))})]})]})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Membership"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})},pb=({user:e,tzOffset:t,formatLastLogin:n,renderGroupBadges:s,loadUserGroups:a,onClick:l})=>{const[o,c]=i.useState(null);return i.useEffect(()=>{let d=!1;return a(e).then(u=>{d||c(u)}),()=>{d=!0}},[e.username]),r.jsxs("tr",{className:"cursor-pointer hover:bg-slate-800/50 transition-colors",onClick:l,children:[r.jsx("td",{className:"px-4 py-3 text-sm text-slate-200",children:e.email||e.username||""}),r.jsx("td",{className:"px-4 py-3 text-sm text-slate-400",children:e.status||""}),r.jsx("td",{className:"px-4 py-3 text-sm text-slate-400",children:n(e.lastLoginAt??"",t,e.lastLoginIp)}),r.jsx("td",{className:"px-4 py-3 text-sm",children:o?s(o.cognitoGroups,[]):r.jsx("span",{className:"text-slate-500",children:""})}),r.jsx("td",{className:"px-4 py-3 text-sm",children:o?s([],o.customGroups):r.jsx("span",{className:"text-slate-500",children:""})})]})};function nr(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Iu=100,hb=5*1024*1024,xb=()=>{const e=Vt(),{user:t}=$e(),[n,s]=qt(),a=n.get("tab"),l=a==="categories"?"categories":"add",[o,c]=i.useState(l);i.useEffect(()=>{c(a==="categories"?"categories":"add")},[a]);const d=ee=>{c(ee);const me=new URLSearchParams(n);ee==="categories"?me.set("tab","categories"):me.delete("tab"),s(me)},[u,f]=i.useState([]),[m,h]=i.useState(""),[v,b]=i.useState(""),[y,C]=i.useState(""),[x,p]=i.useState(!1),[g,j]=i.useState(null),[w,E]=i.useState(null),[$,R]=i.useState(null),[H,O]=i.useState(""),[q,W]=i.useState([]),[se,J]=i.useState(""),[V,ce]=i.useState(!1),[pe,S]=i.useState(!1),[P,I]=i.useState(null),[B,k]=i.useState(null),[K,ne]=i.useState(!1),_=i.useRef(null),[z,U]=i.useState(!0),[M,F]=i.useState(null),[Z,N]=i.useState(""),[T,G]=i.useState(""),[Q,D]=i.useState(!1),[X,ae]=i.useState(null),[ue,xe]=i.useState(null),[ye,be]=i.useState(""),[Ke,ot]=i.useState(""),[le,Ne]=i.useState(!1),[Fe,Te]=i.useState(null),[Se,_e]=i.useState(null),Be=lt(t??null,"manager");i.useEffect(()=>{var Ue;if(!Be)return;const ee=nr();if(!ee)return;const me=window;(Ue=me.auth)!=null&&Ue.getAccessToken&&(async()=>{if(!await new Promise(De=>me.auth.getAccessToken(De)))return;const Me=await Y(`${ee}/categories`);if(!Me.ok)return;const Le=((await Me.json()).categories??[]).map(De=>({id:De.PK||De.id||"",name:De.name||De.PK||"",description:De.description}));f(Le)})()},[Be]),i.useEffect(()=>{function ee(me){_.current&&!_.current.contains(me.target)&&ce(!1)}if(V)return document.addEventListener("mousedown",ee),()=>document.removeEventListener("mousedown",ee)},[V]);const Xe=u.filter(ee=>!q.includes(ee.id)&&(!se.trim()||(ee.name||"").toLowerCase().includes(se.toLowerCase()))),it=ee=>{var Me;const me=(Me=ee.target.files)==null?void 0:Me[0];if(j(me??null),me&&O(""),R(null),w&&(URL.revokeObjectURL(w),E(null)),!me)return;if(me.size>hb){R("Logo must be 5 MB or smaller.");return}const Ue=new Image;Ue.onload=()=>{if(Ue.naturalWidth<Iu||Ue.naturalHeight<Iu){R("Logo must be at least 100100 pixels.");return}R(null),E(URL.createObjectURL(me))},Ue.onerror=()=>R("Please choose a valid image file."),Ue.src=URL.createObjectURL(me)},nt=ee=>{q.includes(ee)||W([...q,ee]),J("")},$t=ee=>{W(q.filter(me=>me!==ee))},fn=async()=>{var Ue;const ee=nr();if(!ee){F("API URL not set."),U(!1);return}if(!((Ue=window.auth)!=null&&Ue.getAccessToken)){F("Sign in required."),U(!1);return}U(!0),F(null);try{const Me=await Y(`${ee}/categories`);if(!Me.ok)throw new Error(await Me.text());const Le=((await Me.json()).categories??[]).map(De=>({id:De.PK||De.id||"",name:De.name||De.PK||"",description:De.description}));f(Le)}catch(Me){F((Me==null?void 0:Me.message)??"Failed to load categories.")}finally{U(!1)}};i.useEffect(()=>{Be&&o==="categories"&&fn()},[Be,o]);const Et=async()=>{var Me;const ee=m.trim();if(!ee){k("Enter URL first.");return}const me=nr();if(!me){k("API URL not set.");return}if(!((Me=window.auth)!=null&&Me.getAccessToken)){k("Sign in required.");return}ne(!0),k(null);try{const Ee=await Y(`${me}/sites/generate-description`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:ee})});if(!Ee.ok)throw new Error(await Ee.text());const Le=await Ee.json();C(Le.description??""),p(!0)}catch(Ee){k((Ee==null?void 0:Ee.message)??"Failed to generate description.")}finally{ne(!1)}},rn=async ee=>{var Ee;ee.preventDefault();const me=m.trim();if(!me){k("URL is required.");return}const Ue=nr();if(!Ue){k("API URL not set.");return}if(!((Ee=window.auth)!=null&&Ee.getAccessToken)){k("Sign in required.");return}if(!(g&&$)){S(!0),k(null),I(null);try{let Le=null;if(H.trim()){const gt=await Y(`${Ue}/sites/logo-from-url`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({siteId:"new",imageUrl:H.trim()})});if(!gt.ok){const xn=await gt.json().catch(()=>({}));throw new Error(xn.error||await gt.text())}const ut=await gt.json();ut.key&&(Le=ut.key)}else if(g){const gt=await Y(`${Ue}/sites/logo-upload`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({siteId:"new",contentType:g.type||"image/png"})});if(!gt.ok)throw new Error("Logo upload request failed");const{uploadUrl:ut,key:xn}=await gt.json();if(!(await fetch(ut,{method:"PUT",headers:{"Content-Type":g.type||"image/png"},body:g})).ok)throw new Error("Logo upload failed");Le=xn}const De={url:me,title:v.trim()||me,description:y.trim(),categoryIds:q};x&&(De.descriptionAiGenerated=!0),Le&&(De.logoKey=Le);const pn=await Y(`${Ue}/sites`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(De)});if(!pn.ok)throw new Error(await pn.text());const hn=await pn.json();I(`Site added: ${hn.title||hn.url||me}`),h(""),b(""),C(""),p(!1),j(null),w&&URL.revokeObjectURL(w),E(null),W([]),setTimeout(()=>e("/websites"),1500)}catch(Le){k((Le==null?void 0:Le.message)??"Failed to add site.")}finally{S(!1)}}},oe=ee=>{xe(ee.id),be(ee.name),ot(ee.description??"")},ge=()=>{xe(null),be(""),ot(""),Te(null)},We=async ee=>{var Me;if(ee.preventDefault(),!ue)return;const me=nr();if(!(!me||!((Me=window.auth)!=null&&Me.getAccessToken))){Ne(!0),Te(null);try{const Ee=await Y(`${me}/categories`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:ue,name:ye.trim(),description:Ke.trim()||void 0})});if(!Ee.ok)throw new Error(await Ee.text());f(Le=>Le.map(De=>De.id===ue?{...De,name:ye.trim(),description:Ke.trim()||void 0}:De)),ge()}catch(Ee){Te((Ee==null?void 0:Ee.message)??"Failed to update category.")}finally{Ne(!1)}}},Ie=async ee=>{var Me;if(!window.confirm("Delete this category? Sites using it will lose this category."))return;const me=nr();if(!(!me||!((Me=window.auth)!=null&&Me.getAccessToken))){_e(ee);try{const Ee=await Y(`${me}/categories?id=${encodeURIComponent(ee)}`,{method:"DELETE"});if(!Ee.ok)throw new Error(await Ee.text());f(Le=>Le.filter(De=>De.id!==ee)),ue===ee&&ge()}catch(Ee){F((Ee==null?void 0:Ee.message)??"Failed to delete category.")}finally{_e(null)}}},ke=async ee=>{var Ee;ee.preventDefault();const me=Z.trim();if(!me)return;const Ue=nr();if(!(!Ue||!((Ee=window.auth)!=null&&Ee.getAccessToken))){D(!0),ae(null),F(null);try{const Le=await Y(`${Ue}/categories`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:me,description:T.trim()})});if(!Le.ok)throw new Error(await Le.text());N(""),G(""),ae("Category created."),fn()}catch(Le){F((Le==null?void 0:Le.message)??"Failed to create category.")}finally{D(!1)}}};return Be?r.jsxs("div",{className:"space-y-6",children:[r.jsxs(ie,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Websites"]}),r.jsxs("header",{className:"space-y-2",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Websites"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Add sites and manage website categories."})]}),r.jsxs("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:[r.jsx("button",{type:"button",onClick:()=>d("add"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="add"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Add Site"}),r.jsx("button",{type:"button",onClick:()=>d("categories"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="categories"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Website Categories"})]}),o==="add"&&r.jsxs("form",{className:"space-y-4 max-w-xl",onSubmit:rn,children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"URL *"}),r.jsx("input",{type:"url",value:m,onChange:ee=>h(ee.target.value),placeholder:"https://example.com",required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Title (optional)"}),r.jsx("input",{type:"text",value:v,onChange:ee=>b(ee.target.value),placeholder:"Display title",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description (optional)"}),r.jsx("textarea",{value:y,onChange:ee=>{C(ee.target.value),p(!1)},placeholder:"Short description",rows:4,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),r.jsx("button",{type:"button",onClick:Et,disabled:K||!m.trim(),className:"mt-2 rounded-md border border-slate-700 bg-slate-800 px-3 py-1.5 text-xs font-medium text-slate-200 hover:bg-slate-700 disabled:opacity-50",children:K?"Generating":"Generate AI description"}),x&&r.jsx("span",{className:"ml-2 text-xs uppercase tracking-wide text-slate-500",children:"AI summary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Logo (optional, min 100100, max 5 MB)"}),r.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/gif,image/webp",onChange:it,className:"block w-full text-xs text-slate-300 file:mr-3 file:rounded-md file:border-0 file:bg-slate-800 file:px-3 file:py-1.5 file:text-slate-100"}),r.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Or paste image URL (image will be copied to S3 on save):"}),r.jsx("input",{type:"url",value:H,onChange:ee=>{O(ee.target.value),ee.target.value.trim()&&j(null)},placeholder:"https://example.com/logo.png",className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),w&&r.jsx("div",{className:"mt-2",children:r.jsx("img",{src:w,alt:"Preview",className:"h-16 w-16 rounded-lg border border-slate-700 object-cover"})}),$&&r.jsx("p",{className:"mt-1 text-xs text-red-400",children:$})]}),r.jsxs("div",{ref:_,className:"relative",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Categories (optional)"}),r.jsx("input",{type:"text",value:se,onChange:ee=>J(ee.target.value),onFocus:()=>ce(!0),placeholder:"Search and select",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),V&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"absolute left-0 right-0 top-full z-10 mt-1 max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",children:Xe.length?Xe.map(ee=>r.jsx("button",{type:"button",onClick:()=>nt(ee.id),className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:ee.name},ee.id)):r.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:"No matches"})}),u.length===0&&r.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["No categories."," ",r.jsx("button",{type:"button",onClick:()=>d("categories"),className:"text-brand-orange hover:underline",children:"Create categories"})]})]}),r.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:q.map(ee=>{const me=u.find(Ue=>Ue.id===ee);return r.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(me==null?void 0:me.name)??ee,r.jsx("button",{type:"button",onClick:()=>$t(ee),className:"hover:text-red-400","aria-label":"Remove",children:""})]},ee)})})]}),r.jsx("button",{type:"submit",disabled:pe,className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:pe?"Adding":"Add Site"}),P&&r.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:P}),B&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:B})]}),o==="categories"&&r.jsxs(r.Fragment,{children:[r.jsxs("form",{className:"space-y-3 max-w-md",onSubmit:ke,children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"New category name"}),r.jsx("input",{type:"text",value:Z,onChange:ee=>N(ee.target.value),placeholder:"e.g. Developer tools",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description (optional)"}),r.jsx("input",{type:"text",value:T,onChange:ee=>G(ee.target.value),placeholder:"Optional description",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),r.jsx("button",{type:"submit",disabled:Q||!Z.trim(),className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:Q?"Creating":"Create category"}),X&&r.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:X}),M&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:M})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-sm font-medium text-slate-300 mb-2",children:"Existing categories"}),z?r.jsx("p",{className:"text-sm text-slate-500",children:"Loading"}):u.length===0?r.jsx("p",{className:"text-sm text-slate-500",children:"No categories yet. Create one above."}):r.jsx("ul",{className:"space-y-2",children:u.map(ee=>r.jsx("li",{className:"rounded-lg border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm",children:ue===ee.id?r.jsxs("form",{onSubmit:We,className:"space-y-2",children:[r.jsx("input",{type:"text",value:ye,onChange:me=>be(me.target.value),placeholder:"Name",required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",autoFocus:!0}),r.jsx("input",{type:"text",value:Ke,onChange:me=>ot(me.target.value),placeholder:"Description (optional)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),r.jsxs("div",{className:"flex gap-2 flex-wrap",children:[r.jsx("button",{type:"submit",disabled:le||!ye.trim(),className:"rounded-md bg-brand-orange px-3 py-1.5 text-xs font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:le?"Saving":"Save"}),r.jsx("button",{type:"button",onClick:ge,className:"rounded-md border border-slate-700 px-3 py-1.5 text-xs font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"}),r.jsx("button",{type:"button",onClick:()=>Ie(ee.id),disabled:Se===ee.id,className:"rounded-md border border-red-500/60 px-3 py-1.5 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:Se===ee.id?"Deleting":"Delete"})]}),Fe&&r.jsx("p",{className:"text-xs text-red-400",children:Fe})]}):r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsxs("button",{type:"button",onClick:()=>oe(ee),className:"flex-1 min-w-0 text-left hover:bg-slate-800/50 rounded px-1 -mx-1 py-1 -my-1 transition-colors",children:[r.jsx("span",{className:"font-medium text-slate-200",children:ee.name}),ee.description&&r.jsx("span",{className:"text-slate-500 truncate max-w-xs ml-2",children:ee.description})]}),r.jsx("button",{type:"button",onClick:()=>Ie(ee.id),disabled:Se===ee.id,className:"rounded px-2 py-1 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50 shrink-0","aria-label":"Delete category",children:Se===ee.id?"":"Delete"})]})},ee.id))})]})]})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Websites"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})};function Sr(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function gb(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}const yb=()=>{const e=Vt(),{user:t}=$e(),[n,s]=qt(),a=n.get("tab"),l=a==="categories"?"categories":"add",[o,c]=i.useState(l);i.useEffect(()=>{c(a==="categories"?"categories":"add")},[a]);const d=oe=>{c(oe);const ge=new URLSearchParams(n);oe==="categories"?ge.set("tab","categories"):ge.delete("tab"),s(ge)},[u,f]=i.useState([]),[m,h]=i.useState(""),[v,b]=i.useState(""),[y,C]=i.useState(null),[x,p]=i.useState(null),[g,j]=i.useState(null),[w,E]=i.useState(!1),[$,R]=i.useState([]),[H,O]=i.useState(""),[q,W]=i.useState(!1),[se,J]=i.useState(!1),[V,ce]=i.useState(null),[pe,S]=i.useState(null),P=i.useRef(null),[I,B]=i.useState(!0),[k,K]=i.useState(null),[ne,_]=i.useState(""),[z,U]=i.useState(""),[M,F]=i.useState(!1),[Z,N]=i.useState(null),[T,G]=i.useState(null),[Q,D]=i.useState(""),[X,ae]=i.useState(""),[ue,xe]=i.useState(!1),[ye,be]=i.useState(null),[Ke,ot]=i.useState(null),le=lt(t??null,"manager");i.useEffect(()=>{if(!le)return;const oe=Sr();oe&&(async()=>{try{const ge=await Y(`${oe}/media-categories`);if(!ge.ok)return;const Ie=((await ge.json()).categories??[]).map(ke=>({id:ke.PK||ke.id||"",name:ke.name||ke.PK||"",description:ke.description}));f(Ie)}catch{}})()},[le]),i.useEffect(()=>{function oe(ge){P.current&&!P.current.contains(ge.target)&&W(!1)}if(q)return document.addEventListener("mousedown",oe),()=>document.removeEventListener("mousedown",oe)},[q]);const Ne=u.filter(oe=>!$.includes(oe.id)&&(!H.trim()||(oe.name||"").toLowerCase().includes(H.toLowerCase()))),Fe=oe=>{var We;const ge=(We=oe.target.files)==null?void 0:We[0];C(ge??null),j(null),S(null),x&&(URL.revokeObjectURL(x),p(null)),ge&&(p(URL.createObjectURL(ge)),ge.type.startsWith("video/")&&E(!0))},Te=i.useRef(null),Se=oe=>{var We;const ge=(We=oe.target.files)==null?void 0:We[0];ge&&ge.type.startsWith("image/")&&(j(ge),E(!1)),oe.target.value=""},_e=oe=>{$.includes(oe)||R([...$,oe]),O("")},Be=oe=>{R($.filter(ge=>ge!==oe))},Xe=async()=>{var We;const oe=Sr();if(!oe){K("API URL not set."),B(!1);return}if(!((We=window.auth)!=null&&We.getAccessToken)){K("Sign in required."),B(!1);return}B(!0),K(null);try{const Ie=await Y(`${oe}/media-categories`);if(!Ie.ok)throw new Error(await Ie.text());const ee=((await Ie.json()).categories??[]).map(me=>({id:me.PK||me.id||"",name:me.name||me.PK||"",description:me.description}));f(ee)}catch(Ie){K((Ie==null?void 0:Ie.message)??"Failed to load media categories.")}finally{B(!1)}};i.useEffect(()=>{le&&o==="categories"&&Xe()},[le,o]);const it=async oe=>{var ee;if(oe.preventDefault(),!y){S("Please select an image or video file.");return}const ge=Sr();if(!ge){S("API URL not set.");return}if(!((ee=window.auth)!=null&&ee.getAccessToken)){S("Sign in required.");return}const Ie=y.type.startsWith("video/")?"video":"image",ke=`MEDIA#${gb()}`;J(!0),S(null),ce(null);try{const me=await Y(`${ge}/media/upload`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mediaId:ke,mediaType:Ie,contentType:y.type||(Ie==="image"?"image/png":"video/mp4")})});if(!me.ok)throw new Error("Upload request failed");const{uploadUrl:Ue,key:Me}=await me.json(),Ee=await Y(`${ge}/media`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:ke,mediaKey:Me,title:m.trim()||"Untitled",description:v.trim(),mediaType:Ie,categoryIds:$})});if(!Ee.ok)throw new Error(await Ee.text());if(!(await fetch(Ue,{method:"PUT",headers:{"Content-Type":y.type||(Ie==="image"?"image/png":"video/mp4")},body:y})).ok)throw new Error("File upload failed");if(Ie==="video"&&g){const De=await Y(`${ge}/media/thumbnail-upload`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mediaId:ke,contentType:g.type||"image/jpeg"})});if(De.ok){const{uploadUrl:pn,key:hn}=await De.json();(await fetch(pn,{method:"PUT",headers:{"Content-Type":g.type||"image/jpeg"},body:g})).ok&&((await Y(`${ge}/media`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:ke,thumbnailKey:hn})})).ok||console.warn("Thumbnail uploaded but update failed"))}}ce("Media added."),h(""),b(""),C(null),j(null),x&&URL.revokeObjectURL(x),p(null),R([]),setTimeout(()=>e("/media"),1500)}catch(me){S((me==null?void 0:me.message)??"Failed to add media.")}finally{J(!1)}},nt=oe=>{G(oe.id),D(oe.name),ae(oe.description??"")},$t=()=>{G(null),D(""),ae(""),be(null)},fn=async oe=>{var Ie;if(oe.preventDefault(),!T)return;const ge=Sr();if(!(!ge||!((Ie=window.auth)!=null&&Ie.getAccessToken))){xe(!0),be(null);try{const ke=await Y(`${ge}/media-categories`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:T,name:Q.trim(),description:X.trim()||void 0})});if(!ke.ok)throw new Error(await ke.text());f(ee=>ee.map(me=>me.id===T?{...me,name:Q.trim(),description:X.trim()||void 0}:me)),$t()}catch(ke){be((ke==null?void 0:ke.message)??"Failed to update media category.")}finally{xe(!1)}}},Et=async oe=>{var Ie;if(!window.confirm("Delete this media category? Media using it will lose this category."))return;const ge=Sr();if(!(!ge||!((Ie=window.auth)!=null&&Ie.getAccessToken))){ot(oe);try{const ke=await Y(`${ge}/media-categories?id=${encodeURIComponent(oe)}`,{method:"DELETE"});if(!ke.ok)throw new Error(await ke.text());f(ee=>ee.filter(me=>me.id!==oe)),T===oe&&$t()}catch(ke){K((ke==null?void 0:ke.message)??"Failed to delete media category.")}finally{ot(null)}}},rn=async oe=>{var ke;oe.preventDefault();const ge=ne.trim();if(!ge)return;const We=Sr();if(!(!We||!((ke=window.auth)!=null&&ke.getAccessToken))){F(!0),N(null),K(null);try{const ee=await Y(`${We}/media-categories`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:ge,description:z.trim()})});if(!ee.ok)throw new Error(await ee.text());_(""),U(""),N("Media category created."),Xe()}catch(ee){K((ee==null?void 0:ee.message)??"Failed to create media category.")}finally{F(!1)}}};return le?r.jsxs("div",{className:"space-y-6",children:[r.jsxs(ie,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Media"]}),r.jsxs("header",{className:"space-y-2",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Media"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Add media and manage media categories."})]}),r.jsxs("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:[r.jsx("button",{type:"button",onClick:()=>d("add"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="add"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Add Media"}),r.jsx("button",{type:"button",onClick:()=>d("categories"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="categories"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Media Categories"})]}),o==="add"&&r.jsxs("form",{className:"space-y-4 max-w-xl",onSubmit:it,children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Title (optional)"}),r.jsx("input",{type:"text",value:m,onChange:oe=>h(oe.target.value),placeholder:"Untitled",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description (optional)"}),r.jsx("textarea",{value:v,onChange:oe=>b(oe.target.value),placeholder:"Description",rows:3,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Image or video *"}),r.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/gif,image/webp,video/mp4,video/webm",onChange:Fe,className:"block w-full text-xs text-slate-300 file:mr-3 file:rounded-md file:border-0 file:bg-slate-800 file:px-3 file:py-1.5 file:text-slate-100"}),r.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Videos get an auto-generated thumbnail from the 34 sec frame. Change it when editing."}),(y==null?void 0:y.type.startsWith("video/"))&&g&&r.jsxs("p",{className:"mt-1 text-xs text-emerald-400",children:["Custom thumbnail: ",g.name," ",r.jsx("button",{type:"button",onClick:()=>E(!0),className:"text-brand-orange hover:underline",children:"Change"})]}),w&&(y==null?void 0:y.type.startsWith("video/"))&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",role:"dialog","aria-modal":"true","aria-labelledby":"thumbnail-dialog-title",onClick:()=>E(!1),children:r.jsxs("div",{className:"rounded-lg border border-slate-700 bg-slate-900 p-6 shadow-xl max-w-sm w-full mx-4",onClick:oe=>oe.stopPropagation(),children:[r.jsx("h2",{id:"thumbnail-dialog-title",className:"text-lg font-medium text-slate-100 mb-2",children:"Add thumbnail"}),r.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"Choose a custom thumbnail image for this video (optional)."}),r.jsx("input",{ref:Te,type:"file",accept:"image/png,image/jpeg,image/gif,image/webp",onChange:Se,className:"hidden"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",onClick:()=>{var oe;return(oe=Te.current)==null?void 0:oe.click()},className:"rounded-md bg-slate-700 px-3 py-2 text-sm font-medium text-slate-100 hover:bg-slate-600",children:"Choose file"}),r.jsx("button",{type:"button",onClick:()=>E(!1),className:"rounded-md border border-slate-600 px-3 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Skip"})]})]})}),x&&r.jsx("div",{className:"mt-2",children:y!=null&&y.type.startsWith("video/")?r.jsx("video",{src:x,muted:!0,controls:!0,className:"max-h-32 rounded-lg border border-slate-700"}):r.jsx("img",{src:x,alt:"Preview",className:"h-24 w-auto rounded-lg border border-slate-700 object-cover"})})]}),r.jsxs("div",{ref:P,className:"relative",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Media categories (optional)"}),r.jsx("input",{type:"text",value:H,onChange:oe=>O(oe.target.value),onFocus:()=>W(!0),placeholder:"Search and select",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),q&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"absolute left-0 right-0 top-full z-10 mt-1 max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",children:Ne.length?Ne.map(oe=>r.jsx("button",{type:"button",onClick:()=>_e(oe.id),className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:oe.name},oe.id)):r.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:"No matches"})}),u.length===0&&r.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["No categories."," ",r.jsx("button",{type:"button",onClick:()=>d("categories"),className:"text-brand-orange hover:underline",children:"Create media categories"})]})]}),r.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:$.map(oe=>{const ge=u.find(We=>We.id===oe);return r.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(ge==null?void 0:ge.name)??oe,r.jsx("button",{type:"button",onClick:()=>Be(oe),className:"hover:text-red-400","aria-label":"Remove",children:""})]},oe)})})]}),r.jsx("button",{type:"submit",disabled:se||!y,className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:se?"Uploading":"Add Media"}),V&&r.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:V}),pe&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:pe})]}),o==="categories"&&r.jsxs(r.Fragment,{children:[r.jsxs("form",{className:"space-y-3 max-w-md",onSubmit:rn,children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"New category name"}),r.jsx("input",{type:"text",value:ne,onChange:oe=>_(oe.target.value),placeholder:"e.g. Tutorials",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description (optional)"}),r.jsx("input",{type:"text",value:z,onChange:oe=>U(oe.target.value),placeholder:"Optional description",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),r.jsx("button",{type:"submit",disabled:M||!ne.trim(),className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:M?"Creating":"Create media category"}),Z&&r.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:Z}),k&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:k})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-sm font-medium text-slate-300 mb-2",children:"Existing media categories"}),I?r.jsx("p",{className:"text-sm text-slate-500",children:"Loading"}):u.length===0?r.jsx("p",{className:"text-sm text-slate-500",children:"No media categories yet. Create one above."}):r.jsx("ul",{className:"space-y-2",children:u.map(oe=>r.jsx("li",{className:"rounded-lg border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm",children:T===oe.id?r.jsxs("form",{onSubmit:fn,className:"space-y-2",children:[r.jsx("input",{type:"text",value:Q,onChange:ge=>D(ge.target.value),placeholder:"Name",required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",autoFocus:!0}),r.jsx("input",{type:"text",value:X,onChange:ge=>ae(ge.target.value),placeholder:"Description (optional)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),r.jsxs("div",{className:"flex gap-2 flex-wrap",children:[r.jsx("button",{type:"submit",disabled:ue||!Q.trim(),className:"rounded-md bg-brand-orange px-3 py-1.5 text-xs font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:ue?"Saving":"Save"}),r.jsx("button",{type:"button",onClick:$t,className:"rounded-md border border-slate-700 px-3 py-1.5 text-xs font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"}),r.jsx("button",{type:"button",onClick:()=>Et(oe.id),disabled:Ke===oe.id,className:"rounded-md border border-red-500/60 px-3 py-1.5 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:Ke===oe.id?"Deleting":"Delete"})]}),ye&&r.jsx("p",{className:"text-xs text-red-400",children:ye})]}):r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsxs("button",{type:"button",onClick:()=>nt(oe),className:"flex-1 min-w-0 text-left hover:bg-slate-800/50 rounded px-1 -mx-1 py-1 -my-1 transition-colors",children:[r.jsx("span",{className:"font-medium text-slate-200",children:oe.name}),oe.description&&r.jsx("span",{className:"text-slate-500 truncate max-w-xs ml-2",children:oe.description})]}),r.jsx("button",{type:"button",onClick:()=>Et(oe.id),disabled:Ke===oe.id,className:"rounded px-2 py-1 text-xs font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50 shrink-0","aria-label":"Delete category",children:Ke===oe.id?"":"Delete"})]})},oe.id))})]})]})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Media"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})};function Aa(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Uu=100,vb=5*1024*1024,bb=()=>{const{id:e}=as(),t=Vt(),{user:n}=$e(),[s,a]=i.useState(!0),[l,o]=i.useState(""),[c,d]=i.useState(""),[u,f]=i.useState(""),[m,h]=i.useState(!1),[v,b]=i.useState([]),[y,C]=i.useState(""),[x,p]=i.useState(""),[g,j]=i.useState(null),[w,E]=i.useState(!1),[$,R]=i.useState(null),[H,O]=i.useState(""),[q,W]=i.useState(null),[se,J]=i.useState(null),[V,ce]=i.useState([]),[pe,S]=i.useState([]),[P,I]=i.useState(""),[B,k]=i.useState(!1),[K,ne]=i.useState(!1),[_,z]=i.useState(!1),[U,M]=i.useState(!1),[F,Z]=i.useState(null),[N,T]=i.useState(null),G=lt(n??null,"manager"),Q=e?decodeURIComponent(e):"";i.useEffect(()=>{var Te;if(!G||!Q){a(!1);return}const le=Aa();if(!le){T("API URL not set."),a(!1);return}if(!((Te=window.auth)!=null&&Te.getAccessToken)){T("Sign in required."),a(!1);return}let Fe=!1;return(async()=>{try{const Se=await Y(`${le}/sites?id=${encodeURIComponent(Q)}`);if(Se.status===404||!Se.ok){Fe||T("Site not found.");return}const Be=(await Se.json()).site;if(Fe||!Be)return;o(Be.url??""),d(Be.title??""),f(Be.description??""),h(!!Be.descriptionAiGenerated),b(Array.isArray(Be.tags)?Be.tags:[]),C(""),p(Be.scrapedContent??""),j(Be.logoUrl||null),S(Array.isArray(Be.categoryIds)?Be.categoryIds:[]);const Xe=await Y(`${le}/categories`);if(Xe.ok&&!Fe){const it=await Xe.json();ce((it.categories??[]).map(nt=>({id:nt.PK||nt.id||"",name:nt.name||nt.PK||""})))}}catch(Se){Fe||T((Se==null?void 0:Se.message)??"Failed to load.")}finally{Fe||a(!1)}})(),()=>{Fe=!0}},[G,Q]);const D=le=>{var Te;const Ne=(Te=le.target.files)==null?void 0:Te[0];if(R(Ne??null),O(""),J(null),E(!1),q&&(URL.revokeObjectURL(q),W(null)),!Ne)return;if(Ne.size>vb){J("Logo must be 5 MB or smaller.");return}const Fe=new Image;Fe.onload=()=>{if(Fe.naturalWidth<Uu||Fe.naturalHeight<Uu){J("Logo must be at least 100100 pixels.");return}J(null),W(URL.createObjectURL(Ne))},Fe.onerror=()=>J("Please choose a valid image file."),Fe.src=URL.createObjectURL(Ne)},X=le=>{pe.includes(le)||S([...pe,le]),I(""),k(!1)},ae=le=>{S(pe.filter(Ne=>Ne!==le))},ue=()=>{const le=y.trim();le&&!v.includes(le)&&b([...v,le]),C("")},xe=le=>b(v.filter(Ne=>Ne!==le)),ye=V.filter(le=>!pe.includes(le.id)&&(!P.trim()||(le.name||"").toLowerCase().includes(P.toLowerCase()))),be=async()=>{var Te;const le=l.trim();if(!le){T("Enter URL first.");return}const Ne=Aa();if(!Ne){T("API URL not set.");return}if(!((Te=window.auth)!=null&&Te.getAccessToken)){T("Sign in required.");return}M(!0),T(null);try{const Se=await Y(`${Ne}/sites/generate-description`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:le})});if(!Se.ok)throw new Error(await Se.text());const _e=await Se.json();f(_e.description??""),h(!0)}catch(Se){T((Se==null?void 0:Se.message)??"Failed to generate description.")}finally{M(!1)}},Ke=async le=>{var Te;if(le.preventDefault(),!Q)return;const Ne=Aa();if(!Ne){T("API URL not set.");return}if(!((Te=window.auth)!=null&&Te.getAccessToken)){T("Sign in required.");return}if(!($&&se)){ne(!0),T(null),Z(null);try{let Se=null;if($){const Xe=await Y(`${Ne}/sites/logo-upload`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({siteId:Q,contentType:$.type||"image/png"})});if(!Xe.ok)throw new Error("Logo upload request failed");const{uploadUrl:it,key:nt}=await Xe.json();if(!(await fetch(it,{method:"PUT",headers:{"Content-Type":$.type||"image/png"},body:$})).ok)throw new Error("Logo upload failed");Se=nt}else if(H.trim()){const Xe=await Y(`${Ne}/sites/logo-from-url`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({siteId:Q,imageUrl:H.trim()})});if(!Xe.ok){const nt=await Xe.json().catch(()=>({}));throw new Error(nt.error||await Xe.text())}const it=await Xe.json();it.key&&(Se=it.key)}const _e={id:Q,url:l.trim(),title:c.trim()||l.trim(),description:u.trim(),descriptionAiGenerated:m,categoryIds:pe,tags:v,scrapedContent:x.trim()||void 0};w?_e.deleteLogo=!0:Se&&(_e.logoKey=Se);const Be=await Y(`${Ne}/sites`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(_e)});if(!Be.ok)throw new Error(await Be.text());Z("Site updated."),q&&URL.revokeObjectURL(q),R(null),W(null),O(""),setTimeout(()=>t(`/websites/${encodeURIComponent(Q)}`),1200)}catch(Se){T((Se==null?void 0:Se.message)??"Failed to update site.")}finally{ne(!1)}}},ot=async()=>{var Fe;if(!Q||!window.confirm("Delete this site? This cannot be undone."))return;const le=Aa();if(!(!le||!((Fe=window.auth)!=null&&Fe.getAccessToken))){z(!0),T(null);try{const Te=await Y(`${le}/sites`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:Q})});if(!Te.ok)throw new Error(await Te.text());t("/websites")}catch(Te){T((Te==null?void 0:Te.message)??"Failed to delete site.")}finally{z(!1)}}};return G?s?r.jsxs("div",{className:"space-y-4",children:[r.jsxs(ie,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Websites"]}),r.jsx("p",{className:"text-sm text-slate-400",children:"Loading"})]}):N&&!l&&!c?r.jsxs("div",{className:"space-y-4",children:[r.jsxs(ie,{to:"/websites",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Websites"]}),r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:N})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs(ie,{to:`/websites/${encodeURIComponent(Q)}`,className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to site"]}),r.jsxs("header",{className:"space-y-2",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit Site"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Update URL, title, description, logo, categories, and scraped content."})]}),r.jsxs("form",{className:"space-y-4 max-w-xl",onSubmit:Ke,children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"URL *"}),r.jsx("input",{type:"url",value:l,onChange:le=>o(le.target.value),required:!0,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Title"}),r.jsx("input",{type:"text",value:c,onChange:le=>d(le.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description"}),r.jsx("textarea",{value:u,onChange:le=>{f(le.target.value),h(!1)},placeholder:"Short description",rows:4,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),r.jsx("button",{type:"button",onClick:be,disabled:U||!l.trim(),className:"mt-2 rounded-md border border-slate-700 bg-slate-800 px-3 py-1.5 text-xs font-medium text-slate-200 hover:bg-slate-700 disabled:opacity-50",children:U?"Generating":"Generate AI description"}),m&&r.jsx("span",{className:"ml-2 text-xs uppercase tracking-wide text-slate-500",children:"AI summary"}),r.jsxs("label",{className:"mt-2 block inline-flex items-center gap-2 text-xs text-slate-500",children:[r.jsx("input",{type:"checkbox",checked:m,onChange:le=>h(le.target.checked)}),"AI-generated summary"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Logo"}),g&&!w&&!q&&r.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[r.jsx("img",{src:g,alt:"Current logo",className:"h-12 w-12 rounded-lg border border-slate-700 object-cover"}),r.jsxs("label",{className:"text-xs text-slate-400",children:[r.jsx("input",{type:"checkbox",checked:w,onChange:le=>E(le.target.checked)}),r.jsx("span",{className:"ml-1",children:"Remove logo"})]})]}),r.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/gif,image/webp",onChange:D,className:"block w-full text-xs text-slate-300 file:mr-3 file:rounded-md file:border-0 file:bg-slate-800 file:px-3 file:py-1.5 file:text-slate-100"}),r.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Or paste image URL (image will be copied to S3 on save):"}),r.jsx("input",{type:"url",value:H,onChange:le=>{O(le.target.value),le.target.value.trim()&&R(null)},placeholder:"https://example.com/logo.png",className:"mt-1 w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),q&&r.jsx("div",{className:"mt-2",children:r.jsx("img",{src:q,alt:"New logo",className:"h-16 w-16 rounded-lg border border-slate-700 object-cover"})}),se&&r.jsx("p",{className:"mt-1 text-xs text-red-400",children:se})]}),r.jsxs("div",{className:"relative",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Categories"}),r.jsx("input",{type:"text",value:P,onChange:le=>I(le.target.value),onFocus:()=>k(!0),placeholder:"Search and select",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),B&&r.jsx("div",{className:"absolute left-0 right-0 top-full z-10 mt-1 max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",children:ye.length?ye.map(le=>r.jsx("button",{type:"button",onClick:()=>X(le.id),className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:le.name},le.id)):r.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:"No matches"})}),r.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:pe.map(le=>{const Ne=V.find(Fe=>Fe.id===le);return r.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(Ne==null?void 0:Ne.name)??le,r.jsx("button",{type:"button",onClick:()=>ae(le),className:"hover:text-red-400","aria-label":"Remove",children:""})]},le)})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Tags"}),r.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:v.map(le=>r.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[le,r.jsx("button",{type:"button",onClick:()=>xe(le),className:"hover:text-red-400","aria-label":"Remove",children:""})]},le))}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:y,onChange:le=>C(le.target.value),onKeyDown:le=>le.key==="Enter"&&(le.preventDefault(),ue()),placeholder:"Add tag",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),r.jsx("button",{type:"button",onClick:ue,className:"rounded-md border border-slate-700 bg-slate-800 px-3 py-2 text-sm text-slate-200 hover:bg-slate-700",children:"Add"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Scraped content (optional)"}),r.jsx("textarea",{value:x,onChange:le=>p(le.target.value),rows:6,placeholder:"Paste or edit scraped content (e.g. README, about page)",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm font-mono text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),r.jsxs("div",{className:"flex flex-wrap gap-3",children:[r.jsx("button",{type:"submit",disabled:K,className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:K?"Saving":"Save changes"}),r.jsx("button",{type:"button",onClick:ot,disabled:_||K,className:"rounded-md border border-red-500/60 px-4 py-2 text-sm font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:_?"Deleting":"Delete entry"})]}),F&&r.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:F}),N&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:N})]})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit Site"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})};function kr(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const wb=()=>{const{id:e}=as(),t=Vt(),{user:n}=$e(),[s,a]=i.useState(!0),[l,o]=i.useState(""),[c,d]=i.useState(""),[u,f]=i.useState(null),[m,h]=i.useState(null),[v,b]=i.useState("image"),[y,C]=i.useState(!1),[x,p]=i.useState(!1),[g,j]=i.useState(!1),[w,E]=i.useState([]),[$,R]=i.useState([]),[H,O]=i.useState(""),[q,W]=i.useState(!1),[se,J]=i.useState(!1),[V,ce]=i.useState(!1),[pe,S]=i.useState(null),[P,I]=i.useState(null),B=lt(n??null,"manager"),k=e?decodeURIComponent(e):"";i.useEffect(()=>{var Q;if(!B||!k){a(!1);return}const N=kr();if(!N){I("API URL not set."),a(!1);return}if(!((Q=window.auth)!=null&&Q.getAccessToken)){I("Sign in required."),a(!1);return}let G=!1;return(async()=>{try{const D=await Y(`${N}/media?id=${encodeURIComponent(k)}`);if(D.status===404||!D.ok){G||I("Media not found.");return}const X=await D.json(),ae=Array.isArray(X.media)?X.media[0]:X.media;if(G||!ae)return;const ue=ae;o(ue.title??""),d(ue.description??""),f(ue.mediaUrl||null),h(ue.thumbnailUrl||null),b(ue.mediaType||"image"),R(Array.isArray(ue.categoryIds)?ue.categoryIds:[]);const xe=await Y(`${N}/media-categories`);if(xe.ok&&!G){const ye=await xe.json();E((ye.categories??[]).map(be=>({id:be.PK||be.id||"",name:be.name||be.PK||""})))}}catch(D){G||I((D==null?void 0:D.message)??"Failed to load.")}finally{G||a(!1)}})(),()=>{G=!0}},[B,k]);const K=N=>{$.includes(N)||R([...$,N]),O(""),W(!1)},ne=N=>{R($.filter(T=>T!==N))},_=w.filter(N=>!$.includes(N.id)&&(!H.trim()||(N.name||"").toLowerCase().includes(H.toLowerCase()))),z=async N=>{var Q;if(N.preventDefault(),!k)return;const T=kr();if(!T){I("API URL not set.");return}const G=window;if(!((Q=G.auth)!=null&&Q.getAccessToken)){I("Sign in required.");return}J(!0),I(null),S(null);try{const D=await new Promise(ae=>G.auth.getAccessToken(ae)),X=await Y(`${T}/media`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${D}`},body:JSON.stringify({id:k,title:l.trim()||"Untitled",description:c.trim(),categoryIds:$})});if(!X.ok)throw new Error(await X.text());S("Media updated."),setTimeout(()=>t("/media"),1200)}catch(D){I((D==null?void 0:D.message)??"Failed to update media.")}finally{J(!1)}},U=async N=>{var D,X;const T=(D=N.target.files)==null?void 0:D[0];if(!T||!k)return;if(!T.type.startsWith("image/")){I("Please choose an image (PNG, JPEG, GIF, WebP).");return}const G=kr();if(!G)return;const Q=window;if((X=Q.auth)!=null&&X.getAccessToken){p(!0),I(null),S(null);try{const ae=await new Promise(le=>Q.auth.getAccessToken(le)),ue=await Y(`${G}/media/thumbnail-upload`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ae}`},body:JSON.stringify({mediaId:k,contentType:T.type||"image/png"})});if(!ue.ok)throw new Error("Upload request failed");const{uploadUrl:xe,key:ye}=await ue.json();if(!(await fetch(xe,{method:"PUT",headers:{"Content-Type":T.type||"image/png"},body:T})).ok)throw new Error("File upload failed");const Ke=await Y(`${G}/media`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ae}`},body:JSON.stringify({id:k,thumbnailKey:ye})});if(!Ke.ok)throw new Error(await Ke.text());const ot=await Y(`${G}/media?id=${encodeURIComponent(k)}`);if(ot.ok){const le=await ot.json(),Ne=Array.isArray(le.media)?le.media[0]:le.media;Ne!=null&&Ne.thumbnailUrl&&h(Ne.thumbnailUrl)}S("Logo/thumbnail updated.")}catch(ae){I((ae==null?void 0:ae.message)??"Failed to upload thumbnail.")}finally{p(!1),N.target.value=""}}},M=async()=>{var G;if(!k||!window.confirm("Remove the custom logo/thumbnail? You can regenerate from video or upload a new one."))return;const N=kr();if(!N)return;const T=window;if((G=T.auth)!=null&&G.getAccessToken){j(!0),I(null),S(null);try{const Q=await new Promise(X=>T.auth.getAccessToken(X)),D=await Y(`${N}/media`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Q}`},body:JSON.stringify({id:k,deleteThumbnail:!0})});if(!D.ok)throw new Error(await D.text());h(null),S("Logo/thumbnail removed.")}catch(Q){I((Q==null?void 0:Q.message)??"Failed to remove thumbnail.")}finally{j(!1)}}},F=async()=>{var G;if(!k)return;const N=kr();if(!N)return;const T=window;if((G=T.auth)!=null&&G.getAccessToken){C(!0),I(null),S(null);try{const Q=await new Promise(ae=>T.auth.getAccessToken(ae)),D=await Y(`${N}/media/regenerate-thumbnail`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Q}`},body:JSON.stringify({mediaId:k})});if(!D.ok)throw new Error(await D.text());S("Thumbnail regeneration started. New thumbnail will appear in 3060 seconds.");const X=async ae=>{if(ae>6)return;await new Promise(xe=>setTimeout(xe,1e4));const ue=await Y(`${N}/media?id=${encodeURIComponent(k)}`);if(ue.ok){const xe=await ue.json(),ye=Array.isArray(xe.media)?xe.media[0]:xe.media;if(ye!=null&&ye.thumbnailUrl){h(ye.thumbnailUrl),S("Thumbnail updated.");return}}X(ae+1)};X(1)}catch(Q){I((Q==null?void 0:Q.message)??"Failed to regenerate thumbnail.")}finally{C(!1)}}},Z=async()=>{var G;if(!k||!window.confirm("Delete this media item? This cannot be undone."))return;const N=kr();if(!N)return;const T=window;if((G=T.auth)!=null&&G.getAccessToken){ce(!0),I(null);try{const Q=await new Promise(X=>T.auth.getAccessToken(X)),D=await Y(`${N}/media?id=${encodeURIComponent(k)}`,{method:"DELETE",headers:{Authorization:`Bearer ${Q}`}});if(!D.ok)throw new Error(await D.text());t("/media")}catch(Q){I((Q==null?void 0:Q.message)??"Failed to delete media.")}finally{ce(!1)}}};return B?s?r.jsxs("div",{className:"space-y-4",children:[r.jsxs(ie,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Media"]}),r.jsx("p",{className:"text-sm text-slate-400",children:"Loading"})]}):P&&!l&&!c?r.jsxs("div",{className:"space-y-4",children:[r.jsxs(ie,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Media"]}),r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:P})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs(ie,{to:"/media",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Media"]}),r.jsxs("header",{className:"space-y-2",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit Media"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Update title, description, and categories. The file itself cannot be changed here."})]}),u&&r.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 overflow-hidden max-w-2xl",children:[r.jsx("p",{className:"px-4 py-2 text-xs font-medium text-slate-400 border-b border-slate-800",children:"Current media"}),r.jsx("div",{className:"p-4 flex justify-center items-center bg-slate-900/40 min-h-[160px]",children:v==="video"?r.jsx("video",{src:u,controls:!0,className:"max-w-full max-h-[50vh] rounded-lg border border-slate-700",playsInline:!0}):r.jsx("img",{src:u,alt:l||"Media",className:"max-w-full max-h-[50vh] w-auto h-auto object-contain rounded-lg border border-slate-700"})}),v==="video"&&r.jsxs("div",{className:"px-4 py-3 border-t border-slate-800 space-y-2",children:[r.jsx("p",{className:"text-xs font-medium text-slate-400",children:"Logo / Thumbnail"}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[m&&r.jsx("img",{src:m,alt:"Thumbnail",className:"h-16 w-auto rounded border border-slate-700 object-cover"}),r.jsx("button",{type:"button",onClick:F,disabled:y,className:"rounded-md border border-slate-600 px-3 py-1.5 text-sm font-medium text-slate-200 hover:bg-slate-800 disabled:opacity-50",children:y?"Regenerating":"Take screenshot"}),r.jsxs("label",{className:"cursor-pointer rounded-md border border-slate-600 px-3 py-1.5 text-sm font-medium text-slate-200 hover:bg-slate-800",children:[x?"Uploading":"Add logo",r.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/gif,image/webp",className:"hidden",onChange:U,disabled:x})]}),m&&r.jsx("button",{type:"button",onClick:M,disabled:g,className:"rounded-md border border-red-500/60 px-3 py-1.5 text-sm font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:g?"Removing":"Delete logo"})]})]})]}),r.jsxs("form",{className:"space-y-4 max-w-xl",onSubmit:z,children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Title"}),r.jsx("input",{type:"text",value:l,onChange:N=>o(N.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Description"}),r.jsx("textarea",{value:c,onChange:N=>d(N.target.value),rows:4,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Media categories"}),r.jsx("input",{type:"text",value:H,onChange:N=>O(N.target.value),onFocus:()=>W(!0),placeholder:"Search and select",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),q&&r.jsx("div",{className:"absolute left-0 right-0 top-full z-10 mt-1 max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",children:_.length?_.map(N=>r.jsx("button",{type:"button",onClick:()=>K(N.id),className:"block w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",children:N.name},N.id)):r.jsx("p",{className:"px-3 py-2 text-xs text-slate-500",children:"No matches"})}),r.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:$.map(N=>{const T=w.find(G=>G.id===N);return r.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-200",children:[(T==null?void 0:T.name)??N,r.jsx("button",{type:"button",onClick:()=>ne(N),className:"hover:text-red-400","aria-label":"Remove",children:""})]},N)})})]}),r.jsxs("div",{className:"flex flex-wrap gap-3",children:[r.jsx("button",{type:"submit",disabled:se,className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:se?"Saving":"Save changes"}),r.jsx("button",{type:"button",onClick:Z,disabled:V||se,className:"rounded-md border border-red-500/60 px-4 py-2 text-sm font-medium text-red-400 hover:bg-red-500/20 disabled:opacity-50",children:V?"Deleting":"Delete entry"})]}),pe&&r.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:pe}),P&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:P})]})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit Media"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})},Mu={admin:"SuperAdmin",manager:"Manager",user:"User"},Qi=[{value:-8,label:"UTC-8"},{value:-5,label:"UTC-5"},{value:0,label:"UTC+0/GMT"}];function Io(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function jb(e,t,n){if(!e&&!n)return"";if(!e)return n?`from ${n}`:"";try{const s=new Date(e);if(isNaN(s.getTime()))return e+(n?` from ${n}`:"");const a=s.getTime()+(t||0)*36e5,l=new Date(a),o=y=>y<10?"0"+y:""+y,c=l.getUTCFullYear(),d=o(l.getUTCMonth()+1),u=o(l.getUTCDate()),f=o(l.getUTCHours()),m=o(l.getUTCMinutes()),h=Qi.find(y=>y.value===t),v=h?h.label:t<0?"UTC"+t:"UTC+"+t;let b=`${c}-${d}-${u} ${f}:${m} ${v}`;return n&&(b+=` from ${n}`),b}catch{return e+(n?` from ${n}`:"")}}const Nb=e=>e==="admin"?"bg-amber-500/20 text-amber-200":e==="manager"?"bg-blue-500/20 text-blue-200":e==="user"?"bg-slate-600/30 text-slate-300":"bg-emerald-500/20 text-emerald-200",Sb=()=>{var z;const e=Vt(),[t]=qt(),n=t.get("username")??"",s=t.get("email")??"",a=t.get("status")??"",{user:l}=$e(),[o,c]=i.useState(!0),[d,u]=i.useState(null),[f,m]=i.useState(null),[h,v]=i.useState([]),[b,y]=i.useState([]),[C,x]=i.useState([]),[p,g]=i.useState(""),[j,w]=i.useState(!1),[E,$]=i.useState(!1),[R,H]=i.useState(null),[O,q]=i.useState(!1),[W,se]=i.useState(-8),J=lt(l??null,"manager"),V=((z=l==null?void 0:l.groups)==null?void 0:z.includes("admin"))??!1,ce=V?["admin","manager","user"]:["user"],pe=async()=>{var F;if(!n)return;const U=Io();if(!U){u("API URL not set."),c(!1);return}if(!((F=window.auth)!=null&&F.getAccessToken)){u("Sign in required."),c(!1);return}c(!0),u(null);try{const[Z,N]=await Promise.all([Y(`${U}/admin/users/${encodeURIComponent(n)}/groups`),Y(`${U}/admin/groups`)]);if(!Z.ok){const D=await Z.json().catch(()=>({}));throw new Error(D.error||"Failed to load user")}const T=await Z.json(),Q=((await N.json()).groups??[]).map(D=>D.name??(D.PK??"").replace("GROUP#","")).filter(Boolean);m({email:T.username??n,status:a,lastLoginAt:T.lastLoginAt??"",lastLoginIp:T.lastLoginIp??"",cognitoGroups:T.cognitoGroups??[],customGroups:T.customGroups??[]}),y([...T.cognitoGroups??[]]),x([...T.customGroups??[]]),v(Q)}catch(Z){u((Z==null?void 0:Z.message)??"Failed to load user")}finally{c(!1)}};i.useEffect(()=>{const U=parseInt(sessionStorage.getItem("funkedupshift_lastlogin_tz")??"-8",10);!isNaN(U)&&Qi.some(M=>M.value===U)&&se(U)},[]),i.useEffect(()=>{J&&n&&pe()},[J,n]);const S=U=>{U&&!b.includes(U)&&y(M=>[...M,U])},P=U=>{y(M=>M.filter(F=>F!==U))},I=U=>{U&&!C.includes(U)&&(x(M=>[...M,U]),g(""),w(!1))},B=U=>{x(M=>M.filter(F=>F!==U))},k=h.filter(U=>C.includes(U)?!1:p.trim()?U.toLowerCase().includes(p.toLowerCase().trim()):!0),K=async U=>{var X;if(U.preventDefault(),!n)return;const M=Io();if(!M||!((X=window.auth)!=null&&X.getAccessToken))return;const Z=(f==null?void 0:f.cognitoGroups)??[],N=(f==null?void 0:f.customGroups)??[];let T=b.filter(ae=>!Z.includes(ae)),G=Z.filter(ae=>!b.includes(ae));V||(T=T.filter(ae=>ae==="user"),G=G.filter(ae=>ae==="user"));const Q=C.filter(ae=>!N.includes(ae)),D=N.filter(ae=>!C.includes(ae));$(!0),H(null);try{const ae=encodeURIComponent,ue=[];T.forEach(be=>ue.push(Y(`${M}/admin/users/${ae(n)}/groups`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groupName:be})}))),G.forEach(be=>ue.push(Y(`${M}/admin/users/${ae(n)}/groups/${ae(be)}`,{method:"DELETE"}))),Q.forEach(be=>ue.push(Y(`${M}/admin/users/${ae(n)}/groups`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groupName:be})}))),D.forEach(be=>ue.push(Y(`${M}/admin/users/${ae(n)}/groups/${ae(be)}`,{method:"DELETE"})));const ye=(await Promise.all(ue)).find(be=>!be.ok);if(ye){const be=await ye.json().catch(()=>({}));throw new Error(be.error||"Failed to save")}window.alert("Changes saved"),e("/admin/membership")}catch(ae){H((ae==null?void 0:ae.message)??"Failed to save")}finally{$(!1)}},ne=U=>{const M=parseInt(U.target.value,10);se(M),sessionStorage.setItem("funkedupshift_lastlogin_tz",String(M))},_=async()=>{var Z;const U=s||(f==null?void 0:f.email)||n;if(!window.confirm(`Delete user "${U}"? This cannot be undone.`))return;const M=Io();if(!(!M||!((Z=window.auth)!=null&&Z.getAccessToken))){q(!0);try{const N=await Y(`${M}/admin/users/${encodeURIComponent(n)}`,{method:"DELETE"});if(!N.ok){const T=await N.json().catch(()=>({}));throw new Error(T.error||"Failed to delete user")}e("/admin/membership")}catch(N){H((N==null?void 0:N.message)??"Failed to delete user")}finally{q(!1)}}};return J?n?o?r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit User"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Loading"})]}):d||!f?r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit User"}),r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:d??"Failed to load user"})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs(ie,{to:"/admin/membership",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to users"]}),r.jsxs("header",{className:"space-y-2",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit User"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Adjust system roles and custom groups."}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("label",{htmlFor:"tz-select",className:"text-slate-500",children:"Last login timezone:"}),r.jsx("select",{id:"tz-select",value:W,onChange:ne,className:"rounded border border-slate-700 bg-slate-950 px-2 py-1 text-slate-200 text-sm",children:Qi.map(U=>r.jsx("option",{value:U.value,children:U.label},U.value))})]})]}),r.jsxs("form",{onSubmit:K,className:"space-y-6 max-w-2xl",children:[r.jsxs("div",{className:"rounded-lg border border-slate-800 bg-slate-950/60 p-4",children:[r.jsx("h2",{className:"text-sm font-medium text-slate-300 mb-3",children:"User info"}),r.jsx("table",{className:"text-sm",children:r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{className:"py-1 pr-4 font-medium text-slate-400 w-28",children:"Email"}),r.jsx("td",{className:"py-1 text-slate-200",children:s||f.email})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"py-1 pr-4 font-medium text-slate-400",children:"Status"}),r.jsx("td",{className:"py-1 text-slate-200",children:a||f.status||""})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"py-1 pr-4 font-medium text-slate-400",children:"Last login"}),r.jsx("td",{className:"py-1 text-slate-200",children:jb(f.lastLoginAt,W,f.lastLoginIp)})]})]})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200",children:"System roles"}),r.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-200 w-full max-w-xs",onChange:U=>{const M=U.target.value;M&&S(M),U.target.value=""},children:[r.jsx("option",{value:"",children:"Select role to add"}),ce.filter(U=>!b.includes(U)).map(U=>r.jsx("option",{value:U,children:Mu[U]??U},U))]}),r.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:b.map(U=>{const M=V||U==="user";return r.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded text-sm ${Nb(U)}`,children:[Mu[U]??U,M&&r.jsx("button",{type:"button",onClick:()=>P(U),className:"ml-0.5 hover:text-red-300","aria-label":"Remove",children:""})]},U)})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200",children:"Custom groups"}),h.length===0?r.jsxs("p",{className:"text-sm text-slate-500",children:["No custom groups. ",r.jsx(ie,{to:"/admin/membership?tab=groups",className:"text-brand-orange hover:underline",children:"Create groups"}),"."]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"relative max-w-xs",children:[r.jsx("input",{type:"text",value:p,onChange:U=>{g(U.target.value),w(!0)},onFocus:()=>w(!0),placeholder:"Search or select groups",className:"w-full rounded border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-200 placeholder:text-slate-500"}),j&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>w(!1),"aria-hidden":"true"}),r.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 max-h-48 overflow-y-auto rounded border border-slate-700 bg-slate-900 shadow-lg z-20",children:k.length===0?r.jsx("div",{className:"px-3 py-2 text-sm text-slate-500",children:"No matches"}):k.map(U=>r.jsx("button",{type:"button",className:"w-full px-3 py-2 text-left text-sm text-slate-200 hover:bg-slate-800",onClick:()=>I(U),children:U},U))})]})]}),r.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:C.map(U=>r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-sm bg-emerald-500/20 text-emerald-200",children:[U,r.jsx("button",{type:"button",onClick:()=>B(U),className:"ml-0.5 hover:text-red-300","aria-label":"Remove",children:""})]},U))})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[r.jsx("button",{type:"submit",disabled:E,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:E?"Saving":"Save"}),r.jsx(ie,{to:"/admin/membership",className:"rounded-md border border-slate-700 px-4 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"}),V&&r.jsx("button",{type:"button",onClick:_,disabled:O||E,className:"rounded-md border border-red-500/60 bg-red-500/10 px-4 py-2 text-sm font-medium text-red-200 hover:bg-red-500/20 disabled:opacity-50",children:O?"Deleting":"Delete user"})]}),R&&r.jsx("p",{className:"text-sm text-red-400",children:R})]})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit User"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Missing username in URL."})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Edit User"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Manager or SuperAdmin access is required."})]})},kb=()=>{const{user:e,refreshAuth:t}=$e(),n=Vt(),[s,a]=i.useState("signin"),[l,o]=i.useState(""),[c,d]=i.useState(""),[u,f]=i.useState(!1),[m,h]=i.useState(null),[v,b]=i.useState(null),y=x=>{a(x),h(null),b(null)},C=async x=>{x.preventDefault(),h(null),b(null);const p=l.trim(),g=c.trim();if(!p||!g){h("Email and password are required.");return}const j=window;if(!j.auth){h("Auth is not configured. Check Cognito frontend setup.");return}f(!0);try{s==="signin"?(await new Promise((w,E)=>{j.auth.signIn(p,g,$=>{$?E($):w()})}),b("Signed in successfully. Redirecting"),await t()):(await new Promise((w,E)=>{j.auth.signUp(p,g,$=>{$?E($):w()})}),b("Account created successfully. You can now sign in."),a("signin")),s==="signin"&&setTimeout(()=>n("/"),800)}catch(w){const E=(w==null?void 0:w.message)||"Authentication failed. Please try again.";h(E)}finally{f(!1)}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("header",{className:"space-y-2",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Sign in / Sign up"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Use your Funkedupshift account to rate sites, add notes, and manage curated content (based on your role)."})]}),e&&r.jsxs("div",{className:"rounded-xl border border-emerald-600/60 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-100",children:["You're currently signed in as"," ",r.jsx("span",{className:"font-semibold text-emerald-200",children:e.email})," (",e.role==="superadmin"?"SuperAdmin":e.role,"). You can safely close this page or continue browsing websites and media."]}),r.jsxs("div",{className:"grid gap-6 md:grid-cols-[minmax(0,1.3fr)_minmax(0,1fr)] items-start",children:[r.jsxs("section",{className:"rounded-2xl border border-slate-800 bg-slate-950/70 p-5 shadow-lg shadow-slate-950/40",children:[r.jsxs("div",{className:"mb-4 flex gap-2 rounded-full bg-slate-900/70 p-1 text-xs font-medium text-slate-300",children:[r.jsx("button",{type:"button",onClick:()=>y("signin"),className:["flex-1 rounded-full px-3 py-1.5 transition-colors",s==="signin"?"bg-slate-50 text-slate-950":"hover:bg-slate-800/80"].join(" "),children:"Sign in"}),r.jsx("button",{type:"button",onClick:()=>y("signup"),className:["flex-1 rounded-full px-3 py-1.5 transition-colors",s==="signup"?"bg-slate-50 text-slate-950":"hover:bg-slate-800/80"].join(" "),children:"Sign up"})]}),r.jsxs("form",{className:"space-y-4",onSubmit:C,children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{htmlFor:"authEmail",className:"text-xs font-medium uppercase tracking-[0.18em] text-slate-400",children:"Email"}),r.jsx("input",{id:"authEmail",type:"email",autoComplete:"email",value:l,onChange:x=>o(x.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",placeholder:"you@example.com",required:!0})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{htmlFor:"authPassword",className:"text-xs font-medium uppercase tracking-[0.18em] text-slate-400",children:"Password"}),r.jsx("input",{id:"authPassword",type:"password",autoComplete:s==="signin"?"current-password":"new-password",value:c,onChange:x=>d(x.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",placeholder:s==="signup"?"At least 8 characters":"Your password",minLength:8,required:!0})]}),m&&r.jsx("div",{className:"rounded-md border border-red-500/70 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:m}),v&&!m&&r.jsx("div",{className:"rounded-md border border-emerald-500/70 bg-emerald-500/10 px-3 py-2 text-xs text-emerald-100",children:v}),r.jsx("button",{type:"submit",disabled:u,className:"inline-flex w-full items-center justify-center rounded-full bg-brand-orange px-4 py-2.5 text-sm font-semibold text-slate-950 shadow-md shadow-orange-500/40 transition hover:bg-orange-500 disabled:cursor-not-allowed disabled:opacity-70",children:u?s==="signin"?"Signing in":"Creating account":s==="signin"?"Sign in":"Create account"})]})]}),r.jsxs("aside",{className:"space-y-3 rounded-2xl border border-slate-800 bg-slate-950/40 p-4 text-xs text-slate-300",children:[r.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-[0.25em] text-slate-500",children:"How access works"}),r.jsxs("ul",{className:"space-y-2",children:[r.jsxs("li",{children:[r.jsx("span",{className:"font-semibold text-slate-100",children:"Guests"})," can browse all websites and media without signing in."]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-semibold text-slate-100",children:"Signed-in users"})," can star sites and media, and later add their own metadata and comments."]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-semibold text-slate-100",children:"Managers & admins"})," can curate sites, media, and categories, with extra tooling in the admin area."]})]}),r.jsx("p",{className:"text-slate-500",children:"If you don't see expected admin controls after signing in, confirm your Cognito group membership in the AWS Console."})]})]})]})},Cb={admin:"SuperAdmin",manager:"Manager",user:"User"},ed=[{value:-8,label:"UTC-8"},{value:-5,label:"UTC-5"},{value:0,label:"UTC+0/GMT"}],Bp="funkedupshift_lastlogin_tz";function Eb(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}function Pb(){try{const e=parseInt(sessionStorage.getItem(Bp)??"",10);if(!isNaN(e)&&ed.some(t=>t.value===e))return e}catch{}return-8}function Tb(e){try{sessionStorage.setItem(Bp,String(e))}catch{}}function Rb(e,t,n){if(!e)return n?`from ${n}`:"";try{const s=new Date(e);if(isNaN(s.getTime()))return e;const a=s.getTime()+t*36e5,l=new Date(a),o=y=>y<10?"0"+y:""+y,c=l.getUTCFullYear(),d=o(l.getUTCMonth()+1),u=o(l.getUTCDate()),f=o(l.getUTCHours()),m=o(l.getUTCMinutes()),h=ed.find(y=>y.value===t),v=h?h.label:t<0?`UTC${t}`:`UTC+${t}`;let b=`${c}-${d}-${u} ${f}:${m} ${v}`;return n&&(b+=` from ${n}`),b}catch{return e}}const Lb=()=>{var U,M,F,Z;const{user:e,refreshAuth:t}=$e(),[n,s]=qt(),a=n.get("tab"),l=a==="groups"?"groups":"profile",[o,c]=i.useState(l),[d,u]=i.useState(null),[f,m]=i.useState(""),[h,v]=i.useState(Pb),[b,y]=i.useState(!0),[C,x]=i.useState(!1),[p,g]=i.useState(null),[j,w]=i.useState(""),[E,$]=i.useState(!1),[R,H]=i.useState(null),[O,q]=i.useState([]),[W,se]=i.useState(!1),[J,V]=i.useState(null),[ce,pe]=i.useState(null),S=Eb();i.useEffect(()=>{c(a==="groups"?"groups":"profile")},[a]);const P=N=>{c(N);const T=new URLSearchParams(n);N==="groups"?T.set("tab","groups"):T.delete("tab"),s(T)};i.useEffect(()=>{if(!e||!S){y(!1);return}let N=!1;return Y(`${S}/profile`).then(T=>T.ok?T.json():T.json().then(G=>Promise.reject(new Error(G.error||"Failed")))).then(T=>{var G;N||(u(T),m(((G=T.profile)==null?void 0:G.description)??""))}).catch(T=>{N||H({text:`Failed to load profile: ${(T==null?void 0:T.message)??"Unknown"}`,error:!0})}).finally(()=>{N||y(!1)}),()=>{N=!0}},[e,S]);const I=Ae.useCallback(async()=>{if(S){se(!0),V(null);try{const N=await Y(`${S}/groups`);if(!N.ok){const G=await N.json().catch(()=>({}));throw new Error(G.error||"Failed to load groups")}const T=await N.json();q(T.groups??[])}catch(N){V({text:`Failed: ${(N==null?void 0:N.message)??"Unknown"}`,error:!0})}finally{se(!1)}}},[S]);i.useEffect(()=>{o==="groups"&&e&&S&&I()},[o,e,S,I]);const B=async(N,T)=>{if(S){pe(N),V(null);try{if(T){const G=await Y(`${S}/me/groups/${encodeURIComponent(N)}`,{method:"DELETE"});if(!G.ok){const Q=await G.json().catch(()=>({}));throw new Error(Q.error||"Failed to leave")}u(Q=>Q?{...Q,customGroups:(Q.customGroups??[]).filter(D=>D!==N)}:null),V({text:`Left ${N}.`,error:!1})}else{const G=await Y(`${S}/me/groups`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groupName:N})});if(!G.ok){const Q=await G.json().catch(()=>({}));throw new Error(Q.error||"Failed to join")}u(Q=>Q?{...Q,customGroups:[...Q.customGroups??[],N]}:null),V({text:`Joined ${N}.`,error:!1})}await t()}catch(G){V({text:`Error: ${(G==null?void 0:G.message)??"Unknown"}`,error:!0})}finally{pe(null)}}},k=async()=>{if(S){x(!0),H(null);try{const N=await Y(`${S}/profile`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:f.trim().slice(0,100)})});if(!N.ok){const T=await N.json();throw new Error(T.error||"Failed")}H({text:"Saved.",error:!1})}catch(N){H({text:`Error: ${(N==null?void 0:N.message)??"Unknown"}`,error:!0})}finally{x(!1)}}},K=async N=>{var Q,D;const T=(Q=N.target.files)==null?void 0:Q[0];if(N.target.value="",!T||!S)return;if(g(null),!((D=T.type)!=null&&D.match(/^image\/(png|jpeg|jpg|gif|webp)$/))){g("Please choose PNG, JPEG, GIF, or WebP.");return}const G=T.type||"image/png";try{const X=await Y(`${S}/profile/avatar-upload`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contentType:G})});if(!X.ok){const Ke=await X.json();throw new Error(Ke.error||"Upload failed")}const{uploadUrl:ae,key:ue}=await X.json();if(!(await fetch(ae,{method:"PUT",body:T,headers:{"Content-Type":G}})).ok)throw new Error("Upload failed");const ye=await Y(`${S}/profile`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({avatarKey:ue})});if(!ye.ok){const Ke=await ye.json();throw new Error(Ke.error||"Failed")}const be=await Y(`${S}/profile`).then(Ke=>Ke.json());u(be)}catch(X){g(`Error: ${(X==null?void 0:X.message)??"Unknown"}`)}},ne=async()=>{if(S){g(null);try{const N=await Y(`${S}/profile/avatar`,{method:"DELETE"});if(!N.ok){const T=await N.json();throw new Error(T.error||"Failed")}u(T=>T?{...T,profile:{...T.profile,avatarUrl:void 0,avatarKey:void 0}}:null)}catch(N){g(`Error: ${(N==null?void 0:N.message)??"Unknown"}`)}}},_=async()=>{const N=j.trim();if(!(!N||!S)){g(null),$(!0);try{const T=await Y(`${S}/profile/avatar-from-url`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageUrl:N})});if(!T.ok){const X=await T.json();throw new Error(X.error||"Import failed")}const{key:G}=await T.json(),Q=await Y(`${S}/profile`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({avatarKey:G})});if(!Q.ok){const X=await Q.json();throw new Error(X.error||"Failed")}const D=await Y(`${S}/profile`).then(X=>X.json());u(D),w("")}catch(T){g(`Error: ${(T==null?void 0:T.message)??"Unknown"}`)}finally{$(!1)}}};if(!e)return r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"My Profile"}),r.jsxs("p",{className:"text-sm text-slate-400",children:[r.jsx(ie,{to:"/auth",className:"text-brand-orange hover:underline",children:"Sign in"})," ","to view and edit your profile."]})]});if(!S)return r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"My Profile"}),r.jsx("p",{className:"text-sm text-red-400",children:"API URL not set."})]});if(b)return r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"My Profile"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Loading profile"})]});const z=d!=null&&d.profile?Rb(d.profile.lastLoginAt,h,d.profile.lastLoginIp):"";return r.jsxs("div",{className:"space-y-6 max-w-2xl",children:[r.jsx(ie,{to:"/",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:" Back to Home"}),r.jsx("header",{children:r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"My Profile"})}),r.jsxs("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:[r.jsx("button",{type:"button",onClick:()=>P("profile"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="profile"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Profile"}),r.jsx("button",{type:"button",onClick:()=>P("groups"),className:`px-4 py-2 rounded-md text-sm font-medium ${o==="groups"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Custom groups"})]}),o==="groups"&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-sm text-slate-400",children:"Add or remove yourself from custom groups. Changes take effect immediately."}),J&&r.jsx("div",{className:`rounded-md px-3 py-2 text-sm ${J.error?"border-red-500/60 bg-red-500/10 text-red-200":"border-green-500/40 bg-green-500/10 text-green-200"}`,children:J.text}),W?r.jsx("p",{className:"text-sm text-slate-500",children:"Loading groups"}):O.length===0?r.jsx("p",{className:"text-sm text-slate-500",children:"No custom groups available. Admins can create groups in Membership."}):r.jsx("ul",{className:"space-y-2",children:O.map(N=>{const T=((d==null?void 0:d.customGroups)??[]).includes(N.name);return r.jsxs("li",{className:"flex items-center justify-between rounded-lg border border-slate-800 bg-slate-950/60 px-3 py-2",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-slate-200",children:N.name}),N.description&&r.jsx("span",{className:"text-slate-500 ml-2 text-sm",children:N.description})]}),r.jsx("button",{type:"button",onClick:()=>B(N.name,T),disabled:ce===N.name,className:`rounded-md px-3 py-1.5 text-xs font-medium ${T?"border border-amber-500/60 bg-amber-500/10 text-amber-300 hover:bg-amber-500/20":"border border-emerald-500/60 bg-emerald-500/10 text-emerald-300 hover:bg-emerald-500/20"} disabled:opacity-50`,children:ce===N.name?"":T?"Leave":"Join"})]},N.name)})})]}),o==="profile"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-xs font-medium text-slate-400",children:"Last login timezone"}),r.jsx("select",{value:h,onChange:N=>{const T=parseInt(N.target.value,10);Tb(T),v(T)},className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-sm text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",children:ed.map(N=>r.jsx("option",{value:N.value,children:N.label},N.value))})]}),R&&r.jsx("div",{className:`rounded-md px-3 py-2 text-sm ${R.error?"border-red-500/60 bg-red-500/10 text-red-200":"border-green-500/40 bg-green-500/10 text-green-200"}`,children:R.text}),d&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[r.jsx("h2",{className:"text-sm font-semibold text-slate-200 mb-3",children:"User info"}),r.jsx("table",{className:"w-full text-sm",children:r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{className:"py-1 pr-4 font-medium text-slate-300 w-28",children:"Email"}),r.jsx("td",{className:"text-slate-400",children:d.email??""})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"py-1 pr-4 font-medium text-slate-300",children:"Status"}),r.jsx("td",{className:"text-slate-400",children:d.status??""})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"py-1 pr-4 font-medium text-slate-300",children:"Last login"}),r.jsx("td",{className:"text-slate-400",children:z})]})]})})]}),r.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[r.jsx("h2",{className:"text-sm font-semibold text-slate-200 mb-3",children:"System role"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:(((U=d.cognitoGroups)==null?void 0:U.length)??0)>0?d.cognitoGroups.map(N=>{const T=Cb[N]??N,G=N==="admin"?"bg-amber-500/20 text-amber-300":N==="manager"?"bg-blue-500/20 text-blue-300":"bg-slate-700 text-slate-200";return r.jsx("span",{className:`rounded-md px-2 py-0.5 text-xs font-medium ${G}`,children:T},N)}):r.jsx("span",{className:"rounded-md px-2 py-0.5 text-xs font-medium bg-slate-700 text-slate-200",children:"User"})})]}),r.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[r.jsx("h2",{className:"text-sm font-semibold text-slate-200 mb-3",children:"Custom groups"}),(((M=d.customGroups)==null?void 0:M.length)??0)>0?r.jsx("div",{className:"flex flex-wrap gap-2",children:d.customGroups.map(N=>r.jsx("span",{className:"rounded-md px-2 py-0.5 text-xs font-medium bg-emerald-500/20 text-emerald-300",children:N},N))}):r.jsx("p",{className:"text-sm text-slate-500",children:"Not in any custom groups."})]}),r.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[r.jsx("h2",{className:"text-sm font-semibold text-slate-200 mb-3",children:"Edit profile"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Profile icon"}),r.jsxs("div",{className:"flex items-start gap-4",children:[(F=d.profile)!=null&&F.avatarUrl?r.jsx("img",{src:d.profile.avatarUrl,alt:"Profile",className:"h-24 w-24 rounded-full border-2 border-slate-700 object-cover"}):r.jsx("div",{className:"h-24 w-24 rounded-full border-2 border-slate-700 bg-slate-800 flex items-center justify-center text-2xl text-slate-500",children:"?"}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/gif,image/webp",onChange:K,className:"block w-full text-xs text-slate-300 file:mr-3 file:rounded-md file:border-0 file:bg-slate-800 file:px-3 file:py-1.5 file:text-slate-100"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Or paste image URL (min 4848, max 5 MB):"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"url",value:j,onChange:N=>w(N.target.value),placeholder:"https://example.com/avatar.png",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),r.jsx("button",{type:"button",onClick:_,disabled:!j.trim()||E,className:"rounded-md border border-slate-600 px-3 py-2 text-sm font-medium text-slate-200 hover:bg-slate-800 disabled:opacity-50",children:E?"Importing":"Use from URL"})]}),((Z=d.profile)==null?void 0:Z.avatarUrl)&&r.jsx("button",{type:"button",onClick:ne,className:"self-start rounded-md border border-red-500/60 bg-red-500/10 px-2 py-1 text-xs font-medium text-red-300 hover:bg-red-500/20",children:"Remove icon"})]})]}),r.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"PNG, JPEG, GIF, or WebP. Same constraints as thumbnail uploads."}),p&&r.jsx("p",{className:"mt-1 text-xs text-red-400",children:p})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"profile-description",className:"block text-xs font-medium text-slate-400 mb-1",children:"Description"}),r.jsx("textarea",{id:"profile-description",value:f,onChange:N=>m(N.target.value),maxLength:100,placeholder:"About you (max 100 characters)",rows:4,className:"w-full max-w-md rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),r.jsxs("div",{className:`mt-1 text-xs ${f.length>=100?"text-red-400":"text-slate-500"}`,children:[f.length," / 100"]})]}),r.jsx("button",{type:"button",onClick:k,disabled:C,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:C?"Saving":"Save"})]})]})]})]})]})},Ab=/^\d{4}-\d{2}-\d{2}$/;function Du(e){if(!Ab.test(e))return!1;const t=new Date(e);return!isNaN(t.getTime())}const ur=({id:e,value:t,onChange:n,label:s,required:a,className:l="",inputClassName:o=""})=>{const c=i.useRef(null),d=i.useRef(null),u=y=>{const x=y.target.value.replace(/[^\d-]/g,"");n(x)},f=()=>{const y=t.trim();y&&!Du(y)&&n("")},m=y=>{const C=y.target.value;C&&n(C)},h=()=>{const y=c.current;y&&(y.focus(),typeof y.showPicker=="function"&&y.showPicker())},v="rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",b=t&&Du(t);return r.jsxs("div",{className:l,children:[r.jsxs("label",{htmlFor:`${e}-text`,className:"block text-xs font-semibold text-slate-400 mb-1",children:[s,r.jsx("span",{className:"block font-normal text-slate-500 mt-0.5",children:"yyyy-MM-DD or use calendar"})]}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("input",{ref:d,type:"text",id:`${e}-text`,value:t,onChange:u,onBlur:f,placeholder:"yyyy-MM-DD",required:a,pattern:a?"[0-9]{4}-[0-9]{2}-[0-9]{2}":void 0,title:a?"Enter date as yyyy-MM-DD":void 0,className:`${v} flex-1 min-w-0 ${o}`,inputMode:"numeric",autoComplete:"off"}),r.jsx("input",{ref:c,type:"date",id:e,value:b?t:"",onChange:m,required:a,className:"sr-only","aria-hidden":!0}),r.jsx("button",{type:"button",onClick:h,title:"Open calendar","aria-label":"Open calendar",className:"rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-slate-400 hover:bg-slate-800 hover:text-slate-200 focus:border-brand-orange focus:outline-none shrink-0",children:r.jsx(Lg,{className:"h-5 w-5"})})]})]})};function Ou(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Uo=10,$b=()=>{const{user:e}=$e(),[t,n]=qt(),[s,a]=i.useState([]),[l,o]=i.useState(()=>{const D=t.get("playerIds");return D?D.split(",").filter(Boolean):[]}),[c,d]=i.useState([]),[u,f]=i.useState(1),[m,h]=i.useState(!1),[v,b]=i.useState(()=>t.get("date")??""),[y,C]=i.useState(()=>t.get("dateFrom")??""),[x,p]=i.useState(()=>t.get("dateTo")??""),[g,j]=i.useState(""),[w,E]=i.useState(!1),[$,R]=i.useState(null),[H,O]=i.useState(null),[q,W]=i.useState(!1),[se,J]=i.useState(()=>t.get("sortOrder")==="oldest"?"oldest":"newest"),[V,ce]=i.useState(()=>t.get("playerMode")==="or"?"or":"and"),pe=i.useRef(null),S=_l(e),P=Bl(e),I=D=>{const X=s.find(ae=>ae.id===D||ae.PK===D);return X&&(X.name||X.id)||D},B=async()=>{const D=Ou();if(D)try{const X=await Y(`${D}/squash/players`);if(!X.ok){const xe=await X.json().catch(()=>({}));throw new Error(xe.error||"Failed")}const ue=((await X.json()).players??[]).map(xe=>({...xe,id:xe.id||xe.PK||""}));a(ue)}catch(X){O((X==null?void 0:X.message)??"Failed to load players")}},k=async()=>{const D=Ou();if(!D)return;const X=new URLSearchParams;v&&X.set("date",v),y&&X.set("dateFrom",y),x&&X.set("dateTo",x),l.length&&(X.set("playerIds",l.join(",")),X.set("playerMode",V));const ae=X.toString()?`?${X.toString()}`:"";W(!0),O(null);try{const ue=await Y(`${D}/squash/matches${ae}`);if(!ue.ok){const be=await ue.json().catch(()=>({}));throw new Error(be.error||"Failed")}const xe=await ue.json();d(xe.matches??[]),h(!0),f(1);const ye=new URLSearchParams;v&&ye.set("date",v),y&&ye.set("dateFrom",y),x&&ye.set("dateTo",x),l.length&&(ye.set("playerIds",l.join(",")),ye.set("playerMode",V)),ye.set("sortOrder",se),n(ye,{replace:!0})}catch(ue){O((ue==null?void 0:ue.message)??"Failed to search matches")}finally{W(!1)}},K=()=>{b(""),C(""),p(""),o([]),j(""),ce("and"),h(!1),d([]),f(1),n({},{replace:!0})},ne=D=>{l.includes(D)||o([...l,D]),j("")},_=D=>{o(l.filter(X=>X!==D))},z=s.filter(D=>!l.includes(D.id)&&(!g.trim()||(D.name||"").toLowerCase().includes(g.toLowerCase())));i.useEffect(()=>{S&&B()},[S]);const U=t.get("date")||t.get("dateFrom")||t.get("dateTo")||t.get("playerIds");i.useEffect(()=>{!S||!U||k()},[]),i.useEffect(()=>{function D(X){pe.current&&!pe.current.contains(X.target)&&E(!1)}if(w)return document.addEventListener("mousedown",D),()=>document.removeEventListener("mousedown",D)},[w]);const M=i.useMemo(()=>{const D=[...c];return D.sort((X,ae)=>{const ue=X.date||"",xe=ae.date||"";return se==="newest"?xe.localeCompare(ue):ue.localeCompare(xe)}),D},[c,se]),F=Math.max(1,Math.ceil(M.length/Uo)),Z=(u-1)*Uo,N=M.slice(Z,Z+Uo),T=D=>{const X=D.teamAGames??0,ae=D.teamBGames??0,ue=D.winningTeam==="B"?ae:X,xe=D.winningTeam==="B"?X:ae;return`${ue}-${xe}`},G=D=>{const X=[I(D.teamAPlayer1Id||""),I(D.teamAPlayer2Id||"")].filter(Boolean).join(" & "),ae=[I(D.teamBPlayer1Id||""),I(D.teamBPlayer2Id||"")].filter(Boolean).join(" & "),ue=D.winningTeam==="B"?ae:X,xe=D.winningTeam==="B"?X:ae;return r.jsxs("li",{className:"flex items-center gap-2 flex-wrap py-2 border-b border-slate-800 last:border-0",children:[r.jsx("span",{className:"font-semibold text-slate-200",children:D.date||""}),r.jsxs("span",{className:"text-slate-300",children:[ue," vs ",xe]}),r.jsx("span",{className:"italic text-slate-400",children:T(D)})]},D.id||D.date+ue)},Q=[];if(F<=7)for(let D=1;D<=F;D++)Q.push(D);else{const D=u;Q.push(1),D>3&&Q.push("");for(let X=Math.max(2,D-1);X<=Math.min(F-1,D+1);X++)Q.includes(X)||Q.push(X);D<F-2&&Q.push(""),F>1&&Q.push(F)}return e?S?r.jsxs("div",{className:"space-y-6",children:[r.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Doubles"}),P&&r.jsx("p",{className:"text-sm text-slate-400",children:r.jsx(ie,{to:"/squash-admin",className:"text-brand-orange hover:text-orange-400",children:"Squash Admin"})}),($||H)&&r.jsx("div",{className:`rounded-md px-4 py-3 text-sm ${H?"bg-red-900/30 border border-red-800/50 text-red-200":"bg-emerald-900/30 border border-emerald-800/50 text-emerald-200"}`,children:H||$}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-base font-semibold text-slate-200 mb-3",children:"Search matches"}),r.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[r.jsx(ur,{id:"searchDate",value:v,onChange:b,label:"Date (exact)",className:"max-w-[12rem]"}),r.jsx(ur,{id:"searchDateFrom",value:y,onChange:C,label:"Date from",className:"max-w-[12rem]"}),r.jsx(ur,{id:"searchDateTo",value:x,onChange:p,label:"Date to",className:"max-w-[12rem]"}),r.jsxs("div",{className:"relative max-w-[14rem] min-w-[12rem]",ref:pe,children:[r.jsx("label",{className:"block text-xs font-semibold text-slate-400 mb-1",children:"Filter by players"}),r.jsx("input",{type:"text",value:g,onChange:D=>j(D.target.value),onFocus:()=>E(!0),placeholder:"Search players...",autoComplete:"off",className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none"}),w&&r.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-slate-900 border border-slate-700 rounded-md max-h-48 overflow-y-auto z-10",children:z.length?z.map(D=>r.jsx("button",{type:"button",onClick:()=>ne(D.id),className:"w-full text-left px-3 py-2 text-sm text-slate-200 hover:bg-slate-800",children:D.name||D.id},D.id)):r.jsx("div",{className:"px-3 py-2 text-sm text-slate-500",children:"No matches"})}),r.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:l.map(D=>r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-slate-700 text-slate-200 text-xs",children:[I(D),r.jsx("button",{type:"button",onClick:()=>_(D),className:"text-slate-400 hover:text-slate-100","aria-label":"Remove",children:""})]},D))}),l.length>0&&r.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[r.jsx("span",{className:"text-xs text-slate-500",children:"Match:"}),r.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[r.jsx("button",{type:"button",onClick:()=>ce("and"),className:`rounded px-2 py-0.5 text-xs font-medium ${V==="and"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"AND"}),r.jsx("button",{type:"button",onClick:()=>ce("or"),className:`rounded px-2 py-0.5 text-xs font-medium ${V==="or"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"OR"})]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",onClick:k,disabled:q,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:q?"Searching":"Search"}),r.jsx("button",{type:"button",onClick:K,className:"rounded-md border border-slate-600 px-4 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Clear"})]})]})]}),r.jsxs("section",{children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-3",children:[r.jsx("h2",{className:"text-base font-semibold text-slate-200",children:"Results"}),m&&M.length>0&&r.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[r.jsx("button",{type:"button",onClick:()=>J("newest"),className:`rounded px-2 py-0.5 text-xs font-medium ${se==="newest"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"Newest first"}),r.jsx("button",{type:"button",onClick:()=>J("oldest"),className:`rounded px-2 py-0.5 text-xs font-medium ${se==="oldest"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"Oldest first"})]})]}),m&&r.jsx("div",{className:"rounded-md border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm text-slate-400 mb-3",children:M.length===0?"No results":`${M.length} results`}),m?N.length===0?r.jsx("ul",{className:"list-none p-0",children:r.jsx("li",{className:"py-2 text-slate-400",children:"No matches found."})}):r.jsxs(r.Fragment,{children:[r.jsx("ul",{className:"list-none p-0",children:N.map(G)}),F>1&&r.jsxs("div",{className:"flex items-center gap-2 mt-4 flex-wrap",children:[r.jsx("button",{type:"button",disabled:u<=1,onClick:()=>f(D=>Math.max(1,D-1)),className:"rounded-md border border-slate-600 px-3 py-1 text-sm disabled:opacity-50 disabled:cursor-not-allowed text-slate-300 hover:bg-slate-800",children:"Prev"}),r.jsx("span",{className:"flex items-center gap-1",children:Q.map((D,X)=>D===""?r.jsx("span",{className:"px-1 text-slate-500",children:""},`ellipsis-${X}`):D===u?r.jsx("span",{className:"min-w-[2rem] px-2 py-1 text-center font-semibold text-slate-200",children:D},D):r.jsx("button",{type:"button",onClick:()=>f(D),className:"min-w-[2rem] rounded px-2 py-1 text-sm text-slate-300 hover:bg-slate-800 border border-slate-600",children:D},D))}),r.jsx("button",{type:"button",disabled:u>=F,onClick:()=>f(D=>Math.min(F,D+1)),className:"rounded-md border border-slate-600 px-3 py-1 text-sm disabled:opacity-50 disabled:cursor-not-allowed text-slate-300 hover:bg-slate-800",children:"Next"})]})]}):r.jsx("div",{className:"flex items-center justify-center min-h-[280px]",children:r.jsx("p",{className:"text-2xl sm:text-3xl font-light text-slate-500/80 tracking-wide animate-pulse",children:"Enter search criteria and click Search to find matches."})})]})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Doubles"}),r.jsx("div",{className:"rounded-md bg-amber-900/30 border border-amber-800/50 px-4 py-3 text-sm text-amber-200",children:"You do not have access to the Squash section. Join the Squash group or contact an admin."})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Doubles"}),r.jsxs("div",{className:"rounded-md bg-red-900/30 border border-red-800/50 px-4 py-3 text-sm text-red-200",children:["Sign in required. ",r.jsx(ie,{to:"/auth",className:"underline hover:text-red-100",children:"Sign in"})]})]})};function rr(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Mo=10,Ib=()=>{const{user:e}=$e(),[t,n]=qt(),[s,a]=i.useState("matches"),[l,o]=i.useState([]),[c,d]=i.useState(()=>{const A=t.get("playerIds");return A?A.split(",").filter(Boolean):[]}),[u,f]=i.useState([]),[m,h]=i.useState(1),[v,b]=i.useState(!1),[y,C]=i.useState(()=>t.get("date")??""),[x,p]=i.useState(()=>t.get("dateFrom")??""),[g,j]=i.useState(()=>t.get("dateTo")??""),[w,E]=i.useState(""),[$,R]=i.useState(!1),[H,O]=i.useState(null),[q,W]=i.useState(""),[se,J]=i.useState(""),[V,ce]=i.useState(""),[pe,S]=i.useState(""),[P,I]=i.useState(""),[B,k]=i.useState("A"),[K,ne]=i.useState(0),[_,z]=i.useState(!1),[U,M]=i.useState(!1),[F,Z]=i.useState(()=>t.get("sortOrder")==="oldest"?"oldest":"newest"),[N,T]=i.useState(()=>t.get("playerMode")==="or"?"or":"and"),G=i.useRef(null),[Q,D]=i.useState([]),[X,ae]=i.useState([]),[ue,xe]=i.useState(null),[ye,be]=i.useState(""),[Ke,ot]=i.useState(""),[le,Ne]=i.useState(""),[Fe,Te]=i.useState(!1),[Se,_e]=i.useState(null),[Be,Xe]=i.useState(null),it=Bl(e),nt=A=>{const he=l.find(L=>L.id===A||L.PK===A);return he&&(he.name||he.id)||A},$t=async()=>{const A=rr();if(A)try{const he=await Y(`${A}/squash/players`);if(!he.ok){const ve=await he.json().catch(()=>({}));throw new Error(ve.error||"Failed")}const te=((await he.json()).players??[]).map(ve=>({...ve,id:ve.id||ve.PK||""}));o(te),D(te)}catch(he){_e((he==null?void 0:he.message)??"Failed to load players")}},fn=async()=>{const A=rr();if(A)try{const he=await Y(`${A}/admin/users?limit=60`);if(!he.ok)return;const L=await he.json();ae(L.users??[])}catch{ae([])}},Et=async()=>{const A=rr();if(!A)return;const he=new URLSearchParams;y&&he.set("date",y),x&&he.set("dateFrom",x),g&&he.set("dateTo",g),c.length&&(he.set("playerIds",c.join(",")),he.set("playerMode",N));const L=he.toString()?`?${he.toString()}`:"";M(!0),_e(null);try{const te=await Y(`${A}/squash/matches${L}`);if(!te.ok){const je=await te.json().catch(()=>({}));throw new Error(je.error||"Failed")}const ve=await te.json();f(ve.matches??[]),b(!0),h(1);const de=new URLSearchParams;y&&de.set("date",y),x&&de.set("dateFrom",x),g&&de.set("dateTo",g),c.length&&(de.set("playerIds",c.join(",")),de.set("playerMode",N)),de.set("sortOrder",F),n(de,{replace:!0})}catch(te){_e((te==null?void 0:te.message)??"Failed to search matches")}finally{M(!1)}},rn=()=>{C(""),p(""),j(""),d([]),T("and"),E(""),b(!1),f([]),h(1),n({},{replace:!0})},oe=A=>{c.includes(A)||d([...c,A]),E("")},ge=A=>{d(c.filter(he=>he!==A))},We=l.filter(A=>!c.includes(A.id)&&(!w.trim()||(A.name||"").toLowerCase().includes(w.toLowerCase()))),Ie=[se,V,pe,P],ke=A=>{const he=A==="p1"?0:A==="p2"?1:A==="p3"?2:3,L=Ie.filter((te,ve)=>ve!==he);return l.filter(te=>!L.includes(te.id))},ee=async A=>{if(A.preventDefault(),!q||!se||!V||!pe||!P){_e("All fields are required.");return}const he=[se,V,pe,P];if(new Set(he).size!==4){_e("Each player can only be on one team.");return}const L=rr();if(!L)return;const de={date:q,teamAPlayer1Id:se,teamAPlayer2Id:V,teamBPlayer1Id:pe,teamBPlayer2Id:P,winningTeam:B,teamAGames:B==="A"?3:K,teamBGames:B==="B"?3:K},je=H?"PUT":"POST";H&&(de.id=H),z(!0),_e(null);try{const we=await Y(`${L}/squash/matches`,{method:je,headers:{"Content-Type":"application/json"},body:JSON.stringify(de)});if(!we.ok){const Pe=await we.json().catch(()=>({}));throw new Error(Pe.error||"Failed")}O(null),W(""),J(""),ce(""),S(""),I(""),k("A"),ne(0),Et()}catch(we){_e((we==null?void 0:we.message)??"Failed")}finally{z(!1)}},me=()=>{O(null),W(""),J(""),ce(""),S(""),I(""),k("A"),ne(0)},Ue=A=>{var L,te;const he=A.id||((te=(L=A.PK)==null?void 0:L.replace)==null?void 0:te.call(L,"SQUASH#MATCH#",""))||"";O(he),W(A.date||""),J(A.teamAPlayer1Id||""),ce(A.teamAPlayer2Id||""),S(A.teamBPlayer1Id||""),I(A.teamBPlayer2Id||""),k(A.winningTeam||"A"),ne(A.winningTeam==="A"?A.teamBGames??0:A.teamAGames??0)},Me=async A=>{if(!confirm("Delete this match?"))return;const he=rr();if(he)try{const L=await Y(`${he}/squash/matches?id=${encodeURIComponent(A)}`,{method:"DELETE"});if(!L.ok){const te=await L.json().catch(()=>({}));throw new Error(te.error||"Failed")}Et()}catch(L){_e((L==null?void 0:L.message)??"Delete failed")}},Ee=async A=>{A.preventDefault();const he=ye.trim();if(!he){_e("Name is required.");return}const L=rr();if(!L)return;const te={name:he,email:Ke.trim()||void 0,userId:le||void 0},ve=ue?"PUT":"POST";ue&&(te.id=ue),Te(!0),_e(null);try{const de=await Y(`${L}/squash/players`,{method:ve,headers:{"Content-Type":"application/json"},body:JSON.stringify(te)});if(!de.ok){const je=await de.json().catch(()=>({}));throw new Error(je.error||"Failed")}xe(null),be(""),ot(""),Ne(""),$t()}catch(de){_e((de==null?void 0:de.message)??"Failed")}finally{Te(!1)}},Le=()=>{xe(null),be(""),ot(""),Ne("")},De=A=>{xe(A.id),be(A.name||""),ot(A.email||""),Ne(A.userId||"")},pn=async A=>{if(!confirm("Delete this player?"))return;const he=rr();if(he)try{const L=await Y(`${he}/squash/players?id=${encodeURIComponent(A)}`,{method:"DELETE"});if(!L.ok){const te=await L.json().catch(()=>({}));throw new Error(te.error||"Failed")}$t()}catch(L){_e((L==null?void 0:L.message)??"Delete failed")}};i.useEffect(()=>{it&&($t(),s==="players"&&fn())},[it,s]);const hn=t.get("date")||t.get("dateFrom")||t.get("dateTo")||t.get("playerIds");i.useEffect(()=>{!it||!hn||Et()},[]),i.useEffect(()=>{function A(he){G.current&&!G.current.contains(he.target)&&R(!1)}if($)return document.addEventListener("mousedown",A),()=>document.removeEventListener("mousedown",A)},[$]);const gt=i.useMemo(()=>{const A=[...u];return A.sort((he,L)=>{const te=he.date||"",ve=L.date||"";return F==="newest"?ve.localeCompare(te):te.localeCompare(ve)}),A},[u,F]),ut=Math.max(1,Math.ceil(gt.length/Mo)),xn=(m-1)*Mo,os=gt.slice(xn,xn+Mo),ql=A=>{const he=A.teamAGames??0,L=A.teamBGames??0;return A.winningTeam==="A"?`${he}-${L}`:`${L}-${he}`},_t=[];if(ut<=7)for(let A=1;A<=ut;A++)_t.push(A);else{const A=m;_t.push(1),A>3&&_t.push("");for(let he=Math.max(2,A-1);he<=Math.min(ut-1,A+1);he++)_t.includes(he)||_t.push(he);A<ut-2&&_t.push(""),ut>1&&_t.push(ut)}return e?it?r.jsxs("div",{className:"space-y-6",children:[r.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Admin"}),r.jsx("p",{className:"text-sm text-slate-400",children:r.jsx(ie,{to:"/squash",className:"text-brand-orange hover:text-orange-400",children:"Squash"})}),(Be||Se)&&r.jsx("div",{className:`rounded-md px-4 py-3 text-sm ${Se?"bg-red-900/30 border border-red-800/50 text-red-200":"bg-emerald-900/30 border border-emerald-800/50 text-emerald-200"}`,children:Se||Be}),r.jsxs("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:[r.jsx("button",{type:"button",onClick:()=>a("matches"),className:`px-4 py-2 rounded-md text-sm font-medium ${s==="matches"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Matches"}),r.jsx("button",{type:"button",onClick:()=>a("players"),className:`px-4 py-2 rounded-md text-sm font-medium ${s==="players"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Players"})]}),s==="matches"&&r.jsxs(r.Fragment,{children:[r.jsxs("section",{children:[r.jsx("h2",{className:"text-base font-semibold text-slate-200 mb-3",children:"Add match"}),r.jsxs("form",{onSubmit:ee,className:"grid grid-cols-2 gap-4 max-w-2xl",children:[r.jsx("div",{className:"col-span-2",children:r.jsx(ur,{id:"matchDate",value:q,onChange:W,label:"Date",required:!0})}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"matchTeamAP1",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Team A  Player 1"}),r.jsxs("select",{id:"matchTeamAP1",value:se,onChange:A=>J(A.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[r.jsx("option",{value:"",children:" Select "}),ke("p1").map(A=>r.jsx("option",{value:A.id,children:A.name||A.id},A.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"matchTeamAP2",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Team A  Player 2"}),r.jsxs("select",{id:"matchTeamAP2",value:V,onChange:A=>ce(A.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[r.jsx("option",{value:"",children:" Select "}),ke("p2").map(A=>r.jsx("option",{value:A.id,children:A.name||A.id},A.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"matchTeamBP1",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Team B  Player 1"}),r.jsxs("select",{id:"matchTeamBP1",value:pe,onChange:A=>S(A.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[r.jsx("option",{value:"",children:" Select "}),ke("p3").map(A=>r.jsx("option",{value:A.id,children:A.name||A.id},A.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"matchTeamBP2",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Team B  Player 2"}),r.jsxs("select",{id:"matchTeamBP2",value:P,onChange:A=>I(A.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[r.jsx("option",{value:"",children:" Select "}),ke("p4").map(A=>r.jsx("option",{value:A.id,children:A.name||A.id},A.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"matchWinningTeam",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Winning team"}),r.jsxs("select",{id:"matchWinningTeam",value:B,onChange:A=>k(A.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[r.jsx("option",{value:"A",children:"Team A"}),r.jsx("option",{value:"B",children:"Team B"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"matchLoserGames",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Games won by losing team"}),r.jsxs("select",{id:"matchLoserGames",value:K,onChange:A=>ne(parseInt(A.target.value,10)),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[r.jsx("option",{value:0,children:"0"}),r.jsx("option",{value:1,children:"1"}),r.jsx("option",{value:2,children:"2"})]})]}),r.jsxs("div",{className:"col-span-2 flex gap-2",children:[r.jsx("button",{type:"submit",disabled:_,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:H?"Update match":"Add match"}),r.jsx("button",{type:"button",onClick:me,className:"rounded-md border border-slate-600 px-4 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"})]})]})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-base font-semibold text-slate-200 mb-3",children:"Search matches"}),r.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[r.jsx(ur,{id:"searchDate",value:y,onChange:C,label:"Date (exact)",className:"max-w-[12rem]"}),r.jsx(ur,{id:"searchDateFrom",value:x,onChange:p,label:"Date from",className:"max-w-[12rem]"}),r.jsx(ur,{id:"searchDateTo",value:g,onChange:j,label:"Date to",className:"max-w-[12rem]"}),r.jsxs("div",{className:"relative max-w-[14rem] min-w-[12rem]",ref:G,children:[r.jsx("label",{className:"block text-xs font-semibold text-slate-400 mb-1",children:"Filter by players"}),r.jsx("input",{type:"text",value:w,onChange:A=>E(A.target.value),onFocus:()=>R(!0),placeholder:"Search players...",autoComplete:"off",className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none"}),$&&r.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-slate-900 border border-slate-700 rounded-md max-h-48 overflow-y-auto z-10",children:We.length?We.map(A=>r.jsx("button",{type:"button",onClick:()=>oe(A.id),className:"w-full text-left px-3 py-2 text-sm text-slate-200 hover:bg-slate-800",children:A.name||A.id},A.id)):r.jsx("div",{className:"px-3 py-2 text-sm text-slate-500",children:"No matches"})}),r.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:c.map(A=>r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-slate-700 text-slate-200 text-xs",children:[nt(A),r.jsx("button",{type:"button",onClick:()=>ge(A),className:"text-slate-400 hover:text-slate-100","aria-label":"Remove",children:""})]},A))}),c.length>0&&r.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[r.jsx("span",{className:"text-xs text-slate-500",children:"Match:"}),r.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[r.jsx("button",{type:"button",onClick:()=>T("and"),className:`rounded px-2 py-0.5 text-xs font-medium ${N==="and"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"AND"}),r.jsx("button",{type:"button",onClick:()=>T("or"),className:`rounded px-2 py-0.5 text-xs font-medium ${N==="or"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"OR"})]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",onClick:Et,disabled:U,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:U?"Searching":"Search"}),r.jsx("button",{type:"button",onClick:rn,className:"rounded-md border border-slate-600 px-4 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Clear"})]})]})]}),r.jsxs("section",{children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-3",children:[r.jsx("h2",{className:"text-base font-semibold text-slate-200",children:"Search results"}),v&&gt.length>0&&r.jsxs("div",{className:"inline-flex rounded-md border border-slate-700 bg-slate-950 p-0.5",children:[r.jsx("button",{type:"button",onClick:()=>Z("newest"),className:`rounded px-2 py-0.5 text-xs font-medium ${F==="newest"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"Newest first"}),r.jsx("button",{type:"button",onClick:()=>Z("oldest"),className:`rounded px-2 py-0.5 text-xs font-medium ${F==="oldest"?"bg-brand-orange text-slate-950":"text-slate-400 hover:text-slate-200"}`,children:"Oldest first"})]})]}),v&&r.jsx("div",{className:"rounded-md border border-slate-800 bg-slate-950/60 px-3 py-2 text-sm text-slate-400 mb-3",children:gt.length===0?"No results":`${gt.length} results`}),v?os.length===0?r.jsx("ul",{className:"list-none p-0",children:r.jsx("li",{className:"py-2 text-slate-400",children:"No matches found."})}):r.jsxs(r.Fragment,{children:[r.jsx("ul",{className:"list-none p-0",children:os.map(A=>{var ve,de;const he=A.id||((de=(ve=A.PK)==null?void 0:ve.replace)==null?void 0:de.call(ve,"SQUASH#MATCH#",""))||"",L=[nt(A.teamAPlayer1Id||""),nt(A.teamAPlayer2Id||"")].filter(Boolean).join(" & "),te=[nt(A.teamBPlayer1Id||""),nt(A.teamBPlayer2Id||"")].filter(Boolean).join(" & ");return r.jsxs("li",{className:"flex items-center gap-2 flex-wrap py-2 border-b border-slate-800 last:border-0",children:[r.jsx("span",{className:"font-semibold text-slate-200",children:A.date||""}),r.jsxs("span",{className:"text-slate-300",children:[L," vs ",te]}),r.jsx("span",{className:"italic text-slate-400",children:ql(A)}),r.jsx("button",{type:"button",onClick:()=>Ue(A),className:"rounded-md border border-slate-600 px-2 py-1 text-xs text-slate-300 hover:bg-slate-800",children:"Edit"}),r.jsx("button",{type:"button",onClick:()=>Me(he),className:"rounded-md border border-red-800/50 px-2 py-1 text-xs text-red-300 hover:bg-red-900/30",children:"Delete"})]},he)})}),ut>1&&r.jsxs("div",{className:"flex items-center gap-2 mt-4 flex-wrap",children:[r.jsx("button",{type:"button",disabled:m<=1,onClick:()=>h(A=>Math.max(1,A-1)),className:"rounded-md border border-slate-600 px-3 py-1 text-sm disabled:opacity-50 disabled:cursor-not-allowed text-slate-300 hover:bg-slate-800",children:"Prev"}),r.jsx("span",{className:"flex items-center gap-1",children:_t.map((A,he)=>A===""?r.jsx("span",{className:"px-1 text-slate-500",children:""},`ellipsis-${he}`):A===m?r.jsx("span",{className:"min-w-[2rem] px-2 py-1 text-center font-semibold text-slate-200",children:A},A):r.jsx("button",{type:"button",onClick:()=>h(A),className:"min-w-[2rem] rounded px-2 py-1 text-sm text-slate-300 hover:bg-slate-800 border border-slate-600",children:A},A))}),r.jsx("button",{type:"button",disabled:m>=ut,onClick:()=>h(A=>Math.min(ut,A+1)),className:"rounded-md border border-slate-600 px-3 py-1 text-sm disabled:opacity-50 disabled:cursor-not-allowed text-slate-300 hover:bg-slate-800",children:"Next"})]})]}):r.jsx("div",{className:"flex items-center justify-center min-h-[280px]",children:r.jsx("p",{className:"text-2xl sm:text-3xl font-light text-slate-500/80 tracking-wide animate-pulse",children:"Enter search criteria and click Search to find matches."})})]})]}),s==="players"&&r.jsxs(r.Fragment,{children:[r.jsxs("section",{children:[r.jsx("h2",{className:"text-base font-semibold text-slate-200 mb-3",children:"Players"}),r.jsxs("form",{onSubmit:Ee,className:"space-y-4 max-w-md",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"playerName",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Name"}),r.jsx("input",{type:"text",id:"playerName",value:ye,onChange:A=>be(A.target.value),required:!0,placeholder:"Player name",className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"playerEmail",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Email (optional)"}),r.jsx("input",{type:"email",id:"playerEmail",value:Ke,onChange:A=>ot(A.target.value),placeholder:"player@example.com",className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"playerUserId",className:"block text-xs font-semibold text-slate-400 mb-1",children:"Link to user (optional)"}),r.jsxs("select",{id:"playerUserId",value:le,onChange:A=>Ne(A.target.value),className:"block w-full rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 focus:border-brand-orange focus:outline-none",children:[r.jsx("option",{value:"",children:" None "}),X.map(A=>r.jsx("option",{value:A.sub||"",children:A.email||A.username||A.sub},A.sub||A.username))]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"submit",disabled:Fe,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:ue?"Update player":"Add player"}),r.jsx("button",{type:"button",onClick:Le,className:"rounded-md border border-slate-600 px-4 py-2 text-sm font-medium text-slate-300 hover:bg-slate-800",children:"Cancel"})]})]})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-base font-semibold text-slate-200 mb-3",children:"Player list"}),Q.length===0?r.jsx("p",{className:"text-sm text-slate-500",children:"No players yet. Add players above."}):r.jsx("ul",{className:"list-none p-0",children:Q.map(A=>r.jsxs("li",{className:"flex items-center gap-2 flex-wrap py-2 border-b border-slate-800 last:border-0",children:[r.jsx("span",{className:"font-semibold text-slate-200",children:A.name||A.id}),A.email&&r.jsxs("span",{className:"text-slate-500 text-sm",children:["(",A.email,")"]}),r.jsx("button",{type:"button",onClick:()=>De(A),className:"rounded-md border border-slate-600 px-2 py-1 text-xs text-slate-300 hover:bg-slate-800",children:"Edit"}),r.jsx("button",{type:"button",onClick:()=>pn(A.id),className:"rounded-md border border-red-800/50 px-2 py-1 text-xs text-red-300 hover:bg-red-900/30",children:"Delete"})]},A.id))})]})]})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Admin"}),r.jsx("div",{className:"rounded-md bg-amber-900/30 border border-amber-800/50 px-4 py-3 text-sm text-amber-200",children:"Squash Admin requires manager (in Squash group) or SuperAdmin access."})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Squash Admin"}),r.jsxs("div",{className:"rounded-md bg-red-900/30 border border-red-800/50 px-4 py-3 text-sm text-red-200",children:["Sign in required. ",r.jsx(ie,{to:"/auth",className:"underline hover:text-red-100",children:"Sign in"})]})]})};function Do(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Oo="funkedupshift_financial_guest_symbols",Ub=()=>{const{user:e}=$e(),t=kg(e),n=zl(e),[s,a]=i.useState([]),[l,o]=i.useState({}),[c,d]=i.useState("yahoo"),[u,f]=i.useState([]),[m,h]=i.useState(!0),[v,b]=i.useState(!1),[y,C]=i.useState(""),[x,p]=i.useState(null),[g,j]=i.useState(null),w=i.useCallback(async()=>{const O=Do();if(O){h(!0),p(null);try{const q=await at(`${O}/financial/config`),W=q.ok?await q.json():{symbols:[],source:"yahoo",availableSources:["yahoo"]},se=W.symbols??[];if(d(W.source??"yahoo"),f(W.availableSources??["yahoo"]),t&&(e!=null&&e.userId)){const J=await Y(`${O}/financial/watchlist`);if(J.ok){const ce=(await J.json()).symbols??[];a(ce.length>0?ce:se)}else a(se)}else{const J=(()=>{try{const V=sessionStorage.getItem(Oo);return V?JSON.parse(V):[]}catch{return[]}})();a(J.length>0?J:se)}}catch(q){p((q==null?void 0:q.message)??"Failed to load watchlist")}finally{h(!1)}}},[t,e==null?void 0:e.userId]),E=i.useCallback(async()=>{const O=Do();if(!O||s.length===0)return;const q={};for(const W of s)try{const se=await at(`${O}/financial/quote?symbol=${encodeURIComponent(W)}&source=${encodeURIComponent(c)}`);if(se.ok){const J=await se.json();q[W]=J}else q[W]=null}catch{q[W]=null}o(q)},[s,c]);i.useEffect(()=>{w()},[w]),i.useEffect(()=>{s.length>0?E():o({})},[s,c,E]);const $=()=>{const O=y.trim().toUpperCase();!O||s.includes(O)||(a(q=>{const W=[...q,O];if(!t)try{sessionStorage.setItem(Oo,JSON.stringify(W))}catch{}return W}),C(""))},R=O=>{a(q=>{const W=q.filter(se=>se!==O);if(!t)try{sessionStorage.setItem(Oo,JSON.stringify(W))}catch{}return W}),o(q=>{const W={...q};return delete W[O],W})},H=async()=>{const O=Do();if(O){b(!0),p(null),j(null);try{const q=await Y(`${O}/financial/watchlist`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbols:s})});if(!q.ok){const W=await q.json().catch(()=>({}));throw new Error(W.error??"Failed to save")}j("Watchlist saved.")}catch(q){p((q==null?void 0:q.message)??"Failed to save")}finally{b(!1)}}};return r.jsxs("div",{className:"space-y-6",children:[r.jsx("h1",{className:"text-xl font-semibold text-slate-100",children:"Financial"}),n&&r.jsx("p",{className:"text-sm text-slate-400",children:r.jsx(ie,{to:"/admin/financial",className:"text-brand-orange hover:text-orange-400",children:"Financial Admin"})}),m?r.jsx("p",{className:"text-sm text-slate-500",children:"Loading"}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex flex-wrap gap-2 items-end",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"newSymbol",className:"block text-xs text-slate-500 mb-1",children:"Add symbol"}),r.jsx("input",{id:"newSymbol",type:"text",value:y,onChange:O=>C(O.target.value.toUpperCase()),onKeyDown:O=>O.key==="Enter"&&(O.preventDefault(),$()),placeholder:"AAPL",className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 w-24"})]}),r.jsx("button",{type:"button",onClick:$,disabled:!y.trim(),className:"rounded-md bg-brand-orange px-3 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:"Add"}),u.length>1&&r.jsxs("div",{className:"ml-4",children:[r.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Data source"}),r.jsx("select",{value:c,onChange:O=>d(O.target.value),className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50",children:u.map(O=>r.jsx("option",{value:O,children:O==="yahoo"?"Yahoo Finance":"Alpha Vantage"},O))})]})]}),s.length>0&&r.jsx("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 overflow-hidden",children:r.jsxs("table",{className:"min-w-full divide-y divide-slate-800",children:[r.jsx("thead",{className:"bg-slate-900/80",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Symbol"}),r.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase",children:"Price"}),r.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-400 uppercase",children:"Change"}),r.jsx("th",{className:"px-4 py-3 w-10"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-800",children:s.map(O=>{const q=l[O];return r.jsxs("tr",{className:"hover:bg-slate-800/50",children:[r.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-200",children:O}),r.jsx("td",{className:"px-4 py-3 text-sm text-right text-slate-300",children:q?`$${q.price.toFixed(2)}`:""}),r.jsx("td",{className:"px-4 py-3 text-sm text-right",children:q?r.jsxs("span",{className:q.change>=0?"text-emerald-400":"text-red-400",children:[q.change>=0?"+":"",q.change.toFixed(2)," (",q.changePercent>=0?"+":"",q.changePercent.toFixed(2),"%)"]}):r.jsx("span",{className:"text-slate-500",children:""})}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("button",{type:"button",onClick:()=>R(O),className:"text-slate-500 hover:text-red-400","aria-label":`Remove ${O}`,children:""})})]},O)})})]})}),t&&s.length>0&&r.jsx("button",{type:"button",onClick:H,disabled:v,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:v?"Saving":"Save watchlist"}),!t&&r.jsx("p",{className:"text-sm text-slate-500",children:"Sign in to save your watchlist. Guest symbols are temporary and expire when you close the browser."}),s.length===0&&r.jsx("p",{className:"text-sm text-slate-500",children:"Add symbols above to build your watchlist. Default symbols from admin may appear when you first load."})]}),g&&r.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:g}),x&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:x})]})};function Fu(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Mb=()=>{const{user:e}=$e(),[t,n]=qt(),s=t.get("tab"),a=s==="members"?"members":s==="symbols"?"symbols":"overview",[l,o]=i.useState(a),[c,d]=i.useState([]),[u,f]=i.useState("yahoo"),[m,h]=i.useState(!1),[v,b]=i.useState(!1),[y,C]=i.useState(null),[x,p]=i.useState(null),[g,j]=i.useState(""),[w]=i.useState(["yahoo","alpha_vantage"]);i.useEffect(()=>{o(s==="members"?"members":s==="symbols"?"symbols":"overview")},[s]);const E=W=>{o(W),n(W==="overview"?{}:{tab:W},{replace:!0})},$=i.useCallback(async()=>{const W=Fu();if(W){h(!0),C(null);try{const se=await Y(`${W}/admin/financial/default-symbols`);if(!se.ok)throw new Error("Failed to load");const J=await se.json();d(J.symbols??[]),f(J.source??"yahoo")}catch(se){C((se==null?void 0:se.message)??"Failed to load")}finally{h(!1)}}},[]);i.useEffect(()=>{l==="symbols"&&$()},[l,$]);const R=()=>{const W=g.trim().toUpperCase();!W||c.includes(W)||(d(se=>[...se,W]),j(""))},H=W=>{d(se=>se.filter(J=>J!==W))},O=async()=>{const W=Fu();if(W){b(!0),C(null),p(null);try{const se=await Y(`${W}/admin/financial/default-symbols`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbols:c,source:u})});if(!se.ok){const J=await se.json().catch(()=>({}));throw new Error(J.error??"Failed to save")}p("Default symbols saved.")}catch(se){C((se==null?void 0:se.message)??"Failed to save")}finally{b(!1)}}};return zl(e)?r.jsxs("div",{className:"space-y-6",children:[r.jsxs(ie,{to:"/financial",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Financial"]}),r.jsxs("header",{className:"space-y-2",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Financial Admin"}),r.jsx("p",{className:"text-sm text-slate-400",children:"Manage Financial section settings, members, and data sources."})]}),r.jsxs("div",{className:"flex gap-2 border-b border-slate-800 pb-2",children:[r.jsx("button",{type:"button",onClick:()=>E("overview"),className:`px-4 py-2 rounded-md text-sm font-medium ${l==="overview"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Overview"}),r.jsx("button",{type:"button",onClick:()=>E("symbols"),className:`px-4 py-2 rounded-md text-sm font-medium ${l==="symbols"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Tracked Symbols"}),r.jsx("button",{type:"button",onClick:()=>E("members"),className:`px-4 py-2 rounded-md text-sm font-medium ${l==="members"?"bg-slate-800 text-slate-100":"text-slate-400 hover:text-slate-200"}`,children:"Members"})]}),l==="overview"&&r.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-6 text-sm text-slate-400",children:[r.jsx("p",{className:"mb-2",children:"Admin configuration:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-1 text-slate-500",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Tracked symbols"}),"  Default symbols for new users' watchlists"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Data source"}),"  Yahoo Finance (no key) or Alpha Vantage (API key in Terraform)"]})]})]}),l==="symbols"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex flex-wrap gap-2 items-end",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"newSymbol",className:"block text-xs text-slate-500 mb-1",children:"Add symbol"}),r.jsx("input",{id:"newSymbol",type:"text",value:g,onChange:W=>j(W.target.value.toUpperCase()),onKeyDown:W=>W.key==="Enter"&&(W.preventDefault(),R()),placeholder:"AAPL",className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 w-24"})]}),r.jsx("button",{type:"button",onClick:R,disabled:!g.trim(),className:"rounded-md bg-brand-orange px-3 py-2 text-sm font-medium text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:"Add"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"Default data source"}),r.jsx("select",{value:u,onChange:W=>f(W.target.value),className:"rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50",children:w.map(W=>r.jsx("option",{value:W,children:W==="yahoo"?"Yahoo Finance":"Alpha Vantage"},W))})]}),c.length>0&&r.jsx("ul",{className:"flex flex-wrap gap-2",children:c.map(W=>r.jsxs("li",{className:"inline-flex items-center gap-1 rounded-md bg-slate-800 px-2 py-1 text-sm text-slate-200",children:[W,r.jsx("button",{type:"button",onClick:()=>H(W),className:"text-slate-500 hover:text-red-400","aria-label":`Remove ${W}`,children:""})]},W))}),r.jsx("button",{type:"button",onClick:O,disabled:v||m,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:v?"Saving":"Save defaults"}),x&&r.jsx("div",{className:"rounded-md border border-emerald-500/60 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200",children:x}),y&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:y})]}),l==="members"&&r.jsx("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-6 text-sm text-slate-400",children:r.jsx("p",{className:"mb-2",children:"Financial access is RBAC-based: guests view default symbols (session-only custom symbols); logged-in users can save their watchlist. No custom group required."})})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Financial Admin"}),r.jsx("p",{className:"text-sm text-slate-400",children:"SuperAdmin access is required."})]})};function Db(e){return typeof window>"u"?e:`${window.location.origin}${e.startsWith("/")?e:`/${e}`}`}const Ob=({memeId:e,title:t="",trigger:n,className:s=""})=>{const[a,l]=i.useState(!1),[o,c]=i.useState(!1),d=i.useRef(null),u=Db(`/memes/${encodeURIComponent(e)}`),f=encodeURIComponent(u),m=encodeURIComponent(t||"Meme"),h=async()=>{try{await navigator.clipboard.writeText(u),c(!0),setTimeout(()=>c(!1),2e3)}catch{}};return i.useEffect(()=>{function v(b){d.current&&!d.current.contains(b.target)&&l(!1)}if(a)return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[a]),r.jsxs("div",{className:`relative inline-block ${s}`,ref:d,children:[r.jsx("button",{type:"button",onClick:()=>l(v=>!v),className:"inline-flex items-center gap-1 text-[11px] text-slate-400 hover:text-slate-200",children:n}),a&&r.jsxs("div",{className:"absolute left-0 top-full z-20 mt-1 min-w-[180px] rounded-lg border border-slate-700 bg-slate-900 p-2 shadow-xl",children:[r.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 mb-2 text-xs font-medium text-slate-500 uppercase",children:[r.jsx(Yc,{className:"h-3.5 w-3.5"}),"Share"]}),r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsxs("button",{type:"button",onClick:h,className:"flex items-center gap-2 rounded px-2 py-1.5 text-left text-sm text-slate-200 hover:bg-slate-800",children:[r.jsx(Qc,{className:"h-4 w-4 text-slate-500"}),"Copy link",o&&r.jsx("span",{className:"text-emerald-400 text-xs",children:""})]}),r.jsx("a",{href:"https://www.instagram.com/",target:"_blank",rel:"noopener noreferrer",title:"Open Instagram",className:"flex items-center gap-2 rounded px-2 py-1.5 text-left text-sm text-slate-200 hover:bg-slate-800",onClick:()=>l(!1),children:"Instagram"}),r.jsx("a",{href:`https://www.facebook.com/sharer/sharer.php?u=${f}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 rounded px-2 py-1.5 text-left text-sm text-slate-200 hover:bg-slate-800",onClick:()=>l(!1),children:"Facebook"}),r.jsx("a",{href:`https://bsky.app/intent/compose?text=${f}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 rounded px-2 py-1.5 text-left text-sm text-slate-200 hover:bg-slate-800",onClick:()=>l(!1),children:"Bluesky"}),r.jsx("a",{href:`https://www.reddit.com/submit?url=${f}&title=${m}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 rounded px-2 py-1.5 text-left text-sm text-slate-200 hover:bg-slate-800",onClick:()=>l(!1),children:"Reddit"})]})]})]})};function Fo(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const _u="memes_my_cache_invalidate",Fb=()=>{const{user:e}=$e(),[t,n]=qt(),s=(t.get("tab")||"all")==="mine"?"mine":"all",[a,l]=i.useState([]),[o,c]=i.useState(()=>t.get("q")??""),[d,u]=i.useState(()=>{const k=t.get("tagIds");return k?k.split(",").filter(Boolean):[]}),[f,m]=i.useState(()=>t.get("tagMode")==="and"?"and":"or"),[h,v]=i.useState(!1),[b,y]=i.useState(""),[C,x]=i.useState("newest"),[p,g]=i.useState(!1),[j,w]=i.useState(null),E=i.useRef(null),[$,R]=i.useState([]),H=i.useRef(null),[O,q]=i.useState(!1),W=gp(e),se=Xr(e),J=Vc(e),V=e&&Xr(e),ce=k=>J||se&&k.userId===(e==null?void 0:e.userId),pe=o.trim().length>0||d.length>0;i.useEffect(()=>{try{const k=sessionStorage.getItem(_u);if(!k)return;sessionStorage.removeItem(_u);const K=JSON.parse(k);if(K.tagOnly&&K.memeId&&K.tags){const ne=(H.current??[]).map(_=>_.PK===K.memeId?{..._,tags:K.tags}:_);if(H.current=ne,s==="mine"){let _=ne;d.length>0&&(_=f==="and"?ne.filter(z=>d.every(U=>(z.tags??[]).includes(U))):ne.filter(z=>d.some(U=>(z.tags??[]).includes(U)))),l(_)}}else q(!0)}catch{}},[]),i.useEffect(()=>{const k=Fo();if(!k)return;let K=!1;return at(`${k}/memes/tags`).then(ne=>ne.ok?ne.json():Promise.reject(new Error("Failed to load tags"))).then(ne=>{K||R((ne.tags??[]).sort((_,z)=>_.localeCompare(z)))}).catch(()=>{}),()=>{K=!0}},[]),i.useEffect(()=>{const k=new URLSearchParams;s==="mine"&&k.set("tab","mine"),pe&&(o.trim()&&k.set("q",o.trim()),d.length&&(k.set("tagIds",d.join(",")),k.set("tagMode",f))),n(k,{replace:!0})},[s,pe,o,d,f,n]),i.useEffect(()=>{const k=Fo();if(!k){w("API URL not set.");return}let K=!1;if(s==="mine"&&V){const _=H.current,z=d.length>0;if(_&&!O&&!o.trim()){q(!1);let U=_;z&&(f==="and"?U=_.filter(M=>d.every(F=>(M.tags??[]).includes(F))):U=_.filter(M=>d.some(F=>(M.tags??[]).includes(F)))),l(U),g(!1);return}}async function ne(){g(!0),w(null);const _=s==="mine"&&V;try{const z=new URLSearchParams;z.set("limit",_?"100":"20"),_&&z.set("mine","1"),o.trim()&&z.set("q",o.trim()),d.length>0&&!_&&(z.set("tagIds",d.join(",")),z.set("tagMode",f));const M=await at(`${k}${e?"/memes":"/memes/cache"}?${z.toString()}`);if(!M.ok){const N=await M.text();throw new Error(`HTTP ${M.status}: ${N}`)}const F=await M.json();if(K)return;const Z=F.memes??[];if(_)if(H.current=Z,q(!1),d.length>0){const N=f==="and"?Z.filter(T=>d.every(G=>(T.tags??[]).includes(G))):Z.filter(T=>d.some(G=>(T.tags??[]).includes(G)));l(N)}else l(Z);else l(Z)}catch(z){K||w((z==null?void 0:z.message)??"Failed to load memes.")}finally{K||g(!1)}}return ne(),()=>{K=!0}},[s,o,d,f,O,V,e]),i.useEffect(()=>{function k(K){E.current&&!E.current.contains(K.target)&&v(!1)}if(h)return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[h]);const S=i.useMemo(()=>$.filter(k=>!d.includes(k)&&(!b.trim()||k.toLowerCase().includes(b.toLowerCase()))),[$,d,b]),P=i.useMemo(()=>{const k=[...a];return k.sort((K,ne)=>{const _=(K.title||K.PK||"").toLowerCase(),z=(ne.title||ne.PK||"").toLowerCase(),U=typeof K.averageRating=="number"?K.averageRating:0,M=typeof ne.averageRating=="number"?ne.averageRating:0,F=K.createdAt||"",Z=ne.createdAt||"";if(C==="newest"){const N=Z.localeCompare(F);return N!==0?N:_.localeCompare(z)}if(C==="oldest"){const N=F.localeCompare(Z);return N!==0?N:_.localeCompare(z)}return C==="avgDesc"?M!==U?M-U:_.localeCompare(z):C==="avgAsc"?U!==M?U-M:_.localeCompare(z):C==="alphaAsc"?_.localeCompare(z):C==="alphaDesc"?z.localeCompare(_):0}),k},[a,C]),I=async(k,K)=>{const ne=Fo();if(ne)try{await at(`${ne}/memes/stars`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({memeId:k,rating:K})}),l(_=>_.map(z=>z.PK===k?{...z,averageRating:K}:z))}catch{}};if(e&&!ea(e))return r.jsxs("div",{className:"space-y-6",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Memes"}),r.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:"You do not have access to Memes. Join the Memes custom group or contact an admin."})]});const B=k=>{const K=new URLSearchParams(t);k==="mine"?K.set("tab","mine"):K.delete("tab"),n(K,{replace:!0})};return i.useEffect(()=>{s==="mine"&&!V&&n(k=>{const K=new URLSearchParams(k);return K.delete("tab"),K},{replace:!0})},[s,V,n]),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("header",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Memes"}),V&&r.jsxs("div",{className:"flex rounded-lg border border-slate-700 bg-slate-900/60 p-0.5",children:[r.jsx("button",{type:"button",onClick:()=>B("all"),className:`rounded-md px-3 py-1 text-sm font-medium transition-colors ${s==="all"?"bg-slate-700 text-slate-50":"text-slate-400 hover:text-slate-200"}`,children:"All"}),r.jsx("button",{type:"button",onClick:()=>B("mine"),className:`rounded-md px-3 py-1 text-sm font-medium transition-colors ${s==="mine"?"bg-slate-700 text-slate-50":"text-slate-400 hover:text-slate-200"}`,children:"My Memes"})]})]}),r.jsx("p",{className:"text-sm text-slate-400",children:s==="mine"?"Your memes, newest first. Filter by tags below.":e?"Browse and rate memes. Latest 20 shown by default.":"The latest user created memes. Sign in to rate or create."})]}),e&&r.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-4","aria-label":"Search and filter",children:[r.jsxs("form",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",onSubmit:k=>{k.preventDefault(),c(o.trim())},children:[r.jsx("input",{type:"text",value:o,onChange:k=>c(k.target.value),placeholder:"Search memes (title, description)",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange"}),r.jsx("button",{type:"submit",className:"inline-flex items-center justify-center rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500",children:"Search"})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-4 sm:gap-6",children:[r.jsxs("div",{ref:E,className:"relative flex-shrink-0 min-w-0 max-w-sm",children:[r.jsx("label",{htmlFor:"meme-tag-filter",className:"block text-xs font-medium text-slate-400 mb-1",children:"Tags (filter by)"}),r.jsx("input",{id:"meme-tag-filter",type:"text",value:b,onChange:k=>y(k.target.value),onFocus:()=>v(!0),placeholder:"Search and select tags",className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",autoComplete:"off"}),h&&r.jsx("div",{className:"absolute left-0 top-full z-10 mt-1 w-full max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",role:"listbox",children:S.length>0?S.map(k=>r.jsx("button",{type:"button",role:"option",onClick:()=>{u(K=>K.includes(k)?K:[...K,k]),y("")},className:"block w-full text-left px-3 py-2 text-sm text-slate-200 hover:bg-slate-800",children:k},k)):r.jsx("div",{className:"px-3 py-2 text-xs text-slate-500",children:"No matching tags"})}),d.length>0&&r.jsxs("div",{className:"mt-2 flex flex-wrap gap-1",children:[d.map(k=>r.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-300",children:[k,r.jsx("button",{type:"button",onClick:()=>u(K=>K.filter(ne=>ne!==k)),className:"hover:text-slate-100","aria-label":`Remove ${k}`,children:""})]},k)),r.jsxs("select",{value:f,onChange:k=>m(k.target.value),className:"rounded border border-slate-700 bg-slate-950 px-2 py-0.5 text-[11px] text-slate-400",children:[r.jsx("option",{value:"or",children:"OR"}),r.jsx("option",{value:"and",children:"AND"})]})]})]}),r.jsxs("div",{className:"flex items-end gap-2",children:[r.jsx("label",{className:"text-xs font-medium text-slate-400",children:"Sort"}),r.jsxs("select",{value:C,onChange:k=>x(k.target.value),className:"rounded-md border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-50 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",children:[r.jsx("option",{value:"newest",children:"Newest first"}),r.jsx("option",{value:"oldest",children:"Oldest first"}),r.jsx("option",{value:"avgDesc",children:"Avg stars (high first)"}),r.jsx("option",{value:"avgAsc",children:"Avg stars (low first)"}),r.jsx("option",{value:"alphaAsc",children:"Title AZ"}),r.jsx("option",{value:"alphaDesc",children:"Title ZA"})]}),r.jsx("span",{className:"text-slate-500",children:P.length===0?"No memes":`${P.length} memes`})]})]})]}),j&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:j}),p?r.jsx("div",{className:"text-sm text-slate-400",children:"Loading memes"}):r.jsxs(r.Fragment,{children:[r.jsx("ul",{className:"space-y-3 mt-2",children:P.map(k=>{const K=k.thumbnailUrl||k.mediaUrl,ne=k.title||k.PK||"Untitled",_=`/memes/${encodeURIComponent(k.PK)}`;return r.jsxs("li",{className:"flex gap-3 rounded-xl border border-slate-800 bg-slate-950/60 p-3",children:[r.jsx(ie,{to:_,className:"h-16 w-24 flex-shrink-0 overflow-hidden rounded-lg border border-slate-700 bg-slate-900 flex items-center justify-center text-xl hover:border-slate-600",children:K?r.jsx("img",{src:K,alt:"",className:"h-full w-full object-cover",onError:z=>{z.currentTarget.style.visibility="hidden"}}):r.jsx("span",{children:""})}),r.jsxs("div",{className:"min-w-0 flex-1 space-y-1",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsx("h2",{className:"truncate text-sm font-semibold text-slate-50",children:r.jsx(ie,{to:_,className:"hover:text-brand-orange",children:ne})}),k.isPrivate&&r.jsx("span",{className:"inline-flex rounded-full bg-slate-900 px-2 py-0.5 text-[10px] uppercase text-slate-500",children:"Private"}),typeof k.averageRating=="number"&&r.jsxs("span",{className:"inline-flex rounded-full bg-slate-900 px-2 py-0.5 text-[11px] text-amber-300",children:[k.averageRating.toFixed(1),""]})]}),k.description&&r.jsx("p",{className:"text-xs text-slate-300 line-clamp-3",children:k.description}),k.tags&&k.tags.length>0&&r.jsx("div",{className:"flex flex-wrap gap-1 pt-1",children:k.tags.map(z=>r.jsx("span",{className:"rounded-full bg-slate-900 px-2 py-0.5 text-[11px] text-slate-300",children:z},z))}),r.jsxs("div",{className:"pt-1 flex items-center gap-3 flex-wrap",children:[r.jsx(Ob,{memeId:k.PK,title:ne,trigger:r.jsxs(r.Fragment,{children:[r.jsx(Yc,{className:"h-3.5 w-3.5"}),"Share"]})}),ce(k)&&r.jsxs(ie,{to:`/memes/${encodeURIComponent(k.PK)}/edit`,className:"inline-flex items-center gap-1 text-[11px] text-slate-400 hover:text-slate-200",children:[r.jsx(oa,{className:"h-3.5 w-3.5"}),"Edit"]}),W&&r.jsxs("label",{className:"inline-flex items-center gap-1 text-[11px] text-slate-400",children:[r.jsx("span",{children:"Rate:"}),r.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-1 py-0.5 text-[11px] text-slate-50",onChange:z=>{const U=Number(z.target.value);U>=1&&U<=5&&I(k.PK,U)},defaultValue:"",children:[r.jsx("option",{value:"",children:"--"}),r.jsx("option",{value:"5",children:"5"}),r.jsx("option",{value:"4",children:"4"}),r.jsx("option",{value:"3",children:"3"}),r.jsx("option",{value:"2",children:"2"}),r.jsx("option",{value:"1",children:"1"})]})]})]})]})]},k.PK)})}),P.length===0&&!p&&r.jsx("div",{className:"flex items-center justify-center min-h-[200px]",children:r.jsx("p",{className:"text-lg text-slate-500",children:s==="mine"?pe?"No memes match the selected tags.":"You haven't created any memes yet. Create one!":pe?"No memes found.":"No memes yet. Create one!"})})]})]})},zp=({tags:e,onTagsChange:t,allTags:n,fetchTags:s,placeholder:a="Type to suggest or create tag, Tab to autocomplete",className:l=""})=>{const[o,c]=i.useState(""),[d,u]=i.useState(!1),[f,m]=i.useState(0),[h,v]=i.useState(null),b=i.useRef(null),y=i.useRef(null),C=i.useRef(null);i.useEffect(()=>{function w(E){C.current&&!C.current.contains(E.target)&&u(!1)}return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),i.useEffect(()=>{if(!s){v(null);return}const w=o.trim();if(w.length===0){v(null);return}b.current&&b.current.abort();const E=new AbortController;b.current=E;const $=setTimeout(()=>{s(w).then(R=>{E.signal.aborted||v(R)}).catch(()=>{E.signal.aborted||v(null)})},80);return()=>{clearTimeout($),E.abort()}},[o,s]);const x=i.useMemo(()=>{const w=o.trim().toLowerCase();return s&&h!==null?h.filter(E=>!e.includes(E)):w?n.filter(E=>!e.includes(E)&&E.toLowerCase().includes(w)):n.filter(E=>!e.includes(E))},[n,e,o,s,h]),p=w=>{const E=w.trim();E&&!e.includes(E)&&t([...e,E]),c(""),m(0)},g=w=>{t(e.filter(E=>E!==w))},j=w=>{if(w.key==="Tab"||w.key==="Enter"){if(w.preventDefault(),x.length>0)p(x[f]??x[0]);else{const E=o.trim();E&&p(E)}return}if(w.key==="ArrowDown"){w.preventDefault(),m(E=>(E+1)%Math.max(1,x.length));return}if(w.key==="ArrowUp"){w.preventDefault(),m(E=>E<=0?Math.max(0,x.length-1):E-1);return}w.key==="Escape"&&(u(!1),m(0))};return r.jsxs("div",{ref:C,className:`relative ${l}`,children:[r.jsx("input",{ref:y,type:"text",value:o,onChange:w=>{c(w.target.value),u(!0),m(0)},onFocus:()=>u(!0),onKeyDown:j,placeholder:a,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500 focus:border-brand-orange focus:outline-none focus:ring-1 focus:ring-brand-orange",autoComplete:"off"}),d&&(x.length>0||o.trim())&&r.jsx("div",{className:"absolute left-0 top-full z-10 mt-1 w-full max-h-48 overflow-auto rounded-md border border-slate-700 bg-slate-900 shadow-lg",role:"listbox",children:x.length>0?x.map((w,E)=>r.jsx("button",{type:"button",role:"option","aria-selected":E===f,onClick:()=>p(w),onMouseEnter:()=>m(E),className:`block w-full text-left px-3 py-2 text-sm text-slate-200 hover:bg-slate-800 ${E===f?"bg-slate-800":""}`,children:w},w)):r.jsxs("button",{type:"button",onClick:()=>o.trim()&&p(o.trim()),className:"block w-full text-left px-3 py-2 text-sm text-slate-200 hover:bg-slate-800",children:['Create "',o.trim(),'"']})}),e.length>0&&r.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:e.map(w=>r.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-300",children:[w,r.jsx("button",{type:"button",onClick:()=>g(w),className:"hover:text-slate-100","aria-label":`Remove ${w}`,children:""})]},w))})]})},Bu=["Impact","Arial Black","Comic Sans MS","Georgia","Verdana","Times New Roman","Courier New"],_o=[{id:"top-left",x:.05,y:.05,align:"left"},{id:"top-center",x:.5,y:.05,align:"center"},{id:"top-right",x:.95,y:.05,align:"right"},{id:"center",x:.5,y:.5,align:"center"},{id:"bottom-left",x:.05,y:.95,align:"left"},{id:"bottom-center",x:.5,y:.95,align:"center"},{id:"bottom-right",x:.95,y:.95,align:"right"}],$a=500,_b=2048,Bb=10*1024*1024;function vs(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const zb=()=>{const{user:e}=$e(),t=Vt(),n=i.useRef(null),s=i.useRef([]),[a,l]=i.useState(null),[o,c]=i.useState(null),[d,u]=i.useState(""),[f,m]=i.useState([]),[h,v]=i.useState(null),[b,y]=i.useState(""),[C,x]=i.useState(""),[p,g]=i.useState(!1),[j,w]=i.useState("resize"),[E,$]=i.useState(!1),[R,H]=i.useState(null),[O,q]=i.useState(!1),[W,se]=i.useState([]),[J,V]=i.useState([]),ce=_=>{const z=s.current;if(z.some(M=>M.zoneId===_))return;const U=[...z,{zoneId:_,text:"",font:Bu[0],color:"#ffffff",size:32}];s.current=U,m(U),v(_)},pe=_=>{const U=s.current.filter(M=>M.zoneId!==_);s.current=U,m(U),h===_&&v(null)},S=(_,z)=>{const M=s.current.map(F=>F.zoneId===_?{...F,...z}:F);s.current=M,m(M)},P=_=>{if(_.size>Bb){H("File too large (max 10MB)");return}if(!["image/jpeg","image/png","image/gif","image/webp","image/bmp"].includes(_.type)){H("Invalid image type");return}H(null);const U=new FileReader;U.onload=()=>l(U.result),U.readAsDataURL(_),c(_),u("")},I=async()=>{const _=d.trim();if(_){H(null);try{const U=await(await Y(`${vs()}/memes/import-from-url`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:_})})).json();if(!U.presignedUrl){H(U.error||"Failed to load image from URL");return}l(U.presignedUrl),c(null)}catch(z){H((z==null?void 0:z.message)??"Failed to load image from URL")}}},B=async()=>{const _=vs();if(_){q(!0),H(null);try{const U=await(await Y(`${_}/memes/generate-title`,{method:"POST"})).json();U.title&&y(U.title)}catch{y(`Meme ${Date.now().toString(36)}`)}finally{q(!1)}}},k=i.useCallback(()=>{const _=n.current;if(!_||!a)return Promise.resolve();const z=_.getContext("2d");return z?new Promise((U,M)=>{const F=new Image;F.crossOrigin="anonymous",F.onload=()=>{const Z=_.width,N=_.height;z.clearRect(0,0,Z,N);let T=0,G=0,Q=Z,D=N;if(j==="resize")z.drawImage(F,0,0,Z,N);else{const ae=Math.min(Z/F.width,N/F.height);Q=F.width*ae,D=F.height*ae,T=(Z-Q)/2,G=(N-D)/2,z.drawImage(F,T,G,Q,D)}const X=j==="original"?Math.min(Q,D)/$a:1;s.current.forEach(ae=>{const ue=_o.find(be=>be.id===ae.zoneId);if(!ue||!ae.text)return;z.font=`${Math.round(ae.size*X)}px ${ae.font}`,z.fillStyle=ae.color,z.textAlign=ue.align,z.textBaseline=ue.y<.5?"top":"bottom";const xe=T+ue.x*Q,ye=G+ue.y*D;z.fillText(ae.text,xe,ye)}),U()},F.onerror=()=>{H("Failed to load image"),M(new Error("Failed to load image"))},F.src=a}):Promise.resolve()},[a,f,j]);i.useEffect(()=>{k().catch(()=>{})},[k]),i.useEffect(()=>{const _=vs();if(!_)return;let z=!1;return fetch(`${_}/memes/tags`).then(U=>U.ok?U.json():Promise.reject(new Error("Failed to load tags"))).then(U=>{z||V((U.tags??[]).sort((M,F)=>M.localeCompare(F)))}).catch(()=>{}),()=>{z=!0}},[]);const K=async()=>{if(!a){H("Add an image first");return}const _=vs();if(!_){H("API not configured");return}$(!0),H(null);try{let z;if(j==="original"){const T=await new Promise((xe,ye)=>{const be=new Image;be.crossOrigin="anonymous",be.onload=()=>xe(be),be.onerror=()=>ye(new Error("Failed to load image")),be.src=a}),G=Math.min(1,_b/Math.max(T.width,T.height)),Q=Math.round(T.width*G),D=Math.round(T.height*G),X=document.createElement("canvas");X.width=Q,X.height=D;const ae=X.getContext("2d");ae.drawImage(T,0,0,Q,D);const ue=Math.min(Q,D)/$a;s.current.forEach(xe=>{const ye=_o.find(be=>be.id===xe.zoneId);!ye||!xe.text||(ae.font=`${Math.round(xe.size*ue)}px ${xe.font}`,ae.fillStyle=xe.color,ae.textAlign=ye.align,ae.textBaseline=ye.y<.5?"top":"bottom",ae.fillText(xe.text,ye.x*Q,ye.y*D))}),z=await new Promise(xe=>{X.toBlob(ye=>xe(ye),"image/png",.95)})}else{const T=n.current;if(!T)throw new Error("Canvas not available");await k(),await new Promise(G=>requestAnimationFrame(G)),z=await new Promise(G=>{T.toBlob(Q=>G(Q),"image/png",.95)})}if(!z)throw new Error("Failed to export canvas");const M=await(await Y(`${_}/memes/upload`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contentType:"image/png"})})).json();if(!M.uploadUrl||!M.key)throw new Error(M.error||"Failed to get upload URL");const F=M.key;await fetch(M.uploadUrl,{method:"PUT",body:z,headers:{"Content-Type":"image/png"}});const Z=await Y(`${_}/memes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mediaKey:F,title:b.trim()||void 0,description:C.trim()||void 0,isPrivate:p,textBoxes:s.current,sizeMode:j,tags:W})});if(!Z.ok){const T=await Z.json();throw new Error(T.error||"Failed to save meme")}const N=await Z.json();try{sessionStorage.setItem("memes_my_cache_invalidate",JSON.stringify({tagOnly:!1}))}catch{}t(N.id?`/memes/${encodeURIComponent(N.id)}`:"/memes")}catch(z){H((z==null?void 0:z.message)??"Failed to save meme")}finally{$(!1)}},ne=Xr(e)||!!(e!=null&&e.impersonated);return e?ne?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("header",{className:"flex items-center gap-4",children:[r.jsxs(ie,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Memes"]}),r.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-slate-50",children:"Meme Generator"})]}),r.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1fr,320px]",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[r.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-2",children:"Image"}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("input",{type:"file",accept:"image/jpeg,image/png,image/gif,image/webp,image/bmp",onChange:_=>{var z;return((z=_.target.files)==null?void 0:z[0])&&P(_.target.files[0])},className:"text-sm text-slate-300 file:mr-2 file:rounded file:border-0 file:bg-brand-orange file:px-3 file:py-1 file:text-slate-950"}),r.jsx("span",{className:"text-xs text-slate-500",children:"or"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"url",value:d,onChange:_=>u(_.target.value),placeholder:"Paste image URL",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500"}),r.jsx("button",{type:"button",onClick:I,className:"rounded-md bg-slate-700 px-3 py-2 text-sm text-slate-200 hover:bg-slate-600",children:"Load"})]})]})]}),a&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("label",{className:"text-xs font-medium text-slate-400",children:"Preview"}),r.jsxs("div",{className:"flex rounded-md border border-slate-700 overflow-hidden",children:[r.jsx("button",{type:"button",onClick:()=>w("resize"),className:`px-3 py-1 text-xs transition-colors ${j==="resize"?"bg-brand-orange text-slate-950 font-medium":"bg-slate-950 text-slate-400 hover:text-slate-200"}`,children:"Resize to fit"}),r.jsx("button",{type:"button",onClick:()=>w("original"),className:`px-3 py-1 text-xs transition-colors ${j==="original"?"bg-brand-orange text-slate-950 font-medium":"bg-slate-950 text-slate-400 hover:text-slate-200"}`,children:"Original"})]})]}),r.jsx("canvas",{ref:n,width:$a,height:$a,className:"w-full max-w-[500px] border border-slate-700 rounded-lg bg-slate-900"})]}),r.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4",children:[r.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-2",children:"Text boxes (fixed zones)"}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:_o.map(_=>{const z=f.find(U=>U.zoneId===_.id);return r.jsxs("div",{className:"rounded border border-slate-700 p-2",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("span",{className:"text-xs text-slate-400",children:_.id}),z?r.jsx("button",{type:"button",onClick:()=>pe(_.id),className:"text-red-400 hover:text-red-300 text-xs",children:"Remove"}):r.jsx("button",{type:"button",onClick:()=>ce(_.id),className:"text-brand-orange hover:text-orange-400 text-xs",children:"Add"})]}),z&&r.jsxs("div",{className:"space-y-1",children:[r.jsx("input",{type:"text",value:z.text,onChange:U=>S(_.id,{text:U.target.value}),placeholder:"Text",className:"w-full rounded border border-slate-700 bg-slate-950 px-2 py-1 text-xs text-slate-50"}),r.jsx("select",{value:z.font,onChange:U=>S(_.id,{font:U.target.value}),className:"w-full rounded border border-slate-700 bg-slate-950 px-2 py-1 text-[11px] text-slate-300",children:Bu.map(U=>r.jsx("option",{value:U,children:U},U))}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("input",{type:"color",value:z.color,onChange:U=>S(_.id,{color:U.target.value}),className:"h-6 w-8 cursor-pointer rounded border border-slate-700"}),r.jsx("input",{type:"number",value:z.size,onChange:U=>S(_.id,{size:Number(U.target.value)||32}),min:12,max:72,className:"w-14 rounded border border-slate-700 bg-slate-950 px-1 py-0.5 text-[11px] text-slate-50"})]})]})]},_.id)})})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Title (optional)"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:b,onChange:_=>y(_.target.value),placeholder:"Generate or type",className:"flex-1 rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500"}),r.jsx("button",{type:"button",onClick:B,disabled:O,className:"rounded-md bg-brand-orange px-3 py-2 text-sm font-medium text-slate-950 disabled:opacity-50",children:O?"":"Generate"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Description (optional)"}),r.jsx("textarea",{value:C,onChange:_=>x(_.target.value),placeholder:"Optional description",rows:3,className:"w-full rounded-md border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-50 placeholder:text-slate-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Tags"}),r.jsx(zp,{tags:W,onTagsChange:se,allTags:J,fetchTags:async _=>{const z=vs();if(!z)return[];const U=await Y(`${z}/memes/tags?q=${encodeURIComponent(_)}`);return U.ok?(await U.json()).tags??[]:[]},placeholder:"Type to suggest or create tag, Tab to autocomplete"})]}),r.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:[r.jsx("input",{type:"checkbox",checked:p,onChange:_=>g(_.target.checked),className:"rounded border-slate-600"}),"Private (only you can see)"]})]}),R&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:R}),r.jsx("button",{type:"button",onClick:K,disabled:!a||E,className:"w-full rounded-md bg-brand-orange px-4 py-3 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50 disabled:cursor-not-allowed",children:E?"Saving":"Save meme"})]})]})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsx("h1",{className:"text-2xl font-semibold text-slate-50",children:"Meme Generator"}),r.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:"Meme creator access required (user + Memes group). Join the Memes custom group or contact an admin."})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsx("h1",{className:"text-2xl font-semibold text-slate-50",children:"Meme Generator"}),r.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:"Sign in to create memes."})]})};function Gb(e){return typeof window>"u"?e:`${window.location.origin}${e.startsWith("/")?e:`/${e}`}`}const Gp=({memeId:e,title:t="",className:n="",mediaUrl:s})=>{const[a,l]=i.useState(!1),[o,c]=i.useState(!1),d=Gb(`/memes/${encodeURIComponent(e)}`),u=encodeURIComponent(d),f=encodeURIComponent(t||"Meme"),v=[{label:"Copy link",icon:a?"":null,onClick:async()=>{try{await navigator.clipboard.writeText(d),l(!0),setTimeout(()=>l(!1),2e3)}catch{}},href:null},...s?[{label:"Copy URL",icon:o?"":null,onClick:async()=>{if(s)try{await navigator.clipboard.writeText(s),c(!0),setTimeout(()=>c(!1),2e3)}catch{}},href:null}]:[],{label:"Instagram",href:"https://www.instagram.com/",title:"Open Instagram (copy link first to share)"},{label:"Facebook",href:`https://www.facebook.com/sharer/sharer.php?u=${u}`},{label:"Bluesky",href:`https://bsky.app/intent/compose?text=${u}`},{label:"Reddit",href:`https://www.reddit.com/submit?url=${u}&title=${f}`}];return r.jsxs("div",{className:`rounded-xl border border-slate-800 bg-slate-950/60 p-4 ${n}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Yc,{className:"h-4 w-4 text-slate-400"}),r.jsx("span",{className:"text-xs font-medium text-slate-400 uppercase",children:"Share"})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:v.map(b=>b.onClick?r.jsxs("button",{type:"button",onClick:b.onClick,className:"inline-flex items-center gap-1.5 rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 hover:bg-slate-800 hover:border-slate-600",children:[b.icon?r.jsx("span",{className:"text-emerald-400",children:b.icon}):r.jsx(Qc,{className:"h-4 w-4 text-slate-400"}),b.label]},b.label):r.jsx("a",{href:b.href,target:"_blank",rel:"noopener noreferrer",title:b.title,className:"inline-flex items-center gap-1.5 rounded-md border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-slate-200 hover:bg-slate-800 hover:border-slate-600",children:b.label},b.label))})]})};function Bo(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Wb=()=>{const{id:e}=as(),{user:t}=$e(),n=Vt(),[s,a]=i.useState(null),[l,o]=i.useState(!0),[c,d]=i.useState(null),[u,f]=i.useState(!1),[m,h]=i.useState(!1),v=!!s&&(Vc(t)||Xr(t)&&s.userId===(t==null?void 0:t.userId)),b=!!s&&lt(t,"superadmin"),y=e?decodeURIComponent(e):"";i.useEffect(()=>{const j=Bo();if(!j||!y){d(y?"API URL not set.":"Missing meme id."),o(!1);return}let w=!1;async function E(){o(!0),d(null);try{const R=await at(`${j}${t?"/memes":"/memes/cache"}?id=${encodeURIComponent(y)}`);if(R.status===404){w||a(null);return}if(!R.ok){const O=await R.text();throw new Error(`HTTP ${R.status}: ${O}`)}const H=await R.json();if(w)return;a(H.meme??null)}catch($){w||d(($==null?void 0:$.message)??"Failed to load meme.")}finally{w||o(!1)}}return E(),()=>{w=!0}},[y,t]);const C=async j=>{const w=Bo();if(!(!w||!s))try{const E=await at(`${w}/memes/stars`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({memeId:s.PK,rating:j})});if(E.ok){const $=await E.json();a(R=>R?{...R,averageRating:$.averageRating??j}:null)}}catch{}},x=async()=>{const j=Bo();if(!(!j||!s)){f(!0),d(null);try{const w=await at(`${j}/memes`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:s.PK})});if(!w.ok){const E=await w.json();throw new Error(E.error||"Failed to delete meme")}try{sessionStorage.setItem("memes_my_cache_invalidate",JSON.stringify({tagOnly:!1}))}catch{}n("/memes")}catch(w){d((w==null?void 0:w.message)??"Failed to delete meme"),h(!1)}finally{f(!1)}}};if(!t||ea(t),t&&!ea(t))return r.jsxs("div",{className:"space-y-6",children:[r.jsxs(ie,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Memes"]}),r.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:"Sign in and join Memes group to view."})]});if(l)return r.jsxs("div",{className:"space-y-4",children:[r.jsxs(ie,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Memes"]}),r.jsx("div",{className:"text-sm text-slate-400",children:"Loading"})]});if(c||!s)return r.jsxs("div",{className:"space-y-4",children:[r.jsxs(ie,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Memes"]}),r.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:c||"Meme not found."})]});const p=s.title||s.PK||"Untitled",g=s.mediaUrl||s.thumbnailUrl;return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("header",{className:"flex items-center justify-between gap-4",children:[r.jsxs(ie,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Memes"]}),r.jsxs("div",{className:"flex items-center gap-3",children:[v&&r.jsxs(ie,{to:`/memes/${encodeURIComponent(s.PK)}/edit`,className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(oa,{className:"h-4 w-4"}),"Edit"]}),b&&!m&&r.jsxs("button",{type:"button",onClick:()=>h(!0),className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-red-400",children:[r.jsx(qg,{className:"h-4 w-4"}),"Delete"]}),b&&m&&r.jsxs("span",{className:"inline-flex items-center gap-2 text-sm",children:[r.jsx("span",{className:"text-red-400",children:"Delete this meme?"}),r.jsx("button",{type:"button",onClick:x,disabled:u,className:"rounded-md bg-red-600 px-2.5 py-1 text-xs font-semibold text-white hover:bg-red-500 disabled:opacity-50",children:u?"Deleting":"Confirm"}),r.jsx("button",{type:"button",onClick:()=>h(!1),disabled:u,className:"text-xs text-slate-500 hover:text-slate-300",children:"Cancel"})]})]})]}),r.jsx("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 overflow-hidden min-h-[200px] flex items-center justify-center p-4",children:g?r.jsxs(r.Fragment,{children:[r.jsx("img",{src:g,alt:p,className:"w-full max-w-2xl mx-auto block object-contain max-h-[70vh]",onError:j=>{j.currentTarget.style.display="none";const w=j.currentTarget.nextElementSibling;w&&w.classList.remove("hidden")}}),r.jsx("div",{className:"hidden py-12 text-slate-500","aria-hidden":!0,children:"Image failed to load"})]}):r.jsx("div",{className:"py-12 text-slate-500",children:"No image"})}),r.jsx(Gp,{memeId:s.PK,title:p,mediaUrl:lt(t,"manager")?g:void 0}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h1",{className:"text-xl font-semibold text-slate-50",children:p}),s.isPrivate&&r.jsx("span",{className:"inline-flex rounded-full bg-slate-900 px-2 py-0.5 text-xs uppercase text-slate-500",children:"Private"}),s.description&&r.jsx("p",{className:"text-sm text-slate-300",children:s.description}),r.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[r.jsx("span",{className:"text-xs text-slate-500",children:"Tags:"}),s.tags&&s.tags.length>0?s.tags.map(j=>r.jsx("span",{className:"rounded-full bg-slate-800 px-2 py-0.5 text-xs text-slate-300",children:j},j)):r.jsx("span",{className:"text-xs text-slate-500",children:""})]}),t&&gp(t)&&r.jsx("div",{className:"pt-2",children:r.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-400",children:[r.jsx("span",{children:"Rate:"}),r.jsxs("select",{className:"rounded border border-slate-700 bg-slate-950 px-2 py-1 text-sm text-slate-50",onChange:j=>{const w=Number(j.target.value);w>=1&&w<=5&&C(w)},defaultValue:"",children:[r.jsx("option",{value:"",children:"--"}),r.jsx("option",{value:"5",children:"5"}),r.jsx("option",{value:"4",children:"4"}),r.jsx("option",{value:"3",children:"3"}),r.jsx("option",{value:"2",children:"2"}),r.jsx("option",{value:"1",children:"1"})]}),typeof s.averageRating=="number"&&r.jsxs("span",{className:"text-amber-300",children:[s.averageRating.toFixed(1),""]})]})})]})]})};function zo(){if(typeof window>"u")return null;const e=window.API_BASE_URL;return e?e.replace(/\/$/,""):null}const Hb=()=>{const{id:e}=as(),t=Vt(),{user:n}=$e(),[s,a]=i.useState(null),[l,o]=i.useState([]),[c,d]=i.useState(!1),[u,f]=i.useState(!0),[m,h]=i.useState(!1),[v,b]=i.useState(null),[y,C]=i.useState([]),x=e?decodeURIComponent(e):"",p=!!(n&&(Xr(n)||Vc(n)));i.useEffect(()=>{const $=zo();if(!$||!x){b(x?"API URL not set.":"Missing meme id."),f(!1);return}let R=!1;async function H(){var O,q;f(!0),b(null);try{const[W,se]=await Promise.all([Y(`${$}/memes?id=${encodeURIComponent(x)}`),Y(`${$}/memes/tags`)]);if(W.status===404||!W.ok){R||a(null);return}const J=await W.json(),V=await se.json();if(R)return;a(J.meme??null),o(((O=J.meme)==null?void 0:O.tags)??[]),d(((q=J.meme)==null?void 0:q.isPrivate)??!1),C((V.tags??[]).sort((ce,pe)=>ce.localeCompare(pe)))}catch(W){R||b((W==null?void 0:W.message)??"Failed to load meme.")}finally{R||f(!1)}}return H(),()=>{R=!0}},[x]);const g=i.useRef(null);i.useEffect(()=>{s&&g.current===null&&(g.current=s.isPrivate??!1)},[s]);const j=async()=>{const $=zo();if(!(!$||!s)){h(!0),b(null);try{const R=await Y(`${$}/memes`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:s.PK,tags:l,isPrivate:c})});if(!R.ok){const O=await R.json();throw new Error(O.error||"Failed to save")}const H=g.current===(c??!1);try{sessionStorage.setItem("memes_my_cache_invalidate",JSON.stringify({memeId:s.PK,tagOnly:H,tags:l}))}catch{}t(`/memes/${encodeURIComponent(s.PK)}`)}catch(R){b((R==null?void 0:R.message)??"Failed to save")}finally{h(!1)}}};if(!n||!p)return r.jsxs("div",{className:"space-y-6",children:[r.jsxs(ie,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Memes"]}),r.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:"Sign in and join Memes group to edit."})]});if(u)return r.jsxs("div",{className:"space-y-4",children:[r.jsxs(ie,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Memes"]}),r.jsx("div",{className:"text-sm text-slate-400",children:"Loading"})]});if(v||!s)return r.jsxs("div",{className:"space-y-4",children:[r.jsxs(ie,{to:"/memes",className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Memes"]}),r.jsx("div",{className:"rounded-md border border-slate-700 bg-slate-900/60 px-4 py-3 text-slate-200",children:v||"Meme not found."})]});const w=s.mediaUrl||s.thumbnailUrl,E=s.title||s.PK||"Untitled";return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("header",{className:"flex items-center gap-4",children:[r.jsxs(ie,{to:`/memes/${encodeURIComponent(s.PK)}`,className:"inline-flex items-center gap-1 text-sm text-slate-400 hover:text-slate-200",children:[r.jsx(Ge,{className:"h-4 w-4"}),"Back to Meme"]}),r.jsx("h1",{className:"text-xl font-semibold text-slate-50",children:"Edit meme"})]}),r.jsx("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 overflow-hidden min-h-[200px] flex items-center justify-center p-4",children:w?r.jsxs(r.Fragment,{children:[r.jsx("img",{src:w,alt:E,className:"w-full max-w-2xl mx-auto block object-contain max-h-[70vh]",onError:$=>{$.currentTarget.style.display="none";const R=$.currentTarget.nextElementSibling;R&&R.classList.remove("hidden")}}),r.jsx("div",{className:"hidden py-12 text-slate-500","aria-hidden":!0,children:"Image failed to load"})]}):r.jsx("div",{className:"py-12 text-slate-500",children:"No image"})}),r.jsx(Gp,{memeId:s.PK,title:E}),r.jsxs("div",{className:"rounded-xl border border-slate-800 bg-slate-950/60 p-4 space-y-4 max-w-xl",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Tags"}),r.jsx(zp,{tags:l,onTagsChange:o,allTags:y,fetchTags:async $=>{const R=zo();if(!R)return[];const H=await Y(`${R}/memes/tags?q=${encodeURIComponent($)}`);return H.ok?(await H.json()).tags??[]:[]},placeholder:"Type to suggest or create tag, Tab to autocomplete"})]}),r.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-300",children:[r.jsx("input",{type:"checkbox",checked:c,onChange:$=>d($.target.checked),className:"rounded border-slate-600"}),"Private (only you can see)"]}),v&&r.jsx("div",{className:"rounded-md border border-red-500/60 bg-red-500/10 px-3 py-2 text-xs text-red-200",children:v}),r.jsx("button",{type:"button",onClick:j,disabled:m,className:"rounded-md bg-brand-orange px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-orange-500 disabled:opacity-50",children:m?"Saving":"Save"})]})]})},Kb=()=>{const{user:e}=$e(),{siteName:t}=qc();return Ae.useEffect(()=>{t&&(document.title=t)},[t]),r.jsxs("div",{className:"min-h-screen bg-slate-950 text-slate-50 flex flex-col",children:[r.jsx(Gv,{}),r.jsx("main",{className:"flex-1 min-w-0",children:r.jsx("div",{className:"container-max py-6",children:r.jsxs(lg,{children:[r.jsx(Oe,{path:"/",element:r.jsx(Kv,{})}),r.jsx(Oe,{path:"/websites",element:r.jsx(Vv,{})}),r.jsx(Oe,{path:"/websites/:id",element:r.jsx(qv,{})}),r.jsx(Oe,{path:"/media",element:r.jsx(Jv,{})}),r.jsx(Oe,{path:"/media/:id",element:r.jsx(Qv,{})}),r.jsx(Oe,{path:"/internet-dashboard",element:r.jsx(tb,{})}),r.jsx(Oe,{path:"/recommended/highlights",element:r.jsx(rb,{})}),r.jsx(Oe,{path:"/recommended/highest-rated",element:r.jsx(lb,{})}),r.jsx(Oe,{path:"/squash",element:r.jsx($b,{})}),r.jsx(Oe,{path:"/squash-admin",element:r.jsx(Ib,{})}),r.jsx(Oe,{path:"/memes",element:r.jsx(Fb,{})}),r.jsx(Oe,{path:"/memes/create",element:r.jsx(zb,{})}),r.jsx(Oe,{path:"/memes/:id/edit",element:r.jsx(Hb,{})}),r.jsx(Oe,{path:"/memes/:id",element:r.jsx(Wb,{})}),r.jsx(Oe,{path:"/financial",element:r.jsx(Ub,{})}),r.jsx(Oe,{path:"/admin/financial",element:r.jsx(Mb,{})}),r.jsx(Oe,{path:"/admin/branding",element:r.jsx(cb,{})}),r.jsx(Oe,{path:"/admin/internet-dashboard",element:r.jsx(db,{})}),r.jsx(Oe,{path:"/admin/recommended",element:r.jsx(ub,{})}),r.jsx(Oe,{path:"/admin/membership",element:r.jsx(fb,{})}),r.jsx(Oe,{path:"/admin/users/edit",element:r.jsx(Sb,{})}),r.jsx(Oe,{path:"/admin/websites",element:r.jsx(xb,{})}),r.jsx(Oe,{path:"/admin/sites/edit/:id",element:r.jsx(bb,{})}),r.jsx(Oe,{path:"/admin/media",element:r.jsx(yb,{})}),r.jsx(Oe,{path:"/admin/media/edit/:id",element:r.jsx(wb,{})}),r.jsx(Oe,{path:"/admin/*",element:r.jsx("div",{children:"Admin area"})}),r.jsx(Oe,{path:"/profile",element:r.jsx(Lb,{})}),r.jsx(Oe,{path:"/auth",element:r.jsx(kb,{})}),r.jsx(Oe,{path:"*",element:r.jsx("div",{children:"Not found"})})]})})}),r.jsx("footer",{className:"border-t border-slate-800 bg-slate-950",children:r.jsxs("div",{className:"container-max py-4 flex flex-col sm:flex-row items-center justify-between gap-3 text-xs text-slate-500",children:[r.jsxs("nav",{className:"flex flex-wrap gap-3 justify-center sm:justify-start",children:[r.jsx(ie,{to:"/",className:"hover:text-slate-300",children:"Home"}),r.jsx(ie,{to:"/websites",className:"hover:text-slate-300",children:"Websites"}),r.jsx(ie,{to:"/media",className:"hover:text-slate-300",children:"Media"}),r.jsx(ie,{to:"/internet-dashboard",className:"hover:text-slate-300",children:"Internet dashboard"}),r.jsx(ie,{to:"/recommended/highlights",className:"hover:text-slate-300",children:"Highlights"}),r.jsx(ie,{to:"/recommended/highest-rated",className:"hover:text-slate-300",children:"Highest rated"}),e&&r.jsx(ie,{to:"/profile",className:"hover:text-slate-300",children:"Profile"}),lt(e??null,"superadmin")&&r.jsx(ie,{to:"/admin/branding",className:"hover:text-slate-300",children:"Branding"}),_l(e)&&r.jsx(ie,{to:"/squash",className:"hover:text-slate-300",children:"Squash"}),Bl(e)&&r.jsx(ie,{to:"/squash-admin",className:"hover:text-slate-300",children:"Squash Admin"}),(!e||ea(e))&&r.jsx(ie,{to:"/memes",className:"hover:text-slate-300",children:"Memes"}),r.jsx(ie,{to:"/financial",className:"hover:text-slate-300",children:"Financial"}),zl(e)&&r.jsx(ie,{to:"/admin/financial",className:"hover:text-slate-300",children:"Financial Admin"})]}),r.jsxs("div",{className:"text-slate-600",children:[r.jsx("span",{className:"font-mono text-[11px]",children:t.toLowerCase().replace(/\s+/g,"")})," ",r.jsx("span",{className:"text-slate-700",children:""})," ",r.jsx("span",{children:"All data public, admin-managed curation"})]})]})})]})},zu=document.getElementById("root");zu&&Go.createRoot(zu).render(r.jsx(Ae.StrictMode,{children:r.jsx(hg,{children:r.jsx(wg,{children:r.jsx(Ng,{children:r.jsx(Eg,{children:r.jsx(Kb,{})})})})})}));
